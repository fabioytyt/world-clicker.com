import{A as Eo,B as ri,C as d_,a as X,b as vt,c as Jk,d as e1,e as a_,f as U,g as BE,h as lf,i as jE,j as zE,k as UE,l as c_,m as $E,n as Eu,o as l_,p as uf,q as HE,r as qE,s as u_,t as Ot,u as Cs,v as sr,w as df,x as Cu,y as GE,z as WE}from"./chunk-JHDVRTR6.js";var LS=Jk((vm,OS)=>{(function(t,e){typeof vm=="object"&&typeof OS<"u"?e(vm):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.leaflet={}))})(vm,function(t){"use strict";var e="1.9.4";function n(s){var l,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(l in _)s[l]=_[l]}return s}var i=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function r(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,l,h){var p,_,b,x;return x=function(){p=!1,_&&(b.apply(h,_),_=!1)},b=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(x,l),p=!0)},b}function u(s,l,h){var p=l[1],_=l[0],b=p-_;return s===p&&h?s:((s-_)%b+b)%b+_}function f(){return!1}function m(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function w(s){return v(s).split(/\s+/)}function E(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function M(s,l,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function F(s,l){return s.replace(k,function(h,p){var _=l[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(l)),_})}var q=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ie(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ae(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var pe=0;function de(s){var l=+new Date,h=Math.max(0,16-(l-pe));return pe=l+h,window.setTimeout(s,h)}var S=window.requestAnimationFrame||ae("RequestAnimationFrame")||de,C=window.cancelAnimationFrame||ae("CancelAnimationFrame")||ae("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,l,h){if(h&&S===de)s.call(l);else return S.call(window,r(s,l))}function A(s){s&&C.call(window,s)}var P={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:a,throttle:c,wrapNum:u,falseFn:f,formatNum:m,trim:v,splitWords:w,setOptions:E,getParamString:M,template:F,isArray:q,indexOf:ie,emptyImageUrl:Z,requestFn:S,cancelFn:C,requestAnimFrame:D,cancelAnimFrame:A};function N(){}N.extend=function(s){var l=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=i(h);p.constructor=l,l.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return s.statics&&n(l,s.statics),s.includes&&(T(s.includes),n.apply(null,[p].concat(s.includes))),n(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},n(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,x=p._initHooks.length;b<x;b++)p._initHooks[b].call(this)}},l},N.include=function(s){var l=this.prototype.options;return n(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return n(this.prototype.options,s),this},N.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function T(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=q(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Rt={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=w(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=w(s);for(var _=arguments.length===1,b=0,x=s.length;b<x;b++)_?this._off(s[b]):this._off(s[b],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var _={fn:l,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,l,h){var p,_,b;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,b=p.length;_<b;_++)p[_].fn=f;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var x=this._listens(s,l,h);if(x!==!1){var O=p[x];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(x,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=n({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var b=0,x=_.length;b<x;b++){var O=_[b],j=O.fn;O.once&&this.off(s,j,O.ctx),j.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(p=!!l,_=void 0,h=void 0);var b=this._events&&this._events[s];if(b&&b.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var x in this._eventParents)if(this._eventParents[x].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var _=0,b=p.length;_<b;_++)if(p[_].fn===l&&p[_].ctx===h)return _;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=w(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,n({layer:s.target,propagatedFrom:s.target},s),!0)}};Rt.addEventListener=Rt.on,Rt.removeEventListener=Rt.clearAllEventListeners=Rt.off,Rt.addOneTimeEventListener=Rt.once,Rt.fireEvent=Rt.fire,Rt.hasEventListeners=Rt.listens;var Ai=N.extend(Rt);function Te(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var co=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Te.prototype={clone:function(){return new Te(this.x,this.y)},add:function(s){return this.clone()._add(ye(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ye(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Te(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Te(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=co(this.x),this.y=co(this.y),this},distanceTo:function(s){s=ye(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=ye(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ye(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function ye(s,l,h){return s instanceof Te?s:q(s)?new Te(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Te(s.x,s.y):new Te(s,l,h)}function dt(s,l){if(s)for(var h=l?[s,l]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}dt.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof Te||typeof s[0]=="number"||"x"in s)l=h=ye(s);else if(s=mn(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return ye((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ye(this.min.x,this.max.y)},getTopRight:function(){return ye(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof Te?s=ye(s):s=mn(s),s instanceof dt?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=mn(s);var l=this.min,h=this.max,p=s.min,_=s.max,b=_.x>=l.x&&p.x<=h.x,x=_.y>=l.y&&p.y<=h.y;return b&&x},overlaps:function(s){s=mn(s);var l=this.min,h=this.max,p=s.min,_=s.max,b=_.x>l.x&&p.x<h.x,x=_.y>l.y&&p.y<h.y;return b&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,_=Math.abs(l.y-h.y)*s;return mn(ye(l.x-p,l.y-_),ye(h.x+p,h.y+_))},equals:function(s){return s?(s=mn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function mn(s,l){return!s||s instanceof dt?s:new dt(s,l)}function wn(s,l){if(s)for(var h=l?[s,l]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}wn.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,_;if(s instanceof De)p=s,_=s;else if(s instanceof wn){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend($e(s)||nt(s)):this;return!l&&!h?(this._southWest=new De(p.lat,p.lng),this._northEast=new De(_.lat,_.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,_=Math.abs(l.lng-h.lng)*s;return new wn(new De(l.lat-p,l.lng-_),new De(h.lat+p,h.lng+_))},getCenter:function(){return new De((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new De(this.getNorth(),this.getWest())},getSouthEast:function(){return new De(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof De||"lat"in s?s=$e(s):s=nt(s);var l=this._southWest,h=this._northEast,p,_;return s instanceof wn?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=l.lat&&_.lat<=h.lat&&p.lng>=l.lng&&_.lng<=h.lng},intersects:function(s){s=nt(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>=l.lat&&p.lat<=h.lat,x=_.lng>=l.lng&&p.lng<=h.lng;return b&&x},overlaps:function(s){s=nt(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>l.lat&&p.lat<h.lat,x=_.lng>l.lng&&p.lng<h.lng;return b&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=nt(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function nt(s,l){return s instanceof wn?s:new wn(s,l)}function De(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}De.prototype={equals:function(s,l){if(!s)return!1;s=$e(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return Qi.distance(this,$e(s))},wrap:function(){return Qi.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return nt([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new De(this.lat,this.lng,this.alt)}};function $e(s,l,h){return s instanceof De?s:q(s)&&typeof s[0]!="object"?s.length===3?new De(s[0],s[1],s[2]):s.length===2?new De(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new De(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new De(s,l,h)}var Sn={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),_=this.transformation.transform(l.max,h);return new dt(p,_)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new De(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,_=l.lng-h.lng;if(p===0&&_===0)return s;var b=s.getSouthWest(),x=s.getNorthEast(),O=new De(b.lat-p,b.lng-_),j=new De(x.lat-p,x.lng-_);return new wn(O,j)}},Qi=n({},Sn,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,_=l.lat*h,b=Math.sin((l.lat-s.lat)*h/2),x=Math.sin((l.lng-s.lng)*h/2),O=b*b+Math.cos(p)*Math.cos(_)*x*x,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),lo=6378137,$l={R:lo,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*l);return new Te(this.R*s.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var l=180/Math.PI;return new De((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=lo*Math.PI;return new dt([-s,-s],[s,s])}()};function Hl(s,l,h,p){if(q(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}Hl.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Te((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Yi(s,l,h,p){return new Hl(s,l,h,p)}var uo=n({},Qi,{code:"EPSG:3857",projection:$l,transformation:function(){var s=.5/(Math.PI*$l.R);return Yi(s,.5,-s,.5)}()}),ql=n({},uo,{code:"EPSG:900913"});function Sa(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Aa(s,l){var h="",p,_,b,x,O,j;for(p=0,b=s.length;p<b;p++){for(O=s[p],_=0,x=O.length;_<x;_++)j=O[_],h+=(_?"L":"M")+j.x+" "+j.y;h+=l?ce.svg?"z":"x":""}return h||"M0 0"}var ss=document.documentElement.style,as="ActiveXObject"in window,Dh=as&&!document.addEventListener,xh="msLaunchUri"in navigator&&!("documentMode"in document),Ma=Xn("webkit"),Gl=Xn("android"),Pa=Xn("android 2")||Xn("android 3"),Th=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Xg=Gl&&Xn("Google")&&Th<537&&!("AudioNode"in window),cs=!!window.opera,Ra=!xh&&Xn("chrome"),ka=Xn("gecko")&&!Ma&&!cs&&!as,on=!Ra&&Xn("safari"),sn=Xn("phantom"),ls="OTransition"in ss,Sh=navigator.platform.indexOf("Win")===0,Wl=as&&"transition"in ss,Zl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Pa,ho="MozPerspective"in ss,Ah=!window.L_DISABLE_3D&&(Wl||Zl||ho)&&!ls&&!sn,fo=typeof orientation<"u"||Xn("mobile"),Kl=fo&&Ma,Jg=fo&&Zl,Mh=!window.PointerEvent&&window.MSPointerEvent,Na=!!(window.PointerEvent||Mh),Ql="ontouchstart"in window||!!window.TouchEvent,Ph=!window.L_NO_TOUCH&&(Ql||Na),us=fo&&cs,Yl=fo&&ka,Xl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Mr=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,l),window.removeEventListener("testPassiveEventSupport",f,l)}catch{}return s}(),Rh=function(){return!!document.createElement("canvas").getContext}(),po=!!(document.createElementNS&&Sa("svg").createSVGRect),kh=!!po&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ds=!po&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Nh=navigator.platform.indexOf("Mac")===0,gn=navigator.platform.indexOf("Linux")===0;function Xn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ce={ie:as,ielt9:Dh,edge:xh,webkit:Ma,android:Gl,android23:Pa,androidStock:Xg,opera:cs,chrome:Ra,gecko:ka,safari:on,phantom:sn,opera12:ls,win:Sh,ie3d:Wl,webkit3d:Zl,gecko3d:ho,any3d:Ah,mobile:fo,mobileWebkit:Kl,mobileWebkit3d:Jg,msPointer:Mh,pointer:Na,touch:Ph,touchNative:Ql,mobileOpera:us,mobileGecko:Yl,retina:Xl,passiveEvents:Mr,canvas:Rh,svg:po,vml:ds,inlineSvg:kh,mac:Nh,linux:gn},mo=ce.msPointer?"MSPointerDown":"pointerdown",Oh=ce.msPointer?"MSPointerMove":"pointermove",Lh=ce.msPointer?"MSPointerUp":"pointerup",Pr=ce.msPointer?"MSPointerCancel":"pointercancel",Jl={touchstart:mo,touchmove:Oh,touchend:Lh,touchcancel:Pr},Fh={touchstart:Bh,touchmove:go,touchend:go,touchcancel:go},Mi={},eu=!1;function tu(s,l,h){return l==="touchstart"&&iu(),Fh[l]?(h=Fh[l].bind(this,h),s.addEventListener(Jl[l],h,!1),h):(console.warn("wrong event specified:",l),f)}function Oa(s,l,h){if(!Jl[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Jl[l],h,!1)}function Xi(s){Mi[s.pointerId]=s}function Vh(s){Mi[s.pointerId]&&(Mi[s.pointerId]=s)}function nu(s){delete Mi[s.pointerId]}function iu(){eu||(document.addEventListener(mo,Xi,!0),document.addEventListener(Oh,Vh,!0),document.addEventListener(Lh,nu,!0),document.addEventListener(Pr,nu,!0),eu=!0)}function go(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in Mi)l.touches.push(Mi[h]);l.changedTouches=[l],s(l)}}function Bh(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Nt(l),go(s,l)}function jh(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var e_=200;function La(s,l){s.addEventListener("dblclick",l);var h=0,p;function _(b){if(b.detail!==1){p=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var x=hu(b);if(!(x.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!x.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-h<=e_?(p++,p===2&&l(jh(b))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:l,simDblclick:_}}function zh(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var hs=di(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pi=di(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ji=Pi==="webkitTransition"||Pi==="OTransition"?Pi+"End":"transitionend";function Fa(s){return typeof s=="string"?document.getElementById(s):s}function fs(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function We(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function gt(s){var l=s.parentNode;l&&l.removeChild(s)}function ps(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function er(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function tr(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Va(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=ms(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Me(s,l){if(s.classList!==void 0)for(var h=w(l),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!Va(s,l)){var b=ms(s);ru(s,(b?b+" ":"")+l)}}function kt(s,l){s.classList!==void 0?s.classList.remove(l):ru(s,v((" "+ms(s)+" ").replace(" "+l+" "," ")))}function ru(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ms(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function An(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&t_(s,l)}function t_(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function di(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function _n(s,l,h){var p=l||new Te(0,0);s.style[hs]=(ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function It(s,l){s._leaflet_pos=l,ce.any3d?_n(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function hi(s){return s._leaflet_pos||new Te(0,0)}var _o,et,vo;if("onselectstart"in document)_o=function(){xe(window,"selectstart",Nt)},et=function(){it(window,"selectstart",Nt)};else{var Ri=di(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);_o=function(){if(Ri){var s=document.documentElement.style;vo=s[Ri],s[Ri]="none"}},et=function(){Ri&&(document.documentElement.style[Ri]=vo,vo=void 0)}}function Rr(){xe(window,"dragstart",Nt)}function ou(){it(window,"dragstart",Nt)}var gs,su;function au(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ba(),gs=s,su=s.style.outlineStyle,s.style.outlineStyle="none",xe(window,"keydown",Ba))}function Ba(){gs&&(gs.style.outlineStyle=su,gs=void 0,su=void 0,it(window,"keydown",Ba))}function Uh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function kr(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var nr={__proto__:null,TRANSFORM:hs,TRANSITION:Pi,TRANSITION_END:Ji,get:Fa,getStyle:fs,create:We,remove:gt,empty:ps,toFront:er,toBack:tr,hasClass:Va,addClass:Me,removeClass:kt,setClass:ru,getClass:ms,setOpacity:An,testProp:di,setTransform:_n,setPosition:It,getPosition:hi,get disableTextSelection(){return _o},get enableTextSelection(){return et},disableImageDrag:Rr,enableImageDrag:ou,preventOutline:au,restoreOutline:Ba,getSizedParentNode:Uh,getScale:kr};function xe(s,l,h,p){if(l&&typeof l=="object")for(var _ in l)lu(s,_,l[_],h);else{l=w(l);for(var b=0,x=l.length;b<x;b++)lu(s,l[b],h,p)}return this}var Jn="_leaflet_events";function it(s,l,h,p){if(arguments.length===1)Nr(s),delete s[Jn];else if(l&&typeof l=="object")for(var _ in l)uu(s,_,l[_],h);else if(l=w(l),arguments.length===2)Nr(s,function(O){return ie(l,O)!==-1});else for(var b=0,x=l.length;b<x;b++)uu(s,l[b],h,p);return this}function Nr(s,l){for(var h in s[Jn]){var p=h.split(/\d/)[0];(!l||l(p))&&uu(s,p,null,null,h)}}var cu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function lu(s,l,h,p){var _=l+a(h)+(p?"_"+a(p):"");if(s[Jn]&&s[Jn][_])return this;var b=function(O){return h.call(p||s,O||window.event)},x=b;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?b=tu(s,l,b):ce.touch&&l==="dblclick"?b=La(s,b):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(cu[l]||l,b,ce.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(b=function(O){O=O||window.event,ys(s,O)&&x(O)},s.addEventListener(cu[l],b,!1)):s.addEventListener(l,x,!1):s.attachEvent("on"+l,b),s[Jn]=s[Jn]||{},s[Jn][_]=b}function uu(s,l,h,p,_){_=_||l+a(h)+(p?"_"+a(p):"");var b=s[Jn]&&s[Jn][_];if(!b)return this;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?Oa(s,l,b):ce.touch&&l==="dblclick"?zh(s,b):"removeEventListener"in s?s.removeEventListener(cu[l]||l,b,!1):s.detachEvent("on"+l,b),s[Jn][_]=null}function In(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function du(s){return lu(s,"wheel",In),this}function _s(s){return xe(s,"mousedown touchstart dblclick contextmenu",In),s._leaflet_disable_click=!0,this}function Nt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function fi(s){return Nt(s),In(s),this}function hu(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function yo(s,l){if(!l)return new Te(s.clientX,s.clientY);var h=kr(l),p=h.boundingClientRect;return new Te((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var vs=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function fu(s){return ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/vs:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function ys(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var xt={__proto__:null,on:xe,off:it,stopPropagation:In,disableScrollPropagation:du,disableClickPropagation:_s,preventDefault:Nt,stop:fi,getPropagationPath:hu,getMousePosition:yo,getWheelDelta:fu,isExternalTarget:ys,addListener:xe,removeListener:it},$h=Ai.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=hi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),It(this._el,h),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),He=Ai.extend({options:{crs:uo,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=E(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView($e(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pi&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),xe(this._proxy,Ji,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter($e(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=n({animate:h.animate},h.zoom),h.pan=n({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),_=this.getSize().divideBy(2),b=s instanceof Te?s:this.latLngToContainerPoint(s),x=b.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(x));return this.setView(O,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():nt(s);var h=ye(l.paddingTopLeft||l.padding||[0,0]),p=ye(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var b=p.subtract(h).divideBy(2),x=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),j=this.unproject(x.add(O).divideBy(2).add(b),_);return{center:j,zoom:_}},fitBounds:function(s,l){if(s=nt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=ye(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new $h,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Me(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!ce.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),b=this.getSize(),x=this._zoom;s=$e(s),l=l===void 0?x:l;var O=Math.max(b.x,b.y),j=O*this.getZoomScale(x,l),G=_.distanceTo(p)||1,re=1.42,be=re*re;function Be(Wt){var cf=Wt?-1:1,Kk=Wt?j:O,Qk=j*j-O*O+cf*be*be*G*G,Yk=2*Kk*be*G,s_=Qk/Yk,VE=Math.sqrt(s_*s_+1)-s_,Xk=VE<1e-9?-18:Math.log(VE);return Xk}function Pn(Wt){return(Math.exp(Wt)-Math.exp(-Wt))/2}function cn(Wt){return(Math.exp(Wt)+Math.exp(-Wt))/2}function pi(Wt){return Pn(Wt)/cn(Wt)}var Hn=Be(0);function Ya(Wt){return O*(cn(Hn)/cn(Hn+re*Wt))}function qk(Wt){return O*(cn(Hn)*pi(Hn+re*Wt)-Pn(Hn))/be}function Gk(Wt){return 1-Math.pow(1-Wt,1.5)}var Wk=Date.now(),LE=(Be(1)-Hn)/re,Zk=h.duration?1e3*h.duration:1e3*LE*.8;function FE(){var Wt=(Date.now()-Wk)/Zk,cf=Gk(Wt)*LE;Wt<=1?(this._flyToFrame=D(FE,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(qk(cf)/G)),x),this.getScaleZoom(O/Ya(cf),x),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),FE.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=nt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,nt(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=ye(l.paddingTopLeft||l.padding||[0,0]),p=ye(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),b=this.project(s),x=this.getPixelBounds(),O=mn([x.min.add(h),x.max.subtract(p)]),j=O.getSize();if(!O.contains(b)){this._enforcingBounds=!0;var G=b.subtract(O.getCenter()),re=O.extend(b).getSize().subtract(j);_.x+=G.x<0?-re.x:re.x,_.y+=G.y<0?-re.y:re.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=n({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),_=h.divideBy(2).round(),b=p.subtract(_);return!b.x&&!b.y?this:(s.animate&&s.pan?this.panBy(b):(s.pan&&this._rawPanBy(b),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=n({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new De(l,h),_=p.toBounds(s.coords.accuracy*2),b=this._locateOptions;if(b.setView){var x=this.getBoundsZoom(_);this.setView(p,b.maxZoom?Math.min(x,b.maxZoom):x)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var j in s.coords)typeof s.coords[j]=="number"&&(O[j]=s.coords[j]);this.fire("locationfound",O)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),gt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)gt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=We("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new wn(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=nt(s),h=ye(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),b=this.getMaxZoom(),x=s.getNorthWest(),O=s.getSouthEast(),j=this.getSize().subtract(h),G=mn(this.project(O,p),this.project(x,p)).getSize(),re=ce.any3d?this.options.zoomSnap:1,be=j.x/G.x,Be=j.y/G.y,Pn=l?Math.max(be,Be):Math.min(be,Be);return p=this.getScaleZoom(Pn,p),re&&(p=Math.round(p/(re/100))*(re/100),p=l?Math.ceil(p/re)*re:Math.floor(p/re)*re),Math.max(_,Math.min(b,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new dt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint($e(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ye(s),l)},layerPointToLatLng:function(s){var l=ye(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project($e(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng($e(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(nt(s))},distance:function(s,l){return this.options.crs.distance($e(s),$e(l))},containerPointToLayerPoint:function(s){return ye(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ye(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(ye(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint($e(s)))},mouseEventToContainerPoint:function(s){return yo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Fa(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");xe(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,Me(s,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=fs(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),It(this._mapPane,new Te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Me(s.markerPane,"leaflet-zoom-hide"),Me(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){It(this._mapPane,new Te(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,h)._move(s,l)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){It(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var l=s?it:xe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,_=l==="mouseout"||l==="mouseover",b=s.target||s.srcElement,x=!1;b;){if(p=this._targets[a(b)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){x=!0;break}if(p&&p.listens(l,!0)&&(_&&!ys(b,s)||(h.push(p),_))||b===this._container)break;b=b.parentNode}return!h.length&&!x&&!_&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&au(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=n({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,l);if(h){for(var b=[],x=0;x<h.length;x++)h[x].listens(l,!0)&&b.push(h[x]);_=b.concat(_)}if(_.length){l==="contextmenu"&&Nt(s);var O=_[0],j={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var G=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=G?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=G?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(x=0;x<_.length;x++)if(_[x].fire(l,j,!0),j.originalEvent._stopped||_[x].options.bubblingMouseEvents===!1&&ie(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return hi(this._mapPane)||new Te(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return mn([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),_=this.getSize().divideBy(2),b=new dt(p.subtract(_),p.add(_)),x=this._getBoundsOffset(b,h,l);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?s:this.unproject(p.add(x),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new dt(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=mn(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),_=p.min.subtract(s.min),b=p.max.subtract(s.max),x=this._rebound(_.x,-b.x),O=this._rebound(_.y,-b.y);return new Te(x,O)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){kt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=We("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=hs,p=this._proxy.style[h];_n(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){gt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();_n(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&kt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Hh(s,l){return new He(s,l)}var $n=N.extend({options:{position:"topright"},initialize:function(s){E(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Me(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(gt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),bo=function(s){return new $n(s)};He.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=We("div",l+"control-container",this._container);function p(_,b){var x=l+_+" "+l+b;s[_+b]=We("div",x,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)gt(this._controlCorners[s]);gt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var bs=$n.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){E(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return $n.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):kt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return kt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=We("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),_s(l),du(l);var p=this._section=We("section",s+"-list");h&&(this._map.on("click",this.collapse,this),xe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=We("a",s+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),xe(_,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){Nt(b),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=We("div",s+"-base",p),this._separator=We("div",s+"-separator",p),this._overlaysList=We("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ps(this._baseLayersList),ps(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(a(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),xe(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var b=document.createElement("span");l.appendChild(b),b.appendChild(p),b.appendChild(_);var x=s.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],_=[];this._handlingClick=!0;for(var b=s.length-1;b>=0;b--)l=s[b],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||_.push(h);for(b=0;b<_.length;b++)this._map.hasLayer(_[b])&&this._map.removeLayer(_[b]);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])||this._map.addLayer(p[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)l=s[_],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,xe(s,"click",Nt),this.expand();var l=this;setTimeout(function(){it(s,"click",Nt),l._preventClick=!1})}}),qh=function(s,l,h){return new bs(s,l,h)},ei=$n.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=We("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,_){var b=We("a",h,p);return b.innerHTML=s,b.href="#",b.title=l,b.setAttribute("role","button"),b.setAttribute("aria-label",l),_s(b),xe(b,"click",fi),xe(b,"click",_,this),xe(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";kt(this._zoomInButton,l),kt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Me(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Me(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ei,this.addControl(this.zoomControl))});var Gh=function(s){return new ei(s)},Wh=$n.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=We("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=We("div",l,h)),s.imperial&&(this._iScale=We("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,_;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),ws=function(s){return new Wh(s)},Zh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Is=$n.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?Zh+" ":"")+"Leaflet</a>"},initialize:function(s){E(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=We("div","leaflet-control-attribution"),_s(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&new Is().addTo(this)});var ja=function(s){return new Is(s)};$n.Layers=bs,$n.Zoom=ei,$n.Scale=Wh,$n.Attribution=Is,bo.layers=qh,bo.zoom=Gh,bo.scale=ws,bo.attribution=ja;var ti=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ti.addTo=function(s,l){return s.addHandler(l,this),this};var za={Events:Rt},Kh=ce.touch?"touchstart mousedown":"mousedown",ki=Ai.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){E(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(xe(this._dragStartTarget,Kh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ki._dragging===this&&this.finishDrag(!0),it(this._dragStartTarget,Kh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Va(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){ki._dragging===this&&this.finishDrag();return}if(!(ki._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(ki._dragging=this,this._preventOutline&&au(this._element),Rr(),_o(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=Uh(this._element);this._startPoint=new Te(l.clientX,l.clientY),this._startPos=hi(this._element),this._parentScale=kr(h);var p=s.type==="mousedown";xe(document,p?"mousemove":"touchmove",this._onMove,this),xe(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Te(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Nt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Me(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),It(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){kt(document.body,"leaflet-dragging"),this._lastTarget&&(kt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),it(document,"mousemove touchmove",this._onMove,this),it(document,"mouseup touchend touchcancel",this._onUp,this),ou(),et();var l=this._moved&&this._moving;this._moving=!1,ki._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function wo(s,l,h){var p,_=[1,4,2,8],b,x,O,j,G,re,be,Be;for(b=0,re=s.length;b<re;b++)s[b]._code=ir(s[b],l);for(O=0;O<4;O++){for(be=_[O],p=[],b=0,re=s.length,x=re-1;b<re;x=b++)j=s[b],G=s[x],j._code&be?G._code&be||(Be=Es(G,j,be,l,h),Be._code=ir(Be,l),p.push(Be)):(G._code&be&&(Be=Es(G,j,be,l,h),Be._code=ir(Be,l),p.push(Be)),p.push(j));s=p}return s}function pu(s,l){var h,p,_,b,x,O,j,G,re;if(!s||s.length===0)throw new Error("latlngs not passed");Mn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var be=$e([0,0]),Be=nt(s),Pn=Be.getNorthWest().distanceTo(Be.getSouthWest())*Be.getNorthEast().distanceTo(Be.getNorthWest());Pn<1700&&(be=Ua(s));var cn=s.length,pi=[];for(h=0;h<cn;h++){var Hn=$e(s[h]);pi.push(l.project($e([Hn.lat-be.lat,Hn.lng-be.lng])))}for(O=j=G=0,h=0,p=cn-1;h<cn;p=h++)_=pi[h],b=pi[p],x=_.y*b.x-b.y*_.x,j+=(_.x+b.x)*x,G+=(_.y+b.y)*x,O+=x*3;O===0?re=pi[0]:re=[j/O,G/O];var Ya=l.unproject(ye(re));return $e([Ya.lat+be.lat,Ya.lng+be.lng])}function Ua(s){for(var l=0,h=0,p=0,_=0;_<s.length;_++){var b=$e(s[_]);l+=b.lat,h+=b.lng,p++}return $e([l/p,h/p])}var mu={__proto__:null,clipPolygon:wo,polygonCenter:pu,centroid:Ua};function $a(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=Or(s,h),s=Qh(s,h),s}function gu(s,l,h){return Math.sqrt(en(s,l,h,!0))}function Ha(s,l,h){return en(s,l,h)}function Qh(s,l){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,qa(s,_,l,0,h-1);var b,x=[];for(b=0;b<h;b++)_[b]&&x.push(s[b]);return x}function qa(s,l,h,p,_){var b=0,x,O,j;for(O=p+1;O<=_-1;O++)j=en(s[O],s[p],s[_],!0),j>b&&(x=O,b=j);b>h&&(l[x]=1,qa(s,l,h,p,x),qa(s,l,h,x,_))}function Or(s,l){for(var h=[s[0]],p=1,_=0,b=s.length;p<b;p++)Ga(s[p],s[_])>l&&(h.push(s[p]),_=p);return _<b-1&&h.push(s[b-1]),h}var _u;function vu(s,l,h,p,_){var b=p?_u:ir(s,h),x=ir(l,h),O,j,G;for(_u=x;;){if(!(b|x))return[s,l];if(b&x)return!1;O=b||x,j=Es(s,l,O,h,_),G=ir(j,h),O===b?(s=j,b=G):(l=j,x=G)}}function Es(s,l,h,p,_){var b=l.x-s.x,x=l.y-s.y,O=p.min,j=p.max,G,re;return h&8?(G=s.x+b*(j.y-s.y)/x,re=j.y):h&4?(G=s.x+b*(O.y-s.y)/x,re=O.y):h&2?(G=j.x,re=s.y+x*(j.x-s.x)/b):h&1&&(G=O.x,re=s.y+x*(O.x-s.x)/b),new Te(G,re,_)}function ir(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function Ga(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function en(s,l,h,p){var _=l.x,b=l.y,x=h.x-_,O=h.y-b,j=x*x+O*O,G;return j>0&&(G=((s.x-_)*x+(s.y-b)*O)/j,G>1?(_=h.x,b=h.y):G>0&&(_+=x*G,b+=O*G)),x=s.x-_,O=s.y-b,p?x*x+O*O:new Te(_,b)}function Mn(s){return!q(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function yu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mn(s)}function Lr(s,l){var h,p,_,b,x,O,j,G;if(!s||s.length===0)throw new Error("latlngs not passed");Mn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=$e([0,0]),be=nt(s),Be=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());Be<1700&&(re=Ua(s));var Pn=s.length,cn=[];for(h=0;h<Pn;h++){var pi=$e(s[h]);cn.push(l.project($e([pi.lat-re.lat,pi.lng-re.lng])))}for(h=0,p=0;h<Pn-1;h++)p+=cn[h].distanceTo(cn[h+1])/2;if(p===0)G=cn[0];else for(h=0,b=0;h<Pn-1;h++)if(x=cn[h],O=cn[h+1],_=x.distanceTo(O),b+=_,b>p){j=(b-p)/_,G=[O.x-j*(O.x-x.x),O.y-j*(O.y-x.y)];break}var Hn=l.unproject(ye(G));return $e([Hn.lat+re.lat,Hn.lng+re.lng])}var d={__proto__:null,simplify:$a,pointToSegmentDistance:gu,closestPointOnSegment:Ha,clipSegment:vu,_getEdgeIntersection:Es,_getBitCode:ir,_sqClosestPointOnSegment:en,isFlat:Mn,_flat:yu,polylineCenter:Lr},g={project:function(s){return new Te(s.lng,s.lat)},unproject:function(s){return new De(s.y,s.x)},bounds:new dt([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new dt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,_=this.R_MINOR/h,b=Math.sqrt(1-_*_),x=b*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-x)/(1+x),b/2);return p=-h*Math.log(Math.max(O,1e-10)),new Te(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),b=Math.exp(-s.y/h),x=Math.PI/2-2*Math.atan(b),O=0,j=.1,G;O<15&&Math.abs(j)>1e-7;O++)G=_*Math.sin(x),G=Math.pow((1-G)/(1+G),_/2),j=Math.PI/2-2*Math.atan(b*G)-x,x+=j;return new De(x*l,s.x*l/h)}},I={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:$l},R=n({},Qi,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return Yi(s,.5,-s,.5)}()}),z=n({},Qi,{code:"EPSG:4326",projection:g,transformation:Yi(1/180,1,-1/180,.5)}),Y=n({},Sn,{projection:g,transformation:Yi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});Sn.Earth=Qi,Sn.EPSG3395=R,Sn.EPSG3857=uo,Sn.EPSG900913=ql,Sn.EPSG4326=z,Sn.Simple=Y;var Fe=Ai.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});He.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=a(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?q(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=a(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Tt=Fe.extend({initialize:function(s,l){E(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),Ze=function(s,l){return new Tt(s,l)},_t=Tt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Tt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Tt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new wn;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),an=function(s,l){return new _t(s,l)},ni=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){E(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var _=ye(p),b=ye(l==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),b&&(s.style.marginLeft=-b.x+"px",s.style.marginTop=-b.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function ii(s){return new ni(s)}var rr=ni.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof rr.imagePath!="string"&&(rr.imagePath=this._detectIconPath()),(this.options.imagePath||rr.imagePath)+ni.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,_){var b=p.exec(h);return b&&b[_]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=We("div","leaflet-default-icon-path",document.body),l=fs(s,"background-image")||fs(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Wa=ti.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new ki(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Me(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&kt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,b=hi(l._icon),x=h.getPixelBounds(),O=h.getPixelOrigin(),j=mn(x.min._subtract(O).add(_),x.max._subtract(O).subtract(_));if(!j.contains(b)){var G=ye((Math.max(j.max.x,b.x)-j.max.x)/(x.max.x-j.max.x)-(Math.min(j.min.x,b.x)-j.min.x)/(x.min.x-j.min.x),(Math.max(j.max.y,b.y)-j.max.y)/(x.max.y-j.max.y)-(Math.min(j.min.y,b.y)-j.min.y)/(x.min.y-j.min.y)).multiplyBy(p);h.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),It(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=hi(l._icon),_=l._map.layerPointToLatLng(p);h&&It(h,p),l._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Yh=Fe.extend({options:{icon:new rr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){E(this,l),this._latlng=$e(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=$e(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Me(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&xe(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),b=!1;_!==this._shadow&&(this._removeShadow(),b=!0),_&&(Me(_,l),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&b&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&it(this._icon,"focus",this._panOnFocus,this),gt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&gt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&It(this._icon,s),this._shadow&&It(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wa)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wa(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&An(this._icon,s),this._shadow&&An(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?ye(l.iconSize):ye(0,0),p=l.iconAnchor?ye(l.iconAnchor):ye(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Tk(s,l){return new Yh(s,l)}var Io=Fe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return E(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xh=Io.extend({options:{fill:!0,radius:10},initialize:function(s,l){E(this,l),this._latlng=$e(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=$e(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Io.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new dt(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Sk(s,l){return new Xh(s,l)}var n_=Xh.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=n({},h,{radius:l})),E(this,l),this._latlng=$e(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new wn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Io.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Qi.distance){var _=Math.PI/180,b=this._mRadius/Qi.R/_,x=h.project([l+b,s]),O=h.project([l-b,s]),j=x.add(O).divideBy(2),G=h.unproject(j).lat,re=Math.acos((Math.cos(b*_)-Math.sin(l*_)*Math.sin(G*_))/(Math.cos(l*_)*Math.cos(G*_)))/_;(isNaN(re)||re===0)&&(re=b/Math.cos(Math.PI/180*l)),this._point=j.subtract(h.getPixelOrigin()),this._radius=isNaN(re)?0:j.x-h.project([G,s-re]).x,this._radiusY=j.y-x.y}else{var be=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(be).x}this._updateBounds()}});function Ak(s,l,h){return new n_(s,l,h)}var Fr=Io.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){E(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=en,_,b,x=0,O=this._parts.length;x<O;x++)for(var j=this._parts[x],G=1,re=j.length;G<re;G++){_=j[G-1],b=j[G];var be=p(s,_,b,!0);be<l&&(l=be,h=p(s,_,b))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=$e(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new wn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=Mn(s),p=0,_=s.length;p<_;p++)h?(l[p]=$e(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new dt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Te(s,s);this._rawPxBounds&&(this._pxBounds=new dt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof De,_=s.length,b,x;if(p){for(x=[],b=0;b<_;b++)x[b]=this._map.latLngToLayerPoint(s[b]),h.extend(x[b]);l.push(x)}else for(b=0;b<_;b++)this._projectLatlngs(s[b],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,_,b,x,O,j;for(h=0,_=0,b=this._rings.length;h<b;h++)for(j=this._rings[h],p=0,x=j.length;p<x-1;p++)O=vu(j[p],j[p+1],s,p,!0),O&&(l[_]=l[_]||[],l[_].push(O[0]),(O[1]!==j[p+1]||p===x-2)&&(l[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=$a(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,_,b,x,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,b=this._parts.length;h<b;h++)for(O=this._parts[h],p=0,x=O.length,_=x-1;p<x;_=p++)if(!(!l&&p===0)&&gu(s,O[_],O[p])<=j)return!0;return!1}});function Mk(s,l){return new Fr(s,l)}Fr._flat=yu;var Za=Fr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return pu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Fr.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof De&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){Fr.prototype._setLatLngs.call(this,s),Mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new Te(l,l);if(s=new dt(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,b;p<_;p++)b=wo(this._rings[p],s,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,_,b,x,O,j,G;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(b=0,j=this._parts.length;b<j;b++)for(h=this._parts[b],x=0,G=h.length,O=G-1;x<G;O=x++)p=h[x],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(l=!l);return l||Fr.prototype._containsPoint.call(this,s,!0)}});function Pk(s,l){return new Za(s,l)}var Vr=_t.extend({initialize:function(s,l){E(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=q(s)?s:s.features,h,p,_;if(l){for(h=0,p=l.length;h<p;h++)_=l[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var b=this.options;if(b.filter&&!b.filter(s))return this;var x=Jh(s,b);return x?(x.feature=nf(s),x.defaultOptions=x.options,this.resetStyle(x),b.onEachFeature&&b.onEachFeature(s,x),this.addLayer(x)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=n({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Jh(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],b=l&&l.pointToLayer,x=l&&l.coordsToLatLng||i_,O,j,G,re;if(!p&&!h)return null;switch(h.type){case"Point":return O=x(p),vE(b,s,O,l);case"MultiPoint":for(G=0,re=p.length;G<re;G++)O=x(p[G]),_.push(vE(b,s,O,l));return new _t(_);case"LineString":case"MultiLineString":return j=ef(p,h.type==="LineString"?0:1,x),new Fr(j,l);case"Polygon":case"MultiPolygon":return j=ef(p,h.type==="Polygon"?1:2,x),new Za(j,l);case"GeometryCollection":for(G=0,re=h.geometries.length;G<re;G++){var be=Jh({geometry:h.geometries[G],type:"Feature",properties:s.properties},l);be&&_.push(be)}return new _t(_);case"FeatureCollection":for(G=0,re=h.features.length;G<re;G++){var Be=Jh(h.features[G],l);Be&&_.push(Be)}return new _t(_);default:throw new Error("Invalid GeoJSON object.")}}function vE(s,l,h,p){return s?s(l,h):new Yh(h,p&&p.markersInheritOptions&&p)}function i_(s){return new De(s[1],s[0],s[2])}function ef(s,l,h){for(var p=[],_=0,b=s.length,x;_<b;_++)x=l?ef(s[_],l-1,h):(h||i_)(s[_]),p.push(x);return p}function r_(s,l){return s=$e(s),s.alt!==void 0?[m(s.lng,l),m(s.lat,l),m(s.alt,l)]:[m(s.lng,l),m(s.lat,l)]}function tf(s,l,h,p){for(var _=[],b=0,x=s.length;b<x;b++)_.push(l?tf(s[b],Mn(s[b])?0:l-1,h,p):r_(s[b],p));return!l&&h&&_.length>0&&_.push(_[0].slice()),_}function Ka(s,l){return s.feature?n({},s.feature,{geometry:l}):nf(l)}function nf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var o_={toGeoJSON:function(s){return Ka(this,{type:"Point",coordinates:r_(this.getLatLng(),s)})}};Yh.include(o_),n_.include(o_),Xh.include(o_),Fr.include({toGeoJSON:function(s){var l=!Mn(this._latlngs),h=tf(this._latlngs,l?1:0,!1,s);return Ka(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),Za.include({toGeoJSON:function(s){var l=!Mn(this._latlngs),h=l&&!Mn(this._latlngs[0]),p=tf(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),Ka(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),Tt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),Ka(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var b=_.toGeoJSON(s);if(h)p.push(b.geometry);else{var x=nf(b);x.type==="FeatureCollection"?p.push.apply(p,x.features):p.push(x)}}}),h?Ka(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function yE(s,l){return new Vr(s,l)}var Rk=yE,rf=Fe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=nt(l),E(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){gt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&er(this._image),this},bringToBack:function(){return this._map&&tr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=nt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:We("img");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;_n(this._image,h,l)},_reset:function(){var s=this._image,l=new dt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();It(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){An(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),kk=function(s,l,h){return new rf(s,l,h)},bE=rf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:We("video");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onloadeddata=r(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[l.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var x=We("source");x.src=this._url[b],l.appendChild(x)}}});function Nk(s,l,h){return new bE(s,l,h)}var wE=rf.extend({_initImage:function(){var s=this._image=this._url;Me(s,"leaflet-image-layer"),this._zoomAnimated&&Me(s,"leaflet-zoom-animated"),this.options.className&&Me(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function Ok(s,l,h){return new wE(s,l,h)}var or=Fe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof De||q(s))?(this._latlng=$e(s),E(this,l)):(E(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&An(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&An(this._container,1),this.bringToFront(),this.options.interactive&&(Me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(An(this._container,0),this._removeTimeout=setTimeout(r(gt,void 0,this._container),200)):gt(this._container),this.options.interactive&&(kt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=$e(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&er(this._container),this},bringToBack:function(){return this._map&&tr(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof _t){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=ye(this.options.offset),h=this._getAnchor();this._zoomAnimated?It(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});He.include({_initOverlay:function(s,l,h,p){var _=l;return _ instanceof s||(_=new s(p).setContent(l)),h&&_.setLatLng(h),_}}),Fe.include({_initOverlay:function(s,l,h,p){var _=h;return _ instanceof s?(E(_,p),_._source=this):(_=l&&!p?l:new s(p,this),_.setContent(h)),_}});var of=or.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,or.prototype.openOn.call(this,s)},onAdd:function(s){or.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Io||this._source.on("preclick",In))},onRemove:function(s){or.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Io||this._source.off("preclick",In))},getEvents:function(){var s=or.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=We("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=We("div",s+"-content-wrapper",l);if(this._contentNode=We("div",s+"-content",h),_s(l),du(this._contentNode),xe(l,"contextmenu",In),this._tipContainer=We("div",s+"-tip-container",l),this._tip=We("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=We("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',xe(p,"click",function(_){Nt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,_=this.options.maxHeight,b="leaflet-popup-scrolled";_&&p>_?(l.height=_+"px",Me(s,b)):kt(s,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();It(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(fs(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,_=new Te(this._containerLeft,-h-this._containerBottom);_._add(hi(this._container));var b=s.layerPointToContainerPoint(_),x=ye(this.options.autoPanPadding),O=ye(this.options.autoPanPaddingTopLeft||x),j=ye(this.options.autoPanPaddingBottomRight||x),G=s.getSize(),re=0,be=0;b.x+p+j.x>G.x&&(re=b.x+p-G.x+j.x),b.x-re-O.x<0&&(re=b.x-O.x),b.y+h+j.y>G.y&&(be=b.y+h-G.y+j.y),b.y-be-O.y<0&&(be=b.y-O.y),(re||be)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,be]))}},_getAnchor:function(){return ye(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Lk=function(s,l){return new of(s,l)};He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(s,l,h){return this._initOverlay(of,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Fe.include({bindPopup:function(s,l){return this._popup=this._initOverlay(of,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof _t||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){fi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Io)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var sf=or.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){or.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){or.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=or.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=We("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,_=this._container,b=p.latLngToContainerPoint(p.getCenter()),x=p.layerPointToContainerPoint(s),O=this.options.direction,j=_.offsetWidth,G=_.offsetHeight,re=ye(this.options.offset),be=this._getAnchor();O==="top"?(l=j/2,h=G):O==="bottom"?(l=j/2,h=0):O==="center"?(l=j/2,h=G/2):O==="right"?(l=0,h=G/2):O==="left"?(l=j,h=G/2):x.x<b.x?(O="right",l=0,h=G/2):(O="left",l=j+(re.x+be.x)*2,h=G/2),s=s.subtract(ye(l,h,!0)).add(re).add(be),kt(_,"leaflet-tooltip-right"),kt(_,"leaflet-tooltip-left"),kt(_,"leaflet-tooltip-top"),kt(_,"leaflet-tooltip-bottom"),Me(_,"leaflet-tooltip-"+O),It(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&An(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return ye(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fk=function(s,l){return new sf(s,l)};He.include({openTooltip:function(s,l,h){return this._initOverlay(sf,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Fe.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(sf,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof _t||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(xe(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),xe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var IE=ni.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ps(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=ye(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Vk(s){return new IE(s)}ni.Default=rr;var bu=Fe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){E(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),gt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(er(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(tr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Te?s:new Te(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,_=l.length,b;p<_;p++)b=l[p].style.zIndex,l[p]!==this._container&&b&&(h=s(h,+b));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){An(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var b=Math.min(1,(s-_.loaded)/200);An(_.el,b),b<1?l=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(A(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=We("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(gt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=We("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)gt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var _=Math.floor(s/2),b=Math.floor(l/2),x=h-1,O=new Te(+_,+b);O.z=+x;var j=this._tileCoordsToKey(O),G=this._tiles[j];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),x>p?this._retainParent(_,b,x,p):!1)},_retainChildren:function(s,l,h,p){for(var _=2*s;_<2*s+2;_++)for(var b=2*l;b<2*l+2;b++){var x=new Te(_,b);x.z=h+1;var O=this._tileCoordsToKey(x),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);h+1<p&&this._retainChildren(_,b,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var b=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||b)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();ce.any3d?_n(s.el,_,p):It(s.el,_)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),_=l.project(s,this._tileZoom).floor(),b=l.getSize().divideBy(p*2);return new dt(_.subtract(b),_.add(b))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),b=_.getCenter(),x=[],O=this.options.keepBuffer,j=new dt(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var re=this._tiles[G].coords;(re.z!==this._tileZoom||!j.contains(new Te(re.x,re.y)))&&(this._tiles[G].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var be=_.min.y;be<=_.max.y;be++)for(var Be=_.min.x;Be<=_.max.x;Be++){var Pn=new Te(Be,be);if(Pn.z=this._tileZoom,!!this._isValidTile(Pn)){var cn=this._tiles[this._tileCoordsToKey(Pn)];cn?cn.current=!0:x.push(Pn)}}if(x.sort(function(Hn,Ya){return Hn.distanceTo(b)-Ya.distanceTo(b)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var pi=document.createDocumentFragment();for(Be=0;Be<x.length;Be++)this._addTile(x[Be],pi);this._level.el.appendChild(pi)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return nt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),b=l.unproject(p,s.z),x=l.unproject(_,s.z);return[b,x]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new wn(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new Te(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(gt(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Me(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=f,s.onmousemove=f,ce.ielt9&&this.options.opacity<1&&An(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(r(this._tileReady,this,s,null,_)),It(_,h),this._tiles[p]={el:_,coords:s,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(An(h.el,0),A(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Me(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Te(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new dt(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Bk(s){return new bu(s)}var Qa=bu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=E(this,l),l.detectRetina&&ce.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return xe(h,"load",r(this._tileOnLoad,this,l,h)),xe(h,"error",r(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return F(this._url,n(l,this.options))},_tileOnLoad:function(s,l){ce.ielt9?setTimeout(r(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=f,l.onerror=f,!l.complete)){l.src=Z;var h=this._tiles[s].coords;gt(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",Z),bu.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===Z))return bu.prototype._tileReady.call(this,s,l,h)}});function EE(s,l){return new Qa(s,l)}var CE=Qa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=n({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=E(this,l);var _=l.detectRetina&&ce.retina?2:1,b=this.getTileSize();h.width=b.x*_,h.height=b.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Qa.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=mn(h.project(l[0]),h.project(l[1])),_=p.min,b=p.max,x=(this._wmsVersion>=1.3&&this._crs===z?[_.y,_.x,b.y,b.x]:[_.x,_.y,b.x,b.y]).join(","),O=Qa.prototype.getTileUrl.call(this,s);return O+M(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(s,l){return n(this.wmsParams,s),l||this.redraw(),this}});function jk(s,l){return new CE(s,l)}Qa.WMS=CE,EE.wms=jk;var Br=Fe.extend({options:{padding:.1},initialize:function(s){E(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),b=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,l));ce.any3d?_n(this._container,b,h):It(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new dt(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),DE=Br.extend({options:{tolerance:0},getEvents:function(){var s=Br.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Br.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");xe(s,"mousemove",this._onMouseMove,this),xe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),xe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,gt(this._container),it(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=ce.retina?2:1;It(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Br.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<l.length;_++){if(p=Number(l[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new dt,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,_,b,x=s._parts,O=x.length,j=this._ctx;if(O){for(j.beginPath(),h=0;h<O;h++){for(p=0,_=x[h].length;p<_;p++)b=x[h][p],j[p?"lineTo":"moveTo"](b.x,b.y);l&&j.closePath()}this._fillStroke(j,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(l.x,l.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(kt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Me(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function xE(s){return ce.canvas?new DE(s):null}var wu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),zk={_initContainer:function(){this._container=We("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Br.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=wu("shape");Me(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=wu("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;gt(l),s.removeInteractiveTarget(l),delete this._layers[a(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(l||(l=s._stroke=wu("stroke")),_.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=q(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(_.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=wu("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){er(s._container)},_bringToBack:function(s){tr(s._container)}},af=ce.vml?wu:Sa,Iu=Br.extend({_initContainer:function(){this._container=af("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=af("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){gt(this._container),it(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Br.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),It(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=af("path");s.options.className&&Me(l,s.options.className),s.options.interactive&&Me(l,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){gt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Aa(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",b=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,b)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){er(s._path)},_bringToBack:function(s){tr(s._path)}});ce.vml&&Iu.include(zk);function TE(s){return ce.svg||ce.vml?new Iu(s):null}He.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&xE(s)||TE(s)}});var SE=Za.extend({initialize:function(s,l){Za.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=nt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Uk(s,l){return new SE(s,l)}Iu.create=af,Iu.pointsToPath=Aa,Vr.geometryToLayer=Jh,Vr.coordsToLatLng=i_,Vr.coordsToLatLngs=ef,Vr.latLngToCoords=r_,Vr.latLngsToCoords=tf,Vr.getFeature=Ka,Vr.asFeature=nf,He.mergeOptions({boxZoom:!0});var AE=ti.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){xe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){it(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){gt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),_o(),Rr(),this._startPoint=this._map.mouseEventToContainerPoint(s),xe(document,{contextmenu:fi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=We("div","leaflet-zoom-box",this._container),Me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new dt(this._point,this._startPoint),h=l.getSize();It(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(gt(this._box),kt(this._container,"leaflet-crosshair")),et(),ou(),it(document,{contextmenu:fi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new wn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});He.addInitHook("addHandler","boxZoom",AE),He.mergeOptions({doubleClickZoom:!0});var ME=ti.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(s.containerPoint,_)}});He.addInitHook("addHandler","doubleClickZoom",ME),He.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var PE=ti.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new ki(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){kt(this._map._container,"leaflet-grab"),kt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=nt(this._map.options.maxBounds);this._offsetLimit=mn(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-l+h)%s+l-h,b=(p+l+h)%s-l-h,x=Math.abs(_+h)<Math.abs(b+h)?_:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,x=h.easeLinearity,O=_.multiplyBy(x/b),j=O.distanceTo([0,0]),G=Math.min(h.inertiaMaxSpeed,j),re=O.multiplyBy(G/j),be=G/(h.inertiaDeceleration*x),Be=re.multiplyBy(-be/2).round();!Be.x&&!Be.y?l.fire("moveend"):(Be=l._limitOffset(Be,l.options.maxBounds),D(function(){l.panBy(Be,{duration:be,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});He.addInitHook("addHandler","dragging",PE),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var RE=ti.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),xe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),it(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)l[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)l[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)l[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)l[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){xe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){it(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=ye(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(ye(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;fi(s)}}});He.addInitHook("addHandler","keyboard",RE),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var kE=ti.extend({addHooks:function(){xe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){it(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=fu(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),fi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,b=h?Math.ceil(_/h)*h:_,x=s._limitZoom(l+(this._delta>0?b:-b))-l;this._delta=0,this._startTime=null,x&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+x):s.setZoomAround(this._lastMousePos,l+x))}});He.addInitHook("addHandler","scrollWheelZoom",kE);var $k=600;He.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var NE=ti.extend({addHooks:function(){xe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){it(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Te(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(xe(document,"touchend",Nt),xe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),$k),xe(document,"touchend touchcancel contextmenu",this._cancel,this),xe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){it(document,"touchend",Nt),it(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),it(document,"touchend touchcancel contextmenu",this._cancel,this),it(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Te(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});He.addInitHook("addHandler","tapHold",NE),He.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var OE=ti.extend({addHooks:function(){Me(this._map._container,"leaflet-touch-zoom"),xe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){kt(this._map._container,"leaflet-touch-zoom"),it(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),xe(document,"touchmove",this._onTouchMove,this),xe(document,"touchend touchcancel",this._onTouchEnd,this),Nt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var b=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&b.x===0&&b.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var x=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(x,this,!0),Nt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),it(document,"touchmove",this._onTouchMove,this),it(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});He.addInitHook("addHandler","touchZoom",OE),He.BoxZoom=AE,He.DoubleClickZoom=ME,He.Drag=PE,He.Keyboard=RE,He.ScrollWheelZoom=kE,He.TapHold=NE,He.TouchZoom=OE,t.Bounds=dt,t.Browser=ce,t.CRS=Sn,t.Canvas=DE,t.Circle=n_,t.CircleMarker=Xh,t.Class=N,t.Control=$n,t.DivIcon=IE,t.DivOverlay=or,t.DomEvent=xt,t.DomUtil=nr,t.Draggable=ki,t.Evented=Ai,t.FeatureGroup=_t,t.GeoJSON=Vr,t.GridLayer=bu,t.Handler=ti,t.Icon=ni,t.ImageOverlay=rf,t.LatLng=De,t.LatLngBounds=wn,t.Layer=Fe,t.LayerGroup=Tt,t.LineUtil=d,t.Map=He,t.Marker=Yh,t.Mixin=za,t.Path=Io,t.Point=Te,t.PolyUtil=mu,t.Polygon=Za,t.Polyline=Fr,t.Popup=of,t.PosAnimation=$h,t.Projection=I,t.Rectangle=SE,t.Renderer=Br,t.SVG=Iu,t.SVGOverlay=wE,t.TileLayer=Qa,t.Tooltip=sf,t.Transformation=Hl,t.Util=P,t.VideoOverlay=bE,t.bind=r,t.bounds=mn,t.canvas=xE,t.circle=Ak,t.circleMarker=Sk,t.control=bo,t.divIcon=Vk,t.extend=n,t.featureGroup=an,t.geoJSON=yE,t.geoJson=Rk,t.gridLayer=Bk,t.icon=ii,t.imageOverlay=kk,t.latLng=$e,t.latLngBounds=nt,t.layerGroup=Ze,t.map=Hh,t.marker=Tk,t.point=ye,t.polygon=Pk,t.polyline=Mk,t.popup=Lk,t.rectangle=Uk,t.setOptions=E,t.stamp=a,t.svg=TE,t.svgOverlay=Ok,t.tileLayer=EE,t.tooltip=Fk,t.transformation=Yi,t.version=e,t.videoOverlay=Nk;var Hk=window.L;t.noConflict=function(){return window.L=Hk,this},window.L=t})});var ZE=null;var h_=1,KE=Symbol("SIGNAL");function ze(t){let e=ZE;return ZE=t,e}var QE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function t1(t){if(!(m_(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===h_)){if(!t.producerMustRecompute(t)&&!f_(t)){t.dirty=!1,t.lastCleanEpoch=h_;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=h_}}function YE(t){return t&&(t.nextProducerIndex=0),ze(t)}function XE(t,e){if(ze(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(m_(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)p_(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function f_(t){hf(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(t1(n),i!==n.version))return!0}return!1}function JE(t){if(hf(t),m_(t))for(let e=0;e<t.producerNode.length;e++)p_(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function p_(t,e){if(n1(t),hf(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)p_(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];hf(r),r.producerIndexOfThis[i]=e}}function m_(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function hf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function n1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function i1(){throw new Error}var r1=i1;function eC(t){r1=t}function me(t){return typeof t=="function"}function Xa(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ff=Xa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ds(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var yt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(me(i))try{i()}catch(o){e=o instanceof ff?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{tC(o)}catch(a){e=e??[],a instanceof ff?e=[...e,...a.errors]:e.push(a)}}if(e)throw new ff(e)}}add(e){var n;if(e&&e!==this)if(this.closed)tC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ds(n,e)}remove(e){let{_finalizers:n}=this;n&&Ds(n,e),e instanceof t&&e._removeParent(this)}};yt.EMPTY=(()=>{let t=new yt;return t.closed=!0,t})();var g_=yt.EMPTY;function pf(t){return t instanceof yt||t&&"closed"in t&&me(t.remove)&&me(t.add)&&me(t.unsubscribe)}function tC(t){me(t)?t():t.unsubscribe()}var Ni={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ja={setTimeout(t,e,...n){let{delegate:i}=Ja;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ja;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function mf(t){Ja.setTimeout(()=>{let{onUnhandledError:e}=Ni;if(e)e(t);else throw t})}function Du(){}var nC=__("C",void 0,void 0);function iC(t){return __("E",void 0,t)}function rC(t){return __("N",t,void 0)}function __(t,e,n){return{kind:t,value:e,error:n}}var xs=null;function ec(t){if(Ni.useDeprecatedSynchronousErrorHandling){let e=!xs;if(e&&(xs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=xs;if(xs=null,n)throw i}}else t()}function oC(t){Ni.useDeprecatedSynchronousErrorHandling&&xs&&(xs.errorThrown=!0,xs.error=t)}var Ts=class extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pf(e)&&e.add(this)):this.destination=a1}static create(e,n,i){return new jr(e,n,i)}next(e){this.isStopped?y_(rC(e),this):this._next(e)}error(e){this.isStopped?y_(iC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?y_(nC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},o1=Function.prototype.bind;function v_(t,e){return o1.call(t,e)}var b_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){gf(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){gf(i)}else gf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){gf(n)}}},jr=class extends Ts{constructor(e,n,i){super();let r;if(me(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Ni.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&v_(e.next,o),error:e.error&&v_(e.error,o),complete:e.complete&&v_(e.complete,o)}):r=e}this.destination=new b_(r)}};function gf(t){Ni.useDeprecatedSynchronousErrorHandling?oC(t):mf(t)}function s1(t){throw t}function y_(t,e){let{onStoppedNotification:n}=Ni;n&&Ja.setTimeout(()=>n(t,e))}var a1={closed:!0,next:Du,error:s1,complete:Du};var tc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rn(t){return t}function w_(...t){return I_(t)}function I_(t){return t.length===0?Rn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Pe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=l1(n)?n:new jr(n,i,r);return ec(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=sC(i),new i((r,o)=>{let a=new jr({next:c=>{try{n(c)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[tc](){return this}pipe(...n){return I_(n)(this)}toPromise(n){return n=sC(n),new n((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return t.create=e=>new t(e),t})();function sC(t){var e;return(e=t??Ni.Promise)!==null&&e!==void 0?e:Promise}function c1(t){return t&&me(t.next)&&me(t.error)&&me(t.complete)}function l1(t){return t&&t instanceof Ts||c1(t)&&pf(t)}function E_(t){return me(t?.lift)}function Se(t){return e=>{if(E_(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(t,e,n,i,r){return new C_(t,e,n,i,r)}var C_=class extends Ts{constructor(e,n,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function nc(){return Se((t,e)=>{let n=null;t._refCount++;let i=Re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ic=class extends Pe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,E_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;let n=this.getSubject();e.add(this.source.subscribe(Re(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return nc()(this)}};var aC=Xa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends Pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new _f(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new aC}next(n){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?g_:(this.currentObservers=null,o.push(n),new yt(()=>{this.currentObservers=null,Ds(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Pe;return n.source=this,n}}return t.create=(e,n)=>new _f(e,n),t})(),_f=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:g_}};var tn=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var xu={now(){return(xu.delegate||Date).now()},delegate:void 0};var vf=class extends Ae{constructor(e=1/0,n=1/0,i=xu){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:a}=this;n||(i.push(e),!r&&i.push(o.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let a=0;a<o.length&&!e.closed;a+=i?1:2)e.next(o[a]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let a=n.now(),c=0;for(let u=1;u<i.length&&i[u]<=a;u+=2)c=u;c&&i.splice(0,c+1)}}};var yf=class extends yt{constructor(e,n){super()}schedule(e,n=0){return this}};var Tu={setInterval(t,e,...n){let{delegate:i}=Tu;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Tu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var rc=class extends yf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Tu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Tu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ds(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var oc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};oc.now=xu.now;var sc=class extends oc{constructor(e,n=oc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var ar=new sc(rc),D_=ar;var bf=class extends rc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var wf=class extends sc{};var x_=new wf(bf);var kn=new Pe(t=>t.complete());function If(t){return t&&me(t.schedule)}function T_(t){return t[t.length-1]}function cC(t){return me(T_(t))?t.pop():void 0}function cr(t){return If(T_(t))?t.pop():void 0}function lC(t,e){return typeof T_(t)=="number"?t.pop():e}var ac=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ef(t){return me(t?.then)}function Cf(t){return me(t[tc])}function Df(t){return Symbol.asyncIterator&&me(t?.[Symbol.asyncIterator])}function xf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function u1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Tf=u1();function Sf(t){return me(t?.[Tf])}function Af(t){return jE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield lf(n.read());if(r)return yield lf(void 0);yield yield lf(i)}}finally{n.releaseLock()}})}function Mf(t){return me(t?.getReader)}function ht(t){if(t instanceof Pe)return t;if(t!=null){if(Cf(t))return d1(t);if(ac(t))return h1(t);if(Ef(t))return f1(t);if(Df(t))return uC(t);if(Sf(t))return p1(t);if(Mf(t))return m1(t)}throw xf(t)}function d1(t){return new Pe(e=>{let n=t[tc]();if(me(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function h1(t){return new Pe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function f1(t){return new Pe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,mf)})}function p1(t){return new Pe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function uC(t){return new Pe(e=>{g1(t,e).catch(n=>e.error(n))})}function m1(t){return uC(Af(t))}function g1(t,e){var n,i,r,o;return BE(this,void 0,void 0,function*(){try{for(n=zE(t);i=yield n.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function qn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function mi(t,e=0){return Se((n,i)=>{n.subscribe(Re(i,r=>qn(i,t,()=>i.next(r),e),()=>qn(i,t,()=>i.complete(),e),r=>qn(i,t,()=>i.error(r),e)))})}function Oi(t,e=0){return Se((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function dC(t,e){return ht(t).pipe(Oi(e),mi(e))}function hC(t,e){return ht(t).pipe(Oi(e),mi(e))}function fC(t,e){return new Pe(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function pC(t,e){return new Pe(n=>{let i;return qn(n,e,()=>{i=t[Tf](),qn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){n.error(a);return}o?n.complete():n.next(r)},0,!0)}),()=>me(i?.return)&&i.return()})}function Pf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Pe(n=>{qn(n,e,()=>{let i=t[Symbol.asyncIterator]();qn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function mC(t,e){return Pf(Af(t),e)}function gC(t,e){if(t!=null){if(Cf(t))return dC(t,e);if(ac(t))return fC(t,e);if(Ef(t))return hC(t,e);if(Df(t))return Pf(t,e);if(Sf(t))return pC(t,e);if(Mf(t))return mC(t,e)}throw xf(t)}function rt(t,e){return e?gC(t,e):ht(t)}function he(...t){let e=cr(t);return rt(t,e)}function cc(t,e){let n=me(t)?t:()=>t,i=r=>r.error(n());return new Pe(e?r=>e.schedule(i,0,r):i)}function Rf(t){return!!t&&(t instanceof Pe||me(t.lift)&&me(t.subscribe))}var zr=Xa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function _C(t){return t instanceof Date&&!isNaN(t)}function ge(t,e){return Se((n,i)=>{let r=0;n.subscribe(Re(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:_1}=Array;function v1(t,e){return _1(e)?t(...e):t(e)}function kf(t){return ge(e=>v1(t,e))}var{isArray:y1}=Array,{getPrototypeOf:b1,prototype:w1,keys:I1}=Object;function vC(t){if(t.length===1){let e=t[0];if(y1(e))return{args:e,keys:null};if(E1(e)){let n=I1(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function E1(t){return t&&typeof t=="object"&&b1(t)===w1}function yC(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function lc(...t){let e=cr(t),n=cC(t),{args:i,keys:r}=vC(t);if(i.length===0)return rt([],e);let o=new Pe(C1(i,e,r?a=>yC(r,a):Rn));return n?o.pipe(kf(n)):o}function C1(t,e,n=Rn){return i=>{bC(e,()=>{let{length:r}=t,o=new Array(r),a=r,c=r;for(let u=0;u<r;u++)bC(e,()=>{let f=rt(t[u],e),m=!1;f.subscribe(Re(i,v=>{o[u]=v,m||(m=!0,c--),c||i.next(n(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function bC(t,e,n){t?qn(n,t,e):e()}function wC(t,e,n,i,r,o,a,c){let u=[],f=0,m=0,v=!1,w=()=>{v&&!u.length&&!f&&e.complete()},E=k=>f<i?M(k):u.push(k),M=k=>{o&&e.next(k),f++;let F=!1;ht(n(k,m++)).subscribe(Re(e,q=>{r?.(q),o?E(q):e.next(q)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;u.length&&f<i;){let q=u.shift();a?qn(e,a,()=>M(q)):M(q)}w()}catch(q){e.error(q)}}))};return t.subscribe(Re(e,E,()=>{v=!0,w()})),()=>{c?.()}}function zt(t,e,n=1/0){return me(e)?zt((i,r)=>ge((o,a)=>e(i,o,r,a))(ht(t(i,r))),n):(typeof e=="number"&&(n=e),Se((i,r)=>wC(i,r,t,n)))}function Su(t=1/0){return zt(Rn,t)}function IC(){return Su(1)}function Co(...t){return IC()(rt(t,cr(t)))}function Nf(t){return new Pe(e=>{ht(t()).subscribe(e)})}var D1=["addListener","removeListener"],x1=["addEventListener","removeEventListener"],T1=["on","off"];function Au(t,e,n,i){if(me(n)&&(i=n,n=void 0),i)return Au(t,e,n).pipe(kf(i));let[r,o]=M1(t)?x1.map(a=>c=>t[a](e,c,n)):S1(t)?D1.map(EC(t,e)):A1(t)?T1.map(EC(t,e)):[];if(!r&&ac(t))return zt(a=>Au(a,e,n))(ht(t));if(!r)throw new TypeError("Invalid event target");return new Pe(a=>{let c=(...u)=>a.next(1<u.length?u:u[0]);return r(c),()=>o(c)})}function EC(t,e){return n=>i=>t[n](e,i)}function S1(t){return me(t.addListener)&&me(t.removeListener)}function A1(t){return me(t.on)&&me(t.off)}function M1(t){return me(t.addEventListener)&&me(t.removeEventListener)}function CC(t=0,e,n=D_){let i=-1;return e!=null&&(If(e)?n=e:i=e),new Pe(r=>{let o=_C(t)?+t-n.now():t;o<0&&(o=0);let a=0;return n.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Mu(...t){let e=cr(t),n=lC(t,1/0),i=t;return i.length?i.length===1?ht(i[0]):Su(n)(rt(i,e)):kn}function Lt(t,e){return Se((n,i)=>{let r=0;n.subscribe(Re(i,o=>t.call(e,o,r++)&&i.next(o)))})}function DC(t){return Se((e,n)=>{let i=!1,r=null,o=null,a=!1,c=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let f=r;r=null,n.next(f)}a&&n.complete()},u=()=>{o=null,a&&n.complete()};e.subscribe(Re(n,f=>{i=!0,r=f,o||ht(t(f)).subscribe(o=Re(n,c,u))},()=>{a=!0,(!i||!o||o.closed)&&n.complete()}))})}function Of(t,e=ar){return DC(()=>CC(t,e))}function Do(t){return Se((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Re(n,void 0,void 0,a=>{o=ht(t(a,Do(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function xC(t,e,n,i,r){return(o,a)=>{let c=n,u=e,f=0;o.subscribe(Re(a,m=>{let v=f++;u=c?t(u,m,v):(c=!0,m),i&&a.next(u)},r&&(()=>{c&&a.next(u),a.complete()})))}}function uc(t,e){return me(e)?zt(t,e,1):zt(t,1)}function Lf(t,e=ar){return Se((n,i)=>{let r=null,o=null,a=null,c=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=a+t,m=e.now();if(m<f){r=this.schedule(void 0,f-m),i.add(r);return}c()}n.subscribe(Re(i,f=>{o=f,a=e.now(),r||(r=e.schedule(u,t),i.add(r))},()=>{c(),i.complete()},void 0,()=>{o=r=null}))})}function xo(t){return Se((e,n)=>{let i=!1;e.subscribe(Re(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function gi(t){return t<=0?()=>kn:Se((e,n)=>{let i=0;e.subscribe(Re(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function S_(t){return ge(()=>t)}function dc(t,e=Rn){return t=t??P1,Se((n,i)=>{let r,o=!0;n.subscribe(Re(i,a=>{let c=e(a);(o||!t(r,c))&&(o=!1,r=c,i.next(a))}))})}function P1(t,e){return t===e}function Ff(t=R1){return Se((e,n)=>{let i=!1;e.subscribe(Re(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function R1(){return new zr}function Pu(t){return Se((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function _i(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Lt((r,o)=>t(r,o,i)):Rn,gi(1),n?xo(e):Ff(()=>new zr))}function hc(t){return t<=0?()=>kn:Se((e,n)=>{let i=[];e.subscribe(Re(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function A_(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Lt((r,o)=>t(r,o,i)):Rn,hc(1),n?xo(e):Ff(()=>new zr))}function fc(){return Se((t,e)=>{let n,i=!1;t.subscribe(Re(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function Ss(t,e){return Se(xC(t,e,arguments.length>=2,!0))}function TC(t={}){let{connector:e=()=>new Ae,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let a,c,u,f=0,m=!1,v=!1,w=()=>{c?.unsubscribe(),c=void 0},E=()=>{w(),a=u=void 0,m=v=!1},M=()=>{let k=a;E(),k?.unsubscribe()};return Se((k,F)=>{f++,!v&&!m&&w();let q=u=u??e();F.add(()=>{f--,f===0&&!v&&!m&&(c=M_(M,r))}),q.subscribe(F),!a&&f>0&&(a=new jr({next:ie=>q.next(ie),error:ie=>{v=!0,w(),c=M_(E,n,ie),q.error(ie)},complete:()=>{m=!0,w(),c=M_(E,i),q.complete()}}),ht(k).subscribe(a))})(o)}}function M_(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new jr({next:()=>{i.unsubscribe(),t()}});return ht(e(...n)).subscribe(i)}function Ru(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,TC({connector:()=>new vf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function ku(t){return Lt((e,n)=>t<=n)}function lr(...t){let e=cr(t);return Se((n,i)=>{(e?Co(t,n,e):Co(t,n)).subscribe(i)})}function bt(t,e){return Se((n,i)=>{let r=null,o=0,a=!1,c=()=>a&&!r&&i.complete();n.subscribe(Re(i,u=>{r?.unsubscribe();let f=0,m=o++;ht(t(u,m)).subscribe(r=Re(i,v=>i.next(e?e(u,v,m,f++):v),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function Vf(t,e){return me(e)?bt(()=>t,e):bt(()=>t)}function vi(t){return Se((e,n)=>{ht(t).subscribe(Re(n,()=>n.complete(),Du)),!n.closed&&e.subscribe(n)})}function Zt(t,e,n){let i=me(t)||e||n?{next:t,error:e,complete:n}:t;return i?Se((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let c=!0;r.subscribe(Re(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;c=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;c=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;c&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Rn}var sD="https://g.co/ng/security#xss",we=class extends Error{constructor(e,n){super(Vv(e,n)),this.code=e}};function Vv(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Yu(t){return{toString:t}.toString()}var Bf="__parameters__";function k1(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function N1(t,e,n){return Yu(()=>{let i=k1(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return c.annotation=a,c;function c(u,f,m){let v=u.hasOwnProperty(Bf)?u[Bf]:Object.defineProperty(u,Bf,{value:[]})[Bf];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(a),u}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Nu=globalThis;function ft(t){for(let e in t)if(t[e]===ft)return e;throw Error("Could not find renamed property on target object.")}function O1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Nn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Nn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function q_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var L1=ft({__forward_ref__:ft});function aD(t){return t.__forward_ref__=aD,t.toString=function(){return Nn(this())},t}function yi(t){return cD(t)?t():t}function cD(t){return typeof t=="function"&&t.hasOwnProperty(L1)&&t.__forward_ref__===aD}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ot(t){return{providers:t.providers||[],imports:t.imports||[]}}function gp(t){return SC(t,uD)||SC(t,dD)}function lD(t){return gp(t)!==null}function SC(t,e){return t.hasOwnProperty(e)?t[e]:null}function F1(t){let e=t&&(t[uD]||t[dD]);return e||null}function AC(t){return t&&(t.hasOwnProperty(MC)||t.hasOwnProperty(V1))?t[MC]:null}var uD=ft({\u0275prov:ft}),MC=ft({\u0275inj:ft}),dD=ft({ngInjectableDef:ft}),V1=ft({ngInjectorDef:ft}),se=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function hD(t){return t&&!!t.\u0275providers}var B1=ft({\u0275cmp:ft}),j1=ft({\u0275dir:ft}),z1=ft({\u0275pipe:ft}),U1=ft({\u0275mod:ft}),Zf=ft({\u0275fac:ft}),Ou=ft({__NG_ELEMENT_ID__:ft}),PC=ft({__NG_ENV_ID__:ft});function _p(t){return typeof t=="string"?t:t==null?"":String(t)}function $1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():_p(t)}function H1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new we(-200,t)}function Bv(t,e){throw new we(-201,!1)}var je=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(je||{}),G_;function fD(){return G_}function Gn(t){let e=G_;return G_=t,e}function pD(t,e,n){let i=gp(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&je.Optional)return null;if(e!==void 0)return e;Bv(t,"Injector")}var q1={},Lu=q1,W_="__NG_DI_FLAG__",Kf="ngTempTokenPath",G1="ngTokenPath",W1=/\n/gm,Z1="\u0275",RC="__source",_c;function K1(){return _c}function To(t){let e=_c;return _c=t,e}function Q1(t,e=je.Default){if(_c===void 0)throw new we(-203,!1);return _c===null?pD(t,void 0,e):_c.get(t,e&je.Optional?null:void 0,e)}function V(t,e=je.Default){return(fD()||Q1)(yi(t),e)}function Q(t,e=je.Default){return V(t,vp(e))}function vp(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Z_(t){let e=[];for(let n=0;n<t.length;n++){let i=yi(t[n]);if(Array.isArray(i)){if(i.length===0)throw new we(900,!1);let r,o=je.Default;for(let a=0;a<i.length;a++){let c=i[a],u=X1(c);typeof u=="number"?u===-1?r=c.token:o|=u:r=c}e.push(V(r,o))}else e.push(V(i))}return e}function Y1(t,e){return t[W_]=e,t.prototype[W_]=e,t}function X1(t){return t[W_]}function J1(t,e,n,i){let r=t[Kf];throw e[RC]&&r.unshift(e[RC]),t.message=eN(`
`+t.message,r,n,i),t[G1]=r,t[Kf]=null,t}function eN(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==Z1?t.slice(2):t;let r=Nn(e);if(Array.isArray(e))r=e.map(Nn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):Nn(c)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(W1,`
  `)}`}var yp=Y1(N1("Optional"),8);function Ps(t,e){let n=t.hasOwnProperty(Zf);return n?t[Zf]:null}function tN(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function nN(t){return t.flat(Number.POSITIVE_INFINITY)}function jv(t,e){t.forEach(n=>Array.isArray(n)?jv(n,e):e(n))}function mD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Qf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function iN(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function rN(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function zv(t,e,n){let i=Xu(t,e);return i>=0?t[i|1]=n:(i=~i,rN(t,i,e,n)),i}function P_(t,e){let n=Xu(t,e);if(n>=0)return t[n|1]}function Xu(t,e){return oN(t,e,1)}function oN(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),a=t[o<<n];if(e===a)return o<<n;a>e?r=o:i=o+1}return~(r<<n)}var bc={},Wn=[],wc=new se(""),gD=new se("",-1),_D=new se(""),Yf=class{get(e,n=Lu){if(n===Lu){let i=new Error(`NullInjectorError: No provider for ${Nn(e)}!`);throw i.name="NullInjectorError",i}return n}},vD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(vD||{}),hr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(hr||{}),pt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(pt||{});function sN(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function K_(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],a=n[i++],c=n[i++];t.setAttribute(e,a,c,o)}else{let o=r,a=n[++i];cN(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),i++}}return i}function aN(t){return t===3||t===4||t===6}function cN(t){return t.charCodeAt(0)===64}function Fu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?kC(t,n,r,null,e[++i]):kC(t,n,r,null,null))}}return t}function kC(t,e,n,i,r){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var yD="ng-template";function lN(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&sN(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(Uv(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Uv(t){return t.type===4&&t.value!==yD}function uN(t,e,n){let i=t.type===4&&!n?yD:t.value;return e===i}function dN(t,e,n){let i=4,r=t.attrs,o=r!==null?pN(r):0,a=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!a&&!Li(i)&&!Li(u))return!1;if(a&&Li(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!uN(t,u,n)||u===""&&e.length===1){if(Li(i))return!1;a=!0}}else if(i&8){if(r===null||!lN(t,r,u,n)){if(Li(i))return!1;a=!0}}else{let f=e[++c],m=hN(u,r,Uv(t),n);if(m===-1){if(Li(i))return!1;a=!0;continue}if(f!==""){let v;if(m>o?v="":v=r[m+1].toLowerCase(),i&2&&f!==v){if(Li(i))return!1;a=!0}}}}return Li(i)||a}function Li(t){return(t&1)===0}function hN(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let a=e[r];if(a===t)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++r];for(;typeof c=="string";)c=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return mN(e,t)}function bD(t,e,n=!1){for(let i=0;i<e.length;i++)if(dN(t,e[i],n))return!0;return!1}function fN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function pN(t){for(let e=0;e<t.length;e++){let n=t[e];if(aN(n))return e}return t.length}function mN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function gN(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function NC(t,e){return t?":not("+e.trim()+")":e}function _N(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(i&2){let c=t[++n];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!Li(a)&&(e+=NC(o,r),r=""),i=a,o=o||!Li(i);n++}return r!==""&&(e+=NC(o,r)),e}function vN(t){return t.map(_N).join(",")}function yN(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Li(r))break;r=o}i++}return{attrs:e,classes:n}}function St(t){return Yu(()=>{let e=DD(t),n=vt(X({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===vD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||hr.Emulated,styles:t.styles||Wn,_:null,schemas:t.schemas||null,tView:null,id:""});xD(n);let i=t.dependencies;return n.directiveDefs=LC(i,!1),n.pipeDefs=LC(i,!0),n.id=IN(n),n})}function bN(t){return Rs(t)||wD(t)}function wN(t){return t!==null}function st(t){return Yu(()=>({type:t.type,bootstrap:t.bootstrap||Wn,declarations:t.declarations||Wn,imports:t.imports||Wn,exports:t.exports||Wn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function OC(t,e){if(t==null)return bc;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,a,c=pt.None;Array.isArray(r)?(c=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(n[o]=c!==pt.None?[i,c]:i,e[o]=a):n[o]=i}return n}function ln(t){return Yu(()=>{let e=DD(t);return xD(e),e})}function bp(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Rs(t){return t[B1]||null}function wD(t){return t[j1]||null}function ID(t){return t[z1]||null}function ED(t){let e=Rs(t)||wD(t)||ID(t);return e!==null?e.standalone:!1}function CD(t,e){let n=t[U1]||null;if(!n&&e===!0)throw new Error(`Type ${Nn(t)} does not have '\u0275mod' property.`);return n}function DD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||bc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Wn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:OC(t.inputs,e),outputs:OC(t.outputs),debugInfo:null}}function xD(t){t.features?.forEach(e=>e(t))}function LC(t,e){if(!t)return null;let n=e?ID:bN;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(wN)}function IN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function wp(t){return{\u0275providers:t}}function $v(...t){return{\u0275providers:TD(!0,t),\u0275fromNgModule:!0}}function TD(t,...e){let n=[],i=new Set,r,o=a=>{n.push(a)};return jv(e,a=>{let c=a;Q_(c,o,[],i)&&(r||=[],r.push(c))}),r!==void 0&&SD(r,o),n}function SD(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Hv(r,o=>{e(o,i)})}}function Q_(t,e,n,i){if(t=yi(t),!t)return!1;let r=null,o=AC(t),a=!o&&Rs(t);if(!o&&!a){let u=t.ngModule;if(o=AC(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=t}let c=i.has(r);if(a){if(c)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)Q_(f,e,n,i)}}else if(o){if(o.imports!=null&&!c){i.add(r);let f;try{jv(o.imports,m=>{Q_(m,e,n,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&SD(f,e)}if(!c){let f=Ps(r)||(()=>new r);e({provide:r,useFactory:f,deps:Wn},r),e({provide:_D,useValue:r,multi:!0},r),e({provide:wc,useValue:()=>V(r),multi:!0},r)}let u=o.providers;if(u!=null&&!c){let f=t;Hv(u,m=>{e(m,f)})}}else return!1;return r!==t&&t.providers!==void 0}function Hv(t,e){for(let n of t)hD(n)&&(n=n.\u0275providers),Array.isArray(n)?Hv(n,e):e(n)}var EN=ft({provide:String,useValue:ft});function AD(t){return t!==null&&typeof t=="object"&&EN in t}function CN(t){return!!(t&&t.useExisting)}function DN(t){return!!(t&&t.useFactory)}function Y_(t){return typeof t=="function"}var Ip=new se(""),Uf={},xN={},R_;function qv(){return R_===void 0&&(R_=new Yf),R_}var Zn=class{},Vu=class extends Zn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,J_(e,a=>this.processProvider(a)),this.records.set(gD,pc(void 0,this)),r.has("environment")&&this.records.set(Zn,pc(void 0,this));let o=this.records.get(Ip);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(_D,Wn,je.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ze(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ze(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=To(this),i=Gn(void 0),r;try{return e()}finally{To(n),Gn(i)}}get(e,n=Lu,i=je.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(PC))return e[PC](this);i=vp(i);let r,o=To(this),a=Gn(void 0);try{if(!(i&je.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=RN(e)&&gp(e);f&&this.injectableDefInScope(f)?u=pc(X_(e),Uf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=i&je.Self?qv():this.parent;return n=i&je.Optional&&n===Lu?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Kf]=c[Kf]||[]).unshift(Nn(e)),o)throw c;return J1(c,e,"R3InjectorError",this.source)}else throw c}finally{Gn(a),To(o)}}resolveInjectorInitializers(){let e=ze(null),n=To(this),i=Gn(void 0),r;try{let o=this.get(wc,Wn,je.Self);for(let a of o)a()}finally{To(n),Gn(i),ze(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Nn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(e){e=yi(e);let n=Y_(e)?e:yi(e&&e.provide),i=SN(e);if(!Y_(e)&&e.multi===!0){let r=this.records.get(n);r||(r=pc(void 0,Uf,!0),r.factory=()=>Z_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=ze(null);try{return n.value===Uf&&(n.value=xN,n.value=n.factory()),typeof n.value=="object"&&n.value&&PN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ze(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=yi(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function X_(t){let e=gp(t),n=e!==null?e.factory:Ps(t);if(n!==null)return n;if(t instanceof se)throw new we(204,!1);if(t instanceof Function)return TN(t);throw new we(204,!1)}function TN(t){if(t.length>0)throw new we(204,!1);let n=F1(t);return n!==null?()=>n.factory(t):()=>new t}function SN(t){if(AD(t))return pc(void 0,t.useValue);{let e=AN(t);return pc(e,Uf)}}function AN(t,e,n){let i;if(Y_(t)){let r=yi(t);return Ps(r)||X_(r)}else if(AD(t))i=()=>yi(t.useValue);else if(DN(t))i=()=>t.useFactory(...Z_(t.deps||[]));else if(CN(t))i=()=>V(yi(t.useExisting));else{let r=yi(t&&(t.useClass||t.provide));if(MN(t))i=()=>new r(...Z_(t.deps));else return Ps(r)||X_(r)}return i}function pc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function MN(t){return!!t.deps}function PN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function RN(t){return typeof t=="function"||typeof t=="object"&&t instanceof se}function J_(t,e){for(let n of t)Array.isArray(n)?J_(n,e):n&&hD(n)?J_(n.\u0275providers,e):e(n)}function qr(t,e){t instanceof Vu&&t.assertNotDestroyed();let n,i=To(t),r=Gn(void 0);try{return e()}finally{To(i),Gn(r)}}function MD(){return fD()!==void 0||K1()!=null}function PD(t){if(!MD())throw new we(-203,!1)}function kN(t){return typeof t=="function"}var mr=0,ke=1,Ie=2,vn=3,Vi=4,oi=5,Ic=6,Bu=7,En=8,Ec=9,Bi=10,nn=11,ju=12,FC=13,Tc=14,bi=15,Ju=16,mc=17,Ur=18,Ep=19,RD=20,So=21,k_=22,ks=23,On=25,Gv=1;var Ns=7,Xf=8,Cc=9,Cn=10,Wv=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Wv||{});function vc(t){return Array.isArray(t)&&typeof t[Gv]=="object"}function Gr(t){return Array.isArray(t)&&t[Gv]===!0}function kD(t){return(t.flags&4)!==0}function Cp(t){return t.componentOffset>-1}function Zv(t){return(t.flags&1)===1}function Ao(t){return!!t.template}function NN(t){return(t[Ie]&512)!==0}var ev=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function ND(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Bs(){return OD}function OD(t){return t.type.prototype.ngOnChanges&&(t.setInput=LN),ON}Bs.ngInherit=!0;function ON(){let t=FD(this),e=t?.current;if(e){let n=t.previous;if(n===bc)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function LN(t,e,n,i,r){let o=this.declaredInputs[i],a=FD(t)||FN(t,{previous:bc,current:null}),c=a.current||(a.current={}),u=a.previous,f=u[o];c[o]=new ev(f&&f.currentValue,n,u===bc),ND(t,e,r,n)}var LD="__ngSimpleChanges__";function FD(t){return t[LD]||null}function FN(t,e){return t[LD]=e}var VC=null;var ur=function(t,e,n){VC?.(t,e,n)},VN="svg",BN="math",jN=!1;function zN(){return jN}function fr(t){for(;Array.isArray(t);)t=t[mr];return t}function UN(t){for(;Array.isArray(t);){if(typeof t[Gv]=="object")return t;t=t[mr]}return null}function VD(t,e){return fr(e[t])}function wi(t,e){return fr(e[t.index])}function Kv(t,e){return t.data[e]}function BD(t,e){return t[e]}function js(t,e){let n=e[t];return vc(n)?n:n[mr]}function $N(t){return(t[Ie]&4)===4}function Qv(t){return(t[Ie]&128)===128}function HN(t){return Gr(t[vn])}function Jf(t,e){return e==null?null:t[e]}function jD(t){t[mc]=0}function qN(t){t[Ie]&1024||(t[Ie]|=1024,Qv(t)&&zu(t))}function GN(t,e){for(;t>0;)e=e[Tc],t--;return e}function Yv(t){return!!(t[Ie]&9216||t[ks]?.dirty)}function tv(t){t[Bi].changeDetectionScheduler?.notify(1),Yv(t)?zu(t):t[Ie]&64&&(zN()?(t[Ie]|=1024,zu(t)):t[Bi].changeDetectionScheduler?.notify())}function zu(t){t[Bi].changeDetectionScheduler?.notify();let e=Uu(t);for(;e!==null&&!(e[Ie]&8192||(e[Ie]|=8192,!Qv(e)));)e=Uu(e)}function zD(t,e){if((t[Ie]&256)===256)throw new we(911,!1);t[So]===null&&(t[So]=[]),t[So].push(e)}function WN(t,e){if(t[So]===null)return;let n=t[So].indexOf(e);n!==-1&&t[So].splice(n,1)}function Uu(t){let e=t[vn];return Gr(e)?e[vn]:e}var Ve={lFrame:YD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ZN(){return Ve.lFrame.elementDepthCount}function KN(){Ve.lFrame.elementDepthCount++}function QN(){Ve.lFrame.elementDepthCount--}function UD(){return Ve.bindingsEnabled}function $D(){return Ve.skipHydrationRootTNode!==null}function YN(t){return Ve.skipHydrationRootTNode===t}function XN(){Ve.skipHydrationRootTNode=null}function Ke(){return Ve.lFrame.lView}function Dn(){return Ve.lFrame.tView}function Ln(t){return Ve.lFrame.contextLView=t,t[En]}function Fn(t){return Ve.lFrame.contextLView=null,t}function zi(){let t=HD();for(;t!==null&&t.type===64;)t=t.parent;return t}function HD(){return Ve.lFrame.currentTNode}function JN(){let t=Ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ed(t,e){let n=Ve.lFrame;n.currentTNode=t,n.isParent=e}function qD(){return Ve.lFrame.isParent}function GD(){Ve.lFrame.isParent=!1}function eO(){return Ve.lFrame.contextLView}function tO(){let t=Ve.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function nO(t){return Ve.lFrame.bindingIndex=t}function Sc(){return Ve.lFrame.bindingIndex++}function WD(t){let e=Ve.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function iO(){return Ve.lFrame.inI18n}function rO(t,e){let n=Ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,nv(e)}function oO(){return Ve.lFrame.currentDirectiveIndex}function nv(t){Ve.lFrame.currentDirectiveIndex=t}function Xv(t){let e=Ve.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ZD(){return Ve.lFrame.currentQueryIndex}function Jv(t){Ve.lFrame.currentQueryIndex=t}function sO(t){let e=t[ke];return e.type===2?e.declTNode:e.type===1?t[oi]:null}function KD(t,e,n){if(n&je.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&je.Host);)if(r=sO(o),r===null||(o=o[Tc],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=Ve.lFrame=QD();return i.currentTNode=e,i.lView=t,!0}function ey(t){let e=QD(),n=t[ke];Ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function QD(){let t=Ve.lFrame,e=t===null?null:t.child;return e===null?YD(t):e}function YD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function XD(){let t=Ve.lFrame;return Ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var JD=XD;function ty(){let t=XD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function aO(t){return(Ve.lFrame.contextLView=GN(t,Ve.lFrame.contextLView))[En]}function Po(){return Ve.lFrame.selectedIndex}function Os(t){Ve.lFrame.selectedIndex=t}function ny(){let t=Ve.lFrame;return Kv(t.tView,t.selectedIndex)}function cO(){return Ve.lFrame.currentNamespace}var ex=!0;function iy(){return ex}function ry(t){ex=t}function lO(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=OD(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function oy(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(t.contentHooks??=[]).push(-n,a),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),f&&((t.viewHooks??=[]).push(n,f),(t.viewCheckHooks??=[]).push(n,f)),m!=null&&(t.destroyHooks??=[]).push(n,m)}}function $f(t,e,n){tx(t,e,3,n)}function Hf(t,e,n,i){(t[Ie]&3)===n&&tx(t,e,n,i)}function N_(t,e){let n=t[Ie];(n&3)===e&&(n&=16383,n+=1,t[Ie]=n)}function tx(t,e,n,i){let r=i!==void 0?t[mc]&65535:0,o=i??-1,a=e.length-1,c=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(c=e[u],i!=null&&c>=i)break}else e[u]<0&&(t[mc]+=65536),(c<o||o==-1)&&(uO(t,n,e,u),t[mc]=(t[mc]&4294901760)+u+2),u++}function BC(t,e){ur(4,t,e);let n=ze(null);try{e.call(t)}finally{ze(n),ur(5,t,e)}}function uO(t,e,n,i){let r=n[i]<0,o=n[i+1],a=r?-n[i]:n[i],c=t[a];r?t[Ie]>>14<t[mc]>>16&&(t[Ie]&3)===e&&(t[Ie]+=16384,BC(c,o)):BC(c,o)}var yc=-1,$u=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function dO(t){return t instanceof $u}function hO(t){return(t.flags&8)!==0}function fO(t){return(t.flags&16)!==0}function nx(t){return t!==yc}function ep(t){return t&32767}function pO(t){return t>>16}function tp(t,e){let n=pO(t),i=e;for(;n>0;)i=i[Tc],n--;return i}var iv=!0;function np(t){let e=iv;return iv=t,e}var mO=256,ix=mO-1,rx=5,gO=0,dr={};function _O(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ou)&&(i=n[Ou]),i==null&&(i=n[Ou]=gO++);let r=i&ix,o=1<<r;e.data[t+(r>>rx)]|=o}function ox(t,e){let n=sx(t,e);if(n!==-1)return n;let i=e[ke];i.firstCreatePass&&(t.injectorIndex=e.length,O_(i.data,t),O_(e,null),O_(i.blueprint,null));let r=sy(t,e),o=t.injectorIndex;if(nx(r)){let a=ep(r),c=tp(r,e),u=c[ke].data;for(let f=0;f<8;f++)e[o+f]=c[a+f]|u[a+f]}return e[o+8]=r,o}function O_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sx(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function sy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=dx(r),i===null)return yc;if(n++,r=r[Tc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return yc}function vO(t,e,n){_O(t,e,n)}function ax(t,e,n){if(n&je.Optional||t!==void 0)return t;Bv(e,"NodeInjector")}function cx(t,e,n,i){if(n&je.Optional&&i===void 0&&(i=null),!(n&(je.Self|je.Host))){let r=t[Ec],o=Gn(void 0);try{return r?r.get(e,i,n&je.Optional):pD(e,i,n&je.Optional)}finally{Gn(o)}}return ax(i,e,n)}function lx(t,e,n,i=je.Default,r){if(t!==null){if(e[Ie]&2048&&!(i&je.Self)){let a=IO(t,e,n,i,dr);if(a!==dr)return a}let o=ux(t,e,n,i,dr);if(o!==dr)return o}return cx(e,n,i,r)}function ux(t,e,n,i,r){let o=bO(n);if(typeof o=="function"){if(!KD(e,t,i))return i&je.Host?ax(r,n,i):cx(e,n,i,r);try{let a;if(a=o(i),a==null&&!(i&je.Optional))Bv(n);else return a}finally{JD()}}else if(typeof o=="number"){let a=null,c=sx(t,e),u=yc,f=i&je.Host?e[bi][oi]:null;for((c===-1||i&je.SkipSelf)&&(u=c===-1?sy(t,e):e[c+8],u===yc||!zC(i,!1)?c=-1:(a=e[ke],c=ep(u),e=tp(u,e)));c!==-1;){let m=e[ke];if(jC(o,c,m.data)){let v=yO(c,e,n,a,i,f);if(v!==dr)return v}u=e[c+8],u!==yc&&zC(i,e[ke].data[c+8]===f)&&jC(o,c,e)?(a=m,c=ep(u),e=tp(u,e)):c=-1}}return r}function yO(t,e,n,i,r,o){let a=e[ke],c=a.data[t+8],u=i==null?Cp(c)&&iv:i!=a&&(c.type&3)!==0,f=r&je.Host&&o===c,m=qf(c,a,n,u,f);return m!==null?Dc(e,a,m,c):dr}function qf(t,e,n,i,r){let o=t.providerIndexes,a=e.data,c=o&1048575,u=t.directiveStart,f=t.directiveEnd,m=o>>20,v=i?c:c+m,w=r?c+m:f;for(let E=v;E<w;E++){let M=a[E];if(E<u&&n===M||E>=u&&M.type===n)return E}if(r){let E=a[u];if(E&&Ao(E)&&E.type===n)return u}return null}function Dc(t,e,n,i){let r=t[n],o=e.data;if(dO(r)){let a=r;a.resolving&&H1($1(o[n]));let c=np(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Gn(a.injectImpl):null,m=KD(t,i,je.Default);try{r=t[n]=a.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&lO(n,o[n],e)}finally{f!==null&&Gn(f),np(c),a.resolving=!1,JD()}}return r}function bO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ou)?t[Ou]:void 0;return typeof e=="number"?e>=0?e&ix:wO:e}function jC(t,e,n){let i=1<<t;return!!(n[e+(t>>rx)]&i)}function zC(t,e){return!(t&je.Self)&&!(t&je.Host&&e)}var Ms=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return lx(this._tNode,this._lView,e,vp(i),n)}};function wO(){return new Ms(zi(),Ke())}function Dp(t){return Yu(()=>{let e=t.prototype.constructor,n=e[Zf]||rv(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Zf]||rv(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function rv(t){return cD(t)?()=>{let e=rv(yi(t));return e&&e()}:Ps(t)}function IO(t,e,n,i,r){let o=t,a=e;for(;o!==null&&a!==null&&a[Ie]&2048&&!(a[Ie]&512);){let c=ux(o,a,n,i|je.Self,dr);if(c!==dr)return c;let u=o.parent;if(!u){let f=a[RD];if(f){let m=f.get(n,dr,i);if(m!==dr)return m}u=dx(a),a=a[Tc]}o=u}return r}function dx(t){let e=t[ke],n=e.type;return n===2?e.declTNode:n===1?t[oi]:null}function UC(t,e=null,n=null,i){let r=hx(t,e,n,i);return r.resolveInjectorInitializers(),r}function hx(t,e=null,n=null,i,r=new Set){let o=[n||Wn,$v(t)];return i=i||(typeof t=="object"?void 0:Nn(t)),new Vu(o,e||qv(),i||null,r)}var un=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return UC({name:""},r,i,"");{let o=i.name??"";return UC({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Lu,e.NULL=new Yf,e.\u0275prov=ee({token:e,providedIn:"any",factory:()=>V(gD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var EO="ngOriginalError";function L_(t){return t[EO]}var pr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&L_(e);for(;n&&L_(n);)n=L_(n);return n||null}},fx=new se("",{providedIn:"root",factory:()=>Q(pr).handleError.bind(void 0)}),xp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CO,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),ov=class extends xp{constructor(e){super(),this._lView=e}onDestroy(e){return zD(this._lView,e),()=>WN(this._lView,e)}};function CO(){return new ov(Ke())}function DO(){return Ac(zi(),Ke())}function Ac(t,e){return new Ct(wi(t,e))}var Ct=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=DO;let t=e;return t})();function xO(t){return t instanceof Ct?t.nativeElement:t}var sv=class extends Ae{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,MD()&&(this.destroyRef=Q(xp,{optional:!0})??void 0)}emit(e){let n=ze(null);try{super.next(e)}finally{ze(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=F_(o),r&&(r=F_(r)),a&&(a=F_(a)));let c=super.subscribe({next:r,error:o,complete:a});return e instanceof yt&&e.add(c),c}};function F_(t){return e=>{setTimeout(t,void 0,e)}}var Je=sv;function TO(){return this._results[Symbol.iterator]()}var ip=class t{get changes(){return this._changes??=new Je}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=TO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=nN(e);(this._changesDetected=!tN(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function px(t){return(t.flags&128)===128}var mx=new Map,SO=0;function AO(){return SO++}function MO(t){mx.set(t[Ep],t)}function PO(t){mx.delete(t[Ep])}var $C="__ngContext__";function Ls(t,e){vc(e)?(t[$C]=e[Ep],MO(e)):t[$C]=e}function gx(t){return vx(t[ju])}function _x(t){return vx(t[Vi])}function vx(t){for(;t!==null&&!Gr(t);)t=t[Vi];return t}var av;function yx(t){av=t}function RO(){if(av!==void 0)return av;if(typeof document<"u")return document;throw new we(210,!1)}var Tp=new se("",{providedIn:"root",factory:()=>kO}),kO="ng",ay=new se(""),Vn=new se("",{providedIn:"platform",factory:()=>"unknown"});var zs=new se(""),td=new se("",{providedIn:"root",factory:()=>RO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var NO="h",OO="b";var LO=()=>null;function cy(t,e,n=!1){return LO(t,e,n)}var bx=!1,FO=new se("",{providedIn:"root",factory:()=>bx});var rp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sD})`}};function nd(t){return t instanceof rp?t.changingThisBreaksApplicationSecurity:t}function wx(t,e){let n=VO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${sD})`)}return n===e}function VO(t){return t instanceof rp&&t.getTypeName()||null}var BO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ix(t){return t=String(t),t.match(BO)?t:"unsafe:"+t}var ly=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ly||{});function si(t){let e=jO();return e?e.sanitize(ly.URL,t)||"":wx(t,"URL")?nd(t):Ix(_p(t))}function jO(){let t=Ke();return t&&t[Bi].sanitizer}function Ex(t){return t instanceof Function?t():t}function Cx(t){return(t??Q(un)).get(Vn)==="browser"}var $r=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}($r||{}),zO;function uy(t,e){return zO(t,e)}function gc(t,e,n,i,r){if(i!=null){let o,a=!1;Gr(i)?o=i:vc(i)&&(a=!0,i=i[mr]);let c=fr(i);t===0&&n!==null?r==null?Ax(e,n,c):op(e,n,c,r||null,!0):t===1&&n!==null?op(e,n,c,r||null,!0):t===2?nL(e,c,a):t===3&&e.destroyNode(c),o!=null&&rL(e,t,o,n,r)}}function UO(t,e){return t.createText(e)}function $O(t,e,n){t.setValue(e,n)}function Dx(t,e,n){return t.createElement(e,n)}function HO(t,e){xx(t,e),e[mr]=null,e[oi]=null}function qO(t,e,n,i,r,o){i[mr]=r,i[oi]=e,Ap(t,i,n,1,r,o)}function xx(t,e){e[Bi].changeDetectionScheduler?.notify(1),Ap(t,e,e[nn],2,null,null)}function GO(t){let e=t[ju];if(!e)return V_(t[ke],t);for(;e;){let n=null;if(vc(e))n=e[ju];else{let i=e[Cn];i&&(n=i)}if(!n){for(;e&&!e[Vi]&&e!==t;)vc(e)&&V_(e[ke],e),e=e[vn];e===null&&(e=t),vc(e)&&V_(e[ke],e),n=e&&e[Vi]}e=n}}function WO(t,e,n,i){let r=Cn+i,o=n.length;i>0&&(n[r-1][Vi]=e),i<o-Cn?(e[Vi]=n[r],mD(n,Cn+i,e)):(n.push(e),e[Vi]=null),e[vn]=n;let a=e[Ju];a!==null&&n!==a&&ZO(a,e);let c=e[Ur];c!==null&&c.insertView(t),tv(e),e[Ie]|=128}function ZO(t,e){let n=t[Cc],r=e[vn][vn][bi];e[bi]!==r&&(t[Ie]|=Wv.HasTransplantedViews),n===null?t[Cc]=[e]:n.push(e)}function Tx(t,e){let n=t[Cc],i=n.indexOf(e);n.splice(i,1)}function Hu(t,e){if(t.length<=Cn)return;let n=Cn+e,i=t[n];if(i){let r=i[Ju];r!==null&&r!==t&&Tx(r,i),e>0&&(t[n-1][Vi]=i[Vi]);let o=Qf(t,Cn+e);HO(i[ke],i);let a=o[Ur];a!==null&&a.detachView(o[ke]),i[vn]=null,i[Vi]=null,i[Ie]&=-129}return i}function Sp(t,e){if(!(e[Ie]&256)){let n=e[nn];n.destroyNode&&Ap(t,e,n,3,null,null),GO(e)}}function V_(t,e){if(e[Ie]&256)return;let n=ze(null);try{e[Ie]&=-129,e[Ie]|=256,e[ks]&&JE(e[ks]),QO(t,e),KO(t,e),e[ke].type===1&&e[nn].destroy();let i=e[Ju];if(i!==null&&Gr(e[vn])){i!==e[vn]&&Tx(i,e);let r=e[Ur];r!==null&&r.detachView(t)}PO(e)}finally{ze(n)}}function KO(t,e){let n=t.cleanup,i=e[Bu];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[n[o+1]];n[o].call(a)}i!==null&&(e[Bu]=null);let r=e[So];if(r!==null){e[So]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function QO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof $u)){let o=n[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=r[o[a]],u=o[a+1];ur(4,c,u);try{u.call(c)}finally{ur(5,c,u)}}else{ur(4,r,o);try{o.call(r)}finally{ur(5,r,o)}}}}}function Sx(t,e,n){return YO(t,e.parent,n)}function YO(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[mr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===hr.None||o===hr.Emulated)return null}return wi(i,n)}}function op(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Ax(t,e,n){t.appendChild(e,n)}function HC(t,e,n,i,r){i!==null?op(t,e,n,i,r):Ax(t,e,n)}function XO(t,e,n,i){t.removeChild(e,n,i)}function dy(t,e){return t.parentNode(e)}function JO(t,e){return t.nextSibling(e)}function Mx(t,e,n){return tL(t,e,n)}function eL(t,e,n){return t.type&40?wi(t,n):null}var tL=eL,qC;function hy(t,e,n,i){let r=Sx(t,i,e),o=e[nn],a=i.parent||e[oi],c=Mx(a,i,e);if(r!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)HC(o,r,n[u],c,!1);else HC(o,r,n,c,!1);qC!==void 0&&qC(o,i,e,n,r)}function Gf(t,e){if(e!==null){let n=e.type;if(n&3)return wi(e,t);if(n&4)return cv(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Gf(t,i);{let r=t[e.index];return Gr(r)?cv(-1,r):fr(r)}}else{if(n&32)return uy(e,t)()||fr(t[e.index]);{let i=Px(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Uu(t[bi]);return Gf(r,i)}else return Gf(t,e.next)}}}return null}function Px(t,e){if(e!==null){let i=t[bi][oi],r=e.projection;return i.projection[r]}return null}function cv(t,e){let n=Cn+t+1;if(n<e.length){let i=e[n],r=i[ke].firstChild;if(r!==null)return Gf(i,r)}return e[Ns]}function nL(t,e,n){let i=dy(t,e);i&&XO(t,i,e,n)}function fy(t,e,n,i,r,o,a){for(;n!=null;){let c=i[n.index],u=n.type;if(a&&e===0&&(c&&Ls(fr(c),i),n.flags|=2),(n.flags&32)!==32)if(u&8)fy(t,e,n.child,i,r,o,!1),gc(e,t,r,c,o);else if(u&32){let f=uy(n,i),m;for(;m=f();)gc(e,t,r,m,o);gc(e,t,r,c,o)}else u&16?Rx(t,e,i,n,r,o):gc(e,t,r,c,o);n=a?n.projectionNext:n.next}}function Ap(t,e,n,i,r,o){fy(n,i,t.firstChild,e,r,o,!1)}function iL(t,e,n){let i=e[nn],r=Sx(t,n,e),o=n.parent||e[oi],a=Mx(o,n,e);Rx(i,0,e,n,r,a)}function Rx(t,e,n,i,r,o){let a=n[bi],u=a[oi].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];gc(e,t,r,m,o)}else{let f=u,m=a[vn];px(i)&&(f.flags|=128),fy(t,e,f,m,r,o,!0)}}function rL(t,e,n,i,r){let o=n[Ns],a=fr(n);o!==a&&gc(e,t,i,o,r);for(let c=Cn;c<n.length;c++){let u=n[c];Ap(u[ke],u,t,e,i,o)}}function oL(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:$r.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=$r.Important),t.setStyle(n,i,r,o))}}function sL(t,e,n){t.setAttribute(e,"style",n)}function kx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Nx(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&K_(t,e,i),r!==null&&kx(t,e,r),o!==null&&sL(t,e,o)}var Wr={};function le(t=1){Ox(Dn(),Ke(),Po()+t,!1)}function Ox(t,e,n,i){if(!i)if((e[Ie]&3)===3){let o=t.preOrderCheckHooks;o!==null&&$f(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Hf(e,o,0,n)}Os(n)}function Ee(t,e=je.Default){let n=Ke();if(n===null)return V(t,e);let i=zi();return lx(i,n,yi(t),e)}function py(){let t="invalid";throw new Error(t)}function Lx(t,e,n,i,r,o){let a=ze(null);try{let c=null;r&pt.SignalBased&&(c=e[i][KE]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),r&pt.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):ND(e,c,i,o)}finally{ze(a)}}function aL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Os(~r);else{let o=r,a=n[++i],c=n[++i];rO(a,o);let u=e[o];c(2,u)}}}finally{Os(-1)}}function Mp(t,e,n,i,r,o,a,c,u,f,m){let v=e.blueprint.slice();return v[mr]=r,v[Ie]=i|4|128|8|64,(f!==null||t&&t[Ie]&2048)&&(v[Ie]|=2048),jD(v),v[vn]=v[Tc]=t,v[En]=n,v[Bi]=a||t&&t[Bi],v[nn]=c||t&&t[nn],v[Ec]=u||t&&t[Ec]||null,v[oi]=o,v[Ep]=AO(),v[Ic]=m,v[RD]=f,v[bi]=e.type==2?t[bi]:v,v}function id(t,e,n,i,r){let o=t.data[e];if(o===null)o=cL(t,e,n,i,r),iO()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let a=JN();o.injectorIndex=a===null?-1:a.injectorIndex}return ed(o,!0),o}function cL(t,e,n,i,r){let o=HD(),a=qD(),c=a?o:o&&o.parent,u=t.data[e]=pL(t,c,n,e,i,r);return t.firstChild===null&&(t.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function Fx(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function Vx(t,e,n,i,r){let o=Po(),a=i&2;try{Os(-1),a&&e.length>On&&Ox(t,e,On,!1),ur(a?2:0,r),n(i,r)}finally{Os(o),ur(a?3:1,r)}}function Bx(t,e,n){if(kD(e)){let i=ze(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let c=t.data[a];if(c.contentQueries){let u=n[a];c.contentQueries(1,u,a)}}}finally{ze(i)}}}function jx(t,e,n){UD()&&(bL(t,e,n,wi(n,e)),(n.flags&64)===64&&Gx(t,e,n))}function zx(t,e,n=wi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],c=a===-1?n(e,t):t[a];t[r++]=c}}}function Ux(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=my(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function my(t,e,n,i,r,o,a,c,u,f,m){let v=On+i,w=v+r,E=lL(v,w),M=typeof f=="function"?f():f;return E[ke]={type:t,blueprint:E,template:n,queries:null,viewQuery:c,declTNode:e,data:E.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:m}}function lL(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Wr);return n}function uL(t,e,n,i){let o=i.get(FO,bx)||n===hr.ShadowDom,a=t.selectRootElement(e,o);return dL(a),a}function dL(t){hL(t)}var hL=()=>null;function fL(t,e,n,i){let r=Kx(e);r.push(n),t.firstCreatePass&&Qx(t).push(i,r.length-1)}function pL(t,e,n,i,r,o){let a=e?e.injectorIndex:-1,c=0;return $D()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function GC(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let c,u=pt.None;Array.isArray(a)?(c=a[0],u=a[1]):c=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}t===0?WC(i,n,f,c,u):WC(i,n,f,c)}return i}function WC(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function mL(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,a=e.attrs,c=[],u=null,f=null;for(let m=i;m<r;m++){let v=o[m],w=n?n.get(v):null,E=w?w.inputs:null,M=w?w.outputs:null;u=GC(0,v.inputs,m,u,E),f=GC(1,v.outputs,m,f,M);let k=u!==null&&a!==null&&!Uv(e)?PL(u,m,a):null;c.push(k)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=f}function gL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function $x(t,e,n,i,r,o,a,c){let u=wi(e,n),f=e.inputs,m;!c&&f!=null&&(m=f[i])?(gy(t,n,m,i,r),Cp(e)&&_L(n,e.index)):e.type&3?(i=gL(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function _L(t,e){let n=js(e,t);n[Ie]&16||(n[Ie]|=64)}function Hx(t,e,n,i){if(UD()){let r=i===null?null:{"":-1},o=IL(t,n),a,c;o===null?a=c=null:[a,c]=o,a!==null&&qx(t,e,n,a,r,c),r&&EL(n,i,r)}n.mergedAttrs=Fu(n.mergedAttrs,n.attrs)}function qx(t,e,n,i,r,o){for(let f=0;f<i.length;f++)vO(ox(n,e),t,i[f].type);DL(n,t.data.length,i.length);for(let f=0;f<i.length;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let a=!1,c=!1,u=Fx(t,e,i.length,null);for(let f=0;f<i.length;f++){let m=i[f];n.mergedAttrs=Fu(n.mergedAttrs,m.hostAttrs),xL(t,n,e,u,m),CL(u,m,r),m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let v=m.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),a=!0),!c&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}mL(t,n,o)}function vL(t,e,n,i,r){let o=r.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let c=~e.index;yL(a)!=c&&a.push(c),a.push(n,i,o)}}function yL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function bL(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Cp(n)&&TL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ox(n,e),Ls(i,e);let a=n.initialInputs;for(let c=r;c<o;c++){let u=t.data[c],f=Dc(e,t,c,n);if(Ls(f,e),a!==null&&ML(e,c-r,f,u,n,a),Ao(u)){let m=js(n.index,e);m[En]=Dc(e,t,c,n)}}}function Gx(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,a=oO();try{Os(o);for(let c=i;c<r;c++){let u=t.data[c],f=e[c];nv(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&wL(u,f)}}finally{Os(-1),nv(a)}}function wL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function IL(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(bD(e,a.selectors,!1))if(i||(i=[]),Ao(a))if(a.findHostDirectiveDefs!==null){let c=[];r=r||new Map,a.findHostDirectiveDefs(a,c,r),i.unshift(...c,a);let u=c.length;lv(t,e,u)}else i.unshift(a),lv(t,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function lv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function EL(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new we(-301,!1);i.push(e[r],o)}}}function CL(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Ao(e)&&(n[""]=t)}}function DL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function xL(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ps(r.type,!0)),a=new $u(o,Ao(r),Ee);t.blueprint[i]=a,n[i]=a,vL(t,e,i,Fx(t,n,r.hostVars,Wr),r)}function TL(t,e,n){let i=wi(e,t),r=Ux(n),o=t[Bi].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let c=Pp(t,Mp(t,r,null,a,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=c}function SL(t,e,n,i,r,o){let a=wi(t,e);AL(e[nn],a,o,t.value,n,i,r)}function AL(t,e,n,i,r,o,a){if(o==null)t.removeAttribute(e,r,n);else{let c=a==null?_p(o):a(o,i||"",r);t.setAttribute(e,r,c,n)}}function ML(t,e,n,i,r,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;){let u=a[c++],f=a[c++],m=a[c++],v=a[c++];Lx(i,n,u,f,m,v)}}function PL(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let a=t[o];for(let c=0;c<a.length;c+=3)if(a[c]===e){i.push(o,a[c+1],a[c+2],n[r+1]);break}}r+=2}return i}function Wx(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function Zx(t,e){let n=t.contentQueries;if(n!==null){let i=ze(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a!==-1){let c=t.data[a];Jv(o),c.contentQueries(2,e[a],a)}}}finally{ze(i)}}}function Pp(t,e){return t[ju]?t[FC][Vi]=e:t[ju]=e,t[FC]=e,e}function uv(t,e,n){Jv(0);let i=ze(null);try{e(t,n)}finally{ze(i)}}function Kx(t){return t[Bu]||(t[Bu]=[])}function Qx(t){return t.cleanup||(t.cleanup=[])}function Yx(t,e,n){return(t===null||Ao(t))&&(n=UN(n[e.index])),n[nn]}function Xx(t,e){let n=t[Ec],i=n?n.get(pr,null):null;i&&i.handleError(e)}function gy(t,e,n,i,r){for(let o=0;o<n.length;){let a=n[o++],c=n[o++],u=n[o++],f=e[a],m=t.data[a];Lx(m,f,i,c,u,r)}}function RL(t,e,n){let i=VD(e,t);$O(t[nn],i,n)}function kL(t,e){let n=js(e,t),i=n[ke];NL(i,n);let r=n[mr];r!==null&&n[Ic]===null&&(n[Ic]=cy(r,n[Ec])),_y(i,n,n[En])}function NL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function _y(t,e,n){ey(e);try{let i=t.viewQuery;i!==null&&uv(1,i,n);let r=t.template;r!==null&&Vx(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ur]?.finishViewCreation(t),t.staticContentQueries&&Zx(t,e),t.staticViewQueries&&uv(2,t.viewQuery,n);let o=t.components;o!==null&&OL(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Ie]&=-5,ty()}}function OL(t,e){for(let n=0;n<e.length;n++)kL(t,e[n])}function Rp(t,e,n,i){let r=ze(null);try{let o=e.tView,c=t[Ie]&4096?4096:16,u=Mp(t,o,n,c,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=t[e.index];u[Ju]=f;let m=t[Ur];return m!==null&&(u[Ur]=m.createEmbeddedView(o)),_y(o,u,n),u}finally{ze(r)}}function Jx(t,e){let n=Cn+e;if(n<t.length)return t[n]}function qu(t,e){return!e||e.firstChild===null||px(t)}function kp(t,e,n,i=!0){let r=e[ke];if(WO(r,e,t,n),i){let a=cv(n,t),c=e[nn],u=dy(c,t[Ns]);u!==null&&qO(r,t[oi],c,e,u,a)}let o=e[Ic];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function eT(t,e){let n=Hu(t,e);return n!==void 0&&Sp(n[ke],n),n}function sp(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(fr(o)),Gr(o)&&LL(o,i);let a=n.type;if(a&8)sp(t,e,n.child,i);else if(a&32){let c=uy(n,e),u;for(;u=c();)i.push(u)}else if(a&16){let c=Px(e,n);if(Array.isArray(c))i.push(...c);else{let u=Uu(e[bi]);sp(u[ke],u,c,i,!0)}}n=r?n.projectionNext:n.next}return i}function LL(t,e){for(let n=Cn;n<t.length;n++){let i=t[n],r=i[ke].firstChild;r!==null&&sp(i[ke],i,r,e)}t[Ns]!==t[mr]&&e.push(t[Ns])}var tT=[];function FL(t){return t[ks]??VL(t)}function VL(t){let e=tT.pop()??Object.create(jL);return e.lView=t,e}function BL(t){t.lView[ks]!==t&&(t.lView=null,tT.push(t))}var jL=vt(X({},QE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{zu(t.lView)},consumerOnSignalRead(){this.lView[ks]=this}}),nT=100;function iT(t,e=!0,n=0){let i=t[Bi],r=i.rendererFactory,o=!1;o||r.begin?.();try{zL(t,n)}catch(a){throw e&&Xx(t,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function zL(t,e){dv(t,e);let n=0;for(;Yv(t);){if(n===nT)throw new we(103,!1);n++,dv(t,1)}}function UL(t,e,n,i){let r=e[Ie];if((r&256)===256)return;let o=!1;!o&&e[Bi].inlineEffectRunner?.flush(),ey(e);let a=null,c=null;!o&&$L(t)&&(c=FL(e),a=YE(c));try{jD(e),nO(t.bindingStartIndex),n!==null&&Vx(t,e,n,2,i);let u=(r&3)===3;if(!o)if(u){let v=t.preOrderCheckHooks;v!==null&&$f(e,v,null)}else{let v=t.preOrderHooks;v!==null&&Hf(e,v,0,null),N_(e,0)}if(HL(e),rT(e,0),t.contentQueries!==null&&Zx(t,e),!o)if(u){let v=t.contentCheckHooks;v!==null&&$f(e,v)}else{let v=t.contentHooks;v!==null&&Hf(e,v,1),N_(e,1)}aL(t,e);let f=t.components;f!==null&&sT(e,f,0);let m=t.viewQuery;if(m!==null&&uv(2,m,i),!o)if(u){let v=t.viewCheckHooks;v!==null&&$f(e,v)}else{let v=t.viewHooks;v!==null&&Hf(e,v,2),N_(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[k_]){for(let v of e[k_])v();e[k_]=null}o||(e[Ie]&=-73)}catch(u){throw zu(e),u}finally{c!==null&&(XE(c,a),BL(c)),ty()}}function $L(t){return t.type!==2}function rT(t,e){for(let n=gx(t);n!==null;n=_x(n))for(let i=Cn;i<n.length;i++){let r=n[i];oT(r,e)}}function HL(t){for(let e=gx(t);e!==null;e=_x(e)){if(!(e[Ie]&Wv.HasTransplantedViews))continue;let n=e[Cc];for(let i=0;i<n.length;i++){let r=n[i],o=r[vn];qN(r)}}}function qL(t,e,n){let i=js(e,t);oT(i,n)}function oT(t,e){Qv(t)&&dv(t,e)}function dv(t,e){let i=t[ke],r=t[Ie],o=t[ks],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&f_(o)),o&&(o.dirty=!1),t[Ie]&=-9217,a)UL(i,t,i.template,t[En]);else if(r&8192){rT(t,1);let c=i.components;c!==null&&sT(t,c,1)}}function sT(t,e,n){for(let i=0;i<e.length;i++)qL(t,e[i],n)}function vy(t){for(t[Bi].changeDetectionScheduler?.notify();t;){t[Ie]|=64;let e=Uu(t);if(NN(t)&&!e)return t;t=e}return null}var Fs=class{get rootNodes(){let e=this._lView,n=e[ke];return sp(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[En]}set context(e){this._lView[En]=e}get destroyed(){return(this._lView[Ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vn];if(Gr(e)){let n=e[Xf],i=n?n.indexOf(this):-1;i>-1&&(Hu(e,i),Qf(n,i))}this._attachedToViewContainer=!1}Sp(this._lView[ke],this._lView)}onDestroy(e){zD(this._lView,e)}markForCheck(){vy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ie]&=-129}reattach(){tv(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,iT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,xx(this._lView[ke],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=e,tv(this._lView)}},ji=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ZL;let t=e;return t})(),GL=ji,WL=class extends GL{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Rp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Fs(r)}};function ZL(){return Np(zi(),Ke())}function Np(t,e){return t.type&4?new WL(e,t,Ac(t,e)):null}var JG=new RegExp(`^(\\d+)*(${OO}|${NO})*(.*)`);var KL=()=>null;function Gu(t,e){return KL(t,e)}var ap=class{},hv=class{},cp=class{};function QL(t){let e=Error(`No component factory found for ${Nn(t)}.`);return e[YL]=t,e}var YL="ngComponent";var fv=class{resolveComponentFactory(e){throw QL(e)}},Ro=(()=>{let e=class e{};e.NULL=new fv;let t=e;return t})(),Wu=class{};var XL=(()=>{let e=class e{};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),B_={};var ZC=new Set;function Mc(t){ZC.has(t)||(ZC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function KC(...t){}function JL(){let t=typeof Nu.requestAnimationFrame=="function",e=Nu[t?"requestAnimationFrame":"setTimeout"],n=Nu[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=JL().nativeRequestAnimationFrame,nF(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new we(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,eF,KC,KC);try{return o.runTask(a,n,i)}finally{o.cancelTask(a)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},eF={};function yy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function tF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Nu,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,pv(t),t.isCheckStableRunning=!0,yy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),pv(t))}function nF(t){let e=()=>{tF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,a,c)=>{if(iF(c))return n.invokeTask(r,o,a,c);try{return QC(t),n.invokeTask(r,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),YC(t)}},onInvoke:(n,i,r,o,a,c,u)=>{try{return QC(t),n.invoke(r,o,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),YC(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,pv(t),yy(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function pv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function QC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function YC(t){t._nesting--,yy(t)}function iF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var As=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(As||{}),aT={destroy(){}};function by(t,e){!e&&PD(by);let n=e?.injector??Q(un);if(!Cx(n))return aT;Mc("NgAfterRender");let i=n.get(Op),r=i.handler??=new up,o=e?.phase??As.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(xp).onDestroy(a),u=qr(n,()=>new lp(o,t));return r.register(u),{destroy:a}}function rd(t,e){!e&&PD(rd);let n=e?.injector??Q(un);if(!Cx(n))return aT;Mc("NgAfterNextRender");let i=n.get(Op),r=i.handler??=new up,o=e?.phase??As.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(xp).onDestroy(a),u=qr(n,()=>new lp(o,()=>{a(),t()}));return r.register(u),{destroy:a}}var lp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=Q(_e),this.errorHandler=Q(pr,{optional:!0}),Q(ap,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},up=class{constructor(){this.executingCallbacks=!1,this.buckets={[As.EarlyRead]:new Set,[As.Write]:new Set,[As.MixedReadWrite]:new Set,[As.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Op=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ee({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function mv(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)r=q_(r,c);else if(o==2){let u=c,f=e[++a];i=q_(i,u+": "+f+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var dp=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Rs(e);return new Zu(n,this.ngModule)}};function XC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function rF(t){let e=t.toLowerCase();return e==="svg"?VN:e==="math"?BN:null}var gv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=vp(i);let r=this.injector.get(e,B_,i);return r!==B_||n===B_?r:this.parentInjector.get(e,n,i)}},Zu=class extends cp{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=XC(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return XC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=vN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=ze(null);try{r=r||this.ngModule;let a=r instanceof Zn?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new gv(e,a):e,u=c.get(Wu,null);if(u===null)throw new we(407,!1);let f=c.get(XL,null),m=c.get(Op,null),v=c.get(ap,null),w={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,afterRenderEventManager:m,changeDetectionScheduler:v},E=u.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=i?uL(E,i,this.componentDef.encapsulation,c):Dx(E,M,rF(M)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let q=null;k!==null&&(q=cy(k,c,!0));let ie=my(0,null,null,1,0,null,null,null,null,null,null),Z=Mp(null,ie,null,F,null,null,w,E,c,null,q);ey(Z);let ae,pe;try{let de=this.componentDef,S,C=null;de.findHostDirectiveDefs?(S=[],C=new Map,de.findHostDirectiveDefs(de,S,C),S.push(de)):S=[de];let D=oF(Z,k),A=sF(D,k,de,S,Z,w,E);pe=Kv(ie,On),k&&lF(E,de,k,i),n!==void 0&&uF(pe,this.ngContentSelectors,n),ae=cF(A,de,S,C,Z,[dF]),_y(ie,Z,null)}finally{ty()}return new _v(this.componentType,ae,Ac(pe,Z),Z,pe)}finally{ze(o)}}},_v=class extends hv{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Fs(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;gy(o[ke],o,r,e,n),this.previousInputValues.set(e,n);let a=js(this._tNode.index,o);vy(a)}}get injector(){return new Ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function oF(t,e){let n=t[ke],i=On;return t[i]=e,id(n,i,2,"#host",null)}function sF(t,e,n,i,r,o,a){let c=r[ke];aF(i,t,e,a);let u=null;e!==null&&(u=cy(e,r[Ec]));let f=o.rendererFactory.createRenderer(e,n),m=16;n.signals?m=4096:n.onPush&&(m=64);let v=Mp(r,Ux(n),null,m,r[t.index],t,o,f,null,null,u);return c.firstCreatePass&&lv(c,t,i.length-1),Pp(r,v),r[t.index]=v}function aF(t,e,n,i){for(let r of t)e.mergedAttrs=Fu(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(mv(e,e.mergedAttrs,!0),n!==null&&Nx(i,n,e))}function cF(t,e,n,i,r,o){let a=zi(),c=r[ke],u=wi(a,r);qx(c,r,a,n,null,i);for(let m=0;m<n.length;m++){let v=a.directiveStart+m,w=Dc(r,c,v,a);Ls(w,r)}Gx(c,r,a),u&&Ls(u,r);let f=Dc(r,c,a.directiveStart+a.componentOffset,a);if(t[En]=r[En]=f,o!==null)for(let m of o)m(f,e);return Bx(c,a,r),f}function lF(t,e,n,i){if(i)K_(t,n,["ng-version","17.3.10"]);else{let{attrs:r,classes:o}=yN(e.selectors[0]);r&&K_(t,n,r),o&&o.length>0&&kx(t,n,o.join(" "))}}function uF(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function dF(){let t=zi();oy(Ke()[ke],t)}var Ui=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=hF;let t=e;return t})();function hF(){let t=zi();return lT(t,Ke())}var fF=Ui,cT=class extends fF{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new Ms(this._hostTNode,this._hostLView)}get parentInjector(){let e=sy(this._hostTNode,this._hostLView);if(nx(e)){let n=tp(e,this._hostLView),i=ep(e),r=n[ke].data[i+8];return new Ms(r,n)}else return new Ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=JC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Cn}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=Gu(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(c,r,qu(this._hostTNode,a)),c}createComponent(e,n,i,r,o){let a=e&&!kN(e),c;if(a)c=n;else{let M=n||{};c=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=a?e:new Zu(Rs(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let k=(a?f:this.parentInjector).get(Zn,null);k&&(o=k)}let m=Rs(u.componentType??{}),v=Gu(this._lContainer,m?.id??null),w=v?.firstChild??null,E=u.create(f,r,w,o);return this.insertImpl(E.hostView,c,qu(this._hostTNode,v)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(HN(r)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=r[vn],f=new cT(u,u[oi],u[vn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return kp(a,r,o,i),e.attachToViewContainerRef(),mD(j_(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=JC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Hu(this._lContainer,n);i&&(Qf(j_(this._lContainer),n),Sp(i[ke],i))}detach(e){let n=this._adjustIndex(e,-1),i=Hu(this._lContainer,n);return i&&Qf(j_(this._lContainer),n)!=null?new Fs(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function JC(t){return t[Xf]}function j_(t){return t[Xf]||(t[Xf]=[])}function lT(t,e){let n,i=e[t.index];return Gr(i)?n=i:(n=Wx(i,e,null,t),e[t.index]=n,Pp(e,n)),mF(n,e,t,i),new cT(n,t,e)}function pF(t,e){let n=t[nn],i=n.createComment(""),r=wi(e,t),o=dy(n,r);return op(n,o,i,JO(n,r),!1),i}var mF=vF,gF=()=>!1;function _F(t,e,n){return gF(t,e,n)}function vF(t,e,n,i){if(t[Ns])return;let r;n.type&8?r=fr(i):r=pF(e,n),t[Ns]=r}var vv=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},yv=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let a=n.getByIndex(o),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)wy(e,n).matches!==null&&this.queries[n].setDirty()}},bv=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=xF(e):this.predicate=e}},wv=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Iv=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,yF(n,o)),this.matchTNodeWithReadOption(e,n,qf(n,e,o,!1,!1))}else i===ji?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,qf(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Ct||r===Ui||r===ji&&n.type&4)this.addMatch(n.index,-2);else{let o=qf(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function yF(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function bF(t,e){return t.type&11?Ac(t,e):t.type&4?Np(t,e):null}function wF(t,e,n,i){return n===-1?bF(e,t):n===-2?IF(t,e,i):Dc(t,t[ke],n,e)}function IF(t,e,n){if(n===Ct)return Ac(e,t);if(n===ji)return Np(e,t);if(n===Ui)return lT(e,t)}function uT(t,e,n,i){let r=e[Ur].queries[i];if(r.matches===null){let o=t.data,a=n.matches,c=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)c.push(null);else{let m=o[f];c.push(wF(e,m,a[u+1],n.metadata.read))}}r.matches=c}return r.matches}function Ev(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let a=uT(t,e,r,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)i.push(a[c/2]);else{let f=o[c+1],m=e[-u];for(let v=Cn;v<m.length;v++){let w=m[v];w[Ju]===w[vn]&&Ev(w[ke],w,f,i)}if(m[Cc]!==null){let v=m[Cc];for(let w=0;w<v.length;w++){let E=v[w];Ev(E[ke],E,f,i)}}}}}return i}function EF(t,e){return t[Ur].queries[e].queryList}function CF(t,e,n){let i=new ip((n&4)===4);return fL(t,e,i,i.destroy),(e[Ur]??=new yv).queries.push(new vv(i))-1}function DF(t,e,n){let i=Dn();return i.firstCreatePass&&(TF(i,new bv(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),CF(i,Ke(),e)}function xF(t){return t.split(",").map(e=>e.trim())}function TF(t,e,n){t.queries===null&&(t.queries=new wv),t.queries.track(new Iv(e,n))}function wy(t,e){return t.queries.getByIndex(e)}function SF(t,e){let n=t[ke],i=wy(n,e);return i.crossesNgTemplate?Ev(n,t,e,[]):uT(n,t,i,e)}function AF(t){return Object.getPrototypeOf(t.prototype).constructor}function ko(t){let e=AF(t.type),n=!0,i=[t];for(;e;){let r;if(Ao(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new we(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let a=t;a.inputs=jf(t.inputs),a.inputTransforms=jf(t.inputTransforms),a.declaredInputs=jf(t.declaredInputs),a.outputs=jf(t.outputs);let c=r.hostBindings;c&&NF(t,c);let u=r.viewQuery,f=r.contentQueries;if(u&&RF(t,u),f&&kF(t,f),MF(t,r),O1(t.outputs,r.outputs),Ao(r)&&r.data.animation){let m=t.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(t),c===ko&&(n=!1)}}e=Object.getPrototypeOf(e)}PF(i)}function MF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function PF(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Fu(r.hostAttrs,n=Fu(n,r.hostAttrs))}}function jf(t){return t===bc?{}:t===Wn?[]:t}function RF(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function kF(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function NF(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Zr(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var Mo=class{},Ku=class{};var Cv=class extends Mo{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dp(this);let r=CD(e);this._bootstrapComponents=Ex(r.bootstrap),this._r3Injector=hx(e,n,[{provide:Mo,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...i],Nn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Dv=class extends Ku{constructor(e){super(),this.moduleType=e}create(e){return new Cv(this.moduleType,e,[])}};var hp=class extends Mo{constructor(e){super(),this.componentFactoryResolver=new dp(this),this.instance=null;let n=new Vu([...e.providers,{provide:Mo,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||qv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Iy(t,e,n=null){return new hp({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Lp=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OF(t,e,n){return t[e]=n}function Kr(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function LF(t){return(t.flags&32)===32}function FF(t,e,n,i,r,o,a,c,u){let f=e.consts,m=id(e,t,4,a||null,Jf(f,c));Hx(e,n,m,Jf(f,u)),oy(e,m);let v=m.tView=my(2,m,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,m),v.queries=e.queries.embeddedTView(m)),m}function Et(t,e,n,i,r,o,a,c){let u=Ke(),f=Dn(),m=t+On,v=f.firstCreatePass?FF(m,f,u,e,n,i,r,o,a):f.data[m];ed(v,!1);let w=VF(f,u,v,t);iy()&&hy(f,u,w,v),Ls(w,u);let E=Wx(w,u,w,v);return u[m]=E,Pp(u,E),_F(E,v,u),Zv(v)&&jx(f,u,v),a!=null&&zx(u,v,c),Et}var VF=BF;function BF(t,e,n,i){return ry(!0),e[nn].createComment("")}function Qr(t,e,n,i){let r=Ke(),o=Sc();if(Kr(r,o,e)){let a=Dn(),c=ny();SL(c,r,t,e,n,i)}return Qr}function jF(t,e,n,i){return Kr(t,Sc(),n)?e+_p(n)+i:Wr}function zf(t,e){return t<<17|e<<2}function Vs(t){return t>>17&32767}function zF(t){return(t&2)==2}function UF(t,e){return t&131071|e<<17}function xv(t){return t|2}function xc(t){return(t&131068)>>2}function z_(t,e){return t&-131069|e<<2}function $F(t){return(t&1)===1}function Tv(t){return t|1}function HF(t,e,n,i,r,o){let a=o?e.classBindings:e.styleBindings,c=Vs(a),u=xc(a);t[i]=n;let f=!1,m;if(Array.isArray(n)){let v=n;m=v[1],(m===null||Xu(v,m)>0)&&(f=!0)}else m=n;if(r)if(u!==0){let w=Vs(t[c+1]);t[i+1]=zf(w,c),w!==0&&(t[w+1]=z_(t[w+1],i)),t[c+1]=UF(t[c+1],i)}else t[i+1]=zf(c,0),c!==0&&(t[c+1]=z_(t[c+1],i)),c=i;else t[i+1]=zf(u,0),c===0?c=i:t[u+1]=z_(t[u+1],i),u=i;f&&(t[i+1]=xv(t[i+1])),eD(t,m,i,!0),eD(t,m,i,!1),qF(e,m,t,i,o),a=zf(c,u),o?e.classBindings=a:e.styleBindings=a}function qF(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Xu(o,e)>=0&&(n[i+1]=Tv(n[i+1]))}function eD(t,e,n,i){let r=t[n+1],o=e===null,a=i?Vs(r):xc(r),c=!1;for(;a!==0&&(c===!1||o);){let u=t[a],f=t[a+1];GF(u,e)&&(c=!0,t[a+1]=i?Tv(f):xv(f)),a=i?Vs(f):xc(f)}c&&(t[n+1]=i?xv(r):Tv(r))}function GF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Xu(t,e)>=0:!1}var Fi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function WF(t){return t.substring(Fi.key,Fi.keyEnd)}function ZF(t){return KF(t),dT(t,hT(t,0,Fi.textEnd))}function dT(t,e){let n=Fi.textEnd;return n===e?-1:(e=Fi.keyEnd=QF(t,Fi.key=e,n),hT(t,e,n))}function KF(t){Fi.key=0,Fi.keyEnd=0,Fi.value=0,Fi.valueEnd=0,Fi.textEnd=t.length}function hT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function QF(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function dn(t,e,n){let i=Ke(),r=Sc();if(Kr(i,r,e)){let o=Dn(),a=ny();$x(o,a,i,t,e,i[nn],n,!1)}return dn}function Sv(t,e,n,i,r){let o=e.inputs,a=r?"class":"style";gy(t,n,o[a],a,i)}function At(t,e,n){return fT(t,e,n,!1),At}function No(t,e){return fT(t,e,null,!0),No}function Ey(t){XF(rV,YF,t,!0)}function YF(t,e){for(let n=ZF(e);n>=0;n=dT(e,n))zv(t,WF(e),!0)}function fT(t,e,n,i){let r=Ke(),o=Dn(),a=WD(2);if(o.firstUpdatePass&&mT(o,t,a,i),e!==Wr&&Kr(r,a,e)){let c=o.data[Po()];gT(o,c,r,r[nn],t,r[a+1]=sV(e,n),i,a)}}function XF(t,e,n,i){let r=Dn(),o=WD(2);r.firstUpdatePass&&mT(r,null,o,i);let a=Ke();if(n!==Wr&&Kr(a,o,n)){let c=r.data[Po()];if(_T(c,i)&&!pT(r,o)){let u=i?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=q_(u,n||"")),Sv(r,c,a,n,i)}else oV(r,c,a,a[nn],a[o+1],a[o+1]=iV(t,e,n),i,o)}}function pT(t,e){return e>=t.expandoStartIndex}function mT(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[Po()],a=pT(t,n);_T(o,i)&&e===null&&!a&&(e=!1),e=JF(r,o,e,i),HF(r,o,e,n,a,i)}}function JF(t,e,n,i){let r=Xv(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=U_(null,t,e,n,i),n=Qu(n,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==r)if(n=U_(r,t,e,n,i),o===null){let u=eV(t,e,i);u!==void 0&&Array.isArray(u)&&(u=U_(null,t,e,u[1],i),u=Qu(u,e.attrs,i),tV(t,e,i,u))}else o=nV(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function eV(t,e,n){let i=n?e.classBindings:e.styleBindings;if(xc(i)!==0)return t[Vs(i)]}function tV(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Vs(r)]=i}function nV(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=t[o].hostAttrs;i=Qu(i,a,n)}return Qu(i,e.attrs,n)}function U_(t,e,n,i,r){let o=null,a=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<a&&(o=e[c],i=Qu(i,o.hostAttrs,r),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),i}function Qu(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),zv(t,a,n?!0:e[++o]))}return t===void 0?null:t}function iV(t,e,n){if(n==null||n==="")return Wn;let i=[],r=nd(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function rV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&zv(t,i,n)}function oV(t,e,n,i,r,o,a,c){r===Wr&&(r=Wn);let u=0,f=0,m=0<r.length?r[0]:null,v=0<o.length?o[0]:null;for(;m!==null||v!==null;){let w=u<r.length?r[u+1]:void 0,E=f<o.length?o[f+1]:void 0,M=null,k;m===v?(u+=2,f+=2,w!==E&&(M=v,k=E)):v===null||m!==null&&m<v?(u+=2,M=m):(f+=2,M=v,k=E),M!==null&&gT(t,e,n,i,M,k,a,c),m=u<r.length?r[u]:null,v=f<o.length?o[f]:null}}function gT(t,e,n,i,r,o,a,c){if(!(e.type&3))return;let u=t.data,f=u[c+1],m=$F(f)?tD(u,e,n,r,xc(f),a):void 0;if(!fp(m)){fp(o)||zF(f)&&(o=tD(u,null,n,r,c,a));let v=VD(Po(),n);oL(i,a,v,r,o)}}function tD(t,e,n,i,r,o){let a=e===null,c;for(;r>0;){let u=t[r],f=Array.isArray(u),m=f?u[1]:u,v=m===null,w=n[r+1];w===Wr&&(w=v?Wn:void 0);let E=v?P_(w,i):m===i?w:void 0;if(f&&!fp(E)&&(E=P_(u,i)),fp(E)&&(c=E,a))return c;let M=t[r+1];r=a?Vs(M):xc(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=P_(u,i))}return c}function fp(t){return t!==void 0}function sV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Nn(nd(t)))),t}function _T(t,e){return(t.flags&(e?8:16))!==0}var Av=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function $_(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function aV(t,e,n){let i,r,o=0,a=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=a&&o<=c;){let u=t.at(o),f=e[o],m=$_(o,u,o,f,n);if(m!==0){m<0&&t.updateValue(o,f),o++;continue}let v=t.at(a),w=e[c],E=$_(a,v,c,w,n);if(E!==0){E<0&&t.updateValue(a,w),a--,c--;continue}let M=n(o,u),k=n(a,v),F=n(o,f);if(Object.is(F,k)){let q=n(c,w);Object.is(q,M)?(t.swap(o,a),t.updateValue(a,w),c--,a--):t.move(a,o),t.updateValue(o,f),o++;continue}if(i??=new pp,r??=iD(t,o,a,n),Mv(t,i,o,F))t.updateValue(o,f),o++,a++;else if(r.has(F))i.set(M,t.detach(o)),a--;else{let q=t.create(o,e[o]);t.attach(o,q),o++,a++}}for(;o<=c;)nD(t,i,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=a;){let f=t.at(o),m=u.value,v=$_(o,f,o,m,n);if(v!==0)v<0&&t.updateValue(o,m),o++,u=c.next();else{i??=new pp,r??=iD(t,o,a,n);let w=n(o,m);if(Mv(t,i,o,w))t.updateValue(o,m),o++,a++,u=c.next();else if(!r.has(w))t.attach(o,t.create(o,m)),o++,a++,u=c.next();else{let E=n(o,f);i.set(E,t.detach(o)),a--}}}for(;!u.done;)nD(t,i,n,t.length,u.value),u=c.next()}for(;o<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function Mv(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function nD(t,e,n,i,r){if(Mv(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function iD(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var pp=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Ut(t,e,n){Mc("NgControlFlow");let i=Ke(),r=Sc(),o=Nv(i,On+t),a=0;if(Kr(i,r,e)){let c=ze(null);try{if(eT(o,a),e!==-1){let u=Ov(i[ke],On+e),f=Gu(o,u.tView.ssrId),m=Rp(i,u,n,{dehydratedView:f});kp(o,m,a,qu(u,f))}}finally{ze(c)}}else{let c=Jx(o,a);c!==void 0&&(c[En]=n)}}var Pv=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Cn}};function Fp(t,e){return e}var Rv=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function Vp(t,e,n,i,r,o,a,c,u,f,m,v,w){Mc("NgControlFlow");let E=u!==void 0,M=Ke(),k=c?a.bind(M[bi][En]):a,F=new Rv(E,k);M[On+t]=F,Et(t+1,e,n,i,r,o),E&&Et(t+2,u,f,m,v,w)}var kv=class extends Av{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Cn}at(e){return this.getLView(e)[En].$implicit}attach(e,n){let i=n[Ic];this.needsIndexUpdate||=e!==this.length,kp(this.lContainer,n,e,qu(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,cV(this.lContainer,e)}create(e,n){let i=Gu(this.lContainer,this.templateTNode.tView.ssrId);return Rp(this.hostLView,this.templateTNode,new Pv(this.lContainer,n,e),{dehydratedView:i})}destroy(e){Sp(e[ke],e)}updateValue(e,n){this.getLView(e)[En].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[En].$index=e}getLView(e){return lV(this.lContainer,e)}};function Bp(t){let e=ze(null),n=Po();try{let i=Ke(),r=i[ke],o=i[n];if(o.liveCollection===void 0){let c=n+1,u=Nv(i,c),f=Ov(r,c);o.liveCollection=new kv(u,i,f)}else o.liveCollection.reset();let a=o.liveCollection;if(aV(a,t,o.trackByFn),a.updateIndexes(),o.hasEmptyBlock){let c=Sc(),u=a.length===0;if(Kr(i,c,u)){let f=n+2,m=Nv(i,f);if(u){let v=Ov(r,f),w=Gu(m,v.tView.ssrId),E=Rp(i,v,void 0,{dehydratedView:w});kp(m,E,0,qu(v,w))}else eT(m,0)}}}finally{ze(e)}}function Nv(t,e){return t[e]}function cV(t,e){return Hu(t,e)}function lV(t,e){return Jx(t,e)}function Ov(t,e){return Kv(t,e)}function uV(t,e,n,i,r,o){let a=e.consts,c=Jf(a,r),u=id(e,t,2,i,c);return Hx(e,n,u,Jf(a,o)),u.attrs!==null&&mv(u,u.attrs,!1),u.mergedAttrs!==null&&mv(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function K(t,e,n,i){let r=Ke(),o=Dn(),a=On+t,c=r[nn],u=o.firstCreatePass?uV(a,o,r,e,n,i):o.data[a],f=dV(o,r,u,c,e,t);r[a]=f;let m=Zv(u);return ed(u,!0),Nx(c,f,u),!LF(u)&&iy()&&hy(o,r,f,u),ZN()===0&&Ls(f,r),KN(),m&&(jx(o,r,u),Bx(o,u,r)),i!==null&&zx(r,u),K}function J(){let t=zi();qD()?GD():(t=t.parent,ed(t,!1));let e=t;YN(e)&&XN(),QN();let n=Dn();return n.firstCreatePass&&(oy(n,t),kD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&hO(e)&&Sv(n,e,Ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&fO(e)&&Sv(n,e,Ke(),e.stylesWithoutHost,!1),J}function Ce(t,e,n,i){return K(t,e,n,i),J(),Ce}var dV=(t,e,n,i,r,o)=>(ry(!0),Dx(i,r,cO()));function Kn(){return Ke()}function Cy(t,e,n){let i=Ke(),r=Sc();if(Kr(i,r,e)){let o=Dn(),a=ny(),c=Xv(o.data),u=Yx(c,a,i);$x(o,a,i,t,e,u,n,!0)}return Cy}var mp="en-US";var hV=mp;function fV(t){typeof t=="string"&&(hV=t.toLowerCase().replace(/_/g,"-"))}function qe(t,e,n,i){let r=Ke(),o=Dn(),a=zi();return vT(o,r,r[nn],a,t,e,i),qe}function Dy(t,e){let n=zi(),i=Ke(),r=Dn(),o=Xv(r.data),a=Yx(o,n,i);return vT(r,i,a,n,t,e),Dy}function pV(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===n&&r[o+1]===i){let c=e[Bu],u=r[o+2];return c.length>u?c[u]:null}typeof a=="string"&&(o+=2)}return null}function vT(t,e,n,i,r,o,a){let c=Zv(i),f=t.firstCreatePass&&Qx(t),m=e[En],v=Kx(e),w=!0;if(i.type&3||a){let k=wi(i,e),F=a?a(k):k,q=v.length,ie=a?ae=>a(fr(ae[i.index])):i.index,Z=null;if(!a&&c&&(Z=pV(t,e,r,i.index)),Z!==null){let ae=Z.__ngLastListenerFn__||Z;ae.__ngNextListenerFn__=o,Z.__ngLastListenerFn__=o,w=!1}else{o=oD(i,e,m,o,!1);let ae=n.listen(F,r,o);v.push(o,ae),f&&f.push(r,ie,q,q+1)}}else o=oD(i,e,m,o,!1);let E=i.outputs,M;if(w&&E!==null&&(M=E[r])){let k=M.length;if(k)for(let F=0;F<k;F+=2){let q=M[F],ie=M[F+1],pe=e[q][ie].subscribe(o),de=v.length;v.push(o,pe),f&&f.push(r,i.index,de,-(de+1))}}}function rD(t,e,n,i){let r=ze(null);try{return ur(6,e,n),n(i)!==!1}catch(o){return Xx(t,o),!1}finally{ur(7,e,n),ze(r)}}function oD(t,e,n,i,r){return function o(a){if(a===Function)return i;let c=t.componentOffset>-1?js(t.index,e):e;vy(c);let u=rD(e,n,i,a),f=o.__ngNextListenerFn__;for(;f;)u=rD(e,n,f,a)&&u,f=f.__ngNextListenerFn__;return r&&u===!1&&a.preventDefault(),u}}function at(t=1){return aO(t)}function mV(t,e){let n=null,i=fN(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?bD(t,o,!0):gN(i,o))return r}return n}function jp(t){let e=Ke()[bi][oi];if(!e.projection){let n=t?t.length:1,i=e.projection=iN(n,null),r=i.slice(),o=e.child;for(;o!==null;){let a=t?mV(o,t):0;a!==null&&(r[a]?r[a].projectionNext=o:i[a]=o,r[a]=o),o=o.next}}}function Pc(t,e=0,n){let i=Ke(),r=Dn(),o=id(r,On+t,16,null,n||null);o.projection===null&&(o.projection=e),GD(),(!i[Ic]||$D())&&(o.flags&32)!==32&&iL(r,i,o)}function od(t,e,n){DF(t,e,n)}function Rc(t){let e=Ke(),n=Dn(),i=ZD();Jv(i+1);let r=wy(n,i);if(t.dirty&&$N(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=SF(e,i);t.reset(o,xO),t.notifyOnChanges()}return!0}return!1}function kc(){return EF(Ke(),ZD())}function gV(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function zp(t){let e=eO();return BD(e,On+t)}function ve(t,e=""){let n=Ke(),i=Dn(),r=t+On,o=i.firstCreatePass?id(i,r,1,e,null):i.data[r],a=_V(i,n,o,e,t);n[r]=a,iy()&&hy(i,n,a,o),ed(o,!1)}var _V=(t,e,n,i,r)=>(ry(!0),UO(e[nn],i));function hn(t){return Bn("",t,""),hn}function Bn(t,e,n){let i=Ke(),r=jF(i,t,e,n);return r!==Wr&&RL(i,Po(),r),Bn}var vV=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=TD(!1,i.type),o=r.length>0?Iy([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ee({token:e,providedIn:"environment",factory:()=>new e(V(Zn))});let t=e;return t})();function Mt(t){Mc("NgStandalone"),t.getStandaloneInjector=e=>e.get(vV).getOrCreateStandaloneInjector(t)}function yV(t,e){let n=t[e];return n===Wr?void 0:n}function bV(t,e,n,i,r,o){let a=e+n;return Kr(t,a,r)?OF(t,a+1,o?i.call(o,r):i(r)):yV(t,a+1)}function Up(t,e){let n=Dn(),i,r=t+On;n.firstCreatePass?(i=wV(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=Ps(i.type,!0)),a,c=Gn(Ee);try{let u=np(!1),f=o();return np(u),gV(n,Ke(),r,f),f}finally{Gn(c)}}function wV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function $p(t,e,n){let i=t+On,r=Ke(),o=BD(r,i);return IV(r,i)?bV(r,tO(),e,o.transform,n,o):o.transform(n)}function IV(t,e){return t[ke].data[e].pure}function yT(t,e){return Np(t,e)}var Hr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},bT=new Hr("17.3.10"),Hp=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var wT=new se("");function Nc(t){return!!t&&typeof t.then=="function"}function xy(t){return!!t&&typeof t.subscribe=="function"}var IT=new se(""),ET=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=Q(IT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let a=o();if(Nc(a))i.push(a);else if(xy(a)){let c=new Promise((u,f)=>{a.subscribe({complete:u,error:f})});i.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ty=new se("");function EV(){eC(()=>{throw new we(600,!1)})}function CV(t){return t.isBoundToModule}function DV(t,e,n){try{let i=n();return Nc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var Us=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Q(fx),this.afterRenderEffectManager=Q(Op),this.externalTestViews=new Set,this.beforeRender=new Ae,this.afterTick=new Ae,this.componentTypes=[],this.components=[],this.isStable=Q(Lp).hasPendingTasks.pipe(ge(i=>!i)),this._injector=Q(Zn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof cp;if(!this._injector.get(ET).done){let E=!o&&ED(i),M=!1;throw new we(405,M)}let c;o?c=i:c=this._injector.get(Ro).resolveComponentFactory(i),this.componentTypes.push(c.componentType);let u=CV(c)?void 0:this._injector.get(Mo),f=r||c.selector,m=c.create(un.NULL,[],f,u),v=m.location.nativeElement,w=m.injector.get(wT,null);return w?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),H_(this.components,m),w?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new we(101,!1);let r=ze(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,ze(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===nT)throw new we(103,!1);if(i){let a=r===0;this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)xV(c,a,u)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>Lv(a))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>Lv(a))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;H_(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Ty,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>H_(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new we(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function H_(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function xV(t,e,n){!e&&!Lv(t)||TV(t,n,e)}function Lv(t){return Yv(t)}function TV(t,e,n){let i;n?(i=0,t[Ie]|=1024):t[Ie]&64?i=0:i=1,iT(t,e,i)}var Fv=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Sy=(()=>{let e=class e{compileModuleSync(i){return new Dv(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=CD(i),a=Ex(o.declarations).reduce((c,u)=>{let f=Rs(u);return f&&c.push(new Zu(f)),c},[]);return new Fv(r,a)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var SV=(()=>{let e=class e{constructor(){this.zone=Q(_e),this.applicationRef=Q(Us)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AV(t){return[{provide:_e,useFactory:t},{provide:wc,multi:!0,useFactory:()=>{let e=Q(SV,{optional:!0});return()=>e.initialize()}},{provide:wc,multi:!0,useFactory:()=>{let e=Q(kV);return()=>{e.initialize()}}},{provide:fx,useFactory:MV}]}function MV(){let t=Q(_e),e=Q(pr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function PV(t){let e=AV(()=>new _e(RV(t)));return wp([[],e])}function RV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var kV=(()=>{let e=class e{constructor(){this.subscription=new yt,this.initialized=!1,this.zone=Q(_e),this.pendingTasks=Q(Lp)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function NV(){return typeof $localize<"u"&&$localize.locale||mp}var qp=new se("",{providedIn:"root",factory:()=>Q(qp,je.Optional|je.SkipSelf)||NV()});var CT=new se("");var Wf=null;function OV(t=[],e){return un.create({name:e,providers:[{provide:Ip,useValue:"platform"},{provide:CT,useValue:new Set([()=>Wf=null])},...t]})}function LV(t=[]){if(Wf)return Wf;let e=OV(t);return Wf=e,EV(),FV(e),e}function FV(t){t.get(ay,null)?.forEach(n=>n())}function Ay(){return!1}var $i=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VV;let t=e;return t})();function VV(t){return BV(zi(),Ke(),(t&16)===16)}function BV(t,e,n){if(Cp(t)&&!n){let i=js(t.index,e);return new Fs(i,i)}else if(t.type&47){let i=e[bi];return new Fs(i,e)}return null}function DT(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=LV(i),o=[PV(),...n||[]],c=new hp({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(_e);return u.run(()=>{c.resolveInjectorInitializers();let f=c.get(pr,null),m;u.runOutsideAngular(()=>{m=u.onError.subscribe({next:E=>{f.handleError(E)}})});let v=()=>c.destroy(),w=r.get(CT);return w.add(v),c.onDestroy(()=>{m.unsubscribe(),w.delete(v)}),DV(f,u,()=>{let E=c.get(ET);return E.runInitializers(),E.donePromise.then(()=>{let M=c.get(qp,mp);fV(M||mp);let k=c.get(Us);return e!==void 0&&k.bootstrap(e),k})})})}catch(e){return Promise.reject(e)}}function gr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function sd(t){let e=ze(null);try{return t()}finally{ze(e)}}var MT=null;function Oc(){return MT}function PT(t){MT??=t}var Gp=class{};var Ue=new se(""),RT=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>Q($V),providedIn:"platform"});let t=e;return t})();var $V=(()=>{let e=class e extends RT{constructor(){super(),this._doc=Q(Ue),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Oc().getBaseHref(this._doc)}onPopState(i){let r=Oc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Oc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function kT(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function xT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function $s(t){return t&&t[0]!=="?"?"?"+t:t}var Zp=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>Q(NT),providedIn:"root"});let t=e;return t})(),HV=new se(""),NT=(()=>{let e=class e extends Zp{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Q(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return kT(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+$s(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,a){let c=this.prepareExternalUrl(o+$s(a));this._platformLocation.pushState(i,r,c)}replaceState(i,r,o,a){let c=this.prepareExternalUrl(o+$s(a));this._platformLocation.replaceState(i,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(V(RT),V(HV,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Hs=(()=>{let e=class e{constructor(i){this._subject=new Je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=WV(xT(TT(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+$s(r))}normalize(i){return e.stripTrailingSlash(GV(this._basePath,TT(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+$s(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+$s(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=$s,e.joinWithSlash=kT,e.stripTrailingSlash=xT,e.\u0275fac=function(r){return new(r||e)(V(Zp))},e.\u0275prov=ee({token:e,factory:()=>qV(),providedIn:"root"});let t=e;return t})();function qV(){return new Hs(V(Zp))}function GV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function TT(t){return t.replace(/\/index.html$/,"")}function WV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function OT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var LT=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new My,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){ST("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){ST("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(Ee(Ui),Ee(ji))},e.\u0275dir=ln({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),My=class{constructor(){this.$implicit=null,this.ngIf=null}};function ST(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Nn(e)}'.`)}function ZV(t,e){return new we(2100,!1)}var Py=class{createSubscription(e,n){return sd(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){sd(()=>e.unsubscribe())}},Ry=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},KV=new Ry,QV=new Py,FT=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(Nc(i))return KV;if(xy(i))return QV;throw ZV(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(Ee($i,16))},e.\u0275pipe=bp({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var ky=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({});let t=e;return t})(),Ny="browser",YV="server";function VT(t){return t===Ny}function qs(t){return t===YV}var Wp=class{};var Fy=class extends Gp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Vy=class t extends Fy{static makeCurrent(){PT(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=XV();return n==null?null:JV(n)}resetBaseElement(){ad=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return OT(document.cookie,e)}},ad=null;function XV(){return ad=ad||document.querySelector("base"),ad?ad.getAttribute("href"):null}function JV(t){return new URL(t,document.baseURI).pathname}var e2=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),By=new se(""),$T=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(a=>a.supports(i)),!r)throw new we(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(V(By),V(_e))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Kp=class{constructor(e){this._doc=e}},Oy="ng-app-id",HT=(()=>{let e=class e{constructor(i,r,o,a={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=qs(a),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Oy}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let a=o.get(i);return a.usage+=r,a.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,a=o?.get(r);if(a?.parentNode===i)return o.delete(r),a.removeAttribute(Oy),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Oy,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),a=this.styleRef,c=a.get(r)?.elements;c?c.push(o):a.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(Tp),V(td,8),V(Vn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),Ly={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zy=/%COMP%/g,qT="%COMP%",t2=`_nghost-${qT}`,n2=`_ngcontent-${qT}`,i2=!0,r2=new se("",{providedIn:"root",factory:()=>i2});function o2(t){return n2.replace(zy,t)}function s2(t){return t2.replace(zy,t)}function GT(t,e){return e.map(n=>n.replace(zy,t))}var jT=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=u,this.ngZone=f,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=qs(u),this.defaultRenderer=new cd(i,c,f,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===hr.ShadowDom&&(r=vt(X({},r),{encapsulation:hr.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof Qp?o.applyToHost(i):o instanceof ld&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,a=o.get(r.id);if(!a){let c=this.doc,u=this.ngZone,f=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(r.encapsulation){case hr.Emulated:a=new Qp(f,m,r,this.appId,v,c,u,w);break;case hr.ShadowDom:return new jy(f,m,i,r,c,u,this.nonce,w);default:a=new ld(f,m,r,v,c,u,w);break}o.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(V($T),V(HT),V(Tp),V(r2),V(Ue),V(Vn),V(_e),V(td))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),cd=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ly[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(zT(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(zT(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new we(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=Ly[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Ly[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&($r.DashCase|$r.Important)?e.style.setProperty(n,i,r&$r.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&$r.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Oc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function zT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var jy=class extends cd{constructor(e,n,i,r,o,a,c,u){super(e,o,a,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=GT(r.id,r.styles);for(let m of f){let v=document.createElement("style");c&&v.setAttribute("nonce",c),v.textContent=m,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ld=class extends cd{constructor(e,n,i,r,o,a,c,u){super(e,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=u?GT(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Qp=class extends ld{constructor(e,n,i,r,o,a,c,u){let f=r+"-"+i.id;super(e,n,i,o,a,c,u,f),this.contentAttr=o2(f),this.hostAttr=s2(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},a2=(()=>{let e=class e extends Kp{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})(),UT=["alt","control","meta","shift"],c2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},l2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},u2=(()=>{let e=class e extends Kp{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let a=e.parseEventName(r),c=e.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oc().onAndCancel(i,a.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let a=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),UT.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),c+=m+".")}),c+=a,r.length!=0||a.length===0)return null;let f={};return f.domEventName=o,f.fullKey=c,f}static matchEventFullKeyCode(i,r){let o=c2[i.key]||i.key,a="";return r.indexOf("code.")>-1&&(o=i.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),UT.forEach(c=>{if(c!==o){let u=l2[c];u(i)&&(a+=c+".")}}),a+=o,a===r)}static eventCallback(i,r,o){return a=>{e.matchEventFullKeyCode(a,i)&&o.runGuarded(()=>r(a))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=ee({token:e,factory:e.\u0275fac});let t=e;return t})();function WT(t,e){return DT(X({rootComponent:t},d2(e)))}function d2(t){return{appProviders:[...g2,...t?.providers??[]],platformProviders:m2}}function h2(){Vy.makeCurrent()}function f2(){return new pr}function p2(){return yx(document),document}var m2=[{provide:Vn,useValue:Ny},{provide:ay,useValue:h2,multi:!0},{provide:Ue,useFactory:p2,deps:[]}];var g2=[{provide:Ip,useValue:"root"},{provide:pr,useFactory:f2,deps:[]},{provide:By,useClass:a2,multi:!0,deps:[Ue,_e,Vn]},{provide:By,useClass:u2,multi:!0,deps:[Ue]},jT,HT,$T,{provide:Wu,useExisting:jT},{provide:Wp,useClass:e2,deps:[]},[]];var ZT=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Le="primary",Cd=Symbol("RouteTitle"),Gy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function jc(t){return new Gy(t)}function v2(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],c=t[o];if(a.startsWith(":"))r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function y2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!_r(t[n],e[n]))return!1;return!0}function _r(t,e){let n=t?Wy(t):void 0,i=e?Wy(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!eS(t[r],e[r]))return!1;return!0}function Wy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function eS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function tS(t){return t.length>0?t[t.length-1]:null}function Fo(t){return Rf(t)?t:Nc(t)?rt(Promise.resolve(t)):he(t)}var b2={exact:iS,subset:rS},nS={exact:w2,subset:I2,ignored:()=>!0};function KT(t,e,n){return b2[n.paths](t.root,e.root,n.matrixParams)&&nS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function w2(t,e){return _r(t,e)}function iS(t,e,n){if(!Ws(t.segments,e.segments)||!Jp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!iS(t.children[i],e.children[i],n))return!1;return!0}function I2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>eS(t[n],e[n]))}function rS(t,e,n){return oS(t,e,e.segments,n)}function oS(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Ws(r,n)||e.hasChildren()||!Jp(r,n,i))}else if(t.segments.length===n.length){if(!Ws(t.segments,n)||!Jp(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!rS(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Ws(t.segments,r)||!Jp(t.segments,r,i)||!t.children[Le]?!1:oS(t.children[Le],e,o,i)}}function Jp(t,e,n){return e.every((i,r)=>nS[n](t[r].parameters,i.parameters))}var Oo=class{constructor(e=new tt([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=jc(this.queryParams),this._queryParamMap}toString(){return D2.serialize(this)}},tt=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return em(this)}},Gs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=jc(this.parameters),this._parameterMap}toString(){return aS(this)}};function E2(t,e){return Ws(t,e)&&t.every((n,i)=>_r(n.parameters,e[i].parameters))}function Ws(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function C2(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Le&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Le&&(n=n.concat(e(r,i)))}),n}var yb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>new nm,providedIn:"root"});let t=e;return t})(),nm=class{parse(e){let n=new Ky(e);return new Oo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ud(e.root,!0)}`,i=S2(e.queryParams),r=typeof e.fragment=="string"?`#${x2(e.fragment)}`:"";return`${n}${i}${r}`}},D2=new nm;function em(t){return t.segments.map(e=>aS(e)).join("/")}function ud(t,e){if(!t.hasChildren())return em(t);if(e){let n=t.children[Le]?ud(t.children[Le],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Le&&i.push(`${r}:${ud(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=C2(t,(i,r)=>r===Le?[ud(t.children[Le],!1)]:[`${r}:${ud(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Le]!=null?`${em(t)}/${n[0]}`:`${em(t)}/(${n.join("//")})`}}function sS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yp(t){return sS(t).replace(/%3B/gi,";")}function x2(t){return encodeURI(t)}function Zy(t){return sS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tm(t){return decodeURIComponent(t)}function QT(t){return tm(t.replace(/\+/g,"%20"))}function aS(t){return`${Zy(t.path)}${T2(t.parameters)}`}function T2(t){return Object.entries(t).map(([e,n])=>`;${Zy(e)}=${Zy(n)}`).join("")}function S2(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Yp(n)}=${Yp(r)}`).join("&"):`${Yp(n)}=${Yp(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var A2=/^[^\/()?;#]+/;function Uy(t){let e=t.match(A2);return e?e[0]:""}var M2=/^[^\/()?;=#]+/;function P2(t){let e=t.match(M2);return e?e[0]:""}var R2=/^[^=?&#]+/;function k2(t){let e=t.match(R2);return e?e[0]:""}var N2=/^[^&#]+/;function O2(t){let e=t.match(N2);return e?e[0]:""}var Ky=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new tt([],{}):new tt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Le]=new tt(e,n)),i}parseSegment(){let e=Uy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new we(4009,!1);return this.capture(e),new Gs(tm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=P2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Uy(this.remaining);r&&(i=r,this.capture(i))}e[tm(n)]=tm(i)}parseQueryParam(e){let n=k2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let a=O2(this.remaining);a&&(i=a,this.capture(i))}let r=QT(n),o=QT(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Uy(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new we(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Le);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Le]:new tt([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new we(4011,!1)}};function cS(t){return t.segments.length>0?new tt([],{[Le]:t}):t}function lS(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=lS(r);if(i===Le&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new tt(t.segments,e);return L2(n)}function L2(t){if(t.numberOfChildren===1&&t.children[Le]){let e=t.children[Le];return new tt(t.segments.concat(e.segments),e.children)}return t}function zc(t){return t instanceof Oo}function F2(t,e,n=null,i=null){let r=uS(t);return dS(r,e,n,i)}function uS(t){let e;function n(o){let a={};for(let u of o.children){let f=n(u);a[u.outlet]=f}let c=new tt(o.url,a);return o===t&&(e=c),c}let i=n(t.root),r=cS(i);return e??r}function dS(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return $y(r,r,r,n,i);let o=V2(e);if(o.toRoot())return $y(r,r,new tt([],{}),n,i);let a=B2(o,r,t),c=a.processChildren?fd(a.segmentGroup,a.index,o.commands):fS(a.segmentGroup,a.index,o.commands);return $y(r,a.segmentGroup,c,n,i)}function im(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function gd(t){return typeof t=="object"&&t!=null&&t.outlets}function $y(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;t===e?a=n:a=hS(t,e,n);let c=cS(lS(a));return new Oo(c,o,r)}function hS(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=hS(o,e,n)}),new tt(t.segments,i)}var rm=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&im(i[0]))throw new we(4003,!1);let r=i.find(gd);if(r&&r!==tS(i))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function V2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new rm(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,f])=>{c[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new rm(n,e,i)}var Vc=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function B2(t,e,n){if(t.isAbsolute)return new Vc(e,!0,0);if(!n)return new Vc(e,!1,NaN);if(n.parent===null)return new Vc(n,!0,0);let i=im(t.commands[0])?0:1,r=n.segments.length-1+i;return j2(n,r,t.numberOfDoubleDots)}function j2(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new we(4005,!1);r=i.segments.length}return new Vc(i,!1,r-o)}function z2(t){return gd(t[0])?t[0].outlets:{[Le]:t}}function fS(t,e,n){if(t??=new tt([],{}),t.segments.length===0&&t.hasChildren())return fd(t,e,n);let i=U2(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new tt(t.segments.slice(0,i.pathIndex),{});return o.children[Le]=new tt(t.segments.slice(i.pathIndex),t.children),fd(o,0,r)}else return i.match&&r.length===0?new tt(t.segments,{}):i.match&&!t.hasChildren()?Qy(t,e,n):i.match?fd(t,0,r):Qy(t,e,n)}function fd(t,e,n){if(n.length===0)return new tt(t.segments,{});{let i=z2(n),r={};if(Object.keys(i).some(o=>o!==Le)&&t.children[Le]&&t.numberOfChildren===1&&t.children[Le].segments.length===0){let o=fd(t.children[Le],e,n);return new tt(t.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=fS(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new tt(t.segments,r)}}function U2(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let a=t.segments[r],c=n[i];if(gd(c))break;let u=`${c}`,f=i<n.length-1?n[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!XT(u,f,a))return o;i+=2}else{if(!XT(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Qy(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(gd(o)){let u=$2(o.outlets);return new tt(i,u)}if(r===0&&im(n[0])){let u=t.segments[e];i.push(new Gs(u.path,YT(n[0]))),r++;continue}let a=gd(o)?o.outlets[Le]:`${o}`,c=r<n.length-1?n[r+1]:null;a&&c&&im(c)?(i.push(new Gs(a,YT(c))),r+=2):(i.push(new Gs(a,{})),r++)}return new tt(i,{})}function $2(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=Qy(new tt([],{}),0,i))}),e}function YT(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function XT(t,e,n){return t==n.path&&_r(e,n.parameters)}var pd="imperative",yn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(yn||{}),Ii=class{constructor(e,n){this.id=e,this.url=n}},_d=class extends Ii{constructor(e,n,i="imperative",r=null){super(e,n),this.type=yn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Zs=class extends Ii{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=yn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ci=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ci||{}),Yy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Yy||{}),Lo=class extends Ii{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=yn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ks=class extends Ii{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=yn.NavigationSkipped}},vd=class extends Ii{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=yn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},om=class extends Ii{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=yn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xy=class extends Ii{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=yn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Jy=class extends Ii{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=yn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},eb=class extends Ii{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=yn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tb=class extends Ii{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=yn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nb=class{constructor(e){this.route=e,this.type=yn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ib=class{constructor(e){this.route=e,this.type=yn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},rb=class{constructor(e){this.snapshot=e,this.type=yn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ob=class{constructor(e){this.snapshot=e,this.type=yn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sb=class{constructor(e){this.snapshot=e,this.type=yn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ab=class{constructor(e){this.snapshot=e,this.type=yn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var yd=class{},bd=class{constructor(e){this.url=e}};var cb=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new dm,this.attachRef=null}},dm=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new cb,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=lb(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=lb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ub(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ub(e,this._root).map(n=>n.value)}};function lb(t,e){if(t===e.value)return e;for(let n of e.children){let i=lb(t,n);if(i)return i}return null}function ub(t,e){if(t===e.value)return[e];for(let n of e.children){let i=ub(t,n);if(i.length)return i.unshift(e),i}return[]}var ai=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var am=class extends sm{constructor(e,n){super(e),this.snapshot=n,wb(this,e)}toString(){return this.snapshot.toString()}};function pS(t){let e=H2(t),n=new tn([new Gs("",{})]),i=new tn({}),r=new tn({}),o=new tn({}),a=new tn(""),c=new Uc(n,i,o,a,r,Le,t,e.root);return c.snapshot=e.root,new am(new ai(c,[]),e)}function H2(t){let e={},n={},i={},r="",o=new wd([],e,i,r,n,Le,t,null,{});return new cm("",new ai(o,[]))}var Uc=class{constructor(e,n,i,r,o,a,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(f=>f[Cd]))??he(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>jc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>jc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bb(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:X(X({},e.params),t.params),data:X(X({},e.data),t.data),resolve:X(X(X(X({},t.data),e.data),r?.data),t._resolvedData)}:i={params:X({},t.params),data:X({},t.data),resolve:X(X({},t.data),t._resolvedData??{})},r&&gS(r)&&(i.resolve[Cd]=r.title),i}var wd=class{get title(){return this.data?.[Cd]}constructor(e,n,i,r,o,a,c,u,f){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},cm=class extends sm{constructor(e,n){super(n),this.url=e,wb(this,n)}toString(){return mS(this._root)}};function wb(t,e){e.value._routerState=t,e.children.forEach(n=>wb(t,n))}function mS(t){let e=t.children.length>0?` { ${t.children.map(mS).join(", ")} } `:"";return`${t.value}${e}`}function Hy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,_r(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),_r(e.params,n.params)||t.paramsSubject.next(n.params),y2(e.url,n.url)||t.urlSubject.next(n.url),_r(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function db(t,e){let n=_r(t.params,e.params)&&E2(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||db(t.parent,e.parent))}function gS(t){return typeof t.title=="string"||t.title===null}var q2=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Le,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=Q(dm),this.location=Q(Ui),this.changeDetector=Q($i),this.environmentInjector=Q(Zn),this.inputBinder=Q(Ib,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new we(4013,!1);this._activatedRoute=i;let o=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,f=new hb(i,u,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bs]});let t=e;return t})(),hb=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Uc?this.route:e===dm?this.childContexts:this.parent.get(e,n)}},Ib=new se("");function G2(t,e,n){let i=Id(t,e._root,n?n._root:void 0);return new am(i,e)}function Id(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=W2(t,e,n);return new ai(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Id(t,c)),a}}let i=Z2(e.value),r=e.children.map(o=>Id(t,o));return new ai(i,r)}}function W2(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Id(t,i,r);return Id(t,i)})}function Z2(t){return new Uc(new tn(t.url),new tn(t.params),new tn(t.queryParams),new tn(t.fragment),new tn(t.data),t.outlet,t.component,t)}var _S="ngNavigationCancelingError";function vS(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=zc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=yS(!1,ci.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function yS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[_S]=!0,n.cancellationCode=e,n}function K2(t){return bS(t)&&zc(t.url)}function bS(t){return!!t&&t[_S]}var Q2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=St({type:e,selectors:[["ng-component"]],standalone:!0,features:[Mt],decls:1,vars:0,template:function(r,o){r&1&&Ce(0,"router-outlet")},dependencies:[q2],encapsulation:2});let t=e;return t})();function Y2(t,e){return t.providers&&!t._injector&&(t._injector=Iy(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Eb(t){let e=t.children&&t.children.map(Eb),n=e?vt(X({},t),{children:e}):X({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Le&&(n.component=Q2),n}function vr(t){return t.outlet||Le}function X2(t,e){let n=t.filter(i=>vr(i)===e);return n.push(...t.filter(i=>vr(i)!==e)),n}function Dd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var J2=(t,e,n,i)=>ge(r=>(new fb(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),fb=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Hy(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Fc(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Fc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Fc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Fc(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new ab(o.value.snapshot))}),e.children.length&&this.forwardEvent(new ob(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(Hy(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Hy(c.route.value),this.activateChildRoutes(e,null,a.children)}else{let c=Dd(r.snapshot);a.attachRef=null,a.route=r,a.injector=c,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}},lm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Bc=class{constructor(e,n){this.component=e,this.route=n}};function eB(t,e,n){let i=t._root,r=e?e._root:null;return dd(i,r,n,[i.value])}function tB(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Hc(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!lD(t)?t:e.get(t):i}function dd(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fc(e);return t.children.forEach(a=>{nB(a,o[a.value.outlet],n,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>md(c,n.getContext(a),r)),r}function nB(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=iB(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new lm(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?dd(t,e,c?c.children:null,i,r):dd(t,e,n,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Bc(c.outlet.component,a))}else a&&md(e,c,r),r.canActivateChecks.push(new lm(i)),o.component?dd(t,null,c?c.children:null,i,r):dd(t,null,n,i,r);return r}function iB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Ws(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ws(t.url,e.url)||!_r(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!db(t,e)||!_r(t.queryParams,e.queryParams);case"paramsChange":default:return!db(t,e)}}function md(t,e,n){let i=Fc(t),r=t.value;Object.entries(i).forEach(([o,a])=>{r.component?e?md(a,e.children.getContext(o),n):md(a,null,n):md(a,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Bc(e.outlet.component,r)):n.canDeactivateChecks.push(new Bc(null,r)):n.canDeactivateChecks.push(new Bc(null,r))}function xd(t){return typeof t=="function"}function rB(t){return typeof t=="boolean"}function oB(t){return t&&xd(t.canLoad)}function sB(t){return t&&xd(t.canActivate)}function aB(t){return t&&xd(t.canActivateChild)}function cB(t){return t&&xd(t.canDeactivate)}function lB(t){return t&&xd(t.canMatch)}function wS(t){return t instanceof zr||t?.name==="EmptyError"}var Xp=Symbol("INITIAL_VALUE");function $c(){return bt(t=>lc(t.map(e=>e.pipe(gi(1),lr(Xp)))).pipe(ge(e=>{for(let n of e)if(n!==!0){if(n===Xp)return Xp;if(n===!1||n instanceof Oo)return n}return!0}),Lt(e=>e!==Xp),gi(1)))}function uB(t,e){return zt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?he(vt(X({},n),{guardsResult:!0})):dB(a,i,r,t).pipe(zt(c=>c&&rB(c)?hB(i,o,t,e):he(c)),ge(c=>vt(X({},n),{guardsResult:c})))})}function dB(t,e,n,i){return rt(t).pipe(zt(r=>_B(r.component,r.route,n,e,i)),_i(r=>r!==!0,!0))}function hB(t,e,n,i){return rt(e).pipe(uc(r=>Co(pB(r.route.parent,i),fB(r.route,i),gB(t,r.path,n),mB(t,r.route,n))),_i(r=>r!==!0,!0))}function fB(t,e){return t!==null&&e&&e(new sb(t)),he(!0)}function pB(t,e){return t!==null&&e&&e(new rb(t)),he(!0)}function mB(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return he(!0);let r=i.map(o=>Nf(()=>{let a=Dd(e)??n,c=Hc(o,a),u=sB(c)?c.canActivate(e,t):qr(a,()=>c(e,t));return Fo(u).pipe(_i())}));return he(r).pipe($c())}function gB(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>tB(a)).filter(a=>a!==null).map(a=>Nf(()=>{let c=a.guards.map(u=>{let f=Dd(a.node)??n,m=Hc(u,f),v=aB(m)?m.canActivateChild(i,t):qr(f,()=>m(i,t));return Fo(v).pipe(_i())});return he(c).pipe($c())}));return he(o).pipe($c())}function _B(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return he(!0);let a=o.map(c=>{let u=Dd(e)??r,f=Hc(c,u),m=cB(f)?f.canDeactivate(t,e,n,i):qr(u,()=>f(t,e,n,i));return Fo(m).pipe(_i())});return he(a).pipe($c())}function vB(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return he(!0);let o=r.map(a=>{let c=Hc(a,t),u=oB(c)?c.canLoad(e,n):qr(t,()=>c(e,n));return Fo(u)});return he(o).pipe($c(),IS(i))}function IS(t){return w_(Zt(e=>{if(zc(e))throw vS(t,e)}),ge(e=>e===!0))}function yB(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return he(!0);let o=r.map(a=>{let c=Hc(a,t),u=lB(c)?c.canMatch(e,n):qr(t,()=>c(e,n));return Fo(u)});return he(o).pipe($c(),IS(i))}var Ed=class{constructor(e){this.segmentGroup=e||null}},um=class extends Error{constructor(e){super(),this.urlTree=e}};function Lc(t){return cc(new Ed(t))}function bB(t){return cc(new we(4e3,!1))}function wB(t){return cc(yS(!1,ci.GuardRejected))}var pb=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return he(i);if(r.numberOfChildren>1||!r.children[Le])return bB(e.redirectTo);r=r.children[Le]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new um(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new Oo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);i[r]=n[c]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),a={};return Object.entries(n.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,i,r)}),new tt(o,a)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new we(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},mb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function IB(t,e,n,i,r){let o=Cb(t,e,n);return o.matched?(i=Y2(e,i),yB(i,e,n,r).pipe(ge(a=>a===!0?o:X({},mb)))):he(o)}function Cb(t,e,n){if(e.path==="**")return EB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?X({},mb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||v2)(n,t,e);if(!r)return X({},mb);let o={};Object.entries(r.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let a=r.consumed.length>0?X(X({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function EB(t){return{matched:!0,parameters:t.length>0?tS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function JT(t,e,n,i){return n.length>0&&xB(t,n,i)?{segmentGroup:new tt(e,DB(i,new tt(n,t.children))),slicedSegments:[]}:n.length===0&&TB(t,n,i)?{segmentGroup:new tt(t.segments,CB(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new tt(t.segments,t.children),slicedSegments:n}}function CB(t,e,n,i){let r={};for(let o of n)if(hm(t,e,o)&&!i[vr(o)]){let a=new tt([],{});r[vr(o)]=a}return X(X({},i),r)}function DB(t,e){let n={};n[Le]=e;for(let i of t)if(i.path===""&&vr(i)!==Le){let r=new tt([],{});n[vr(i)]=r}return n}function xB(t,e,n){return n.some(i=>hm(t,e,i)&&vr(i)!==Le)}function TB(t,e,n){return n.some(i=>hm(t,e,i))}function hm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function SB(t,e,n,i){return vr(t)!==i&&(i===Le||!hm(e,n,t))?!1:Cb(e,t,n).matched}function AB(t,e,n){return e.length===0&&!t.children[n]}var gb=class{};function MB(t,e,n,i,r,o,a="emptyOnly"){return new _b(t,e,n,i,r,a,o).recognize()}var PB=31,_b=class{constructor(e,n,i,r,o,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new pb(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new we(4002,`'${e.segmentGroup}'`)}recognize(){let e=JT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(n=>{let i=new wd([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,{},Le,this.rootComponentType,null,{}),r=new ai(i,n),o=new cm("",r),a=F2(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Le).pipe(Do(i=>{if(i instanceof um)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ed?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=bb(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(ge(o=>o instanceof ai?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return rt(r).pipe(uc(o=>{let a=i.children[o],c=X2(n,o);return this.processSegmentGroup(e,c,a,o)}),Ss((o,a)=>(o.push(...a),o)),xo(null),A_(),zt(o=>{if(o===null)return Lc(i);let a=ES(o);return RB(a),he(a)}))}processSegment(e,n,i,r,o,a){return rt(n).pipe(uc(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,o,a).pipe(Do(u=>{if(u instanceof Ed)return he(null);throw u}))),_i(c=>!!c),Do(c=>{if(wS(c))return AB(i,r,o)?he(new gb):Lc(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,o,a,c){return SB(i,r,o,a)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,a):Lc(r):Lc(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,a){let{matched:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:m}=Cb(n,r,o);if(!c)return Lc(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>PB&&(this.allowRedirects=!1));let v=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,f);return this.applyRedirects.lineralizeSegments(r,v).pipe(zt(w=>this.processSegment(e,i,n,w.concat(m),a,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let a=IB(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(bt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(bt(({routes:u})=>{let f=i._loadedInjector??e,{consumedSegments:m,remainingSegments:v,parameters:w}=c,E=new wd(m,w,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,NB(i),vr(i),i.component??i._loadedComponent??null,i,OB(i)),{segmentGroup:M,slicedSegments:k}=JT(n,m,v,u);if(k.length===0&&M.hasChildren())return this.processChildren(f,u,M).pipe(ge(q=>q===null?null:new ai(E,q)));if(u.length===0&&k.length===0)return he(new ai(E,[]));let F=vr(i)===o;return this.processSegment(f,u,M,k,F?Le:o,!0).pipe(ge(q=>new ai(E,q instanceof ai?[q]:[])))}))):Lc(n)))}getChildConfig(e,n,i){return n.children?he({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?he({routes:n._loadedRoutes,injector:n._loadedInjector}):vB(e,n,i,this.urlSerializer).pipe(zt(r=>r?this.configLoader.loadChildren(e,n).pipe(Zt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):wB(n))):he({routes:[],injector:e})}};function RB(t){t.sort((e,n)=>e.value.outlet===Le?-1:n.value.outlet===Le?1:e.value.outlet.localeCompare(n.value.outlet))}function kB(t){let e=t.value.routeConfig;return e&&e.path===""}function ES(t){let e=[],n=new Set;for(let i of t){if(!kB(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=ES(i.children);e.push(new ai(i.value,r))}return e.filter(i=>!n.has(i))}function NB(t){return t.data||{}}function OB(t){return t.resolve||{}}function LB(t,e,n,i,r,o){return zt(a=>MB(t,e,n,i,a.extractedUrl,r,o).pipe(ge(({state:c,tree:u})=>vt(X({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function FB(t,e){return zt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return he(n);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of CS(u))a.add(f);let c=0;return rt(a).pipe(uc(u=>o.has(u)?VB(u,i,t,e):(u.data=bb(u,u.parent,t).resolve,he(void 0))),Zt(()=>c++),hc(1),zt(u=>c===a.size?he(n):kn))})}function CS(t){let e=t.children.map(n=>CS(n)).flat();return[t,...e]}function VB(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!gS(r)&&(o[Cd]=r.title),BB(o,t,e,i).pipe(ge(a=>(t._resolvedData=a,t.data=bb(t,t.parent,n).resolve,null)))}function BB(t,e,n,i){let r=Wy(t);if(r.length===0)return he({});let o={};return rt(r).pipe(zt(a=>jB(t[a],e,n,i).pipe(_i(),Zt(c=>{o[a]=c}))),hc(1),S_(o),Do(a=>wS(a)?kn:cc(a)))}function jB(t,e,n,i){let r=Dd(e)??i,o=Hc(t,r),a=o.resolve?o.resolve(e,n):qr(r,()=>o(e,n));return Fo(a)}function qy(t){return bt(e=>{let n=t(e);return n?rt(n).pipe(ge(()=>e)):he(e)})}var DS=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(a=>a.outlet===Le);return r}getResolvedTitleForRoute(i){return i.data[Cd]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>Q(zB),providedIn:"root"});let t=e;return t})(),zB=(()=>{let e=class e extends DS{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(V(ZT))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Db=new se("",{providedIn:"root",factory:()=>({})}),xb=new se(""),UB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Q(Sy)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return he(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Fo(i.loadComponent()).pipe(ge(xS),Zt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Pu(()=>{this.componentLoaders.delete(i)})),o=new ic(r,()=>new Ae).pipe(nc());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=$B(r,this.compiler,i,this.onLoadEndListener).pipe(Pu(()=>{this.childrenLoaders.delete(r)})),c=new ic(a,()=>new Ae).pipe(nc());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $B(t,e,n,i){return Fo(t.loadChildren()).pipe(ge(xS),zt(r=>r instanceof Ku||Array.isArray(r)?he(r):rt(e.compileModuleAsync(r))),ge(r=>{i&&i(t);let o,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(o=r.create(n).injector,a=o.get(xb,[],{optional:!0,self:!0}).flat()),{routes:a.map(Eb),injector:o}}))}function HB(t){return t&&typeof t=="object"&&"default"in t}function xS(t){return HB(t)?t.default:t}var Tb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>Q(qB),providedIn:"root"});let t=e;return t})(),qB=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),GB=new se("");var WB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ae,this.transitionAbortSubject=new Ae,this.configLoader=Q(UB),this.environmentInjector=Q(Zn),this.urlSerializer=Q(yb),this.rootContexts=Q(dm),this.location=Q(Hs),this.inputBindingEnabled=Q(Ib,{optional:!0})!==null,this.titleStrategy=Q(DS),this.options=Q(Db,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=Q(Tb),this.createViewTransition=Q(GB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>he(void 0),this.rootComponentType=null;let i=o=>this.events.next(new nb(o)),r=o=>this.events.next(new ib(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(vt(X(X({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new tn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:pd,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Lt(a=>a.id!==0),ge(a=>vt(X({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),bt(a=>{let c=!1,u=!1;return he(a).pipe(bt(f=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",ci.SupersededByNewNavigation),kn;this.currentTransition=a,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?vt(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=f.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!m&&v!=="reload"){let w="";return this.events.next(new Ks(f.id,this.urlSerializer.serialize(f.rawUrl),w,Yy.IgnoredSameUrlNavigation)),f.resolve(null),kn}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return he(f).pipe(bt(w=>{let E=this.transitions?.getValue();return this.events.next(new _d(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?kn:Promise.resolve(w)}),LB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Zt(w=>{a.targetSnapshot=w.targetSnapshot,a.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=vt(X({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let E=new om(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:w,extractedUrl:E,source:M,restoredState:k,extras:F}=f,q=new _d(w,this.urlSerializer.serialize(E),M,k);this.events.next(q);let ie=pS(this.rootComponentType).snapshot;return this.currentTransition=a=vt(X({},f),{targetSnapshot:ie,urlAfterRedirects:E,extras:vt(X({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,he(a)}else{let w="";return this.events.next(new Ks(f.id,this.urlSerializer.serialize(f.extractedUrl),w,Yy.IgnoredByUrlHandlingStrategy)),f.resolve(null),kn}}),Zt(f=>{let m=new Xy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),ge(f=>(this.currentTransition=a=vt(X({},f),{guards:eB(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),a)),uB(this.environmentInjector,f=>this.events.next(f)),Zt(f=>{if(a.guardsResult=f.guardsResult,zc(f.guardsResult))throw vS(this.urlSerializer,f.guardsResult);let m=new Jy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(m)}),Lt(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",ci.GuardRejected),!1)),qy(f=>{if(f.guards.canActivateChecks.length)return he(f).pipe(Zt(m=>{let v=new eb(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),bt(m=>{let v=!1;return he(m).pipe(FB(this.paramsInheritanceStrategy,this.environmentInjector),Zt({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(m,"",ci.NoDataFromResolver)}}))}),Zt(m=>{let v=new tb(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),qy(f=>{let m=v=>{let w=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(v.routeConfig).pipe(Zt(E=>{v.component=E}),ge(()=>{})));for(let E of v.children)w.push(...m(E));return w};return lc(m(f.targetSnapshot.root)).pipe(xo(null),gi(1))}),qy(()=>this.afterPreactivation()),bt(()=>{let{currentSnapshot:f,targetSnapshot:m}=a,v=this.createViewTransition?.(this.environmentInjector,f.root,m.root);return v?rt(v).pipe(ge(()=>a)):he(a)}),ge(f=>{let m=G2(i.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=a=vt(X({},f),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,a}),Zt(()=>{this.events.next(new yd)}),J2(this.rootContexts,i.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),gi(1),Zt({next:f=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Zs(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{c=!0}}),vi(this.transitionAbortSubject.pipe(Zt(f=>{throw f}))),Pu(()=>{!c&&!u&&this.cancelNavigationTransition(a,"",ci.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),Do(f=>{if(u=!0,bS(f))this.events.next(new Lo(a.id,this.urlSerializer.serialize(a.extractedUrl),f.message,f.cancellationCode)),K2(f)?this.events.next(new bd(f.url)):a.resolve(!1);else{this.events.next(new vd(a.id,this.urlSerializer.serialize(a.extractedUrl),f,a.targetSnapshot??void 0));try{a.resolve(i.errorHandler(f))}catch(m){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(m)}}return kn}))}))}cancelNavigationTransition(i,r,o){let a=new Lo(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(a),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZB(t){return t!==pd}var KB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>Q(QB),providedIn:"root"});let t=e;return t})(),vb=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},QB=(()=>{let e=class e extends vb{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Dp(e)))(o||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),TS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:()=>Q(YB),providedIn:"root"});let t=e;return t})(),YB=(()=>{let e=class e extends TS{constructor(){super(...arguments),this.location=Q(Hs),this.urlSerializer=Q(yb),this.options=Q(Db,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=Q(Tb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Oo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=pS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof _d)this.stateMemento=this.createStateMemento();else if(i instanceof Ks)this.rawUrlTree=r.initialUrl;else if(i instanceof om){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof yd?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Lo&&(i.code===ci.GuardRejected||i.code===ci.NoDataFromResolver)?this.restoreHistory(r):i instanceof vd?this.restoreHistory(r,!0):i instanceof Zs&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let a=this.browserPageId,c=X(X({},r.extras.state),this.generateNgRouterState(r.id,a));this.location.replaceState(o,"",c)}else{let a=X(X({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===i.finalUrl&&a===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Dp(e)))(o||e)}})(),e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(hd||{});function XB(t,e){t.events.pipe(Lt(n=>n instanceof Zs||n instanceof Lo||n instanceof vd||n instanceof Ks),ge(n=>n instanceof Zs||n instanceof Ks?hd.COMPLETE:(n instanceof Lo?n.code===ci.Redirect||n.code===ci.SupersededByNewNavigation:!1)?hd.REDIRECTING:hd.FAILED),Lt(n=>n!==hd.REDIRECTING),gi(1)).subscribe(()=>{e()})}function JB(t){throw t}var ej={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tj={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fm=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=Q(Hp),this.stateManager=Q(TS),this.options=Q(Db,{optional:!0})||{},this.pendingTasks=Q(Lp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=Q(WB),this.urlSerializer=Q(yb),this.location=Q(Hs),this.urlHandlingStrategy=Q(Tb),this._events=new Ae,this.errorHandler=this.options.errorHandler||JB,this.navigated=!1,this.routeReuseStrategy=Q(KB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=Q(xb,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!Q(Ib,{optional:!0}),this.eventsSubscription=new yt,this.isNgZoneEnabled=Q(_e)instanceof _e&&_e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof Lo&&r.code!==ci.Redirect&&r.code!==ci.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Zs)this.navigated=!0;else if(r instanceof bd){let c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||ZB(o.source)};this.scheduleNavigation(c,pd,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}ij(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let a={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let f=X({},o);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(a.state=f)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Eb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:a,fragment:c,queryParamsHandling:u,preserveFragment:f}=r,m=f?this.currentUrlTree.fragment:c,v=null;switch(u){case"merge":v=X(X({},this.currentUrlTree.queryParams),a);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=a||null}v!==null&&(v=this.removeEmptyProps(v));let w;try{let E=o?o.snapshot:this.routerState.snapshot.root;w=uS(E)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),w=this.currentUrlTree.root}return dS(w,i,v,m??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=zc(i)?i:this.parseUrl(i),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,pd,null,r)}navigate(i,r={skipLocationChange:!1}){return nj(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=X({},ej):r===!1?o=X({},tj):o=r,zc(i))return KT(this.currentUrlTree,i,o);let a=this.parseUrl(i);return KT(this.currentUrlTree,a,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,a])=>(a!=null&&(r[o]=a),r),{})}scheduleNavigation(i,r,o,a,c){if(this.disposed)return Promise.resolve(!1);let u,f,m;c?(u=c.resolve,f=c.reject,m=c.promise):m=new Promise((w,E)=>{u=w,f=E});let v=this.pendingTasks.add();return XB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:a,resolve:u,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(w=>Promise.reject(w))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nj(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new we(4008,!1)}function ij(t){return!(t instanceof yd)&&!(t instanceof bd)}var rj=new se("");function SS(t,...e){return wp([{provide:xb,multi:!0,useValue:t},[],{provide:Uc,useFactory:oj,deps:[fm]},{provide:Ty,multi:!0,useFactory:sj},e.map(n=>n.\u0275providers)])}function oj(t){return t.routerState.root}function sj(){let t=Q(un);return e=>{let n=t.get(Us);if(e!==n.components[0])return;let i=t.get(fm),r=t.get(aj);t.get(cj)===1&&i.initialNavigation(),t.get(lj,null,je.Optional)?.setUpPreloading(),t.get(rj,null,je.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var aj=new se("",{factory:()=>new Ae}),cj=new se("",{providedIn:"root",factory:()=>1});var lj=new se("");var AS=[];var dj="firebase",hj="10.12.2";Eo(dj,hj,"app");var Td=new Hr("ANGULARFIRE2_VERSION");var fj=(t,e)=>{let n=e?[e]:WE(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Qs=class{constructor(){return fj(pj)}},pj="app-check";function Sb(){}var pm=class{zone;delegate;constructor(e,n=x_){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,n,i)}},Ab=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Sb,{},Sb,Sb)),n.pipe(Zt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mm=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new pm(Zone.current)),this.insideAngular=n.run(()=>new pm(Zone.current,ar)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(V(_e))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Qn(t){return gj(mj())(t)}function gj(t){return function(n){return n=n.lift(new Ab(t.ngZone)),n.pipe(Oi(t.outsideAngular),mi(t.insideAngular))}}var _j="firebase",vj="10.12.2";ri.registerVersion(_j,vj,"app-compat");var yj=["ngOnDestroy"],RS=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(yj.indexOf(o)>-1)return()=>{};let a=e.toPromise().then(c=>{let u=c?.[o];return typeof u=="function"?u.bind(c):u?.then?u.then(f=>n.run(()=>f)):n.run(()=>u)});return new Proxy(()=>{},{get:(c,u)=>a[u],apply:(c,u,f)=>a.then(m=>{let v=m?.(...f);return i?.spy?.apply&&i.spy.apply(o,f,v),v})})})});var gm=class{constructor(e){return e}},qc=new se("angularfire2.app.options"),Gc=new se("angularfire2.app.name");function Sd(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let a=ri.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>ri.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(a.options)){let c=!!module.hot;bj("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new gm(a)}var bj=(t,...e)=>{Ay()&&typeof console<"u"&&console[t](...e)},wj={provide:gm,useFactory:Sd,deps:[qc,_e,[new yp,Gc]]},kS=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:qc,useValue:n},{provide:Gc,useValue:i}]}}constructor(n){ri.registerVersion("angularfire",Td.full,"core"),ri.registerVersion("angularfire",Td.full,"app-compat"),ri.registerVersion("angular",bT.full,n.toString())}static \u0275fac=function(i){return new(i||t)(V(Vn))};static \u0275mod=st({type:t});static \u0275inj=ot({providers:[wj]})}return t})();function _m(t,e,n,i,r){let[,o,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===t)||[];if(o)return Ij(r,a)||(PS("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Ej?" You may need to reload as Firebase is not HMR aware.":""}`),PS("warn",{is:r,was:a})),o;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([t,c,r]),c}}function Ij(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Ej=typeof module<"u"&&!!module.hot,PS=(t,...e)=>{Ay()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Cj={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},NS={providers:[SS(AS),$v(kS.initializeApp(Cj))]};var ut=e1(LS());var Pb;try{Pb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Pb=!1}var Vt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?VT(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Pb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(V(Vn))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ad;function Dj(){if(Ad==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ad=!0}))}finally{Ad=Ad||!1}return Ad}function Wc(t){return Dj()?t:!!t.capture}var Ys;function FS(){if(Ys==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ys=!1,Ys;if("scrollBehavior"in document.documentElement.style)Ys=!0;else{let t=Element.prototype.scrollTo;t?Ys=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Ys=!1}}return Ys}var Mb;function xj(){if(Mb==null){let t=typeof document<"u"?document.head:null;Mb=!!(t&&(t.createShadowRoot||t.attachShadow))}return Mb}function VS(t){if(xj()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ei(t){return t.composedPath?t.composedPath()[0]:t.target}function Md(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Zc(t){return Array.isArray(t)?t:[t]}function $t(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Yr(t){return t instanceof Ct?t.nativeElement:t}var BS=new Set,Js,Tj=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Aj}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Sj(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(V(Vt),V(td,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sj(t,e){if(!BS.has(t))try{Js||(Js=document.createElement("style"),e&&Js.setAttribute("nonce",e),Js.setAttribute("type","text/css"),document.head.appendChild(Js)),Js.sheet&&(Js.sheet.insertRule(`@media ${t} {body{ }}`,0),BS.add(t))}catch(n){console.error(n)}}function Aj(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var ym=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Ae}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return jS(Zc(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=jS(Zc(i)).map(c=>this._registerQuery(c).observable),a=lc(o);return a=Co(a.pipe(gi(1)),a.pipe(ku(1),Lf(0))),a.pipe(ge(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:m})=>{u.matches=u.matches||f,u.breakpoints[m]=f}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),a={observable:new Pe(c=>{let u=f=>this._zone.run(()=>c.next(f));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(lr(r),ge(({matches:c})=>({query:i,matches:c})),vi(this._destroySubject)),mql:r};return this._queries.set(i,a),a}};e.\u0275fac=function(r){return new(r||e)(V(Tj),V(_e))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jS(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var zS={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function kb(t){return t.buttons===0||t.detail===0}function Nb(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Pj=new se("cdk-input-modality-detector-options"),Rj={ignoreKeys:[18,17,224,91,16]},HS=650,Kc=Wc({passive:!0,capture:!0}),kj=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,a){this._platform=i,this._mostRecentTarget=null,this._modality=new tn(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(u=>u===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ei(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<HS||(this._modality.next(kb(c)?"keyboard":"mouse"),this._mostRecentTarget=Ei(c))},this._onTouchstart=c=>{if(Nb(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ei(c)},this._options=X(X({},Rj),a),this.modalityDetected=this._modality.pipe(ku(1)),this.modalityChanged=this.modalityDetected.pipe(dc()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Kc),o.addEventListener("mousedown",this._onMousedown,Kc),o.addEventListener("touchstart",this._onTouchstart,Kc)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Kc),document.removeEventListener("mousedown",this._onMousedown,Kc),document.removeEventListener("touchstart",this._onTouchstart,Kc))}};e.\u0275fac=function(r){return new(r||e)(V(Vt),V(_e),V(Ue),V(Pj,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nj=new se("liveAnnouncerElement",{providedIn:"root",factory:Oj});function Oj(){return null}var Lj=new se("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Fj=0,qS=(()=>{let e=class e{constructor(i,r,o,a){this._ngZone=r,this._defaultOptions=a,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,a,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[a,c]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=o&&o.politeness?o.politeness:"polite"),c==null&&o&&(c=o.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(u=>this._currentResolve=u)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${Fj++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}};e.\u0275fac=function(r){return new(r||e)(V(Nj,8),V(_e),V(Ue),V(Lj,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wm=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(wm||{}),Vj=new se("cdk-focus-monitor-default-options"),bm=Wc({passive:!0,capture:!0}),GS=(()=>{let e=class e{constructor(i,r,o,a,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ae,this._rootNodeFocusAndBlurListener=u=>{let f=Ei(u);for(let m=f;m;m=m.parentElement)u.type==="focus"?this._onFocus(u,m):this._onBlur(u,m)},this._document=a,this._detectionMode=c?.detectionMode||wm.IMMEDIATE}monitor(i,r=!1){let o=Yr(i);if(!this._platform.isBrowser||o.nodeType!==1)return he();let a=VS(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;let u={checkChildren:r,subject:new Ae,rootNode:a};return this._elementInfo.set(o,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(i){let r=Yr(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let a=Yr(i),c=this._getDocument().activeElement;a===c?this._getClosestElementsInfo(a).forEach(([u,f])=>this._originChanged(u,r,f)):(this._setOrigin(r),typeof a.focus=="function"&&a.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===wm.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===wm.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?HS:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),a=Ei(i);!o||!o.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,bm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,bm)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(vi(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,bm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,bm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,a)=>{(a===i||o.checkChildren&&a.contains(i))&&r.push([a,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let a=i.labels;if(a){for(let c=0;c<a.length;c++)if(a[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(V(_e),V(Vt),V(kj),V(Ue,8),V(Vj,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ea=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(ea||{}),US="cdk-high-contrast-black-on-white",$S="cdk-high-contrast-white-on-black",Rb="cdk-high-contrast-active",WS=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=Q(ym).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ea.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,a=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ea.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ea.BLACK_ON_WHITE}return ea.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Rb,US,$S),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ea.BLACK_ON_WHITE?i.add(Rb,US):r===ea.WHITE_ON_BLACK&&i.add(Rb,$S)}}};e.\u0275fac=function(r){return new(r||e)(V(Vt),V(Ue))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Bj=new se("cdk-dir-doc",{providedIn:"root",factory:jj});function jj(){return Q(Ue)}var zj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Uj(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?zj.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var KS=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Je,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=Uj(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(V(Bj,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Vo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({});let t=e;return t})();function qj(){return!0}var Gj=new se("mat-sanity-checks",{providedIn:"root",factory:qj}),yr=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Md()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(V(WS),V(Gj,8),V(Ue))},e.\u0275mod=st({type:e}),e.\u0275inj=ot({imports:[Vo,Vo]});let t=e;return t})();var Ci=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Ci||{}),Vb=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ci.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},QS=Wc({passive:!0,capture:!0}),Bb=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Ei(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let a=o.get(i);a?a.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,QS)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,QS)))}},YS={enterDuration:225,exitDuration:150},Wj=800,XS=Wc({passive:!0,capture:!0}),JS=["mousedown","touchstart"],eA=["mouseup","mouseleave","touchend","touchcancel"],Pd=class Pd{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Yr(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=X(X({},YS),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let a=i.radius||Zj(e,n,r),c=e-r.left,u=n-r.top,f=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${c-a}px`,m.style.top=`${u-a}px`,m.style.height=`${a*2}px`,m.style.width=`${a*2}px`,i.color!=null&&(m.style.backgroundColor=i.color),m.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(m);let v=window.getComputedStyle(m),w=v.transitionProperty,E=v.transitionDuration,M=w==="none"||E==="0s"||E==="0s, 0s"||r.width===0&&r.height===0,k=new Vb(this,m,i,M);m.style.transform="scale3d(1, 1, 1)",k.state=Ci.FADING_IN,i.persistent||(this._mostRecentTransientRipple=k);let F=null;return!M&&(f||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let q=()=>this._finishRippleTransition(k),ie=()=>this._destroyRipple(k);m.addEventListener("transitionend",q),m.addEventListener("transitioncancel",ie),F={onTransitionEnd:q,onTransitionCancel:ie}}),this._activeRipples.set(k,F),(M||!f)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(e.state===Ci.FADING_OUT||e.state===Ci.HIDDEN)return;let n=e.element,i=X(X({},YS),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Ci.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Yr(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,JS.forEach(i=>{Pd._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{eA.forEach(n=>{this._triggerElement.addEventListener(n,this,XS)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ci.FADING_IN?this._startFadeOutTransition(e):e.state===Ci.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Ci.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ci.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=kb(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Wj;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Nb(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Ci.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ci.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(JS.forEach(n=>Pd._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(eA.forEach(n=>e.removeEventListener(n,this,XS)),this._pointerUpEventsRegistered=!1))}};Pd._eventManager=new Bb;var jb=Pd;function Zj(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var rA=new se("mat-ripple-global-options"),Kj=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,a,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new jb(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:X(X(X({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,X(X({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,X(X({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(Ee(Ct),Ee(_e),Ee(Vt),Ee(rA,8),Ee(zs,8))},e.\u0275dir=ln({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&No("mat-ripple-unbounded",o.unbounded)},inputs:{color:[pt.None,"matRippleColor","color"],unbounded:[pt.None,"matRippleUnbounded","unbounded"],centered:[pt.None,"matRippleCentered","centered"],radius:[pt.None,"matRippleRadius","radius"],animation:[pt.None,"matRippleAnimation","animation"],disabled:[pt.None,"matRippleDisabled","disabled"],trigger:[pt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),oA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({imports:[yr,yr]});let t=e;return t})();var tA={capture:!0},nA=["focus","mousedown","mouseenter","touchstart"],Lb="mat-ripple-loader-uninitialized",Fb="mat-ripple-loader-class-name",iA="mat-ripple-loader-centered",Im="mat-ripple-loader-disabled",sA=(()=>{let e=class e{constructor(){this._document=Q(Ue,{optional:!0}),this._animationMode=Q(zs,{optional:!0}),this._globalRippleOptions=Q(rA,{optional:!0}),this._platform=Q(Vt),this._ngZone=Q(_e),this._hosts=new Map,this._onInteraction=i=>{let r=Ei(i);if(r instanceof HTMLElement){let o=r.closest(`[${Lb}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}},this._ngZone.runOutsideAngular(()=>{for(let i of nA)this._document?.addEventListener(i,this._onInteraction,tA)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of nA)this._document?.removeEventListener(r,this._onInteraction,tA)}configureRipple(i,r){i.setAttribute(Lb,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute(Fb))&&i.setAttribute(Fb,r.className||""),r.centered&&i.setAttribute(iA,""),r.disabled&&i.setAttribute(Im,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(Im,""):i.removeAttribute(Im)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(Fb)),i.append(o);let a=new Kj(new Ct(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=i,a.centered=i.hasAttribute(iA),a.disabled=i.hasAttribute(Im),this.attachRipple(i,a),a}attachRipple(i,r){i.removeAttribute(Lb),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qj=["mat-button",""],Yj=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Xj=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Jj=new se("MAT_BUTTON_CONFIG");var ez=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],tz=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,a){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=a,this._focusMonitor=Q(GS),this._rippleLoader=Q(sA),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=Q(Jj,{optional:!0}),u=i.nativeElement,f=u.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:m,mdcClasses:v}of ez)u.hasAttribute(m)&&f.add(...v)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){py()},e.\u0275dir=ln({type:e,inputs:{color:"color",disableRipple:[pt.HasDecoratorInputTransform,"disableRipple","disableRipple",gr],disabled:[pt.HasDecoratorInputTransform,"disabled","disabled",gr],ariaDisabled:[pt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",gr],disabledInteractive:[pt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",gr]},features:[Zr]});let t=e;return t})();var aA=(()=>{let e=class e extends tz{constructor(i,r,o,a){super(i,r,o,a)}};e.\u0275fac=function(r){return new(r||e)(Ee(Ct),Ee(Vt),Ee(_e),Ee(zs,8))},e.\u0275cmp=St({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Qr("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Ey(o.color?"mat-"+o.color:""),No("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ko,Mt],attrs:Qj,ngContentSelectors:Xj,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(jp(Yj),Ce(0,"span",0),Pc(1),K(2,"span",1),Pc(3,1),J(),Pc(4,2),Ce(5,"span",2)(6,"span",3)),r&2&&No("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var cA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({imports:[yr,oA,yr]});let t=e;return t})();var Qc=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Qc||{});function lA(t,e){return{type:Qc.Trigger,name:t,definitions:e,options:{}}}function zb(t,e=null){return{type:Qc.Animate,styles:e,timings:t}}function Em(t){return{type:Qc.Style,styles:t,offset:null}}function Ub(t,e,n){return{type:Qc.State,name:t,styles:e,options:n}}function $b(t,e,n=null){return{type:Qc.Transition,expr:t,animation:e,options:n}}var Rd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Yc=class extends Rd{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Xc=class extends Rd{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Hb=class extends Rd{constructor(e){super(),this.element=e instanceof Ct?e.nativeElement:e}},Jc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Yc)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Xc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Hb)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Cm=class extends Jc{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");c.parentNode.insertBefore(u,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||un.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var qb=(()=>{let e=class e extends Jc{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Je,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");a.setAttachedHost(this),c.parentNode.insertBefore(u,c),this._getRootNode().appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,a=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(a,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(Ee(Ro),Ee(Ui),Ee(Ue))},e.\u0275dir=ln({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[pt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[ko]});let t=e;return t})();var Dm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({});let t=e;return t})();var nz=20,dA=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Ae,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=nz){return this._platform.isBrowser?new Pe(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(Of(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):he()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Lt(a=>!a||o.indexOf(a)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,a)=>{this._scrollableContainsElement(a,i)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Yr(r),a=i.getElementRef().nativeElement;do if(o==a)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Au(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(V(_e),V(Vt),V(Ue,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var iz=20,Gb=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new Ae,this._changeListener=a=>{this._change.next(a)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,a=o.getBoundingClientRect(),c=-a.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,u=-a.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:c,left:u}}change(i=iz){return i>0?this._change.pipe(Of(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(V(Vt),V(_e),V(Ue,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({});let t=e;return t})(),Wb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({imports:[Vo,uA,Vo,uA]});let t=e;return t})();var hA=FS(),Zb=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=$t(-this._previousScrollPosition.left),e.style.top=$t(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),hA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),hA&&(i.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var Kb=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Lt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},xm=class{enable(){}disable(){}attach(){}};function Qb(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,a=t.left>n.right;return i||r||o||a})}function fA(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,a=t.right>n.right;return i||r||o||a})}var Yb=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Qb(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},oz=(()=>{let e=class e{constructor(i,r,o,a){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new xm,this.close=c=>new Kb(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Zb(this._viewportRuler,this._document),this.reposition=c=>new Yb(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}};e.\u0275fac=function(r){return new(r||e)(V(dA),V(Gb),V(_e),V(Ue))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),kd=class{constructor(e){if(this.scrollStrategy=new xm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var Xb=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var vA=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sz=(()=>{let e=class e extends vA{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){let u=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(_e,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),az=(()=>{let e=class e extends vA{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Ei(a)},this._clickListener=a=>{let c=Ei(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let f=this._attachedOverlays.slice();for(let m=f.length-1;m>-1;m--){let v=f[m];if(v._outsidePointerEvents.observers.length<1||!v.hasAttached())continue;if(v.overlayElement.contains(c)||v.overlayElement.contains(u))break;let w=v._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>w.next(a)):w.next(a)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(Vt),V(_e,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yA=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Md()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let a=0;a<o.length;a++)o[a].remove()}let r=this._document.createElement("div");r.classList.add(i),Md()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(Vt))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Jb=class{constructor(e,n,i,r,o,a,c,u,f,m=!1,v){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=c,this._location=u,this._outsideClickDispatcher=f,this._animationsDisabled=m,this._injector=v,this._backdropElement=null,this._backdropClick=new Ae,this._attachments=new Ae,this._detachments=new Ae,this._locationChanges=yt.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._backdropTransitionendHandler=w=>{this._disposeBackdrop(w.target)},this._keydownEvents=new Ae,this._outsidePointerEvents=new Ae,this._renders=new Ae,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=sd(()=>by(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),rd(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=X(X({},this._config),e),this._updateElementSize()}setDirection(e){this._config=vt(X({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=$t(this._config.width),e.height=$t(this._config.height),e.minWidth=$t(this._config.minWidth),e.minHeight=$t(this._config.minHeight),e.maxWidth=$t(this._config.maxWidth),e.maxHeight=$t(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=Zc(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(vi(Mu(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},pA="cdk-overlay-connected-position-bounding-box",cz=/([A-Za-z%]+)$/,e0=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ae,this._resizeSubscription=yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(pA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],a;for(let c of this._preferredPositions){let u=this._getOriginPoint(e,r,c),f=this._getOverlayPoint(u,n,c),m=this._getOverlayFit(f,n,i,c);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,u);return}if(this._canFitWithFlexibleDimensions(m,f,i)){o.push({position:c,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,c)});continue}(!a||a.overlayFit.visibleArea<m.visibleArea)&&(a={overlayFit:m,overlayPoint:f,originPoint:u,position:c,overlayRect:n})}if(o.length){let c=null,u=-1;for(let f of o){let m=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);m>u&&(u=m,c=f)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ta(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let a=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?a:c}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=gA(n),{x:a,y:c}=e,u=this._getOffset(r,"x"),f=this._getOffset(r,"y");u&&(a+=u),f&&(c+=f);let m=0-a,v=a+o.width-i.width,w=0-c,E=c+o.height-i.height,M=this._subtractOverflows(o.width,m,v),k=this._subtractOverflows(o.height,w,E),F=M*k;return{visibleArea:F,isCompletelyWithinViewport:o.width*o.height===F,fitsInViewportVertically:k===o.height,fitsInViewportHorizontally:M==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,a=mA(this._overlayRef.getConfig().minHeight),c=mA(this._overlayRef.getConfig().minWidth),u=e.fitsInViewportVertically||a!=null&&a<=r,f=e.fitsInViewportHorizontally||c!=null&&c<=o;return u&&f}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=gA(n),o=this._viewportRect,a=Math.max(e.x+r.width-o.width,0),c=Math.max(e.y+r.height-o.height,0),u=Math.max(o.top-i.top-e.y,0),f=Math.max(o.left-i.left-e.x,0),m=0,v=0;return r.width<=o.width?m=f||-a:m=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?v=u||-c:v=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:m,y:v},{x:e.x+m,y:e.y+v}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!lz(this._lastScrollVisibility,i)){let r=new Xb(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,a,c;if(n.overlayY==="top")a=e.y,o=i.height-a+this._viewportMargin;else if(n.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,o=i.height-c+this._viewportMargin;else{let E=Math.min(i.bottom-e.y+i.top,e.y),M=this._lastBoundingBoxSize.height;o=E*2,a=e.y-E,o>M&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-M/2)}let u=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,f=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,m,v,w;if(f)w=i.width-e.x+this._viewportMargin*2,m=e.x-this._viewportMargin;else if(u)v=e.x,m=i.right-e.x;else{let E=Math.min(i.right-e.x+i.left,e.x),M=this._lastBoundingBoxSize.width;m=E*2,v=e.x-E,m>M&&!this._isInitialRender&&!this._growAfterOpen&&(v=e.x-M/2)}return{top:a,left:v,bottom:c,right:w,width:m,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=$t(i.height),r.top=$t(i.top),r.bottom=$t(i.bottom),r.width=$t(i.width),r.left=$t(i.left),r.right=$t(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=$t(o)),a&&(r.maxWidth=$t(a))}this._lastBoundingBoxSize=i,ta(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ta(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ta(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let m=this._viewportRuler.getViewportScrollPosition();ta(i,this._getExactOverlayY(n,e,m)),ta(i,this._getExactOverlayX(n,e,m))}else i.position="static";let c="",u=this._getOffset(n,"x"),f=this._getOffset(n,"y");u&&(c+=`translateX(${u}px) `),f&&(c+=`translateY(${f}px)`),i.transform=c.trim(),a.maxHeight&&(r?i.maxHeight=$t(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=$t(a.maxWidth):o&&(i.maxWidth="")),ta(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(o.y+this._overlayRect.height)}px`}else r.top=$t(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let a;if(this._isRtl()?a=e.overlayX==="end"?"left":"right":a=e.overlayX==="end"?"right":"left",a==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(o.x+this._overlayRect.width)}px`}else r.left=$t(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:fA(e,i),isOriginOutsideView:Qb(e,i),isOverlayClipped:fA(n,i),isOverlayOutsideView:Qb(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Zc(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Ct)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function ta(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function mA(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(cz);return!n||n==="px"?parseFloat(e):null}return t||null}function gA(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function lz(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var _A="cdk-global-overlay-wrapper",t0=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(_A),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:c}=i,u=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),f=(o==="100%"||o==="100vh")&&(!c||c==="100%"||c==="100vh"),m=this._xPosition,v=this._xOffset,w=this._overlayRef.getConfig().direction==="rtl",E="",M="",k="";u?k="flex-start":m==="center"?(k="center",w?M=v:E=v):w?m==="left"||m==="end"?(k="flex-end",E=v):(m==="right"||m==="start")&&(k="flex-start",M=v):m==="left"||m==="start"?(k="flex-start",E=v):(m==="right"||m==="end")&&(k="flex-end",M=v),e.position=this._cssPosition,e.marginLeft=u?"0":E,e.marginTop=f?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":M,n.justifyContent=k,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(_A),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},uz=(()=>{let e=class e{constructor(i,r,o,a){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=a}global(){return new t0}flexibleConnectedTo(i){return new e0(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(V(Gb),V(Ue),V(Vt),V(yA))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dz=0,Nd=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m,v,w,E,M){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=u,this._ngZone=f,this._document=m,this._directionality=v,this._location=w,this._outsideClickDispatcher=E,this._animationsModuleType=M}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),a=this._createPortalOutlet(o),c=new kd(i);return c.direction=c.direction||this._directionality.value,new Jb(a,r,o,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Zn))}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${dz++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Us)),new Cm(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(V(oz),V(yA),V(Ro),V(uz),V(sz),V(un),V(_e),V(Ue),V(KS),V(Hs),V(az),V(zs,8))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hz=new se("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=Q(Nd);return()=>t.scrollStrategies.reposition()}});function fz(t){return()=>t.scrollStrategies.reposition()}var pz={provide:hz,deps:[Nd],useFactory:fz},bA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({providers:[Nd,pz],imports:[Vo,Dm,Wb,Wb]});let t=e;return t})();function gz(t,e){if(t&1){let n=Kn();K(0,"div",1)(1,"button",2),qe("click",function(){Ln(n);let r=at();return Fn(r.action())}),ve(2),J()()}if(t&2){let n=at();le(2),Bn(" ",n.data.action," ")}}var _z=["label"];function vz(t,e){}var yz=Math.pow(2,31)-1,Od=class{constructor(e,n){this._overlayRef=n,this._afterDismissed=new Ae,this._afterOpened=new Ae,this._onAction=new Ae,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,yz))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},wA=new se("MatSnackBarData"),el=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},bz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let t=e;return t})(),wz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let t=e;return t})(),Iz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let t=e;return t})(),IA=(()=>{let e=class e{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};e.\u0275fac=function(r){return new(r||e)(Ee(Od),Ee(wA))},e.\u0275cmp=St({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Mt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(K(0,"div",0),ve(1),J(),Et(2,gz,3,1,"div",1)),r&2&&(le(),Bn(" ",o.data.message,`
`),le(),Ut(2,o.hasAction?2:-1))},dependencies:[aA,bz,wz,Iz],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let t=e;return t})(),Ez={snackBarState:lA("state",[Ub("void, hidden",Em({transform:"scale(0.8)",opacity:0})),Ub("visible",Em({transform:"scale(1)",opacity:1})),$b("* => visible",zb("150ms cubic-bezier(0, 0, 0.2, 1)")),$b("* => void, * => hidden",zb("75ms cubic-bezier(0.4, 0.0, 1, 1)",Em({opacity:0})))])},Cz=0,Dz=(()=>{let e=class e extends Jc{constructor(i,r,o,a,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=c,this._document=Q(Ue),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ae,this._onExit=new Ae,this._onEnter=new Ae,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${Cz++}`,this.attachDomPortal=u=>{this._assertNotAttached();let f=this._portalOutlet.attachDomPortal(u);return this._afterPortalAttached(),f},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:o}=i;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,a="mdc-snackbar__label";o.classList.toggle(a,!o.querySelector(`.${a}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");this._trackedModals.add(a),c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?i.setAttribute("aria-owns",o):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};e.\u0275fac=function(r){return new(r||e)(Ee(_e),Ee(Ct),Ee($i),Ee(Vt),Ee(el))},e.\u0275cmp=St({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(od(qb,7),od(_z,7)),r&2){let a;Rc(a=kc())&&(o._portalOutlet=a.first),Rc(a=kc())&&(o._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&Dy("@state.done",function(c){return o.onAnimationEnd(c)}),r&2&&Cy("@state",o._animationState)},standalone:!0,features:[ko,Mt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(K(0,"div",1)(1,"div",2,0)(3,"div",3),Et(4,vz,0,0,"ng-template",4),J(),Ce(5,"div"),J()()),r&2&&(le(5),Qr("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[qb],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[Ez.snackBarState]}});let t=e;return t})();function xz(){return new el}var Tz=new se("mat-snack-bar-default-options",{providedIn:"root",factory:xz}),Sz=(()=>{let e=class e{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,o,a,c,u){this._overlay=i,this._live=r,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=c,this._defaultConfig=u,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=IA,this.snackBarContainerComponent=Dz,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",o){let a=X(X({},this._defaultConfig),o);return a.data={message:i,action:r},a.announcementMessage===i&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,a=un.create({parent:o||this._injector,providers:[{provide:el,useValue:r}]}),c=new Yc(this.snackBarContainerComponent,r.viewContainerRef,a),u=i.attach(c);return u.instance.snackBarConfig=r,u.instance}_attach(i,r){let o=X(X(X({},new el),this._defaultConfig),r),a=this._createOverlay(o),c=this._attachSnackBarContainer(a,o),u=new Od(c,a);if(i instanceof ji){let f=new Xc(i,null,{$implicit:o.data,snackBarRef:u});u.instance=c.attachTemplatePortal(f)}else{let f=this._createInjector(o,u),m=new Yc(i,void 0,f),v=c.attachComponentPortal(m);u.instance=v.instance}return this._breakpointObserver.observe(zS.HandsetPortrait).pipe(vi(a.detachments())).subscribe(f=>{a.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),o.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(u,o),this._openedSnackBarRef=u,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new kd;r.direction=i.direction;let o=this._overlay.position().global(),a=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!a||i.horizontalPosition==="end"&&a,u=!c&&i.horizontalPosition!=="center";return c?o.left("0"):u?o.right("0"):o.centerHorizontally(),i.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(i,r){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector;return un.create({parent:o||this._injector,providers:[{provide:Od,useValue:r},{provide:wA,useValue:i.data}]})}};e.\u0275fac=function(r){return new(r||e)(V(Nd),V(qS),V(un),V(ym),V(e,12),V(Tz))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var EA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({providers:[Sz],imports:[bA,Dm,cA,yr,IA,yr]});let t=e;return t})();var CA=(()=>{let e=class e{transform(i,...r){let o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=[];for(let c=0;c<o.length;c++)for(let u=0;u<o.length;u++)a.push(o[c]+o[u]);if(console.log(a),console.log(i,...r),i<1e3)return i.toFixed(2);if(i>=1e3&&i<=999999)return(i/1e3).toFixed(2)+"K";if(i>=1e6&&i<=999999999)return(i/1e6).toFixed(2)+"M";if(i>=1e9&&i<=999999999999)return(i/1e9).toFixed(2)+"B";if(i>=1e12&&i<=999999999999999)return(i/1e12).toFixed(2)+"T";if(i>=1e15){let c=i/1e12;console.log(i,c);let u=-1;for(;c/1e3>1;)console.log(c),c=c/1e3,u++;return c.toFixed(2)+a[u]}return null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=bp({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();var Pz=new Map,Rz={activated:!1,tokenObservers:[]},kz={initialized:!1,enabled:!1};function Hi(t){return Pz.get(t)||Object.assign({},Rz)}function AA(){return kz}var Nz="https://content-firebaseappcheck.googleapis.com/v1";var Oz="exchangeDebugToken",DA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},sY=24*60*60*1e3;var i0=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return U(this,null,function*(){this.stop();try{this.pending=new c_,this.pending.promise.catch(n=>{}),yield Lz(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new c_,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Lz(t){return new Promise(e=>{setTimeout(e,t)})}var Fz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Bo=new qE("appCheck","AppCheck",Fz);function MA(t){if(!Hi(t).activated)throw Bo.create("use-before-activation",{appName:t.name})}function PA(i,r){return U(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let E=yield a.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(E){throw Bo.create("fetch-network-error",{originalErrorMessage:E?.message})}if(u.status!==200)throw Bo.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(E){throw Bo.create("fetch-parse-error",{originalErrorMessage:E?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Bo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let v=Number(m[1])*1e3,w=Date.now();return{token:f.token,expireTimeMillis:w+v,issuedAtTimeMillis:w}})}function RA(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${Nz}/projects/${n}/apps/${i}:${Oz}?key=${r}`,body:{debug_token:e}}}var Vz="firebase-app-check-database",Bz=1,r0="firebase-app-check-store";var Tm=null;function jz(){return Tm||(Tm=new Promise((t,e)=>{try{let n=indexedDB.open(Vz,Bz);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Bo.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(r0,{keyPath:"compositeKey"})}}}catch(n){e(Bo.create("storage-open",{originalErrorMessage:n?.message}))}}),Tm)}function zz(t,e){return Uz($z(t),e)}function Uz(t,e){return U(this,null,function*(){let i=(yield jz()).transaction(r0,"readwrite"),o=i.objectStore(r0).put({compositeKey:t,value:e});return new Promise((a,c)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;c(Bo.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function $z(t){return`${t.options.appId}-${t.name}`}var o0=new df("@firebase/app-check");function n0(t,e){return uf()?zz(t,e).catch(n=>{o0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function kA(){return AA().enabled}function NA(){return U(this,null,function*(){let t=AA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var Hz={error:"UNKNOWN_ERROR"};function qz(t){return UE.encodeString(JSON.stringify(t),!1)}function s0(t,e=!1){return U(this,null,function*(){let n=t.app;MA(n);let i=Hi(n),r=i.token,o;if(r&&!Ld(r)&&(i.token=void 0,r=void 0),!r){let u=yield i.cachedTokenPromise;u&&(Ld(u)?r=u:yield n0(n,void 0))}if(!e&&r&&Ld(r))return{token:r.token};let a=!1;if(kA()){i.exchangeTokenPromise||(i.exchangeTokenPromise=PA(RA(n,yield NA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield n0(n,u),i.token=u,{token:u.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),r=yield Hi(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?o0.warn(u.message):o0.error(u),o=u}let c;return r?o?Ld(r)?c={token:r.token,internalError:o}:c=TA(o):(c={token:r.token},i.token=r,yield n0(n,r)):c=TA(o),a&&Kz(n,c),c})}function Gz(t){return U(this,null,function*(){let e=t.app;MA(e);let{provider:n}=Hi(e);if(kA()){let i=yield NA(),{token:r}=yield PA(RA(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function Wz(t,e,n,i){let{app:r}=t,o=Hi(r),a={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&Ld(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),xA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>xA(t))}function OA(t,e){let n=Hi(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function xA(t){let{app:e}=t,n=Hi(e),i=n.tokenRefresher;i||(i=Zz(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function Zz(t){let{app:e}=t;return new i0(()=>U(this,null,function*(){let n=Hi(e),i;if(n.token?i=yield s0(t,!0):i=yield s0(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Hi(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},DA.RETRIAL_MIN_WAIT,DA.RETRIAL_MAX_WAIT)}function Kz(t,e){let n=Hi(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Ld(t){return t.expireTimeMillis-Date.now()>0}function TA(t){return{token:qz(Hz),error:t}}var a0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Hi(this.app);for(let n of e)OA(this.app,n.next);return Promise.resolve()}};function Qz(t,e){return new a0(t,e)}function Yz(t){return{getToken:e=>s0(t,e),getLimitedUseToken:()=>Gz(t),addTokenListener:e=>Wz(t,"INTERNAL",e),removeTokenListener:e=>OA(t.app,e)}}var Xz="@firebase/app-check",Jz="0.8.4";var eU="app-check",SA="app-check-internal";function tU(){Cu(new Cs(eU,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Qz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(SA).initialize()})),Cu(new Cs(SA,t=>{let e=t.getProvider("app-check").getImmediate();return Yz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Eo(Xz,Jz)}tU();var nU=["localhost","0.0.0.0","127.0.0.1"],vY=typeof window<"u"&&nU.includes(window.location.hostname);var c0=new se("angularfire2.auth.use-emulator"),l0=new se("angularfire2.auth.settings"),u0=new se("angularfire2.auth.tenant-id"),d0=new se("angularfire2.auth.langugage-code"),h0=new se("angularfire2.auth.use-device-language"),f0=new se("angularfire.auth.persistence"),p0=(t,e,n,i,r,o,a,c)=>_m(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),i&&(u.tenantId=i),u.languageCode=r,o&&u.useDeviceLanguage(),a)for(let[f,m]of Object.entries(a))u.settings[f]=m;return c&&u.setPersistence(c),u},[n,i,r,o,a,c]),Sm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,a,c,u,f,m,v,w,E){let M=new Ae,k=he(void 0).pipe(mi(a.outsideAngular),bt(()=>o.runOutsideAngular(()=>import("./chunk-PY5DTK2U.js"))),ge(()=>Sd(n,o,i)),ge(F=>p0(F,o,c,f,m,v,u,w)),Ru({bufferSize:1,refCount:!1}));if(qs(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=he(null);else{k.pipe(_i()).subscribe();let F=k.pipe(bt(Z=>Z.getRedirectResult().then(ae=>ae,()=>null)),Qn,Ru({bufferSize:1,refCount:!1})),q=k.pipe(bt(Z=>new Pe(ae=>({unsubscribe:o.runOutsideAngular(()=>Z.onAuthStateChanged(pe=>ae.next(pe),pe=>ae.error(pe),()=>ae.complete()))})))),ie=k.pipe(bt(Z=>new Pe(ae=>({unsubscribe:o.runOutsideAngular(()=>Z.onIdTokenChanged(pe=>ae.next(pe),pe=>ae.error(pe),()=>ae.complete()))}))));this.authState=F.pipe(Vf(q),Oi(a.outsideAngular),mi(a.insideAngular)),this.user=F.pipe(Vf(ie),Oi(a.outsideAngular),mi(a.insideAngular)),this.idToken=this.user.pipe(bt(Z=>Z?rt(Z.getIdToken()):he(null))),this.idTokenResult=this.user.pipe(bt(Z=>Z?rt(Z.getIdTokenResult()):he(null))),this.credential=Mu(F,M,this.authState.pipe(Lt(Z=>!Z))).pipe(ge(Z=>Z?.user?Z:null),Oi(a.outsideAngular),mi(a.insideAngular))}return RS(this,k,o,{spy:{apply:(F,q,ie)=>{(F.startsWith("signIn")||F.startsWith("createUser"))&&ie.then(Z=>M.next(Z))}}})}static \u0275fac=function(i){return new(i||t)(V(qc),V(Gc,8),V(Vn),V(_e),V(mm),V(c0,8),V(l0,8),V(u0,8),V(d0,8),V(h0,8),V(f0,8),V(Qs,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var VA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},BA={};var jo,m0;(function(){var t;function e(S,C){function D(){}D.prototype=C.prototype,S.D=C.prototype,S.prototype=new D,S.prototype.constructor=S,S.C=function(A,P,N){for(var T=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)T[Rt-2]=arguments[Rt];return C.prototype[P].apply(A,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,C,D){D||(D=0);var A=Array(16);if(typeof C=="string")for(var P=0;16>P;++P)A[P]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(P=0;16>P;++P)A[P]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=S.g[0],D=S.g[1],P=S.g[2];var N=S.g[3],T=C+(N^D&(P^N))+A[0]+3614090360&4294967295;C=D+(T<<7&4294967295|T>>>25),T=N+(P^C&(D^P))+A[1]+3905402710&4294967295,N=C+(T<<12&4294967295|T>>>20),T=P+(D^N&(C^D))+A[2]+606105819&4294967295,P=N+(T<<17&4294967295|T>>>15),T=D+(C^P&(N^C))+A[3]+3250441966&4294967295,D=P+(T<<22&4294967295|T>>>10),T=C+(N^D&(P^N))+A[4]+4118548399&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(P^C&(D^P))+A[5]+1200080426&4294967295,N=C+(T<<12&4294967295|T>>>20),T=P+(D^N&(C^D))+A[6]+2821735955&4294967295,P=N+(T<<17&4294967295|T>>>15),T=D+(C^P&(N^C))+A[7]+4249261313&4294967295,D=P+(T<<22&4294967295|T>>>10),T=C+(N^D&(P^N))+A[8]+1770035416&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(P^C&(D^P))+A[9]+2336552879&4294967295,N=C+(T<<12&4294967295|T>>>20),T=P+(D^N&(C^D))+A[10]+4294925233&4294967295,P=N+(T<<17&4294967295|T>>>15),T=D+(C^P&(N^C))+A[11]+2304563134&4294967295,D=P+(T<<22&4294967295|T>>>10),T=C+(N^D&(P^N))+A[12]+1804603682&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(P^C&(D^P))+A[13]+4254626195&4294967295,N=C+(T<<12&4294967295|T>>>20),T=P+(D^N&(C^D))+A[14]+2792965006&4294967295,P=N+(T<<17&4294967295|T>>>15),T=D+(C^P&(N^C))+A[15]+1236535329&4294967295,D=P+(T<<22&4294967295|T>>>10),T=C+(P^N&(D^P))+A[1]+4129170786&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^P&(C^D))+A[6]+3225465664&4294967295,N=C+(T<<9&4294967295|T>>>23),T=P+(C^D&(N^C))+A[11]+643717713&4294967295,P=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(P^N))+A[0]+3921069994&4294967295,D=P+(T<<20&4294967295|T>>>12),T=C+(P^N&(D^P))+A[5]+3593408605&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^P&(C^D))+A[10]+38016083&4294967295,N=C+(T<<9&4294967295|T>>>23),T=P+(C^D&(N^C))+A[15]+3634488961&4294967295,P=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(P^N))+A[4]+3889429448&4294967295,D=P+(T<<20&4294967295|T>>>12),T=C+(P^N&(D^P))+A[9]+568446438&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^P&(C^D))+A[14]+3275163606&4294967295,N=C+(T<<9&4294967295|T>>>23),T=P+(C^D&(N^C))+A[3]+4107603335&4294967295,P=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(P^N))+A[8]+1163531501&4294967295,D=P+(T<<20&4294967295|T>>>12),T=C+(P^N&(D^P))+A[13]+2850285829&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^P&(C^D))+A[2]+4243563512&4294967295,N=C+(T<<9&4294967295|T>>>23),T=P+(C^D&(N^C))+A[7]+1735328473&4294967295,P=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(P^N))+A[12]+2368359562&4294967295,D=P+(T<<20&4294967295|T>>>12),T=C+(D^P^N)+A[5]+4294588738&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^P)+A[8]+2272392833&4294967295,N=C+(T<<11&4294967295|T>>>21),T=P+(N^C^D)+A[11]+1839030562&4294967295,P=N+(T<<16&4294967295|T>>>16),T=D+(P^N^C)+A[14]+4259657740&4294967295,D=P+(T<<23&4294967295|T>>>9),T=C+(D^P^N)+A[1]+2763975236&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^P)+A[4]+1272893353&4294967295,N=C+(T<<11&4294967295|T>>>21),T=P+(N^C^D)+A[7]+4139469664&4294967295,P=N+(T<<16&4294967295|T>>>16),T=D+(P^N^C)+A[10]+3200236656&4294967295,D=P+(T<<23&4294967295|T>>>9),T=C+(D^P^N)+A[13]+681279174&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^P)+A[0]+3936430074&4294967295,N=C+(T<<11&4294967295|T>>>21),T=P+(N^C^D)+A[3]+3572445317&4294967295,P=N+(T<<16&4294967295|T>>>16),T=D+(P^N^C)+A[6]+76029189&4294967295,D=P+(T<<23&4294967295|T>>>9),T=C+(D^P^N)+A[9]+3654602809&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^P)+A[12]+3873151461&4294967295,N=C+(T<<11&4294967295|T>>>21),T=P+(N^C^D)+A[15]+530742520&4294967295,P=N+(T<<16&4294967295|T>>>16),T=D+(P^N^C)+A[2]+3299628645&4294967295,D=P+(T<<23&4294967295|T>>>9),T=C+(P^(D|~N))+A[0]+4096336452&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~P))+A[7]+1126891415&4294967295,N=C+(T<<10&4294967295|T>>>22),T=P+(C^(N|~D))+A[14]+2878612391&4294967295,P=N+(T<<15&4294967295|T>>>17),T=D+(N^(P|~C))+A[5]+4237533241&4294967295,D=P+(T<<21&4294967295|T>>>11),T=C+(P^(D|~N))+A[12]+1700485571&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~P))+A[3]+2399980690&4294967295,N=C+(T<<10&4294967295|T>>>22),T=P+(C^(N|~D))+A[10]+4293915773&4294967295,P=N+(T<<15&4294967295|T>>>17),T=D+(N^(P|~C))+A[1]+2240044497&4294967295,D=P+(T<<21&4294967295|T>>>11),T=C+(P^(D|~N))+A[8]+1873313359&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~P))+A[15]+4264355552&4294967295,N=C+(T<<10&4294967295|T>>>22),T=P+(C^(N|~D))+A[6]+2734768916&4294967295,P=N+(T<<15&4294967295|T>>>17),T=D+(N^(P|~C))+A[13]+1309151649&4294967295,D=P+(T<<21&4294967295|T>>>11),T=C+(P^(D|~N))+A[4]+4149444226&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~P))+A[11]+3174756917&4294967295,N=C+(T<<10&4294967295|T>>>22),T=P+(C^(N|~D))+A[2]+718787259&4294967295,P=N+(T<<15&4294967295|T>>>17),T=D+(N^(P|~C))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(P+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+N&4294967295}i.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var D=C-this.blockSize,A=this.B,P=this.h,N=0;N<C;){if(P==0)for(;N<=D;)r(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<C;)if(A[P++]=S.charCodeAt(N++),P==this.blockSize){r(this,A),P=0;break}}else for(;N<C;)if(A[P++]=S[N++],P==this.blockSize){r(this,A),P=0;break}}this.h=P,this.o+=C},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var D=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=D&255,D/=256;for(this.u(S),S=Array(16),C=D=0;4>C;++C)for(var A=0;32>A;A+=8)S[D++]=this.g[C]>>>A&255;return S};function o(S,C){var D=c;return Object.prototype.hasOwnProperty.call(D,S)?D[S]:D[S]=C(S)}function a(S,C){this.h=C;for(var D=[],A=!0,P=S.length-1;0<=P;P--){var N=S[P]|0;A&&N==C||(D[P]=N,A=!1)}this.g=D}var c={};function u(S){return-128<=S&&128>S?o(S,function(C){return new a([C|0],0>C?-1:0)}):new a([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return v;if(0>S)return F(f(-S));for(var C=[],D=1,A=0;S>=D;A++)C[A]=S/D|0,D*=4294967296;return new a(C,0)}function m(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return F(m(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(C,8)),A=v,P=0;P<S.length;P+=8){var N=Math.min(8,S.length-P),T=parseInt(S.substring(P,P+N),C);8>N?(N=f(Math.pow(C,N)),A=A.j(N).add(f(T))):(A=A.j(D),A=A.add(f(T)))}return A}var v=u(0),w=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-F(this).m();for(var S=0,C=1,D=0;D<this.g.length;D++){var A=this.i(D);S+=(0<=A?A:4294967296+A)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(k(this))return"-"+F(this).toString(S);for(var C=f(Math.pow(S,6)),D=this,A="";;){var P=ae(D,C).g;D=q(D,P.j(C));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(S);if(D=P,M(D))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=q(this,S),k(S)?-1:M(S)?0:1};function F(S){for(var C=S.g.length,D=[],A=0;A<C;A++)D[A]=~S.g[A];return new a(D,~S.h).add(w)}t.abs=function(){return k(this)?F(this):this},t.add=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0,P=0;P<=C;P++){var N=A+(this.i(P)&65535)+(S.i(P)&65535),T=(N>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);A=T>>>16,N&=65535,T&=65535,D[P]=T<<16|N}return new a(D,D[D.length-1]&-2147483648?-1:0)};function q(S,C){return S.add(F(C))}t.j=function(S){if(M(this)||M(S))return v;if(k(this))return k(S)?F(this).j(F(S)):F(F(this).j(S));if(k(S))return F(this.j(F(S)));if(0>this.l(E)&&0>S.l(E))return f(this.m()*S.m());for(var C=this.g.length+S.g.length,D=[],A=0;A<2*C;A++)D[A]=0;for(A=0;A<this.g.length;A++)for(var P=0;P<S.g.length;P++){var N=this.i(A)>>>16,T=this.i(A)&65535,Rt=S.i(P)>>>16,Ai=S.i(P)&65535;D[2*A+2*P]+=T*Ai,ie(D,2*A+2*P),D[2*A+2*P+1]+=N*Ai,ie(D,2*A+2*P+1),D[2*A+2*P+1]+=T*Rt,ie(D,2*A+2*P+1),D[2*A+2*P+2]+=N*Rt,ie(D,2*A+2*P+2)}for(A=0;A<C;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=C;A<2*C;A++)D[A]=0;return new a(D,0)};function ie(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function Z(S,C){this.g=S,this.h=C}function ae(S,C){if(M(C))throw Error("division by zero");if(M(S))return new Z(v,v);if(k(S))return C=ae(F(S),C),new Z(F(C.g),F(C.h));if(k(C))return C=ae(S,F(C)),new Z(F(C.g),C.h);if(30<S.g.length){if(k(S)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var D=w,A=C;0>=A.l(S);)D=pe(D),A=pe(A);var P=de(D,1),N=de(A,1);for(A=de(A,2),D=de(D,2);!M(A);){var T=N.add(A);0>=T.l(S)&&(P=P.add(D),N=T),A=de(A,1),D=de(D,1)}return C=q(S,P.j(C)),new Z(P,C)}for(P=v;0<=S.l(C);){for(D=Math.max(1,Math.floor(S.m()/C.m())),A=Math.ceil(Math.log(D)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=f(D),T=N.j(C);k(T)||0<T.l(S);)D-=A,N=f(D),T=N.j(C);M(N)&&(N=w),P=P.add(N),S=q(S,T)}return new Z(P,S)}t.A=function(S){return ae(this,S).h},t.and=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)&S.i(A);return new a(D,this.h&S.h)},t.or=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)|S.i(A);return new a(D,this.h|S.h)},t.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)^S.i(A);return new a(D,this.h^S.h)};function pe(S){for(var C=S.g.length+1,D=[],A=0;A<C;A++)D[A]=S.i(A)<<1|S.i(A-1)>>>31;return new a(D,S.h)}function de(S,C){var D=C>>5;C%=32;for(var A=S.g.length-D,P=[],N=0;N<A;N++)P[N]=0<C?S.i(N+D)>>>C|S.i(N+D+1)<<32-C:S.i(N+D);return new a(P,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,m0=BA.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,jo=BA.Integer=a}).apply(typeof VA<"u"?VA:typeof self<"u"?self:typeof window<"u"?window:{});var Am=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Xr={};var g0,_0,tl,v0,Fd,Mm,y0,b0,w0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Am=="object"&&Am];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var R=d[I];if(!(R in y))break e;y=y[R]}d=d[d.length-1],I=y[d],g=g(I),g!=I&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,I=!1,R={next:function(){if(!I&&y<d.length){var z=y++;return{value:g(z,d[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},c=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,y){return d.call.apply(d.bind,arguments)}function v(d,g,y){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,I),d.apply(g,R)}}return function(){return d.apply(g,arguments)}}function w(d,g,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,w.apply(null,arguments)}function E(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function M(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(I,R,z){for(var Y=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Y[Fe-2]=arguments[Fe];return g.prototype[R].apply(I,Y)}}function k(d){let g=d.length;if(0<g){let y=Array(g);for(let I=0;I<g;I++)y[I]=d[I];return y}return[]}function F(d,g){for(let y=1;y<arguments.length;y++){let I=arguments[y];if(u(I)){let R=d.length||0,z=I.length||0;d.length=R+z;for(let Y=0;Y<z;Y++)d[R+Y]=I[Y]}else d.push(I)}}class q{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ie(d){return/^[\s\xa0]*$/.test(d)}function Z(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function ae(d){return ae[" "](d),d}ae[" "]=function(){};var pe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function de(d,g,y){for(let I in d)g.call(y,d[I],I,d)}function S(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function C(d){let g={};for(let y in d)g[y]=d[y];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,g){let y,I;for(let R=1;R<arguments.length;R++){I=arguments[R];for(y in I)d[y]=I[y];for(let z=0;z<D.length;z++)y=D[z],Object.prototype.hasOwnProperty.call(I,y)&&(d[y]=I[y])}}function P(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function N(d){c.setTimeout(()=>{throw d},0)}function T(){var d=dt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Rt{constructor(){this.h=this.g=null}add(g,y){let I=Ai.get();I.set(g,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Ai=new q(()=>new Te,d=>d.reset());class Te{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let co,ye=!1,dt=new Rt,mn=()=>{let d=c.Promise.resolve(void 0);co=()=>{d.then(wn)}};var wn=()=>{for(var d;d=T();){try{d.h.call(d.g)}catch(y){N(y)}var g=Ai;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}ye=!1};function nt(){this.s=this.s,this.C=this.C}nt.prototype.s=!1,nt.prototype.ma=function(){this.s||(this.s=!0,this.N())},nt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return d}();function Sn(d,g){if(De.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(pe){e:{try{ae(g.nodeName);var R=!0;break e}catch{}R=!1}R||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Qi[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Sn.aa.h.call(this)}}M(Sn,De);var Qi={2:"touch",3:"pen",4:"mouse"};Sn.prototype.h=function(){Sn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var lo="closure_listenable_"+(1e6*Math.random()|0),$l=0;function Hl(d,g,y,I,R){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!I,this.ha=R,this.key=++$l,this.da=this.fa=!1}function Yi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function uo(d){this.src=d,this.g={},this.h=0}uo.prototype.add=function(d,g,y,I,R){var z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);var Y=Sa(d,g,I,R);return-1<Y?(g=d[Y],y||(g.fa=!1)):(g=new Hl(g,this.src,z,!!I,R),g.fa=y,d.push(g)),g};function ql(d,g){var y=g.type;if(y in d.g){var I=d.g[y],R=Array.prototype.indexOf.call(I,g,void 0),z;(z=0<=R)&&Array.prototype.splice.call(I,R,1),z&&(Yi(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function Sa(d,g,y,I){for(var R=0;R<d.length;++R){var z=d[R];if(!z.da&&z.listener==g&&z.capture==!!y&&z.ha==I)return R}return-1}var Aa="closure_lm_"+(1e6*Math.random()|0),ss={};function as(d,g,y,I,R){if(I&&I.once)return Ma(d,g,y,I,R);if(Array.isArray(g)){for(var z=0;z<g.length;z++)as(d,g[z],y,I,R);return null}return y=ka(y),d&&d[lo]?d.K(g,y,f(I)?!!I.capture:!!I,R):Dh(d,g,y,!1,I,R)}function Dh(d,g,y,I,R,z){if(!g)throw Error("Invalid event type");var Y=f(R)?!!R.capture:!!R,Fe=cs(d);if(Fe||(d[Aa]=Fe=new uo(d)),y=Fe.add(g,y,I,Y,z),y.proxy)return y;if(I=xh(),y.proxy=I,I.src=d,I.listener=y,d.addEventListener)$e||(R=Y),R===void 0&&(R=!1),d.addEventListener(g.toString(),I,R);else if(d.attachEvent)d.attachEvent(Th(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function xh(){function d(y){return g.call(d.src,d.listener,y)}let g=Xg;return d}function Ma(d,g,y,I,R){if(Array.isArray(g)){for(var z=0;z<g.length;z++)Ma(d,g[z],y,I,R);return null}return y=ka(y),d&&d[lo]?d.L(g,y,f(I)?!!I.capture:!!I,R):Dh(d,g,y,!0,I,R)}function Gl(d,g,y,I,R){if(Array.isArray(g))for(var z=0;z<g.length;z++)Gl(d,g[z],y,I,R);else I=f(I)?!!I.capture:!!I,y=ka(y),d&&d[lo]?(d=d.i,g=String(g).toString(),g in d.g&&(z=d.g[g],y=Sa(z,y,I,R),-1<y&&(Yi(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete d.g[g],d.h--)))):d&&(d=cs(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Sa(g,y,I,R)),(y=-1<d?g[d]:null)&&Pa(y))}function Pa(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[lo])ql(g.i,d);else{var y=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(y,I,d.capture):g.detachEvent?g.detachEvent(Th(y),I):g.addListener&&g.removeListener&&g.removeListener(I),(y=cs(g))?(ql(y,d),y.h==0&&(y.src=null,g[Aa]=null)):Yi(d)}}}function Th(d){return d in ss?ss[d]:ss[d]="on"+d}function Xg(d,g){if(d.da)d=!0;else{g=new Sn(g,this);var y=d.listener,I=d.ha||d.src;d.fa&&Pa(d),d=y.call(I,g)}return d}function cs(d){return d=d[Aa],d instanceof uo?d:null}var Ra="__closure_events_fn_"+(1e9*Math.random()>>>0);function ka(d){return typeof d=="function"?d:(d[Ra]||(d[Ra]=function(g){return d.handleEvent(g)}),d[Ra])}function on(){nt.call(this),this.i=new uo(this),this.M=this,this.F=null}M(on,nt),on.prototype[lo]=!0,on.prototype.removeEventListener=function(d,g,y,I){Gl(this,d,g,y,I)};function sn(d,g){var y,I=d.F;if(I)for(y=[];I;I=I.F)y.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new De(g,d);else if(g instanceof De)g.target=g.target||d;else{var R=g;g=new De(I,d),A(g,R)}if(R=!0,y)for(var z=y.length-1;0<=z;z--){var Y=g.g=y[z];R=ls(Y,I,!0,g)&&R}if(Y=g.g=d,R=ls(Y,I,!0,g)&&R,R=ls(Y,I,!1,g)&&R,y)for(z=0;z<y.length;z++)Y=g.g=y[z],R=ls(Y,I,!1,g)&&R}on.prototype.N=function(){if(on.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],I=0;I<y.length;I++)Yi(y[I]);delete d.g[g],d.h--}}this.F=null},on.prototype.K=function(d,g,y,I){return this.i.add(String(d),g,!1,y,I)},on.prototype.L=function(d,g,y,I){return this.i.add(String(d),g,!0,y,I)};function ls(d,g,y,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var R=!0,z=0;z<g.length;++z){var Y=g[z];if(Y&&!Y.da&&Y.capture==y){var Fe=Y.listener,Tt=Y.ha||Y.src;Y.fa&&ql(d.i,Y),R=Fe.call(Tt,I)!==!1&&R}}return R&&!I.defaultPrevented}function Sh(d,g,y){if(typeof d=="function")y&&(d=w(d,y));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function Wl(d){d.g=Sh(()=>{d.g=null,d.i&&(d.i=!1,Wl(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class Zl extends nt{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Wl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ho(d){nt.call(this),this.h=d,this.g={}}M(ho,nt);var Ah=[];function fo(d){de(d.g,function(g,y){this.g.hasOwnProperty(y)&&Pa(g)},d),d.g={}}ho.prototype.N=function(){ho.aa.N.call(this),fo(this)},ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kl=c.JSON.stringify,Jg=c.JSON.parse,Mh=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Na(){}Na.prototype.h=null;function Ql(d){return d.h||(d.h=d.i())}function Ph(){}var us={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yl(){De.call(this,"d")}M(Yl,De);function Xl(){De.call(this,"c")}M(Xl,De);var Mr={},Rh=null;function po(){return Rh=Rh||new on}Mr.La="serverreachability";function kh(d){De.call(this,Mr.La,d)}M(kh,De);function ds(d){let g=po();sn(g,new kh(g))}Mr.STAT_EVENT="statevent";function Nh(d,g){De.call(this,Mr.STAT_EVENT,d),this.stat=g}M(Nh,De);function gn(d){let g=po();sn(g,new Nh(g,d))}Mr.Ma="timingevent";function Xn(d,g){De.call(this,Mr.Ma,d),this.size=g}M(Xn,De);function ce(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function mo(){this.g=!0}mo.prototype.xa=function(){this.g=!1};function Oh(d,g,y,I,R,z){d.info(function(){if(d.g)if(z)for(var Y="",Fe=z.split("&"),Tt=0;Tt<Fe.length;Tt++){var Ze=Fe[Tt].split("=");if(1<Ze.length){var _t=Ze[0];Ze=Ze[1];var an=_t.split("_");Y=2<=an.length&&an[1]=="type"?Y+(_t+"="+Ze+"&"):Y+(_t+"=redacted&")}}else Y=null;else Y=z;return"XMLHTTP REQ ("+I+") [attempt "+R+"]: "+g+`
`+y+`
`+Y})}function Lh(d,g,y,I,R,z,Y){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+R+"]: "+g+`
`+y+`
`+z+" "+Y})}function Pr(d,g,y,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Fh(d,y)+(I?" "+I:"")})}function Jl(d,g){d.info(function(){return"TIMEOUT: "+g})}mo.prototype.info=function(){};function Fh(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var I=y[d];if(!(2>I.length)){var R=I[1];if(Array.isArray(R)&&!(1>R.length)){var z=R[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Y=1;Y<R.length;Y++)R[Y]=""}}}}return Kl(y)}catch{return g}}var Mi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},eu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tu;function Oa(){}M(Oa,Na),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},tu=new Oa;function Xi(d,g,y,I){this.j=d,this.i=g,this.l=y,this.R=I||1,this.U=new ho(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Vh}function Vh(){this.i=null,this.g="",this.h=!1}var nu={},iu={};function go(d,g,y){d.L=1,d.v=vo(_n(g)),d.m=y,d.P=!0,Bh(d,null)}function Bh(d,g){d.F=Date.now(),La(d),d.A=_n(d.v);var y=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),it(y.i,"t",I),d.C=0,y=d.j.J,d.h=new Vh,d.g=Es(d.j,y?g:null,!d.m),0<d.O&&(d.M=new Zl(w(d.Y,d,d.g),d.O)),g=d.U,y=d.g,I=d.ca;var R="readystatechange";Array.isArray(R)||(R&&(Ah[0]=R.toString()),R=Ah);for(var z=0;z<R.length;z++){var Y=as(y,R[z],I||g.handleEvent,!1,g.h||g);if(!Y)break;g.g[Y.key]=Y}g=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ds(),Oh(d.i,d.u,d.A,d.l,d.R,d.m)}Xi.prototype.ca=function(d){d=d.target;let g=this.M;g&&ei(d)==3?g.j():this.Y(d)},Xi.prototype.Y=function(d){try{if(d==this.g)e:{let an=ei(this.g);var g=this.g.Ba();let ni=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||Gh(this.g)))){this.J||an!=4||g==7||(g==8||0>=ni?ds(3):ds(2)),hs(this);var y=this.g.Z();this.X=y;t:if(jh(this)){var I=Gh(this.g);d="";var R=I.length,z=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ji(this),Pi(this);var Y="";break t}this.h.i=new c.TextDecoder}for(g=0;g<R;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!(z&&g==R-1)});I.length=0,this.h.g+=d,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=y==200,Lh(this.i,this.u,this.A,this.l,this.R,an,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Tt=this.g;if((Fe=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Fe)){var Ze=Fe;break t}}Ze=null}if(y=Ze)Pr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fa(this,y);else{this.o=!1,this.s=3,gn(12),Ji(this),Pi(this);break e}}if(this.P){y=!0;let ii;for(;!this.J&&this.C<Y.length;)if(ii=e_(this,Y),ii==iu){an==4&&(this.s=4,gn(14),y=!1),Pr(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==nu){this.s=4,gn(15),Pr(this.i,this.l,Y,"[Invalid Chunk]"),y=!1;break}else Pr(this.i,this.l,ii,null),Fa(this,ii);if(jh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||Y.length!=0||this.h.h||(this.s=1,gn(16),y=!1),this.o=this.o&&y,!y)Pr(this.i,this.l,Y,"[Invalid Chunked Response]"),Ji(this),Pi(this);else if(0<Y.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),$a(_t),_t.M=!0,gn(11))}}else Pr(this.i,this.l,Y,null),Fa(this,Y);an==4&&Ji(this),this.o&&!this.J&&(an==4?Qh(this.j,this):(this.o=!1,La(this)))}else Wh(this.g),y==400&&0<Y.indexOf("Unknown SID")?(this.s=3,gn(12)):(this.s=0,gn(13)),Ji(this),Pi(this)}}}catch{}finally{}};function jh(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function e_(d,g){var y=d.C,I=g.indexOf(`
`,y);return I==-1?iu:(y=Number(g.substring(y,I)),isNaN(y)?nu:(I+=1,I+y>g.length?iu:(g=g.slice(I,I+y),d.C=I+y,g)))}Xi.prototype.cancel=function(){this.J=!0,Ji(this)};function La(d){d.S=Date.now()+d.I,zh(d,d.I)}function zh(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ce(w(d.ba,d),g)}function hs(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Xi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Jl(this.i,this.A),this.L!=2&&(ds(),gn(17)),Ji(this),this.s=2,Pi(this)):zh(this,this.S-d)};function Pi(d){d.j.G==0||d.J||Qh(d.j,d)}function Ji(d){hs(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,fo(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Fa(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||er(y.h,d))){if(!d.K&&er(y.h,d)&&y.G==3){try{var I=y.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var R=I;if(R[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)Ha(y),ja(y);else break e;mu(y),gn(18)}}else y.za=R[1],0<y.za-y.T&&37500>R[2]&&y.F&&y.v==0&&!y.C&&(y.C=ce(w(y.Za,y),6e3));if(1>=ps(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Or(y,11)}else if((d.K||y.g==d)&&Ha(y),!ie(g))for(R=y.Da.g.parse(g),g=0;g<R.length;g++){let Ze=R[g];if(y.T=Ze[0],Ze=Ze[1],y.G==2)if(Ze[0]=="c"){y.K=Ze[1],y.ia=Ze[2];let _t=Ze[3];_t!=null&&(y.la=_t,y.j.info("VER="+y.la));let an=Ze[4];an!=null&&(y.Aa=an,y.j.info("SVER="+y.Aa));let ni=Ze[5];ni!=null&&typeof ni=="number"&&0<ni&&(I=1.5*ni,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;let ii=d.g;if(ii){let rr=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rr){var z=I.h;z.g||rr.indexOf("spdy")==-1&&rr.indexOf("quic")==-1&&rr.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(tr(z,z.h),z.h=null))}if(I.D){let Wa=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(I.ya=Wa,et(I.I,I.D,Wa))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var Y=d;if(I.qa=vu(I,I.J?I.ia:null,I.W),Y.K){Va(I.h,Y);var Fe=Y,Tt=I.L;Tt&&(Fe.I=Tt),Fe.B&&(hs(Fe),La(Fe)),I.g=Y}else Ua(I);0<y.i.length&&za(y)}else Ze[0]!="stop"&&Ze[0]!="close"||Or(y,7);else y.G==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?Or(y,7):Is(y):Ze[0]!="noop"&&y.l&&y.l.ta(Ze),y.v=0)}}ds(4)}catch{}}var fs=class{constructor(d,g){this.g=d,this.map=g}};function We(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ps(d){return d.h?1:d.g?d.g.size:0}function er(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function tr(d,g){d.g?d.g.add(g):d.h=g}function Va(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}We.prototype.cancel=function(){if(this.i=Me(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Me(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return k(d.i)}function kt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,I=0;I<y;I++)g.push(d[I]);return g}g=[],y=0;for(I in d)g[y++]=d[I];return g}function ru(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let I in d)g[y++]=I;return g}}}function ms(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=ru(d),I=kt(d),R=I.length,z=0;z<R;z++)g.call(void 0,I[z],y&&y[z],d)}var An=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function t_(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var I=d[y].indexOf("="),R=null;if(0<=I){var z=d[y].substring(0,I);R=d[y].substring(I+1)}else z=d[y];g(z,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function di(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof di){this.h=d.h,It(this,d.j),this.o=d.o,this.g=d.g,hi(this,d.s),this.l=d.l;var g=d.i,y=new kr;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),_o(this,y),this.m=d.m}else d&&(g=String(d).match(An))?(this.h=!1,It(this,g[1]||"",!0),this.o=Ri(g[2]||""),this.g=Ri(g[3]||"",!0),hi(this,g[4]),this.l=Ri(g[5]||"",!0),_o(this,g[6]||"",!0),this.m=Ri(g[7]||"")):(this.h=!1,this.i=new kr(null,this.h))}di.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Rr(g,gs,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Rr(g,gs,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Rr(y,y.charAt(0)=="/"?au:su,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Rr(y,Uh)),d.join("")};function _n(d){return new di(d)}function It(d,g,y){d.j=y?Ri(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function hi(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function _o(d,g,y){g instanceof kr?(d.i=g,cu(d.i,d.h)):(y||(g=Rr(g,Ba)),d.i=new kr(g,d.h))}function et(d,g,y){d.i.set(g,y)}function vo(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ri(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Rr(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,ou),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ou(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var gs=/[#\/\?@]/g,su=/[#\?:]/g,au=/[#\?]/g,Ba=/[#\?@]/g,Uh=/#/g;function kr(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function nr(d){d.g||(d.g=new Map,d.h=0,d.i&&t_(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=kr.prototype,t.add=function(d,g){nr(this),this.i=null,d=Nr(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function xe(d,g){nr(d),g=Nr(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Jn(d,g){return nr(d),g=Nr(d,g),d.g.has(g)}t.forEach=function(d,g){nr(this),this.g.forEach(function(y,I){y.forEach(function(R){d.call(g,R,I,this)},this)},this)},t.na=function(){nr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let I=0;I<g.length;I++){let R=d[I];for(let z=0;z<R.length;z++)y.push(g[I])}return y},t.V=function(d){nr(this);let g=[];if(typeof d=="string")Jn(this,d)&&(g=g.concat(this.g.get(Nr(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return nr(this),this.i=null,d=Nr(this,d),Jn(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function it(d,g,y){xe(d,g),0<y.length&&(d.i=null,d.g.set(Nr(d,g),k(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var I=g[y];let z=encodeURIComponent(String(I)),Y=this.V(I);for(I=0;I<Y.length;I++){var R=z;Y[I]!==""&&(R+="="+encodeURIComponent(String(Y[I]))),d.push(R)}}return this.i=d.join("&")};function Nr(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function cu(d,g){g&&!d.j&&(nr(d),d.i=null,d.g.forEach(function(y,I){var R=I.toLowerCase();I!=R&&(xe(this,I),it(this,R,y))},d)),d.j=g}function lu(d,g){let y=new mo;if(c.Image){let I=new Image;I.onload=E(In,y,"TestLoadImage: loaded",!0,g,I),I.onerror=E(In,y,"TestLoadImage: error",!1,g,I),I.onabort=E(In,y,"TestLoadImage: abort",!1,g,I),I.ontimeout=E(In,y,"TestLoadImage: timeout",!1,g,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function uu(d,g){let y=new mo,I=new AbortController,R=setTimeout(()=>{I.abort(),In(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(z=>{clearTimeout(R),z.ok?In(y,"TestPingServer: ok",!0,g):In(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(R),In(y,"TestPingServer: error",!1,g)})}function In(d,g,y,I,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),I(y)}catch{}}function du(){this.g=new Mh}function _s(d,g,y){let I=y||"";try{ms(d,function(R,z){let Y=R;f(R)&&(Y=Kl(R)),g.push(I+z+"="+encodeURIComponent(Y))})}catch(R){throw g.push(I+"type="+encodeURIComponent("_badmap")),R}}function Nt(d){this.l=d.Ub||null,this.j=d.eb||!1}M(Nt,Na),Nt.prototype.g=function(){return new fi(this.l,this.j)},Nt.prototype.i=function(d){return function(){return d}}({});function fi(d,g){on.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(fi,on),t=fi.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,vs(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yo(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,vs(this)),this.g&&(this.readyState=3,vs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;hu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function hu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?yo(this):vs(this),this.readyState==3&&hu(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,yo(this))},t.Qa=function(d){this.g&&(this.response=d,yo(this))},t.ga=function(){this.g&&yo(this)};function yo(d){d.readyState=4,d.l=null,d.j=null,d.v=null,vs(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function vs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(fi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function fu(d){let g="";return de(d,function(y,I){g+=I,g+=":",g+=y,g+=`\r
`}),g}function ys(d,g,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=fu(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):et(d,g,y))}function xt(d){on.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(xt,on);var $h=/^https?$/i,He=["POST","PUT"];t=xt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tu.g(),this.v=this.o?Ql(this.o):Ql(tu),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(z){Hh(this,z);return}if(d=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var R in I)y.set(R,I[R]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let z of I.keys())y.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),R=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(He,g,void 0))||I||R||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[z,Y]of y)this.g.setRequestHeader(z,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qh(this),this.u=!0,this.g.send(d),this.u=!1}catch(z){Hh(this,z)}};function Hh(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,$n(d),bs(d)}function $n(d){d.A||(d.A=!0,sn(d,"complete"),sn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,sn(this,"complete"),sn(this,"abort"),bs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bs(this,!0)),xt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bo(this):this.bb())},t.bb=function(){bo(this)};function bo(d){if(d.h&&typeof a<"u"&&(!d.v[1]||ei(d)!=4||d.Z()!=2)){if(d.u&&ei(d)==4)Sh(d.Ea,0,d);else if(sn(d,"readystatechange"),ei(d)==4){d.h=!1;try{let Y=d.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var I;if(I=Y===0){var R=String(d.D).match(An)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),I=!$h.test(R?R.toLowerCase():"")}y=I}if(y)sn(d,"complete"),sn(d,"success");else{d.m=6;try{var z=2<ei(d)?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.Z()+"]",$n(d)}}finally{bs(d)}}}}function bs(d,g){if(d.g){qh(d);let y=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||sn(d,"ready");try{y.onreadystatechange=I}catch{}}}function qh(d){d.I&&(c.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ei(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Jg(g)}};function Gh(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Wh(d){let g={};d=(d.g&&2<=ei(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(ie(d[I]))continue;var y=P(d[I]);let R=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let z=g[R]||[];g[R]=z,z.push(y)}S(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ws(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Zh(d){this.Aa=0,this.i=[],this.j=new mo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ws("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ws("baseRetryDelayMs",5e3,d),this.cb=ws("retryDelaySeedMs",1e4,d),this.Wa=ws("forwardChannelMaxRetries",2,d),this.wa=ws("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new We(d&&d.concurrentRequestLimit),this.Da=new du,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Zh.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,I){gn(0),this.W=d,this.H=g||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=vu(this,null,this.W),za(this)};function Is(d){if(ti(d),d.G==3){var g=d.U++,y=_n(d.I);if(et(y,"SID",d.K),et(y,"RID",g),et(y,"TYPE","terminate"),wo(d,y),g=new Xi(d,d.j,g),g.L=2,g.v=vo(_n(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=Es(g.j,null),g.g.ea(g.v)),g.F=Date.now(),La(g)}_u(d)}function ja(d){d.g&&($a(d),d.g.cancel(),d.g=null)}function ti(d){ja(d),d.u&&(c.clearTimeout(d.u),d.u=null),Ha(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function za(d){if(!gt(d.h)&&!d.s){d.s=!0;var g=d.Ga;co||mn(),ye||(co(),ye=!0),dt.add(g,d),d.B=0}}function Kh(d,g){return ps(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ce(w(d.Ga,d,g),qa(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let R=new Xi(this,this.j,d),z=this.o;if(this.S&&(z?(z=C(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(R.H=z,z=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=pu(this,R,g),y=_n(this.I),et(y,"RID",d),et(y,"CVER",22),this.D&&et(y,"X-HTTP-Session-Id",this.D),wo(this,y),z&&(this.O?g="headers="+encodeURIComponent(String(fu(z)))+"&"+g:this.m&&ys(y,this.m,z)),tr(this.h,R),this.Ua&&et(y,"TYPE","init"),this.P?(et(y,"$req",g),et(y,"SID","null"),R.T=!0,go(R,y,null)):go(R,y,g),this.G=2}}else this.G==3&&(d?ki(this,d):this.i.length==0||gt(this.h)||ki(this))};function ki(d,g){var y;g?y=g.l:y=d.U++;let I=_n(d.I);et(I,"SID",d.K),et(I,"RID",y),et(I,"AID",d.T),wo(d,I),d.m&&d.o&&ys(I,d.m,d.o),y=new Xi(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=pu(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),tr(d.h,y),go(y,I,g)}function wo(d,g){d.H&&de(d.H,function(y,I){et(g,I,y)}),d.l&&ms({},function(y,I){et(g,I,y)})}function pu(d,g,y){y=Math.min(d.i.length,y);var I=d.l?w(d.l.Na,d.l,d):null;e:{var R=d.i;let z=-1;for(;;){let Y=["count="+y];z==-1?0<y?(z=R[0].g,Y.push("ofs="+z)):z=0:Y.push("ofs="+z);let Fe=!0;for(let Tt=0;Tt<y;Tt++){let Ze=R[Tt].g,_t=R[Tt].map;if(Ze-=z,0>Ze)z=Math.max(0,R[Tt].g-100),Fe=!1;else try{_s(_t,Y,"req"+Ze+"_")}catch{I&&I(_t)}}if(Fe){I=Y.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,I}function Ua(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;co||mn(),ye||(co(),ye=!0),dt.add(g,d),d.v=0}}function mu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ce(w(d.Fa,d),qa(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ce(w(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gn(10),ja(this),gu(this))};function $a(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function gu(d){d.g=new Xi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=_n(d.qa);et(g,"RID","rpc"),et(g,"SID",d.K),et(g,"AID",d.T),et(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(g,"TO",d.ja),et(g,"TYPE","xmlhttp"),wo(d,g),d.m&&d.o&&ys(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=vo(_n(g)),y.m=null,y.P=!0,Bh(y,d)}t.Za=function(){this.C!=null&&(this.C=null,ja(this),mu(this),gn(19))};function Ha(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Qh(d,g){var y=null;if(d.g==g){Ha(d),$a(d),d.g=null;var I=2}else if(er(d.h,g))y=g.D,Va(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var R=d.B;I=po(),sn(I,new Xn(I,y)),za(d)}else Ua(d);else if(R=g.s,R==3||R==0&&0<g.X||!(I==1&&Kh(d,g)||I==2&&mu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),R){case 1:Or(d,5);break;case 4:Or(d,10);break;case 3:Or(d,6);break;default:Or(d,2)}}}function qa(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function Or(d,g){if(d.j.info("Error code "+g),g==2){var y=w(d.fb,d),I=d.Xa;let R=!I;I=new di(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||It(I,"https"),vo(I),R?lu(I.toString(),y):uu(I.toString(),y)}else gn(2);d.G=0,d.l&&d.l.sa(g),_u(d),ti(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),gn(2)):(this.j.info("Failed to ping google.com"),gn(1))};function _u(d){if(d.G=0,d.ka=[],d.l){let g=Me(d.h);(g.length!=0||d.i.length!=0)&&(F(d.ka,g),F(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function vu(d,g,y){var I=y instanceof di?_n(y):new di(y);if(I.g!="")g&&(I.g=g+"."+I.g),hi(I,I.s);else{var R=c.location;I=R.protocol,g=g?g+"."+R.hostname:R.hostname,R=+R.port;var z=new di(null);I&&It(z,I),g&&(z.g=g),R&&hi(z,R),y&&(z.l=y),I=z}return y=d.D,g=d.ya,y&&g&&et(I,y,g),et(I,"VER",d.la),wo(d,I),I}function Es(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new xt(new Nt({eb:y})):new xt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ir(){}t=ir.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ga(){}Ga.prototype.g=function(d,g){return new en(d,g)};function en(d,g){on.call(this),this.g=new Zh(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!ie(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ie(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Lr(this)}M(en,on),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){Is(this.g)},en.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Kl(d),d=y);g.i.push(new fs(g.Ya++,d)),g.G==3&&za(g)},en.prototype.N=function(){this.g.l=null,delete this.j,Is(this.g),delete this.g,en.aa.N.call(this)};function Mn(d){Yl.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}M(Mn,Yl);function yu(){Xl.call(this),this.status=1}M(yu,Xl);function Lr(d){this.g=d}M(Lr,ir),Lr.prototype.ua=function(){sn(this.g,"a")},Lr.prototype.ta=function(d){sn(this.g,new Mn(d))},Lr.prototype.sa=function(d){sn(this.g,new yu)},Lr.prototype.ra=function(){sn(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,w0=Xr.createWebChannelTransport=function(){return new Ga},b0=Xr.getStatEventTarget=function(){return po()},y0=Xr.Event=Mr,Mm=Xr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mi.NO_ERROR=0,Mi.TIMEOUT=8,Mi.HTTP_ERROR=6,Fd=Xr.ErrorCode=Mi,eu.COMPLETE="complete",v0=Xr.EventType=eu,Ph.EventType=us,us.OPEN="a",us.CLOSE="b",us.ERROR="c",us.MESSAGE="d",on.prototype.listen=on.prototype.K,tl=Xr.WebChannel=Ph,_0=Xr.FetchXmlHttpFactory=Nt,xt.prototype.listenOnce=xt.prototype.L,xt.prototype.getLastError=xt.prototype.Ka,xt.prototype.getLastErrorCode=xt.prototype.Ba,xt.prototype.getStatus=xt.prototype.Z,xt.prototype.getResponseJson=xt.prototype.Oa,xt.prototype.getResponseText=xt.prototype.oa,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Ha,g0=Xr.XhrIo=xt}).apply(typeof Am<"u"?Am:typeof self<"u"?self:typeof window<"u"?window:{});var jA="@firebase/firestore";var Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");var Rl="10.12.1";var Wo=new df("@firebase/firestore");function sl(){return Wo.logLevel}function jM(t){Wo.setLogLevel(t)}function W(t,...e){if(Wo.logLevel<=sr.DEBUG){let n=e.map(CI);Wo.debug(`Firestore (${Rl}): ${t}`,...n)}}function Ht(t,...e){if(Wo.logLevel<=sr.ERROR){let n=e.map(CI);Wo.error(`Firestore (${Rl}): ${t}`,...n)}}function xi(t,...e){if(Wo.logLevel<=sr.WARN){let n=e.map(CI);Wo.warn(`Firestore (${Rl}): ${t}`,...n)}}function CI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function oe(t="Unexpected state"){let e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+t;throw Ht(e),new Error(e)}function ue(t,e){t||oe()}function zM(t,e){t||oe()}function ne(t,e){return t}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends HE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var zm=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},x0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}},T0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},S0=class{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve(),o=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xt,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>U(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xt)}},0),a()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ue(typeof i.accessToken=="string"),new zm(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ue(e===null||typeof e=="string"),new Yt(e)}},A0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},M0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new A0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},P0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},R0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ue(typeof n.token=="string"),this.R=n.token,new P0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function iU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Um=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=iU(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function Ne(t,e){return t<e?-1:t>e?1:0}function ml(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function UM(t){return t+"\0"}var Ft=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ft(0,0))}static max(){return new t(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $m=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&oe(),i===void 0?i=e.length-n:i>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ye=class t extends $m{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new H($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},rU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qt=class t extends $m{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return rU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new H($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},a=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new H($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new H($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var te=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ye.fromString(e))}static fromName(e){return new t(Ye.fromString(e).popFirst(5))}static empty(){return new t(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ye(e.slice()))}};var gl=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function k0(t){return t.fields.find(e=>e.kind===2)}function ia(t){return t.fields.filter(e=>e.kind!==2)}gl.UNKNOWN_ID=-1;var hl=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Kd=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ti.min())}};function $M(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=fe.fromTimestamp(i===1e9?new Ft(n+1,0):new Ft(n,i));return new Ti(r,te.empty(),e)}function HM(t){return new Ti(t.readTime,t.key,-1)}var Ti=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(fe.min(),te.empty(),-1)}static max(){return new t(fe.max(),te.empty(),-1)}};function DI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}var qM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Hm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function is(t){return U(this,null,function*(){if(t.code!==$.FAILED_PRECONDITION||t.message!==qM)throw t;W("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},u=>i(u))}),a=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,a=new Array(o),c=0;for(let u=0;u<o;u++){let f=u;n(e[f]).next(m=>{a[f]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var qm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new la(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=xI(i.target.error);this.V.reject(new la(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new la(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new O0(n)}},Zo=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Eu())===12.2&&Ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),ra(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!uf())return!1;if(t.C())return!0;let e=Eu(),n=t.S(e),i=0<n&&n<10,r=GM(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return U(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let a=o.target.result;n(a)},r.onblocked=()=>{i(new la(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let a=o.target.error;a.name==="VersionError"?i(new H($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new H($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new la(e,a))},r.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let a=o.target.result;this.p.O(a,r.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return U(this,null,function*(){let o=n==="readonly",a=0;for(;;){++a;try{this.db=yield this.M(e);let c=qm.open(this.db,e,o?"readonly":"readwrite",i),u=r(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),B.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){let u=c,f=u.name!=="FirebaseError"&&a<3;if(W("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),this.close(),!f)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function GM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var N0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ra(this.B.delete())}},la=class extends H{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function rs(t){return t.name==="IndexedDbTransactionError"}var O0=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ra(i)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),ra(this.store.add(e))}get(e){return ra(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),ra(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),ra(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new B((a,c)=>{o.onerror=u=>{c(u.target.error)},o.onsuccess=u=>{a(u.target.result)}})}{let o=this.cursor(i),a=[];return this.W(o,(c,u)=>{a.push(u)}).next(()=>a)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new B((r,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,a,c)=>c.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new B((i,r)=>{n.onerror=o=>{let a=xI(o.target.error);r(a)},n.onsuccess=o=>{let a=o.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():i()}):i()}})}W(e,n){let i=[];return new B((r,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{let c=a.target.result;if(!c)return void r();let u=new N0(c),f=n(c.primaryKey,c.value,u);if(f instanceof B){let m=f.catch(v=>(u.done(),B.reject(v)));i.push(m)}u.isDone?r():u.K===null?c.continue():c.continue(u.K)}}).next(()=>B.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ra(t){return new B((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=xI(i.target.error);n(r)}})}var zA=!1;function xI(t){let e=Zo.S(Eu());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zA||(zA=!0,setTimeout(()=>{throw i},0)),i}}return t}var L0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>U(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){rs(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield is(n)}yield this.X(6e4)}))}},F0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return U(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return B.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return W("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,r).next(c=>{r-=c,i.add(a)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(r,o)).next(c=>(W("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>a.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let a=HM(o);DI(a,i)>0&&(i=a)}),new Ti(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var li=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function _h(t){return t==null}function Qd(t){return t===0&&1/t==-1/0}function WM(t){return typeof t=="number"&&Number.isInteger(t)&&!Qd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function jn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=UA(e)),e=oU(t.get(n),e);return UA(e)}function oU(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function UA(t){return t+""}function br(t){let e=t.length;if(ue(e>=2),e===2)return ue(t.charAt(0)===""&&t.charAt(1)===""),Ye.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let a=t.indexOf("",o);switch((a<0||a>n)&&oe(),t.charAt(a+1)){case"":let c=t.substring(o,a),u;r.length===0?u=c:(r+=c,u=r,r=""),i.push(u);break;case"":r+=t.substring(o,a),r+="\0";break;case"":r+=t.substring(o,a+1);break;default:oe()}o=a+2}return new Ye(i)}var $A=["userId","batchId"];function Om(t,e){return[t,jn(e)]}function ZM(t,e,n){return[t,jn(e),n]}var sU={},aU=["prefixPath","collectionGroup","readTime","documentId"],cU=["prefixPath","collectionGroup","documentId"],lU=["collectionGroup","readTime","prefixPath","documentId"],uU=["canonicalId","targetId"],dU=["targetId","path"],hU=["path","targetId"],fU=["collectionId","parent"],pU=["indexId","uid"],mU=["uid","sequenceNumber"],gU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_U=["indexId","uid","orderedDocumentKey"],vU=["userId","collectionPath","documentId"],yU=["userId","collectionPath","largestBatchId"],bU=["userId","collectionGroup","largestBatchId"],KM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wU=[...KM,"documentOverlays"],QM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],YM=QM,XM=[...YM,"indexConfiguration","indexState","indexEntries"],IU=XM;var Yd=class extends Hm{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function pn(t,e){let n=ne(t);return Zo.F(n._e,e)}function HA(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function wa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Dt=class t{constructor(e,n){this.comparator=e,this.root=n||Ir.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ir.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ir.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dl(this.root,e,this.comparator,!0)}},dl=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ir=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();let e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}};Ir.EMPTY=null,Ir.RED=!0,Ir.BLACK=!1;Ir.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Ir(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var mt=class t{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gm(this.data.getIterator())}getIteratorFrom(e){return new Gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Gm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function nl(t){return t.hasNext()?t.getNext():void 0}var ui=class t{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new t([])}unionWith(e){let n=new mt(qt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Wm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function eP(){return typeof atob<"u"}var fn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wm("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};fn.EMPTY_BYTE_STRING=new fn("");var EU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function to(t){if(ue(!!t),typeof t=="string"){let e=0,n=EU.exec(t);if(ue(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bt(t.seconds),nanos:Bt(t.nanos)}}function Bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ko(t){return typeof t=="string"?fn.fromBase64String(t):fn.fromUint8Array(t)}function Fg(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function TI(t){let e=t.mapValue.fields.__previous_value__;return Fg(e)?TI(e):e}function Xd(t){let e=to(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}var V0=class{constructor(e,n,i,r,o,a,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f}},Qo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lm={nullValue:"NULL_VALUE"};function ua(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fg(t)?4:tP(t)?9007199254740991:10:oe()}function Dr(t,e){if(t===e)return!0;let n=ua(t);if(n!==ua(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xd(t).isEqual(Xd(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=to(r.timestampValue),c=to(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Ko(r.bytesValue).isEqual(Ko(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Bt(r.geoPointValue.latitude)===Bt(o.geoPointValue.latitude)&&Bt(r.geoPointValue.longitude)===Bt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Bt(r.integerValue)===Bt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=Bt(r.doubleValue),c=Bt(o.doubleValue);return a===c?Qd(a)===Qd(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return ml(t.arrayValue.values||[],e.arrayValue.values||[],Dr);case 10:return function(r,o){let a=r.mapValue.fields||{},c=o.mapValue.fields||{};if(HA(a)!==HA(c))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Dr(a[u],c[u])))return!1;return!0}(t,e);default:return oe()}}function Jd(t,e){return(t.values||[]).find(n=>Dr(n,e))!==void 0}function Yo(t,e){if(t===e)return 0;let n=ua(t),i=ua(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,a){let c=Bt(o.integerValue||o.doubleValue),u=Bt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return qA(t.timestampValue,e.timestampValue);case 4:return qA(Xd(t),Xd(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(o,a){let c=Ko(o),u=Ko(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){let c=o.split("/"),u=a.split("/");for(let f=0;f<c.length&&f<u.length;f++){let m=Ne(c[f],u[f]);if(m!==0)return m}return Ne(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){let c=Ne(Bt(o.latitude),Bt(a.latitude));return c!==0?c:Ne(Bt(o.longitude),Bt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,a){let c=o.values||[],u=a.values||[];for(let f=0;f<c.length&&f<u.length;++f){let m=Yo(c[f],u[f]);if(m)return m}return Ne(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,a){if(o===qo.mapValue&&a===qo.mapValue)return 0;if(o===qo.mapValue)return 1;if(a===qo.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){let w=Ne(u[v],m[v]);if(w!==0)return w;let E=Yo(c[u[v]],f[m[v]]);if(E!==0)return E}return Ne(u.length,m.length)}(t.mapValue,e.mapValue);default:throw oe()}}function qA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);let n=to(t),i=to(e),r=Ne(n.seconds,i.seconds);return r!==0?r:Ne(n.nanos,i.nanos)}function _l(t){return B0(t)}function B0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=to(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ko(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=B0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${B0(n.fields[a])}`;return r+"}"}(t.mapValue):oe()}function da(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function j0(t){return!!t&&"integerValue"in t}function eh(t){return!!t&&"arrayValue"in t}function GA(t){return!!t&&"nullValue"in t}function WA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fm(t){return!!t&&"mapValue"in t}function Hd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return wa(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Hd(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Hd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function CU(t){return"nullValue"in t?Lm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?da(Qo.empty(),te.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:oe()}function DU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?da(Qo.empty(),te.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?qo:oe()}function ZA(t,e){let n=Yo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function KA(t,e){let n=Yo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Tn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Fm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hd(n)}setAll(e){let n=qt.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=Hd(a):r.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Fm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Fm(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){wa(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(Hd(this.value))}};function nP(t){let e=[];return wa(t.fields,(n,i)=>{let r=new qt([n]);if(Fm(i)){let o=nP(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new ui(e)}var Jt=class t{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new t(e,0,fe.min(),fe.min(),fe.min(),Tn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,fe.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,fe.min(),fe.min(),Tn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,fe.min(),fe.min(),Tn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var xr=class{constructor(e,n){this.position=e,this.inclusive=n}};function QA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],a=t.position[r];if(o.field.isKeyField()?i=te.comparator(te.fromName(a.referenceValue),n.key):i=Yo(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function YA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Dr(t.position[n],e.position[n]))return!1;return!0}var ha=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function xU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Zm=class{},Ge=class t extends Zm{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new $0(e,n,i):n==="array-contains"?new G0(e,i):n==="in"?new Km(e,i):n==="not-in"?new W0(e,i):n==="array-contains-any"?new Z0(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new H0(e,i):new q0(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Yo(n,this.value)):n!==null&&ua(this.value)===ua(n)&&this.matchesComparison(Yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ct=class t extends Zm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return vl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function vl(t){return t.op==="and"}function z0(t){return t.op==="or"}function SI(t){return iP(t)&&vl(t)}function iP(t){for(let e of t.filters)if(e instanceof ct)return!1;return!0}function U0(t){if(t instanceof Ge)return t.field.canonicalString()+t.op.toString()+_l(t.value);if(SI(t))return t.filters.map(e=>U0(e)).join(",");{let e=t.filters.map(n=>U0(n)).join(",");return`${t.op}(${e})`}}function rP(t,e){return t instanceof Ge?function(i,r){return r instanceof Ge&&i.op===r.op&&i.field.isEqual(r.field)&&Dr(i.value,r.value)}(t,e):t instanceof ct?function(i,r){return r instanceof ct&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,c)=>o&&rP(a,r.filters[c]),!0):!1}(t,e):void oe()}function oP(t,e){let n=t.filters.concat(e);return ct.create(n,t.op)}function sP(t){return t instanceof Ge?function(n){return`${n.field.canonicalString()} ${n.op} ${_l(n.value)}`}(t):t instanceof ct?function(n){return n.op.toString()+" {"+n.getFilters().map(sP).join(" ,")+"}"}(t):"Filter"}var $0=class extends Ge{constructor(e,n,i){super(e,n,i),this.key=te.fromName(i.referenceValue)}matches(e){let n=te.comparator(e.key,this.key);return this.matchesComparison(n)}},H0=class extends Ge{constructor(e,n){super(e,"in",n),this.keys=aP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},q0=class extends Ge{constructor(e,n){super(e,"not-in",n),this.keys=aP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function aP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>te.fromName(i.referenceValue))}var G0=class extends Ge{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return eh(n)&&Jd(n.arrayValue,this.value)}},Km=class extends Ge{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Jd(this.value.arrayValue,n)}},W0=class extends Ge{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Jd(this.value.arrayValue,n)}},Z0=class extends Ge{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!eh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Jd(this.value.arrayValue,i))}};var K0=class{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function Q0(t,e=null,n=[],i=[],r=null,o=null,a=null){return new K0(t,e,n,i,r,o,a)}function fa(t){let e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>U0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),_h(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>_l(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>_l(i)).join(",")),e.ue=n}return e.ue}function vh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!xU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!rP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!YA(t.startAt,e.startAt)&&YA(t.endAt,e.endAt)}function Qm(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Ym(t,e){return t.filters.filter(n=>n instanceof Ge&&n.field.isEqual(e))}function XA(t,e,n){let i=Lm,r=!0;for(let o of Ym(t,e)){let a=Lm,c=!0;switch(o.op){case"<":case"<=":a=CU(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,c=!1;break;case"!=":case"not-in":a=Lm}ZA({value:i,inclusive:r},{value:a,inclusive:c})<0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];ZA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function JA(t,e,n){let i=qo,r=!0;for(let o of Ym(t,e)){let a=qo,c=!0;switch(o.op){case">=":case">":a=DU(o.value),c=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,c=!1;break;case"!=":case"not-in":a=qo}KA({value:i,inclusive:r},{value:a,inclusive:c})>0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];KA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}var qi=class{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function cP(t,e,n,i,r,o,a,c){return new qi(t,e,n,i,r,o,a,c)}function kl(t){return new qi(t)}function eM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AI(t){return t.collectionGroup!==null}function fl(t){let e=ne(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new mt(qt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ha(o,i))}),n.has(qt.keyField().canonicalString())||e.ce.push(new ha(qt.keyField(),i))}return e.ce}function zn(t){let e=ne(t);return e.le||(e.le=TU(e,fl(t))),e.le}function TU(t,e){if(t.limitType==="F")return Q0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new ha(r.field,o)});let n=t.endAt?new xr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new xr(t.startAt.position,t.startAt.inclusive):null;return Q0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Y0(t,e){let n=t.filters.concat([e]);return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Xm(t,e,n){return new qi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yh(t,e){return vh(zn(t),zn(e))&&t.limitType===e.limitType}function lP(t){return`${fa(zn(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>sP(r)).join(", ")}]`),_h(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>_l(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>_l(r)).join(",")),`Target(${i})`}(zn(t))}; limitType=${t.limitType})`}function bh(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):te.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of fl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,c,u){let f=QA(a,c,u);return a.inclusive?f<=0:f<0}(i.startAt,fl(i),r)||i.endAt&&!function(a,c,u){let f=QA(a,c,u);return a.inclusive?f>=0:f>0}(i.endAt,fl(i),r))}(t,e)}function uP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function dP(t){return(e,n)=>{let i=!1;for(let r of fl(t)){let o=SU(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function SU(t,e,n){let i=t.field.isKeyField()?te.comparator(e.key,n.key):function(o,a,c){let u=a.data.field(o),f=c.data.field(o);return u!==null&&f!==null?Yo(u,f):oe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return oe()}}var Tr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wa(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return JM(this.inner)}size(){return this.innerSize}};var AU=new Dt(te.comparator);function Yn(){return AU}var hP=new Dt(te.comparator);function Ud(...t){let e=hP;for(let n of t)e=e.insert(n.key,n);return e}function fP(t){let e=hP;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function wr(){return qd()}function pP(){return qd()}function qd(){return new Tr(t=>t.toString(),(t,e)=>t.isEqual(e))}var MU=new Dt(te.comparator),PU=new mt(te.comparator);function Oe(...t){let e=PU;for(let n of t)e=e.add(n);return e}var RU=new mt(Ne);function MI(){return RU}function mP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qd(e)?"-0":e}}function gP(t){return{integerValue:""+t}}function _P(t,e){return WM(e)?gP(e):mP(t,e)}var yl=class{constructor(){this._=void 0}};function kU(t,e,n){return t instanceof Xo?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Fg(o)&&(o=TI(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof no?yP(t,e):t instanceof io?bP(t,e):function(r,o){let a=vP(r,o),c=tM(a)+tM(r.Pe);return j0(a)&&j0(r.Pe)?gP(c):mP(r.serializer,c)}(t,e)}function NU(t,e,n){return t instanceof no?yP(t,e):t instanceof io?bP(t,e):n}function vP(t,e){return t instanceof Jo?function(i){return j0(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Xo=class extends yl{},no=class extends yl{constructor(e){super(),this.elements=e}};function yP(t,e){let n=wP(e);for(let i of t.elements)n.some(r=>Dr(r,i))||n.push(i);return{arrayValue:{values:n}}}var io=class extends yl{constructor(e){super(),this.elements=e}};function bP(t,e){let n=wP(e);for(let i of t.elements)n=n.filter(r=>!Dr(r,i));return{arrayValue:{values:n}}}var Jo=class extends yl{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function tM(t){return Bt(t.integerValue||t.doubleValue)}function wP(t){return eh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var pa=class{constructor(e,n){this.field=e,this.transform=n}};function OU(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof no&&r instanceof no||i instanceof io&&r instanceof io?ml(i.elements,r.elements,Dr):i instanceof Jo&&r instanceof Jo?Dr(i.Pe,r.Pe):i instanceof Xo&&r instanceof Xo}(t.transform,e.transform)}var X0=class{constructor(e,n){this.version=e,this.transformResults=n}},jt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var bl=class{};function IP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ts(t.key,jt.none()):new es(t.key,t.data,jt.none());{let n=t.data,i=Tn.empty(),r=new mt(qt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Gi(t.key,i,new ui(r.toArray()),jt.none())}}function LU(t,e,n){t instanceof es?function(r,o,a){let c=r.value.clone(),u=iM(r.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Gi?function(r,o,a){if(!Vm(r.precondition,o))return void o.convertToUnknownDocument(a.version);let c=iM(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(EP(r)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function Gd(t,e,n,i){return t instanceof es?function(o,a,c,u){if(!Vm(o.precondition,a))return c;let f=o.value.clone(),m=rM(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Gi?function(o,a,c,u){if(!Vm(o.precondition,a))return c;let f=rM(o.fieldTransforms,u,a),m=a.data;return m.setAll(EP(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,a,c){return Vm(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function FU(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=vP(i.transform,r||null);o!=null&&(n===null&&(n=Tn.empty()),n.set(i.field,o))}return n||null}function nM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ml(i,r,(o,a)=>OU(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var es=class extends bl{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Gi=class extends bl{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function EP(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function iM(t,e,n){let i=new Map;ue(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,NU(a,c,n[r]))}return i}function rM(t,e,n){let i=new Map;for(let r of t){let o=r.transform,a=n.data.field(r.field);i.set(r.field,kU(o,a,e))}return i}var ts=class extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},th=class extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var nh=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&LU(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Gd(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Gd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=pP();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;let u=IP(a,c);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(fe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,(n,i)=>nM(n,i))&&ml(this.baseMutations,e.baseMutations,(n,i)=>nM(n,i))}},J0=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ue(e.mutations.length===i.length);let r=function(){return MU}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new t(e,n,i,r)}};var ih=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ew=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Kt,Qe;function CP(t){switch(t){default:return oe();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function DP(t){if(t===void 0)return Ht("GRPC error has no .code"),$.UNKNOWN;switch(t){case Kt.OK:return $.OK;case Kt.CANCELLED:return $.CANCELLED;case Kt.UNKNOWN:return $.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return $.INTERNAL;case Kt.UNAVAILABLE:return $.UNAVAILABLE;case Kt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Kt.NOT_FOUND:return $.NOT_FOUND;case Kt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Kt.ABORTED:return $.ABORTED;case Kt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Kt.DATA_LOSS:return $.DATA_LOSS;default:return oe()}}(Qe=Kt||(Kt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";var oM=null;function xP(){return new TextEncoder}var VU=new jo([4294967295,4294967295],0);function sM(t){let e=xP().encode(t),n=new m0;return n.update(e),new Uint8Array(n.digest())}function aM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jo([n,i],0),new jo([r,o],0)]}var tw=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ca(`Invalid padding: ${n}`);if(i<0)throw new ca(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ca(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ca(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=jo.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(jo.fromNumber(i)));return r.compare(VU)===1&&(r=new jo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=sM(e),[i,r]=aM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let n=sM(e),[i,r]=aM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},ca=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var rh=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,oh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(fe.min(),r,new Dt(Ne),Yn(),Oe())}},oh=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Oe(),Oe(),Oe())}};var pl=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},Jm=class{constructor(e,n){this.targetId=e,this.me=n}},eg=class{constructor(e,n,i=fn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},tg=class{constructor(){this.fe=0,this.ge=lM(),this.pe=fn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Oe(),n=Oe(),i=Oe();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:oe()}}),new oh(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=lM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},nw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Yn(),this.qe=cM(),this.Qe=new Dt(Ne)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(Qm(o))if(i===0){let a=new te(o.path);this.Ue(n,a,Jt.newNoDocument(a,fe.min()))}else ue(i===1);else{let a=this.Ye(n);if(a!==i){let c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}oM?.et(function(m,v,w,E,M){var k,F,q,ie,Z,ae;let pe={localCacheCount:m,existenceFilterCount:v.count,databaseId:w.database,projectId:w.projectId},de=v.unchangedNames;return de&&(pe.bloomFilter={applied:M===0,hashCount:(k=de?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(ie=(q=(F=de?.bits)===null||F===void 0?void 0:F.bitmap)===null||q===void 0?void 0:q.length)!==null&&ie!==void 0?ie:0,padding:(ae=(Z=de?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ae!==void 0?ae:0,mightContain:S=>{var C;return(C=E?.mightContain(S))!==null&&C!==void 0&&C}}),pe}(a,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,a,c;try{a=Ko(i).toUint8Array()}catch(u){if(u instanceof Wm)return xi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new tw(a,r,o)}catch(u){return xi(u instanceof ca?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,a)=>{let c=this.Je(a);if(c){if(o.current&&Qm(c.target)){let u=new te(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Jt.newNoDocument(u,e))}o.be&&(n.set(a,o.Ce()),o.ve())}});let i=Oe();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new rh(e,n,this.Qe,this.ke,i);return this.ke=Yn(),this.qe=cM(),this.Qe=new Dt(Ne),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new tg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new tg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function cM(){return new Dt(te.comparator)}function lM(){return new Dt(te.comparator)}var BU={asc:"ASCENDING",desc:"DESCENDING"},jU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zU={and:"AND",or:"OR"},iw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function rw(t,e){return t.useProto3Json||_h(e)?e:{value:e}}function wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function TP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UU(t,e){return wl(t,e.toTimestamp())}function Gt(t){return ue(!!t),fe.fromTimestamp(function(n){let i=to(n);return new Ft(i.seconds,i.nanos)}(t))}function PI(t,e){return ow(t,e).canonicalString()}function ow(t,e){let n=function(r){return new Ye(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function SP(t){let e=Ye.fromString(t);return ue(VP(e)),e}function sh(t,e){return PI(t.databaseId,e.path)}function Er(t,e){let n=SP(e);if(n.get(1)!==t.databaseId.projectId)throw new H($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(PP(n))}function AP(t,e){return PI(t.databaseId,e)}function MP(t){let e=SP(t);return e.length===4?Ye.emptyPath():PP(e)}function sw(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function PP(t){return ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function uM(t,e,n){return{name:sh(t,e),fields:n.value.mapValue.fields}}function RP(t,e,n){let i=Er(t,e.name),r=Gt(e.updateTime),o=e.createTime?Gt(e.createTime):fe.min(),a=new Tn({mapValue:{fields:e.fields}}),c=Jt.newFoundDocument(i,r,o,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function $U(t,e){return"found"in e?function(i,r){ue(!!r.found),r.found.name,r.found.updateTime;let o=Er(i,r.found.name),a=Gt(r.found.updateTime),c=r.found.createTime?Gt(r.found.createTime):fe.min(),u=new Tn({mapValue:{fields:r.found.fields}});return Jt.newFoundDocument(o,a,c,u)}(t,e):"missing"in e?function(i,r){ue(!!r.missing),ue(!!r.readTime);let o=Er(i,r.missing),a=Gt(r.readTime);return Jt.newNoDocument(o,a)}(t,e):oe()}function HU(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(ue(m===void 0||typeof m=="string"),fn.fromBase64String(m||"")):(ue(m===void 0||m instanceof Buffer||m instanceof Uint8Array),fn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let m=f.code===void 0?$.UNKNOWN:DP(f.code);return new H(m,f.message||"")}(a);n=new eg(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Er(t,i.document.name),o=Gt(i.document.updateTime),a=i.document.createTime?Gt(i.document.createTime):fe.min(),c=new Tn({mapValue:{fields:i.document.fields}}),u=Jt.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];n=new pl(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Er(t,i.document),o=i.readTime?Gt(i.readTime):fe.min(),a=Jt.newNoDocument(r,o),c=i.removedTargetIds||[];n=new pl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Er(t,i.document),o=i.removedTargetIds||[];n=new pl([],o,r,null)}else{if(!("filter"in e))return oe();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new ew(r,o),c=i.targetId;n=new Jm(c,a)}}return n}function ah(t,e){let n;if(e instanceof es)n={update:uM(t,e.key,e.value)};else if(e instanceof ts)n={delete:sh(t,e.key)};else if(e instanceof Gi)n={update:uM(t,e.key,e.data),updateMask:QU(e.fieldMask)};else{if(!(e instanceof th))return oe();n={verify:sh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let c=a.transform;if(c instanceof Xo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof no)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof io)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Jo)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw oe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:UU(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe()}(t,e.precondition)),n}function aw(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?jt.updateTime(Gt(o.updateTime)):o.exists!==void 0?jt.exists(o.exists):jt.none()}(e.currentDocument):jt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,c){let u=null;if("setToServerValue"in c)ue(c.setToServerValue==="REQUEST_TIME"),u=new Xo;else if("appendMissingElements"in c){let m=c.appendMissingElements.values||[];u=new no(m)}else if("removeAllFromArray"in c){let m=c.removeAllFromArray.values||[];u=new io(m)}else"increment"in c?u=new Jo(a,c.increment):oe();let f=qt.fromServerFormat(c.fieldPath);return new pa(f,u)}(t,r)):[];if(e.update){e.update.name;let r=Er(t,e.update.name),o=new Tn({mapValue:{fields:e.update.fields}});if(e.updateMask){let a=function(u){let f=u.fieldPaths||[];return new ui(f.map(m=>qt.fromServerFormat(m)))}(e.updateMask);return new Gi(r,o,a,n,i)}return new es(r,o,n,i)}if(e.delete){let r=Er(t,e.delete);return new ts(r,n)}if(e.verify){let r=Er(t,e.verify);return new th(r,n)}return oe()}function qU(t,e){return t&&t.length>0?(ue(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?Gt(r.updateTime):Gt(o);return a.isEqual(fe.min())&&(a=Gt(o)),new X0(a,r.transformResults||[])}(n,e))):[]}function kP(t,e){return{documents:[AP(t,e.path)]}}function NP(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=AP(t,r);let o=function(f){if(f.length!==0)return FP(ct.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(w){return{field:cl(w.field),direction:WU(w.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);let c=rw(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function OP(t){let e=MP(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ue(i===1);let m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(v){let w=LP(v);return w instanceof ct&&SI(w)?w.getFilters():[w]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(w=>function(M){return new ha(ll(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let c=null;n.limit&&(c=function(v){let w;return w=typeof v=="object"?v.value:v,_h(w)?null:w}(n.limit));let u=null;n.startAt&&(u=function(v){let w=!!v.before,E=v.values||[];return new xr(E,w)}(n.startAt));let f=null;return n.endAt&&(f=function(v){let w=!v.before,E=v.values||[];return new xr(E,w)}(n.endAt)),cP(e,r,a,o,c,"F",u,f)}function GU(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function LP(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=ll(n.unaryFilter.field);return Ge.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ll(n.unaryFilter.field);return Ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ll(n.unaryFilter.field);return Ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ll(n.unaryFilter.field);return Ge.create(a,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return Ge.create(ll(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ct.create(n.compositeFilter.filters.map(i=>LP(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function WU(t){return BU[t]}function ZU(t){return jU[t]}function KU(t){return zU[t]}function cl(t){return{fieldPath:t.canonicalString()}}function ll(t){return qt.fromServerFormat(t.fieldPath)}function FP(t){return t instanceof Ge?function(n){if(n.op==="=="){if(WA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(GA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(GA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:ZU(n.op),value:n.value}}}(t):t instanceof ct?function(n){let i=n.getFilters().map(r=>FP(r));return i.length===1?i[0]:{compositeFilter:{op:KU(n.op),filters:i}}}(t):oe()}function QU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VP(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Il=class t{constructor(e,n,i,r,o=fe.min(),a=fe.min(),c=fn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ng=class{constructor(e){this.ct=e}};function YU(t,e){let n;if(e.document)n=RP(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=te.fromSegments(e.noDocument.path),r=ga(e.noDocument.readTime);n=Jt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return oe();{let i=te.fromSegments(e.unknownDocument.path),r=ga(e.unknownDocument.version);n=Jt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Ft(r[0],r[1]);return fe.fromTimestamp(o)}(e.readTime)),n}function dM(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ig(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,a){return{name:sh(o,a.key),fields:a.data.value.mapValue.fields,updateTime:wl(o,a.version.toTimestamp()),createTime:wl(o,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:ma(e.version)};else{if(!e.isUnknownDocument())return oe();i.unknownDocument={path:n.path.toArray(),version:ma(e.version)}}return i}function ig(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function ma(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ga(t){let e=new Ft(t.seconds,t.nanoseconds);return fe.fromTimestamp(e)}function oa(t,e){let n=(e.baseMutations||[]).map(o=>aw(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let c=e.mutations[o+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>aw(t.ct,o)),r=Ft.fromMillis(e.localWriteTimeMs);return new nh(e.batchId,r,n,i)}function $d(t){let e=ga(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ga(t.lastLimboFreeSnapshotVersion):fe.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return ue(o.documents.length===1),zn(kl(MP(o.documents[0])))}(t.query):function(o){return zn(OP(o))}(t.query),new Il(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,fn.fromBase64String(t.resumeToken))}function BP(t,e){let n=ma(e.snapshotVersion),i=ma(e.lastLimboFreeSnapshotVersion),r;r=Qm(e.target)?kP(t.ct,e.target):NP(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:fa(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function RI(t){let e=OP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Xm(e,e.limit,"L"):e}function I0(t,e){return new ih(e.largestBatchId,aw(t.ct,e.overlayMutation))}function hM(t,e){let n=e.path.lastSegment();return[t,jn(e.path.popLast()),n]}function fM(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:ma(i.readTime),documentKey:jn(i.documentKey.path),largestBatchId:i.largestBatchId}}var cw=class{getBundleMetadata(e,n){return pM(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:ga(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return pM(e).put(function(r){return{bundleId:r.id,createTime:ma(Gt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return mM(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:RI(o.bundledQuery),readTime:ga(o.readTime)}}(i)})}saveNamedQuery(e,n){return mM(e).put(function(r){return{name:r.name,readTime:ma(Gt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function pM(t){return pn(t,"bundles")}function mM(t){return pn(t,"namedQueries")}var rg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Vd(e).get(hM(this.userId,n)).next(i=>i?I0(this.serializer,i):null)}getOverlays(e,n){let i=wr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,a)=>{let c=new ih(n,a);r.push(this.ht(e,c))}),B.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(a=>r.add(jn(a.getCollectionPath())));let o=[];return r.forEach(a=>{let c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);o.push(Vd(e).j("collectionPathOverlayIndex",c))}),B.waitFor(o)}getOverlaysForCollection(e,n,i){let r=wr(),o=jn(n),a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Vd(e).U("collectionPathOverlayIndex",a).next(c=>{for(let u of c){let f=I0(this.serializer,u);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=wr(),a,c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Vd(e).J({index:"collectionGroupOverlayIndex",range:c},(u,f,m)=>{let v=I0(this.serializer,f);o.size()<r||v.largestBatchId===a?(o.set(v.getKey(),v),a=v.largestBatchId):m.done()}).next(()=>o)}ht(e,n){return Vd(e).put(function(r,o,a){let[c,u,f]=hM(o,a.mutation.key);return{userId:o,collectionPath:u,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:ah(r.ct,a.mutation)}}(this.serializer,this.userId,n))}};function Vd(t){return pn(t,"documentOverlays")}var Jr=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Bt(e.integerValue));else if("doubleValue"in e){let i=Bt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Qd(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=to(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Ko(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?tP(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):oe()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),te.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Jr.bt=new Jr;function XU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function gM(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let a=XU(255&i[o]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}var lw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=gM(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=gM(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},uw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},dw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},sa=class{constructor(){this.Gt=new lw,this.zt=new uw(this.Gt),this.jt=new dw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var aa=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function zo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=_M(t.arrayValue,e.arrayValue),n!==0?n:(n=_M(t.directionalValue,e.directionalValue),n!==0?n:te.comparator(t.documentKey,e.documentKey)))}function _M(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var og=class{constructor(e){this.Yt=new mt((n,i)=>qt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(ue(e.collectionGroup===this.collectionId),this.en)return!1;let n=k0(e);if(n!==void 0&&!this.nn(n))return!1;let i=ia(e),r=new Set,o=0,a=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let c=this.Yt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let u=i[o];if(!this.rn(c,u)||!this.sn(this.Zt[a++],u))return!1}++o}for(;o<i.length;++o){let c=i[o];if(a>=this.Zt.length||!this.sn(this.Zt[a++],c))return!1}return!0}on(){if(this.en)return null;let e=new mt(qt.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new hl(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new hl(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new hl(i.field,i.dir==="asc"?0:1)));return new gl(gl.UNKNOWN_ID,this.collectionId,n,Kd.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function jP(t){var e,n;if(ue(t instanceof Ge||t instanceof ct),t instanceof Ge){if(t instanceof Km){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ge.create(t.field,"==",o)))||[];return ct.create(r,"or")}return t}let i=t.filters.map(r=>jP(r));return ct.create(i,t.op)}function JU(t){if(t.getFilters().length===0)return[];let e=pw(jP(t));return ue(zP(e)),hw(e)||fw(e)?[e]:e.getFilters()}function hw(t){return t instanceof Ge}function fw(t){return t instanceof ct&&SI(t)}function zP(t){return hw(t)||fw(t)||function(n){if(n instanceof ct&&z0(n)){for(let i of n.getFilters())if(!hw(i)&&!fw(i))return!1;return!0}return!1}(t)}function pw(t){if(ue(t instanceof Ge||t instanceof ct),t instanceof Ge)return t;if(t.filters.length===1)return pw(t.filters[0]);let e=t.filters.map(i=>pw(i)),n=ct.create(e,t.op);return n=sg(n),zP(n)?n:(ue(n instanceof ct),ue(vl(n)),ue(n.filters.length>1),n.filters.reduce((i,r)=>kI(i,r)))}function kI(t,e){let n;return ue(t instanceof Ge||t instanceof ct),ue(e instanceof Ge||e instanceof ct),n=t instanceof Ge?e instanceof Ge?function(r,o){return ct.create([r,o],"and")}(t,e):vM(t,e):e instanceof Ge?vM(e,t):function(r,o){if(ue(r.filters.length>0&&o.filters.length>0),vl(r)&&vl(o))return oP(r,o.getFilters());let a=z0(r)?r:o,c=z0(r)?o:r,u=a.filters.map(f=>kI(f,c));return ct.create(u,"or")}(t,e),sg(n)}function vM(t,e){if(vl(e))return oP(e,t.getFilters());{let n=e.filters.map(i=>kI(t,i));return ct.create(n,"or")}}function sg(t){if(ue(t instanceof Ge||t instanceof ct),t instanceof Ge)return t;let e=t.getFilters();if(e.length===1)return sg(e[0]);if(iP(t))return t;let n=e.map(r=>sg(r)),i=[];return n.forEach(r=>{r instanceof Ge?i.push(r):r instanceof ct&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:ct.create(i,t.op)}var mw=class{constructor(){this._n=new ch}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ti.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},ch=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new mt(Ye.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new mt(Ye.comparator)).toArray()}};var Pm=new Uint8Array(0),gw=class{constructor(e,n){this.databaseId=n,this.an=new ch,this.un=new Tr(i=>fa(i),(i,r)=>vh(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:jn(r)};return yM(e).put(o)}return B.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[UM(n),""],!1,!0);return yM(e).U(r).next(o=>{for(let a of o){if(a.collectionId!==n)break;i.push(br(a.parent))}return i})}addFieldIndex(e,n){let i=Bd(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let a=rl(e);return o.next(c=>{a.put(fM(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=Bd(e),r=rl(e),o=il(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Bd(e),i=il(e),r=rl(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return B.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new og(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=il(e),r=!0,o=new Map;return B.forEach(this.cn(n),a=>this.ln(e,a).next(c=>{r&&(r=!!c),o.set(a,c)})).next(()=>{if(r){let a=Oe(),c=[];return B.forEach(o,(u,f)=>{W("IndexedDbIndexManager",`Using index ${function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`}(u)} to execute ${fa(n)}`);let m=function(Z,ae){let pe=k0(ae);if(pe===void 0)return null;for(let de of Ym(Z,pe.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null}(f,u),v=function(Z,ae){let pe=new Map;for(let de of ia(ae))for(let S of Ym(Z,de.fieldPath))switch(S.op){case"==":case"in":pe.set(de.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return pe.set(de.fieldPath.canonicalString(),S.value),Array.from(pe.values())}return null}(f,u),w=function(Z,ae){let pe=[],de=!0;for(let S of ia(ae)){let C=S.kind===0?XA(Z,S.fieldPath,Z.startAt):JA(Z,S.fieldPath,Z.startAt);pe.push(C.value),de&&(de=C.inclusive)}return new xr(pe,de)}(f,u),E=function(Z,ae){let pe=[],de=!0;for(let S of ia(ae)){let C=S.kind===0?JA(Z,S.fieldPath,Z.endAt):XA(Z,S.fieldPath,Z.endAt);pe.push(C.value),de&&(de=C.inclusive)}return new xr(pe,de)}(f,u),M=this.hn(u,f,w),k=this.hn(u,f,E),F=this.Pn(u,f,v),q=this.In(u.indexId,m,M,w.inclusive,k,E.inclusive,F);return B.forEach(q,ie=>i.G(ie,n.limit).next(Z=>{Z.forEach(ae=>{let pe=te.fromSegments(ae.documentKey);a.has(pe)||(a=a.add(pe),c.push(pe))})}))}).next(()=>c)}return B.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=JU(ct.create(e.filters,"and")).map(i=>Q0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,a,c){let u=(n!=null?n.length:1)*Math.max(i.length,o.length),f=u/(n!=null?n.length:1),m=[];for(let v=0;v<u;++v){let w=n?this.Tn(n[v/f]):Pm,E=this.En(e,w,i[v%f],r),M=this.dn(e,w,o[v%f],a),k=c.map(F=>this.En(e,w,F,!0));m.push(...this.createRange(E,M,k))}return m}En(e,n,i,r){let o=new aa(e,te.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new aa(e,te.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new og(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let a=null;for(let c of o)i.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,n){let i=2,r=this.cn(n);return B.forEach(r,o=>this.ln(e,o).next(a=>{a?i!==0&&a.fields.length<function(u){let f=new mt(qt.comparator),m=!1;for(let v of u.filters)for(let w of v.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?m=!0:f=f.add(w.field));for(let v of u.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(o)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new sa;for(let r of ia(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let a=i.Ht(r.kind);Jr.bt.Pt(o,a)}return i.Wt()}Tn(e){let n=new sa;return Jr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new sa;return Jr.bt.Pt(da(this.databaseId,n),i.Ht(function(o){let a=ia(o);return a.length===0?0:a[a.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new sa);let o=0;for(let a of ia(e)){let c=i[o++];for(let u of r)if(this.Vn(n,a.fieldPath)&&eh(c))r=this.mn(r,a,c);else{let f=u.Ht(a.kind);Jr.bt.Pt(c,f)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let a of i.arrayValue.values||[])for(let c of r){let u=new sa;u.seed(c.Wt()),Jr.bt.Pt(a,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof Ge&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Bd(e),r=rl(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let a=[];return B.forEach(o,c=>r.get([c.indexId,this.uid]).next(u=>{a.push(function(m,v){let w=v?new Kd(v.sequenceNumber,new Ti(ga(v.readTime),new te(br(v.documentKey)),v.largestBatchId)):Kd.empty(),E=m.fields.map(([M,k])=>new hl(qt.fromServerFormat(M),k));return new gl(m.indexId,m.collectionGroup,E,w)}(c,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Ne(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Bd(e),o=rl(e);return this.gn(e).next(a=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>B.forEach(c,u=>o.put(fM(u.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){let i=new Map;return B.forEach(n,(r,o)=>{let a=i.get(r.collectionGroup);return(a?B.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),B.forEach(c,u=>this.pn(e,r,u).next(f=>{let m=this.yn(o,u);return f.isEqual(m)?B.resolve():this.wn(e,o,u,f,m)}))))})}Sn(e,n,i,r){return il(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return il(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=il(e),o=new mt(zo);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(a,c)=>{o=o.add(new aa(i.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>o)}yn(e,n){let i=new mt(zo),r=this.An(n,e);if(r==null)return i;let o=k0(n);if(o!=null){let a=e.data.field(o.fieldPath);if(eh(a))for(let c of a.arrayValue.values||[])i=i.add(new aa(n.indexId,e.key,this.Tn(c),r))}else i=i.add(new aa(n.indexId,e.key,Pm,r));return i}wn(e,n,i,r,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let a=[];return function(u,f,m,v,w){let E=u.getIterator(),M=f.getIterator(),k=nl(E),F=nl(M);for(;k||F;){let q=!1,ie=!1;if(k&&F){let Z=m(k,F);Z<0?ie=!0:Z>0&&(q=!0)}else k!=null?ie=!0:q=!0;q?(v(F),F=nl(M)):ie?(w(k),k=nl(E)):(k=nl(E),F=nl(M))}}(r,o,zo,c=>{a.push(this.Sn(e,n,i,c))},c=>{a.push(this.bn(e,n,i,c))}),B.waitFor(a)}gn(e){let n=1;return rl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,c)=>zo(a,c)).filter((a,c,u)=>!c||zo(a,u[c-1])!==0);let r=[];r.push(e);for(let a of i){let c=zo(a,e),u=zo(a,n);if(c===0)r[0]=e.Jt();else if(c>0&&u<0)r.push(a),r.push(a.Jt());else if(u>0)break}r.push(n);let o=[];for(let a=0;a<r.length;a+=2){if(this.Dn(r[a],r[a+1]))return[];let c=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,Pm,[]],u=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,Pm,[]];o.push(IDBKeyRange.bound(c,u))}return o}Dn(e,n){return zo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(bM)}getMinOffset(e,n){return B.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||oe())).next(bM)}};function yM(t){return pn(t,"collectionParents")}function il(t){return pn(t,"indexEntries")}function Bd(t){return pn(t,"indexConfiguration")}function rl(t){return pn(t,"indexState")}function bM(t){ue(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;DI(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Ti(e.readTime,e.documentKey,n)}var wM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Di=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function UP(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId),c=0,u=i.J({range:a},(m,v,w)=>(c++,w.delete()));o.push(u.next(()=>{ue(c===1)}));let f=[];for(let m of n.mutations){let v=ZM(e,m.key.path,n.batchId);o.push(r.delete(v)),f.push(m.key)}return B.waitFor(o).next(()=>f)}function ag(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw oe();e=t.noDocument}return JSON.stringify(e).length}Di.DEFAULT_COLLECTION_PERCENTILE=10,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Di.DEFAULT=new Di(41943040,Di.DEFAULT_COLLECTION_PERCENTILE,Di.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Di.DISABLED=new Di(-1,0,0);var cg=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){ue(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).J({index:"userMutationsIndex",range:i},(r,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=ul(e),a=Uo(e);return a.add({}).next(c=>{ue(typeof c=="number");let u=new nh(c,n,i,r),f=function(E,M,k){let F=k.baseMutations.map(ie=>ah(E.ct,ie)),q=k.mutations.map(ie=>ah(E.ct,ie));return{userId:M,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:F,mutations:q}}(this.serializer,this.userId,u),m=[],v=new mt((w,E)=>Ne(w.canonicalString(),E.canonicalString()));for(let w of r){let E=ZM(this.userId,w.key.path,c);v=v.add(w.key.path.popLast()),m.push(a.put(f)),m.push(o.put(E,sU))}return v.forEach(w=>{m.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[c]=u.keys()}),B.waitFor(m).next(()=>u)})}lookupMutationBatch(e,n){return Uo(e).get(n).next(i=>i?(ue(i.userId===this.userId),oa(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?B.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Uo(e).J({index:"userMutationsIndex",range:r},(a,c,u)=>{c.userId===this.userId&&(ue(c.batchId>=i),o=oa(this.serializer,c)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Uo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,a)=>{i=o.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Uo(e).U("userMutationsIndex",n).next(i=>i.map(r=>oa(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=Om(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return ul(e).J({range:r},(a,c,u)=>{let[f,m,v]=a,w=br(m);if(f===this.userId&&n.path.isEqual(w))return Uo(e).get(v).next(E=>{if(!E)throw oe();ue(E.userId===this.userId),o.push(oa(this.serializer,E))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new mt(Ne),r=[];return n.forEach(o=>{let a=Om(this.userId,o.path),c=IDBKeyRange.lowerBound(a),u=ul(e).J({range:c},(f,m,v)=>{let[w,E,M]=f,k=br(E);w===this.userId&&o.path.isEqual(k)?i=i.add(M):v.done()});r.push(u)}),B.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=Om(this.userId,i),a=IDBKeyRange.lowerBound(o),c=new mt(Ne);return ul(e).J({range:a},(u,f,m)=>{let[v,w,E]=u,M=br(w);v===this.userId&&i.isPrefixOf(M)?M.length===r&&(c=c.add(E)):m.done()}).next(()=>this.Fn(e,c))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Uo(e).get(o).next(a=>{if(a===null)throw oe();ue(a.userId===this.userId),i.push(oa(this.serializer,a))}))}),B.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return UP(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),B.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();let i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return ul(e).J({range:i},(o,a,c)=>{if(o[0]===this.userId){let u=br(o[1]);r.push(u)}else c.done()}).next(()=>{ue(r.length===0)})})}containsKey(e,n){return $P(e,this.userId,n)}xn(e){return HP(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function $P(t,e,n){let i=Om(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),a=!1;return ul(t).J({range:o,H:!0},(c,u,f)=>{let[m,v,w]=c;m===e&&v===r&&(a=!0),f.done()}).next(()=>a)}function Uo(t){return pn(t,"mutations")}function ul(t){return pn(t,"documentMutations")}function HP(t){return pn(t,"mutationQueues")}var El=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var _w=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new El(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>fe.fromTimestamp(new Ft(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ol(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(ue(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return ol(e).J((a,c)=>{let u=$d(c);u.sequenceNumber<=n&&i.get(u.targetId)===null&&(r++,o.push(this.removeTargetData(e,u)))}).next(()=>B.waitFor(o)).next(()=>r)}forEachTarget(e,n){return ol(e).J((i,r)=>{let o=$d(r);n(o)})}Bn(e){return IM(e).get("targetGlobalKey").next(n=>(ue(n!==null),n))}kn(e,n){return IM(e).put("targetGlobalKey",n)}qn(e,n){return ol(e).put(BP(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=fa(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ol(e).J({range:r,index:"queryTargetsIndex"},(a,c,u)=>{let f=$d(c);vh(n,f.target)&&(o=f,u.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=$o(e);return n.forEach(a=>{let c=jn(a.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,a))}),B.waitFor(r)}removeMatchingKeys(e,n,i){let r=$o(e);return B.forEach(n,o=>{let a=jn(o.path);return B.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=$o(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=$o(e),o=Oe();return r.J({range:i,H:!0},(a,c,u)=>{let f=br(a[1]),m=new te(f);o=o.add(m)}).next(()=>o)}containsKey(e,n){let i=jn(n.path),r=IDBKeyRange.bound([i],[UM(i)],!1,!0),o=0;return $o(e).J({index:"documentTargetsIndex",H:!0,range:r},([a,c],u,f)=>{a!==0&&(o++,f.done())}).next(()=>o>0)}ot(e,n){return ol(e).get(n).next(i=>i?$d(i):null)}};function ol(t){return pn(t,"targets")}function IM(t){return pn(t,"targetGlobal")}function $o(t){return pn(t,"targetDocuments")}function EM([t,e],[n,i]){let r=Ne(t,n);return r===0?Ne(e,i):r}var vw=class{constructor(e){this.Kn=e,this.buffer=new mt(EM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();EM(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},yw=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>U(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){rs(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield is(n)}yield this.zn(3e5)}))}},bw=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(li.oe);let i=new vw(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(wM)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wM):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,a,c,u,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,a=Date.now(),this.nthSequenceNumber(e,r))).next(v=>(i=v,c=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),sl()<=sr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${v} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}};function e$(t,e){return new bw(t,e)}var ww=class{constructor(e,n){this.db=e,this.garbageCollector=e$(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return Rm(e,i)}removeReference(e,n,i){return Rm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Rm(e,n)}er(e,n){return function(r,o){let a=!1;return HP(r).Y(c=>$P(r,c,o).next(u=>(u&&(a=!0),B.resolve(!u)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(a,c)=>{if(c<=n){let u=this.er(e,a).next(f=>{if(!f)return o++,i.getEntry(e,a).next(()=>(i.removeEntry(a,fe.min()),$o(e).delete(function(v){return[0,jn(v.path)]}(a))))});r.push(u)}}).next(()=>B.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Rm(e,n)}Xn(e,n){let i=$o(e),r,o=li.oe;return i.J({index:"documentTargetsIndex"},([a,c],{path:u,sequenceNumber:f})=>{a===0?(o!==li.oe&&n(new te(br(r)),o),o=f,r=u):o=li.oe}).next(()=>{o!==li.oe&&n(new te(br(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Rm(t,e){return $o(t).put(function(i,r){return{targetId:0,path:jn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var lg=class{constructor(){this.changes=new Tr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Iw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return na(e).put(i)}removeEntry(e,n,i){return na(e).delete(function(o,a){let c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ig(a),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=Jt.newInvalidDocument(n);return na(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jd(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:Jt.newInvalidDocument(n)};return na(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(jd(n))},(r,o)=>{i={document:this.nr(n,o),size:ag(o)}}).next(()=>i)}getEntries(e,n){let i=Yn();return this.ir(e,n,(r,o)=>{let a=this.nr(r,o);i=i.insert(r,a)}).next(()=>i)}sr(e,n){let i=Yn(),r=new Dt(te.comparator);return this.ir(e,n,(o,a)=>{let c=this.nr(o,a);i=i.insert(o,c),r=r.insert(o,ag(a))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return B.resolve();let r=new mt(xM);n.forEach(u=>r=r.add(u));let o=IDBKeyRange.bound(jd(r.first()),jd(r.last())),a=r.getIterator(),c=a.getNext();return na(e).J({index:"documentKeyIndex",range:o},(u,f,m)=>{let v=te.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&xM(c,v)<0;)i(c,null),c=a.getNext();c&&c.isEqual(v)&&(i(c,f),c=a.hasNext()?a.getNext():null),c?m.$(jd(c)):m.done()}).next(()=>{for(;c;)i(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let a=n.path,c=[a.popLast().toArray(),a.lastSegment(),ig(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return na(e).U(IDBKeyRange.bound(c,u,!0)).next(f=>{o?.incrementDocumentReadCount(f.length);let m=Yn();for(let v of f){let w=this.nr(te.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(bh(n,w)||r.has(w.key))&&(m=m.insert(w.key,w))}return m})}getAllFromCollectionGroup(e,n,i,r){let o=Yn(),a=DM(n,i),c=DM(n,Ti.max());return na(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(u,f,m)=>{let v=this.nr(te.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===r&&m.done()}).next(()=>o)}newChangeBuffer(e){return new Ew(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return CM(e).get("remoteDocumentGlobalKey").next(n=>(ue(!!n),n))}tr(e,n){return CM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=YU(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(fe.min())))return i}return Jt.newInvalidDocument(e)}};function qP(t){return new Iw(t)}var Ew=class extends lg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Tr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new mt((o,a)=>Ne(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{let c=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,c.readTime)),a.isValidDocument()){let u=dM(this.ar.serializer,a);r=r.add(o.path.popLast());let f=ag(u);i+=f-c.size,n.push(this.ar.addEntry(e,o,u))}else if(i-=c.size,this.trackRemovals){let u=dM(this.ar.serializer,a.convertToNoDocument(fe.min()));n.push(this.ar.addEntry(e,o,u))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),B.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,a)=>{this.ur.set(o,{size:a,readTime:i.get(o).readTime})}),i))}};function CM(t){return pn(t,"remoteDocumentGlobal")}function na(t){return pn(t,"remoteDocumentsV14")}function jd(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function DM(t,e){let n=e.documentKey.path.toArray();return[t,ig(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function xM(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Ne(n[o],i[o]),r)return r;return r=Ne(n.length,i.length),r||(r=Ne(n[n.length-2],i[i.length-2]),r||Ne(n[n.length-1],i[i.length-1]))}var Cw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ug=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Gd(i.mutation,r,ui.empty(),Ft.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Oe()){let r=wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Ud();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){let i=wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Oe()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=Yn(),a=qd(),c=function(){return qd()}();return n.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Gi)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),Gd(m.mutation,f,m.mutation.getFieldMask(),Ft.now())):a.set(f.key,ui.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>{var v;return c.set(f,new Cw(m,(v=a.get(f))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){let i=qd(),r=new Dt((a,c)=>a-c),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(let c of a)c.keys().forEach(u=>{let f=n.get(u);if(f===null)return;let m=i.get(u)||ui.empty();m=c.applyToLocalView(f,m),i.set(u,m);let v=(r.get(c.batchId)||Oe()).add(u);r=r.insert(c.batchId,v)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),f=u.key,m=u.value,v=pP();m.forEach(w=>{if(!o.has(w)){let E=IP(n.get(w),i.get(w));E!==null&&v.set(w,E),o=o.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):AI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):B.resolve(wr()),c=-1,u=o;return a.next(f=>B.forEach(f,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{u=u.insert(m,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,Oe())).next(m=>({batchId:c,changes:fP(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(i=>{let r=Ud();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,a=Ud();return this.indexManager.getCollectionParents(e,o).next(c=>B.forEach(c,u=>{let f=function(v,w){return new qi(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((v,w)=>{a=a.insert(v,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,Jt.newInvalidDocument(m)))});let c=Ud();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&Gd(m.mutation,f,ui.empty(),Ft.now()),bh(n,f)&&(c=c.insert(u,f))}),c})}};var Dw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Gt(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:RI(r.bundledQuery),readTime:Gt(r.readTime)}}(n)),B.resolve()}};var xw=class{constructor(){this.overlays=new Dt(te.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let i=wr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){let r=wr(),o=n.length+1,a=new te(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Dt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=wr(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let c=wr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return B.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new ih(n,i));let o=this.hr.get(n);o===void 0&&(o=Oe(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var lh=class{constructor(){this.Pr=new mt(Qt.Ir),this.Tr=new mt(Qt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new Qt(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new Qt(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new te(new Ye([])),i=new Qt(n,e),r=new Qt(n,e+1),o=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new te(new Ye([])),i=new Qt(n,e),r=new Qt(n,e+1),o=Oe();return this.Tr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let n=new Qt(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},Qt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return te.comparator(e.key,n.key)||Ne(e.pr,n.pr)}static Er(e,n){return Ne(e.pr,n.pr)||te.comparator(e.key,n.key)}};var Tw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new mt(Qt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new nh(o,n,i,r);this.mutationQueue.push(a);for(let c of r)this.wr=this.wr.add(new Qt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new Qt(n,0),r=new Qt(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],a=>{let c=this.Sr(a.pr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new mt(Ne);return n.forEach(r=>{let o=new Qt(r,0),a=new Qt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],c=>{i=i.add(c.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;te.isDocumentKey(o)||(o=o.child(""));let a=new Qt(new te(o),0),c=new mt(Ne);return this.wr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(u.pr)),!0)},a),B.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ue(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(n.mutations,r=>{let o=new Qt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new Qt(n,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Sw=class{constructor(e){this.vr=e,this.docs=function(){return new Dt(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let i=Yn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Jt.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Yn(),a=n.path,c=new te(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||DI(HM(m),i)<=0||(r.has(m.key)||bh(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,i,r){oe()}Fr(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Aw(this)}getSize(e){return B.resolve(this.size)}},Aw=class extends lg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Mw=class{constructor(e){this.persistence=e,this.Mr=new Tr(n=>fa(n),vh),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new lh,this.targetCount=0,this.Lr=El.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new El(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),B.waitFor(o).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}};var dg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new li(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Mw(this),this.indexManager=new mw,this.remoteDocumentCache=function(r){return new Sw(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new ng(n),this.$r=new Dw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new Tw(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){W("MemoryPersistence","Starting transaction:",e);let r=new Pw(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},Pw=class extends Hm{constructor(e){super(),this.currentSequenceNumber=e}},hg=class t{constructor(e){this.persistence=e,this.zr=new lh,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{let r=te.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,fe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Rw=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new qm("createOrUpgrade",n);i<1&&r>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$A,{unique:!0}),u.createObjectStore("documentMutations")}(e),TM(e),function(u){u.createObjectStore("remoteDocuments")}(e));let a=B.resolve();return i<3&&r>=3&&(i!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),TM(e)),a=a.next(()=>function(u){let f=u.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(o))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(u,f){return f.store("mutations").U().next(m=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",$A,{unique:!0});let v=f.store("mutations"),w=m.map(E=>v.put(E));return B.waitFor(w)})}(e,o))),a=a.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Xr(o))),i<6&&r>=6&&(a=a.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(a=a.next(()=>this.ti(o))),i<8&&r>=8&&(a=a.next(()=>this.ni(e,o))),i<9&&r>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ri(o))),i<11&&r>=11&&(a=a.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(u){let f=u.createObjectStore("documentOverlays",{keyPath:vU});f.createIndex("collectionPathOverlayIndex",yU,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",bU,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(u){let f=u.createObjectStore("remoteDocumentsV14",{keyPath:aU});f.createIndex("documentKeyIndex",cU),f.createIndex("collectionGroupIndex",lU)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,o))),i<15&&r>=15&&(a=a.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:pU}).createIndex("sequenceNumberIndex",mU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:gU}).createIndex("documentKeyIndex",_U,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),a}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=ag(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>B.forEach(r,o=>{let a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",a).next(c=>B.forEach(c,u=>{ue(u.userId===o.userId);let f=oa(this.serializer,u);return UP(e,o.userId,f).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((a,c)=>{let u=new Ye(a),f=function(v){return[0,jn(v)]}(u);o.push(n.get(f).next(m=>m?B.resolve():(v=>n.put({targetId:0,path:jn(v),sequenceNumber:r.highestListenSequenceNumber}))(u)))}).next(()=>B.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:fU});let i=n.store("collectionParents"),r=new ch,o=a=>{if(r.add(a)){let c=a.lastSegment(),u=a.popLast();return i.put({collectionId:c,parent:jn(u)})}};return n.store("remoteDocuments").J({H:!0},(a,c)=>{let u=new Ye(a);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,c,u],f)=>{let m=br(c);return o(m.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=$d(r),a=BP(this.serializer,o);return n.put(a)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,a)=>{let c=n.store("remoteDocumentsV14"),u=function(v){return v.document?new te(Ye.fromString(v.document.name).popFirst(5)):v.noDocument?te.fromSegments(v.noDocument.path):v.unknownDocument?te.fromSegments(v.unknownDocument.path):oe()}(a).path.toArray(),f={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(c.put(f))}).next(()=>B.waitFor(r))}si(e,n){let i=n.store("mutations"),r=qP(this.serializer),o=new dg(hg.Hr,this.serializer.ct);return i.U().next(a=>{let c=new Map;return a.forEach(u=>{var f;let m=(f=c.get(u.userId))!==null&&f!==void 0?f:Oe();oa(this.serializer,u).keys().forEach(v=>m=m.add(v)),c.set(u.userId,m)}),B.forEach(c,(u,f)=>{let m=new Yt(f),v=rg.lt(this.serializer,m),w=o.getIndexManager(m),E=cg.lt(m,this.serializer,w,o.referenceDelegate);return new ug(r,E,v,w).recalculateAndSaveOverlaysForDocumentKeys(new Yd(n,li.oe),u).next()})})}};function TM(t){t.createObjectStore("targetDocuments",{keyPath:dU}).createIndex("documentTargetsIndex",hU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uU,{unique:!0}),t.createObjectStore("targetGlobal")}var E0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",kw=class t{constructor(e,n,i,r,o,a,c,u,f,m,v=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=a,this.document=c,this._i=f,this.ai=m,this.ui=v,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new H($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ww(this,r),this.Ti=n+"main",this.serializer=new ng(u),this.Ei=new Zo(this.Ti,this.ui,new Rw(this.serializer)),this.Qr=new _w(this.referenceDelegate,this.serializer),this.remoteDocumentCache=qP(this.serializer),this.$r=new cw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,m===!1&&Ht("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H($.FAILED_PRECONDITION,E0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new li(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>U(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>U(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>U(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>km(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(rs(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return zd(e).get("owner").next(n=>B.resolve(this.Si(n)))}bi(e){return km(e).delete(this.clientId)}Di(){return U(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=pn(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),a=r.filter(c=>o.indexOf(c)===-1);return B.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):zd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new H($.FAILED_PRECONDITION,E0);return!1}}return!(!this.networkEnabled||!this.inForeground)||km(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return U(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Yd(e,li.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>km(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return cg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return rg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){W("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?IU:u===15?XM:u===14?YM:u===13?QM:u===12?wU:u===11?KM:void oe()}(this.ui),a;return this.Ei.runTransaction(e,r,o,c=>(a=new Yd(c,this.kr?this.kr.next():li.oe),n==="readwrite-primary"?this.gi(a).next(u=>!!u||this.pi(a)).next(u=>{if(!u)throw Ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new H($.FAILED_PRECONDITION,qM);return i(a)}).next(u=>this.wi(a).next(()=>u)):this.ki(a).next(()=>i(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}ki(e){return zd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H($.FAILED_PRECONDITION,E0)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return zd(e).put("owner",n)}static D(){return Zo.D()}yi(e){let n=zd(e);return n.get("owner").next(i=>this.Si(i)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Ht(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;l_()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ht("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ht("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function zd(t){return pn(t,"owner")}function km(t){return pn(t,"clientMetadata")}function NI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Nw=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Oe(),r=Oe();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var Ow=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return l_()?8:GM(Eu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new Ow;return this.Ji(e,n,a).next(c=>{if(o.result=c,this.Ui)return this.Yi(e,n,a,c.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(sl()<=sr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(sl()<=sr.DEBUG&&W("QueryEngine","Query:",al(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(sl()<=sr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zn(n))):B.resolve())}ji(e,n){if(eM(n))return B.resolve(null);let i=zn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Xm(n,null,"F"),i=zn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=Oe(...o);return this.zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.Zi(n,c);return this.Xi(n,f,a,u.readTime)?this.ji(e,Xm(n,null,"F")):this.es(e,f,n,u)}))})))}Hi(e,n,i,r){return eM(n)||r.isEqual(fe.min())?B.resolve(null):this.zi.getDocuments(e,i).next(o=>{let a=this.Zi(n,o);return this.Xi(n,a,i,r)?B.resolve(null):(sl()<=sr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),al(n)),this.es(e,a,n,$M(r,-1)).next(c=>c))})}Zi(e,n){let i=new mt(dP(e));return n.forEach((r,o)=>{bh(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return sl()<=sr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",al(n)),this.zi.getDocumentsMatchingQuery(e,n,Ti.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}};var Lw=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Dt(Ne),this.rs=new Tr(o=>fa(o),vh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ug(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function GP(t,e,n,i){return new Lw(t,e,n,i)}function WP(t,e){return U(this,null,function*(){let n=ne(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],u=Oe();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){c.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({us:f,removedBatchIds:a,addedBatchIds:c}))})})})}function t$(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,f,m){let v=f.batch,w=v.keys(),E=B.resolve();return w.forEach(M=>{E=E.next(()=>m.getEntry(u,M)).next(k=>{let F=f.docVersions.get(M);ue(F!==null),k.version.compareTo(F)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=Oe();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function ZP(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function n$(t,e){let n=ne(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((m,v)=>{let w=r.get(v);if(!w)return;c.push(n.Qr.removeMatchingKeys(o,m.removedDocuments,v).next(()=>n.Qr.addMatchingKeys(o,m.addedDocuments,v)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(fn.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(v,E),function(k,F,q){return k.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(w,E,m)&&c.push(n.Qr.updateTargetData(o,E))});let u=Yn(),f=Oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(KP(o,a,e.documentUpdates).next(m=>{u=m.cs,f=m.ls})),!i.isEqual(fe.min())){let m=n.Qr.getLastRemoteSnapshotVersion(o).next(v=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return B.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.ns=r,o))}function KP(t,e,n){let i=Oe(),r=Oe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Yn();return n.forEach((c,u)=>{let f=o.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)}),{cs:a,ls:r}})}function i$(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Cl(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,B.resolve(r)):n.Qr.allocateTargetId(i).next(a=>(r=new Il(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Dl(t,e,n){return U(this,null,function*(){let i=ne(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!rs(a))throw a;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function pg(t,e,n){let i=ne(t),r=fe.min(),o=Oe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){let v=ne(u),w=v.rs.get(m);return w!==void 0?B.resolve(v.ns.get(w)):v.Qr.getTargetData(f,m)}(i,a,zn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,n?r:fe.min(),n?o:Oe())).next(c=>(XP(i,uP(e),c),{documents:c,hs:o})))}function QP(t,e){let n=ne(t),i=ne(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(a=>a?a.target:null))}function YP(t,e){let n=ne(t),i=n.ss.get(e)||fe.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,$M(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(XP(n,e,r),r))}function XP(t,e,n){let i=t.ss.get(e)||fe.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function r$(t,e,n,i){return U(this,null,function*(){let r=ne(t),o=Oe(),a=Yn();for(let f of n){let m=e.Ps(f.metadata.name);f.document&&(o=o.add(m));let v=e.Is(f);v.setReadTime(e.Ts(f.metadata.readTime)),a=a.insert(m,v)}let c=r.os.newChangeBuffer({trackRemovals:!0}),u=yield Cl(r,function(m){return zn(kl(Ye.fromString(`__bundle__/docs/${m}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>KP(f,c,a).next(m=>(c.apply(f),m)).next(m=>r.Qr.removeMatchingKeysForTargetId(f,u.targetId).next(()=>r.Qr.addMatchingKeys(f,o,u.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,m.cs,m.ls)).next(()=>m.cs)))})}function o$(i,r){return U(this,arguments,function*(t,e,n=Oe()){let o=yield Cl(t,zn(RI(e.bundledQuery))),a=ne(t);return a.persistence.runTransaction("Save named query","readwrite",c=>{let u=Gt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return a.$r.saveNamedQuery(c,e);let f=o.withResumeToken(fn.EMPTY_BYTE_STRING,u);return a.ns=a.ns.insert(f.targetId,f),a.Qr.updateTargetData(c,f).next(()=>a.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>a.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>a.$r.saveNamedQuery(c,e))})})}function SM(t,e){return`firestore_clients_${t}_${e}`}function AM(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function C0(t,e){return`firestore_targets_${t}_${e}`}var mg=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new H(r.error.code,r.error.message))),a?new t(e,n,r.state,o):(Ht("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Wd=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new H(i.error.code,i.error.message))),o?new t(e,i.state,r):(Ht("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},gg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=MI();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=WM(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new t(e,o):(Ht("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Fw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ht("SharedClientState",`Failed to parse online state: ${e}`),null)}},uh=class{constructor(){this.activeTargetIds=MI()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Zd=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Dt(Ne),this.started=!1,this.ys=[];let a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=SM(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new uh),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return U(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(SM(this.persistenceKey,i));if(r){let o=gg.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(C0(this.persistenceKey,e));if(i){let r=Wd.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(C0(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>U(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let a=li.oe;if(o!=null)try{let c=JSON.parse(o);ue(typeof c=="number"),a=c}catch(c){Ht("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(n.newValue);i!==li.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new mg(this.currentUser,e,n,i),o=AM(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=AM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=C0(this.persistenceKey,e),o=new Wd(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return gg.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return mg.Es(new Yt(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return Wd.Es(r,n)}xs(e){return Fw.Es(e)}Js(e){return JSON.parse(e)}zs(e){return U(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),a=[],c=[];return o.forEach(u=>{r.has(u)||a.push(u)}),r.forEach(u=>{o.has(u)||c.push(u)}),this.syncEngine.eo(a,c).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=MI();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},_g=class{constructor(){this.no=new uh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new uh,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Vw=class{io(e){}shutdown(){}};var vg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nm=null;function D0(){return Nm===null?Nm=function(){return 268435456+Math.round(2147483648*Math.random())}():Nm++,"0x"+Nm.toString(16)}var s$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Bw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var xn="WebChannelConnection",jw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,a){let c=D0(),u=this.vo(n,i.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${c}:`,u,r);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,a),this.Mo(n,u,f,r).then(m=>(W("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw xi("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",r),m})}xo(n,i,r,o,a,c){return this.Co(n,i,r,o,a)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}vo(n,i){let r=s$[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=D0();return new Promise((a,c)=>{let u=new g0;u.setWithCredentials(!0),u.listenOnce(v0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Fd.NO_ERROR:let m=u.getResponseJson();W(xn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Fd.TIMEOUT:W(xn,`RPC '${e}' ${o} timed out`),c(new H($.DEADLINE_EXCEEDED,"Request time out"));break;case Fd.HTTP_ERROR:let v=u.getStatus();if(W(xn,`RPC '${e}' ${o} failed with status:`,v,"response text:",u.getResponseText()),v>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let E=w?.error;if(E&&E.status&&E.message){let M=function(F){let q=F.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(q)>=0?q:$.UNKNOWN}(E.status);c(new H(M,E.message))}else c(new H($.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new H($.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{W(xn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);W(xn,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,i,15)})}Oo(e,n,i){let r=D0(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=w0(),c=b0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.xmlHttpFactory=new _0({})),this.Fo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;let m=o.join("");W(xn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let v=a.createWebChannel(m,u),w=!1,E=!1,M=new Bw({lo:F=>{E?W(xn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(w||(W(xn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),w=!0),W(xn,`RPC '${e}' stream ${r} sending:`,F),v.send(F))},ho:()=>v.close()}),k=(F,q,ie)=>{F.listen(q,Z=>{try{ie(Z)}catch(ae){setTimeout(()=>{throw ae},0)}})};return k(v,tl.EventType.OPEN,()=>{E||(W(xn,`RPC '${e}' stream ${r} transport opened.`),M.mo())}),k(v,tl.EventType.CLOSE,()=>{E||(E=!0,W(xn,`RPC '${e}' stream ${r} transport closed`),M.po())}),k(v,tl.EventType.ERROR,F=>{E||(E=!0,xi(xn,`RPC '${e}' stream ${r} transport errored:`,F),M.po(new H($.UNAVAILABLE,"The operation could not be completed")))}),k(v,tl.EventType.MESSAGE,F=>{var q;if(!E){let ie=F.data[0];ue(!!ie);let Z=ie,ae=Z.error||((q=Z[0])===null||q===void 0?void 0:q.error);if(ae){W(xn,`RPC '${e}' stream ${r} received error:`,ae);let pe=ae.status,de=function(D){let A=Kt[D];if(A!==void 0)return DP(A)}(pe),S=ae.message;de===void 0&&(de=$.INTERNAL,S="Unknown error status: "+pe+" with message "+ae.message),E=!0,M.po(new H(de,S)),v.close()}else W(xn,`RPC '${e}' stream ${r} received:`,ie),M.yo(ie)}}),k(c,y0.STAT_EVENT,F=>{F.stat===Mm.PROXY?W(xn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Mm.NOPROXY&&W(xn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}};function JP(){return typeof window<"u"?window:null}function Bm(){return typeof document<"u"?document:null}function wh(t){return new iw(t,!0)}var dh=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var yg=class{constructor(e,n,i,r,o,a,c,u){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new dh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return U(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return U(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return U(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ht(n.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new H($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>U(this,null,function*(){this.state=0,this.start()}))}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},zw=class extends yg{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=HU(this.serializer,e),i=function(o){if(!("targetChange"in o))return fe.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?fe.min():a.readTime?Gt(a.readTime):fe.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=sw(this.serializer),n.addTarget=function(o,a){let c,u=a.target;if(c=Qm(u)?{documents:kP(o,u)}:{query:NP(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=TP(o,a.resumeToken);let f=rw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(fe.min())>0){c.readTime=wl(o,a.snapshotVersion.toTimestamp());let f=rw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=GU(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=sw(this.serializer),n.removeTarget=e,this.i_(n)}},Uw=class extends yg{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=qU(e.writeResults,e.commitTime),i=Gt(e.commitTime);return this.listener.A_(i,n)}return ue(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=sw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>ah(this.serializer,i))};this.i_(n)}};var $w=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new H($.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,ow(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H($.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(e,ow(n,i),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H($.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Hw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ht(n),this.y_=!1):W("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var qw=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{i.enqueueAndForget(()=>U(this,null,function*(){os(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(u){return U(this,null,function*(){let f=ne(u);f.M_.add(4),yield Nl(f),f.N_.set("Unknown"),f.M_.delete(4),yield Ih(f)})}(this))}))}),this.N_=new Hw(i,r)}};function Ih(t){return U(this,null,function*(){if(os(t))for(let e of t.x_)yield e(!0)})}function Nl(t){return U(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Vg(t,e){let n=ne(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),FI(n)?LI(n):Ll(n).Xo()&&OI(n,e))}function xl(t,e){let n=ne(t),i=Ll(n);n.F_.delete(e),i.Xo()&&eR(n,e),n.F_.size===0&&(i.Xo()?i.n_():os(n)&&n.N_.set("Unknown"))}function OI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).P_(e)}function eR(t,e){t.L_.xe(e),Ll(t).I_(e)}function LI(t){t.L_=new nw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.N_.w_()}function FI(t){return os(t)&&!Ll(t).Zo()&&t.F_.size>0}function os(t){return ne(t).M_.size===0}function tR(t){t.L_=void 0}function a$(t){return U(this,null,function*(){t.N_.set("Online")})}function c$(t){return U(this,null,function*(){t.F_.forEach((e,n)=>{OI(t,e)})})}function l$(t,e){return U(this,null,function*(){tR(t),FI(t)?(t.N_.D_(e),LI(t)):t.N_.set("Unknown")})}function u$(t,e,n){return U(this,null,function*(){if(t.N_.set("Online"),e instanceof eg&&e.state===2&&e.cause)try{yield function(r,o){return U(this,null,function*(){let a=o.cause;for(let c of o.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield bg(t,i)}else if(e instanceof pl?t.L_.Ke(e):e instanceof Jm?t.L_.He(e):t.L_.We(e),!n.isEqual(fe.min()))try{let i=yield ZP(t.localStore);n.compareTo(i)>=0&&(yield function(o,a){let c=o.L_.rt(a);return c.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.F_.get(f);m&&o.F_.set(f,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,f)=>{let m=o.F_.get(u);if(!m)return;o.F_.set(u,m.withResumeToken(fn.EMPTY_BYTE_STRING,m.snapshotVersion)),eR(o,u);let v=new Il(m.target,u,f,m.sequenceNumber);OI(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield bg(t,i)}})}function bg(t,e,n){return U(this,null,function*(){if(!rs(e))throw e;t.M_.add(1),yield Nl(t),t.N_.set("Offline"),n||(n=()=>ZP(t.localStore)),t.asyncQueue.enqueueRetryable(()=>U(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Ih(t)}))})}function nR(t,e){return e().catch(n=>bg(t,n,e))}function Ol(t){return U(this,null,function*(){let e=ne(t),n=ns(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;d$(e);)try{let r=yield i$(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,h$(e,r)}catch(r){yield bg(e,r)}iR(e)&&rR(e)})}function d$(t){return os(t)&&t.v_.length<10}function h$(t,e){t.v_.push(e);let n=ns(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function iR(t){return os(t)&&!ns(t).Zo()&&t.v_.length>0}function rR(t){ns(t).start()}function f$(t){return U(this,null,function*(){ns(t).V_()})}function p$(t){return U(this,null,function*(){let e=ns(t);for(let n of t.v_)e.d_(n.mutations)})}function m$(t,e,n){return U(this,null,function*(){let i=t.v_.shift(),r=J0.from(i,e,n);yield nR(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Ol(t)})}function g$(t,e){return U(this,null,function*(){e&&ns(t).E_&&(yield function(i,r){return U(this,null,function*(){if(function(a){return CP(a)&&a!==$.ABORTED}(r.code)){let o=i.v_.shift();ns(i).t_(),yield nR(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ol(i)}})}(t,e)),iR(t)&&rR(t)})}function MM(t,e){return U(this,null,function*(){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=os(n);n.M_.add(3),yield Nl(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Ih(n)})}function Gw(t,e){return U(this,null,function*(){let n=ne(t);e?(n.M_.delete(2),yield Ih(n)):e||(n.M_.add(2),yield Nl(n),n.N_.set("Unknown"))})}function Ll(t){return t.B_||(t.B_=function(n,i,r){let o=ne(n);return o.f_(),new zw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:a$.bind(null,t),To:c$.bind(null,t),Ao:l$.bind(null,t),h_:u$.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.B_.t_(),FI(t)?LI(t):t.N_.set("Unknown")):(yield t.B_.stop(),tR(t))}))),t.B_}function ns(t){return t.k_||(t.k_=function(n,i,r){let o=ne(n);return o.f_(),new Uw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:f$.bind(null,t),Ao:g$.bind(null,t),R_:p$.bind(null,t),A_:m$.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.k_.t_(),yield Ol(t)):(yield t.k_.stop(),t.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var Ww=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let a=Date.now()+i,c=new t(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fl(t,e){if(Ht("AsyncQueue",`${e}: ${t}`),rs(t))return new H($.UNAVAILABLE,`${e}: ${t}`);throw t}var wg=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||te.comparator(n.key,i.key):(n,i)=>te.comparator(n.key,i.key),this.keyedMap=Ud(),this.sortedSet=new Dt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Ig=class{constructor(){this.q_=new Dt(te.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):oe():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Tl=class t{constructor(e,n,i,r,o,a,c,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){let a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new t(e,n,wg.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var Zw=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Kw=class{constructor(){this.queries=new Tr(e=>lP(e),yh),this.onlineState="Unknown",this.z_=new Set}};function VI(t,e){return U(this,null,function*(){let n=ne(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new Zw,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(a){let c=Fl(a,`Initialization of query '${al(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&jI(n)})}function BI(t,e){return U(this,null,function*(){let n=ne(t),i=e.query,r=3,o=n.queries.get(i);if(o){let a=o.U_.indexOf(e);a>=0&&(o.U_.splice(a,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function _$(t,e){let n=ne(t),i=!1;for(let r of e){let o=r.query,a=n.queries.get(o);if(a){for(let c of a.U_)c.H_(r)&&(i=!0);a.K_=r}}i&&jI(n)}function v$(t,e,n){let i=ne(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function jI(t){t.z_.forEach(e=>{e.next()})}var Qw,PM;(PM=Qw||(Qw={})).J_="default",PM.Cache="cache";var hh=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Tl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Qw.Cache}};var Yw=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Eg=class{constructor(e){this.serializer=e}Ps(e){return Er(this.serializer,e)}Is(e){return e.metadata.exists?RP(this.serializer,e.document,!1):Jt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Gt(e)}},Xw=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=oR(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=Ye.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new Eg(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let a of r.metadata.queries){let c=(n.get(a)||Oe()).add(o);n.set(a,c)}}return n}complete(){return U(this,null,function*(){let e=yield r$(this.localStore,new Eg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield o$(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function oR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Cg=class{constructor(e){this.key=e}},Dg=class{constructor(e){this.key=e}},xg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Oe(),this.mutatedKeys=Oe(),this.Ia=dP(e),this.Ta=new wg(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new Ig,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{let w=r.get(m),E=bh(this.query,v)?v:null,M=!!w&&this.mutatedKeys.has(w.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),F=!1;w&&E?w.data.isEqual(E.data)?M!==k&&(i.track({type:3,doc:E}),F=!0):this.Ra(w,E)||(i.track({type:2,doc:E}),F=!0,(u&&this.Ia(E,u)>0||f&&this.Ia(E,f)<0)&&(c=!0)):!w&&E?(i.track({type:0,doc:E}),F=!0):w&&!E&&(i.track({type:1,doc:w}),F=!0,(u||f)&&(c=!0)),F&&(E?(a=a.add(E),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ta:a,Aa:i,Xi:c,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((m,v)=>function(E,M){let k=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return k(E)-k(M)}(m.type,v.type)||this.Ia(m.doc,v.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,f=u!==this.ha;return this.ha=u,a.length!==0||f?{snapshot:new Tl(this.query,e.Ta,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Ig,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Oe(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new Dg(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new Cg(i))}),n}pa(e){this.la=e.hs,this.Pa=Oe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Tl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Jw=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},eI=class{constructor(e){this.key=e,this.wa=!1}},tI=class{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Tr(c=>lP(c),yh),this.Da=new Map,this.Ca=new Set,this.va=new Dt(te.comparator),this.Fa=new Map,this.Ma=new lh,this.xa={},this.Oa=new Map,this.Na=El.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function y$(t,e,n=!0){return U(this,null,function*(){let i=Bg(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield sR(i,e,n,!0),r})}function b$(t,e){return U(this,null,function*(){let n=Bg(t);yield sR(n,e,!0,!1)})}function sR(t,e,n,i){return U(this,null,function*(){let r=yield Cl(t.localStore,zn(e)),o=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",c;return i&&(c=yield zI(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Vg(t.remoteStore,r),c})}function zI(t,e,n,i,r){return U(this,null,function*(){t.Ba=(v,w,E)=>function(k,F,q,ie){return U(this,null,function*(){let Z=F.view.da(q);Z.Xi&&(Z=yield pg(k.localStore,F.query,!1).then(({documents:S})=>F.view.da(S,Z)));let ae=ie&&ie.targetChanges.get(F.targetId),pe=ie&&ie.targetMismatches.get(F.targetId)!=null,de=F.view.applyChanges(Z,k.isPrimaryClient,ae,pe);return nI(k,F.targetId,de.fa),de.snapshot})}(t,v,w,E);let o=yield pg(t.localStore,e,!0),a=new xg(e,o.hs),c=a.da(o.documents),u=oh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(c,t.isPrimaryClient,u);nI(t,n,f.fa);let m=new Jw(e,n,a);return t.ba.set(e,m),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),f.snapshot})}function w$(t,e,n){return U(this,null,function*(){let i=ne(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(a=>!yh(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&xl(i.remoteStore,r.targetId),Sl(i,r.targetId)}).catch(is))):(Sl(i,r.targetId),yield Dl(i.localStore,r.targetId,!0))})}function I$(t,e){return U(this,null,function*(){let n=ne(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),xl(n.remoteStore,i.targetId))})}function E$(t,e,n){return U(this,null,function*(){let i=qI(t);try{let r=yield function(a,c){let u=ne(a),f=Ft.now(),m=c.reduce((E,M)=>E.add(M.key),Oe()),v,w;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let M=Yn(),k=Oe();return u.os.getEntries(E,m).next(F=>{M=F,M.forEach((q,ie)=>{ie.isValidDocument()||(k=k.add(q))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,M)).next(F=>{v=F;let q=[];for(let ie of c){let Z=FU(ie,v.get(ie.key).overlayedDocument);Z!=null&&q.push(new Gi(ie.key,Z,nP(Z.value.mapValue),jt.exists(!0)))}return u.mutationQueue.addMutationBatch(E,f,q,c)}).next(F=>{w=F;let q=F.applyToLocalDocumentSet(v,k);return u.documentOverlayCache.saveOverlays(E,F.batchId,q)})}).then(()=>({batchId:w.batchId,changes:fP(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,u){let f=a.xa[a.currentUser.toKey()];f||(f=new Dt(Ne)),f=f.insert(c,u),a.xa[a.currentUser.toKey()]=f}(i,r.batchId,n),yield so(i,r.changes),yield Ol(i.remoteStore)}catch(r){let o=Fl(r,"Failed to persist write");n.reject(o)}})}function aR(t,e){return U(this,null,function*(){let n=ne(t);try{let i=yield n$(n.localStore,e);e.targetChanges.forEach((r,o)=>{let a=n.Fa.get(o);a&&(ue(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?ue(a.wa):r.removedDocuments.size>0&&(ue(a.wa),a.wa=!1))}),yield so(n,i,e)}catch(i){yield is(i)}})}function RM(t,e,n){let i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,a)=>{let c=a.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){let u=ne(a);u.onlineState=c;let f=!1;u.queries.forEach((m,v)=>{for(let w of v.U_)w.j_(c)&&(f=!0)}),f&&jI(u)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function C$(t,e,n){return U(this,null,function*(){let i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let a=new Dt(te.comparator);a=a.insert(o,Jt.newNoDocument(o,fe.min()));let c=Oe().add(o),u=new rh(fe.min(),new Map,new Dt(Ne),a,c);yield aR(i,u),i.va=i.va.remove(o),i.Fa.delete(e),HI(i)}else yield Dl(i.localStore,e,!1).then(()=>Sl(i,e,n)).catch(is)})}function D$(t,e){return U(this,null,function*(){let n=ne(t),i=e.batch.batchId;try{let r=yield t$(n.localStore,e);$I(n,i,null),UI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield so(n,r)}catch(r){yield is(r)}})}function x$(t,e,n){return U(this,null,function*(){let i=ne(t);try{let r=yield function(a,c){let u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,c).next(v=>(ue(v!==null),m=v.keys(),u.mutationQueue.removeMutationBatch(f,v))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);$I(i,e,n),UI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield so(i,r)}catch(r){yield is(r)}})}function T$(t,e){return U(this,null,function*(){let n=ne(t);os(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(a){let c=ne(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=Fl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function UI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function $I(t,e,n){let i=ne(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Sl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||cR(t,i)})}function cR(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(xl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),HI(t))}function nI(t,e,n){for(let i of n)i instanceof Cg?(t.Ma.addReference(i.key,e),S$(t,i)):i instanceof Dg?(W("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||cR(t,i.key)):oe()}function S$(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(W("SyncEngine","New document in limbo: "+n),t.Ca.add(i),HI(t))}function HI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new te(Ye.fromString(e)),i=t.Na.next();t.Fa.set(i,new eI(n)),t.va=t.va.insert(n,i),Vg(t.remoteStore,new Il(zn(kl(n.path)),i,"TargetPurposeLimboResolution",li.oe))}}function so(t,e,n){return U(this,null,function*(){let i=ne(t),r=[],o=[],a=[];i.ba.isEmpty()||(i.ba.forEach((c,u)=>{a.push(i.Ba(u,e,n).then(f=>{if((f||n)&&i.isPrimaryClient){let m=f&&!f.fromCache;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){r.push(f);let m=Nw.Ki(u.targetId,f);o.push(m)}}))}),yield Promise.all(a),i.Sa.h_(r),yield function(u,f){return U(this,null,function*(){let m=ne(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>B.forEach(f,w=>B.forEach(w.qi,E=>m.persistence.referenceDelegate.addReference(v,w.targetId,E)).next(()=>B.forEach(w.Qi,E=>m.persistence.referenceDelegate.removeReference(v,w.targetId,E)))))}catch(v){if(!rs(v))throw v;W("LocalStore","Failed to update sequence numbers: "+v)}for(let v of f){let w=v.targetId;if(!v.fromCache){let E=m.ns.get(w),M=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(M);m.ns=m.ns.insert(w,k)}}})}(i.localStore,o))})}function A$(t,e){return U(this,null,function*(){let n=ne(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let i=yield WP(n.localStore,e);n.currentUser=e,function(o,a){o.Oa.forEach(c=>{c.forEach(u=>{u.reject(new H($.CANCELLED,a))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield so(n,i.us)}})}function M$(t,e){let n=ne(t),i=n.Fa.get(e);if(i&&i.wa)return Oe().add(i.key);{let r=Oe(),o=n.Da.get(e);if(!o)return r;for(let a of o){let c=n.ba.get(a);r=r.unionWith(c.view.Ea)}return r}}function P$(t,e){return U(this,null,function*(){let n=ne(t),i=yield pg(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&nI(n,e.targetId,r.fa),r})}function R$(t,e){return U(this,null,function*(){let n=ne(t);return YP(n.localStore,e).then(i=>so(n,i))})}function k$(t,e,n,i){return U(this,null,function*(){let r=ne(t),o=yield function(c,u){let f=ne(c),m=ne(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",v=>m.vn(v,u).next(w=>w?f.localDocuments.getDocuments(v,w):B.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Ol(r.remoteStore):n==="acknowledged"||n==="rejected"?($I(r,e,i||null),UI(r,e),function(c,u){ne(ne(c).mutationQueue).Mn(u)}(r.localStore,e)):oe(),yield so(r,o)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function N$(t,e){return U(this,null,function*(){let n=ne(t);if(Bg(n),qI(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield kM(n,i.toArray());n.La=!0,yield Gw(n.remoteStore,!0);for(let o of r)Vg(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Sl(n,a),Dl(n.localStore,a,!0))),xl(n.remoteStore,a)}),yield r,yield kM(n,i),function(a){let c=ne(a);c.Fa.forEach((u,f)=>{xl(c.remoteStore,f)}),c.Ma.mr(),c.Fa=new Map,c.va=new Dt(te.comparator)}(n),n.La=!1,yield Gw(n.remoteStore,!1)}})}function kM(t,e,n){return U(this,null,function*(){let i=ne(t),r=[],o=[];for(let a of e){let c,u=i.Da.get(a);if(u&&u.length!==0){c=yield Cl(i.localStore,zn(u[0]));for(let f of u){let m=i.ba.get(f),v=yield P$(i,m);v.snapshot&&o.push(v.snapshot)}}else{let f=yield QP(i.localStore,a);c=yield Cl(i.localStore,f),yield zI(i,lR(f),a,!1,c.resumeToken)}r.push(c)}return i.Sa.h_(o),r})}function lR(t){return cP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function O$(t){return function(n){return ne(ne(n).persistence).Bi()}(ne(t).localStore)}function L$(t,e,n,i){return U(this,null,function*(){let r=ne(t);if(r.La)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let a=yield YP(r.localStore,uP(o[0])),c=rh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",fn.EMPTY_BYTE_STRING);yield so(r,a,c);break}case"rejected":yield Dl(r.localStore,e,!0),Sl(r,e,i);break;default:oe()}})}function F$(t,e,n){return U(this,null,function*(){let i=Bg(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){W("SyncEngine","Adding an already active target "+r);continue}let o=yield QP(i.localStore,r),a=yield Cl(i.localStore,o);yield zI(i,lR(o),a.targetId,!1,a.resumeToken),Vg(i.remoteStore,a)}for(let r of n)i.Da.has(r)&&(yield Dl(i.localStore,r,!1).then(()=>{xl(i.remoteStore,r),Sl(i,r)}).catch(is))}})}function Bg(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=aR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C$.bind(null,e),e.Sa.h_=_$.bind(null,e.eventManager),e.Sa.ka=v$.bind(null,e.eventManager),e}function qI(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x$.bind(null,e),e}function V$(t,e,n){let i=ne(t);(function(o,a,c){return U(this,null,function*(){try{let u=yield a.getMetadata();if(yield function(E,M){let k=ne(E),F=Gt(M.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",q=>k.$r.getBundleMetadata(q,M.id)).then(q=>!!q&&q.createTime.compareTo(F)>=0)}(o.localStore,u))return yield a.close(),c._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(u)),Promise.resolve(new Set);c._updateProgress(oR(u));let f=new Xw(u,o.localStore,a.serializer),m=yield a.qa();for(;m;){let w=yield f._a(m);w&&c._updateProgress(w),m=yield a.qa()}let v=yield f.complete();return yield so(o,v.ca,void 0),yield function(E,M){let k=ne(E);return k.persistence.runTransaction("Save bundle","readwrite",F=>k.$r.saveBundleMetadata(F,M))}(o.localStore,u),c._completeWith(v.progress),Promise.resolve(v.ua)}catch(u){return xi("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var fh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){this.serializer=wh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return GP(this.persistence,new fg,e.initialUser,this.serializer)}createPersistence(e){return new dg(hg.Hr,this.serializer)}createSharedClientState(e){return new _g}terminate(){return U(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Tg=class t extends fh{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){yield a_(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield qI(this.Qa.syncEngine),yield Ol(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return GP(this.persistence,new fg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new yw(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new F0(n,this.persistence);return new L0(e.asyncQueue,i)}createPersistence(e){let n=NI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Di.withCacheSize(this.cacheSizeBytes):Di.DEFAULT;return new kw(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,JP(),Bm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new _g}},iI=class t extends Tg{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return U(this,null,function*(){yield a_(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Zd&&(this.sharedClientState.syncEngine={Zs:k$.bind(null,n),Xs:L$.bind(null,n),eo:F$.bind(null,n),Bi:O$.bind(null,n),Ys:R$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>U(this,null,function*(){yield N$(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=JP();if(!Zd.D(n))throw new H($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=NI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zd(n,e.asyncQueue,i,e.clientId,e.initialUser)}},ph=class{initialize(e,n){return U(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=A$.bind(null,this.syncEngine),yield Gw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Kw}()}createDatastore(e){let n=wh(e.databaseInfo.databaseId),i=function(o){return new jw(o)}(e.databaseInfo);return function(o,a,c,u){return new $w(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,c){return new qw(i,r,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>RM(this.syncEngine,n,0),function(){return vg.D()?new vg:new Vw}())}createSyncEngine(e,n){return function(r,o,a,c,u,f,m){let v=new tI(r,o,a,c,u,f);return m&&(v.La=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return U(this,null,function*(){var e;yield function(i){return U(this,null,function*(){let r=ne(i);W("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Nl(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function NM(t,e=10240){let n=0;return{read(){return U(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return U(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Al=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ht("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var rI=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Xt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return U(this,null,function*(){return this.metadata.promise})}qa(){return U(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return U(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new Yw(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return U(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return U(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return U(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var oI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return U(this,null,function*(){let a=ne(r),c={documents:o.map(v=>sh(a.serializer,v))},u=yield a.xo("BatchGetDocuments",a.serializer.databaseId,Ye.emptyPath(),c,o.length),f=new Map;u.forEach(v=>{let w=$U(a.serializer,v);f.set(w.key.toString(),w)});let m=[];return o.forEach(v=>{let w=f.get(v.toString());ue(!!w),m.push(w)}),m})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ts(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=te.fromPath(i);this.mutations.push(new th(r,this.precondition(r)))}),yield function(i,r){return U(this,null,function*(){let o=ne(i),a={writes:r.map(c=>ah(o.serializer,c))};yield o.Co("Commit",o.serializer.databaseId,Ye.emptyPath(),a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe();n=fe.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new H($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(fe.min())?jt.exists(!1):jt.updateTime(n):jt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(fe.min()))throw new H($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return jt.updateTime(n)}return jt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var sI=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new dh(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>U(this,null,function*(){let e=new oI(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!_h(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!CP(n)}return!1}};var aI=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Yt.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>U(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Fl(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function jm(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>U(this,null,function*(){i.isEqual(r)||(yield WP(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function cI(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield GI(t);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>MM(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>MM(e.remoteStore,r)),t._onlineComponents=e})}function uR(t){return t.name==="FirebaseError"?t.code===$.FAILED_PRECONDITION||t.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function GI(t){return U(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!uR(n))throw n;xi("Error using user provided cache. Falling back to memory cache: "+n),yield jm(t,new fh)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield jm(t,new fh);return t._offlineComponents})}function jg(t){return U(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield cI(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield cI(t,new ph))),t._onlineComponents})}function dR(t){return GI(t).then(e=>e.persistence)}function WI(t){return GI(t).then(e=>e.localStore)}function hR(t){return jg(t).then(e=>e.remoteStore)}function ZI(t){return jg(t).then(e=>e.syncEngine)}function B$(t){return jg(t).then(e=>e.datastore)}function Ml(t){return U(this,null,function*(){let e=yield jg(t),n=e.eventManager;return n.onListen=y$.bind(null,e.syncEngine),n.onUnlisten=w$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I$.bind(null,e.syncEngine),n})}function j$(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield dR(t),n=yield hR(t);return e.setNetworkEnabled(!0),function(r){let o=ne(r);return o.M_.delete(0),Ih(o)}(n)}))}function z$(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield dR(t),n=yield hR(t);return e.setNetworkEnabled(!1),function(r){return U(this,null,function*(){let o=ne(r);o.M_.add(0),yield Nl(o),o.N_.set("Offline")})}(n)}))}function U$(t,e){let n=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield function(f,m){let v=ne(f);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,m))}(r,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new H($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let u=Fl(c,`Failed to get document '${o} from cache`);a.reject(u)}})}(yield WI(t),e,n)})),n.promise}function fR(t,e,n={}){let i=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Al({next:w=>{a.enqueueAndForget(()=>BI(o,v));let E=w.docs.has(c);!E&&w.fromCache?f.reject(new H($.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&u&&u.source==="server"?f.reject(new H($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new hh(kl(c.path),m,{includeMetadataChanges:!0,ra:!0});return VI(o,v)}(yield Ml(t),t.asyncQueue,e,n,i)})),i.promise}function $$(t,e){let n=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield pg(r,o,!0),u=new xg(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){let u=Fl(c,`Failed to execute query '${o} against cache`);a.reject(u)}})}(yield WI(t),e,n)})),n.promise}function pR(t,e,n={}){let i=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Al({next:w=>{a.enqueueAndForget(()=>BI(o,v)),w.fromCache&&u.source==="server"?f.reject(new H($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new hh(c,m,{includeMetadataChanges:!0,ra:!0});return VI(o,v)}(yield Ml(t),t.asyncQueue,e,n,i)})),i.promise}function H$(t,e){let n=new Al(e);return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){ne(r).z_.add(o),o.next()}(yield Ml(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){ne(r).z_.delete(o)}(yield Ml(t),n)}))}}function q$(t,e,n,i){let r=function(a,c){let u;return u=typeof a=="string"?xP().encode(a):a,function(m,v){return new rI(m,v)}(function(m,v){if(m instanceof Uint8Array)return NM(m,v);if(m instanceof ArrayBuffer)return NM(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),c)}(n,wh(e));t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){V$(yield ZI(t),r,i)}))}function G$(t,e){return t.asyncQueue.enqueue(()=>U(this,null,function*(){return function(i,r){let o=ne(i);return o.persistence.runTransaction("Get named query","readonly",a=>o.$r.getNamedQuery(a,r))}(yield WI(t),e)}))}function mR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var OM=new Map;function KI(t,e,n){if(!n)throw new H($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QI(t,e,n,i){if(e===!0&&i===!0)throw new H($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LM(t){if(!te.isDocumentKey(t))throw new H($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function FM(t){if(te.isDocumentKey(t))throw new H($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Xe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=zg(t);throw new H($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function gR(t,e){if(e<=0)throw new H($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Sg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new H($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mR((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},_a=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new x0;switch(i.type){case"firstParty":return new M0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=OM.get(n);i&&(W("ComponentProvider","Removing Datastore"),OM.delete(n),i.terminate())}(this),Promise.resolve()}};function _R(t,e,n,i={}){var r;let o=(t=Xe(t,_a))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&xi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=Yt.MOCK_USER;else{c=$E(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new H($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yt(f)}t._authCredentials=new T0(new zm(c,u))}}var bn=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},wt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Cr=class t extends bn{constructor(e,n,i){super(e,n,kl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wt(this.firestore,null,new te(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function YI(t,e,...n){if(t=Ot(t),KI("collection","path",e),t instanceof _a){let i=Ye.fromString(e,...n);return FM(i),new Cr(t,null,i)}{if(!(t instanceof wt||t instanceof Cr))throw new H($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ye.fromString(e,...n));return FM(i),new Cr(t.firestore,null,i)}}function vR(t,e){if(t=Xe(t,_a),KI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bn(t,null,function(i){return new qi(Ye.emptyPath(),i)}(e))}function Eh(t,e,...n){if(t=Ot(t),arguments.length===1&&(e=Um.newId()),KI("doc","path",e),t instanceof _a){let i=Ye.fromString(e,...n);return LM(i),new wt(t,null,new te(i))}{if(!(t instanceof wt||t instanceof Cr))throw new H($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ye.fromString(e,...n));return LM(i),new wt(t.firestore,t instanceof Cr?t.converter:null,new te(i))}}function XI(t,e){return t=Ot(t),e=Ot(e),(t instanceof wt||t instanceof Cr)&&(e instanceof wt||e instanceof Cr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function JI(t,e){return t=Ot(t),e=Ot(e),t instanceof bn&&e instanceof bn&&t.firestore===e.firestore&&yh(t._query,e._query)&&t.converter===e.converter}var lI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new dh(this,"async_queue_retry"),this.hu=()=>{let n=Bm();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Bm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Bm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Xt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return U(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!rs(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw Ht("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=Ww.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&oe()}verifyOperationInProgress(){}du(){return U(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function uI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var dI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var yR=-1,Pt=class extends _a{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new lI}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||bR(this),this._firestoreClient.terminate()}};function rn(t){return t._firestoreClient||bR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bR(t){var e,n,i;let r=t._freezeSettings(),o=function(c,u,f,m){return new V0(c,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,mR(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new aI(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function wR(t,e){MR(t=Xe(t,Pt));let n=rn(t);if(n._uninitializedComponentsProvider)throw new H($.FAILED_PRECONDITION,"SDK cache is already specified.");xi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new ph;return ER(n,r,new Tg(r,i.cacheSizeBytes,e?.forceOwnership))}function IR(t){MR(t=Xe(t,Pt));let e=rn(t);if(e._uninitializedComponentsProvider)throw new H($.FAILED_PRECONDITION,"SDK cache is already specified.");xi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new ph;return ER(e,i,new iI(i,n.cacheSizeBytes))}function ER(t,e,n){let i=new Xt;return t.asyncQueue.enqueue(()=>U(this,null,function*(){try{yield jm(t,n),yield cI(t,e),i.resolve()}catch(r){let o=r;if(!uR(o))throw o;xi("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function CR(t){if(t._initialized&&!t._terminated)throw new H($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Xt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{yield function(i){return U(this,null,function*(){if(!Zo.D())return Promise.resolve();let r=i+"main";yield Zo.delete(r)})}(NI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function DR(t){return function(n){let i=new Xt;return n.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return T$(yield ZI(n),i)})),i.promise}(rn(t=Xe(t,Pt)))}function xR(t){return j$(rn(t=Xe(t,Pt)))}function TR(t){return z$(rn(t=Xe(t,Pt)))}function SR(t,e){let n=rn(t=Xe(t,Pt)),i=new dI;return q$(n,t._databaseId,e,i),i}function AR(t,e){return G$(rn(t=Xe(t,Pt)),e).then(n=>n?new bn(t,null,n.query):null)}function MR(t){if(t._initialized||t._terminated)throw new H($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Sr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(fn.fromBase64String(e))}catch(n){throw new H($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Wi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ro=class{constructor(e){this._methodName=e}};var va=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}};var W$=/^__.*__$/,hI=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms):new es(e,this.data,n,this.fieldTransforms)}},Ag=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Gi(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function PR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}var Mg=class t{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Pg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(PR(this.fu)&&W$.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},fI=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||wh(e)}Fu(e,n,i,r=!1){return new Mg({fu:e,methodName:n,vu:i,path:qt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ia(t){let e=t._freezeSettings(),n=wh(t._databaseId);return new fI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ug(t,e,n,i,r,o={}){let a=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);nE("Data must be an object, but it was:",a,i);let c=NR(i,a),u,f;if(o.merge)u=new ui(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let v of o.mergeFields){let w=vI(e,v,n);if(!a.contains(w))throw new H($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);LR(m,w)||m.push(w)}u=new ui(m),f=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,f=a.fieldTransforms;return new hI(new Tn(c),u,f)}var mh=class t extends ro{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function RR(t,e,n){return new Mg({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var pI=class t extends ro{_toFieldTransform(e){return new pa(e.path,new Xo)}isEqual(e){return e instanceof t}},mI=class t extends ro{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=RR(this,e,!0),i=this.Mu.map(o=>Ea(o,n)),r=new no(i);return new pa(e.path,r)}isEqual(e){return e instanceof t&&u_(this.Mu,e.Mu)}},gI=class t extends ro{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=RR(this,e,!0),i=this.Mu.map(o=>Ea(o,n)),r=new io(i);return new pa(e.path,r)}isEqual(e){return e instanceof t&&u_(this.Mu,e.Mu)}},_I=class t extends ro{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Jo(e.serializer,_P(e.serializer,this.xu));return new pa(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function eE(t,e,n,i){let r=t.Fu(1,e,n);nE("Data must be an object, but it was:",r,i);let o=[],a=Tn.empty();wa(i,(u,f)=>{let m=iE(e,u,n);f=Ot(f);let v=r.Su(m);if(f instanceof mh)o.push(m);else{let w=Ea(f,v);w!=null&&(o.push(m),a.set(m,w))}});let c=new ui(o);return new Ag(a,c,r.fieldTransforms)}function tE(t,e,n,i,r,o){let a=t.Fu(1,e,n),c=[vI(e,i,n)],u=[r];if(o.length%2!=0)throw new H($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(vI(e,o[w])),u.push(o[w+1]);let f=[],m=Tn.empty();for(let w=c.length-1;w>=0;--w)if(!LR(f,c[w])){let E=c[w],M=u[w];M=Ot(M);let k=a.Su(E);if(M instanceof mh)f.push(E);else{let F=Ea(M,k);F!=null&&(f.push(E),m.set(E,F))}}let v=new ui(f);return new Ag(m,v,a.fieldTransforms)}function kR(t,e,n,i=!1){return Ea(n,t.Fu(i?4:3,e))}function Ea(t,e){if(OR(t=Ot(t)))return nE("Unsupported field value:",e,t),NR(t,e);if(t instanceof ro)return function(i,r){if(!PR(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let c of i){let u=Ea(c,r.bu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ot(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _P(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Ft.fromDate(i);return{timestampValue:wl(r.serializer,o)}}if(i instanceof Ft){let o=new Ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wl(r.serializer,o)}}if(i instanceof va)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sr)return{bytesValue:TP(r.serializer,i._byteString)};if(i instanceof wt){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PI(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${zg(i)}`)}(t,e)}function NR(t,e){let n={};return JM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):wa(t,(i,r)=>{let o=Ea(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function OR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof va||t instanceof Sr||t instanceof wt||t instanceof ro)}function nE(t,e,n){if(!OR(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=zg(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function vI(t,e,n){if((e=Ot(e))instanceof Wi)return e._internalPath;if(typeof e=="string")return iE(t,e);throw Pg("Field path arguments must be of type string or ",t,!1,void 0,n)}var Z$=new RegExp("[~\\*/\\[\\]]");function iE(t,e,n){if(e.search(Z$)>=0)throw Pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wi(...e.split("."))._internalPath}catch{throw Pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pg(t,e,n,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new H($.INVALID_ARGUMENT,c+t+u)}function LR(t,e){return t.some(n=>n.isEqual(e))}var ya=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field($g("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},yI=class extends ya{data(){return super.data()}};function $g(t,e){return typeof e=="string"?iE(t,e):e instanceof Wi?e._internalPath:e._delegate._internalPath}function FR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var gh=class{},ba=class extends gh{};function ao(t,e,...n){let i=[];e instanceof gh&&i.push(e),i=i.concat(n),function(o){let a=o.filter(u=>u instanceof bI).length,c=o.filter(u=>u instanceof Rg).length;if(a>1||a>0&&c>0)throw new H($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Rg=class t extends ba{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return WR(e._query,n),new bn(e.firestore,e.converter,Y0(e._query,n))}_parse(e){let n=Ia(e.firestore);return function(o,a,c,u,f,m,v){let w;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){BM(v,m);let E=[];for(let M of v)E.push(VM(u,o,M));w={arrayValue:{values:E}}}else w=VM(u,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||BM(v,m),w=kR(c,a,v,m==="in"||m==="not-in");return Ge.create(f,m,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function VR(t,e,n){let i=e,r=$g("where",t);return Rg._create(r,i,n)}var bI=class t extends gh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ct.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r,c=o.getFlattenedFilters();for(let u of c)WR(a,u),a=Y0(a,u)}(e._query,n),new bn(e.firestore,e.converter,Y0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var wI=class t extends ba{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,a){if(r.startAt!==null)throw new H($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new H($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ha(o,a)}(e._query,this._field,this._direction);return new bn(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new qi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function BR(t,e="asc"){let n=e,i=$g("orderBy",t);return wI._create(i,n)}var kg=class t extends ba{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new bn(e.firestore,e.converter,Xm(e._query,this._limit,this._limitType))}};function jR(t){return gR("limit",t),kg._create("limit",t,"F")}function zR(t){return gR("limitToLast",t),kg._create("limitToLast",t,"L")}var Ng=class t extends ba{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=GR(e,this.type,this._docOrFields,this._inclusive);return new bn(e.firestore,e.converter,function(r,o){return new qi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function UR(...t){return Ng._create("startAt",t,!0)}function $R(...t){return Ng._create("startAfter",t,!1)}var Og=class t extends ba{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=GR(e,this.type,this._docOrFields,this._inclusive);return new bn(e.firestore,e.converter,function(r,o){return new qi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function HR(...t){return Og._create("endBefore",t,!1)}function qR(...t){return Og._create("endAt",t,!0)}function GR(t,e,n,i){if(n[0]=Ot(n[0]),n[0]instanceof ya)return function(o,a,c,u,f){if(!u)throw new H($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let m=[];for(let v of fl(o))if(v.field.isKeyField())m.push(da(a,u.key));else{let w=u.data.field(v.field);if(Fg(w))throw new H($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let E=v.field.canonicalString();throw new H($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}m.push(w)}return new xr(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Ia(t.firestore);return function(a,c,u,f,m,v){let w=a.explicitOrderBy;if(m.length>w.length)throw new H($.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let M=0;M<m.length;M++){let k=m[M];if(w[M].field.isKeyField()){if(typeof k!="string")throw new H($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof k}`);if(!AI(a)&&k.indexOf("/")!==-1)throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${k}' contains a slash.`);let F=a.path.child(Ye.fromString(k));if(!te.isDocumentKey(F))throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);let q=new te(F);E.push(da(c,q))}else{let F=kR(u,f,k);E.push(F)}}return new xr(E,v)}(t._query,t.firestore._databaseId,r,e,n,i)}}function VM(t,e,n){if(typeof(n=Ot(n))=="string"){if(n==="")throw new H($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!AI(e)&&n.indexOf("/")!==-1)throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Ye.fromString(n));if(!te.isDocumentKey(i))throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return da(t,new te(i))}if(n instanceof wt)return da(t,n._key);throw new H($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zg(n)}.`)}function BM(t,e){if(!Array.isArray(t)||t.length===0)throw new H($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function WR(t,e){let n=function(r,o){for(let a of r)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Pl=class{convertValue(e,n="none"){switch(ua(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return wa(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new va(Bt(e.latitude),Bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=TI(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Xd(e));default:return null}}convertTimestamp(e){let n=to(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Ye.fromString(e);ue(VP(i));let r=new Qo(i.get(1),i.get(3)),o=new te(i.popFirst(5));return r.isEqual(n)||Ht(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Hg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var II=class extends Pl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}};var eo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Si=class extends ya{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Go(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field($g("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Go=class extends Si{data(e={}){return super.data(e)}},Zi=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new eo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Go(this._firestore,this._userDataWriter,i.key,i,new eo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let u=new Go(r._firestore,r._userDataWriter,c.doc.key,c.doc,new eo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Go(r._firestore,r._userDataWriter,c.doc.key,c.doc,new eo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:K$(c.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function K$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}function rE(t,e){return t instanceof Si&&e instanceof Si?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Zi&&e instanceof Zi&&t._firestore===e._firestore&&JI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function ZR(t){t=Xe(t,wt);let e=Xe(t.firestore,Pt);return fR(rn(e),t._key).then(n=>cE(e,t,n))}var oo=class extends Pl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wt(this.firestore,null,n)}};function KR(t){t=Xe(t,wt);let e=Xe(t.firestore,Pt),n=rn(e),i=new oo(e);return U$(n,t._key).then(r=>new Si(e,i,t._key,r,new eo(r!==null&&r.hasLocalMutations,!0),t.converter))}function QR(t){t=Xe(t,wt);let e=Xe(t.firestore,Pt);return fR(rn(e),t._key,{source:"server"}).then(n=>cE(e,t,n))}function YR(t){t=Xe(t,bn);let e=Xe(t.firestore,Pt),n=rn(e),i=new oo(e);return FR(t._query),pR(n,t._query).then(r=>new Zi(e,i,t,r))}function XR(t){t=Xe(t,bn);let e=Xe(t.firestore,Pt),n=rn(e),i=new oo(e);return $$(n,t._query).then(r=>new Zi(e,i,t,r))}function JR(t){t=Xe(t,bn);let e=Xe(t.firestore,Pt),n=rn(e),i=new oo(e);return pR(n,t._query,{source:"server"}).then(r=>new Zi(e,i,t,r))}function oE(t,e,n){t=Xe(t,wt);let i=Xe(t.firestore,Pt),r=Hg(t.converter,e,n);return Vl(i,[Ug(Ia(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,jt.none())])}function sE(t,e,n,...i){t=Xe(t,wt);let r=Xe(t.firestore,Pt),o=Ia(r),a;return a=typeof(e=Ot(e))=="string"||e instanceof Wi?tE(o,"updateDoc",t._key,e,n,i):eE(o,"updateDoc",t._key,e),Vl(r,[a.toMutation(t._key,jt.exists(!0))])}function ek(t){return Vl(Xe(t.firestore,Pt),[new ts(t._key,jt.none())])}function tk(t,e){let n=Xe(t.firestore,Pt),i=Eh(t),r=Hg(t.converter,e);return Vl(n,[Ug(Ia(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,jt.exists(!1))]).then(()=>i)}function aE(t,...e){var n,i,r;t=Ot(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||uI(e[a])||(o=e[a],a++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(uI(e[a])){let v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[a+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let u,f,m;if(t instanceof wt)f=Xe(t.firestore,Pt),m=kl(t._key.path),u={next:v=>{e[a]&&e[a](cE(f,t,v))},error:e[a+1],complete:e[a+2]};else{let v=Xe(t,bn);f=Xe(v.firestore,Pt),m=v._query;let w=new oo(f);u={next:E=>{e[a]&&e[a](new Zi(f,w,v,E))},error:e[a+1],complete:e[a+2]},FR(t._query)}return function(w,E,M,k){let F=new Al(k),q=new hh(E,F,M);return w.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return VI(yield Ml(w),q)})),()=>{F.$a(),w.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return BI(yield Ml(w),q)}))}}(rn(f),m,c,u)}function nk(t,e){return H$(rn(t=Xe(t,Pt)),uI(e)?e:{next:e})}function Vl(t,e){return function(i,r){let o=new Xt;return i.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return E$(yield ZI(i),r,o)})),o.promise}(rn(t),e)}function cE(t,e,n){let i=n.docs.get(e._key),r=new oo(t);return new Si(t,r,e._key,i,new eo(n.hasPendingWrites,n.fromCache),e.converter)}var Q$={maxAttempts:5};var Lg=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ia(e)}set(e,n,i){this._verifyNotCommitted();let r=Ho(e,this._firestore),o=Hg(r.converter,n,i),a=Ug(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,jt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=Ho(e,this._firestore),a;return a=typeof(n=Ot(n))=="string"||n instanceof Wi?tE(this._dataReader,"WriteBatch.update",o._key,n,i,r):eE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,jt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=Ho(e,this._firestore);return this._mutations=this._mutations.concat(new ts(n._key,jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ho(t,e){if((t=Ot(t)).firestore!==e)throw new H($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var EI=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Ia(n)}get(n){let i=Ho(n,this._firestore),r=new II(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return oe();let a=o[0];if(a.isFoundDocument())return new ya(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new ya(this._firestore,r,i._key,null,i.converter);throw oe()})}set(n,i,r){let o=Ho(n,this._firestore),a=Hg(o.converter,i,r),c=Ug(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(n,i,r,...o){let a=Ho(n,this._firestore),c;return c=typeof(i=Ot(i))=="string"||i instanceof Wi?tE(this._dataReader,"Transaction.update",a._key,i,r,o):eE(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,c),this}delete(n){let i=Ho(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=Ho(e,this._firestore),i=new oo(this._firestore);return super.get(e).then(r=>new Si(this._firestore,i,n._key,r._document,new eo(!1,!1),n.converter))}};function ik(t,e,n){t=Xe(t,Pt);let i=Object.assign(Object.assign({},Q$),n);return function(o){if(o.maxAttempts<1)throw new H($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,a,c){let u=new Xt;return o.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){let f=yield B$(o);new sI(o.asyncQueue,f,c,a,u).Xa()})),u.promise}(rn(t),r=>e(new EI(t,r)),i)}function rk(){return new mh("deleteField")}function ok(){return new pI("serverTimestamp")}function sk(...t){return new mI("arrayUnion",t)}function ak(...t){return new gI("arrayRemove",t)}function ck(t){return new _I("increment",t)}(function(e,n=!0){(function(r){Rl=r})(GE),Cu(new Cs("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),c=new Pt(new S0(i.getProvider("auth-internal")),new R0(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new H($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Eo(jA,"4.6.3",e),Eo(jA,"4.6.3","esm2017")})();var Y$="@firebase/firestore-compat",X$="0.3.32";function pE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new H("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function lk(){if(typeof Uint8Array>"u")throw new H("unimplemented","Uint8Arrays are not available in this environment.")}function uk(){if(!eP())throw new H("unimplemented","Blobs are unavailable in Firestore in this environment.")}var qg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return uk(),new t(Sr.fromBase64String(e))}static fromUint8Array(e){return lk(),new t(Sr.fromUint8Array(e))}toBase64(){return uk(),this._delegate.toBase64()}toUint8Array(){return lk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function lE(t){return J$(t,["next","error","complete"])}function J$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var uE=class{enableIndexedDbPersistence(e,n){return wR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return IR(e._delegate)}clearIndexedDbPersistence(e){return CR(e._delegate)}},Gg=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&xi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){_R(this._delegate,e,n,i)}enableNetwork(){return xR(this._delegate)}disableNetwork(){return TR(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,QI("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return DR(this._delegate)}onSnapshotsInSync(e){return nk(this._delegate,e)}get app(){if(!this._appCompat)throw new H("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zl(this,YI(this._delegate,e))}catch(n){throw Un(n,"collection()","Firestore.collection()")}}doc(e){try{return new Ar(this,Eh(this._delegate,e))}catch(n){throw Un(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ta(this,vR(this._delegate,e))}catch(n){throw Un(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ik(this._delegate,n=>e(new Wg(this,n)))}batch(){return rn(this._delegate),new Zg(new Lg(this._delegate,e=>Vl(this._delegate,e)))}loadBundle(e){return SR(this._delegate,e)}namedQuery(e){return AR(this._delegate,e).then(n=>n?new Ta(this,n):null)}},Bl=class extends Pl{constructor(e){super(),this.firestore=e}convertBytes(e){return new qg(new Sr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Ar.forKey(n,this.firestore,null)}};function eH(t){jM(t)}var Wg=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Bl(e)}get(e){let n=Ca(e);return this._delegate.get(n).then(i=>new Da(this._firestore,new Si(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=Ca(e);return i?(pE("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Ca(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Ca(e);return this._delegate.delete(n),this}},Zg=class{constructor(e){this._delegate=e}set(e,n,i){let r=Ca(e);return i?(pE("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Ca(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Ca(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},jl=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Go(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xa(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new Bl(e),n),r.set(n,o)),o}};jl.INSTANCES=new WeakMap;var Ar=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bl(e)}static forPath(e,n,i){if(e.length%2!==0)throw new H("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new wt(n._delegate,i,new te(e)))}static forKey(e,n,i){return new t(n,new wt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new zl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zl(this.firestore,YI(this._delegate,e))}catch(n){throw Un(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ot(e),e instanceof wt?XI(this._delegate,e):!1}set(e,n){n=pE("DocumentReference.set",n);try{return n?oE(this._delegate,e,n):oE(this._delegate,e)}catch(i){throw Un(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?sE(this._delegate,e):sE(this._delegate,e,n,...i)}catch(r){throw Un(r,"updateDoc()","DocumentReference.update()")}}delete(){return ek(this._delegate)}onSnapshot(...e){let n=dk(e),i=hk(e,r=>new Da(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return aE(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=KR(this._delegate):e?.source==="server"?n=QR(this._delegate):n=ZR(this._delegate),n.then(i=>new Da(this.firestore,new Si(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Un(t,e,n){return t.message=t.message.replace(e,n),t}function dk(t){for(let e of t)if(typeof e=="object"&&!lE(e))return e;return{}}function hk(t,e){var n,i;let r;return lE(t[0])?r=t[0]:lE(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Da=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Ar(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return rE(this._delegate,e._delegate)}},xa=class extends Da{data(e){let n=this._delegate.data(e);return this._delegate._converter||zM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ta=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bl(e)}where(e,n,i){try{return new t(this.firestore,ao(this._delegate,VR(e,n,i)))}catch(r){throw Un(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,ao(this._delegate,BR(e,n)))}catch(i){throw Un(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,ao(this._delegate,jR(e)))}catch(n){throw Un(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,ao(this._delegate,zR(e)))}catch(n){throw Un(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,ao(this._delegate,UR(...e)))}catch(n){throw Un(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,ao(this._delegate,$R(...e)))}catch(n){throw Un(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,ao(this._delegate,HR(...e)))}catch(n){throw Un(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,ao(this._delegate,qR(...e)))}catch(n){throw Un(n,"endAt()","Query.endAt()")}}isEqual(e){return JI(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=XR(this._delegate):e?.source==="server"?n=JR(this._delegate):n=YR(this._delegate),n.then(i=>new Ch(this.firestore,new Zi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=dk(e),i=hk(e,r=>new Ch(this.firestore,new Zi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return aE(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},dE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new xa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Ch=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ta(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new xa(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new dE(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new xa(this._firestore,i))})}isEqual(e){return rE(this._delegate,e._delegate)}},zl=class t extends Ta{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ar(this.firestore,e):null}doc(e){try{return e===void 0?new Ar(this.firestore,Eh(this._delegate)):new Ar(this.firestore,Eh(this._delegate,e))}catch(n){throw Un(n,"doc()","CollectionReference.doc()")}}add(e){return tk(this._delegate,e).then(n=>new Ar(this.firestore,n))}isEqual(e){return XI(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ca(t){return Xe(t,wt)}var hE=class t{constructor(...e){this._delegate=new Wi(...e)}static documentId(){return new t(qt.keyField().canonicalString())}isEqual(e){return e=Ot(e),e instanceof Wi?this._delegate._internalPath.isEqual(e._internalPath):!1}};var fE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=ok();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=rk();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=sk(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=ak(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=ck(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var tH={Firestore:Gg,GeoPoint:va,Timestamp:Ft,Blob:qg,Transaction:Wg,WriteBatch:Zg,DocumentReference:Ar,DocumentSnapshot:Da,Query:Ta,QueryDocumentSnapshot:xa,QuerySnapshot:Ch,CollectionReference:zl,FieldPath:hE,FieldValue:fE,setLogLevel:eH,CACHE_SIZE_UNLIMITED:yR};function nH(t,e){t.INTERNAL.registerComponent(new Cs("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},tH)))}function iH(t){nH(t,(e,n)=>new Gg(e,n,new uE)),t.registerVersion(Y$,X$)}iH(ri);function rH(t,e=ar){return new Pe(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function fk(t,e){return rH(t,e)}function oH(t,e){return fk(t,e).pipe(lr(void 0),fc(),ge(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function _E(t,e){return fk(t,e).pipe(ge(n=>({payload:n,type:"query"})))}var Kg=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=gk(i,n);return new Yg(r,o,this.afs)}snapshotChanges(){return oH(this.ref,this.afs.schedulers.outsideAngular).pipe(Qn)}valueChanges(e={}){return this.snapshotChanges().pipe(ge(({payload:n})=>e.idField?vt(X({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return rt(this.ref.get(e)).pipe(Qn)}};function Qg(t,e){return _E(t,e).pipe(lr(void 0),fc(),ge(n=>{let[i,r]=n,o=r.payload.docChanges(),a=o.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,u)=>{let f=o.find(v=>v.doc.ref.isEqual(c.ref)),m=i?.payload.docs.find(v=>v.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:c}})}),a}))}function pk(t,e,n){return Qg(t,n).pipe(Ss((i,r)=>sH(i,r.map(o=>o.payload),e),[]),dc(),ge(i=>i.map(r=>({type:r.type,payload:r}))))}function sH(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=aH(t,i))}),t}function mE(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function aH(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return mE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return mE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return mE(t,e.oldIndex,1);break}return t}function mk(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var Yg=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=Qg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ge(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(lr(void 0),fc(),Lt(([i,r])=>r.length>0||!i),ge(([,i])=>i),Qn)}auditTrail(e){return this.stateChanges(e).pipe(Ss((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=mk(e);return pk(this.query,n,this.afs.schedulers.outsideAngular).pipe(Qn)}valueChanges(e={}){return _E(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.payload.docs.map(i=>e.idField?vt(X({},i.data()),{[e.idField]:i.id}):i.data())),Qn)}get(e){return rt(this.query.get(e)).pipe(Qn)}add(e){return this.ref.add(e)}doc(e){return new Kg(this.ref.doc(e),this.afs)}},gE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Qg(this.query,this.afs.schedulers.outsideAngular).pipe(Qn):Qg(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.filter(i=>e.indexOf(i.type)>-1)),Lt(n=>n.length>0),Qn)}auditTrail(e){return this.stateChanges(e).pipe(Ss((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=mk(e);return pk(this.query,n,this.afs.schedulers.outsideAngular).pipe(Qn)}valueChanges(e={}){return _E(this.query,this.afs.schedulers.outsideAngular).pipe(ge(i=>i.payload.docs.map(r=>e.idField?X({[e.idField]:r.id},r.data()):r.data())),Qn)}get(e){return rt(this.query.get(e)).pipe(Qn)}},cH=new se("angularfire2.enableFirestorePersistence"),lH=new se("angularfire2.firestore.persistenceSettings"),uH=new se("angularfire2.firestore.settings"),dH=new se("angularfire2.firestore.use-emulator");function gk(t,e=n=>n){return{query:e(t),ref:t}}var _k=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,a,c,u,f,m,v,w,E,M,k,F,q,ie){this.schedulers=u;let Z=Sd(n,c,i),ae=m;v&&p0(Z,c,w,M,k,F,E,q),[this.firestore,this.persistenceEnabled$]=_m(`${Z.name}.firestore`,"AngularFirestore",Z.name,()=>{let pe=c.runOutsideAngular(()=>Z.firestore());if(o&&pe.settings(o),ae&&pe.useEmulator(...ae),r&&!qs(a)){let de=()=>{try{return rt(pe.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(S){return typeof console<"u"&&console.warn(S),he(!1)}};return[pe,c.runOutsideAngular(de)]}else return[pe,he(!1)]},[o,ae,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:a}=gk(r,i),c=this.schedulers.ngZone.run(()=>o);return new Yg(c,a,this)}collectionGroup(n,i){let r=i||(a=>a),o=this.firestore.collectionGroup(n);return new gE(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new Kg(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(V(qc),V(Gc,8),V(cH,8),V(uH,8),V(Vn),V(_e),V(mm),V(lH,8),V(dH,8),V(Sm,8),V(c0,8),V(l0,8),V(u0,8),V(d0,8),V(h0,8),V(f0,8),V(Qs,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Ki=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.afs=r,this.router=o,this.user$=this.afAuth.authState.pipe(bt(a=>a?this.afs.doc(`users/${a.uid}`).valueChanges():he(null))),this.userData=this.afAuth.authState.pipe(bt(a=>a?this.afs.doc(`users/${a.uid}/data/data`).valueChanges():he(null)))}googleSignin(){return U(this,null,function*(){let i=new d_,r=yield this.afAuth.signInWithPopup(i);return this.currentUser=r.user,console.log(r),localStorage.setItem("key",r.user.uid),this.updateUserData(r.user)})}signOut(){return U(this,null,function*(){return yield this.afAuth.signOut(),this.router.navigate(["/"])})}updateUserData(i){console.log("update User Data");let r={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},o=this.afs.doc(`users/${i.uid}`);console.log(i.uid);let a={uid:i.uid,email:i.email,displayName:i.displayName,photoUrl:i.photoURL};return o.set(a)}getUserData(i){return this.afs.collection("users/",r=>r.where("uid","==",i)).valueChanges()}addDataToUser(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}/data/data`).set(i,{merge:!0})}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}/data/data`).set(i,{merge:!0})):null}};e.\u0275fac=function(r){return new(r||e)(V(Sm),V(_k),V(fm))},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function fH(t,e){if(t&1){let n=Kn();K(0,"div",15)(1,"button",16),qe("click",function(){Ln(n);let r=at();return Fn(r.onCloseClick())}),ve(2,"X"),J(),K(3,"h1"),ve(4,"Car"),J(),K(5,"p"),ve(6),J(),K(7,"p"),ve(8),J()()}if(t&2){let n=at();At("z-index",n.z)("display","block"),le(6),hn(n.randomCar.car),le(2),hn(n.randomCar.hp)}}var vk=(()=>{let e=class e{ngOnInit(){if(localStorage.getItem("garagePrice")){console.log(JSON.parse(localStorage.getItem("garages")));let i=JSON.parse(localStorage.getItem("garages"));this.garagePrice=JSON.parse(localStorage.getItem("garagePrice")),this.allGarages.push(...i),console.log(i),setTimeout(()=>{i.forEach(r=>{console.log(r);let o=ut.marker([r.lat,r.lng],{icon:this.garageIcon}).addTo(this.map),a=ut.circle([r.lat,r.lng],100).addTo(this.map).setStyle({color:"#20C912"})})},500)}}initMap(){navigator.geolocation.getCurrentPosition(r=>{console.log(r.coords),this.moveMap([r.coords.latitude,r.coords.longitude])}),this.map=ut.map("map",{center:[0,0],zoom:18,attributionControl:!0}).on("click",r=>{console.log(r.latlng.lat,r.latlng.lng);var o=ut.popup().setLatLng([r.latlng.lat,r.latlng.lng]).setContent(`<p>Do you want to buy a Garage here</p>
        
        <p>Price: ${this.garagePrice.price+this.garagePrice.symbol} </p>
        
        <button id="buyButton">Buy Garage</button>
        
        <style>
        #buyButton {
        background-color: green;
        width: 80%;
        margin: auto;
        border-radius: 5px;
        color: white;
        }
        * {
          text-align: center;
        }
        </style>
        `).openOn(this.map);document.getElementById("buyButton").addEventListener("click",a=>{if(console.log(a),console.log(r.latlng),this.coins>this.garagePrice.price*1e3){console.log("passt"),this.coins=this.coins-this.garagePrice.price*1e3,this.garagePrice.price=this.garagePrice.price*15,this.allGarages.push({lat:r.latlng.lat,lng:r.latlng.lng}),console.log(this.allGarages),localStorage.setItem("garages",JSON.stringify(this.allGarages)),localStorage.setItem("garagePrice",JSON.stringify(this.garagePrice));let c=ut.marker([r.latlng.lat,r.latlng.lng],{icon:this.garageIcon}).addTo(this.map).on("click",()=>{}),u=ut.circle([r.latlng.lat,r.latlng.lng],100).addTo(this.map).setStyle({color:"#20C912"})}})}),this.moveMap([49,12]);let i=ut.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});navigator.geolocation.watchPosition(r=>{let o=r.coords.latitude,a=r.coords.longitude,c=r.coords.accuracy;setTimeout(()=>{ut.marker([49.3,10.5833333],{icon:this.repairShop}).addTo(this.map).on("click",this.onRepairShopClick)},5e3),setTimeout(()=>{this.currentPos=null},5e3)}),i.addTo(this.map),this.path(),this.generateRandomCars()}onBuyGarageClick(i){console.log(i)}onRepairShopClick(){console.log("jetzt")}constructor(i){this.auth=i,this.hideMap=new Je,this.coins=0,this.iconHome=ut.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/home.png'>",iconSize:[86,105],iconAnchor:[43,105]}),this.iconCar=ut.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img id='car' src='../../assets/Car.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.manCar=ut.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Man.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.repairShop=ut.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Repair.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.garageIcon=ut.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/garage_locater.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.carLayer=new ut.FeatureGroup,this.allGarages=[],this.garagePrice={price:10,symbol:"K"},this.cars=+localStorage.getItem("carcount"),this.gems=0,this.oldPos={lat:0,lng:0},this.distance=.005,this.allCities=[],this.cityMarkers=[],this.isoCountries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},this.randomCars=[],this.generiertePositionen=[],this.randomCar={car:"Car12",hp:1},this.visible=!0,this.z=0,this.user=i.user$.subscribe(r=>{console.log(r),this.user=r})}onUserClick(){this.hideMap.emit("garage")}hideMapNow(i){this.hideMap.emit(i)}ngAfterViewInit(){navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,console.log(this.lng,this.lat)}),console.log(this.lat,this.lng),this.initMap(),setTimeout(()=>{},5e3),navigator.geolocation.watchPosition(i=>{console.log(i),this.marker!=null&&this.map.removeLayer(this.marker),this.marker=ut.marker([i.coords.latitude,i.coords.longitude],{icon:this.manCar}).addTo(this.map),this.moveMap([i.coords.latitude,i.coords.longitude]),console.log(this.marker,this.carLayer),setTimeout(()=>{console.log("jetzt")},5e3);let r=!0;console.log(this.generiertePositionen),this.generiertePositionen.forEach(o=>{let a=this.getDistance([o[0],o[1]],[this.lat,this.lng]);console.log("Distance:",a,this.generiertePositionen),a<500&&(r=!1)}),r==!0&&this.genNewCars(),this.allCities.forEach(o=>{let a=o.latitude,c=o.longitude,u=this.lng-c,f=this.lat-a;u>-.005&&u<.005&&(console.log(o),console.log(this.lat,this.lng),console.log(f,u))})}),this.getAllCities()}moveMap(i){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.map.flyTo(i,18),this.oldPos.lat=i[0],this.oldPos.lng=i[1])}path(){console.log("Start"),navigator.geolocation.watchPosition(i=>{let r=i.coords.latitude,o=i.coords.longitude,a=i.coords.accuracy;this.lat=r,this.lng=o;var c=[[r,o],[r,o+this.distance]]})}getCountryName(i){return this.isoCountries.hasOwnProperty(i)?this.isoCountries[i]:i}generateRandomCars(){console.log("generateRandomCarsStart",this.lat,this.lng),navigator.geolocation.getCurrentPosition(i=>{this.generiertePositionen.push([i.coords.latitude,i.coords.longitude]);for(let r=0;r<25;r++){let o=i.coords.latitude+(Math.random()-.5)/100,a=i.coords.longitude+(Math.random()-.5)/100;console.log(o,a);let c=ut.circle([o,a],50).addTo(this.map);this.randomCars.push({Lat:o,Lng:a});let u=ut.marker([o,a],{icon:this.iconCar}).addTo(this.map);u.on("click",()=>{this.getDistance([o,a],[this.lat,this.lng])<=50&&(console.log(o,a,this.getDistance([o,a],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c))}),console.log(this.randomCars),this.map.removeLayer(this.map)}}),console.log("fertig Random")}genNewCars(){console.log("generateRandomCarsStart",this.lat,this.lng),this.generiertePositionen.push([this.lat,this.lng]),console.log("hier");for(let i=0;i<25;i++){console.log("hier");let r=this.lat+(Math.random()-.5)/100,o=this.lng+(Math.random()-.5)/100;console.log(r,o);let a=ut.circle([r,o],50).addTo(this.map);this.randomCars.push({Lat:r,Lng:o});let c=ut.marker([r,o],{icon:this.iconCar}).addTo(this.map);c.on("click",()=>{this.getDistance([r,o],[this.lat,this.lng])<=50&&(console.log(r,o,this.getDistance([r,o],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a))}),console.log(this.randomCars),this.map.removeLayer(this.map)}console.log("fertig Random")}getAllCities(){return U(this,null,function*(){let i={method:"GET",redirect:"follow"},r;yield fetch("https://api.country.is/",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{r=this.getCountryName(o.country)}).catch(o=>{console.log(o)}),yield fetch("https://countriesnow.space/api/v0.1/countries/population/cities",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{console.log(o.data),o.data.forEach(a=>{setTimeout(()=>{a.populationCounts[0].value>1e4&&a.country==r&&fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${a.city}`,{method:"GET",redirect:"follow"}).then(c=>c.json()).then(c=>{setTimeout(()=>{c.results&&(ut.marker([c.results[0].latitude,c.results[0].longitude],{icon:this.repairShop}).addTo(this.map),this.allCities.push(c.results[0]),ut.circle([c.results[0].latitude,c.results[0].longitude],550).addTo(this.map).setStyle({color:"red"}))},1e3)}).catch(c=>console.log(c))})},100)}).catch(o=>console.log(o))})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,m=c-o,v=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(m/2),2),w=2*Math.asin(Math.sqrt(v)),E=6371;return console.log(w,E),w*E*1e3}onCloseClick(){this.visible=!0,console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(Ee(Ki))},e.\u0275cmp=St({type:e,selectors:[["app-leaflat-map"]],inputs:{coins:"coins"},outputs:{hideMap:"hideMap"},standalone:!0,features:[Mt],decls:26,vars:13,consts:[[1,"items"],["id","coins"],["id","icon"],["src","../../assets/icon%20(2).png"],["id","text"],["id","cars"],["src","../../assets/icon%20(3).png"],["id","gems"],["src","../../assets/icon%20(1).png"],[1,"map-container"],[1,"map-frame"],["id","map"],["id","carCard",3,"z-Index","display"],["id","user"],["width","50px","height","50px",3,"click","src"],["id","carCard"],["id","closeBtn",3,"click"]],template:function(r,o){r&1&&(K(0,"div",0)(1,"div",1)(2,"div",2),Ce(3,"img",3),J(),K(4,"div",4)(5,"p"),ve(6),Up(7,"currency"),J()()(),K(8,"div",5)(9,"div",2),Ce(10,"img",6),J(),K(11,"div",4)(12,"p"),ve(13),J()()(),K(14,"div",7)(15,"div",2),Ce(16,"img",8),J(),K(17,"div",4)(18,"p"),ve(19),J()()()(),K(20,"div",9)(21,"div",10),Ce(22,"div",11),J()(),Et(23,fH,9,6,"div",12),K(24,"div",13)(25,"img",14),qe("click",function(){return o.hideMap.emit("profile")}),J()()),r&2&&(le(6),hn($p(7,11,o.coins)),le(7),hn(o.cars),le(6),hn(o.gems),le(),At("display",o.visible?"block":"none"),le(),At("display",o.visible?"block":"none"),le(),At("display",o.visible?"block":"none"),le(),Ut(23,o.visible==!1?23:-1),le(2),dn("src",o.user.photoUrl,si))},dependencies:[EA,CA],styles:['.map-container[_ngcontent-%COMP%]{position:absolute;inset:0;height:calc(100% + -0px)}.items[_ngcontent-%COMP%]{position:absolute;top:25px;left:0;display:flex;z-index:50000;justify-content:space-around;width:100%}#user[_ngcontent-%COMP%]{z-index:50000;position:absolute;bottom:35px;left:15px;width:50px;height:50px}#user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}#buyButton[_ngcontent-%COMP%]{width:80%;height:25px;background-color:green}.items[_ngcontent-%COMP%]   #cars[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #gems[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #coins[_ngcontent-%COMP%]{width:100px;height:25px;background-color:#fff;border:1px black solid;border-radius:2px}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map[_ngcontent-%COMP%]{height:100%}.marker-pin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:500}.marker-pin[_ngcontent-%COMP%]:after{content:"";width:1px;height:1px;margin:3px 0 0 3px;background:#fff;position:absolute;border-radius:50%}.custom-div-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:5px;font-size:5px;left:0;right:0;margin:10px auto;text-align:center}img[_ngcontent-%COMP%]{width:50px;height:55px}#car[_ngcontent-%COMP%]{width:3px;height:3px}#carCard[_ngcontent-%COMP%]{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:5000;background-color:#fff;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}#icon[_ngcontent-%COMP%]{width:30%;height:100%}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:75%}#text[_ngcontent-%COMP%]{width:70%}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-37.5px;left:25px}']});let t=e;return t})();var yk=(()=>{let e=class e{constructor(){fetch("../../assets/cars.json",{method:"GET",redirect:"follow"}).then(i=>i.json()).then(i=>{console.log(i),this.cars=i,console.log(this.cars)}).catch(i=>console.error(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ee({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mH(t,e){if(t&1&&(Ce(0,"br"),K(1,"h1"),ve(2),J(),Ce(3,"img",2),K(4,"div",3)(5,"div",4),ve(6),J(),K(7,"div",5),ve(8),J(),K(9,"div",6),ve(10),J(),K(11,"div",7),ve(12),J(),K(13,"div",8),ve(14),J(),K(15,"div",9),ve(16),J()(),Ce(17,"br")),t&2){let n=at();le(),At("color",n.randomCar.textColor),le(),hn(n.randomCar.Name.toUpperCase()),le(),dn("src",n.randomCar.Path,si),le(2),At("background",n.randomCar.Color)("color",n.randomCar.textColor),le(),Bn("",n.randomCar.Horsepower," hp"),le(),At("background",n.randomCar.Color)("color",n.randomCar.textColor),le(),Bn("",n.randomCar.Miles_per_Gallon," Miles per Gallon"),le(),At("background",n.randomCar.Color)("color",n.randomCar.textColor),le(),Bn("",n.randomCar.Cylinders," Cylinders"),le(),At("background",n.randomCar.Color)("color",n.randomCar.textColor),le(),Bn(" ",n.randomCar.Acceleration,"s 0 - 60 mp/h"),le(),At("background",n.randomCar.Color)("color",n.randomCar.textColor),le(),Bn(" ",n.randomCar.CPS.toFixed(2)," coins per second"),le(),At("background",n.randomCar.Color)("color",n.randomCar.textColor),le(),Bn(" Year: ",n.randomCar.Year," ")}}var bk=(()=>{let e=class e{addCoin(i){console.log(i),this.addCoins.emit(Math.floor(i))}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){if(setTimeout(()=>{this.getRandomCar()},500),localStorage.getItem("mycars")){let i=JSON.parse(localStorage.getItem("mycars"));console.log(localStorage.getItem("mycars"),JSON.parse(localStorage.getItem("mycars"))),console.log("allcars"),console.log(i),this.myCars.push(...i),console.log(this.myCars)}}constructor(i){this.car=i,this.hideMap=new Je,this.addCoins=new Je,this.CPS=0,this.randomCar={car:"Car12",hp:1,topSpeed:152},this.myCars=[],this.allCars=[],this.allCars=this.car.cars}getAllCars(){this.allCars=this.car.cars}getRandomCar(){if(console.log(this.car.cars),this.car.cars){let i=this.car.cars[Math.floor(Math.random()*this.car.cars.length)];console.log(i),this.randomCar=i,this.randomCar.CPS=this.randomCar.Horsepower*this.randomCar.Acceleration*this.randomCar.Cylinders/1e3,this.myCars.push(i),console.log(this.CPS),this.CPS=this.CPS+i.CPS,console.log(this.CPS),this.getCPS(),localStorage.setItem("mycars",JSON.stringify(this.myCars))}}getCPS(){this.addCoin(this.CPS),console.log(this.CPS)}};e.\u0275fac=function(r){return new(r||e)(Ee(yk))},e.\u0275cmp=St({type:e,selectors:[["app-car-found"]],outputs:{hideMap:"hideMap",addCoins:"addCoins"},standalone:!0,features:[Mt],decls:6,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&(K(0,"body")(1,"div",0)(2,"button",1),qe("click",function(){return o.onCloseClick()}),ve(3,"X"),J(),Ce(4,"br"),Et(5,mH,18,34),J()()),r&2&&(le(),At("display","block")("background",o.randomCar.Color),le(4),Ut(5,o.randomCar.Color?5:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;height:30px;padding-top:7.5px}"]});let t=e;return t})();function gH(t,e){if(t&1&&(K(0,"div",6),Ce(1,"br")(2,"img",7)(3,"br"),K(4,"p"),ve(5),J()()),t&2){let n=e.$implicit;At("background",n.Color),le(2),dn("src",n.Path,si),le(3),hn(n.Name)}}function _H(t,e){if(t&1&&Vp(0,gH,6,4,"div",5,Fp),t&2){let n=at();Bp(n.myCars)}}var wk=(()=>{let e=class e{constructor(){this.hideMap=new Je}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=St({type:e,selectors:[["app-my-cars"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Mt],decls:6,vars:1,consts:[[1,"container"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["id","car",3,"background"],["id","car"],["width","50%","height","auto",3,"src"]],template:function(r,o){r&1&&(K(0,"div",0),Et(1,_H,2,0),J(),K(2,"div",1),qe("click",function(){return o.onCloseClick()}),K(3,"div",2),qe("click",function(){return o.onCloseClick()}),K(4,"button",3),qe("click",function(){return o.onCloseClick()}),Ce(5,"img",4),J()()()),r&2&&(le(),Ut(1,o.myCars?1:-1))},styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();function vH(t,e){if(t&1&&(K(0,"div",4),Ce(1,"img",5),K(2,"p"),ve(3),J()(),Ce(4,"br")),t&2){let n=at();le(),dn("src",n.user.photoUrl,si),le(2),hn(n.user.displayName)}}function yH(t,e){if(t&1&&(K(0,"div",6)(1,"p"),ve(2),J()(),K(3,"div",7),Ce(4,"img",8),J()),t&2){let n=at();le(2),hn(n.key),le(2),dn("src","https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+n.key,si)}}var Ik=(()=>{let e=class e{constructor(i){this.auth=i,this.addFriend=new Je,this.key=localStorage.getItem("key"),i.user$.subscribe(r=>{console.log(r),this.user=r}),this.key=localStorage.getItem("key")}onFriendAdd(i){console.log(i),this.addFriend.emit(i)}};e.\u0275fac=function(r){return new(r||e)(Ee(Ki))},e.\u0275cmp=St({type:e,selectors:[["app-add-friend"]],outputs:{addFriend:"addFriend"},standalone:!0,features:[Mt],decls:9,vars:2,consts:[["friendInput",""],["id","input"],["type","text"],[3,"click"],[1,"user","container"],["width","50px","height","50px",3,"src"],["id","key"],["id","qr"],["alt","","width","150px","height","150px",3,"src"]],template:function(r,o){if(r&1){let a=Kn();Et(0,vH,5,2)(1,yH,5,2),K(2,"p"),ve(3,"Add Friend"),J(),K(4,"div",1),Ce(5,"input",2,0),K(7,"button",3),qe("click",function(){Ln(a);let u=zp(6);return Fn(o.onFriendAdd(u.value))}),ve(8,"Add Friend"),J()()}r&2&&(Ut(0,o.user?0:-1),le(),Ut(1,o.key?1:-1))},styles:[".user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#qr[_ngcontent-%COMP%]{width:175px;height:175px;border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#qr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:12.5px}*[_ngcontent-%COMP%]{text-align:center}#key[_ngcontent-%COMP%]{border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#input[_ngcontent-%COMP%]{margin:auto}"]});let t=e;return t})();function bH(t,e){if(t&1&&(K(0,"div",5),Ce(1,"img",6),K(2,"p",7),ve(3),J()()),t&2){let n=at().$implicit;le(),dn("src",n.photoUrl,si),le(2),hn(n.displayName)}}function wH(t,e){if(t&1&&Et(0,bH,4,2,"div",5),t&2){let n=e.$implicit;Ut(0,n?0:-1)}}var Ek=(()=>{let e=class e{constructor(i){this.auth=i,this.hideMap=new Je,this.friends=[],this.friendData=[]}ngOnInit(){localStorage.getItem("friends")&&(this.friends=JSON.parse(localStorage.getItem("friends"))),this.getAllFriends()}addFriend(i){console.log(i,i.length),i.length>20&&i.length<32&&(this.friends.push(i),localStorage.setItem("friends",JSON.stringify(this.friends))),this.getAllFriends()}removeDup(i){let r=[];return i.forEach((o,a)=>{r.indexOf(o)===-1&&r.push(o)}),r}getAllFriends(){this.friendData=[],this.removeDup(this.friends).forEach(i=>{console.log(i),console.log(this.auth.getUserData(i).subscribe(r=>{console.log(r),this.friendData.push(r[0])}))})}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(Ee(Ki))},e.\u0275cmp=St({type:e,selectors:[["app-friends"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Mt],decls:7,vars:0,consts:[[3,"addFriend"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"user","container"],["width","50px","height","50px",3,"src"],["id","username"]],template:function(r,o){r&1&&(K(0,"app-add-friend",0),qe("addFriend",function(c){return o.addFriend(c)}),J(),Vp(1,wH,1,1,null,null,Fp),K(3,"div",1),qe("click",function(){return o.onCloseClick()}),K(4,"div",2),qe("click",function(){return o.onCloseClick()}),K(5,"button",3),qe("click",function(){return o.onCloseClick()}),Ce(6,"img",4),J()()()),r&2&&(le(),Bp(o.friendData))},dependencies:[Ik],styles:['*[_ngcontent-%COMP%]{text-align:center}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#username[_ngcontent-%COMP%]{width:250px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var Ck=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=st({type:e}),e.\u0275inj=ot({imports:[yr]});let t=e;return t})();function IH(t,e){if(t&1&&(K(0,"div",5),Ce(1,"img",20),K(2,"p"),ve(3),J()()),t&2){let n=at();le(),dn("src",n.user.photoUrl,si),le(2),hn(n.user.displayName)}}var Dk=(()=>{let e=class e{constructor(i){this.auth=i,this.hideMap=new Je,this.progress=0,i.user$.subscribe(r=>{console.log(r),this.user=r})}onLogoutClick(){localStorage.removeItem("key"),this.auth.signOut(),window.location.reload()}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(Ee(Ki))},e.\u0275cmp=St({type:e,selectors:[["app-profile"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Mt],decls:68,vars:3,consts:[[1,"logout"],["src","../../assets/image-removebg-preview (11).png","width","30px","height","30px",3,"click"],[1,"menu","container"],[1,"profile"],[1,"friends"],[1,"user","container"],[1,"container","level"],[1,"Level"],[1,"Progressbar"],["id","progress"],["id","fortschritt"],[1,"container"],["id","icon",3,"click"],["src","../../assets/car_icon.png","width","50px","height","50px"],["src","../../assets/addFriends_icon.png","width","50px","height","50px"],["id","icon"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["width","50px","height","50px",3,"src"]],template:function(r,o){r&1&&(K(0,"div",0)(1,"img",1),qe("click",function(){return o.onLogoutClick()}),J()(),K(2,"div",2),Ce(3,"div",3)(4,"div",4),J(),Et(5,IH,4,2,"div",5),Ce(6,"br"),K(7,"div",6)(8,"div",7)(9,"p"),ve(10,"1"),J(),K(11,"p"),ve(12,"LEVEL"),J()(),K(13,"div",8)(14,"div",9)(15,"p",10),ve(16,"7.125/ 10000"),J()()()(),Ce(17,"hr"),K(18,"div",11)(19,"div",12),qe("click",function(){return o.hideMap.emit("garage")}),Ce(20,"img",13),K(21,"p"),ve(22,"Garage"),J()(),K(23,"div",12),qe("click",function(){return o.hideMap.emit("friends")}),Ce(24,"img",14),K(25,"p"),ve(26,"Friends"),J()(),K(27,"div",15),Ce(28,"img",13),K(29,"p"),ve(30,"Garage"),J()(),K(31,"div",15),Ce(32,"img",13),K(33,"p"),ve(34,"Garage"),J()()(),Ce(35,"br")(36,"br")(37,"hr"),K(38,"div",11)(39,"p"),ve(40,"Gelaufene Distanz"),J(),K(41,"p"),ve(42,"1.5 km"),J()(),K(43,"div",11)(44,"p"),ve(45,"Gelaufene Distanz"),J(),K(46,"p"),ve(47,"1.5 km"),J()(),K(48,"div",11)(49,"p"),ve(50,"Gelaufene Distanz"),J(),K(51,"p"),ve(52,"1.5 km"),J()(),K(53,"div",11)(54,"p"),ve(55,"Gelaufene Distanz"),J(),K(56,"p"),ve(57,"1.5 km"),J()(),K(58,"div",11)(59,"p"),ve(60,"Gelaufene Distanz"),J(),K(61,"p"),ve(62,"1.5 km"),J()(),Ce(63,"hr"),K(64,"div",16),qe("click",function(){return o.onCloseClick()}),K(65,"div",17),qe("click",function(){return o.onCloseClick()}),K(66,"button",18),qe("click",function(){return o.onCloseClick()}),Ce(67,"img",19),J()()()),r&2&&(le(5),Ut(5,o.user?5:-1),le(9),At("width",o.progress+"%"))},dependencies:[Ck],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}.logout[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e53d31;border-radius:50%;position:absolute;right:5px}.logout[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px}img[_ngcontent-%COMP%]{margin:0 auto auto}#icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e96245;border-radius:50%;border:0px}.Progressbar[_ngcontent-%COMP%]{width:80%;height:50px;border-radius:50px}#progress[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#000;border-radius:50px}#fortschritt[_ngcontent-%COMP%]{margin-left:150px;width:150px}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();function EH(t,e){if(t&1){let n=Kn();K(0,"app-car-found",3),qe("hideMap",function(r){Ln(n);let o=at(2);return Fn(o.switchVisibile(r))})("addCoins",function(r){Ln(n);let o=at(2);return Fn(o.addCoins(r))}),J()}}function CH(t,e){if(t&1){let n=Kn();K(0,"app-my-cars",4),qe("hideMap",function(r){Ln(n);let o=at(2);return Fn(o.switchVisibile(r))}),J()}}function DH(t,e){if(t&1){let n=Kn();K(0,"app-profile",4),qe("hideMap",function(r){Ln(n);let o=at(2);return Fn(o.switchVisibile(r))}),J()}}function xH(t,e){if(t&1){let n=Kn();K(0,"app-friends",4),qe("hideMap",function(r){Ln(n);let o=at(2);return Fn(o.switchVisibile(r))}),J()}}function TH(t,e){if(t&1){let n=Kn();K(0,"div",1)(1,"app-leaflat-map",2),qe("hideMap",function(r){Ln(n);let o=at();return Fn(o.switchVisibile(r))}),J(),Et(2,EH,1,0,"app-car-found")(3,CH,1,0,"app-my-cars")(4,DH,1,0)(5,xH,1,0),J()}if(t&2){let n=at();le(),At("display",n.visible?"block":"none"),dn("coins",n.coins),le(),Ut(2,!n.visible&&n.currentVisible=="carFound"?2:-1),le(),Ut(3,!n.visible&&n.currentVisible=="garage"?3:!n.visible&&n.currentVisible=="profile"?4:!n.visible&&n.currentVisible=="friends"?5:-1)}}function SH(t,e){if(t&1){let n=Kn();K(0,"div"),ve(1),Ce(2,"hr"),K(3,"button",6),qe("click",function(){Ln(n);let r=at(2);return Fn(r.auth.signOut())}),ve(4,"Sign Out"),J()()}if(t&2){let n=e.ngIf;le(),Bn(" ",n.jsonData,`
`)}}function AH(t,e){if(t&1){let n=Kn();K(0,"button",6),qe("click",function(){Ln(n);let r=at(2);return Fn(r.signIn())}),ve(1,"Login"),J()}}function MH(t,e){if(t&1&&(Et(0,SH,5,1,"div",5),Up(1,"async"),Et(2,AH,2,0,"ng-template",null,0,yT)),t&2){let n=zp(3),i=at();dn("ngIf",$p(1,2,i.auth.user$))("ngIfElse",n)}}var xk=(()=>{let e=class e{constructor(i){this.auth=i,this.key=localStorage.getItem("key"),this.title="world-clicker",this.cps=0,this.coins=0,this.visible=!0}signIn(){this.auth.googleSignin(),setInterval(()=>{localStorage.getItem("key")&&window.location.reload()},500)}addCoins(i){console.log("coin:",i),this.cps=this.cps+i,localStorage.setItem("cps",this.cps.toString())}ngOnInit(){console.log(this.auth.user$,this.auth.currentUser,this.auth.userData.subscribe(i=>{console.log(i,i.update);var r=new Date().getTime()/1e3;i.update&&(console.log(r,i.update,r-i.update),this.coins=+localStorage.getItem("coins")+ +localStorage.getItem("cps")*(r-i.update)/2,console.log(this.coins))})),localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins"))),setInterval(()=>{Math.floor(this.coins=this.coins+this.cps),localStorage.setItem("coins",this.coins.toString())},1e3),this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps")}),setInterval(()=>{var i=new Date().getTime()/1e3;this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps"),update:i})},25e3)}updateUserDat(i){this.auth.addDataToUser(i)}switchVisibile(i){i=="exit"&&(this.visible=!0,this.currentVisible="exit"),i!="exit"&&(this.visible=!1,this.currentVisible=i),console.log(i),console.log(this.visible),console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(Ee(Ki))},e.\u0275cmp=St({type:e,selectors:[["app-root"]],standalone:!0,features:[Mt],decls:2,vars:1,consts:[["login",""],[1,"App"],[3,"hideMap","coins"],[3,"hideMap","addCoins"],[3,"hideMap"],[4,"ngIf","ngIfElse"],[1,"button",3,"click"]],template:function(r,o){r&1&&Et(0,TH,6,5,"div",1)(1,MH,4,4),r&2&&Ut(0,o.key?0:1)},dependencies:[vk,bk,wk,ky,LT,FT,Ek,Dk],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.App[_ngcontent-%COMP%]{text-align:center}app-leaflet-map[_ngcontent-%COMP%]{height:100%}.push[_ngcontent-%COMP%]{height:calc(100% - 150px)}app-navigation[_ngcontent-%COMP%]{width:100%;height:100px;left:0;z-index:545}"]});let t=e;return t})();WT(xk,NS).catch(t=>console.error(t));
