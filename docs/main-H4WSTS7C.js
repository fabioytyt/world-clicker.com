import{A as Ro,B as ai,C as P_,a as ee,b as Et,c as M1,d as P1,e as T_,f as U,g as hC,h as Tf,i as fC,j as pC,k as mC,l as S_,m as gC,n as Vu,o as A_,p as Sf,q as _C,r as vC,s as M_,t as Vt,u as Ns,v as ur,w as Af,x as Bu,y as yC,z as bC}from"./chunk-JHDVRTR6.js";var cA=M1((Vm,aA)=>{(function(t,e){typeof Vm=="object"&&typeof aA<"u"?e(Vm):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.leaflet={}))})(Vm,function(t){"use strict";var e="1.9.4";function n(s){var l,h,p,v;for(h=1,p=arguments.length;h<p;h++){v=arguments[h];for(l in v)s[l]=v[l]}return s}var i=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function r(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,l,h){var p,v,w,D;return D=function(){p=!1,v&&(w.apply(h,v),v=!1)},w=function(){p?v=arguments:(s.apply(h,arguments),setTimeout(D,l),p=!0)},w}function u(s,l,h){var p=l[1],v=l[0],w=p-v;return s===p&&h?s:((s-v)%w+w)%w+v}function f(){return!1}function m(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function _(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return _(s).split(/\s+/)}function I(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function M(s,l,h){var p=[];for(var v in s)p.push(encodeURIComponent(h?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function F(s,l){return s.replace(P,function(h,p){var v=l[p];if(v===void 0)throw new Error("No value provided for variable "+h);return typeof v=="function"&&(v=v(l)),v})}var H=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function Q(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function oe(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var he=0;function le(s){var l=+new Date,h=Math.max(0,16-(l-he));return he=l+h,window.setTimeout(s,h)}var S=window.requestAnimationFrame||oe("RequestAnimationFrame")||le,C=window.cancelAnimationFrame||oe("CancelAnimationFrame")||oe("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function x(s,l,h){if(h&&S===le)s.call(l);else return S.call(window,r(s,l))}function A(s){s&&C.call(window,s)}var R={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:a,throttle:c,wrapNum:u,falseFn:f,formatNum:m,trim:_,splitWords:b,setOptions:I,getParamString:M,template:F,isArray:H,indexOf:Q,emptyImageUrl:q,requestFn:S,cancelFn:C,requestAnimFrame:x,cancelAnimFrame:A};function N(){}N.extend=function(s){var l=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=i(h);p.constructor=l,l.prototype=p;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&n(l,s.statics),s.includes&&(T(s.includes),n.apply(null,[p].concat(s.includes))),n(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},n(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,D=p._initHooks.length;w<D;w++)p._initHooks[w].call(this)}},l},N.include=function(s){var l=this.prototype.options;return n(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return n(this.prototype.options,s),this},N.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function T(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=H(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ot={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=b(s);for(var v=0,w=s.length;v<w;v++)this._on(s[v],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=b(s);for(var v=arguments.length===1,w=0,D=s.length;w<D;w++)v?this._off(s[w]):this._off(s[w],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var v={fn:l,ctx:h};p&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,h){var p,v,w;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(v=0,w=p.length;v<w;v++)p[v].fn=f;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var D=this._listens(s,l,h);if(D!==!1){var O=p[D];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(D,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=n({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var w=0,D=v.length;w<D;w++){var O=v[w],j=O.fn;O.once&&this.off(s,j,O.ctx),j.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(p=!!l,v=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,v,h)!==!1)return!0;if(p){for(var D in this._eventParents)if(this._eventParents[D].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var v=0,w=p.length;v<w;v++)if(p[v].fn===l&&p[v].ctx===h)return v;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=b(s);for(var v=0,w=s.length;v<w;v++)this._on(s[v],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,n({layer:s.target,propagatedFrom:s.target},s),!0)}};Ot.addEventListener=Ot.on,Ot.removeEventListener=Ot.clearAllEventListeners=Ot.off,Ot.addOneTimeEventListener=Ot.once,Ot.fireEvent=Ot.fire,Ot.hasEventListeners=Ot.listens;var Ni=N.extend(Ot);function Te(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var vo=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Te.prototype={clone:function(){return new Te(this.x,this.y)},add:function(s){return this.clone()._add(we(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(we(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Te(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Te(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=vo(this.x),this.y=vo(this.y),this},distanceTo:function(s){s=we(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=we(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=we(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function we(s,l,h){return s instanceof Te?s:H(s)?new Te(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Te(s.x,s.y):new Te(s,l,h)}function mt(s,l){if(s)for(var h=l?[s,l]:s,p=0,v=h.length;p<v;p++)this.extend(h[p])}mt.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof Te||typeof s[0]=="number"||"x"in s)l=h=we(s);else if(s=gn(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return we((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return we(this.min.x,this.max.y)},getTopRight:function(){return we(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof Te?s=we(s):s=gn(s),s instanceof mt?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=gn(s);var l=this.min,h=this.max,p=s.min,v=s.max,w=v.x>=l.x&&p.x<=h.x,D=v.y>=l.y&&p.y<=h.y;return w&&D},overlaps:function(s){s=gn(s);var l=this.min,h=this.max,p=s.min,v=s.max,w=v.x>l.x&&p.x<h.x,D=v.y>l.y&&p.y<h.y;return w&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,v=Math.abs(l.y-h.y)*s;return gn(we(l.x-p,l.y-v),we(h.x+p,h.y+v))},equals:function(s){return s?(s=gn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function gn(s,l){return!s||s instanceof mt?s:new mt(s,l)}function Cn(s,l){if(s)for(var h=l?[s,l]:s,p=0,v=h.length;p<v;p++)this.extend(h[p])}Cn.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,v;if(s instanceof xe)p=s,v=s;else if(s instanceof Cn){if(p=s._southWest,v=s._northEast,!p||!v)return this}else return s?this.extend(Ge(s)||lt(s)):this;return!l&&!h?(this._southWest=new xe(p.lat,p.lng),this._northEast=new xe(v.lat,v.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(v.lat,h.lat),h.lng=Math.max(v.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,v=Math.abs(l.lng-h.lng)*s;return new Cn(new xe(l.lat-p,l.lng-v),new xe(h.lat+p,h.lng+v))},getCenter:function(){return new xe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new xe(this.getNorth(),this.getWest())},getSouthEast:function(){return new xe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof xe||"lat"in s?s=Ge(s):s=lt(s);var l=this._southWest,h=this._northEast,p,v;return s instanceof Cn?(p=s.getSouthWest(),v=s.getNorthEast()):p=v=s,p.lat>=l.lat&&v.lat<=h.lat&&p.lng>=l.lng&&v.lng<=h.lng},intersects:function(s){s=lt(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),w=v.lat>=l.lat&&p.lat<=h.lat,D=v.lng>=l.lng&&p.lng<=h.lng;return w&&D},overlaps:function(s){s=lt(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),v=s.getNorthEast(),w=v.lat>l.lat&&p.lat<h.lat,D=v.lng>l.lng&&p.lng<h.lng;return w&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=lt(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function lt(s,l){return s instanceof Cn?s:new Cn(s,l)}function xe(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}xe.prototype={equals:function(s,l){if(!s)return!1;s=Ge(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return er.distance(this,Ge(s))},wrap:function(){return er.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return lt([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new xe(this.lat,this.lng,this.alt)}};function Ge(s,l,h){return s instanceof xe?s:H(s)&&typeof s[0]!="object"?s.length===3?new xe(s[0],s[1],s[2]):s.length===2?new xe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new xe(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new xe(s,l,h)}var kn={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),v=this.transformation.transform(l.max,h);return new mt(p,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new xe(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,v=l.lng-h.lng;if(p===0&&v===0)return s;var w=s.getSouthWest(),D=s.getNorthEast(),O=new xe(w.lat-p,w.lng-v),j=new xe(D.lat-p,D.lng-v);return new Cn(O,j)}},er=n({},kn,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,v=l.lat*h,w=Math.sin((l.lat-s.lat)*h/2),D=Math.sin((l.lng-s.lng)*h/2),O=w*w+Math.cos(p)*Math.cos(v)*D*D,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),yo=6378137,ru={R:yo,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),v=Math.sin(p*l);return new Te(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new xe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=yo*Math.PI;return new mt([-s,-s],[s,s])}()};function ou(s,l,h,p){if(H(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}ou.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Te((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function tr(s,l,h,p){return new ou(s,l,h,p)}var bo=n({},er,{code:"EPSG:3857",projection:ru,transformation:function(){var s=.5/(Math.PI*ru.R);return tr(s,.5,-s,.5)}()}),su=n({},bo,{code:"EPSG:900913"});function ja(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function za(s,l){var h="",p,v,w,D,O,j;for(p=0,w=s.length;p<w;p++){for(O=s[p],v=0,D=O.length;v<D;v++)j=O[v],h+=(v?"L":"M")+j.x+" "+j.y;h+=l?de.svg?"z":"x":""}return h||"M0 0"}var gs=document.documentElement.style,_s="ActiveXObject"in window,$h=_s&&!document.addEventListener,Hh="msLaunchUri"in navigator&&!("documentMode"in document),Ua=ti("webkit"),au=ti("android"),$a=ti("android 2")||ti("android 3"),qh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),v_=au&&ti("Google")&&qh<537&&!("AudioNode"in window),vs=!!window.opera,Ha=!Hh&&ti("chrome"),qa=ti("gecko")&&!Ua&&!vs&&!_s,ln=!Ha&&ti("safari"),un=ti("phantom"),ys="OTransition"in gs,Gh=navigator.platform.indexOf("Win")===0,cu=_s&&"transition"in gs,lu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$a,wo="MozPerspective"in gs,Wh=!window.L_DISABLE_3D&&(cu||lu||wo)&&!ys&&!un,Io=typeof orientation<"u"||ti("mobile"),uu=Io&&Ua,y_=Io&&lu,Zh=!window.PointerEvent&&window.MSPointerEvent,Ga=!!(window.PointerEvent||Zh),du="ontouchstart"in window||!!window.TouchEvent,Kh=!window.L_NO_TOUCH&&(du||Ga),bs=Io&&vs,hu=Io&&qa,fu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Lr=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,l),window.removeEventListener("testPassiveEventSupport",f,l)}catch{}return s}(),Qh=function(){return!!document.createElement("canvas").getContext}(),Eo=!!(document.createElementNS&&ja("svg").createSVGRect),Yh=!!Eo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),ws=!Eo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Xh=navigator.platform.indexOf("Mac")===0,_n=navigator.platform.indexOf("Linux")===0;function ti(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var de={ie:_s,ielt9:$h,edge:Hh,webkit:Ua,android:au,android23:$a,androidStock:v_,opera:vs,chrome:Ha,gecko:qa,safari:ln,phantom:un,opera12:ys,win:Gh,ie3d:cu,webkit3d:lu,gecko3d:wo,any3d:Wh,mobile:Io,mobileWebkit:uu,mobileWebkit3d:y_,msPointer:Zh,pointer:Ga,touch:Kh,touchNative:du,mobileOpera:bs,mobileGecko:hu,retina:fu,passiveEvents:Lr,canvas:Qh,svg:Eo,vml:ws,inlineSvg:Yh,mac:Xh,linux:_n},Co=de.msPointer?"MSPointerDown":"pointerdown",Jh=de.msPointer?"MSPointerMove":"pointermove",ef=de.msPointer?"MSPointerUp":"pointerup",Fr=de.msPointer?"MSPointerCancel":"pointercancel",pu={touchstart:Co,touchmove:Jh,touchend:ef,touchcancel:Fr},tf={touchstart:rf,touchmove:xo,touchend:xo,touchcancel:xo},Oi={},mu=!1;function gu(s,l,h){return l==="touchstart"&&vu(),tf[l]?(h=tf[l].bind(this,h),s.addEventListener(pu[l],h,!1),h):(console.warn("wrong event specified:",l),f)}function Wa(s,l,h){if(!pu[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(pu[l],h,!1)}function nr(s){Oi[s.pointerId]=s}function nf(s){Oi[s.pointerId]&&(Oi[s.pointerId]=s)}function _u(s){delete Oi[s.pointerId]}function vu(){mu||(document.addEventListener(Co,nr,!0),document.addEventListener(Jh,nf,!0),document.addEventListener(ef,_u,!0),document.addEventListener(Fr,_u,!0),mu=!0)}function xo(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in Oi)l.touches.push(Oi[h]);l.changedTouches=[l],s(l)}}function rf(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ft(l),xo(s,l)}function of(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var b_=200;function Za(s,l){s.addEventListener("dblclick",l);var h=0,p;function v(w){if(w.detail!==1){p=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var D=Tu(w);if(!(D.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!D.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-h<=b_?(p++,p===2&&l(of(w))):p=1,h=O}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function sf(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Is=pi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Li=pi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ir=Li==="webkitTransition"||Li==="OTransition"?Li+"End":"transitionend";function Ka(s){return typeof s=="string"?document.getElementById(s):s}function Es(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function Ke(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function wt(s){var l=s.parentNode;l&&l.removeChild(s)}function Cs(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function rr(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function or(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Qa(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=xs(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Me(s,l){if(s.classList!==void 0)for(var h=b(l),p=0,v=h.length;p<v;p++)s.classList.add(h[p]);else if(!Qa(s,l)){var w=xs(s);yu(s,(w?w+" ":"")+l)}}function Lt(s,l){s.classList!==void 0?s.classList.remove(l):yu(s,_((" "+xs(s)+" ").replace(" "+l+" "," ")))}function yu(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function xs(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Nn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&w_(s,l)}function w_(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function pi(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function vn(s,l,h){var p=l||new Te(0,0);s.style[Is]=(de.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function At(s,l){s._leaflet_pos=l,de.any3d?vn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function mi(s){return s._leaflet_pos||new Te(0,0)}var Do,it,To;if("onselectstart"in document)Do=function(){De(window,"selectstart",Ft)},it=function(){ut(window,"selectstart",Ft)};else{var Fi=pi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Do=function(){if(Fi){var s=document.documentElement.style;To=s[Fi],s[Fi]="none"}},it=function(){Fi&&(document.documentElement.style[Fi]=To,To=void 0)}}function Vr(){De(window,"dragstart",Ft)}function bu(){ut(window,"dragstart",Ft)}var Ds,wu;function Iu(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ya(),Ds=s,wu=s.style.outlineStyle,s.style.outlineStyle="none",De(window,"keydown",Ya))}function Ya(){Ds&&(Ds.style.outlineStyle=wu,Ds=void 0,wu=void 0,ut(window,"keydown",Ya))}function af(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Br(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var sr={__proto__:null,TRANSFORM:Is,TRANSITION:Li,TRANSITION_END:ir,get:Ka,getStyle:Es,create:Ke,remove:wt,empty:Cs,toFront:rr,toBack:or,hasClass:Qa,addClass:Me,removeClass:Lt,setClass:yu,getClass:xs,setOpacity:Nn,testProp:pi,setTransform:vn,setPosition:At,getPosition:mi,get disableTextSelection(){return Do},get enableTextSelection(){return it},disableImageDrag:Vr,enableImageDrag:bu,preventOutline:Iu,restoreOutline:Ya,getSizedParentNode:af,getScale:Br};function De(s,l,h,p){if(l&&typeof l=="object")for(var v in l)Cu(s,v,l[v],h);else{l=b(l);for(var w=0,D=l.length;w<D;w++)Cu(s,l[w],h,p)}return this}var ni="_leaflet_events";function ut(s,l,h,p){if(arguments.length===1)jr(s),delete s[ni];else if(l&&typeof l=="object")for(var v in l)xu(s,v,l[v],h);else if(l=b(l),arguments.length===2)jr(s,function(O){return Q(l,O)!==-1});else for(var w=0,D=l.length;w<D;w++)xu(s,l[w],h,p);return this}function jr(s,l){for(var h in s[ni]){var p=h.split(/\d/)[0];(!l||l(p))&&xu(s,p,null,null,h)}}var Eu={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cu(s,l,h,p){var v=l+a(h)+(p?"_"+a(p):"");if(s[ni]&&s[ni][v])return this;var w=function(O){return h.call(p||s,O||window.event)},D=w;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?w=gu(s,l,w):de.touch&&l==="dblclick"?w=Za(s,w):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Eu[l]||l,w,de.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(O){O=O||window.event,As(s,O)&&D(O)},s.addEventListener(Eu[l],w,!1)):s.addEventListener(l,D,!1):s.attachEvent("on"+l,w),s[ni]=s[ni]||{},s[ni][v]=w}function xu(s,l,h,p,v){v=v||l+a(h)+(p?"_"+a(p):"");var w=s[ni]&&s[ni][v];if(!w)return this;!de.touchNative&&de.pointer&&l.indexOf("touch")===0?Wa(s,l,w):de.touch&&l==="dblclick"?sf(s,w):"removeEventListener"in s?s.removeEventListener(Eu[l]||l,w,!1):s.detachEvent("on"+l,w),s[ni][v]=null}function xn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Du(s){return Cu(s,"wheel",xn),this}function Ts(s){return De(s,"mousedown touchstart dblclick contextmenu",xn),s._leaflet_disable_click=!0,this}function Ft(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function gi(s){return Ft(s),xn(s),this}function Tu(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function So(s,l){if(!l)return new Te(s.clientX,s.clientY);var h=Br(l),p=h.boundingClientRect;return new Te((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var Ss=de.linux&&de.chrome?window.devicePixelRatio:de.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Su(s){return de.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Ss:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function As(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Rt={__proto__:null,on:De,off:ut,stopPropagation:xn,disableScrollPropagation:Du,disableClickPropagation:Ts,preventDefault:Ft,stop:gi,getPropagationPath:Tu,getMousePosition:So,getWheelDelta:Su,isExternalTarget:As,addListener:De,removeListener:ut},cf=Ni.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=mi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),At(this._el,h),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),We=Ni.extend({options:{crs:bo,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=I(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Ge(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Li&&de.any3d&&!de.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),De(this._proxy,ir,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(Ge(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=n({animate:h.animate},h.zoom),h.pan=n({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),v=this.getSize().divideBy(2),w=s instanceof Te?s:this.latLngToContainerPoint(s),D=w.subtract(v).multiplyBy(1-1/p),O=this.containerPointToLatLng(v.add(D));return this.setView(O,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():lt(s);var h=we(l.paddingTopLeft||l.padding||[0,0]),p=we(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,h.add(p));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var w=p.subtract(h).divideBy(2),D=this.project(s.getSouthWest(),v),O=this.project(s.getNorthEast(),v),j=this.unproject(D.add(O).divideBy(2).add(w),v);return{center:j,zoom:v}},fitBounds:function(s,l){if(s=lt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=we(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new cf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Me(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!de.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),v=this.project(s),w=this.getSize(),D=this._zoom;s=Ge(s),l=l===void 0?D:l;var O=Math.max(w.x,w.y),j=O*this.getZoomScale(D,l),W=v.distanceTo(p)||1,se=1.42,Ie=se*se;function je(Yt){var Df=Yt?-1:1,D1=Yt?j:O,T1=j*j-O*O+Df*Ie*Ie*W*W,S1=2*D1*Ie*W,D_=T1/S1,dC=Math.sqrt(D_*D_+1)-D_,A1=dC<1e-9?-18:Math.log(dC);return A1}function Ln(Yt){return(Math.exp(Yt)-Math.exp(-Yt))/2}function hn(Yt){return(Math.exp(Yt)+Math.exp(-Yt))/2}function _i(Yt){return Ln(Yt)/hn(Yt)}var qn=je(0);function lc(Yt){return O*(hn(qn)/hn(qn+se*Yt))}function I1(Yt){return O*(hn(qn)*_i(qn+se*Yt)-Ln(qn))/Ie}function E1(Yt){return 1-Math.pow(1-Yt,1.5)}var C1=Date.now(),lC=(je(1)-qn)/se,x1=h.duration?1e3*h.duration:1e3*lC*.8;function uC(){var Yt=(Date.now()-C1)/x1,Df=E1(Yt)*lC;Yt<=1?(this._flyToFrame=x(uC,this),this._move(this.unproject(p.add(v.subtract(p).multiplyBy(I1(Df)/W)),D),this.getScaleZoom(O/lc(Df),D),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),uC.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=lt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,lt(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=we(l.paddingTopLeft||l.padding||[0,0]),p=we(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),w=this.project(s),D=this.getPixelBounds(),O=gn([D.min.add(h),D.max.subtract(p)]),j=O.getSize();if(!O.contains(w)){this._enforcingBounds=!0;var W=w.subtract(O.getCenter()),se=O.extend(w).getSize().subtract(j);v.x+=W.x<0?-se.x:se.x,v.y+=W.y<0?-se.y:se.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=n({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),v=h.divideBy(2).round(),w=p.subtract(v);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=n({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new xe(l,h),v=p.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var D=this.getBoundsZoom(v);this.setView(p,w.maxZoom?Math.min(D,w.maxZoom):D)}var O={latlng:p,bounds:v,timestamp:s.timestamp};for(var j in s.coords)typeof s.coords[j]=="number"&&(O[j]=s.coords[j]);this.fire("locationfound",O)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),wt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)wt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ke("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Cn(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=lt(s),h=we(h||[0,0]);var p=this.getZoom()||0,v=this.getMinZoom(),w=this.getMaxZoom(),D=s.getNorthWest(),O=s.getSouthEast(),j=this.getSize().subtract(h),W=gn(this.project(O,p),this.project(D,p)).getSize(),se=de.any3d?this.options.zoomSnap:1,Ie=j.x/W.x,je=j.y/W.y,Ln=l?Math.max(Ie,je):Math.min(Ie,je);return p=this.getScaleZoom(Ln,p),se&&(p=Math.round(p/(se/100))*(se/100),p=l?Math.ceil(p/se)*se:Math.floor(p/se)*se),Math.max(v,Math.min(w,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new mt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Ge(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(we(s),l)},layerPointToLatLng:function(s){var l=we(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(Ge(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ge(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(lt(s))},distance:function(s,l){return this.options.crs.distance(Ge(s),Ge(l))},containerPointToLayerPoint:function(s){return we(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return we(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(we(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ge(s)))},mouseEventToContainerPoint:function(s){return So(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Ka(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");De(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&de.any3d,Me(s,"leaflet-container"+(de.touch?" leaflet-touch":"")+(de.retina?" leaflet-retina":"")+(de.ielt9?" leaflet-oldie":"")+(de.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Es(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),At(this._mapPane,new Te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Me(s.markerPane,"leaflet-zoom-hide"),Me(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){At(this._mapPane,new Te(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,h)._move(s,l)._moveEnd(v),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((v||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){At(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var l=s?ut:De;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),de.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,v=l==="mouseout"||l==="mouseover",w=s.target||s.srcElement,D=!1;w;){if(p=this._targets[a(w)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){D=!0;break}if(p&&p.listens(l,!0)&&(v&&!As(w,s)||(h.push(p),v))||w===this._container)break;w=w.parentNode}return!h.length&&!D&&!v&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&Iu(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=n({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var v=this._findEventTargets(s,l);if(h){for(var w=[],D=0;D<h.length;D++)h[D].listens(l,!0)&&w.push(h[D]);v=w.concat(v)}if(v.length){l==="contextmenu"&&Ft(s);var O=v[0],j={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var W=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=W?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=W?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(D=0;D<v.length;D++)if(v[D].fire(l,j,!0),j.originalEvent._stopped||v[D].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return mi(this._mapPane)||new Te(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return gn([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),v=this.getSize().divideBy(2),w=new mt(p.subtract(v),p.add(v)),D=this._getBoundsOffset(w,h,l);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?s:this.unproject(p.add(D),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new mt(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=gn(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),v=p.min.subtract(s.min),w=p.max.subtract(s.max),D=this._rebound(v.x,-w.x),O=this._rebound(v.y,-w.y);return new Te(D,O)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=de.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Lt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ke("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=Is,p=this._proxy.style[h];vn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){wt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();vn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(v)?!1:(x(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Lt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function lf(s,l){return new We(s,l)}var Hn=N.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Me(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(wt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Ao=function(s){return new Hn(s)};We.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=Ke("div",l+"control-container",this._container);function p(v,w){var D=l+v+" "+l+w;s[v+w]=Ke("div",D,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)wt(this._controlCorners[s]);wt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ms=Hn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){I(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Hn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Lt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Lt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ke("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ts(l),Du(l);var p=this._section=Ke("section",s+"-list");h&&(this._map.on("click",this.collapse,this),De(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=Ke("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),De(v,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Ft(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Ke("div",s+"-base",p),this._separator=Ke("div",s+"-separator",p),this._overlaysList=Ke("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,v){return this.options.sortFunction(p.layer,v.layer,p.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Cs(this._baseLayersList),Cs(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,v=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,v+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(a(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),De(p,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(p),w.appendChild(v);var D=s.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],v=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)l=s[w],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||v.push(h);for(w=0;w<v.length;w++)this._map.hasLayer(v[w])&&this._map.removeLayer(v[w]);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])||this._map.addLayer(p[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,De(s,"click",Ft),this.expand();var l=this;setTimeout(function(){ut(s,"click",Ft),l._preventClick=!1})}}),uf=function(s,l,h){return new Ms(s,l,h)},ii=Hn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=Ke("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,v){var w=Ke("a",h,p);return w.innerHTML=s,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Ts(w),De(w,"click",gi),De(w,"click",v,this),De(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Lt(this._zoomInButton,l),Lt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Me(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Me(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});We.mergeOptions({zoomControl:!0}),We.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ii,this.addControl(this.zoomControl))});var df=function(s){return new ii(s)},hf=Hn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=Ke("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=Ke("div",l,h)),s.imperial&&(this._iScale=Ke("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,v;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),Ps=function(s){return new hf(s)},ff='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Rs=Hn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(de.inlineSvg?ff+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ke("div","leaflet-control-attribution"),Ts(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});We.mergeOptions({attributionControl:!0}),We.addInitHook(function(){this.options.attributionControl&&new Rs().addTo(this)});var Xa=function(s){return new Rs(s)};Hn.Layers=Ms,Hn.Zoom=ii,Hn.Scale=hf,Hn.Attribution=Rs,Ao.layers=uf,Ao.zoom=df,Ao.scale=Ps,Ao.attribution=Xa;var ri=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ri.addTo=function(s,l){return s.addHandler(l,this),this};var Ja={Events:Ot},pf=de.touch?"touchstart mousedown":"mousedown",Vi=Ni.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){I(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(De(this._dragStartTarget,pf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Vi._dragging===this&&this.finishDrag(!0),ut(this._dragStartTarget,pf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Qa(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Vi._dragging===this&&this.finishDrag();return}if(!(Vi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Vi._dragging=this,this._preventOutline&&Iu(this._element),Vr(),Do(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=af(this._element);this._startPoint=new Te(l.clientX,l.clientY),this._startPos=mi(this._element),this._parentScale=Br(h);var p=s.type==="mousedown";De(document,p?"mousemove":"touchmove",this._onMove,this),De(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Te(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Ft(s),this._moved||(this.fire("dragstart"),this._moved=!0,Me(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),At(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Lt(document.body,"leaflet-dragging"),this._lastTarget&&(Lt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ut(document,"mousemove touchmove",this._onMove,this),ut(document,"mouseup touchend touchcancel",this._onUp,this),bu(),it();var l=this._moved&&this._moving;this._moving=!1,Vi._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Mo(s,l,h){var p,v=[1,4,2,8],w,D,O,j,W,se,Ie,je;for(w=0,se=s.length;w<se;w++)s[w]._code=ar(s[w],l);for(O=0;O<4;O++){for(Ie=v[O],p=[],w=0,se=s.length,D=se-1;w<se;D=w++)j=s[w],W=s[D],j._code&Ie?W._code&Ie||(je=ks(W,j,Ie,l,h),je._code=ar(je,l),p.push(je)):(W._code&Ie&&(je=ks(W,j,Ie,l,h),je._code=ar(je,l),p.push(je)),p.push(j));s=p}return s}function Au(s,l){var h,p,v,w,D,O,j,W,se;if(!s||s.length===0)throw new Error("latlngs not passed");On(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ie=Ge([0,0]),je=lt(s),Ln=je.getNorthWest().distanceTo(je.getSouthWest())*je.getNorthEast().distanceTo(je.getNorthWest());Ln<1700&&(Ie=ec(s));var hn=s.length,_i=[];for(h=0;h<hn;h++){var qn=Ge(s[h]);_i.push(l.project(Ge([qn.lat-Ie.lat,qn.lng-Ie.lng])))}for(O=j=W=0,h=0,p=hn-1;h<hn;p=h++)v=_i[h],w=_i[p],D=v.y*w.x-w.y*v.x,j+=(v.x+w.x)*D,W+=(v.y+w.y)*D,O+=D*3;O===0?se=_i[0]:se=[j/O,W/O];var lc=l.unproject(we(se));return Ge([lc.lat+Ie.lat,lc.lng+Ie.lng])}function ec(s){for(var l=0,h=0,p=0,v=0;v<s.length;v++){var w=Ge(s[v]);l+=w.lat,h+=w.lng,p++}return Ge([l/p,h/p])}var Mu={__proto__:null,clipPolygon:Mo,polygonCenter:Au,centroid:ec};function tc(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=zr(s,h),s=mf(s,h),s}function Pu(s,l,h){return Math.sqrt(on(s,l,h,!0))}function nc(s,l,h){return on(s,l,h)}function mf(s,l){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,v=new p(h);v[0]=v[h-1]=1,ic(s,v,l,0,h-1);var w,D=[];for(w=0;w<h;w++)v[w]&&D.push(s[w]);return D}function ic(s,l,h,p,v){var w=0,D,O,j;for(O=p+1;O<=v-1;O++)j=on(s[O],s[p],s[v],!0),j>w&&(D=O,w=j);w>h&&(l[D]=1,ic(s,l,h,p,D),ic(s,l,h,D,v))}function zr(s,l){for(var h=[s[0]],p=1,v=0,w=s.length;p<w;p++)rc(s[p],s[v])>l&&(h.push(s[p]),v=p);return v<w-1&&h.push(s[w-1]),h}var Ru;function ku(s,l,h,p,v){var w=p?Ru:ar(s,h),D=ar(l,h),O,j,W;for(Ru=D;;){if(!(w|D))return[s,l];if(w&D)return!1;O=w||D,j=ks(s,l,O,h,v),W=ar(j,h),O===w?(s=j,w=W):(l=j,D=W)}}function ks(s,l,h,p,v){var w=l.x-s.x,D=l.y-s.y,O=p.min,j=p.max,W,se;return h&8?(W=s.x+w*(j.y-s.y)/D,se=j.y):h&4?(W=s.x+w*(O.y-s.y)/D,se=O.y):h&2?(W=j.x,se=s.y+D*(j.x-s.x)/w):h&1&&(W=O.x,se=s.y+D*(O.x-s.x)/w),new Te(W,se,v)}function ar(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function rc(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function on(s,l,h,p){var v=l.x,w=l.y,D=h.x-v,O=h.y-w,j=D*D+O*O,W;return j>0&&(W=((s.x-v)*D+(s.y-w)*O)/j,W>1?(v=h.x,w=h.y):W>0&&(v+=D*W,w+=O*W)),D=s.x-v,O=s.y-w,p?D*D+O*O:new Te(v,w)}function On(s){return!H(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Nu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),On(s)}function Ur(s,l){var h,p,v,w,D,O,j,W;if(!s||s.length===0)throw new Error("latlngs not passed");On(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var se=Ge([0,0]),Ie=lt(s),je=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());je<1700&&(se=ec(s));var Ln=s.length,hn=[];for(h=0;h<Ln;h++){var _i=Ge(s[h]);hn.push(l.project(Ge([_i.lat-se.lat,_i.lng-se.lng])))}for(h=0,p=0;h<Ln-1;h++)p+=hn[h].distanceTo(hn[h+1])/2;if(p===0)W=hn[0];else for(h=0,w=0;h<Ln-1;h++)if(D=hn[h],O=hn[h+1],v=D.distanceTo(O),w+=v,w>p){j=(w-p)/v,W=[O.x-j*(O.x-D.x),O.y-j*(O.y-D.y)];break}var qn=l.unproject(we(W));return Ge([qn.lat+se.lat,qn.lng+se.lng])}var d={__proto__:null,simplify:tc,pointToSegmentDistance:Pu,closestPointOnSegment:nc,clipSegment:ku,_getEdgeIntersection:ks,_getBitCode:ar,_sqClosestPointOnSegment:on,isFlat:On,_flat:Nu,polylineCenter:Ur},g={project:function(s){return new Te(s.lng,s.lat)},unproject:function(s){return new xe(s.y,s.x)},bounds:new mt([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new mt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,v=this.R_MINOR/h,w=Math.sqrt(1-v*v),D=w*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-D)/(1+D),w/2);return p=-h*Math.log(Math.max(O,1e-10)),new Te(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,v=Math.sqrt(1-p*p),w=Math.exp(-s.y/h),D=Math.PI/2-2*Math.atan(w),O=0,j=.1,W;O<15&&Math.abs(j)>1e-7;O++)W=v*Math.sin(D),W=Math.pow((1-W)/(1+W),v/2),j=Math.PI/2-2*Math.atan(w*W)-D,D+=j;return new xe(D*l,s.x*l/h)}},E={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:ru},k=n({},er,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return tr(s,.5,-s,.5)}()}),z=n({},er,{code:"EPSG:4326",projection:g,transformation:tr(1/180,1,-1/180,.5)}),J=n({},kn,{projection:g,transformation:tr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});kn.Earth=er,kn.EPSG3395=k,kn.EPSG3857=bo,kn.EPSG900913=su,kn.EPSG4326=z,kn.Simple=J;var Fe=Ni.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});We.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=a(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?H(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=a(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var v=this._zoomBoundLayers[p].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var kt=Fe.extend({initialize:function(s,l){I(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),Qe=function(s,l){return new kt(s,l)},It=kt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),kt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),kt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Cn;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),dn=function(s,l){return new It(s,l)},oi=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var v=we(p),w=we(l==="shadow"&&h.shadowAnchor||h.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return de.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function si(s){return new oi(s)}var cr=oi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof cr.imagePath!="string"&&(cr.imagePath=this._detectIconPath()),(this.options.imagePath||cr.imagePath)+oi.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,v){var w=p.exec(h);return w&&w[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ke("div","leaflet-default-icon-path",document.body),l=Es(s,"background-image")||Es(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),oc=ri.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Vi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Me(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Lt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,w=mi(l._icon),D=h.getPixelBounds(),O=h.getPixelOrigin(),j=gn(D.min._subtract(O).add(v),D.max._subtract(O).subtract(v));if(!j.contains(w)){var W=we((Math.max(j.max.x,w.x)-j.max.x)/(D.max.x-j.max.x)-(Math.min(j.min.x,w.x)-j.min.x)/(D.min.x-j.min.x),(Math.max(j.max.y,w.y)-j.max.y)/(D.max.y-j.max.y)-(Math.min(j.min.y,w.y)-j.min.y)/(D.min.y-j.min.y)).multiplyBy(p);h.panBy(W,{animate:!1}),this._draggable._newPos._add(W),this._draggable._startPos._add(W),At(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=x(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=mi(l._icon),v=l._map.layerPointToLatLng(p);h&&At(h,p),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),gf=Fe.extend({options:{icon:new cr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){I(this,l),this._latlng=Ge(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=Ge(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Me(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(h,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),w=!1;v!==this._shadow&&(this._removeShadow(),w=!0),v&&(Me(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ut(this._icon,"focus",this._panOnFocus,this),wt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&wt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&At(this._icon,s),this._shadow&&At(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),oc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new oc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Nn(this._icon,s),this._shadow&&Nn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?we(l.iconSize):we(0,0),p=l.iconAnchor?we(l.iconAnchor):we(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function r1(s,l){return new gf(s,l)}var Po=Fe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),_f=Po.extend({options:{fill:!0,radius:10},initialize:function(s,l){I(this,l),this._latlng=Ge(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=Ge(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Po.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new mt(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function o1(s,l){return new _f(s,l)}var I_=_f.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=n({},h,{radius:l})),I(this,l),this._latlng=Ge(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Cn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Po.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===er.distance){var v=Math.PI/180,w=this._mRadius/er.R/v,D=h.project([l+w,s]),O=h.project([l-w,s]),j=D.add(O).divideBy(2),W=h.unproject(j).lat,se=Math.acos((Math.cos(w*v)-Math.sin(l*v)*Math.sin(W*v))/(Math.cos(l*v)*Math.cos(W*v)))/v;(isNaN(se)||se===0)&&(se=w/Math.cos(Math.PI/180*l)),this._point=j.subtract(h.getPixelOrigin()),this._radius=isNaN(se)?0:j.x-h.project([W,s-se]).x,this._radiusY=j.y-D.y}else{var Ie=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Ie).x}this._updateBounds()}});function s1(s,l,h){return new I_(s,l,h)}var $r=Po.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){I(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=on,v,w,D=0,O=this._parts.length;D<O;D++)for(var j=this._parts[D],W=1,se=j.length;W<se;W++){v=j[W-1],w=j[W];var Ie=p(s,v,w,!0);Ie<l&&(l=Ie,h=p(s,v,w))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ur(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=Ge(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Cn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return On(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=On(s),p=0,v=s.length;p<v;p++)h?(l[p]=Ge(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new mt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Te(s,s);this._rawPxBounds&&(this._pxBounds=new mt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof xe,v=s.length,w,D;if(p){for(D=[],w=0;w<v;w++)D[w]=this._map.latLngToLayerPoint(s[w]),h.extend(D[w]);l.push(D)}else for(w=0;w<v;w++)this._projectLatlngs(s[w],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,v,w,D,O,j;for(h=0,v=0,w=this._rings.length;h<w;h++)for(j=this._rings[h],p=0,D=j.length;p<D-1;p++)O=ku(j[p],j[p+1],s,p,!0),O&&(l[v]=l[v]||[],l[v].push(O[0]),(O[1]!==j[p+1]||p===D-2)&&(l[v].push(O[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=tc(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,v,w,D,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(O=this._parts[h],p=0,D=O.length,v=D-1;p<D;v=p++)if(!(!l&&p===0)&&Pu(s,O[v],O[p])<=j)return!0;return!1}});function a1(s,l){return new $r(s,l)}$r._flat=Nu;var sc=$r.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Au(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=$r.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof xe&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){$r.prototype._setLatLngs.call(this,s),On(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return On(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new Te(l,l);if(s=new mt(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,v=this._rings.length,w;p<v;p++)w=Mo(this._rings[p],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,v,w,D,O,j,W;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,j=this._parts.length;w<j;w++)for(h=this._parts[w],D=0,W=h.length,O=W-1;D<W;O=D++)p=h[D],v=h[O],p.y>s.y!=v.y>s.y&&s.x<(v.x-p.x)*(s.y-p.y)/(v.y-p.y)+p.x&&(l=!l);return l||$r.prototype._containsPoint.call(this,s,!0)}});function c1(s,l){return new sc(s,l)}var Hr=It.extend({initialize:function(s,l){I(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=H(s)?s:s.features,h,p,v;if(l){for(h=0,p=l.length;h<p;h++)v=l[h],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var D=vf(s,w);return D?(D.feature=wf(s),D.defaultOptions=D.options,this.resetStyle(D),w.onEachFeature&&w.onEachFeature(s,D),this.addLayer(D)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=n({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function vf(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,v=[],w=l&&l.pointToLayer,D=l&&l.coordsToLatLng||E_,O,j,W,se;if(!p&&!h)return null;switch(h.type){case"Point":return O=D(p),qE(w,s,O,l);case"MultiPoint":for(W=0,se=p.length;W<se;W++)O=D(p[W]),v.push(qE(w,s,O,l));return new It(v);case"LineString":case"MultiLineString":return j=yf(p,h.type==="LineString"?0:1,D),new $r(j,l);case"Polygon":case"MultiPolygon":return j=yf(p,h.type==="Polygon"?1:2,D),new sc(j,l);case"GeometryCollection":for(W=0,se=h.geometries.length;W<se;W++){var Ie=vf({geometry:h.geometries[W],type:"Feature",properties:s.properties},l);Ie&&v.push(Ie)}return new It(v);case"FeatureCollection":for(W=0,se=h.features.length;W<se;W++){var je=vf(h.features[W],l);je&&v.push(je)}return new It(v);default:throw new Error("Invalid GeoJSON object.")}}function qE(s,l,h,p){return s?s(l,h):new gf(h,p&&p.markersInheritOptions&&p)}function E_(s){return new xe(s[1],s[0],s[2])}function yf(s,l,h){for(var p=[],v=0,w=s.length,D;v<w;v++)D=l?yf(s[v],l-1,h):(h||E_)(s[v]),p.push(D);return p}function C_(s,l){return s=Ge(s),s.alt!==void 0?[m(s.lng,l),m(s.lat,l),m(s.alt,l)]:[m(s.lng,l),m(s.lat,l)]}function bf(s,l,h,p){for(var v=[],w=0,D=s.length;w<D;w++)v.push(l?bf(s[w],On(s[w])?0:l-1,h,p):C_(s[w],p));return!l&&h&&v.length>0&&v.push(v[0].slice()),v}function ac(s,l){return s.feature?n({},s.feature,{geometry:l}):wf(l)}function wf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var x_={toGeoJSON:function(s){return ac(this,{type:"Point",coordinates:C_(this.getLatLng(),s)})}};gf.include(x_),I_.include(x_),_f.include(x_),$r.include({toGeoJSON:function(s){var l=!On(this._latlngs),h=bf(this._latlngs,l?1:0,!1,s);return ac(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),sc.include({toGeoJSON:function(s){var l=!On(this._latlngs),h=l&&!On(this._latlngs[0]),p=bf(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),ac(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),kt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),ac(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(v){if(v.toGeoJSON){var w=v.toGeoJSON(s);if(h)p.push(w.geometry);else{var D=wf(w);D.type==="FeatureCollection"?p.push.apply(p,D.features):p.push(D)}}}),h?ac(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function GE(s,l){return new Hr(s,l)}var l1=GE,If=Fe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=lt(l),I(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){wt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&rr(this._image),this},bringToBack:function(){return this._map&&or(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=lt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ke("img");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;vn(this._image,h,l)},_reset:function(){var s=this._image,l=new mt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();At(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Nn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),u1=function(s,l,h){return new If(s,l,h)},WE=If.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ke("video");if(Me(l,"leaflet-image-layer"),this._zoomAnimated&&Me(l,"leaflet-zoom-animated"),this.options.className&&Me(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onloadeddata=r(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],v=0;v<h.length;v++)p.push(h[v].src);this._url=h.length>0?p:[l.src];return}H(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var D=Ke("source");D.src=this._url[w],l.appendChild(D)}}});function d1(s,l,h){return new WE(s,l,h)}var ZE=If.extend({_initImage:function(){var s=this._image=this._url;Me(s,"leaflet-image-layer"),this._zoomAnimated&&Me(s,"leaflet-zoom-animated"),this.options.className&&Me(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function h1(s,l,h){return new ZE(s,l,h)}var lr=Fe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof xe||H(s))?(this._latlng=Ge(s),I(this,l)):(I(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Nn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Nn(this._container,1),this.bringToFront(),this.options.interactive&&(Me(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Nn(this._container,0),this._removeTimeout=setTimeout(r(wt,void 0,this._container),200)):wt(this._container),this.options.interactive&&(Lt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ge(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&rr(this._container),this},bringToBack:function(){return this._map&&or(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof It){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=we(this.options.offset),h=this._getAnchor();this._zoomAnimated?At(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});We.include({_initOverlay:function(s,l,h,p){var v=l;return v instanceof s||(v=new s(p).setContent(l)),h&&v.setLatLng(h),v}}),Fe.include({_initOverlay:function(s,l,h,p){var v=h;return v instanceof s?(I(v,p),v._source=this):(v=l&&!p?l:new s(p,this),v.setContent(h)),v}});var Ef=lr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,lr.prototype.openOn.call(this,s)},onAdd:function(s){lr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Po||this._source.on("preclick",xn))},onRemove:function(s){lr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Po||this._source.off("preclick",xn))},getEvents:function(){var s=lr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ke("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Ke("div",s+"-content-wrapper",l);if(this._contentNode=Ke("div",s+"-content",h),Ts(l),Du(this._contentNode),De(l,"contextmenu",xn),this._tipContainer=Ke("div",s+"-tip-container",l),this._tip=Ke("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ke("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',De(p,"click",function(v){Ft(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,v=this.options.maxHeight,w="leaflet-popup-scrolled";v&&p>v?(l.height=v+"px",Me(s,w)):Lt(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();At(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Es(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,v=new Te(this._containerLeft,-h-this._containerBottom);v._add(mi(this._container));var w=s.layerPointToContainerPoint(v),D=we(this.options.autoPanPadding),O=we(this.options.autoPanPaddingTopLeft||D),j=we(this.options.autoPanPaddingBottomRight||D),W=s.getSize(),se=0,Ie=0;w.x+p+j.x>W.x&&(se=w.x+p-W.x+j.x),w.x-se-O.x<0&&(se=w.x-O.x),w.y+h+j.y>W.y&&(Ie=w.y+h-W.y+j.y),w.y-Ie-O.y<0&&(Ie=w.y-O.y),(se||Ie)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([se,Ie]))}},_getAnchor:function(){return we(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),f1=function(s,l){return new Ef(s,l)};We.mergeOptions({closePopupOnClick:!0}),We.include({openPopup:function(s,l,h){return this._initOverlay(Ef,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Fe.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Ef,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof It||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){gi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Po)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Cf=lr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){lr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){lr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=lr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ke("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,v=this._container,w=p.latLngToContainerPoint(p.getCenter()),D=p.layerPointToContainerPoint(s),O=this.options.direction,j=v.offsetWidth,W=v.offsetHeight,se=we(this.options.offset),Ie=this._getAnchor();O==="top"?(l=j/2,h=W):O==="bottom"?(l=j/2,h=0):O==="center"?(l=j/2,h=W/2):O==="right"?(l=0,h=W/2):O==="left"?(l=j,h=W/2):D.x<w.x?(O="right",l=0,h=W/2):(O="left",l=j+(se.x+Ie.x)*2,h=W/2),s=s.subtract(we(l,h,!0)).add(se).add(Ie),Lt(v,"leaflet-tooltip-right"),Lt(v,"leaflet-tooltip-left"),Lt(v,"leaflet-tooltip-top"),Lt(v,"leaflet-tooltip-bottom"),Me(v,"leaflet-tooltip-"+O),At(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Nn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return we(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),p1=function(s,l){return new Cf(s,l)};We.include({openTooltip:function(s,l,h){return this._initOverlay(Cf,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Fe.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Cf,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof It||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(De(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),De(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var KE=oi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Cs(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=we(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function m1(s){return new KE(s)}oi.Default=cr;var Ou=Fe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:de.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),wt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(rr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(or(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Te?s:new Te(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,v=l.length,w;p<v;p++)w=l[p].style.zIndex,l[p]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!de.ielt9){Nn(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var v=this._tiles[p];if(!(!v.current||!v.loaded)){var w=Math.min(1,(s-v.loaded)/200);Nn(v.el,w),w<1?l=!0:(v.active?h=!0:this._onOpaqueTile(v),v.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(A(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ke("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(wt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],v=this._map;return p||(p=this._levels[s]={},p.el=Ke("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,v.getCenter(),v.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)wt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var v=Math.floor(s/2),w=Math.floor(l/2),D=h-1,O=new Te(+v,+w);O.z=+D;var j=this._tileCoordsToKey(O),W=this._tiles[j];return W&&W.active?(W.retain=!0,!0):(W&&W.loaded&&(W.retain=!0),D>p?this._retainParent(v,w,D,p):!1)},_retainChildren:function(s,l,h,p){for(var v=2*s;v<2*s+2;v++)for(var w=2*l;w<2*l+2;w++){var D=new Te(v,w);D.z=h+1;var O=this._tileCoordsToKey(D),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);h+1<p&&this._retainChildren(v,w,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var w=this.options.updateWhenZooming&&v!==this._tileZoom;(!p||w)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),v=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();de.any3d?vn(s.el,v,p):At(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),v=l.project(s,this._tileZoom).floor(),w=l.getSize().divideBy(p*2);return new mt(v.subtract(w),v.add(w))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(p),w=v.getCenter(),D=[],O=this.options.keepBuffer,j=new mt(v.getBottomLeft().subtract([O,-O]),v.getTopRight().add([O,-O]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var W in this._tiles){var se=this._tiles[W].coords;(se.z!==this._tileZoom||!j.contains(new Te(se.x,se.y)))&&(this._tiles[W].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var Ie=v.min.y;Ie<=v.max.y;Ie++)for(var je=v.min.x;je<=v.max.x;je++){var Ln=new Te(je,Ie);if(Ln.z=this._tileZoom,!!this._isValidTile(Ln)){var hn=this._tiles[this._tileCoordsToKey(Ln)];hn?hn.current=!0:D.push(Ln)}}if(D.sort(function(qn,lc){return qn.distanceTo(w)-lc.distanceTo(w)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var _i=document.createDocumentFragment();for(je=0;je<D.length;je++)this._addTile(D[je],_i);this._level.el.appendChild(_i)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return lt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),v=p.add(h),w=l.unproject(p,s.z),D=l.unproject(v,s.z);return[w,D]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new Cn(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new Te(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(wt(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Me(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=f,s.onmousemove=f,de.ielt9&&this.options.opacity<1&&Nn(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&x(r(this._tileReady,this,s,null,v)),At(v,h),this._tiles[p]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Nn(h.el,0),A(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Me(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),de.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Te(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new mt(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function g1(s){return new Ou(s)}var cc=Ou.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=I(this,l),l.detectRetina&&de.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return De(h,"load",r(this._tileOnLoad,this,l,h)),De(h,"error",r(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:de.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return F(this._url,n(l,this.options))},_tileOnLoad:function(s,l){de.ielt9?setTimeout(r(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=f,l.onerror=f,!l.complete)){l.src=q;var h=this._tiles[s].coords;wt(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Ou.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===q))return Ou.prototype._tileReady.call(this,s,l,h)}});function QE(s,l){return new cc(s,l)}var YE=cc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=n({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=I(this,l);var v=l.detectRetina&&de.retina?2:1,w=this.getTileSize();h.width=w.x*v,h.height=w.y*v,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,cc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=gn(h.project(l[0]),h.project(l[1])),v=p.min,w=p.max,D=(this._wmsVersion>=1.3&&this._crs===z?[v.y,v.x,w.y,w.x]:[v.x,v.y,w.x,w.y]).join(","),O=cc.prototype.getTileUrl.call(this,s);return O+M(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(s,l){return n(this.wmsParams,s),l||this.redraw(),this}});function _1(s,l){return new YE(s,l)}cc.WMS=YE,QE.wms=_1;var qr=Fe.extend({options:{padding:.1},initialize:function(s){I(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),w=p.multiplyBy(-h).add(v).subtract(this._map._getNewPixelOrigin(s,l));de.any3d?vn(this._container,w,h):At(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new mt(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),XE=qr.extend({options:{tolerance:0},getEvents:function(){var s=qr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");De(s,"mousemove",this._onMouseMove,this),De(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),De(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,wt(this._container),ut(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qr.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=de.retina?2:1;At(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",de.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){qr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,v;for(v=0;v<l.length;v++){if(p=Number(l[v]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new mt,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,v,w,D=s._parts,O=D.length,j=this._ctx;if(O){for(j.beginPath(),h=0;h<O;h++){for(p=0,v=D[h].length;p<v;p++)w=D[h][p],j[p?"lineTo":"moveTo"](w.x,w.y);l&&j.closePath()}this._fillStroke(j,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||p)/p;v!==1&&(h.save(),h.scale(1,v)),h.beginPath(),h.arc(l.x,l.y/v,p,0,Math.PI*2,!1),v!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Lt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Me(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function JE(s){return de.canvas?new XE(s):null}var Lu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),v1={_initContainer:function(){this._container=Ke("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Lu("shape");Me(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Lu("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;wt(l),s.removeInteractiveTarget(l),delete this._layers[a(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,v=s._container;v.stroked=!!p.stroke,v.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Lu("stroke")),v.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=H(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(v.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=Lu("fill")),v.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(v.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){rr(s._container)},_bringToBack:function(s){or(s._container)}},xf=de.vml?Lu:ja,Fu=qr.extend({_initContainer:function(){this._container=xf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=xf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){wt(this._container),ut(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),At(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=xf("path");s.options.className&&Me(l,s.options.className),s.options.interactive&&Me(l,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){wt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,za(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,v="a"+h+","+p+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+v+h*2+",0 "+v+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){rr(s._path)},_bringToBack:function(s){or(s._path)}});de.vml&&Fu.include(v1);function eC(s){return de.svg||de.vml?new Fu(s):null}We.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&JE(s)||eC(s)}});var tC=sc.extend({initialize:function(s,l){sc.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=lt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function y1(s,l){return new tC(s,l)}Fu.create=xf,Fu.pointsToPath=za,Hr.geometryToLayer=vf,Hr.coordsToLatLng=E_,Hr.coordsToLatLngs=yf,Hr.latLngToCoords=C_,Hr.latLngsToCoords=bf,Hr.getFeature=ac,Hr.asFeature=wf,We.mergeOptions({boxZoom:!0});var nC=ri.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ut(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){wt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Do(),Vr(),this._startPoint=this._map.mouseEventToContainerPoint(s),De(document,{contextmenu:gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ke("div","leaflet-zoom-box",this._container),Me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new mt(this._point,this._startPoint),h=l.getSize();At(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(wt(this._box),Lt(this._container,"leaflet-crosshair")),it(),bu(),ut(document,{contextmenu:gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new Cn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});We.addInitHook("addHandler","boxZoom",nC),We.mergeOptions({doubleClickZoom:!0});var iC=ri.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,v=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});We.addInitHook("addHandler","doubleClickZoom",iC),We.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var rC=ri.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Vi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Lt(this._map._container,"leaflet-grab"),Lt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=lt(this._map.options.maxBounds);this._offsetLimit=gn(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,v=(p-l+h)%s+l-h,w=(p+l+h)%s-l-h,D=Math.abs(v+h)<Math.abs(w+h)?v:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,D=h.easeLinearity,O=v.multiplyBy(D/w),j=O.distanceTo([0,0]),W=Math.min(h.inertiaMaxSpeed,j),se=O.multiplyBy(W/j),Ie=W/(h.inertiaDeceleration*D),je=se.multiplyBy(-Ie/2).round();!je.x&&!je.y?l.fire("moveend"):(je=l._limitOffset(je,l.options.maxBounds),x(function(){l.panBy(je,{duration:Ie,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});We.addInitHook("addHandler","dragging",rC),We.mergeOptions({keyboard:!0,keyboardPanDelta:80});var oC=ri.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),De(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ut(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,v;for(p=0,v=h.left.length;p<v;p++)l[h.left[p]]=[-1*s,0];for(p=0,v=h.right.length;p<v;p++)l[h.right[p]]=[s,0];for(p=0,v=h.down.length;p<v;p++)l[h.down[p]]=[0,s];for(p=0,v=h.up.length;p<v;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,v;for(p=0,v=h.zoomIn.length;p<v;p++)l[h.zoomIn[p]]=s;for(p=0,v=h.zoomOut.length;p<v;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){De(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ut(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=we(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(we(p),h.options.maxBounds)),h.options.worldCopyJump){var v=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(v)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;gi(s)}}});We.addInitHook("addHandler","keyboard",oC),We.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var sC=ri.extend({addHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ut(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Su(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),gi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,w=h?Math.ceil(v/h)*h:v,D=s._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,D&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+D):s.setZoomAround(this._lastMousePos,l+D))}});We.addInitHook("addHandler","scrollWheelZoom",sC);var b1=600;We.mergeOptions({tapHold:de.touchNative&&de.safari&&de.mobile,tapTolerance:15});var aC=ri.extend({addHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ut(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Te(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(De(document,"touchend",Ft),De(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),b1),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ut(document,"touchend",Ft),ut(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ut(document,"touchend touchcancel contextmenu",this._cancel,this),ut(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Te(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});We.addInitHook("addHandler","tapHold",aC),We.mergeOptions({touchZoom:de.touch,bounceAtZoomLimits:!0});var cC=ri.extend({addHooks:function(){Me(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Lt(this._map._container,"leaflet-touch-zoom"),ut(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),Ft(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),v=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var w=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(v===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var D=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x(D,this,!0),Ft(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),ut(document,"touchmove",this._onTouchMove,this),ut(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});We.addInitHook("addHandler","touchZoom",cC),We.BoxZoom=nC,We.DoubleClickZoom=iC,We.Drag=rC,We.Keyboard=oC,We.ScrollWheelZoom=sC,We.TapHold=aC,We.TouchZoom=cC,t.Bounds=mt,t.Browser=de,t.CRS=kn,t.Canvas=XE,t.Circle=I_,t.CircleMarker=_f,t.Class=N,t.Control=Hn,t.DivIcon=KE,t.DivOverlay=lr,t.DomEvent=Rt,t.DomUtil=sr,t.Draggable=Vi,t.Evented=Ni,t.FeatureGroup=It,t.GeoJSON=Hr,t.GridLayer=Ou,t.Handler=ri,t.Icon=oi,t.ImageOverlay=If,t.LatLng=xe,t.LatLngBounds=Cn,t.Layer=Fe,t.LayerGroup=kt,t.LineUtil=d,t.Map=We,t.Marker=gf,t.Mixin=Ja,t.Path=Po,t.Point=Te,t.PolyUtil=Mu,t.Polygon=sc,t.Polyline=$r,t.Popup=Ef,t.PosAnimation=cf,t.Projection=E,t.Rectangle=tC,t.Renderer=qr,t.SVG=Fu,t.SVGOverlay=ZE,t.TileLayer=cc,t.Tooltip=Cf,t.Transformation=ou,t.Util=R,t.VideoOverlay=WE,t.bind=r,t.bounds=gn,t.canvas=JE,t.circle=s1,t.circleMarker=o1,t.control=Ao,t.divIcon=m1,t.extend=n,t.featureGroup=dn,t.geoJSON=GE,t.geoJson=l1,t.gridLayer=g1,t.icon=si,t.imageOverlay=u1,t.latLng=Ge,t.latLngBounds=lt,t.layerGroup=Qe,t.map=lf,t.marker=r1,t.point=we,t.polygon=c1,t.polyline=a1,t.popup=f1,t.rectangle=y1,t.setOptions=I,t.stamp=a,t.svg=eC,t.svgOverlay=h1,t.tileLayer=QE,t.tooltip=p1,t.transformation=tr,t.version=e,t.videoOverlay=d1;var w1=window.L;t.noConflict=function(){return window.L=w1,this},window.L=t})});var wC=null;var R_=1,IC=Symbol("SIGNAL");function Ue(t){let e=wC;return wC=t,e}var EC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function R1(t){if(!(O_(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===R_)){if(!t.producerMustRecompute(t)&&!k_(t)){t.dirty=!1,t.lastCleanEpoch=R_;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=R_}}function CC(t){return t&&(t.nextProducerIndex=0),Ue(t)}function xC(t,e){if(Ue(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(O_(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)N_(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function k_(t){Mf(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(R1(n),i!==n.version))return!0}return!1}function DC(t){if(Mf(t),O_(t))for(let e=0;e<t.producerNode.length;e++)N_(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function N_(t,e){if(k1(t),Mf(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)N_(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Mf(r),r.producerIndexOfThis[i]=e}}function O_(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Mf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function k1(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function N1(){throw new Error}var O1=N1;function TC(t){O1=t}function ge(t){return typeof t=="function"}function uc(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Pf=uc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Os(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ct=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(ge(i))try{i()}catch(o){e=o instanceof Pf?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{SC(o)}catch(a){e=e??[],a instanceof Pf?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Pf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)SC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Os(n,e)}remove(e){let{_finalizers:n}=this;n&&Os(n,e),e instanceof t&&e._removeParent(this)}};Ct.EMPTY=(()=>{let t=new Ct;return t.closed=!0,t})();var L_=Ct.EMPTY;function Rf(t){return t instanceof Ct||t&&"closed"in t&&ge(t.remove)&&ge(t.add)&&ge(t.unsubscribe)}function SC(t){ge(t)?t():t.unsubscribe()}var Bi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var dc={setTimeout(t,e,...n){let{delegate:i}=dc;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=dc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function kf(t){dc.setTimeout(()=>{let{onUnhandledError:e}=Bi;if(e)e(t);else throw t})}function ju(){}var AC=F_("C",void 0,void 0);function MC(t){return F_("E",void 0,t)}function PC(t){return F_("N",t,void 0)}function F_(t,e,n){return{kind:t,value:e,error:n}}var Ls=null;function hc(t){if(Bi.useDeprecatedSynchronousErrorHandling){let e=!Ls;if(e&&(Ls={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Ls;if(Ls=null,n)throw i}}else t()}function RC(t){Bi.useDeprecatedSynchronousErrorHandling&&Ls&&(Ls.errorThrown=!0,Ls.error=t)}var Fs=class extends Ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rf(e)&&e.add(this)):this.destination=V1}static create(e,n,i){return new Gr(e,n,i)}next(e){this.isStopped?B_(PC(e),this):this._next(e)}error(e){this.isStopped?B_(MC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?B_(AC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},L1=Function.prototype.bind;function V_(t,e){return L1.call(t,e)}var j_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Nf(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Nf(i)}else Nf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Nf(n)}}},Gr=class extends Fs{constructor(e,n,i){super();let r;if(ge(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Bi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&V_(e.next,o),error:e.error&&V_(e.error,o),complete:e.complete&&V_(e.complete,o)}):r=e}this.destination=new j_(r)}};function Nf(t){Bi.useDeprecatedSynchronousErrorHandling?RC(t):kf(t)}function F1(t){throw t}function B_(t,e){let{onStoppedNotification:n}=Bi;n&&dc.setTimeout(()=>n(t,e))}var V1={closed:!0,next:ju,error:F1,complete:ju};var fc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Fn(t){return t}function z_(...t){return U_(t)}function U_(t){return t.length===0?Fn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Pe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=j1(n)?n:new Gr(n,i,r);return hc(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=kC(i),new i((r,o)=>{let a=new Gr({next:c=>{try{n(c)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[fc](){return this}pipe(...n){return U_(n)(this)}toPromise(n){return n=kC(n),new n((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return t.create=e=>new t(e),t})();function kC(t){var e;return(e=t??Bi.Promise)!==null&&e!==void 0?e:Promise}function B1(t){return t&&ge(t.next)&&ge(t.error)&&ge(t.complete)}function j1(t){return t&&t instanceof Fs||B1(t)&&Rf(t)}function $_(t){return ge(t?.lift)}function Se(t){return e=>{if($_(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Re(t,e,n,i,r){return new H_(t,e,n,i,r)}var H_=class extends Fs{constructor(e,n,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function pc(){return Se((t,e)=>{let n=null;t._refCount++;let i=Re(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var mc=class extends Pe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,$_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ct;let n=this.getSubject();e.add(this.source.subscribe(Re(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ct.EMPTY)}return e}refCount(){return pc()(this)}};var NC=uc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ae=(()=>{class t extends Pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Of(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new NC}next(n){hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){hc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?L_:(this.currentObservers=null,o.push(n),new Ct(()=>{this.currentObservers=null,Os(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Pe;return n.source=this,n}}return t.create=(e,n)=>new Of(e,n),t})(),Of=class extends Ae{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:L_}};var sn=class extends Ae{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var zu={now(){return(zu.delegate||Date).now()},delegate:void 0};var Lf=class extends Ae{constructor(e=1/0,n=1/0,i=zu){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:a}=this;n||(i.push(e),!r&&i.push(o.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let a=0;a<o.length&&!e.closed;a+=i?1:2)e.next(o[a]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let a=n.now(),c=0;for(let u=1;u<i.length&&i[u]<=a;u+=2)c=u;c&&i.splice(0,c+1)}}};var Ff=class extends Ct{constructor(e,n){super()}schedule(e,n=0){return this}};var Uu={setInterval(t,e,...n){let{delegate:i}=Uu;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Uu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var gc=class extends Ff{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Uu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Uu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Os(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var _c=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};_c.now=zu.now;var vc=class extends _c{constructor(e,n=_c.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var dr=new vc(gc),q_=dr;var Vf=class extends gc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Bf=class extends vc{};var G_=new Bf(Vf);var Vn=new Pe(t=>t.complete());function jf(t){return t&&ge(t.schedule)}function W_(t){return t[t.length-1]}function OC(t){return ge(W_(t))?t.pop():void 0}function hr(t){return jf(W_(t))?t.pop():void 0}function LC(t,e){return typeof W_(t)=="number"?t.pop():e}var yc=t=>t&&typeof t.length=="number"&&typeof t!="function";function zf(t){return ge(t?.then)}function Uf(t){return ge(t[fc])}function $f(t){return Symbol.asyncIterator&&ge(t?.[Symbol.asyncIterator])}function Hf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function z1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qf=z1();function Gf(t){return ge(t?.[qf])}function Wf(t){return fC(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield Tf(n.read());if(r)return yield Tf(void 0);yield yield Tf(i)}}finally{n.releaseLock()}})}function Zf(t){return ge(t?.getReader)}function gt(t){if(t instanceof Pe)return t;if(t!=null){if(Uf(t))return U1(t);if(yc(t))return $1(t);if(zf(t))return H1(t);if($f(t))return FC(t);if(Gf(t))return q1(t);if(Zf(t))return G1(t)}throw Hf(t)}function U1(t){return new Pe(e=>{let n=t[fc]();if(ge(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $1(t){return new Pe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function H1(t){return new Pe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,kf)})}function q1(t){return new Pe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function FC(t){return new Pe(e=>{W1(t,e).catch(n=>e.error(n))})}function G1(t){return FC(Wf(t))}function W1(t,e){var n,i,r,o;return hC(this,void 0,void 0,function*(){try{for(n=pC(t);i=yield n.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function Gn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function vi(t,e=0){return Se((n,i)=>{n.subscribe(Re(i,r=>Gn(i,t,()=>i.next(r),e),()=>Gn(i,t,()=>i.complete(),e),r=>Gn(i,t,()=>i.error(r),e)))})}function ji(t,e=0){return Se((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function VC(t,e){return gt(t).pipe(ji(e),vi(e))}function BC(t,e){return gt(t).pipe(ji(e),vi(e))}function jC(t,e){return new Pe(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function zC(t,e){return new Pe(n=>{let i;return Gn(n,e,()=>{i=t[qf](),Gn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){n.error(a);return}o?n.complete():n.next(r)},0,!0)}),()=>ge(i?.return)&&i.return()})}function Kf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Pe(n=>{Gn(n,e,()=>{let i=t[Symbol.asyncIterator]();Gn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function UC(t,e){return Kf(Wf(t),e)}function $C(t,e){if(t!=null){if(Uf(t))return VC(t,e);if(yc(t))return jC(t,e);if(zf(t))return BC(t,e);if($f(t))return Kf(t,e);if(Gf(t))return zC(t,e);if(Zf(t))return UC(t,e)}throw Hf(t)}function dt(t,e){return e?$C(t,e):gt(t)}function pe(...t){let e=hr(t);return dt(t,e)}function bc(t,e){let n=ge(t)?t:()=>t,i=r=>r.error(n());return new Pe(e?r=>e.schedule(i,0,r):i)}function Qf(t){return!!t&&(t instanceof Pe||ge(t.lift)&&ge(t.subscribe))}var Wr=uc(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function HC(t){return t instanceof Date&&!isNaN(t)}function _e(t,e){return Se((n,i)=>{let r=0;n.subscribe(Re(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:Z1}=Array;function K1(t,e){return Z1(e)?t(...e):t(e)}function Yf(t){return _e(e=>K1(t,e))}var{isArray:Q1}=Array,{getPrototypeOf:Y1,prototype:X1,keys:J1}=Object;function qC(t){if(t.length===1){let e=t[0];if(Q1(e))return{args:e,keys:null};if(eN(e)){let n=J1(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function eN(t){return t&&typeof t=="object"&&Y1(t)===X1}function GC(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function wc(...t){let e=hr(t),n=OC(t),{args:i,keys:r}=qC(t);if(i.length===0)return dt([],e);let o=new Pe(tN(i,e,r?a=>GC(r,a):Fn));return n?o.pipe(Yf(n)):o}function tN(t,e,n=Fn){return i=>{WC(e,()=>{let{length:r}=t,o=new Array(r),a=r,c=r;for(let u=0;u<r;u++)WC(e,()=>{let f=dt(t[u],e),m=!1;f.subscribe(Re(i,_=>{o[u]=_,m||(m=!0,c--),c||i.next(n(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function WC(t,e,n){t?Gn(n,t,e):e()}function ZC(t,e,n,i,r,o,a,c){let u=[],f=0,m=0,_=!1,b=()=>{_&&!u.length&&!f&&e.complete()},I=P=>f<i?M(P):u.push(P),M=P=>{o&&e.next(P),f++;let F=!1;gt(n(P,m++)).subscribe(Re(e,H=>{r?.(H),o?I(H):e.next(H)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;u.length&&f<i;){let H=u.shift();a?Gn(e,a,()=>M(H)):M(H)}b()}catch(H){e.error(H)}}))};return t.subscribe(Re(e,I,()=>{_=!0,b()})),()=>{c?.()}}function qt(t,e,n=1/0){return ge(e)?qt((i,r)=>_e((o,a)=>e(i,o,r,a))(gt(t(i,r))),n):(typeof e=="number"&&(n=e),Se((i,r)=>ZC(i,r,t,n)))}function $u(t=1/0){return qt(Fn,t)}function KC(){return $u(1)}function ko(...t){return KC()(dt(t,hr(t)))}function Xf(t){return new Pe(e=>{gt(t()).subscribe(e)})}var nN=["addListener","removeListener"],iN=["addEventListener","removeEventListener"],rN=["on","off"];function Hu(t,e,n,i){if(ge(n)&&(i=n,n=void 0),i)return Hu(t,e,n).pipe(Yf(i));let[r,o]=aN(t)?iN.map(a=>c=>t[a](e,c,n)):oN(t)?nN.map(QC(t,e)):sN(t)?rN.map(QC(t,e)):[];if(!r&&yc(t))return qt(a=>Hu(a,e,n))(gt(t));if(!r)throw new TypeError("Invalid event target");return new Pe(a=>{let c=(...u)=>a.next(1<u.length?u:u[0]);return r(c),()=>o(c)})}function QC(t,e){return n=>i=>t[n](e,i)}function oN(t){return ge(t.addListener)&&ge(t.removeListener)}function sN(t){return ge(t.on)&&ge(t.off)}function aN(t){return ge(t.addEventListener)&&ge(t.removeEventListener)}function YC(t=0,e,n=q_){let i=-1;return e!=null&&(jf(e)?n=e:i=e),new Pe(r=>{let o=HC(t)?+t-n.now():t;o<0&&(o=0);let a=0;return n.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function qu(...t){let e=hr(t),n=LC(t,1/0),i=t;return i.length?i.length===1?gt(i[0]):$u(n)(dt(i,e)):Vn}function Bt(t,e){return Se((n,i)=>{let r=0;n.subscribe(Re(i,o=>t.call(e,o,r++)&&i.next(o)))})}function XC(t){return Se((e,n)=>{let i=!1,r=null,o=null,a=!1,c=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let f=r;r=null,n.next(f)}a&&n.complete()},u=()=>{o=null,a&&n.complete()};e.subscribe(Re(n,f=>{i=!0,r=f,o||gt(t(f)).subscribe(o=Re(n,c,u))},()=>{a=!0,(!i||!o||o.closed)&&n.complete()}))})}function Jf(t,e=dr){return XC(()=>YC(t,e))}function No(t){return Se((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Re(n,void 0,void 0,a=>{o=gt(t(a,No(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function JC(t,e,n,i,r){return(o,a)=>{let c=n,u=e,f=0;o.subscribe(Re(a,m=>{let _=f++;u=c?t(u,m,_):(c=!0,m),i&&a.next(u)},r&&(()=>{c&&a.next(u),a.complete()})))}}function Ic(t,e){return ge(e)?qt(t,e,1):qt(t,1)}function ep(t,e=dr){return Se((n,i)=>{let r=null,o=null,a=null,c=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=a+t,m=e.now();if(m<f){r=this.schedule(void 0,f-m),i.add(r);return}c()}n.subscribe(Re(i,f=>{o=f,a=e.now(),r||(r=e.schedule(u,t),i.add(r))},()=>{c(),i.complete()},void 0,()=>{o=r=null}))})}function Oo(t){return Se((e,n)=>{let i=!1;e.subscribe(Re(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function yi(t){return t<=0?()=>Vn:Se((e,n)=>{let i=0;e.subscribe(Re(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Z_(t){return _e(()=>t)}function Ec(t,e=Fn){return t=t??cN,Se((n,i)=>{let r,o=!0;n.subscribe(Re(i,a=>{let c=e(a);(o||!t(r,c))&&(o=!1,r=c,i.next(a))}))})}function cN(t,e){return t===e}function tp(t=lN){return Se((e,n)=>{let i=!1;e.subscribe(Re(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function lN(){return new Wr}function Gu(t){return Se((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function bi(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Bt((r,o)=>t(r,o,i)):Fn,yi(1),n?Oo(e):tp(()=>new Wr))}function Cc(t){return t<=0?()=>Vn:Se((e,n)=>{let i=[];e.subscribe(Re(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function K_(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Bt((r,o)=>t(r,o,i)):Fn,Cc(1),n?Oo(e):tp(()=>new Wr))}function xc(){return Se((t,e)=>{let n,i=!1;t.subscribe(Re(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function Vs(t,e){return Se(JC(t,e,arguments.length>=2,!0))}function ex(t={}){let{connector:e=()=>new Ae,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let a,c,u,f=0,m=!1,_=!1,b=()=>{c?.unsubscribe(),c=void 0},I=()=>{b(),a=u=void 0,m=_=!1},M=()=>{let P=a;I(),P?.unsubscribe()};return Se((P,F)=>{f++,!_&&!m&&b();let H=u=u??e();F.add(()=>{f--,f===0&&!_&&!m&&(c=Q_(M,r))}),H.subscribe(F),!a&&f>0&&(a=new Gr({next:Q=>H.next(Q),error:Q=>{_=!0,b(),c=Q_(I,n,Q),H.error(Q)},complete:()=>{m=!0,b(),c=Q_(I,i),H.complete()}}),gt(P).subscribe(a))})(o)}}function Q_(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Gr({next:()=>{i.unsubscribe(),t()}});return gt(e(...n)).subscribe(i)}function Wu(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,ex({connector:()=>new Lf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Zu(t){return Bt((e,n)=>t<=n)}function fr(...t){let e=hr(t);return Se((n,i)=>{(e?ko(t,n,e):ko(t,n)).subscribe(i)})}function xt(t,e){return Se((n,i)=>{let r=null,o=0,a=!1,c=()=>a&&!r&&i.complete();n.subscribe(Re(i,u=>{r?.unsubscribe();let f=0,m=o++;gt(t(u,m)).subscribe(r=Re(i,_=>i.next(e?e(u,_,m,f++):_),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function np(t,e){return ge(e)?xt(()=>t,e):xt(()=>t)}function wi(t){return Se((e,n)=>{gt(t).subscribe(Re(n,()=>n.complete(),ju)),!n.closed&&e.subscribe(n)})}function Xt(t,e,n){let i=ge(t)||e||n?{next:t,error:e,complete:n}:t;return i?Se((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let c=!0;r.subscribe(Re(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;c=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;c=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;c&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Fn}var Nx="https://g.co/ng/security#xss",Ee=class extends Error{constructor(e,n){super(iy(e,n)),this.code=e}};function iy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function dd(t){return{toString:t}.toString()}var ip="__parameters__";function uN(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function dN(t,e,n){return dd(()=>{let i=uN(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return c.annotation=a,c;function c(u,f,m){let _=u.hasOwnProperty(ip)?u[ip]:Object.defineProperty(u,ip,{value:[]})[ip];for(;_.length<=m;)_.push(null);return(_[m]=_[m]||[]).push(a),u}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var Zr=globalThis;function _t(t){for(let e in t)if(t[e]===_t)return e;throw Error("Could not find renamed property on target object.")}function hN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Bn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Bn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function hv(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var fN=_t({__forward_ref__:_t});function Ox(t){return t.__forward_ref__=Ox,t.toString=function(){return Bn(this())},t}function Ii(t){return Lx(t)?t():t}function Lx(t){return typeof t=="function"&&t.hasOwnProperty(fN)&&t.__forward_ref__===Ox}function ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Op(t){return tx(t,Vx)||tx(t,Bx)}function Fx(t){return Op(t)!==null}function tx(t,e){return t.hasOwnProperty(e)?t[e]:null}function pN(t){let e=t&&(t[Vx]||t[Bx]);return e||null}function nx(t){return t&&(t.hasOwnProperty(ix)||t.hasOwnProperty(mN))?t[ix]:null}var Vx=_t({\u0275prov:_t}),ix=_t({\u0275inj:_t}),Bx=_t({ngInjectableDef:_t}),mN=_t({ngInjectorDef:_t}),ce=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function jx(t){return t&&!!t.\u0275providers}var gN=_t({\u0275cmp:_t}),_N=_t({\u0275dir:_t}),vN=_t({\u0275pipe:_t}),yN=_t({\u0275mod:_t}),hp=_t({\u0275fac:_t}),Ku=_t({__NG_ELEMENT_ID__:_t}),rx=_t({__NG_ENV_ID__:_t});function Lp(t){return typeof t=="string"?t:t==null?"":String(t)}function bN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Lp(t)}function wN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Ee(-200,t)}function ry(t,e){throw new Ee(-201,!1)}var ze=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ze||{}),fv;function zx(){return fv}function Wn(t){let e=fv;return fv=t,e}function Ux(t,e,n){let i=Op(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&ze.Optional)return null;if(e!==void 0)return e;ry(t,"Injector")}var IN={},Qu=IN,pv="__NG_DI_FLAG__",fp="ngTempTokenPath",EN="ngTokenPath",CN=/\n/gm,xN="\u0275",ox="__source",Ac;function DN(){return Ac}function Lo(t){let e=Ac;return Ac=t,e}function TN(t,e=ze.Default){if(Ac===void 0)throw new Ee(-203,!1);return Ac===null?Ux(t,void 0,e):Ac.get(t,e&ze.Optional?null:void 0,e)}function V(t,e=ze.Default){return(zx()||TN)(Ii(t),e)}function X(t,e=ze.Default){return V(t,Fp(e))}function Fp(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function mv(t){let e=[];for(let n=0;n<t.length;n++){let i=Ii(t[n]);if(Array.isArray(i)){if(i.length===0)throw new Ee(900,!1);let r,o=ze.Default;for(let a=0;a<i.length;a++){let c=i[a],u=AN(c);typeof u=="number"?u===-1?r=c.token:o|=u:r=c}e.push(V(r,o))}else e.push(V(i))}return e}function SN(t,e){return t[pv]=e,t.prototype[pv]=e,t}function AN(t){return t[pv]}function MN(t,e,n,i){let r=t[fp];throw e[ox]&&r.unshift(e[ox]),t.message=PN(`
`+t.message,r,n,i),t[EN]=r,t[fp]=null,t}function PN(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==xN?t.slice(2):t;let r=Bn(e);if(Array.isArray(e))r=e.map(Bn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):Bn(c)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(CN,`
  `)}`}var Vp=SN(dN("Optional"),8);function $s(t,e){let n=t.hasOwnProperty(hp);return n?t[hp]:null}function RN(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function kN(t){return t.flat(Number.POSITIVE_INFINITY)}function oy(t,e){t.forEach(n=>Array.isArray(n)?oy(n,e):e(n))}function $x(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function pp(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function NN(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function ON(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function sy(t,e,n){let i=hd(t,e);return i>=0?t[i|1]=n:(i=~i,ON(t,i,e,n)),i}function Y_(t,e){let n=hd(t,e);if(n>=0)return t[n|1]}function hd(t,e){return LN(t,e,1)}function LN(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),a=t[o<<n];if(e===a)return o<<n;a>e?r=o:i=o+1}return~(r<<n)}var Pc={},Zn=[],Rc=new ce(""),Hx=new ce("",-1),qx=new ce(""),mp=class{get(e,n=Qu){if(n===Qu){let i=new Error(`NullInjectorError: No provider for ${Bn(e)}!`);throw i.name="NullInjectorError",i}return n}},Gx=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Gx||{}),gr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(gr||{}),st=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(st||{});function FN(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function gv(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],a=n[i++],c=n[i++];t.setAttribute(e,a,c,o)}else{let o=r,a=n[++i];BN(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),i++}}return i}function VN(t){return t===3||t===4||t===6}function BN(t){return t.charCodeAt(0)===64}function Yu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?sx(t,n,r,null,e[++i]):sx(t,n,r,null,null))}}return t}function sx(t,e,n,i,r){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var Wx="ng-template";function jN(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&FN(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(ay(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ay(t){return t.type===4&&t.value!==Wx}function zN(t,e,n){let i=t.type===4&&!n?Wx:t.value;return e===i}function UN(t,e,n){let i=4,r=t.attrs,o=r!==null?qN(r):0,a=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!a&&!zi(i)&&!zi(u))return!1;if(a&&zi(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!zN(t,u,n)||u===""&&e.length===1){if(zi(i))return!1;a=!0}}else if(i&8){if(r===null||!jN(t,r,u,n)){if(zi(i))return!1;a=!0}}else{let f=e[++c],m=$N(u,r,ay(t),n);if(m===-1){if(zi(i))return!1;a=!0;continue}if(f!==""){let _;if(m>o?_="":_=r[m+1].toLowerCase(),i&2&&f!==_){if(zi(i))return!1;a=!0}}}}return zi(i)||a}function zi(t){return(t&1)===0}function $N(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let a=e[r];if(a===t)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++r];for(;typeof c=="string";)c=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return GN(e,t)}function Zx(t,e,n=!1){for(let i=0;i<e.length;i++)if(UN(t,e[i],n))return!0;return!1}function HN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function qN(t){for(let e=0;e<t.length;e++){let n=t[e];if(VN(n))return e}return t.length}function GN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function WN(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function ax(t,e){return t?":not("+e.trim()+")":e}function ZN(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(i&2){let c=t[++n];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!zi(a)&&(e+=ax(o,r),r=""),i=a,o=o||!zi(i);n++}return r!==""&&(e+=ax(o,r)),e}function KN(t){return t.map(ZN).join(",")}function QN(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!zi(r))break;r=o}i++}return{attrs:e,classes:n}}function ft(t){return dd(()=>{let e=Jx(t),n=Et(ee({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Gx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||gr.Emulated,styles:t.styles||Zn,_:null,schemas:t.schemas||null,tView:null,id:""});eD(n);let i=t.dependencies;return n.directiveDefs=lx(i,!1),n.pipeDefs=lx(i,!0),n.id=JN(n),n})}function YN(t){return Hs(t)||Kx(t)}function XN(t){return t!==null}function ot(t){return dd(()=>({type:t.type,bootstrap:t.bootstrap||Zn,declarations:t.declarations||Zn,imports:t.imports||Zn,exports:t.exports||Zn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function cx(t,e){if(t==null)return Pc;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,a,c=st.None;Array.isArray(r)?(c=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(n[o]=c!==st.None?[i,c]:i,e[o]=a):n[o]=i}return n}function Mt(t){return dd(()=>{let e=Jx(t);return eD(e),e})}function fd(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Hs(t){return t[gN]||null}function Kx(t){return t[_N]||null}function Qx(t){return t[vN]||null}function Yx(t){let e=Hs(t)||Kx(t)||Qx(t);return e!==null?e.standalone:!1}function Xx(t,e){let n=t[yN]||null;if(!n&&e===!0)throw new Error(`Type ${Bn(t)} does not have '\u0275mod' property.`);return n}function Jx(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Pc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Zn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:cx(t.inputs,e),outputs:cx(t.outputs),debugInfo:null}}function eD(t){t.features?.forEach(e=>e(t))}function lx(t,e){if(!t)return null;let n=e?Qx:YN;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(XN)}function JN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Bp(t){return{\u0275providers:t}}function cy(...t){return{\u0275providers:tD(!0,t),\u0275fromNgModule:!0}}function tD(t,...e){let n=[],i=new Set,r,o=a=>{n.push(a)};return oy(e,a=>{let c=a;_v(c,o,[],i)&&(r||=[],r.push(c))}),r!==void 0&&nD(r,o),n}function nD(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];ly(r,o=>{e(o,i)})}}function _v(t,e,n,i){if(t=Ii(t),!t)return!1;let r=null,o=nx(t),a=!o&&Hs(t);if(!o&&!a){let u=t.ngModule;if(o=nx(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=t}let c=i.has(r);if(a){if(c)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)_v(f,e,n,i)}}else if(o){if(o.imports!=null&&!c){i.add(r);let f;try{oy(o.imports,m=>{_v(m,e,n,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&nD(f,e)}if(!c){let f=$s(r)||(()=>new r);e({provide:r,useFactory:f,deps:Zn},r),e({provide:qx,useValue:r,multi:!0},r),e({provide:Rc,useValue:()=>V(r),multi:!0},r)}let u=o.providers;if(u!=null&&!c){let f=t;ly(u,m=>{e(m,f)})}}else return!1;return r!==t&&t.providers!==void 0}function ly(t,e){for(let n of t)jx(n)&&(n=n.\u0275providers),Array.isArray(n)?ly(n,e):e(n)}var eO=_t({provide:String,useValue:_t});function iD(t){return t!==null&&typeof t=="object"&&eO in t}function tO(t){return!!(t&&t.useExisting)}function nO(t){return!!(t&&t.useFactory)}function vv(t){return typeof t=="function"}var jp=new ce(""),sp={},iO={},X_;function uy(){return X_===void 0&&(X_=new mp),X_}var Kn=class{},Xu=class extends Kn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bv(e,a=>this.processProvider(a)),this.records.set(Hx,Dc(void 0,this)),r.has("environment")&&this.records.set(Kn,Dc(void 0,this));let o=this.records.get(jp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(qx,Zn,ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ue(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ue(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Lo(this),i=Wn(void 0),r;try{return e()}finally{Lo(n),Wn(i)}}get(e,n=Qu,i=ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(rx))return e[rx](this);i=Fp(i);let r,o=Lo(this),a=Wn(void 0);try{if(!(i&ze.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=lO(e)&&Op(e);f&&this.injectableDefInScope(f)?u=Dc(yv(e),sp):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=i&ze.Self?uy():this.parent;return n=i&ze.Optional&&n===Qu?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[fp]=c[fp]||[]).unshift(Bn(e)),o)throw c;return MN(c,e,"R3InjectorError",this.source)}else throw c}finally{Wn(a),Lo(o)}}resolveInjectorInitializers(){let e=Ue(null),n=Lo(this),i=Wn(void 0),r;try{let o=this.get(Rc,Zn,ze.Self);for(let a of o)a()}finally{Lo(n),Wn(i),Ue(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Bn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(e){e=Ii(e);let n=vv(e)?e:Ii(e&&e.provide),i=oO(e);if(!vv(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Dc(void 0,sp,!0),r.factory=()=>mv(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Ue(null);try{return n.value===sp&&(n.value=iO,n.value=n.factory()),typeof n.value=="object"&&n.value&&cO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ue(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ii(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function yv(t){let e=Op(t),n=e!==null?e.factory:$s(t);if(n!==null)return n;if(t instanceof ce)throw new Ee(204,!1);if(t instanceof Function)return rO(t);throw new Ee(204,!1)}function rO(t){if(t.length>0)throw new Ee(204,!1);let n=pN(t);return n!==null?()=>n.factory(t):()=>new t}function oO(t){if(iD(t))return Dc(void 0,t.useValue);{let e=sO(t);return Dc(e,sp)}}function sO(t,e,n){let i;if(vv(t)){let r=Ii(t);return $s(r)||yv(r)}else if(iD(t))i=()=>Ii(t.useValue);else if(nO(t))i=()=>t.useFactory(...mv(t.deps||[]));else if(tO(t))i=()=>V(Ii(t.useExisting));else{let r=Ii(t&&(t.useClass||t.provide));if(aO(t))i=()=>new r(...mv(t.deps));else return $s(r)||yv(r)}return i}function Dc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function aO(t){return!!t.deps}function cO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function lO(t){return typeof t=="function"||typeof t=="object"&&t instanceof ce}function bv(t,e){for(let n of t)Array.isArray(n)?bv(n,e):n&&jx(n)?bv(n.\u0275providers,e):e(n)}function Xr(t,e){t instanceof Xu&&t.assertNotDestroyed();let n,i=Lo(t),r=Wn(void 0);try{return e()}finally{Lo(i),Wn(r)}}function rD(){return zx()!==void 0||DN()!=null}function oD(t){if(!rD())throw new Ee(-203,!1)}function uO(t){return typeof t=="function"}var yr=0,ke=1,Ce=2,yn=3,$i=4,ci=5,kc=6,Ju=7,Dn=8,Nc=9,Hi=10,Gt=11,ed=12,ux=13,Bc=14,Ei=15,pd=16,Tc=17,Kr=18,zp=19,sD=20,Fo=21,J_=22,qs=23,Sn=25,dy=1;var Gs=7,gp=8,Oc=9,Tn=10,hy=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(hy||{});function zs(t){return Array.isArray(t)&&typeof t[dy]=="object"}function Jr(t){return Array.isArray(t)&&t[dy]===!0}function fy(t){return(t.flags&4)!==0}function Up(t){return t.componentOffset>-1}function $p(t){return(t.flags&1)===1}function Vo(t){return!!t.template}function dO(t){return(t[Ce]&512)!==0}var wv=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function aD(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function eo(){return cD}function cD(t){return t.type.prototype.ngOnChanges&&(t.setInput=fO),hO}eo.ngInherit=!0;function hO(){let t=uD(this),e=t?.current;if(e){let n=t.previous;if(n===Pc)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function fO(t,e,n,i,r){let o=this.declaredInputs[i],a=uD(t)||pO(t,{previous:Pc,current:null}),c=a.current||(a.current={}),u=a.previous,f=u[o];c[o]=new wv(f&&f.currentValue,n,u===Pc),aD(t,e,r,n)}var lD="__ngSimpleChanges__";function uD(t){return t[lD]||null}function pO(t,e){return t[lD]=e}var dx=null;var pr=function(t,e,n){dx?.(t,e,n)},mO="svg",gO="math",_O=!1;function vO(){return _O}function _r(t){for(;Array.isArray(t);)t=t[yr];return t}function yO(t){for(;Array.isArray(t);){if(typeof t[dy]=="object")return t;t=t[yr]}return null}function dD(t,e){return _r(e[t])}function xi(t,e){return _r(e[t.index])}function py(t,e){return t.data[e]}function hD(t,e){return t[e]}function zo(t,e){let n=e[t];return zs(n)?n:n[yr]}function bO(t){return(t[Ce]&4)===4}function my(t){return(t[Ce]&128)===128}function wO(t){return Jr(t[yn])}function Lc(t,e){return e==null?null:t[e]}function fD(t){t[Tc]=0}function IO(t){t[Ce]&1024||(t[Ce]|=1024,my(t)&&td(t))}function EO(t,e){for(;t>0;)e=e[Bc],t--;return e}function gy(t){return!!(t[Ce]&9216||t[qs]?.dirty)}function Iv(t){t[Hi].changeDetectionScheduler?.notify(1),gy(t)?td(t):t[Ce]&64&&(vO()?(t[Ce]|=1024,td(t)):t[Hi].changeDetectionScheduler?.notify())}function td(t){t[Hi].changeDetectionScheduler?.notify();let e=nd(t);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!my(e)));)e=nd(e)}function pD(t,e){if((t[Ce]&256)===256)throw new Ee(911,!1);t[Fo]===null&&(t[Fo]=[]),t[Fo].push(e)}function CO(t,e){if(t[Fo]===null)return;let n=t[Fo].indexOf(e);n!==-1&&t[Fo].splice(n,1)}function nd(t){let e=t[yn];return Jr(e)?e[yn]:e}var Ve={lFrame:ID(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function xO(){return Ve.lFrame.elementDepthCount}function DO(){Ve.lFrame.elementDepthCount++}function TO(){Ve.lFrame.elementDepthCount--}function mD(){return Ve.bindingsEnabled}function gD(){return Ve.skipHydrationRootTNode!==null}function SO(t){return Ve.skipHydrationRootTNode===t}function AO(){Ve.skipHydrationRootTNode=null}function $e(){return Ve.lFrame.lView}function an(){return Ve.lFrame.tView}function bn(t){return Ve.lFrame.contextLView=t,t[Dn]}function wn(t){return Ve.lFrame.contextLView=null,t}function Qn(){let t=_D();for(;t!==null&&t.type===64;)t=t.parent;return t}function _D(){return Ve.lFrame.currentTNode}function MO(){let t=Ve.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Qs(t,e){let n=Ve.lFrame;n.currentTNode=t,n.isParent=e}function _y(){return Ve.lFrame.isParent}function vy(){Ve.lFrame.isParent=!1}function PO(){return Ve.lFrame.contextLView}function RO(){let t=Ve.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function kO(t){return Ve.lFrame.bindingIndex=t}function jc(){return Ve.lFrame.bindingIndex++}function vD(t){let e=Ve.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function NO(){return Ve.lFrame.inI18n}function OO(t,e){let n=Ve.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ev(e)}function LO(){return Ve.lFrame.currentDirectiveIndex}function Ev(t){Ve.lFrame.currentDirectiveIndex=t}function yy(t){let e=Ve.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function yD(){return Ve.lFrame.currentQueryIndex}function by(t){Ve.lFrame.currentQueryIndex=t}function FO(t){let e=t[ke];return e.type===2?e.declTNode:e.type===1?t[ci]:null}function bD(t,e,n){if(n&ze.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&ze.Host);)if(r=FO(o),r===null||(o=o[Bc],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=Ve.lFrame=wD();return i.currentTNode=e,i.lView=t,!0}function wy(t){let e=wD(),n=t[ke];Ve.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function wD(){let t=Ve.lFrame,e=t===null?null:t.child;return e===null?ID(t):e}function ID(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function ED(){let t=Ve.lFrame;return Ve.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var CD=ED;function Iy(){let t=ED();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function VO(t){return(Ve.lFrame.contextLView=EO(t,Ve.lFrame.contextLView))[Dn]}function Uo(){return Ve.lFrame.selectedIndex}function Ws(t){Ve.lFrame.selectedIndex=t}function Ey(){let t=Ve.lFrame;return py(t.tView,t.selectedIndex)}function BO(){return Ve.lFrame.currentNamespace}var xD=!0;function Hp(){return xD}function qp(t){xD=t}function jO(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=cD(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Gp(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(t.contentHooks??=[]).push(-n,a),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),f&&((t.viewHooks??=[]).push(n,f),(t.viewCheckHooks??=[]).push(n,f)),m!=null&&(t.destroyHooks??=[]).push(n,m)}}function ap(t,e,n){DD(t,e,3,n)}function cp(t,e,n,i){(t[Ce]&3)===n&&DD(t,e,n,i)}function ev(t,e){let n=t[Ce];(n&3)===e&&(n&=16383,n+=1,t[Ce]=n)}function DD(t,e,n,i){let r=i!==void 0?t[Tc]&65535:0,o=i??-1,a=e.length-1,c=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(c=e[u],i!=null&&c>=i)break}else e[u]<0&&(t[Tc]+=65536),(c<o||o==-1)&&(zO(t,n,e,u),t[Tc]=(t[Tc]&4294901760)+u+2),u++}function hx(t,e){pr(4,t,e);let n=Ue(null);try{e.call(t)}finally{Ue(n),pr(5,t,e)}}function zO(t,e,n,i){let r=n[i]<0,o=n[i+1],a=r?-n[i]:n[i],c=t[a];r?t[Ce]>>14<t[Tc]>>16&&(t[Ce]&3)===e&&(t[Ce]+=16384,hx(c,o)):hx(c,o)}var Mc=-1,id=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function UO(t){return t instanceof id}function $O(t){return(t.flags&8)!==0}function HO(t){return(t.flags&16)!==0}function TD(t){return t!==Mc}function _p(t){return t&32767}function qO(t){return t>>16}function vp(t,e){let n=qO(t),i=e;for(;n>0;)i=i[Bc],n--;return i}var Cv=!0;function yp(t){let e=Cv;return Cv=t,e}var GO=256,SD=GO-1,AD=5,WO=0,mr={};function ZO(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Ku)&&(i=n[Ku]),i==null&&(i=n[Ku]=WO++);let r=i&SD,o=1<<r;e.data[t+(r>>AD)]|=o}function MD(t,e){let n=PD(t,e);if(n!==-1)return n;let i=e[ke];i.firstCreatePass&&(t.injectorIndex=e.length,tv(i.data,t),tv(e,null),tv(i.blueprint,null));let r=Cy(t,e),o=t.injectorIndex;if(TD(r)){let a=_p(r),c=vp(r,e),u=c[ke].data;for(let f=0;f<8;f++)e[o+f]=c[a+f]|u[a+f]}return e[o+8]=r,o}function tv(t,e){t.push(0,0,0,0,0,0,0,0,e)}function PD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Cy(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=LD(r),i===null)return Mc;if(n++,r=r[Bc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return Mc}function KO(t,e,n){ZO(t,e,n)}function RD(t,e,n){if(n&ze.Optional||t!==void 0)return t;ry(e,"NodeInjector")}function kD(t,e,n,i){if(n&ze.Optional&&i===void 0&&(i=null),!(n&(ze.Self|ze.Host))){let r=t[Nc],o=Wn(void 0);try{return r?r.get(e,i,n&ze.Optional):Ux(e,i,n&ze.Optional)}finally{Wn(o)}}return RD(i,e,n)}function ND(t,e,n,i=ze.Default,r){if(t!==null){if(e[Ce]&2048&&!(i&ze.Self)){let a=JO(t,e,n,i,mr);if(a!==mr)return a}let o=OD(t,e,n,i,mr);if(o!==mr)return o}return kD(e,n,i,r)}function OD(t,e,n,i,r){let o=YO(n);if(typeof o=="function"){if(!bD(e,t,i))return i&ze.Host?RD(r,n,i):kD(e,n,i,r);try{let a;if(a=o(i),a==null&&!(i&ze.Optional))ry(n);else return a}finally{CD()}}else if(typeof o=="number"){let a=null,c=PD(t,e),u=Mc,f=i&ze.Host?e[Ei][ci]:null;for((c===-1||i&ze.SkipSelf)&&(u=c===-1?Cy(t,e):e[c+8],u===Mc||!px(i,!1)?c=-1:(a=e[ke],c=_p(u),e=vp(u,e)));c!==-1;){let m=e[ke];if(fx(o,c,m.data)){let _=QO(c,e,n,a,i,f);if(_!==mr)return _}u=e[c+8],u!==Mc&&px(i,e[ke].data[c+8]===f)&&fx(o,c,e)?(a=m,c=_p(u),e=vp(u,e)):c=-1}}return r}function QO(t,e,n,i,r,o){let a=e[ke],c=a.data[t+8],u=i==null?Up(c)&&Cv:i!=a&&(c.type&3)!==0,f=r&ze.Host&&o===c,m=lp(c,a,n,u,f);return m!==null?Fc(e,a,m,c):mr}function lp(t,e,n,i,r){let o=t.providerIndexes,a=e.data,c=o&1048575,u=t.directiveStart,f=t.directiveEnd,m=o>>20,_=i?c:c+m,b=r?c+m:f;for(let I=_;I<b;I++){let M=a[I];if(I<u&&n===M||I>=u&&M.type===n)return I}if(r){let I=a[u];if(I&&Vo(I)&&I.type===n)return u}return null}function Fc(t,e,n,i){let r=t[n],o=e.data;if(UO(r)){let a=r;a.resolving&&wN(bN(o[n]));let c=yp(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Wn(a.injectImpl):null,m=bD(t,i,ze.Default);try{r=t[n]=a.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&jO(n,o[n],e)}finally{f!==null&&Wn(f),yp(c),a.resolving=!1,CD()}}return r}function YO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ku)?t[Ku]:void 0;return typeof e=="number"?e>=0?e&SD:XO:e}function fx(t,e,n){let i=1<<t;return!!(n[e+(t>>AD)]&i)}function px(t,e){return!(t&ze.Self)&&!(t&ze.Host&&e)}var Us=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return ND(this._tNode,this._lView,e,Fp(i),n)}};function XO(){return new Us(Qn(),$e())}function Wp(t){return dd(()=>{let e=t.prototype.constructor,n=e[hp]||xv(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[hp]||xv(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function xv(t){return Lx(t)?()=>{let e=xv(Ii(t));return e&&e()}:$s(t)}function JO(t,e,n,i,r){let o=t,a=e;for(;o!==null&&a!==null&&a[Ce]&2048&&!(a[Ce]&512);){let c=OD(o,a,n,i|ze.Self,mr);if(c!==mr)return c;let u=o.parent;if(!u){let f=a[sD];if(f){let m=f.get(n,mr,i);if(m!==mr)return m}u=LD(a),a=a[Bc]}o=u}return r}function LD(t){let e=t[ke],n=e.type;return n===2?e.declTNode:n===1?t[ci]:null}function mx(t,e=null,n=null,i){let r=FD(t,e,n,i);return r.resolveInjectorInitializers(),r}function FD(t,e=null,n=null,i,r=new Set){let o=[n||Zn,cy(t)];return i=i||(typeof t=="object"?void 0:Bn(t)),new Xu(o,e||uy(),i||null,r)}var fn=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return mx({name:""},r,i,"");{let o=i.name??"";return mx({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Qu,e.NULL=new mp,e.\u0275prov=ne({token:e,providedIn:"any",factory:()=>V(Hx)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var eL="ngOriginalError";function nv(t){return t[eL]}var vr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&nv(e);for(;n&&nv(n);)n=nv(n);return n||null}},VD=new ce("",{providedIn:"root",factory:()=>X(vr).handleError.bind(void 0)}),Zp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tL,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Dv=class extends Zp{constructor(e){super(),this._lView=e}onDestroy(e){return pD(this._lView,e),()=>CO(this._lView,e)}};function tL(){return new Dv($e())}function nL(){return zc(Qn(),$e())}function zc(t,e){return new vt(xi(t,e))}var vt=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=nL;let t=e;return t})();function iL(t){return t instanceof vt?t.nativeElement:t}var Tv=class extends Ae{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,rD()&&(this.destroyRef=X(Zp,{optional:!0})??void 0)}emit(e){let n=Ue(null);try{super.next(e)}finally{Ue(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=iv(o),r&&(r=iv(r)),a&&(a=iv(a)));let c=super.subscribe({next:r,error:o,complete:a});return e instanceof Ct&&e.add(c),c}};function iv(t){return e=>{setTimeout(t,void 0,e)}}var tt=Tv;function rL(){return this._results[Symbol.iterator]()}var bp=class t{get changes(){return this._changes??=new tt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=rL)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=kN(e);(this._changesDetected=!RN(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function BD(t){return(t.flags&128)===128}var jD=new Map,oL=0;function sL(){return oL++}function aL(t){jD.set(t[zp],t)}function cL(t){jD.delete(t[zp])}var gx="__ngContext__";function Bo(t,e){zs(e)?(t[gx]=e[zp],aL(e)):t[gx]=e}function zD(t){return $D(t[ed])}function UD(t){return $D(t[$i])}function $D(t){for(;t!==null&&!Jr(t);)t=t[$i];return t}var Sv;function HD(t){Sv=t}function lL(){if(Sv!==void 0)return Sv;if(typeof document<"u")return document;throw new Ee(210,!1)}var Kp=new ce("",{providedIn:"root",factory:()=>uL}),uL="ng",xy=new ce(""),jn=new ce("",{providedIn:"platform",factory:()=>"unknown"});var Ys=new ce(""),md=new ce("",{providedIn:"root",factory:()=>lL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dL="h",hL="b";var fL=()=>null;function Dy(t,e,n=!1){return fL(t,e,n)}var qD=!1,pL=new ce("",{providedIn:"root",factory:()=>qD});var wp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nx})`}};function gd(t){return t instanceof wp?t.changingThisBreaksApplicationSecurity:t}function GD(t,e){let n=mL(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Nx})`)}return n===e}function mL(t){return t instanceof wp&&t.getTypeName()||null}var gL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function WD(t){return t=String(t),t.match(gL)?t:"unsafe:"+t}var Ty=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ty||{});function li(t){let e=_L();return e?e.sanitize(Ty.URL,t)||"":GD(t,"URL")?gd(t):WD(Lp(t))}function _L(){let t=$e();return t&&t[Hi].sanitizer}var vL=/^>|^->|<!--|-->|--!>|<!-$/g,yL=/(<|>)/g,bL="\u200B$1\u200B";function wL(t){return t.replace(vL,e=>e.replace(yL,bL))}function ZD(t){return t instanceof Function?t():t}function KD(t){return(t??X(fn)).get(jn)==="browser"}var Qr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Qr||{}),IL;function Sy(t,e){return IL(t,e)}function Sc(t,e,n,i,r){if(i!=null){let o,a=!1;Jr(i)?o=i:zs(i)&&(a=!0,i=i[yr]);let c=_r(i);t===0&&n!==null?r==null?eT(e,n,c):Ip(e,n,c,r||null,!0):t===1&&n!==null?Ip(e,n,c,r||null,!0):t===2?VL(e,c,a):t===3&&e.destroyNode(c),o!=null&&jL(e,t,o,n,r)}}function EL(t,e){return t.createText(e)}function CL(t,e,n){t.setValue(e,n)}function xL(t,e){return t.createComment(wL(e))}function QD(t,e,n){return t.createElement(e,n)}function DL(t,e){YD(t,e),e[yr]=null,e[ci]=null}function TL(t,e,n,i,r,o){i[yr]=r,i[ci]=e,Xp(t,i,n,1,r,o)}function YD(t,e){e[Hi].changeDetectionScheduler?.notify(1),Xp(t,e,e[Gt],2,null,null)}function SL(t){let e=t[ed];if(!e)return rv(t[ke],t);for(;e;){let n=null;if(zs(e))n=e[ed];else{let i=e[Tn];i&&(n=i)}if(!n){for(;e&&!e[$i]&&e!==t;)zs(e)&&rv(e[ke],e),e=e[yn];e===null&&(e=t),zs(e)&&rv(e[ke],e),n=e&&e[$i]}e=n}}function AL(t,e,n,i){let r=Tn+i,o=n.length;i>0&&(n[r-1][$i]=e),i<o-Tn?(e[$i]=n[r],$x(n,Tn+i,e)):(n.push(e),e[$i]=null),e[yn]=n;let a=e[pd];a!==null&&n!==a&&ML(a,e);let c=e[Kr];c!==null&&c.insertView(t),Iv(e),e[Ce]|=128}function ML(t,e){let n=t[Oc],r=e[yn][yn][Ei];e[Ei]!==r&&(t[Ce]|=hy.HasTransplantedViews),n===null?t[Oc]=[e]:n.push(e)}function XD(t,e){let n=t[Oc],i=n.indexOf(e);n.splice(i,1)}function rd(t,e){if(t.length<=Tn)return;let n=Tn+e,i=t[n];if(i){let r=i[pd];r!==null&&r!==t&&XD(r,i),e>0&&(t[n-1][$i]=i[$i]);let o=pp(t,Tn+e);DL(i[ke],i);let a=o[Kr];a!==null&&a.detachView(o[ke]),i[yn]=null,i[$i]=null,i[Ce]&=-129}return i}function Qp(t,e){if(!(e[Ce]&256)){let n=e[Gt];n.destroyNode&&Xp(t,e,n,3,null,null),SL(e)}}function rv(t,e){if(e[Ce]&256)return;let n=Ue(null);try{e[Ce]&=-129,e[Ce]|=256,e[qs]&&DC(e[qs]),RL(t,e),PL(t,e),e[ke].type===1&&e[Gt].destroy();let i=e[pd];if(i!==null&&Jr(e[yn])){i!==e[yn]&&XD(i,e);let r=e[Kr];r!==null&&r.detachView(t)}cL(e)}finally{Ue(n)}}function PL(t,e){let n=t.cleanup,i=e[Ju];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[n[o+1]];n[o].call(a)}i!==null&&(e[Ju]=null);let r=e[Fo];if(r!==null){e[Fo]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function RL(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof id)){let o=n[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=r[o[a]],u=o[a+1];pr(4,c,u);try{u.call(c)}finally{pr(5,c,u)}}else{pr(4,r,o);try{o.call(r)}finally{pr(5,r,o)}}}}}function JD(t,e,n){return kL(t,e.parent,n)}function kL(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[yr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===gr.None||o===gr.Emulated)return null}return xi(i,n)}}function Ip(t,e,n,i,r){t.insertBefore(e,n,i,r)}function eT(t,e,n){t.appendChild(e,n)}function _x(t,e,n,i,r){i!==null?Ip(t,e,n,i,r):eT(t,e,n)}function NL(t,e,n,i){t.removeChild(e,n,i)}function Ay(t,e){return t.parentNode(e)}function OL(t,e){return t.nextSibling(e)}function tT(t,e,n){return FL(t,e,n)}function LL(t,e,n){return t.type&40?xi(t,n):null}var FL=LL,vx;function Yp(t,e,n,i){let r=JD(t,i,e),o=e[Gt],a=i.parent||e[ci],c=tT(a,i,e);if(r!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)_x(o,r,n[u],c,!1);else _x(o,r,n,c,!1);vx!==void 0&&vx(o,i,e,n,r)}function up(t,e){if(e!==null){let n=e.type;if(n&3)return xi(e,t);if(n&4)return Av(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return up(t,i);{let r=t[e.index];return Jr(r)?Av(-1,r):_r(r)}}else{if(n&32)return Sy(e,t)()||_r(t[e.index]);{let i=nT(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=nd(t[Ei]);return up(r,i)}else return up(t,e.next)}}}return null}function nT(t,e){if(e!==null){let i=t[Ei][ci],r=e.projection;return i.projection[r]}return null}function Av(t,e){let n=Tn+t+1;if(n<e.length){let i=e[n],r=i[ke].firstChild;if(r!==null)return up(i,r)}return e[Gs]}function VL(t,e,n){let i=Ay(t,e);i&&NL(t,i,e,n)}function My(t,e,n,i,r,o,a){for(;n!=null;){let c=i[n.index],u=n.type;if(a&&e===0&&(c&&Bo(_r(c),i),n.flags|=2),(n.flags&32)!==32)if(u&8)My(t,e,n.child,i,r,o,!1),Sc(e,t,r,c,o);else if(u&32){let f=Sy(n,i),m;for(;m=f();)Sc(e,t,r,m,o);Sc(e,t,r,c,o)}else u&16?iT(t,e,i,n,r,o):Sc(e,t,r,c,o);n=a?n.projectionNext:n.next}}function Xp(t,e,n,i,r,o){My(n,i,t.firstChild,e,r,o,!1)}function BL(t,e,n){let i=e[Gt],r=JD(t,n,e),o=n.parent||e[ci],a=tT(o,n,e);iT(i,0,e,n,r,a)}function iT(t,e,n,i,r,o){let a=n[Ei],u=a[ci].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];Sc(e,t,r,m,o)}else{let f=u,m=a[yn];BD(i)&&(f.flags|=128),My(t,e,f,m,r,o,!0)}}function jL(t,e,n,i,r){let o=n[Gs],a=_r(n);o!==a&&Sc(e,t,i,o,r);for(let c=Tn;c<n.length;c++){let u=n[c];Xp(u[ke],u,t,e,i,o)}}function zL(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:Qr.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Qr.Important),t.setStyle(n,i,r,o))}}function UL(t,e,n){t.setAttribute(e,"style",n)}function rT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function oT(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&gv(t,e,i),r!==null&&rT(t,e,r),o!==null&&UL(t,e,o)}var to={};function te(t=1){sT(an(),$e(),Uo()+t,!1)}function sT(t,e,n,i){if(!i)if((e[Ce]&3)===3){let o=t.preOrderCheckHooks;o!==null&&ap(e,o,n)}else{let o=t.preOrderHooks;o!==null&&cp(e,o,0,n)}Ws(n)}function ye(t,e=ze.Default){let n=$e();if(n===null)return V(t,e);let i=Qn();return ND(i,n,Ii(t),e)}function Py(){let t="invalid";throw new Error(t)}function aT(t,e,n,i,r,o){let a=Ue(null);try{let c=null;r&st.SignalBased&&(c=e[i][IC]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),r&st.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):aD(e,c,i,o)}finally{Ue(a)}}function $L(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Ws(~r);else{let o=r,a=n[++i],c=n[++i];OO(a,o);let u=e[o];c(2,u)}}}finally{Ws(-1)}}function Jp(t,e,n,i,r,o,a,c,u,f,m){let _=e.blueprint.slice();return _[yr]=r,_[Ce]=i|4|128|8|64,(f!==null||t&&t[Ce]&2048)&&(_[Ce]|=2048),fD(_),_[yn]=_[Bc]=t,_[Dn]=n,_[Hi]=a||t&&t[Hi],_[Gt]=c||t&&t[Gt],_[Nc]=u||t&&t[Nc]||null,_[ci]=o,_[zp]=sL(),_[kc]=m,_[sD]=f,_[Ei]=e.type==2?t[Ei]:_,_}function Uc(t,e,n,i,r){let o=t.data[e];if(o===null)o=HL(t,e,n,i,r),NO()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let a=MO();o.injectorIndex=a===null?-1:a.injectorIndex}return Qs(o,!0),o}function HL(t,e,n,i,r){let o=_D(),a=_y(),c=a?o:o&&o.parent,u=t.data[e]=QL(t,c,n,e,i,r);return t.firstChild===null&&(t.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function cT(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function lT(t,e,n,i,r){let o=Uo(),a=i&2;try{Ws(-1),a&&e.length>Sn&&sT(t,e,Sn,!1),pr(a?2:0,r),n(i,r)}finally{Ws(o),pr(a?3:1,r)}}function Ry(t,e,n){if(fy(e)){let i=Ue(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let c=t.data[a];if(c.contentQueries){let u=n[a];c.contentQueries(1,u,a)}}}finally{Ue(i)}}}function ky(t,e,n){mD()&&(nF(t,e,n,xi(n,e)),(n.flags&64)===64&&fT(t,e,n))}function Ny(t,e,n=xi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],c=a===-1?n(e,t):t[a];t[r++]=c}}}function uT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Oy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Oy(t,e,n,i,r,o,a,c,u,f,m){let _=Sn+i,b=_+r,I=qL(_,b),M=typeof f=="function"?f():f;return I[ke]={type:t,blueprint:I,template:n,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:m}}function qL(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:to);return n}function GL(t,e,n,i){let o=i.get(pL,qD)||n===gr.ShadowDom,a=t.selectRootElement(e,o);return WL(a),a}function WL(t){ZL(t)}var ZL=()=>null;function KL(t,e,n,i){let r=gT(e);r.push(n),t.firstCreatePass&&_T(t).push(i,r.length-1)}function QL(t,e,n,i,r,o){let a=e?e.injectorIndex:-1,c=0;return gD()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yx(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let c,u=st.None;Array.isArray(a)?(c=a[0],u=a[1]):c=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}t===0?bx(i,n,f,c,u):bx(i,n,f,c)}return i}function bx(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function YL(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,a=e.attrs,c=[],u=null,f=null;for(let m=i;m<r;m++){let _=o[m],b=n?n.get(_):null,I=b?b.inputs:null,M=b?b.outputs:null;u=yx(0,_.inputs,m,u,I),f=yx(1,_.outputs,m,f,M);let P=u!==null&&a!==null&&!ay(e)?fF(u,m,a):null;c.push(P)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=f}function XL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dT(t,e,n,i,r,o,a,c){let u=xi(e,n),f=e.inputs,m;!c&&f!=null&&(m=f[i])?(Fy(t,n,m,i,r),Up(e)&&JL(n,e.index)):e.type&3?(i=XL(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function JL(t,e){let n=zo(e,t);n[Ce]&16||(n[Ce]|=64)}function Ly(t,e,n,i){if(mD()){let r=i===null?null:{"":-1},o=rF(t,n),a,c;o===null?a=c=null:[a,c]=o,a!==null&&hT(t,e,n,a,r,c),r&&oF(n,i,r)}n.mergedAttrs=Yu(n.mergedAttrs,n.attrs)}function hT(t,e,n,i,r,o){for(let f=0;f<i.length;f++)KO(MD(n,e),t,i[f].type);aF(n,t.data.length,i.length);for(let f=0;f<i.length;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let a=!1,c=!1,u=cT(t,e,i.length,null);for(let f=0;f<i.length;f++){let m=i[f];n.mergedAttrs=Yu(n.mergedAttrs,m.hostAttrs),cF(t,n,e,u,m),sF(u,m,r),m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let _=m.type.prototype;!a&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),a=!0),!c&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}YL(t,n,o)}function eF(t,e,n,i,r){let o=r.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let c=~e.index;tF(a)!=c&&a.push(c),a.push(n,i,o)}}function tF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function nF(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Up(n)&&lF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||MD(n,e),Bo(i,e);let a=n.initialInputs;for(let c=r;c<o;c++){let u=t.data[c],f=Fc(e,t,c,n);if(Bo(f,e),a!==null&&hF(e,c-r,f,u,n,a),Vo(u)){let m=zo(n.index,e);m[Dn]=Fc(e,t,c,n)}}}function fT(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,a=LO();try{Ws(o);for(let c=i;c<r;c++){let u=t.data[c],f=e[c];Ev(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&iF(u,f)}}finally{Ws(-1),Ev(a)}}function iF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function rF(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(Zx(e,a.selectors,!1))if(i||(i=[]),Vo(a))if(a.findHostDirectiveDefs!==null){let c=[];r=r||new Map,a.findHostDirectiveDefs(a,c,r),i.unshift(...c,a);let u=c.length;Mv(t,e,u)}else i.unshift(a),Mv(t,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function Mv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function oF(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new Ee(-301,!1);i.push(e[r],o)}}}function sF(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Vo(e)&&(n[""]=t)}}function aF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function cF(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=$s(r.type,!0)),a=new id(o,Vo(r),ye);t.blueprint[i]=a,n[i]=a,eF(t,e,i,cT(t,n,r.hostVars,to),r)}function lF(t,e,n){let i=xi(e,t),r=uT(n),o=t[Hi].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let c=em(t,Jp(t,r,null,a,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=c}function uF(t,e,n,i,r,o){let a=xi(t,e);dF(e[Gt],a,o,t.value,n,i,r)}function dF(t,e,n,i,r,o,a){if(o==null)t.removeAttribute(e,r,n);else{let c=a==null?Lp(o):a(o,i||"",r);t.setAttribute(e,r,c,n)}}function hF(t,e,n,i,r,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;){let u=a[c++],f=a[c++],m=a[c++],_=a[c++];aT(i,n,u,f,m,_)}}function fF(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let a=t[o];for(let c=0;c<a.length;c+=3)if(a[c]===e){i.push(o,a[c+1],a[c+2],n[r+1]);break}}r+=2}return i}function pT(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function mT(t,e){let n=t.contentQueries;if(n!==null){let i=Ue(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a!==-1){let c=t.data[a];by(o),c.contentQueries(2,e[a],a)}}}finally{Ue(i)}}}function em(t,e){return t[ed]?t[ux][$i]=e:t[ed]=e,t[ux]=e,e}function Pv(t,e,n){by(0);let i=Ue(null);try{e(t,n)}finally{Ue(i)}}function gT(t){return t[Ju]||(t[Ju]=[])}function _T(t){return t.cleanup||(t.cleanup=[])}function vT(t,e,n){return(t===null||Vo(t))&&(n=yO(n[e.index])),n[Gt]}function yT(t,e){let n=t[Nc],i=n?n.get(vr,null):null;i&&i.handleError(e)}function Fy(t,e,n,i,r){for(let o=0;o<n.length;){let a=n[o++],c=n[o++],u=n[o++],f=e[a],m=t.data[a];aT(m,f,i,c,u,r)}}function pF(t,e,n){let i=dD(e,t);CL(t[Gt],i,n)}function mF(t,e){let n=zo(e,t),i=n[ke];gF(i,n);let r=n[yr];r!==null&&n[kc]===null&&(n[kc]=Dy(r,n[Nc])),Vy(i,n,n[Dn])}function gF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Vy(t,e,n){wy(e);try{let i=t.viewQuery;i!==null&&Pv(1,i,n);let r=t.template;r!==null&&lT(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Kr]?.finishViewCreation(t),t.staticContentQueries&&mT(t,e),t.staticViewQueries&&Pv(2,t.viewQuery,n);let o=t.components;o!==null&&_F(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Ce]&=-5,Iy()}}function _F(t,e){for(let n=0;n<e.length;n++)mF(t,e[n])}function tm(t,e,n,i){let r=Ue(null);try{let o=e.tView,c=t[Ce]&4096?4096:16,u=Jp(t,o,n,c,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=t[e.index];u[pd]=f;let m=t[Kr];return m!==null&&(u[Kr]=m.createEmbeddedView(o)),Vy(o,u,n),u}finally{Ue(r)}}function bT(t,e){let n=Tn+e;if(n<t.length)return t[n]}function od(t,e){return!e||e.firstChild===null||BD(t)}function nm(t,e,n,i=!0){let r=e[ke];if(AL(r,e,t,n),i){let a=Av(n,t),c=e[Gt],u=Ay(c,t[Gs]);u!==null&&TL(r,t[ci],c,e,u,a)}let o=e[kc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function wT(t,e){let n=rd(t,e);return n!==void 0&&Qp(n[ke],n),n}function Ep(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(_r(o)),Jr(o)&&vF(o,i);let a=n.type;if(a&8)Ep(t,e,n.child,i);else if(a&32){let c=Sy(n,e),u;for(;u=c();)i.push(u)}else if(a&16){let c=nT(e,n);if(Array.isArray(c))i.push(...c);else{let u=nd(e[Ei]);Ep(u[ke],u,c,i,!0)}}n=r?n.projectionNext:n.next}return i}function vF(t,e){for(let n=Tn;n<t.length;n++){let i=t[n],r=i[ke].firstChild;r!==null&&Ep(i[ke],i,r,e)}t[Gs]!==t[yr]&&e.push(t[Gs])}var IT=[];function yF(t){return t[qs]??bF(t)}function bF(t){let e=IT.pop()??Object.create(IF);return e.lView=t,e}function wF(t){t.lView[qs]!==t&&(t.lView=null,IT.push(t))}var IF=Et(ee({},EC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{td(t.lView)},consumerOnSignalRead(){this.lView[qs]=this}}),ET=100;function CT(t,e=!0,n=0){let i=t[Hi],r=i.rendererFactory,o=!1;o||r.begin?.();try{EF(t,n)}catch(a){throw e&&yT(t,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function EF(t,e){Rv(t,e);let n=0;for(;gy(t);){if(n===ET)throw new Ee(103,!1);n++,Rv(t,1)}}function CF(t,e,n,i){let r=e[Ce];if((r&256)===256)return;let o=!1;!o&&e[Hi].inlineEffectRunner?.flush(),wy(e);let a=null,c=null;!o&&xF(t)&&(c=yF(e),a=CC(c));try{fD(e),kO(t.bindingStartIndex),n!==null&&lT(t,e,n,2,i);let u=(r&3)===3;if(!o)if(u){let _=t.preOrderCheckHooks;_!==null&&ap(e,_,null)}else{let _=t.preOrderHooks;_!==null&&cp(e,_,0,null),ev(e,0)}if(DF(e),xT(e,0),t.contentQueries!==null&&mT(t,e),!o)if(u){let _=t.contentCheckHooks;_!==null&&ap(e,_)}else{let _=t.contentHooks;_!==null&&cp(e,_,1),ev(e,1)}$L(t,e);let f=t.components;f!==null&&TT(e,f,0);let m=t.viewQuery;if(m!==null&&Pv(2,m,i),!o)if(u){let _=t.viewCheckHooks;_!==null&&ap(e,_)}else{let _=t.viewHooks;_!==null&&cp(e,_,2),ev(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[J_]){for(let _ of e[J_])_();e[J_]=null}o||(e[Ce]&=-73)}catch(u){throw td(e),u}finally{c!==null&&(xC(c,a),wF(c)),Iy()}}function xF(t){return t.type!==2}function xT(t,e){for(let n=zD(t);n!==null;n=UD(n))for(let i=Tn;i<n.length;i++){let r=n[i];DT(r,e)}}function DF(t){for(let e=zD(t);e!==null;e=UD(e)){if(!(e[Ce]&hy.HasTransplantedViews))continue;let n=e[Oc];for(let i=0;i<n.length;i++){let r=n[i],o=r[yn];IO(r)}}}function TF(t,e,n){let i=zo(e,t);DT(i,n)}function DT(t,e){my(t)&&Rv(t,e)}function Rv(t,e){let i=t[ke],r=t[Ce],o=t[qs],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&k_(o)),o&&(o.dirty=!1),t[Ce]&=-9217,a)CF(i,t,i.template,t[Dn]);else if(r&8192){xT(t,1);let c=i.components;c!==null&&TT(t,c,1)}}function TT(t,e,n){for(let i=0;i<e.length;i++)TF(t,e[i],n)}function By(t){for(t[Hi].changeDetectionScheduler?.notify();t;){t[Ce]|=64;let e=nd(t);if(dO(t)&&!e)return t;t=e}return null}var Zs=class{get rootNodes(){let e=this._lView,n=e[ke];return Ep(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Dn]}set context(e){this._lView[Dn]=e}get destroyed(){return(this._lView[Ce]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[yn];if(Jr(e)){let n=e[gp],i=n?n.indexOf(this):-1;i>-1&&(rd(e,i),pp(n,i))}this._attachedToViewContainer=!1}Qp(this._lView[ke],this._lView)}onDestroy(e){pD(this._lView,e)}markForCheck(){By(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ce]&=-129}reattach(){Iv(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,CT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,YD(this._lView[ke],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=e,Iv(this._lView)}},Ci=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=MF;let t=e;return t})(),SF=Ci,AF=class extends SF{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=tm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Zs(r)}};function MF(){return im(Qn(),$e())}function im(t,e){return t.type&4?new AF(e,t,zc(t,e)):null}var EW=new RegExp(`^(\\d+)*(${hL}|${dL})*(.*)`);var PF=()=>null;function sd(t,e){return PF(t,e)}var Cp=class{},kv=class{},xp=class{};function RF(t){let e=Error(`No component factory found for ${Bn(t)}.`);return e[kF]=t,e}var kF="ngComponent";var Nv=class{resolveComponentFactory(e){throw RF(e)}},$o=(()=>{let e=class e{};e.NULL=new Nv;let t=e;return t})(),ad=class{},_d=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>NF();let t=e;return t})();function NF(){let t=$e(),e=Qn(),n=zo(e.index,t);return(zs(n)?n:t)[Gt]}var OF=(()=>{let e=class e{};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),ov={};var wx=new Set;function $c(t){wx.has(t)||(wx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Ix(...t){}function LF(){let t=typeof Zr.requestAnimationFrame=="function",e=Zr[t?"requestAnimationFrame":"setTimeout"],n=Zr[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ve=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tt(!1),this.onMicrotaskEmpty=new tt(!1),this.onStable=new tt(!1),this.onError=new tt(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=LF().nativeRequestAnimationFrame,BF(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Ee(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,FF,Ix,Ix);try{return o.runTask(a,n,i)}finally{o.cancelTask(a)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},FF={};function jy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function VF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Zr,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ov(t),t.isCheckStableRunning=!0,jy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ov(t))}function BF(t){let e=()=>{VF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,a,c)=>{if(jF(c))return n.invokeTask(r,o,a,c);try{return Ex(t),n.invokeTask(r,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Cx(t)}},onInvoke:(n,i,r,o,a,c,u)=>{try{return Ex(t),n.invoke(r,o,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Cx(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Ov(t),jy(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Ov(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ex(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Cx(t){t._nesting--,jy(t)}function jF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var js=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(js||{}),ST={destroy(){}};function zy(t,e){!e&&oD(zy);let n=e?.injector??X(fn);if(!KD(n))return ST;$c("NgAfterRender");let i=n.get(rm),r=i.handler??=new Tp,o=e?.phase??js.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Zp).onDestroy(a),u=Xr(n,()=>new Dp(o,t));return r.register(u),{destroy:a}}function vd(t,e){!e&&oD(vd);let n=e?.injector??X(fn);if(!KD(n))return ST;$c("NgAfterNextRender");let i=n.get(rm),r=i.handler??=new Tp,o=e?.phase??js.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Zp).onDestroy(a),u=Xr(n,()=>new Dp(o,()=>{a(),t()}));return r.register(u),{destroy:a}}var Dp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=X(ve),this.errorHandler=X(vr,{optional:!0}),X(Cp,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Tp=class{constructor(){this.executingCallbacks=!1,this.buckets={[js.EarlyRead]:new Set,[js.Write]:new Set,[js.MixedReadWrite]:new Set,[js.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},rm=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Sp(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)r=hv(r,c);else if(o==2){let u=c,f=e[++a];i=hv(i,u+": "+f+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Ap=class extends $o{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Hs(e);return new cd(n,this.ngModule)}};function xx(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function zF(t){let e=t.toLowerCase();return e==="svg"?mO:e==="math"?gO:null}var Lv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Fp(i);let r=this.injector.get(e,ov,i);return r!==ov||n===ov?r:this.parentInjector.get(e,n,i)}},cd=class extends xp{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=xx(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return xx(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=KN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Ue(null);try{r=r||this.ngModule;let a=r instanceof Kn?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new Lv(e,a):e,u=c.get(ad,null);if(u===null)throw new Ee(407,!1);let f=c.get(OF,null),m=c.get(rm,null),_=c.get(Cp,null),b={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,afterRenderEventManager:m,changeDetectionScheduler:_},I=u.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=i?GL(I,i,this.componentDef.encapsulation,c):QD(I,M,zF(M)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let H=null;P!==null&&(H=Dy(P,c,!0));let Q=Oy(0,null,null,1,0,null,null,null,null,null,null),q=Jp(null,Q,null,F,null,null,b,I,c,null,H);wy(q);let oe,he;try{let le=this.componentDef,S,C=null;le.findHostDirectiveDefs?(S=[],C=new Map,le.findHostDirectiveDefs(le,S,C),S.push(le)):S=[le];let x=UF(q,P),A=$F(x,P,le,S,q,b,I);he=py(Q,Sn),P&&GF(I,le,P,i),n!==void 0&&WF(he,this.ngContentSelectors,n),oe=qF(A,le,S,C,q,[ZF]),Vy(Q,q,null)}finally{Iy()}return new Fv(this.componentType,oe,zc(he,q),q,he)}finally{Ue(o)}}},Fv=class extends kv{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Zs(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Fy(o[ke],o,r,e,n),this.previousInputValues.set(e,n);let a=zo(this._tNode.index,o);By(a)}}get injector(){return new Us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function UF(t,e){let n=t[ke],i=Sn;return t[i]=e,Uc(n,i,2,"#host",null)}function $F(t,e,n,i,r,o,a){let c=r[ke];HF(i,t,e,a);let u=null;e!==null&&(u=Dy(e,r[Nc]));let f=o.rendererFactory.createRenderer(e,n),m=16;n.signals?m=4096:n.onPush&&(m=64);let _=Jp(r,uT(n),null,m,r[t.index],t,o,f,null,null,u);return c.firstCreatePass&&Mv(c,t,i.length-1),em(r,_),r[t.index]=_}function HF(t,e,n,i){for(let r of t)e.mergedAttrs=Yu(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Sp(e,e.mergedAttrs,!0),n!==null&&oT(i,n,e))}function qF(t,e,n,i,r,o){let a=Qn(),c=r[ke],u=xi(a,r);hT(c,r,a,n,null,i);for(let m=0;m<n.length;m++){let _=a.directiveStart+m,b=Fc(r,c,_,a);Bo(b,r)}fT(c,r,a),u&&Bo(u,r);let f=Fc(r,c,a.directiveStart+a.componentOffset,a);if(t[Dn]=r[Dn]=f,o!==null)for(let m of o)m(f,e);return Ry(c,a,r),f}function GF(t,e,n,i){if(i)gv(t,n,["ng-version","17.3.10"]);else{let{attrs:r,classes:o}=QN(e.selectors[0]);r&&gv(t,n,r),o&&o.length>0&&rT(t,n,o.join(" "))}}function WF(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function ZF(){let t=Qn();Gp($e()[ke],t)}var Di=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=KF;let t=e;return t})();function KF(){let t=Qn();return MT(t,$e())}var QF=Di,AT=class extends QF{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return zc(this._hostTNode,this._hostLView)}get injector(){return new Us(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cy(this._hostTNode,this._hostLView);if(TD(e)){let n=vp(e,this._hostLView),i=_p(e),r=n[ke].data[i+8];return new Us(r,n)}else return new Us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Dx(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Tn}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=sd(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(c,r,od(this._hostTNode,a)),c}createComponent(e,n,i,r,o){let a=e&&!uO(e),c;if(a)c=n;else{let M=n||{};c=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=a?e:new cd(Hs(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let P=(a?f:this.parentInjector).get(Kn,null);P&&(o=P)}let m=Hs(u.componentType??{}),_=sd(this._lContainer,m?.id??null),b=_?.firstChild??null,I=u.create(f,r,b,o);return this.insertImpl(I.hostView,c,od(this._hostTNode,_)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(wO(r)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=r[yn],f=new AT(u,u[ci],u[yn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return nm(a,r,o,i),e.attachToViewContainerRef(),$x(sv(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Dx(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=rd(this._lContainer,n);i&&(pp(sv(this._lContainer),n),Qp(i[ke],i))}detach(e){let n=this._adjustIndex(e,-1),i=rd(this._lContainer,n);return i&&pp(sv(this._lContainer),n)!=null?new Zs(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function Dx(t){return t[gp]}function sv(t){return t[gp]||(t[gp]=[])}function MT(t,e){let n,i=e[t.index];return Jr(i)?n=i:(n=pT(i,e,null,t),e[t.index]=n,em(e,n)),XF(n,e,t,i),new AT(n,t,e)}function YF(t,e){let n=t[Gt],i=n.createComment(""),r=xi(e,t),o=Ay(n,r);return Ip(n,o,i,OL(n,r),!1),i}var XF=tV,JF=()=>!1;function eV(t,e,n){return JF(t,e,n)}function tV(t,e,n,i){if(t[Gs])return;let r;n.type&8?r=_r(i):r=YF(e,n),t[Gs]=r}var Vv=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Bv=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let a=n.getByIndex(o),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Uy(e,n).matches!==null&&this.queries[n].setDirty()}},Mp=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=lV(e):this.predicate=e}},jv=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},zv=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,nV(n,o)),this.matchTNodeWithReadOption(e,n,lp(n,e,o,!1,!1))}else i===Ci?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,lp(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===vt||r===Di||r===Ci&&n.type&4)this.addMatch(n.index,-2);else{let o=lp(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function nV(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function iV(t,e){return t.type&11?zc(t,e):t.type&4?im(t,e):null}function rV(t,e,n,i){return n===-1?iV(e,t):n===-2?oV(t,e,i):Fc(t,t[ke],n,e)}function oV(t,e,n){if(n===vt)return zc(e,t);if(n===Ci)return im(e,t);if(n===Di)return MT(e,t)}function PT(t,e,n,i){let r=e[Kr].queries[i];if(r.matches===null){let o=t.data,a=n.matches,c=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)c.push(null);else{let m=o[f];c.push(rV(e,m,a[u+1],n.metadata.read))}}r.matches=c}return r.matches}function Uv(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let a=PT(t,e,r,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)i.push(a[c/2]);else{let f=o[c+1],m=e[-u];for(let _=Tn;_<m.length;_++){let b=m[_];b[pd]===b[yn]&&Uv(b[ke],b,f,i)}if(m[Oc]!==null){let _=m[Oc];for(let b=0;b<_.length;b++){let I=_[b];Uv(I[ke],I,f,i)}}}}}return i}function sV(t,e){return t[Kr].queries[e].queryList}function RT(t,e,n){let i=new bp((n&4)===4);return KL(t,e,i,i.destroy),(e[Kr]??=new Bv).queries.push(new Vv(i))-1}function aV(t,e,n){let i=an();return i.firstCreatePass&&(kT(i,new Mp(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),RT(i,$e(),e)}function cV(t,e,n,i){let r=an();if(r.firstCreatePass){let o=Qn();kT(r,new Mp(e,n,i),o.index),uV(r,t),(n&2)===2&&(r.staticContentQueries=!0)}return RT(r,$e(),n)}function lV(t){return t.split(",").map(e=>e.trim())}function kT(t,e,n){t.queries===null&&(t.queries=new jv),t.queries.track(new zv(e,n))}function uV(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function Uy(t,e){return t.queries.getByIndex(e)}function dV(t,e){let n=t[ke],i=Uy(n,e);return i.crossesNgTemplate?Uv(n,t,e,[]):PT(n,t,i,e)}function hV(t){return Object.getPrototypeOf(t.prototype).constructor}function Ho(t){let e=hV(t.type),n=!0,i=[t];for(;e;){let r;if(Vo(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Ee(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let a=t;a.inputs=rp(t.inputs),a.inputTransforms=rp(t.inputTransforms),a.declaredInputs=rp(t.declaredInputs),a.outputs=rp(t.outputs);let c=r.hostBindings;c&&_V(t,c);let u=r.viewQuery,f=r.contentQueries;if(u&&mV(t,u),f&&gV(t,f),fV(t,r),hN(t.outputs,r.outputs),Vo(r)&&r.data.animation){let m=t.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(t),c===Ho&&(n=!1)}}e=Object.getPrototypeOf(e)}pV(i)}function fV(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function pV(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Yu(r.hostAttrs,n=Yu(n,r.hostAttrs))}}function rp(t){return t===Pc?{}:t===Zn?[]:t}function mV(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function gV(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function _V(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function no(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var jo=class{},ld=class{};var $v=class extends jo{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ap(this);let r=Xx(e);this._bootstrapComponents=ZD(r.bootstrap),this._r3Injector=FD(e,n,[{provide:jo,useValue:this},{provide:$o,useValue:this.componentFactoryResolver},...i],Bn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Hv=class extends ld{constructor(e){super(),this.moduleType=e}create(e){return new $v(this.moduleType,e,[])}};var Pp=class extends jo{constructor(e){super(),this.componentFactoryResolver=new Ap(this),this.instance=null;let n=new Xu([...e.providers,{provide:jo,useValue:this},{provide:$o,useValue:this.componentFactoryResolver}],e.parent||uy(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function $y(t,e,n=null){return new Pp({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var om=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new sn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vV(t,e,n){return t[e]=n}function io(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function yV(t){return(t.flags&32)===32}function bV(t,e,n,i,r,o,a,c,u){let f=e.consts,m=Uc(e,t,4,a||null,Lc(f,c));Ly(e,n,m,Lc(f,u)),Gp(e,m);let _=m.tView=Oy(2,m,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,m),_.queries=e.queries.embeddedTView(m)),m}function nt(t,e,n,i,r,o,a,c){let u=$e(),f=an(),m=t+Sn,_=f.firstCreatePass?bV(m,f,u,e,n,i,r,o,a):f.data[m];Qs(_,!1);let b=wV(f,u,_,t);Hp()&&Yp(f,u,b,_),Bo(b,u);let I=pT(b,u,b,_);return u[m]=I,em(u,I),eV(I,_,u),$p(_)&&ky(f,u,_),a!=null&&Ny(u,_,c),nt}var wV=IV;function IV(t,e,n,i){return qp(!0),e[Gt].createComment("")}function qi(t,e,n,i){let r=$e(),o=jc();if(io(r,o,e)){let a=an(),c=Ey();uF(c,r,t,e,n,i)}return qi}function EV(t,e,n,i){return io(t,jc(),n)?e+Lp(n)+i:to}function op(t,e){return t<<17|e<<2}function Ks(t){return t>>17&32767}function CV(t){return(t&2)==2}function xV(t,e){return t&131071|e<<17}function qv(t){return t|2}function Vc(t){return(t&131068)>>2}function av(t,e){return t&-131069|e<<2}function DV(t){return(t&1)===1}function Gv(t){return t|1}function TV(t,e,n,i,r,o){let a=o?e.classBindings:e.styleBindings,c=Ks(a),u=Vc(a);t[i]=n;let f=!1,m;if(Array.isArray(n)){let _=n;m=_[1],(m===null||hd(_,m)>0)&&(f=!0)}else m=n;if(r)if(u!==0){let b=Ks(t[c+1]);t[i+1]=op(b,c),b!==0&&(t[b+1]=av(t[b+1],i)),t[c+1]=xV(t[c+1],i)}else t[i+1]=op(c,0),c!==0&&(t[c+1]=av(t[c+1],i)),c=i;else t[i+1]=op(u,0),c===0?c=i:t[u+1]=av(t[u+1],i),u=i;f&&(t[i+1]=qv(t[i+1])),Tx(t,m,i,!0),Tx(t,m,i,!1),SV(e,m,t,i,o),a=op(c,u),o?e.classBindings=a:e.styleBindings=a}function SV(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&hd(o,e)>=0&&(n[i+1]=Gv(n[i+1]))}function Tx(t,e,n,i){let r=t[n+1],o=e===null,a=i?Ks(r):Vc(r),c=!1;for(;a!==0&&(c===!1||o);){let u=t[a],f=t[a+1];AV(u,e)&&(c=!0,t[a+1]=i?Gv(f):qv(f)),a=i?Ks(f):Vc(f)}c&&(t[n+1]=i?qv(r):Gv(r))}function AV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?hd(t,e)>=0:!1}var Ui={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function MV(t){return t.substring(Ui.key,Ui.keyEnd)}function PV(t){return RV(t),NT(t,OT(t,0,Ui.textEnd))}function NT(t,e){let n=Ui.textEnd;return n===e?-1:(e=Ui.keyEnd=kV(t,Ui.key=e,n),OT(t,e,n))}function RV(t){Ui.key=0,Ui.keyEnd=0,Ui.value=0,Ui.valueEnd=0,Ui.textEnd=t.length}function OT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function kV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function et(t,e,n){let i=$e(),r=jc();if(io(i,r,e)){let o=an(),a=Ey();dT(o,a,i,t,e,i[Gt],n,!1)}return et}function Wv(t,e,n,i,r){let o=e.inputs,a=r?"class":"style";Fy(t,n,o[a],a,i)}function yt(t,e,n){return LT(t,e,n,!1),yt}function br(t,e){return LT(t,e,null,!0),br}function Hy(t){OV(zV,NV,t,!0)}function NV(t,e){for(let n=PV(e);n>=0;n=NT(e,n))sy(t,MV(e),!0)}function LT(t,e,n,i){let r=$e(),o=an(),a=vD(2);if(o.firstUpdatePass&&VT(o,t,a,i),e!==to&&io(r,a,e)){let c=o.data[Uo()];BT(o,c,r,r[Gt],t,r[a+1]=$V(e,n),i,a)}}function OV(t,e,n,i){let r=an(),o=vD(2);r.firstUpdatePass&&VT(r,null,o,i);let a=$e();if(n!==to&&io(a,o,n)){let c=r.data[Uo()];if(jT(c,i)&&!FT(r,o)){let u=i?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=hv(u,n||"")),Wv(r,c,a,n,i)}else UV(r,c,a,a[Gt],a[o+1],a[o+1]=jV(t,e,n),i,o)}}function FT(t,e){return e>=t.expandoStartIndex}function VT(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[Uo()],a=FT(t,n);jT(o,i)&&e===null&&!a&&(e=!1),e=LV(r,o,e,i),TV(r,o,e,n,a,i)}}function LV(t,e,n,i){let r=yy(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=cv(null,t,e,n,i),n=ud(n,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==r)if(n=cv(r,t,e,n,i),o===null){let u=FV(t,e,i);u!==void 0&&Array.isArray(u)&&(u=cv(null,t,e,u[1],i),u=ud(u,e.attrs,i),VV(t,e,i,u))}else o=BV(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function FV(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Vc(i)!==0)return t[Ks(i)]}function VV(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Ks(r)]=i}function BV(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=t[o].hostAttrs;i=ud(i,a,n)}return ud(i,e.attrs,n)}function cv(t,e,n,i,r){let o=null,a=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<a&&(o=e[c],i=ud(i,o.hostAttrs,r),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),i}function ud(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),sy(t,a,n?!0:e[++o]))}return t===void 0?null:t}function jV(t,e,n){if(n==null||n==="")return Zn;let i=[],r=gd(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function zV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&sy(t,i,n)}function UV(t,e,n,i,r,o,a,c){r===to&&(r=Zn);let u=0,f=0,m=0<r.length?r[0]:null,_=0<o.length?o[0]:null;for(;m!==null||_!==null;){let b=u<r.length?r[u+1]:void 0,I=f<o.length?o[f+1]:void 0,M=null,P;m===_?(u+=2,f+=2,b!==I&&(M=_,P=I)):_===null||m!==null&&m<_?(u+=2,M=m):(f+=2,M=_,P=I),M!==null&&BT(t,e,n,i,M,P,a,c),m=u<r.length?r[u]:null,_=f<o.length?o[f]:null}}function BT(t,e,n,i,r,o,a,c){if(!(e.type&3))return;let u=t.data,f=u[c+1],m=DV(f)?Sx(u,e,n,r,Vc(f),a):void 0;if(!Rp(m)){Rp(o)||CV(f)&&(o=Sx(u,null,n,r,c,a));let _=dD(Uo(),n);zL(i,a,_,r,o)}}function Sx(t,e,n,i,r,o){let a=e===null,c;for(;r>0;){let u=t[r],f=Array.isArray(u),m=f?u[1]:u,_=m===null,b=n[r+1];b===to&&(b=_?Zn:void 0);let I=_?Y_(b,i):m===i?b:void 0;if(f&&!Rp(I)&&(I=Y_(u,i)),Rp(I)&&(c=I,a))return c;let M=t[r+1];r=a?Ks(M):Vc(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=Y_(u,i))}return c}function Rp(t){return t!==void 0}function $V(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Bn(gd(t)))),t}function jT(t,e){return(t.flags&(e?8:16))!==0}var Zv=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function lv(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function HV(t,e,n){let i,r,o=0,a=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=a&&o<=c;){let u=t.at(o),f=e[o],m=lv(o,u,o,f,n);if(m!==0){m<0&&t.updateValue(o,f),o++;continue}let _=t.at(a),b=e[c],I=lv(a,_,c,b,n);if(I!==0){I<0&&t.updateValue(a,b),a--,c--;continue}let M=n(o,u),P=n(a,_),F=n(o,f);if(Object.is(F,P)){let H=n(c,b);Object.is(H,M)?(t.swap(o,a),t.updateValue(a,b),c--,a--):t.move(a,o),t.updateValue(o,f),o++;continue}if(i??=new kp,r??=Mx(t,o,a,n),Kv(t,i,o,F))t.updateValue(o,f),o++,a++;else if(r.has(F))i.set(M,t.detach(o)),a--;else{let H=t.create(o,e[o]);t.attach(o,H),o++,a++}}for(;o<=c;)Ax(t,i,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=a;){let f=t.at(o),m=u.value,_=lv(o,f,o,m,n);if(_!==0)_<0&&t.updateValue(o,m),o++,u=c.next();else{i??=new kp,r??=Mx(t,o,a,n);let b=n(o,m);if(Kv(t,i,o,b))t.updateValue(o,m),o++,a++,u=c.next();else if(!r.has(b))t.attach(o,t.create(o,m)),o++,a++,u=c.next();else{let I=n(o,f);i.set(I,t.detach(o)),a--}}}for(;!u.done;)Ax(t,i,n,t.length,u.value),u=c.next()}for(;o<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function Kv(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function Ax(t,e,n,i,r){if(Kv(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function Mx(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var kp=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function jt(t,e,n){$c("NgControlFlow");let i=$e(),r=jc(),o=Jv(i,Sn+t),a=0;if(io(i,r,e)){let c=Ue(null);try{if(wT(o,a),e!==-1){let u=ey(i[ke],Sn+e),f=sd(o,u.tView.ssrId),m=tm(i,u,n,{dehydratedView:f});nm(o,m,a,od(u,f))}}finally{Ue(c)}}else{let c=bT(o,a);c!==void 0&&(c[Dn]=n)}}var Qv=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Tn}};function sm(t,e){return e}var Yv=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function am(t,e,n,i,r,o,a,c,u,f,m,_,b){$c("NgControlFlow");let I=u!==void 0,M=$e(),P=c?a.bind(M[Ei][Dn]):a,F=new Yv(I,P);M[Sn+t]=F,nt(t+1,e,n,i,r,o),I&&nt(t+2,u,f,m,_,b)}var Xv=class extends Zv{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Tn}at(e){return this.getLView(e)[Dn].$implicit}attach(e,n){let i=n[kc];this.needsIndexUpdate||=e!==this.length,nm(this.lContainer,n,e,od(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,qV(this.lContainer,e)}create(e,n){let i=sd(this.lContainer,this.templateTNode.tView.ssrId);return tm(this.hostLView,this.templateTNode,new Qv(this.lContainer,n,e),{dehydratedView:i})}destroy(e){Qp(e[ke],e)}updateValue(e,n){this.getLView(e)[Dn].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Dn].$index=e}getLView(e){return GV(this.lContainer,e)}};function cm(t){let e=Ue(null),n=Uo();try{let i=$e(),r=i[ke],o=i[n];if(o.liveCollection===void 0){let c=n+1,u=Jv(i,c),f=ey(r,c);o.liveCollection=new Xv(u,i,f)}else o.liveCollection.reset();let a=o.liveCollection;if(HV(a,t,o.trackByFn),a.updateIndexes(),o.hasEmptyBlock){let c=jc(),u=a.length===0;if(io(i,c,u)){let f=n+2,m=Jv(i,f);if(u){let _=ey(r,f),b=sd(m,_.tView.ssrId),I=tm(i,_,void 0,{dehydratedView:b});nm(m,I,0,od(_,b))}else wT(m,0)}}}finally{Ue(e)}}function Jv(t,e){return t[e]}function qV(t,e){return rd(t,e)}function GV(t,e){return bT(t,e)}function ey(t,e){return py(t,e)}function WV(t,e,n,i,r,o){let a=e.consts,c=Lc(a,r),u=Uc(e,t,2,i,c);return Ly(e,n,u,Lc(a,o)),u.attrs!==null&&Sp(u,u.attrs,!1),u.mergedAttrs!==null&&Sp(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Z(t,e,n,i){let r=$e(),o=an(),a=Sn+t,c=r[Gt],u=o.firstCreatePass?WV(a,o,r,e,n,i):o.data[a],f=ZV(o,r,u,c,e,t);r[a]=f;let m=$p(u);return Qs(u,!0),oT(c,f,u),!yV(u)&&Hp()&&Yp(o,r,f,u),xO()===0&&Bo(f,r),DO(),m&&(ky(o,r,u),Ry(o,u,r)),i!==null&&Ny(r,u),Z}function Y(){let t=Qn();_y()?vy():(t=t.parent,Qs(t,!1));let e=t;SO(e)&&AO(),TO();let n=an();return n.firstCreatePass&&(Gp(n,t),fy(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&$O(e)&&Wv(n,e,$e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&HO(e)&&Wv(n,e,$e(),e.stylesWithoutHost,!1),Y}function be(t,e,n,i){return Z(t,e,n,i),Y(),be}var ZV=(t,e,n,i,r,o)=>(qp(!0),QD(i,r,BO()));function KV(t,e,n,i,r){let o=e.consts,a=Lc(o,i),c=Uc(e,t,8,"ng-container",a);a!==null&&Sp(c,a,!0);let u=Lc(o,r);return Ly(e,n,c,u),e.queries!==null&&e.queries.elementStart(e,c),c}function Xs(t,e,n){let i=$e(),r=an(),o=t+Sn,a=r.firstCreatePass?KV(o,r,i,e,n):r.data[o];Qs(a,!0);let c=QV(r,i,a,t);return i[o]=c,Hp()&&Yp(r,i,c,a),Bo(c,i),$p(a)&&(ky(r,i,a),Ry(r,a,i)),n!=null&&Ny(i,a),Xs}function Js(){let t=Qn(),e=an();return _y()?vy():(t=t.parent,Qs(t,!1)),e.firstCreatePass&&(Gp(e,t),fy(t)&&e.queries.elementEnd(t)),Js}var QV=(t,e,n,i)=>(qp(!0),xL(e[Gt],""));function An(){return $e()}function qy(t,e,n){let i=$e(),r=jc();if(io(i,r,e)){let o=an(),a=Ey(),c=yy(o.data),u=vT(c,a,i);dT(o,a,i,t,e,u,n,!0)}return qy}var Bs=void 0;function YV(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var XV=["en",[["a","p"],["AM","PM"],Bs],[["AM","PM"],Bs,Bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bs,"{1} 'at' {0}",Bs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",YV],uv={};function Gy(t){let e=JV(t),n=Px(e);if(n)return n;let i=e.split("-")[0];if(n=Px(i),n)return n;if(i==="en")return XV;throw new Ee(701,!1)}function Px(t){return t in uv||(uv[t]=Zr.ng&&Zr.ng.common&&Zr.ng.common.locales&&Zr.ng.common.locales[t]),uv[t]}var Hc=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Hc||{});function JV(t){return t.toLowerCase().replace(/_/g,"-")}var Np="en-US";var e2=Np;function t2(t){typeof t=="string"&&(e2=t.toLowerCase().replace(/_/g,"-"))}function He(t,e,n,i){let r=$e(),o=an(),a=Qn();return zT(o,r,r[Gt],a,t,e,i),He}function Wy(t,e){let n=Qn(),i=$e(),r=an(),o=yy(r.data),a=vT(o,n,i);return zT(r,i,a,n,t,e),Wy}function n2(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===n&&r[o+1]===i){let c=e[Ju],u=r[o+2];return c.length>u?c[u]:null}typeof a=="string"&&(o+=2)}return null}function zT(t,e,n,i,r,o,a){let c=$p(i),f=t.firstCreatePass&&_T(t),m=e[Dn],_=gT(e),b=!0;if(i.type&3||a){let P=xi(i,e),F=a?a(P):P,H=_.length,Q=a?oe=>a(_r(oe[i.index])):i.index,q=null;if(!a&&c&&(q=n2(t,e,r,i.index)),q!==null){let oe=q.__ngLastListenerFn__||q;oe.__ngNextListenerFn__=o,q.__ngLastListenerFn__=o,b=!1}else{o=kx(i,e,m,o,!1);let oe=n.listen(F,r,o);_.push(o,oe),f&&f.push(r,Q,H,H+1)}}else o=kx(i,e,m,o,!1);let I=i.outputs,M;if(b&&I!==null&&(M=I[r])){let P=M.length;if(P)for(let F=0;F<P;F+=2){let H=M[F],Q=M[F+1],he=e[H][Q].subscribe(o),le=_.length;_.push(o,he),f&&f.push(r,i.index,le,-(le+1))}}}function Rx(t,e,n,i){let r=Ue(null);try{return pr(6,e,n),n(i)!==!1}catch(o){return yT(t,o),!1}finally{pr(7,e,n),Ue(r)}}function kx(t,e,n,i,r){return function o(a){if(a===Function)return i;let c=t.componentOffset>-1?zo(t.index,e):e;By(c);let u=Rx(e,n,i,a),f=o.__ngNextListenerFn__;for(;f;)u=Rx(e,n,f,a)&&u,f=f.__ngNextListenerFn__;return r&&u===!1&&a.preventDefault(),u}}function Be(t=1){return VO(t)}function i2(t,e){let n=null,i=HN(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?Zx(t,o,!0):WN(i,o))return r}return n}function qc(t){let e=$e()[Ei][ci];if(!e.projection){let n=t?t.length:1,i=e.projection=NN(n,null),r=i.slice(),o=e.child;for(;o!==null;){let a=t?i2(o,t):0;a!==null&&(r[a]?r[a].projectionNext=o:i[a]=o,r[a]=o),o=o.next}}}function Gi(t,e=0,n){let i=$e(),r=an(),o=Uc(r,Sn+t,16,null,n||null);o.projection===null&&(o.projection=e),vy(),(!i[kc]||gD())&&(o.flags&32)!==32&&BL(r,i,o)}function Gc(t,e,n,i){cV(t,e,n,i)}function ro(t,e,n){aV(t,e,n)}function Yn(t){let e=$e(),n=an(),i=yD();by(i+1);let r=Uy(n,i);if(t.dirty&&bO(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=dV(e,i);t.reset(o,iL),t.notifyOnChanges()}return!0}return!1}function Xn(){return sV($e(),yD())}function r2(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function lm(t){let e=PO();return hD(e,Sn+t)}function ue(t,e=""){let n=$e(),i=an(),r=t+Sn,o=i.firstCreatePass?Uc(i,r,1,e,null):i.data[r],a=o2(i,n,o,e,t);n[r]=a,Hp()&&Yp(i,n,a,o),Qs(o,!1)}var o2=(t,e,n,i,r)=>(qp(!0),EL(e[Gt],i));function Dt(t){return Mn("",t,""),Dt}function Mn(t,e,n){let i=$e(),r=EV(i,t,e,n);return r!==to&&pF(i,Uo(),r),Mn}var s2=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=tD(!1,i.type),o=r.length>0?$y([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ne({token:e,providedIn:"environment",factory:()=>new e(V(Kn))});let t=e;return t})();function Tt(t){$c("NgStandalone"),t.getStandaloneInjector=e=>e.get(s2).getOrCreateStandaloneInjector(t)}function a2(t,e){let n=t[e];return n===to?void 0:n}function c2(t,e,n,i,r,o){let a=e+n;return io(t,a,r)?vV(t,a+1,o?i.call(o,r):i(r)):a2(t,a+1)}function Wc(t,e){let n=an(),i,r=t+Sn;n.firstCreatePass?(i=l2(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=$s(i.type,!0)),a,c=Wn(ye);try{let u=yp(!1),f=o();return yp(u),r2(n,$e(),r,f),f}finally{Wn(c)}}function l2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Zc(t,e,n){let i=t+Sn,r=$e(),o=hD(r,i);return u2(r,i)?c2(r,RO(),e,o.transform,n,o):o.transform(n)}function u2(t,e){return t[ke].data[e].pure}function UT(t,e){return im(t,e)}var Yr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},$T=new Yr("17.3.10"),um=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var HT=new ce("");function Kc(t){return!!t&&typeof t.then=="function"}function Zy(t){return!!t&&typeof t.subscribe=="function"}var qT=new ce(""),GT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=X(qT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let a=o();if(Kc(a))i.push(a);else if(Zy(a)){let c=new Promise((u,f)=>{a.subscribe({complete:u,error:f})});i.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ky=new ce("");function d2(){TC(()=>{throw new Ee(600,!1)})}function h2(t){return t.isBoundToModule}function f2(t,e,n){try{let i=n();return Kc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var ea=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=X(VD),this.afterRenderEffectManager=X(rm),this.externalTestViews=new Set,this.beforeRender=new Ae,this.afterTick=new Ae,this.componentTypes=[],this.components=[],this.isStable=X(om).hasPendingTasks.pipe(_e(i=>!i)),this._injector=X(Kn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof xp;if(!this._injector.get(GT).done){let I=!o&&Yx(i),M=!1;throw new Ee(405,M)}let c;o?c=i:c=this._injector.get($o).resolveComponentFactory(i),this.componentTypes.push(c.componentType);let u=h2(c)?void 0:this._injector.get(jo),f=r||c.selector,m=c.create(fn.NULL,[],f,u),_=m.location.nativeElement,b=m.injector.get(HT,null);return b?.registerApplication(_),m.onDestroy(()=>{this.detachView(m.hostView),dv(this.components,m),b?.unregisterApplication(_)}),this._loadComponent(m),m}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new Ee(101,!1);let r=Ue(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ue(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===ET)throw new Ee(103,!1);if(i){let a=r===0;this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)p2(c,a,u)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>ty(a))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>ty(a))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;dv(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(Ky,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>dv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Ee(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function p2(t,e,n){!e&&!ty(t)||m2(t,n,e)}function ty(t){return gy(t)}function m2(t,e,n){let i;n?(i=0,t[Ce]|=1024):t[Ce]&64?i=0:i=1,CT(t,e,i)}var ny=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Qy=(()=>{let e=class e{compileModuleSync(i){return new Hv(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=Xx(i),a=ZD(o.declarations).reduce((c,u)=>{let f=Hs(u);return f&&c.push(new cd(f)),c},[]);return new ny(r,a)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var g2=(()=>{let e=class e{constructor(){this.zone=X(ve),this.applicationRef=X(ea)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _2(t){return[{provide:ve,useFactory:t},{provide:Rc,multi:!0,useFactory:()=>{let e=X(g2,{optional:!0});return()=>e.initialize()}},{provide:Rc,multi:!0,useFactory:()=>{let e=X(w2);return()=>{e.initialize()}}},{provide:VD,useFactory:v2}]}function v2(){let t=X(ve),e=X(vr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function y2(t){let e=_2(()=>new ve(b2(t)));return Bp([[],e])}function b2(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var w2=(()=>{let e=class e{constructor(){this.subscription=new Ct,this.initialized=!1,this.zone=X(ve),this.pendingTasks=X(om)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function I2(){return typeof $localize<"u"&&$localize.locale||Np}var yd=new ce("",{providedIn:"root",factory:()=>X(yd,ze.Optional|ze.SkipSelf)||I2()});var WT=new ce("");var dp=null;function E2(t=[],e){return fn.create({name:e,providers:[{provide:jp,useValue:"platform"},{provide:WT,useValue:new Set([()=>dp=null])},...t]})}function C2(t=[]){if(dp)return dp;let e=E2(t);return dp=e,d2(),x2(e),e}function x2(t){t.get(xy,null)?.forEach(n=>n())}function Yy(){return!1}var Wi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=D2;let t=e;return t})();function D2(t){return T2(Qn(),$e(),(t&16)===16)}function T2(t,e,n){if(Up(t)&&!n){let i=zo(t.index,e);return new Zs(i,i)}else if(t.type&47){let i=e[Ei];return new Zs(i,e)}return null}function ZT(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=C2(i),o=[y2(),...n||[]],c=new Pp({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(ve);return u.run(()=>{c.resolveInjectorInitializers();let f=c.get(vr,null),m;u.runOutsideAngular(()=>{m=u.onError.subscribe({next:I=>{f.handleError(I)}})});let _=()=>c.destroy(),b=r.get(WT);return b.add(_),c.onDestroy(()=>{m.unsubscribe(),b.delete(_)}),f2(f,u,()=>{let I=c.get(GT);return I.runInitializers(),I.donePromise.then(()=>{let M=c.get(yd,Np);t2(M||Np);let P=c.get(ea);return e!==void 0&&P.bootstrap(e),P})})})}catch(e){return Promise.reject(e)}}function wr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function bd(t){let e=Ue(null);try{return t()}finally{Ue(e)}}var JT=null;function Qc(){return JT}function eS(t){JT??=t}var dm=class{};var qe=new ce(""),tS=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>X(P2),providedIn:"platform"});let t=e;return t})();var P2=(()=>{let e=class e extends tS{constructor(){super(),this._doc=X(qe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Qc().getBaseHref(this._doc)}onPopState(i){let r=Qc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Qc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function nS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function KT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function ta(t){return t&&t[0]!=="?"?"?"+t:t}var pm=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>X(iS),providedIn:"root"});let t=e;return t})(),R2=new ce(""),iS=(()=>{let e=class e extends pm{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??X(qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return nS(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+ta(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,a){let c=this.prepareExternalUrl(o+ta(a));this._platformLocation.pushState(i,r,c)}replaceState(i,r,o,a){let c=this.prepareExternalUrl(o+ta(a));this._platformLocation.replaceState(i,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(V(tS),V(R2,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var na=(()=>{let e=class e{constructor(i){this._subject=new tt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=O2(KT(QT(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+ta(r))}normalize(i){return e.stripTrailingSlash(N2(this._basePath,QT(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ta(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ta(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=ta,e.joinWithSlash=nS,e.stripTrailingSlash=KT,e.\u0275fac=function(r){return new(r||e)(V(pm))},e.\u0275prov=ne({token:e,factory:()=>k2(),providedIn:"root"});let t=e;return t})();function k2(){return new na(V(pm))}function N2(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function QT(t){return t.replace(/\/index.html$/,"")}function O2(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var rS=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(rS||{});var oo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function wd(t,e){let n=Gy(t),i=n[Hc.NumberSymbols][e];if(typeof i>"u"){if(e===oo.CurrencyDecimal)return n[Hc.NumberSymbols][oo.Decimal];if(e===oo.CurrencyGroup)return n[Hc.NumberSymbols][oo.Group]}return i}function L2(t,e){return Gy(t)[Hc.NumberFormats][e]}var F2=/^(\d+)?\.((\d+)(-(\d+))?)?$/,YT=22,hm=".",Id="0",V2=";",B2=",",Xy="#";function j2(t,e,n,i,r,o,a=!1){let c="",u=!1;if(!isFinite(t))c=wd(n,oo.Infinity);else{let f=H2(t);a&&(f=$2(f));let m=e.minInt,_=e.minFrac,b=e.maxFrac;if(o){let Q=o.match(F2);if(Q===null)throw new Error(`${o} is not a valid digit info`);let q=Q[1],oe=Q[3],he=Q[5];q!=null&&(m=Jy(q)),oe!=null&&(_=Jy(oe)),he!=null?b=Jy(he):oe!=null&&_>b&&(b=_)}q2(f,_,b);let I=f.digits,M=f.integerLen,P=f.exponent,F=[];for(u=I.every(Q=>!Q);M<m;M++)I.unshift(0);for(;M<0;M++)I.unshift(0);M>0?F=I.splice(M,I.length):(F=I,I=[0]);let H=[];for(I.length>=e.lgSize&&H.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)H.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&H.unshift(I.join("")),c=H.join(wd(n,i)),F.length&&(c+=wd(n,r)+F.join("")),P&&(c+=wd(n,oo.Exponential)+"+"+P)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function z2(t,e,n){let i=L2(e,rS.Decimal),r=U2(i,wd(e,oo.MinusSign));return j2(t,r,e,oo.Group,oo.Decimal,n)}function U2(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(V2),r=i[0],o=i[1],a=r.indexOf(hm)!==-1?r.split(hm):[r.substring(0,r.lastIndexOf(Id)+1),r.substring(r.lastIndexOf(Id)+1)],c=a[0],u=a[1]||"";n.posPre=c.substring(0,c.indexOf(Xy));for(let m=0;m<u.length;m++){let _=u.charAt(m);_===Id?n.minFrac=n.maxFrac=m+1:_===Xy?n.maxFrac=m+1:n.posSuf+=_}let f=c.split(B2);if(n.gSize=f[1]?f[1].length:0,n.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let m=r.length-n.posPre.length-n.posSuf.length,_=o.indexOf(Xy);n.negPre=o.substring(0,_).replace(/'/g,""),n.negSuf=o.slice(_+m).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function $2(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function H2(t){let e=Math.abs(t)+"",n=0,i,r,o,a,c;for((r=e.indexOf(hm))>-1&&(e=e.replace(hm,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Id;o++);if(o===(c=e.length))i=[0],r=1;else{for(c--;e.charAt(c)===Id;)c--;for(r-=o,i=[],a=0;o<=c;o++,a++)i[a]=Number(e.charAt(o))}return r>YT&&(i=i.splice(0,YT-1),n=r-1,r=1),{digits:i,exponent:n,integerLen:r}}function q2(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let i=t.digits,r=i.length-t.integerLen,o=Math.min(Math.max(e,r),n),a=o+t.integerLen,c=i[a];if(a>0){i.splice(Math.max(t.integerLen,a));for(let _=a;_<i.length;_++)i[_]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let _=1;_<a;_++)i[_]=0}if(c>=5)if(a-1<0){for(let _=0;_>a;_--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+t.integerLen,m=i.reduceRight(function(_,b,I,M){return b=b+_,M[I]=b<10?b:b-10,u&&(M[I]===0&&I>=f?M.pop():u=!1),b>=10?1:0},0);m&&(i.unshift(m),t.integerLen++)}function Jy(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function oS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var sS=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new eb,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){XT("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){XT("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ye(Di),ye(Ci))},e.\u0275dir=Mt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),eb=class{constructor(){this.$implicit=null,this.ngIf=null}};function XT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Bn(e)}'.`)}var G2=!0,tb=class{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},rb=(()=>{let e=class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(i){this._ngSwitch=i,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(i){this._defaultViews.push(i)}_matchCase(i){let r=G2?i===this._ngSwitch:i==this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(i){if(this._defaultViews.length>0&&i!==this._defaultUsed){this._defaultUsed=i;for(let r of this._defaultViews)r.enforceState(i)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});let t=e;return t})(),aS=(()=>{let e=class e{constructor(i,r,o){this.ngSwitch=o,o._addCase(),this._view=new tb(i,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};e.\u0275fac=function(r){return new(r||e)(ye(Di),ye(Ci),ye(rb,9))},e.\u0275dir=Mt({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});let t=e;return t})();function cS(t,e){return new Ee(2100,!1)}var nb=class{createSubscription(e,n){return bd(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){bd(()=>e.unsubscribe())}},ib=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},W2=new ib,Z2=new nb,lS=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(Kc(i))return W2;if(Zy(i))return Z2;throw cS(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(ye(Wi,16))},e.\u0275pipe=fd({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var uS=(()=>{let e=class e{constructor(i){this._locale=i}transform(i,r,o){if(!K2(i))return null;o||=this._locale;try{let a=Q2(i);return z2(a,o,r)}catch(a){throw cS(e,a.message)}}};e.\u0275fac=function(r){return new(r||e)(ye(yd,16))},e.\u0275pipe=fd({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();function K2(t){return!(t==null||t===""||t!==t)}function Q2(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var Ed=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})(),ob="browser",Y2="server";function dS(t){return t===ob}function ia(t){return t===Y2}var fm=class{};var lb=class extends dm{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ub=class t extends lb{static makeCurrent(){eS(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=X2();return n==null?null:J2(n)}resetBaseElement(){Cd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return oS(document.cookie,e)}},Cd=null;function X2(){return Cd=Cd||document.querySelector("base"),Cd?Cd.getAttribute("href"):null}function J2(t){return new URL(t,document.baseURI).pathname}var eB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),db=new ce(""),mS=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(a=>a.supports(i)),!r)throw new Ee(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(V(db),V(ve))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),mm=class{constructor(e){this._doc=e}},ab="ng-app-id",gS=(()=>{let e=class e{constructor(i,r,o,a={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ia(a),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${ab}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let a=o.get(i);return a.usage+=r,a.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,a=o?.get(r);if(a?.parentNode===i)return o.delete(r),a.removeAttribute(ab),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(ab,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),a=this.styleRef,c=a.get(r)?.elements;c?c.push(o):a.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(V(qe),V(Kp),V(md,8),V(jn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),cb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},fb=/%COMP%/g,_S="%COMP%",tB=`_nghost-${_S}`,nB=`_ngcontent-${_S}`,iB=!0,rB=new ce("",{providedIn:"root",factory:()=>iB});function oB(t){return nB.replace(fb,t)}function sB(t){return tB.replace(fb,t)}function vS(t,e){return e.map(n=>n.replace(fb,t))}var hS=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=u,this.ngZone=f,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=ia(u),this.defaultRenderer=new xd(i,c,f,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===gr.ShadowDom&&(r=Et(ee({},r),{encapsulation:gr.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof gm?o.applyToHost(i):o instanceof Dd&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,a=o.get(r.id);if(!a){let c=this.doc,u=this.ngZone,f=this.eventManager,m=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case gr.Emulated:a=new gm(f,m,r,this.appId,_,c,u,b);break;case gr.ShadowDom:return new hb(f,m,i,r,c,u,this.nonce,b);default:a=new Dd(f,m,r,_,c,u,b);break}o.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(V(mS),V(gS),V(Kp),V(rB),V(qe),V(jn),V(ve),V(md))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),xd=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(cb[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(fS(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(fS(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ee(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=cb[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=cb[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(Qr.DashCase|Qr.Important)?e.style.setProperty(n,i,r&Qr.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&Qr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Qc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function fS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var hb=class extends xd{constructor(e,n,i,r,o,a,c,u){super(e,o,a,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=vS(r.id,r.styles);for(let m of f){let _=document.createElement("style");c&&_.setAttribute("nonce",c),_.textContent=m,this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Dd=class extends xd{constructor(e,n,i,r,o,a,c,u){super(e,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=u?vS(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},gm=class extends Dd{constructor(e,n,i,r,o,a,c,u){let f=r+"-"+i.id;super(e,n,i,o,a,c,u,f),this.contentAttr=oB(f),this.hostAttr=sB(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},aB=(()=>{let e=class e extends mm{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(V(qe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),pS=["alt","control","meta","shift"],cB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},lB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},uB=(()=>{let e=class e extends mm{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let a=e.parseEventName(r),c=e.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qc().onAndCancel(i,a.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let a=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),pS.forEach(m=>{let _=r.indexOf(m);_>-1&&(r.splice(_,1),c+=m+".")}),c+=a,r.length!=0||a.length===0)return null;let f={};return f.domEventName=o,f.fullKey=c,f}static matchEventFullKeyCode(i,r){let o=cB[i.key]||i.key,a="";return r.indexOf("code.")>-1&&(o=i.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),pS.forEach(c=>{if(c!==o){let u=lB[c];u(i)&&(a+=c+".")}}),a+=o,a===r)}static eventCallback(i,r,o){return a=>{e.matchEventFullKeyCode(a,i)&&o.runGuarded(()=>r(a))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(V(qe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function yS(t,e){return ZT(ee({rootComponent:t},dB(e)))}function dB(t){return{appProviders:[...gB,...t?.providers??[]],platformProviders:mB}}function hB(){ub.makeCurrent()}function fB(){return new vr}function pB(){return HD(document),document}var mB=[{provide:jn,useValue:ob},{provide:xy,useValue:hB,multi:!0},{provide:qe,useFactory:pB,deps:[]}];var gB=[{provide:jp,useValue:"root"},{provide:vr,useFactory:fB,deps:[]},{provide:db,useClass:aB,multi:!0,deps:[qe,ve,jn]},{provide:db,useClass:uB,multi:!0,deps:[qe]},hS,gS,mS,{provide:ad,useExisting:hS},{provide:fm,useClass:eB,deps:[]},[]];var bS=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(V(qe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Le="primary",zd=Symbol("RouteTitle"),vb=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function tl(t){return new vb(t)}function vB(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],c=t[o];if(a.startsWith(":"))r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function yB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ir(t[n],e[n]))return!1;return!0}function Ir(t,e){let n=t?yb(t):void 0,i=e?yb(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!DS(t[r],e[r]))return!1;return!0}function yb(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function DS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function TS(t){return t.length>0?t[t.length-1]:null}function Wo(t){return Qf(t)?t:Kc(t)?dt(Promise.resolve(t)):pe(t)}var bB={exact:AS,subset:MS},SS={exact:wB,subset:IB,ignored:()=>!0};function wS(t,e,n){return bB[n.paths](t.root,e.root,n.matrixParams)&&SS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function wB(t,e){return Ir(t,e)}function AS(t,e,n){if(!oa(t.segments,e.segments)||!ym(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!AS(t.children[i],e.children[i],n))return!1;return!0}function IB(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>DS(t[n],e[n]))}function MS(t,e,n){return PS(t,e,e.segments,n)}function PS(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!oa(r,n)||e.hasChildren()||!ym(r,n,i))}else if(t.segments.length===n.length){if(!oa(t.segments,n)||!ym(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!MS(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!oa(t.segments,r)||!ym(t.segments,r,i)||!t.children[Le]?!1:PS(t.children[Le],e,o,i)}}function ym(t,e,n){return e.every((i,r)=>SS[n](t[r].parameters,i.parameters))}var qo=class{constructor(e=new ct([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=tl(this.queryParams),this._queryParamMap}toString(){return xB.serialize(this)}},ct=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bm(this)}},ra=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=tl(this.parameters),this._parameterMap}toString(){return kS(this)}};function EB(t,e){return oa(t,e)&&t.every((n,i)=>Ir(n.parameters,e[i].parameters))}function oa(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function CB(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Le&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Le&&(n=n.concat(e(r,i)))}),n}var qb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>new Im,providedIn:"root"});let t=e;return t})(),Im=class{parse(e){let n=new wb(e);return new qo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Td(e.root,!0)}`,i=SB(e.queryParams),r=typeof e.fragment=="string"?`#${DB(e.fragment)}`:"";return`${n}${i}${r}`}},xB=new Im;function bm(t){return t.segments.map(e=>kS(e)).join("/")}function Td(t,e){if(!t.hasChildren())return bm(t);if(e){let n=t.children[Le]?Td(t.children[Le],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Le&&i.push(`${r}:${Td(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=CB(t,(i,r)=>r===Le?[Td(t.children[Le],!1)]:[`${r}:${Td(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Le]!=null?`${bm(t)}/${n[0]}`:`${bm(t)}/(${n.join("//")})`}}function RS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _m(t){return RS(t).replace(/%3B/gi,";")}function DB(t){return encodeURI(t)}function bb(t){return RS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wm(t){return decodeURIComponent(t)}function IS(t){return wm(t.replace(/\+/g,"%20"))}function kS(t){return`${bb(t.path)}${TB(t.parameters)}`}function TB(t){return Object.entries(t).map(([e,n])=>`;${bb(e)}=${bb(n)}`).join("")}function SB(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${_m(n)}=${_m(r)}`).join("&"):`${_m(n)}=${_m(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var AB=/^[^\/()?;#]+/;function pb(t){let e=t.match(AB);return e?e[0]:""}var MB=/^[^\/()?;=#]+/;function PB(t){let e=t.match(MB);return e?e[0]:""}var RB=/^[^=?&#]+/;function kB(t){let e=t.match(RB);return e?e[0]:""}var NB=/^[^&#]+/;function OB(t){let e=t.match(NB);return e?e[0]:""}var wb=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ct([],{}):new ct([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Le]=new ct(e,n)),i}parseSegment(){let e=pb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ee(4009,!1);return this.capture(e),new ra(wm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=PB(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=pb(this.remaining);r&&(i=r,this.capture(i))}e[wm(n)]=wm(i)}parseQueryParam(e){let n=kB(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let a=OB(this.remaining);a&&(i=a,this.capture(i))}let r=IS(n),o=IS(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=pb(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ee(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Le);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Le]:new ct([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ee(4011,!1)}};function NS(t){return t.segments.length>0?new ct([],{[Le]:t}):t}function OS(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=OS(r);if(i===Le&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new ct(t.segments,e);return LB(n)}function LB(t){if(t.numberOfChildren===1&&t.children[Le]){let e=t.children[Le];return new ct(t.segments.concat(e.segments),e.children)}return t}function nl(t){return t instanceof qo}function FB(t,e,n=null,i=null){let r=LS(t);return FS(r,e,n,i)}function LS(t){let e;function n(o){let a={};for(let u of o.children){let f=n(u);a[u.outlet]=f}let c=new ct(o.url,a);return o===t&&(e=c),c}let i=n(t.root),r=NS(i);return e??r}function FS(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return mb(r,r,r,n,i);let o=VB(e);if(o.toRoot())return mb(r,r,new ct([],{}),n,i);let a=BB(o,r,t),c=a.processChildren?Md(a.segmentGroup,a.index,o.commands):BS(a.segmentGroup,a.index,o.commands);return mb(r,a.segmentGroup,c,n,i)}function Em(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function kd(t){return typeof t=="object"&&t!=null&&t.outlets}function mb(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;t===e?a=n:a=VS(t,e,n);let c=NS(OS(a));return new qo(c,o,r)}function VS(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=VS(o,e,n)}),new ct(t.segments,i)}var Cm=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Em(i[0]))throw new Ee(4003,!1);let r=i.find(kd);if(r&&r!==TS(i))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function VB(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Cm(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,f])=>{c[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new Cm(n,e,i)}var Jc=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function BB(t,e,n){if(t.isAbsolute)return new Jc(e,!0,0);if(!n)return new Jc(e,!1,NaN);if(n.parent===null)return new Jc(n,!0,0);let i=Em(t.commands[0])?0:1,r=n.segments.length-1+i;return jB(n,r,t.numberOfDoubleDots)}function jB(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Ee(4005,!1);r=i.segments.length}return new Jc(i,!1,r-o)}function zB(t){return kd(t[0])?t[0].outlets:{[Le]:t}}function BS(t,e,n){if(t??=new ct([],{}),t.segments.length===0&&t.hasChildren())return Md(t,e,n);let i=UB(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new ct(t.segments.slice(0,i.pathIndex),{});return o.children[Le]=new ct(t.segments.slice(i.pathIndex),t.children),Md(o,0,r)}else return i.match&&r.length===0?new ct(t.segments,{}):i.match&&!t.hasChildren()?Ib(t,e,n):i.match?Md(t,0,r):Ib(t,e,n)}function Md(t,e,n){if(n.length===0)return new ct(t.segments,{});{let i=zB(n),r={};if(Object.keys(i).some(o=>o!==Le)&&t.children[Le]&&t.numberOfChildren===1&&t.children[Le].segments.length===0){let o=Md(t.children[Le],e,n);return new ct(t.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=BS(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new ct(t.segments,r)}}function UB(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let a=t.segments[r],c=n[i];if(kd(c))break;let u=`${c}`,f=i<n.length-1?n[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!CS(u,f,a))return o;i+=2}else{if(!CS(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Ib(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(kd(o)){let u=$B(o.outlets);return new ct(i,u)}if(r===0&&Em(n[0])){let u=t.segments[e];i.push(new ra(u.path,ES(n[0]))),r++;continue}let a=kd(o)?o.outlets[Le]:`${o}`,c=r<n.length-1?n[r+1]:null;a&&c&&Em(c)?(i.push(new ra(a,ES(c))),r+=2):(i.push(new ra(a,{})),r++)}return new ct(i,{})}function $B(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=Ib(new ct([],{}),0,i))}),e}function ES(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function CS(t,e,n){return t==n.path&&Ir(e,n.parameters)}var Pd="imperative",In=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(In||{}),Ti=class{constructor(e,n){this.id=e,this.url=n}},Nd=class extends Ti{constructor(e,n,i="imperative",r=null){super(e,n),this.type=In.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sa=class extends Ti{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=In.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},di=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(di||{}),Eb=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Eb||{}),Go=class extends Ti{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=In.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},aa=class extends Ti{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=In.NavigationSkipped}},Od=class extends Ti{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=In.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},xm=class extends Ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cb=class extends Ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xb=class extends Ti{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=In.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Db=class extends Ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tb=class extends Ti{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sb=class{constructor(e){this.route=e,this.type=In.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ab=class{constructor(e){this.route=e,this.type=In.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mb=class{constructor(e){this.snapshot=e,this.type=In.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pb=class{constructor(e){this.snapshot=e,this.type=In.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rb=class{constructor(e){this.snapshot=e,this.type=In.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kb=class{constructor(e){this.snapshot=e,this.type=In.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ld=class{},Fd=class{constructor(e){this.url=e}};var Nb=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Pm,this.attachRef=null}},Pm=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Nb,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ob(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Ob(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Lb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Lb(e,this._root).map(n=>n.value)}};function Ob(t,e){if(t===e.value)return e;for(let n of e.children){let i=Ob(t,n);if(i)return i}return null}function Lb(t,e){if(t===e.value)return[e];for(let n of e.children){let i=Lb(t,n);if(i.length)return i.unshift(e),i}return[]}var ui=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Xc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Tm=class extends Dm{constructor(e,n){super(e),this.snapshot=n,Wb(this,e)}toString(){return this.snapshot.toString()}};function jS(t){let e=HB(t),n=new sn([new ra("",{})]),i=new sn({}),r=new sn({}),o=new sn({}),a=new sn(""),c=new il(n,i,o,a,r,Le,t,e.root);return c.snapshot=e.root,new Tm(new ui(c,[]),e)}function HB(t){let e={},n={},i={},r="",o=new Vd([],e,i,r,n,Le,t,null,{});return new Sm("",new ui(o,[]))}var il=class{constructor(e,n,i,r,o,a,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(_e(f=>f[zd]))??pe(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(_e(e=>tl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(_e(e=>tl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Gb(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:ee(ee({},e.params),t.params),data:ee(ee({},e.data),t.data),resolve:ee(ee(ee(ee({},t.data),e.data),r?.data),t._resolvedData)}:i={params:ee({},t.params),data:ee({},t.data),resolve:ee(ee({},t.data),t._resolvedData??{})},r&&US(r)&&(i.resolve[zd]=r.title),i}var Vd=class{get title(){return this.data?.[zd]}constructor(e,n,i,r,o,a,c,u,f){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=tl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=tl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Sm=class extends Dm{constructor(e,n){super(n),this.url=e,Wb(this,n)}toString(){return zS(this._root)}};function Wb(t,e){e.value._routerState=t,e.children.forEach(n=>Wb(t,n))}function zS(t){let e=t.children.length>0?` { ${t.children.map(zS).join(", ")} } `:"";return`${t.value}${e}`}function gb(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ir(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ir(e.params,n.params)||t.paramsSubject.next(n.params),yB(e.url,n.url)||t.urlSubject.next(n.url),Ir(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Fb(t,e){let n=Ir(t.params,e.params)&&EB(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Fb(t.parent,e.parent))}function US(t){return typeof t.title=="string"||t.title===null}var qB=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Le,this.activateEvents=new tt,this.deactivateEvents=new tt,this.attachEvents=new tt,this.detachEvents=new tt,this.parentContexts=X(Pm),this.location=X(Di),this.changeDetector=X(Wi),this.environmentInjector=X(Kn),this.inputBinder=X(Zb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Ee(4013,!1);this._activatedRoute=i;let o=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,f=new Vb(i,u,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[eo]});let t=e;return t})(),Vb=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===il?this.route:e===Pm?this.childContexts:this.parent.get(e,n)}},Zb=new ce("");function GB(t,e,n){let i=Bd(t,e._root,n?n._root:void 0);return new Tm(i,e)}function Bd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=WB(t,e,n);return new ui(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>Bd(t,c)),a}}let i=ZB(e.value),r=e.children.map(o=>Bd(t,o));return new ui(i,r)}}function WB(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Bd(t,i,r);return Bd(t,i)})}function ZB(t){return new il(new sn(t.url),new sn(t.params),new sn(t.queryParams),new sn(t.fragment),new sn(t.data),t.outlet,t.component,t)}var $S="ngNavigationCancelingError";function HS(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=nl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=qS(!1,di.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function qS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[$S]=!0,n.cancellationCode=e,n}function KB(t){return GS(t)&&nl(t.url)}function GS(t){return!!t&&t[$S]}var QB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ft({type:e,selectors:[["ng-component"]],standalone:!0,features:[Tt],decls:1,vars:0,template:function(r,o){r&1&&be(0,"router-outlet")},dependencies:[qB],encapsulation:2});let t=e;return t})();function YB(t,e){return t.providers&&!t._injector&&(t._injector=$y(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Kb(t){let e=t.children&&t.children.map(Kb),n=e?Et(ee({},t),{children:e}):ee({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Le&&(n.component=QB),n}function Er(t){return t.outlet||Le}function XB(t,e){let n=t.filter(i=>Er(i)===e);return n.push(...t.filter(i=>Er(i)!==e)),n}function Ud(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var JB=(t,e,n,i)=>_e(r=>(new Bb(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Bb=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),gb(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Xc(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Xc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Xc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Xc(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new kb(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Pb(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(gb(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),gb(c.route.value),this.activateChildRoutes(e,null,a.children)}else{let c=Ud(r.snapshot);a.attachRef=null,a.route=r,a.injector=c,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}},Am=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},el=class{constructor(e,n){this.component=e,this.route=n}};function ej(t,e,n){let i=t._root,r=e?e._root:null;return Sd(i,r,n,[i.value])}function tj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ol(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!Fx(t)?t:e.get(t):i}function Sd(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Xc(e);return t.children.forEach(a=>{nj(a,o[a.value.outlet],n,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>Rd(c,n.getContext(a),r)),r}function nj(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=ij(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new Am(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Sd(t,e,c?c.children:null,i,r):Sd(t,e,n,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new el(c.outlet.component,a))}else a&&Rd(e,c,r),r.canActivateChecks.push(new Am(i)),o.component?Sd(t,null,c?c.children:null,i,r):Sd(t,null,n,i,r);return r}function ij(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!oa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!oa(t.url,e.url)||!Ir(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fb(t,e)||!Ir(t.queryParams,e.queryParams);case"paramsChange":default:return!Fb(t,e)}}function Rd(t,e,n){let i=Xc(t),r=t.value;Object.entries(i).forEach(([o,a])=>{r.component?e?Rd(a,e.children.getContext(o),n):Rd(a,null,n):Rd(a,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new el(e.outlet.component,r)):n.canDeactivateChecks.push(new el(null,r)):n.canDeactivateChecks.push(new el(null,r))}function $d(t){return typeof t=="function"}function rj(t){return typeof t=="boolean"}function oj(t){return t&&$d(t.canLoad)}function sj(t){return t&&$d(t.canActivate)}function aj(t){return t&&$d(t.canActivateChild)}function cj(t){return t&&$d(t.canDeactivate)}function lj(t){return t&&$d(t.canMatch)}function WS(t){return t instanceof Wr||t?.name==="EmptyError"}var vm=Symbol("INITIAL_VALUE");function rl(){return xt(t=>wc(t.map(e=>e.pipe(yi(1),fr(vm)))).pipe(_e(e=>{for(let n of e)if(n!==!0){if(n===vm)return vm;if(n===!1||n instanceof qo)return n}return!0}),Bt(e=>e!==vm),yi(1)))}function uj(t,e){return qt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?pe(Et(ee({},n),{guardsResult:!0})):dj(a,i,r,t).pipe(qt(c=>c&&rj(c)?hj(i,o,t,e):pe(c)),_e(c=>Et(ee({},n),{guardsResult:c})))})}function dj(t,e,n,i){return dt(t).pipe(qt(r=>_j(r.component,r.route,n,e,i)),bi(r=>r!==!0,!0))}function hj(t,e,n,i){return dt(e).pipe(Ic(r=>ko(pj(r.route.parent,i),fj(r.route,i),gj(t,r.path,n),mj(t,r.route,n))),bi(r=>r!==!0,!0))}function fj(t,e){return t!==null&&e&&e(new Rb(t)),pe(!0)}function pj(t,e){return t!==null&&e&&e(new Mb(t)),pe(!0)}function mj(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return pe(!0);let r=i.map(o=>Xf(()=>{let a=Ud(e)??n,c=ol(o,a),u=sj(c)?c.canActivate(e,t):Xr(a,()=>c(e,t));return Wo(u).pipe(bi())}));return pe(r).pipe(rl())}function gj(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>tj(a)).filter(a=>a!==null).map(a=>Xf(()=>{let c=a.guards.map(u=>{let f=Ud(a.node)??n,m=ol(u,f),_=aj(m)?m.canActivateChild(i,t):Xr(f,()=>m(i,t));return Wo(_).pipe(bi())});return pe(c).pipe(rl())}));return pe(o).pipe(rl())}function _j(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return pe(!0);let a=o.map(c=>{let u=Ud(e)??r,f=ol(c,u),m=cj(f)?f.canDeactivate(t,e,n,i):Xr(u,()=>f(t,e,n,i));return Wo(m).pipe(bi())});return pe(a).pipe(rl())}function vj(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return pe(!0);let o=r.map(a=>{let c=ol(a,t),u=oj(c)?c.canLoad(e,n):Xr(t,()=>c(e,n));return Wo(u)});return pe(o).pipe(rl(),ZS(i))}function ZS(t){return z_(Xt(e=>{if(nl(e))throw HS(t,e)}),_e(e=>e===!0))}function yj(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return pe(!0);let o=r.map(a=>{let c=ol(a,t),u=lj(c)?c.canMatch(e,n):Xr(t,()=>c(e,n));return Wo(u)});return pe(o).pipe(rl(),ZS(i))}var jd=class{constructor(e){this.segmentGroup=e||null}},Mm=class extends Error{constructor(e){super(),this.urlTree=e}};function Yc(t){return bc(new jd(t))}function bj(t){return bc(new Ee(4e3,!1))}function wj(t){return bc(qS(!1,di.GuardRejected))}var jb=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return pe(i);if(r.numberOfChildren>1||!r.children[Le])return bj(e.redirectTo);r=r.children[Le]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Mm(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new qo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);i[r]=n[c]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),a={};return Object.entries(n.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,i,r)}),new ct(o,a)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new Ee(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},zb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ij(t,e,n,i,r){let o=Qb(t,e,n);return o.matched?(i=YB(e,i),yj(i,e,n,r).pipe(_e(a=>a===!0?o:ee({},zb)))):pe(o)}function Qb(t,e,n){if(e.path==="**")return Ej(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ee({},zb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||vB)(n,t,e);if(!r)return ee({},zb);let o={};Object.entries(r.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let a=r.consumed.length>0?ee(ee({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function Ej(t){return{matched:!0,parameters:t.length>0?TS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function xS(t,e,n,i){return n.length>0&&Dj(t,n,i)?{segmentGroup:new ct(e,xj(i,new ct(n,t.children))),slicedSegments:[]}:n.length===0&&Tj(t,n,i)?{segmentGroup:new ct(t.segments,Cj(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new ct(t.segments,t.children),slicedSegments:n}}function Cj(t,e,n,i){let r={};for(let o of n)if(Rm(t,e,o)&&!i[Er(o)]){let a=new ct([],{});r[Er(o)]=a}return ee(ee({},i),r)}function xj(t,e){let n={};n[Le]=e;for(let i of t)if(i.path===""&&Er(i)!==Le){let r=new ct([],{});n[Er(i)]=r}return n}function Dj(t,e,n){return n.some(i=>Rm(t,e,i)&&Er(i)!==Le)}function Tj(t,e,n){return n.some(i=>Rm(t,e,i))}function Rm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Sj(t,e,n,i){return Er(t)!==i&&(i===Le||!Rm(e,n,t))?!1:Qb(e,t,n).matched}function Aj(t,e,n){return e.length===0&&!t.children[n]}var Ub=class{};function Mj(t,e,n,i,r,o,a="emptyOnly"){return new $b(t,e,n,i,r,a,o).recognize()}var Pj=31,$b=class{constructor(e,n,i,r,o,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new jb(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=xS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(_e(n=>{let i=new Vd([],Object.freeze({}),Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,{},Le,this.rootComponentType,null,{}),r=new ui(i,n),o=new Sm("",r),a=FB(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Le).pipe(No(i=>{if(i instanceof Mm)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof jd?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Gb(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(_e(o=>o instanceof ui?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return dt(r).pipe(Ic(o=>{let a=i.children[o],c=XB(n,o);return this.processSegmentGroup(e,c,a,o)}),Vs((o,a)=>(o.push(...a),o)),Oo(null),K_(),qt(o=>{if(o===null)return Yc(i);let a=KS(o);return Rj(a),pe(a)}))}processSegment(e,n,i,r,o,a){return dt(n).pipe(Ic(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,o,a).pipe(No(u=>{if(u instanceof jd)return pe(null);throw u}))),bi(c=>!!c),No(c=>{if(WS(c))return Aj(i,r,o)?pe(new Ub):Yc(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,o,a,c){return Sj(i,r,o,a)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,a):Yc(r):Yc(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,a){let{matched:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:m}=Qb(n,r,o);if(!c)return Yc(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Pj&&(this.allowRedirects=!1));let _=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,f);return this.applyRedirects.lineralizeSegments(r,_).pipe(qt(b=>this.processSegment(e,i,n,b.concat(m),a,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let a=Ij(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(xt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(xt(({routes:u})=>{let f=i._loadedInjector??e,{consumedSegments:m,remainingSegments:_,parameters:b}=c,I=new Vd(m,b,Object.freeze(ee({},this.urlTree.queryParams)),this.urlTree.fragment,Nj(i),Er(i),i.component??i._loadedComponent??null,i,Oj(i)),{segmentGroup:M,slicedSegments:P}=xS(n,m,_,u);if(P.length===0&&M.hasChildren())return this.processChildren(f,u,M).pipe(_e(H=>H===null?null:new ui(I,H)));if(u.length===0&&P.length===0)return pe(new ui(I,[]));let F=Er(i)===o;return this.processSegment(f,u,M,P,F?Le:o,!0).pipe(_e(H=>new ui(I,H instanceof ui?[H]:[])))}))):Yc(n)))}getChildConfig(e,n,i){return n.children?pe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?pe({routes:n._loadedRoutes,injector:n._loadedInjector}):vj(e,n,i,this.urlSerializer).pipe(qt(r=>r?this.configLoader.loadChildren(e,n).pipe(Xt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):wj(n))):pe({routes:[],injector:e})}};function Rj(t){t.sort((e,n)=>e.value.outlet===Le?-1:n.value.outlet===Le?1:e.value.outlet.localeCompare(n.value.outlet))}function kj(t){let e=t.value.routeConfig;return e&&e.path===""}function KS(t){let e=[],n=new Set;for(let i of t){if(!kj(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=KS(i.children);e.push(new ui(i.value,r))}return e.filter(i=>!n.has(i))}function Nj(t){return t.data||{}}function Oj(t){return t.resolve||{}}function Lj(t,e,n,i,r,o){return qt(a=>Mj(t,e,n,i,a.extractedUrl,r,o).pipe(_e(({state:c,tree:u})=>Et(ee({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function Fj(t,e){return qt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return pe(n);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of QS(u))a.add(f);let c=0;return dt(a).pipe(Ic(u=>o.has(u)?Vj(u,i,t,e):(u.data=Gb(u,u.parent,t).resolve,pe(void 0))),Xt(()=>c++),Cc(1),qt(u=>c===a.size?pe(n):Vn))})}function QS(t){let e=t.children.map(n=>QS(n)).flat();return[t,...e]}function Vj(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!US(r)&&(o[zd]=r.title),Bj(o,t,e,i).pipe(_e(a=>(t._resolvedData=a,t.data=Gb(t,t.parent,n).resolve,null)))}function Bj(t,e,n,i){let r=yb(t);if(r.length===0)return pe({});let o={};return dt(r).pipe(qt(a=>jj(t[a],e,n,i).pipe(bi(),Xt(c=>{o[a]=c}))),Cc(1),Z_(o),No(a=>WS(a)?Vn:bc(a)))}function jj(t,e,n,i){let r=Ud(e)??i,o=ol(t,r),a=o.resolve?o.resolve(e,n):Xr(r,()=>o(e,n));return Wo(a)}function _b(t){return xt(e=>{let n=t(e);return n?dt(n).pipe(_e(()=>e)):pe(e)})}var YS=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(a=>a.outlet===Le);return r}getResolvedTitleForRoute(i){return i.data[zd]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>X(zj),providedIn:"root"});let t=e;return t})(),zj=(()=>{let e=class e extends YS{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(V(bS))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Yb=new ce("",{providedIn:"root",factory:()=>({})}),Xb=new ce(""),Uj=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=X(Qy)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return pe(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Wo(i.loadComponent()).pipe(_e(XS),Xt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Gu(()=>{this.componentLoaders.delete(i)})),o=new mc(r,()=>new Ae).pipe(pc());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return pe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=$j(r,this.compiler,i,this.onLoadEndListener).pipe(Gu(()=>{this.childrenLoaders.delete(r)})),c=new mc(a,()=>new Ae).pipe(pc());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $j(t,e,n,i){return Wo(t.loadChildren()).pipe(_e(XS),qt(r=>r instanceof ld||Array.isArray(r)?pe(r):dt(e.compileModuleAsync(r))),_e(r=>{i&&i(t);let o,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(o=r.create(n).injector,a=o.get(Xb,[],{optional:!0,self:!0}).flat()),{routes:a.map(Kb),injector:o}}))}function Hj(t){return t&&typeof t=="object"&&"default"in t}function XS(t){return Hj(t)?t.default:t}var Jb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>X(qj),providedIn:"root"});let t=e;return t})(),qj=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gj=new ce("");var Wj=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ae,this.transitionAbortSubject=new Ae,this.configLoader=X(Uj),this.environmentInjector=X(Kn),this.urlSerializer=X(qb),this.rootContexts=X(Pm),this.location=X(na),this.inputBindingEnabled=X(Zb,{optional:!0})!==null,this.titleStrategy=X(YS),this.options=X(Yb,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=X(Jb),this.createViewTransition=X(Gj,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>pe(void 0),this.rootComponentType=null;let i=o=>this.events.next(new Sb(o)),r=o=>this.events.next(new Ab(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Et(ee(ee({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new sn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pd,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Bt(a=>a.id!==0),_e(a=>Et(ee({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),xt(a=>{let c=!1,u=!1;return pe(a).pipe(xt(f=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",di.SupersededByNewNavigation),Vn;this.currentTransition=a,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Et(ee({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),_=f.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!m&&_!=="reload"){let b="";return this.events.next(new aa(f.id,this.urlSerializer.serialize(f.rawUrl),b,Eb.IgnoredSameUrlNavigation)),f.resolve(null),Vn}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return pe(f).pipe(xt(b=>{let I=this.transitions?.getValue();return this.events.next(new Nd(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),I!==this.transitions?.getValue()?Vn:Promise.resolve(b)}),Lj(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Xt(b=>{a.targetSnapshot=b.targetSnapshot,a.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=Et(ee({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let I=new xm(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:b,extractedUrl:I,source:M,restoredState:P,extras:F}=f,H=new Nd(b,this.urlSerializer.serialize(I),M,P);this.events.next(H);let Q=jS(this.rootComponentType).snapshot;return this.currentTransition=a=Et(ee({},f),{targetSnapshot:Q,urlAfterRedirects:I,extras:Et(ee({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,pe(a)}else{let b="";return this.events.next(new aa(f.id,this.urlSerializer.serialize(f.extractedUrl),b,Eb.IgnoredByUrlHandlingStrategy)),f.resolve(null),Vn}}),Xt(f=>{let m=new Cb(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),_e(f=>(this.currentTransition=a=Et(ee({},f),{guards:ej(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),a)),uj(this.environmentInjector,f=>this.events.next(f)),Xt(f=>{if(a.guardsResult=f.guardsResult,nl(f.guardsResult))throw HS(this.urlSerializer,f.guardsResult);let m=new xb(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(m)}),Bt(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",di.GuardRejected),!1)),_b(f=>{if(f.guards.canActivateChecks.length)return pe(f).pipe(Xt(m=>{let _=new Db(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}),xt(m=>{let _=!1;return pe(m).pipe(Fj(this.paramsInheritanceStrategy,this.environmentInjector),Xt({next:()=>_=!0,complete:()=>{_||this.cancelNavigationTransition(m,"",di.NoDataFromResolver)}}))}),Xt(m=>{let _=new Tb(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(_)}))}),_b(f=>{let m=_=>{let b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe(Xt(I=>{_.component=I}),_e(()=>{})));for(let I of _.children)b.push(...m(I));return b};return wc(m(f.targetSnapshot.root)).pipe(Oo(null),yi(1))}),_b(()=>this.afterPreactivation()),xt(()=>{let{currentSnapshot:f,targetSnapshot:m}=a,_=this.createViewTransition?.(this.environmentInjector,f.root,m.root);return _?dt(_).pipe(_e(()=>a)):pe(a)}),_e(f=>{let m=GB(i.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=a=Et(ee({},f),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,a}),Xt(()=>{this.events.next(new Ld)}),JB(this.rootContexts,i.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),yi(1),Xt({next:f=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sa(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{c=!0}}),wi(this.transitionAbortSubject.pipe(Xt(f=>{throw f}))),Gu(()=>{!c&&!u&&this.cancelNavigationTransition(a,"",di.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),No(f=>{if(u=!0,GS(f))this.events.next(new Go(a.id,this.urlSerializer.serialize(a.extractedUrl),f.message,f.cancellationCode)),KB(f)?this.events.next(new Fd(f.url)):a.resolve(!1);else{this.events.next(new Od(a.id,this.urlSerializer.serialize(a.extractedUrl),f,a.targetSnapshot??void 0));try{a.resolve(i.errorHandler(f))}catch(m){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(m)}}return Vn}))}))}cancelNavigationTransition(i,r,o){let a=new Go(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(a),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zj(t){return t!==Pd}var Kj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>X(Qj),providedIn:"root"});let t=e;return t})(),Hb=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Qj=(()=>{let e=class e extends Hb{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Wp(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),JS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>X(Yj),providedIn:"root"});let t=e;return t})(),Yj=(()=>{let e=class e extends JS{constructor(){super(...arguments),this.location=X(na),this.urlSerializer=X(qb),this.options=X(Yb,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=X(Jb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new qo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=jS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Nd)this.stateMemento=this.createStateMemento();else if(i instanceof aa)this.rawUrlTree=r.initialUrl;else if(i instanceof xm){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof Ld?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Go&&(i.code===di.GuardRejected||i.code===di.NoDataFromResolver)?this.restoreHistory(r):i instanceof Od?this.restoreHistory(r,!0):i instanceof sa&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let a=this.browserPageId,c=ee(ee({},r.extras.state),this.generateNgRouterState(r.id,a));this.location.replaceState(o,"",c)}else{let a=ee(ee({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===i.finalUrl&&a===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Wp(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ad=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ad||{});function Xj(t,e){t.events.pipe(Bt(n=>n instanceof sa||n instanceof Go||n instanceof Od||n instanceof aa),_e(n=>n instanceof sa||n instanceof aa?Ad.COMPLETE:(n instanceof Go?n.code===di.Redirect||n.code===di.SupersededByNewNavigation:!1)?Ad.REDIRECTING:Ad.FAILED),Bt(n=>n!==Ad.REDIRECTING),yi(1)).subscribe(()=>{e()})}function Jj(t){throw t}var ez={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},km=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=X(um),this.stateManager=X(JS),this.options=X(Yb,{optional:!0})||{},this.pendingTasks=X(om),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=X(Wj),this.urlSerializer=X(qb),this.location=X(na),this.urlHandlingStrategy=X(Jb),this._events=new Ae,this.errorHandler=this.options.errorHandler||Jj,this.navigated=!1,this.routeReuseStrategy=X(Kj),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=X(Xb,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!X(Zb,{optional:!0}),this.eventsSubscription=new Ct,this.isNgZoneEnabled=X(ve)instanceof ve&&ve.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof Go&&r.code!==di.Redirect&&r.code!==di.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sa)this.navigated=!0;else if(r instanceof Fd){let c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Zj(o.source)};this.scheduleNavigation(c,Pd,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}iz(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let a={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let f=ee({},o);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(a.state=f)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Kb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:a,fragment:c,queryParamsHandling:u,preserveFragment:f}=r,m=f?this.currentUrlTree.fragment:c,_=null;switch(u){case"merge":_=ee(ee({},this.currentUrlTree.queryParams),a);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=a||null}_!==null&&(_=this.removeEmptyProps(_));let b;try{let I=o?o.snapshot:this.routerState.snapshot.root;b=LS(I)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),b=this.currentUrlTree.root}return FS(b,i,_,m??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=nl(i)?i:this.parseUrl(i),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,Pd,null,r)}navigate(i,r={skipLocationChange:!1}){return nz(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=ee({},ez):r===!1?o=ee({},tz):o=r,nl(i))return wS(this.currentUrlTree,i,o);let a=this.parseUrl(i);return wS(this.currentUrlTree,a,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,a])=>(a!=null&&(r[o]=a),r),{})}scheduleNavigation(i,r,o,a,c){if(this.disposed)return Promise.resolve(!1);let u,f,m;c?(u=c.resolve,f=c.reject,m=c.promise):m=new Promise((b,I)=>{u=b,f=I});let _=this.pendingTasks.add();return Xj(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:a,resolve:u,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(b=>Promise.reject(b))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nz(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Ee(4008,!1)}function iz(t){return!(t instanceof Ld)&&!(t instanceof Fd)}var rz=new ce("");function eA(t,...e){return Bp([{provide:Xb,multi:!0,useValue:t},[],{provide:il,useFactory:oz,deps:[km]},{provide:Ky,multi:!0,useFactory:sz},e.map(n=>n.\u0275providers)])}function oz(t){return t.routerState.root}function sz(){let t=X(fn);return e=>{let n=t.get(ea);if(e!==n.components[0])return;let i=t.get(km),r=t.get(az);t.get(cz)===1&&i.initialNavigation(),t.get(lz,null,ze.Optional)?.setUpPreloading(),t.get(rz,null,ze.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var az=new ce("",{factory:()=>new Ae}),cz=new ce("",{providedIn:"root",factory:()=>1});var lz=new ce("");var tA=[];var dz="firebase",hz="10.12.2";Ro(dz,hz,"app");var Hd=new Yr("ANGULARFIRE2_VERSION");var fz=(t,e)=>{let n=e?[e]:bC(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},ca=class{constructor(){return fz(pz)}},pz="app-check";function e0(){}var Nm=class{zone;delegate;constructor(e,n=G_){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,n,i)}},t0=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",e0,{},e0,e0)),n.pipe(Xt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Om=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Nm(Zone.current)),this.insideAngular=n.run(()=>new Nm(Zone.current,dr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(V(ve))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function mz(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Jn(t){return gz(mz())(t)}function gz(t){return function(n){return n=n.lift(new t0(t.ngZone)),n.pipe(ji(t.outsideAngular),vi(t.insideAngular))}}var _z="firebase",vz="10.12.2";ai.registerVersion(_z,vz,"app-compat");var yz=["ngOnDestroy"],rA=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(yz.indexOf(o)>-1)return()=>{};let a=e.toPromise().then(c=>{let u=c?.[o];return typeof u=="function"?u.bind(c):u?.then?u.then(f=>n.run(()=>f)):n.run(()=>u)});return new Proxy(()=>{},{get:(c,u)=>a[u],apply:(c,u,f)=>a.then(m=>{let _=m?.(...f);return i?.spy?.apply&&i.spy.apply(o,f,_),_})})})});var Lm=class{constructor(e){return e}},sl=new ce("angularfire2.app.options"),al=new ce("angularfire2.app.name");function qd(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let a=ai.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>ai.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(a.options)){let c=!!module.hot;bz("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Lm(a)}var bz=(t,...e)=>{Yy()&&typeof console<"u"&&console[t](...e)},wz={provide:Lm,useFactory:qd,deps:[sl,ve,[new Vp,al]]},oA=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:sl,useValue:n},{provide:al,useValue:i}]}}constructor(n){ai.registerVersion("angularfire",Hd.full,"core"),ai.registerVersion("angularfire",Hd.full,"app-compat"),ai.registerVersion("angular",$T.full,n.toString())}static \u0275fac=function(i){return new(i||t)(V(jn))};static \u0275mod=ot({type:t});static \u0275inj=rt({providers:[wz]})}return t})();function Fm(t,e,n,i,r){let[,o,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===t)||[];if(o)return Iz(r,a)||(iA("error",`${e} was already initialized on the ${n} Firebase App with different settings.${Ez?" You may need to reload as Firebase is not HMR aware.":""}`),iA("warn",{is:r,was:a})),o;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([t,c,r]),c}}function Iz(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var Ez=typeof module<"u"&&!!module.hot,iA=(t,...e)=>{Yy()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Cz={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},sA={providers:[eA(tA),cy(oA.initializeApp(Cz))]};var pt=P1(cA());var i0;try{i0=typeof Intl<"u"&&Intl.v8BreakIterator}catch{i0=!1}var Ut=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?dS(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||i0)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(V(jn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Gd;function xz(){if(Gd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Gd=!0}))}finally{Gd=Gd||!1}return Gd}function cl(t){return xz()?t:!!t.capture}var la;function lA(){if(la==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return la=!1,la;if("scrollBehavior"in document.documentElement.style)la=!0;else{let t=Element.prototype.scrollTo;t?la=!/\{\s*\[native code\]\s*\}/.test(t.toString()):la=!1}}return la}var n0;function Dz(){if(n0==null){let t=typeof document<"u"?document.head:null;n0=!!(t&&(t.createShadowRoot||t.attachShadow))}return n0}function uA(t){if(Dz()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Si(t){return t.composedPath?t.composedPath()[0]:t.target}function Wd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ll(t){return Array.isArray(t)?t:[t]}function Wt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function so(t){return t instanceof vt?t.nativeElement:t}var dA=new Set,da,Tz=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Az}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Sz(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(V(Ut),V(md,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Sz(t,e){if(!dA.has(t))try{da||(da=document.createElement("style"),e&&da.setAttribute("nonce",e),da.setAttribute("type","text/css"),document.head.appendChild(da)),da.sheet&&(da.sheet.insertRule(`@media ${t} {body{ }}`,0),dA.add(t))}catch(n){console.error(n)}}function Az(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var Bm=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Ae}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return hA(ll(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=hA(ll(i)).map(c=>this._registerQuery(c).observable),a=wc(o);return a=ko(a.pipe(yi(1)),a.pipe(Zu(1),ep(0))),a.pipe(_e(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:m})=>{u.matches=u.matches||f,u.breakpoints[m]=f}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),a={observable:new Pe(c=>{let u=f=>this._zone.run(()=>c.next(f));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(fr(r),_e(({matches:c})=>({query:i,matches:c})),wi(this._destroySubject)),mql:r};return this._queries.set(i,a),a}};e.\u0275fac=function(r){return new(r||e)(V(Tz),V(ve))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hA(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var fA={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function o0(t){return t.buttons===0||t.detail===0}function s0(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Pz=new ce("cdk-input-modality-detector-options"),Rz={ignoreKeys:[18,17,224,91,16]},gA=650,ul=cl({passive:!0,capture:!0}),kz=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,a){this._platform=i,this._mostRecentTarget=null,this._modality=new sn(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(u=>u===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Si(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<gA||(this._modality.next(o0(c)?"keyboard":"mouse"),this._mostRecentTarget=Si(c))},this._onTouchstart=c=>{if(s0(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Si(c)},this._options=ee(ee({},Rz),a),this.modalityDetected=this._modality.pipe(Zu(1)),this.modalityChanged=this.modalityDetected.pipe(Ec()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,ul),o.addEventListener("mousedown",this._onMousedown,ul),o.addEventListener("touchstart",this._onTouchstart,ul)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ul),document.removeEventListener("mousedown",this._onMousedown,ul),document.removeEventListener("touchstart",this._onTouchstart,ul))}};e.\u0275fac=function(r){return new(r||e)(V(Ut),V(ve),V(qe),V(Pz,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nz=new ce("liveAnnouncerElement",{providedIn:"root",factory:Oz});function Oz(){return null}var Lz=new ce("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Fz=0,_A=(()=>{let e=class e{constructor(i,r,o,a){this._ngZone=r,this._defaultOptions=a,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,a,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[a,c]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=o&&o.politeness?o.politeness:"polite"),c==null&&o&&(c=o.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(u=>this._currentResolve=u)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${Fz++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}};e.\u0275fac=function(r){return new(r||e)(V(Nz,8),V(ve),V(qe),V(Lz,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zm=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(zm||{}),Vz=new ce("cdk-focus-monitor-default-options"),jm=cl({passive:!0,capture:!0}),vA=(()=>{let e=class e{constructor(i,r,o,a,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ae,this._rootNodeFocusAndBlurListener=u=>{let f=Si(u);for(let m=f;m;m=m.parentElement)u.type==="focus"?this._onFocus(u,m):this._onBlur(u,m)},this._document=a,this._detectionMode=c?.detectionMode||zm.IMMEDIATE}monitor(i,r=!1){let o=so(i);if(!this._platform.isBrowser||o.nodeType!==1)return pe();let a=uA(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;let u={checkChildren:r,subject:new Ae,rootNode:a};return this._elementInfo.set(o,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(i){let r=so(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let a=so(i),c=this._getDocument().activeElement;a===c?this._getClosestElementsInfo(a).forEach(([u,f])=>this._originChanged(u,r,f)):(this._setOrigin(r),typeof a.focus=="function"&&a.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===zm.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===zm.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?gA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),a=Si(i);!o||!o.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,jm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,jm)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(wi(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,jm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,jm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,a)=>{(a===i||o.checkChildren&&a.contains(i))&&r.push([a,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let a=i.labels;if(a){for(let c=0;c<a.length;c++)if(a[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(V(ve),V(Ut),V(kz),V(qe,8),V(Vz,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ha=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(ha||{}),pA="cdk-high-contrast-black-on-white",mA="cdk-high-contrast-white-on-black",r0="cdk-high-contrast-active",yA=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=X(Bm).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return ha.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,a=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return ha.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return ha.BLACK_ON_WHITE}return ha.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(r0,pA,mA),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===ha.BLACK_ON_WHITE?i.add(r0,pA):r===ha.WHITE_ON_BLACK&&i.add(r0,mA)}}};e.\u0275fac=function(r){return new(r||e)(V(Ut),V(qe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Bz=new ce("cdk-dir-doc",{providedIn:"root",factory:jz});function jz(){return X(qe)}var zz=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Uz(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?zz.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var wA=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new tt,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=Uz(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(V(Bz,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})();function qz(){return!0}var Gz=new ce("mat-sanity-checks",{providedIn:"root",factory:qz}),Cr=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Wd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(V(yA),V(Gz,8),V(qe))},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Zo,Zo]});let t=e;return t})();var Ai=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Ai||{}),u0=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ai.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},IA=cl({passive:!0,capture:!0}),d0=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Si(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let a=o.get(i);a?a.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,IA)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,IA)))}},EA={enterDuration:225,exitDuration:150},Wz=800,CA=cl({passive:!0,capture:!0}),xA=["mousedown","touchstart"],DA=["mouseup","mouseleave","touchend","touchcancel"],Zd=class Zd{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=so(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=ee(ee({},EA),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let a=i.radius||Zz(e,n,r),c=e-r.left,u=n-r.top,f=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${c-a}px`,m.style.top=`${u-a}px`,m.style.height=`${a*2}px`,m.style.width=`${a*2}px`,i.color!=null&&(m.style.backgroundColor=i.color),m.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(m);let _=window.getComputedStyle(m),b=_.transitionProperty,I=_.transitionDuration,M=b==="none"||I==="0s"||I==="0s, 0s"||r.width===0&&r.height===0,P=new u0(this,m,i,M);m.style.transform="scale3d(1, 1, 1)",P.state=Ai.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let F=null;return!M&&(f||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let H=()=>this._finishRippleTransition(P),Q=()=>this._destroyRipple(P);m.addEventListener("transitionend",H),m.addEventListener("transitioncancel",Q),F={onTransitionEnd:H,onTransitionCancel:Q}}),this._activeRipples.set(P,F),(M||!f)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===Ai.FADING_OUT||e.state===Ai.HIDDEN)return;let n=e.element,i=ee(ee({},EA),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Ai.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=so(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,xA.forEach(i=>{Zd._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{DA.forEach(n=>{this._triggerElement.addEventListener(n,this,CA)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ai.FADING_IN?this._startFadeOutTransition(e):e.state===Ai.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Ai.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ai.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=o0(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Wz;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!s0(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Ai.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ai.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(xA.forEach(n=>Zd._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(DA.forEach(n=>e.removeEventListener(n,this,CA)),this._pointerUpEventsRegistered=!1))}};Zd._eventManager=new d0;var h0=Zd;function Zz(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var MA=new ce("mat-ripple-global-options"),Kz=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,a,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new h0(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ee(ee(ee({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,ee(ee({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,ee(ee({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(ye(vt),ye(ve),ye(Ut),ye(MA,8),ye(Ys,8))},e.\u0275dir=Mt({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&br("mat-ripple-unbounded",o.unbounded)},inputs:{color:[st.None,"matRippleColor","color"],unbounded:[st.None,"matRippleUnbounded","unbounded"],centered:[st.None,"matRippleCentered","centered"],radius:[st.None,"matRippleRadius","radius"],animation:[st.None,"matRippleAnimation","animation"],disabled:[st.None,"matRippleDisabled","disabled"],trigger:[st.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),PA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Cr,Cr]});let t=e;return t})();var TA={capture:!0},SA=["focus","mousedown","mouseenter","touchstart"],c0="mat-ripple-loader-uninitialized",l0="mat-ripple-loader-class-name",AA="mat-ripple-loader-centered",Um="mat-ripple-loader-disabled",RA=(()=>{let e=class e{constructor(){this._document=X(qe,{optional:!0}),this._animationMode=X(Ys,{optional:!0}),this._globalRippleOptions=X(MA,{optional:!0}),this._platform=X(Ut),this._ngZone=X(ve),this._hosts=new Map,this._onInteraction=i=>{let r=Si(i);if(r instanceof HTMLElement){let o=r.closest(`[${c0}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}},this._ngZone.runOutsideAngular(()=>{for(let i of SA)this._document?.addEventListener(i,this._onInteraction,TA)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of SA)this._document?.removeEventListener(r,this._onInteraction,TA)}configureRipple(i,r){i.setAttribute(c0,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute(l0))&&i.setAttribute(l0,r.className||""),r.centered&&i.setAttribute(AA,""),r.disabled&&i.setAttribute(Um,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(Um,""):i.removeAttribute(Um)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(l0)),i.append(o);let a=new Kz(new vt(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=i,a.centered=i.hasAttribute(AA),a.disabled=i.hasAttribute(Um),this.attachRipple(i,a),a}attachRipple(i,r){i.removeAttribute(c0),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qz=["mat-button",""],Yz=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Xz=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Jz=new ce("MAT_BUTTON_CONFIG");var eU=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],tU=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,a){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=a,this._focusMonitor=X(vA),this._rippleLoader=X(RA),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=X(Jz,{optional:!0}),u=i.nativeElement,f=u.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:m,mdcClasses:_}of eU)u.hasAttribute(m)&&f.add(..._)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Py()},e.\u0275dir=Mt({type:e,inputs:{color:"color",disableRipple:[st.HasDecoratorInputTransform,"disableRipple","disableRipple",wr],disabled:[st.HasDecoratorInputTransform,"disabled","disabled",wr],ariaDisabled:[st.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",wr],disabledInteractive:[st.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",wr]},features:[no]});let t=e;return t})();var kA=(()=>{let e=class e extends tU{constructor(i,r,o,a){super(i,r,o,a)}};e.\u0275fac=function(r){return new(r||e)(ye(vt),ye(Ut),ye(ve),ye(Ys,8))},e.\u0275cmp=ft({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(qi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Hy(o.color?"mat-"+o.color:""),br("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ho,Tt],attrs:Qz,ngContentSelectors:Xz,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(qc(Yz),be(0,"span",0),Gi(1),Z(2,"span",1),Gi(3,1),Y(),Gi(4,2),be(5,"span",2)(6,"span",3)),r&2&&br("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var NA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Cr,PA,Cr]});let t=e;return t})();var dl=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(dl||{});function OA(t,e){return{type:dl.Trigger,name:t,definitions:e,options:{}}}function f0(t,e=null){return{type:dl.Animate,styles:e,timings:t}}function $m(t){return{type:dl.Style,styles:t,offset:null}}function p0(t,e,n){return{type:dl.State,name:t,styles:e,options:n}}function m0(t,e,n=null){return{type:dl.Transition,expr:t,animation:e,options:n}}var Kd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},hl=class extends Kd{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},fl=class extends Kd{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},g0=class extends Kd{constructor(e){super(),this.element=e instanceof vt?e.nativeElement:e}},pl=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof hl)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof fl)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof g0)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Hm=class extends pl{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");c.parentNode.insertBefore(u,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||fn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var _0=(()=>{let e=class e extends pl{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new tt,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");a.setAttachedHost(this),c.parentNode.insertBefore(u,c),this._getRootNode().appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,a=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(a,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(ye($o),ye(Di),ye(qe))},e.\u0275dir=Mt({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[st.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ho]});let t=e;return t})();var qm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})();var nU=20,FA=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Ae,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=nU){return this._platform.isBrowser?new Pe(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(Jf(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):pe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Bt(a=>!a||o.indexOf(a)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,a)=>{this._scrollableContainsElement(a,i)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=so(r),a=i.getElementRef().nativeElement;do if(o==a)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Hu(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(V(ve),V(Ut),V(qe,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var iU=20,v0=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new Ae,this._changeListener=a=>{this._change.next(a)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,a=o.getBoundingClientRect(),c=-a.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,u=-a.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:c,left:u}}change(i=iU){return i>0?this._change.pipe(Jf(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(V(Ut),V(ve),V(qe,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var LA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})(),y0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Zo,LA,Zo,LA]});let t=e;return t})();var VA=lA(),b0=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Wt(-this._previousScrollPosition.left),e.style.top=Wt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),VA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),VA&&(i.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var w0=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Bt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Gm=class{enable(){}disable(){}attach(){}};function I0(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,a=t.left>n.right;return i||r||o||a})}function BA(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,a=t.right>n.right;return i||r||o||a})}var E0=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();I0(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},oU=(()=>{let e=class e{constructor(i,r,o,a){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new Gm,this.close=c=>new w0(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new b0(this._viewportRuler,this._document),this.reposition=c=>new E0(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}};e.\u0275fac=function(r){return new(r||e)(V(FA),V(v0),V(ve),V(qe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qd=class{constructor(e){if(this.scrollStrategy=new Gm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var C0=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var HA=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(V(qe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sU=(()=>{let e=class e extends HA{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){let u=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(V(qe),V(ve,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),aU=(()=>{let e=class e extends HA{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Si(a)},this._clickListener=a=>{let c=Si(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let f=this._attachedOverlays.slice();for(let m=f.length-1;m>-1;m--){let _=f[m];if(_._outsidePointerEvents.observers.length<1||!_.hasAttached())continue;if(_.overlayElement.contains(c)||_.overlayElement.contains(u))break;let b=_._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>b.next(a)):b.next(a)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(V(qe),V(Ut),V(ve,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qA=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Wd()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let a=0;a<o.length;a++)o[a].remove()}let r=this._document.createElement("div");r.classList.add(i),Wd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(V(qe),V(Ut))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),x0=class{constructor(e,n,i,r,o,a,c,u,f,m=!1,_){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=c,this._location=u,this._outsideClickDispatcher=f,this._animationsDisabled=m,this._injector=_,this._backdropElement=null,this._backdropClick=new Ae,this._attachments=new Ae,this._detachments=new Ae,this._locationChanges=Ct.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._backdropTransitionendHandler=b=>{this._disposeBackdrop(b.target)},this._keydownEvents=new Ae,this._outsidePointerEvents=new Ae,this._renders=new Ae,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=bd(()=>zy(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),vd(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ee(ee({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Et(ee({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Wt(this._config.width),e.height=Wt(this._config.height),e.minWidth=Wt(this._config.minWidth),e.minHeight=Wt(this._config.minHeight),e.maxWidth=Wt(this._config.maxWidth),e.maxHeight=Wt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=ll(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(wi(qu(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},jA="cdk-overlay-connected-position-bounding-box",cU=/([A-Za-z%]+)$/,D0=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ae,this._resizeSubscription=Ct.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(jA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],a;for(let c of this._preferredPositions){let u=this._getOriginPoint(e,r,c),f=this._getOverlayPoint(u,n,c),m=this._getOverlayFit(f,n,i,c);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,u);return}if(this._canFitWithFlexibleDimensions(m,f,i)){o.push({position:c,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,c)});continue}(!a||a.overlayFit.visibleArea<m.visibleArea)&&(a={overlayFit:m,overlayPoint:f,originPoint:u,position:c,overlayRect:n})}if(o.length){let c=null,u=-1;for(let f of o){let m=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);m>u&&(u=m,c=f)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&fa(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(jA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let a=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?a:c}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=UA(n),{x:a,y:c}=e,u=this._getOffset(r,"x"),f=this._getOffset(r,"y");u&&(a+=u),f&&(c+=f);let m=0-a,_=a+o.width-i.width,b=0-c,I=c+o.height-i.height,M=this._subtractOverflows(o.width,m,_),P=this._subtractOverflows(o.height,b,I),F=M*P;return{visibleArea:F,isCompletelyWithinViewport:o.width*o.height===F,fitsInViewportVertically:P===o.height,fitsInViewportHorizontally:M==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,a=zA(this._overlayRef.getConfig().minHeight),c=zA(this._overlayRef.getConfig().minWidth),u=e.fitsInViewportVertically||a!=null&&a<=r,f=e.fitsInViewportHorizontally||c!=null&&c<=o;return u&&f}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=UA(n),o=this._viewportRect,a=Math.max(e.x+r.width-o.width,0),c=Math.max(e.y+r.height-o.height,0),u=Math.max(o.top-i.top-e.y,0),f=Math.max(o.left-i.left-e.x,0),m=0,_=0;return r.width<=o.width?m=f||-a:m=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?_=u||-c:_=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:m,y:_},{x:e.x+m,y:e.y+_}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!lU(this._lastScrollVisibility,i)){let r=new C0(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,a,c;if(n.overlayY==="top")a=e.y,o=i.height-a+this._viewportMargin;else if(n.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,o=i.height-c+this._viewportMargin;else{let I=Math.min(i.bottom-e.y+i.top,e.y),M=this._lastBoundingBoxSize.height;o=I*2,a=e.y-I,o>M&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-M/2)}let u=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,f=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,m,_,b;if(f)b=i.width-e.x+this._viewportMargin*2,m=e.x-this._viewportMargin;else if(u)_=e.x,m=i.right-e.x;else{let I=Math.min(i.right-e.x+i.left,e.x),M=this._lastBoundingBoxSize.width;m=I*2,_=e.x-I,m>M&&!this._isInitialRender&&!this._growAfterOpen&&(_=e.x-M/2)}return{top:a,left:_,bottom:c,right:b,width:m,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=Wt(i.height),r.top=Wt(i.top),r.bottom=Wt(i.bottom),r.width=Wt(i.width),r.left=Wt(i.left),r.right=Wt(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Wt(o)),a&&(r.maxWidth=Wt(a))}this._lastBoundingBoxSize=i,fa(this._boundingBox.style,r)}_resetBoundingBoxStyles(){fa(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){fa(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let m=this._viewportRuler.getViewportScrollPosition();fa(i,this._getExactOverlayY(n,e,m)),fa(i,this._getExactOverlayX(n,e,m))}else i.position="static";let c="",u=this._getOffset(n,"x"),f=this._getOffset(n,"y");u&&(c+=`translateX(${u}px) `),f&&(c+=`translateY(${f}px)`),i.transform=c.trim(),a.maxHeight&&(r?i.maxHeight=Wt(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=Wt(a.maxWidth):o&&(i.maxWidth="")),fa(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(o.y+this._overlayRect.height)}px`}else r.top=Wt(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let a;if(this._isRtl()?a=e.overlayX==="end"?"left":"right":a=e.overlayX==="end"?"right":"left",a==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(o.x+this._overlayRect.width)}px`}else r.left=Wt(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:BA(e,i),isOriginOutsideView:I0(e,i),isOverlayClipped:BA(n,i),isOverlayOutsideView:I0(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ll(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof vt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function fa(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function zA(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(cU);return!n||n==="px"?parseFloat(e):null}return t||null}function UA(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function lU(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var $A="cdk-global-overlay-wrapper",T0=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add($A),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:c}=i,u=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),f=(o==="100%"||o==="100vh")&&(!c||c==="100%"||c==="100vh"),m=this._xPosition,_=this._xOffset,b=this._overlayRef.getConfig().direction==="rtl",I="",M="",P="";u?P="flex-start":m==="center"?(P="center",b?M=_:I=_):b?m==="left"||m==="end"?(P="flex-end",I=_):(m==="right"||m==="start")&&(P="flex-start",M=_):m==="left"||m==="start"?(P="flex-start",I=_):(m==="right"||m==="end")&&(P="flex-end",M=_),e.position=this._cssPosition,e.marginLeft=u?"0":I,e.marginTop=f?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":M,n.justifyContent=P,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove($A),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},uU=(()=>{let e=class e{constructor(i,r,o,a){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=a}global(){return new T0}flexibleConnectedTo(i){return new D0(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(V(v0),V(qe),V(Ut),V(qA))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dU=0,Yd=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m,_,b,I,M){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=u,this._ngZone=f,this._document=m,this._directionality=_,this._location=b,this._outsideClickDispatcher=I,this._animationsModuleType=M}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),a=this._createPortalOutlet(o),c=new Qd(i);return c.direction=c.direction||this._directionality.value,new x0(a,r,o,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Kn))}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${dU++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(ea)),new Hm(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(V(oU),V(qA),V($o),V(uU),V(sU),V(fn),V(ve),V(qe),V(wA),V(na),V(aU),V(Ys,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hU=new ce("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=X(Yd);return()=>t.scrollStrategies.reposition()}});function fU(t){return()=>t.scrollStrategies.reposition()}var pU={provide:hU,deps:[Yd],useFactory:fU},GA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({providers:[Yd,pU],imports:[Zo,qm,y0,y0]});let t=e;return t})();function gU(t,e){if(t&1){let n=An();Z(0,"div",1)(1,"button",2),He("click",function(){bn(n);let r=Be();return wn(r.action())}),ue(2),Y()()}if(t&2){let n=Be();te(2),Mn(" ",n.data.action," ")}}var _U=["label"];function vU(t,e){}var yU=Math.pow(2,31)-1,Xd=class{constructor(e,n){this._overlayRef=n,this._afterDismissed=new Ae,this._afterOpened=new Ae,this._onAction=new Ae,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,yU))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},WA=new ce("MatSnackBarData"),ml=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},bU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let t=e;return t})(),wU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let t=e;return t})(),IU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let t=e;return t})(),ZA=(()=>{let e=class e{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};e.\u0275fac=function(r){return new(r||e)(ye(Xd),ye(WA))},e.\u0275cmp=ft({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Tt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(Z(0,"div",0),ue(1),Y(),nt(2,gU,3,1,"div",1)),r&2&&(te(),Mn(" ",o.data.message,`
`),te(),jt(2,o.hasAction?2:-1))},dependencies:[kA,bU,wU,IU],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let t=e;return t})(),EU={snackBarState:OA("state",[p0("void, hidden",$m({transform:"scale(0.8)",opacity:0})),p0("visible",$m({transform:"scale(1)",opacity:1})),m0("* => visible",f0("150ms cubic-bezier(0, 0, 0.2, 1)")),m0("* => void, * => hidden",f0("75ms cubic-bezier(0.4, 0.0, 1, 1)",$m({opacity:0})))])},CU=0,xU=(()=>{let e=class e extends pl{constructor(i,r,o,a,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=c,this._document=X(qe),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ae,this._onExit=new Ae,this._onEnter=new Ae,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${CU++}`,this.attachDomPortal=u=>{this._assertNotAttached();let f=this._portalOutlet.attachDomPortal(u);return this._afterPortalAttached(),f},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:o}=i;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,a="mdc-snackbar__label";o.classList.toggle(a,!o.querySelector(`.${a}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");this._trackedModals.add(a),c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?i.setAttribute("aria-owns",o):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};e.\u0275fac=function(r){return new(r||e)(ye(ve),ye(vt),ye(Wi),ye(Ut),ye(ml))},e.\u0275cmp=ft({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(ro(_0,7),ro(_U,7)),r&2){let a;Yn(a=Xn())&&(o._portalOutlet=a.first),Yn(a=Xn())&&(o._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&Wy("@state.done",function(c){return o.onAnimationEnd(c)}),r&2&&qy("@state",o._animationState)},standalone:!0,features:[Ho,Tt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(Z(0,"div",1)(1,"div",2,0)(3,"div",3),nt(4,vU,0,0,"ng-template",4),Y(),be(5,"div"),Y()()),r&2&&(te(5),qi("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[_0],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[EU.snackBarState]}});let t=e;return t})();function DU(){return new ml}var TU=new ce("mat-snack-bar-default-options",{providedIn:"root",factory:DU}),SU=(()=>{let e=class e{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,o,a,c,u){this._overlay=i,this._live=r,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=c,this._defaultConfig=u,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=ZA,this.snackBarContainerComponent=xU,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",o){let a=ee(ee({},this._defaultConfig),o);return a.data={message:i,action:r},a.announcementMessage===i&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,a=fn.create({parent:o||this._injector,providers:[{provide:ml,useValue:r}]}),c=new hl(this.snackBarContainerComponent,r.viewContainerRef,a),u=i.attach(c);return u.instance.snackBarConfig=r,u.instance}_attach(i,r){let o=ee(ee(ee({},new ml),this._defaultConfig),r),a=this._createOverlay(o),c=this._attachSnackBarContainer(a,o),u=new Xd(c,a);if(i instanceof Ci){let f=new fl(i,null,{$implicit:o.data,snackBarRef:u});u.instance=c.attachTemplatePortal(f)}else{let f=this._createInjector(o,u),m=new hl(i,void 0,f),_=c.attachComponentPortal(m);u.instance=_.instance}return this._breakpointObserver.observe(fA.HandsetPortrait).pipe(wi(a.detachments())).subscribe(f=>{a.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),o.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(u,o),this._openedSnackBarRef=u,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new Qd;r.direction=i.direction;let o=this._overlay.position().global(),a=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!a||i.horizontalPosition==="end"&&a,u=!c&&i.horizontalPosition!=="center";return c?o.left("0"):u?o.right("0"):o.centerHorizontally(),i.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(i,r){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector;return fn.create({parent:o||this._injector,providers:[{provide:Xd,useValue:r},{provide:WA,useValue:i.data}]})}};e.\u0275fac=function(r){return new(r||e)(V(Yd),V(_A),V(fn),V(Bm),V(e,12),V(TU))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var KA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({providers:[SU],imports:[GA,qm,NA,Cr,ZA,Cr]});let t=e;return t})();var S0=(()=>{let e=class e{transform(i,...r){let o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=[];for(let c=0;c<o.length;c++)for(let u=0;u<o.length;u++)a.push(o[c]+o[u]);if(console.log(i,...r),i<1e3)return i.toFixed(2);if(i>=1e3&&i<=999999)return(i/1e3).toFixed(2)+"K";if(i>=1e6&&i<=999999999)return(i/1e6).toFixed(2)+"M";if(i>=1e9&&i<=999999999999)return(i/1e9).toFixed(2)+"B";if(i>=1e12&&i<=999999999999999)return(i/1e12).toFixed(2)+"T";if(i>=1e15){let c=i/1e12,u=-1;for(;c/1e3>1;)c=c/1e3,u++;return c.toFixed(2)+a[u]}return null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=fd({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();var PU=new Map,RU={activated:!1,tokenObservers:[]},kU={initialized:!1,enabled:!1};function Zi(t){return PU.get(t)||Object.assign({},RU)}function eM(){return kU}var NU="https://content-firebaseappcheck.googleapis.com/v1";var OU="exchangeDebugToken",QA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},TX=24*60*60*1e3;var M0=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return U(this,null,function*(){this.stop();try{this.pending=new S_,this.pending.promise.catch(n=>{}),yield LU(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new S_,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function LU(t){return new Promise(e=>{setTimeout(e,t)})}var FU={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ko=new vC("appCheck","AppCheck",FU);function tM(t){if(!Zi(t).activated)throw Ko.create("use-before-activation",{appName:t.name})}function nM(i,r){return U(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let I=yield a.getHeartbeatsHeader();I&&(o["X-Firebase-Client"]=I)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(I){throw Ko.create("fetch-network-error",{originalErrorMessage:I?.message})}if(u.status!==200)throw Ko.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(I){throw Ko.create("fetch-parse-error",{originalErrorMessage:I?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Ko.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let _=Number(m[1])*1e3,b=Date.now();return{token:f.token,expireTimeMillis:b+_,issuedAtTimeMillis:b}})}function iM(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${NU}/projects/${n}/apps/${i}:${OU}?key=${r}`,body:{debug_token:e}}}var VU="firebase-app-check-database",BU=1,P0="firebase-app-check-store";var Wm=null;function jU(){return Wm||(Wm=new Promise((t,e)=>{try{let n=indexedDB.open(VU,BU);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Ko.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(P0,{keyPath:"compositeKey"})}}}catch(n){e(Ko.create("storage-open",{originalErrorMessage:n?.message}))}}),Wm)}function zU(t,e){return UU($U(t),e)}function UU(t,e){return U(this,null,function*(){let i=(yield jU()).transaction(P0,"readwrite"),o=i.objectStore(P0).put({compositeKey:t,value:e});return new Promise((a,c)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;c(Ko.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function $U(t){return`${t.options.appId}-${t.name}`}var R0=new Af("@firebase/app-check");function A0(t,e){return Sf()?zU(t,e).catch(n=>{R0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function rM(){return eM().enabled}function oM(){return U(this,null,function*(){let t=eM();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var HU={error:"UNKNOWN_ERROR"};function qU(t){return mC.encodeString(JSON.stringify(t),!1)}function k0(t,e=!1){return U(this,null,function*(){let n=t.app;tM(n);let i=Zi(n),r=i.token,o;if(r&&!Jd(r)&&(i.token=void 0,r=void 0),!r){let u=yield i.cachedTokenPromise;u&&(Jd(u)?r=u:yield A0(n,void 0))}if(!e&&r&&Jd(r))return{token:r.token};let a=!1;if(rM()){i.exchangeTokenPromise||(i.exchangeTokenPromise=nM(iM(n,yield oM()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield A0(n,u),i.token=u,{token:u.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),r=yield Zi(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?R0.warn(u.message):R0.error(u),o=u}let c;return r?o?Jd(r)?c={token:r.token,internalError:o}:c=XA(o):(c={token:r.token},i.token=r,yield A0(n,r)):c=XA(o),a&&KU(n,c),c})}function GU(t){return U(this,null,function*(){let e=t.app;tM(e);let{provider:n}=Zi(e);if(rM()){let i=yield oM(),{token:r}=yield nM(iM(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function WU(t,e,n,i){let{app:r}=t,o=Zi(r),a={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&Jd(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),YA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>YA(t))}function sM(t,e){let n=Zi(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function YA(t){let{app:e}=t,n=Zi(e),i=n.tokenRefresher;i||(i=ZU(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function ZU(t){let{app:e}=t;return new M0(()=>U(this,null,function*(){let n=Zi(e),i;if(n.token?i=yield k0(t,!0):i=yield k0(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=Zi(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},QA.RETRIAL_MIN_WAIT,QA.RETRIAL_MAX_WAIT)}function KU(t,e){let n=Zi(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Jd(t){return t.expireTimeMillis-Date.now()>0}function XA(t){return{token:qU(HU),error:t}}var N0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=Zi(this.app);for(let n of e)sM(this.app,n.next);return Promise.resolve()}};function QU(t,e){return new N0(t,e)}function YU(t){return{getToken:e=>k0(t,e),getLimitedUseToken:()=>GU(t),addTokenListener:e=>WU(t,"INTERNAL",e),removeTokenListener:e=>sM(t.app,e)}}var XU="@firebase/app-check",JU="0.8.4";var e$="app-check",JA="app-check-internal";function t$(){Bu(new Ns(e$,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return QU(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(JA).initialize()})),Bu(new Ns(JA,t=>{let e=t.getProvider("app-check").getImmediate();return YU(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ro(XU,JU)}t$();var n$=["localhost","0.0.0.0","127.0.0.1"],BX=typeof window<"u"&&n$.includes(window.location.hostname);var O0=new ce("angularfire2.auth.use-emulator"),L0=new ce("angularfire2.auth.settings"),F0=new ce("angularfire2.auth.tenant-id"),V0=new ce("angularfire2.auth.langugage-code"),B0=new ce("angularfire2.auth.use-device-language"),j0=new ce("angularfire.auth.persistence"),z0=(t,e,n,i,r,o,a,c)=>Fm(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),i&&(u.tenantId=i),u.languageCode=r,o&&u.useDeviceLanguage(),a)for(let[f,m]of Object.entries(a))u.settings[f]=m;return c&&u.setPersistence(c),u},[n,i,r,o,a,c]),Zm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,a,c,u,f,m,_,b,I){let M=new Ae,P=pe(void 0).pipe(vi(a.outsideAngular),xt(()=>o.runOutsideAngular(()=>import("./chunk-PY5DTK2U.js"))),_e(()=>qd(n,o,i)),_e(F=>z0(F,o,c,f,m,_,u,b)),Wu({bufferSize:1,refCount:!1}));if(ia(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=pe(null);else{P.pipe(bi()).subscribe();let F=P.pipe(xt(q=>q.getRedirectResult().then(oe=>oe,()=>null)),Jn,Wu({bufferSize:1,refCount:!1})),H=P.pipe(xt(q=>new Pe(oe=>({unsubscribe:o.runOutsideAngular(()=>q.onAuthStateChanged(he=>oe.next(he),he=>oe.error(he),()=>oe.complete()))})))),Q=P.pipe(xt(q=>new Pe(oe=>({unsubscribe:o.runOutsideAngular(()=>q.onIdTokenChanged(he=>oe.next(he),he=>oe.error(he),()=>oe.complete()))}))));this.authState=F.pipe(np(H),ji(a.outsideAngular),vi(a.insideAngular)),this.user=F.pipe(np(Q),ji(a.outsideAngular),vi(a.insideAngular)),this.idToken=this.user.pipe(xt(q=>q?dt(q.getIdToken()):pe(null))),this.idTokenResult=this.user.pipe(xt(q=>q?dt(q.getIdTokenResult()):pe(null))),this.credential=qu(F,M,this.authState.pipe(Bt(q=>!q))).pipe(_e(q=>q?.user?q:null),ji(a.outsideAngular),vi(a.insideAngular))}return rA(this,P,o,{spy:{apply:(F,H,Q)=>{(F.startsWith("signIn")||F.startsWith("createUser"))&&Q.then(q=>M.next(q))}}})}static \u0275fac=function(i){return new(i||t)(V(sl),V(al,8),V(jn),V(ve),V(Om),V(O0,8),V(L0,8),V(F0,8),V(V0,8),V(B0,8),V(j0,8),V(ca,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var lM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uM={};var Qo,U0;(function(){var t;function e(S,C){function x(){}x.prototype=C.prototype,S.D=C.prototype,S.prototype=new x,S.prototype.constructor=S,S.C=function(A,R,N){for(var T=Array(arguments.length-2),Ot=2;Ot<arguments.length;Ot++)T[Ot-2]=arguments[Ot];return C.prototype[R].apply(A,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,C,x){x||(x=0);var A=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)A[R]=C.charCodeAt(x++)|C.charCodeAt(x++)<<8|C.charCodeAt(x++)<<16|C.charCodeAt(x++)<<24;else for(R=0;16>R;++R)A[R]=C[x++]|C[x++]<<8|C[x++]<<16|C[x++]<<24;C=S.g[0],x=S.g[1],R=S.g[2];var N=S.g[3],T=C+(N^x&(R^N))+A[0]+3614090360&4294967295;C=x+(T<<7&4294967295|T>>>25),T=N+(R^C&(x^R))+A[1]+3905402710&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(x^N&(C^x))+A[2]+606105819&4294967295,R=N+(T<<17&4294967295|T>>>15),T=x+(C^R&(N^C))+A[3]+3250441966&4294967295,x=R+(T<<22&4294967295|T>>>10),T=C+(N^x&(R^N))+A[4]+4118548399&4294967295,C=x+(T<<7&4294967295|T>>>25),T=N+(R^C&(x^R))+A[5]+1200080426&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(x^N&(C^x))+A[6]+2821735955&4294967295,R=N+(T<<17&4294967295|T>>>15),T=x+(C^R&(N^C))+A[7]+4249261313&4294967295,x=R+(T<<22&4294967295|T>>>10),T=C+(N^x&(R^N))+A[8]+1770035416&4294967295,C=x+(T<<7&4294967295|T>>>25),T=N+(R^C&(x^R))+A[9]+2336552879&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(x^N&(C^x))+A[10]+4294925233&4294967295,R=N+(T<<17&4294967295|T>>>15),T=x+(C^R&(N^C))+A[11]+2304563134&4294967295,x=R+(T<<22&4294967295|T>>>10),T=C+(N^x&(R^N))+A[12]+1804603682&4294967295,C=x+(T<<7&4294967295|T>>>25),T=N+(R^C&(x^R))+A[13]+4254626195&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(x^N&(C^x))+A[14]+2792965006&4294967295,R=N+(T<<17&4294967295|T>>>15),T=x+(C^R&(N^C))+A[15]+1236535329&4294967295,x=R+(T<<22&4294967295|T>>>10),T=C+(R^N&(x^R))+A[1]+4129170786&4294967295,C=x+(T<<5&4294967295|T>>>27),T=N+(x^R&(C^x))+A[6]+3225465664&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^x&(N^C))+A[11]+643717713&4294967295,R=N+(T<<14&4294967295|T>>>18),T=x+(N^C&(R^N))+A[0]+3921069994&4294967295,x=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(x^R))+A[5]+3593408605&4294967295,C=x+(T<<5&4294967295|T>>>27),T=N+(x^R&(C^x))+A[10]+38016083&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^x&(N^C))+A[15]+3634488961&4294967295,R=N+(T<<14&4294967295|T>>>18),T=x+(N^C&(R^N))+A[4]+3889429448&4294967295,x=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(x^R))+A[9]+568446438&4294967295,C=x+(T<<5&4294967295|T>>>27),T=N+(x^R&(C^x))+A[14]+3275163606&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^x&(N^C))+A[3]+4107603335&4294967295,R=N+(T<<14&4294967295|T>>>18),T=x+(N^C&(R^N))+A[8]+1163531501&4294967295,x=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(x^R))+A[13]+2850285829&4294967295,C=x+(T<<5&4294967295|T>>>27),T=N+(x^R&(C^x))+A[2]+4243563512&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^x&(N^C))+A[7]+1735328473&4294967295,R=N+(T<<14&4294967295|T>>>18),T=x+(N^C&(R^N))+A[12]+2368359562&4294967295,x=R+(T<<20&4294967295|T>>>12),T=C+(x^R^N)+A[5]+4294588738&4294967295,C=x+(T<<4&4294967295|T>>>28),T=N+(C^x^R)+A[8]+2272392833&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^x)+A[11]+1839030562&4294967295,R=N+(T<<16&4294967295|T>>>16),T=x+(R^N^C)+A[14]+4259657740&4294967295,x=R+(T<<23&4294967295|T>>>9),T=C+(x^R^N)+A[1]+2763975236&4294967295,C=x+(T<<4&4294967295|T>>>28),T=N+(C^x^R)+A[4]+1272893353&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^x)+A[7]+4139469664&4294967295,R=N+(T<<16&4294967295|T>>>16),T=x+(R^N^C)+A[10]+3200236656&4294967295,x=R+(T<<23&4294967295|T>>>9),T=C+(x^R^N)+A[13]+681279174&4294967295,C=x+(T<<4&4294967295|T>>>28),T=N+(C^x^R)+A[0]+3936430074&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^x)+A[3]+3572445317&4294967295,R=N+(T<<16&4294967295|T>>>16),T=x+(R^N^C)+A[6]+76029189&4294967295,x=R+(T<<23&4294967295|T>>>9),T=C+(x^R^N)+A[9]+3654602809&4294967295,C=x+(T<<4&4294967295|T>>>28),T=N+(C^x^R)+A[12]+3873151461&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^x)+A[15]+530742520&4294967295,R=N+(T<<16&4294967295|T>>>16),T=x+(R^N^C)+A[2]+3299628645&4294967295,x=R+(T<<23&4294967295|T>>>9),T=C+(R^(x|~N))+A[0]+4096336452&4294967295,C=x+(T<<6&4294967295|T>>>26),T=N+(x^(C|~R))+A[7]+1126891415&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~x))+A[14]+2878612391&4294967295,R=N+(T<<15&4294967295|T>>>17),T=x+(N^(R|~C))+A[5]+4237533241&4294967295,x=R+(T<<21&4294967295|T>>>11),T=C+(R^(x|~N))+A[12]+1700485571&4294967295,C=x+(T<<6&4294967295|T>>>26),T=N+(x^(C|~R))+A[3]+2399980690&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~x))+A[10]+4293915773&4294967295,R=N+(T<<15&4294967295|T>>>17),T=x+(N^(R|~C))+A[1]+2240044497&4294967295,x=R+(T<<21&4294967295|T>>>11),T=C+(R^(x|~N))+A[8]+1873313359&4294967295,C=x+(T<<6&4294967295|T>>>26),T=N+(x^(C|~R))+A[15]+4264355552&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~x))+A[6]+2734768916&4294967295,R=N+(T<<15&4294967295|T>>>17),T=x+(N^(R|~C))+A[13]+1309151649&4294967295,x=R+(T<<21&4294967295|T>>>11),T=C+(R^(x|~N))+A[4]+4149444226&4294967295,C=x+(T<<6&4294967295|T>>>26),T=N+(x^(C|~R))+A[11]+3174756917&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~x))+A[2]+718787259&4294967295,R=N+(T<<15&4294967295|T>>>17),T=x+(N^(R|~C))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+N&4294967295}i.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var x=C-this.blockSize,A=this.B,R=this.h,N=0;N<C;){if(R==0)for(;N<=x;)r(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<C;)if(A[R++]=S.charCodeAt(N++),R==this.blockSize){r(this,A),R=0;break}}else for(;N<C;)if(A[R++]=S[N++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=C},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var x=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=x&255,x/=256;for(this.u(S),S=Array(16),C=x=0;4>C;++C)for(var A=0;32>A;A+=8)S[x++]=this.g[C]>>>A&255;return S};function o(S,C){var x=c;return Object.prototype.hasOwnProperty.call(x,S)?x[S]:x[S]=C(S)}function a(S,C){this.h=C;for(var x=[],A=!0,R=S.length-1;0<=R;R--){var N=S[R]|0;A&&N==C||(x[R]=N,A=!1)}this.g=x}var c={};function u(S){return-128<=S&&128>S?o(S,function(C){return new a([C|0],0>C?-1:0)}):new a([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return _;if(0>S)return F(f(-S));for(var C=[],x=1,A=0;S>=x;A++)C[A]=S/x|0,x*=4294967296;return new a(C,0)}function m(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return F(m(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(C,8)),A=_,R=0;R<S.length;R+=8){var N=Math.min(8,S.length-R),T=parseInt(S.substring(R,R+N),C);8>N?(N=f(Math.pow(C,N)),A=A.j(N).add(f(T))):(A=A.j(x),A=A.add(f(T)))}return A}var _=u(0),b=u(1),I=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-F(this).m();for(var S=0,C=1,x=0;x<this.g.length;x++){var A=this.i(x);S+=(0<=A?A:4294967296+A)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(P(this))return"-"+F(this).toString(S);for(var C=f(Math.pow(S,6)),x=this,A="";;){var R=oe(x,C).g;x=H(x,R.j(C));var N=((0<x.g.length?x.g[0]:x.h)>>>0).toString(S);if(x=R,M(x))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=H(this,S),P(S)?-1:M(S)?0:1};function F(S){for(var C=S.g.length,x=[],A=0;A<C;A++)x[A]=~S.g[A];return new a(x,~S.h).add(b)}t.abs=function(){return P(this)?F(this):this},t.add=function(S){for(var C=Math.max(this.g.length,S.g.length),x=[],A=0,R=0;R<=C;R++){var N=A+(this.i(R)&65535)+(S.i(R)&65535),T=(N>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);A=T>>>16,N&=65535,T&=65535,x[R]=T<<16|N}return new a(x,x[x.length-1]&-2147483648?-1:0)};function H(S,C){return S.add(F(C))}t.j=function(S){if(M(this)||M(S))return _;if(P(this))return P(S)?F(this).j(F(S)):F(F(this).j(S));if(P(S))return F(this.j(F(S)));if(0>this.l(I)&&0>S.l(I))return f(this.m()*S.m());for(var C=this.g.length+S.g.length,x=[],A=0;A<2*C;A++)x[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<S.g.length;R++){var N=this.i(A)>>>16,T=this.i(A)&65535,Ot=S.i(R)>>>16,Ni=S.i(R)&65535;x[2*A+2*R]+=T*Ni,Q(x,2*A+2*R),x[2*A+2*R+1]+=N*Ni,Q(x,2*A+2*R+1),x[2*A+2*R+1]+=T*Ot,Q(x,2*A+2*R+1),x[2*A+2*R+2]+=N*Ot,Q(x,2*A+2*R+2)}for(A=0;A<C;A++)x[A]=x[2*A+1]<<16|x[2*A];for(A=C;A<2*C;A++)x[A]=0;return new a(x,0)};function Q(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function q(S,C){this.g=S,this.h=C}function oe(S,C){if(M(C))throw Error("division by zero");if(M(S))return new q(_,_);if(P(S))return C=oe(F(S),C),new q(F(C.g),F(C.h));if(P(C))return C=oe(S,F(C)),new q(F(C.g),C.h);if(30<S.g.length){if(P(S)||P(C))throw Error("slowDivide_ only works with positive integers.");for(var x=b,A=C;0>=A.l(S);)x=he(x),A=he(A);var R=le(x,1),N=le(A,1);for(A=le(A,2),x=le(x,2);!M(A);){var T=N.add(A);0>=T.l(S)&&(R=R.add(x),N=T),A=le(A,1),x=le(x,1)}return C=H(S,R.j(C)),new q(R,C)}for(R=_;0<=S.l(C);){for(x=Math.max(1,Math.floor(S.m()/C.m())),A=Math.ceil(Math.log(x)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=f(x),T=N.j(C);P(T)||0<T.l(S);)x-=A,N=f(x),T=N.j(C);M(N)&&(N=b),R=R.add(N),S=H(S,T)}return new q(R,S)}t.A=function(S){return oe(this,S).h},t.and=function(S){for(var C=Math.max(this.g.length,S.g.length),x=[],A=0;A<C;A++)x[A]=this.i(A)&S.i(A);return new a(x,this.h&S.h)},t.or=function(S){for(var C=Math.max(this.g.length,S.g.length),x=[],A=0;A<C;A++)x[A]=this.i(A)|S.i(A);return new a(x,this.h|S.h)},t.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),x=[],A=0;A<C;A++)x[A]=this.i(A)^S.i(A);return new a(x,this.h^S.h)};function he(S){for(var C=S.g.length+1,x=[],A=0;A<C;A++)x[A]=S.i(A)<<1|S.i(A-1)>>>31;return new a(x,S.h)}function le(S,C){var x=C>>5;C%=32;for(var A=S.g.length-x,R=[],N=0;N<A;N++)R[N]=0<C?S.i(N+x)>>>C|S.i(N+x+1)<<32-C:S.i(N+x);return new a(R,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,U0=uM.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Qo=uM.Integer=a}).apply(typeof lM<"u"?lM:typeof self<"u"?self:typeof window<"u"?window:{});var Km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ao={};var $0,H0,gl,q0,eh,Qm,G0,W0,Z0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Km=="object"&&Km];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var E=0;E<d.length-1;E++){var k=d[E];if(!(k in y))break e;y=y[k]}d=d[d.length-1],E=y[d],g=g(E),g!=E&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,E=!1,k={next:function(){if(!E&&y<d.length){var z=y++;return{value:g(z,d[z]),done:!1}}return E=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},c=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,y){return d.call.apply(d.bind,arguments)}function _(d,g,y){if(!d)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,E),d.apply(g,k)}}return function(){return d.apply(g,arguments)}}function b(d,g,y){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:_,b.apply(null,arguments)}function I(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var E=y.slice();return E.push.apply(E,arguments),d.apply(this,E)}}function M(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(E,k,z){for(var J=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)J[Fe-2]=arguments[Fe];return g.prototype[k].apply(E,J)}}function P(d){let g=d.length;if(0<g){let y=Array(g);for(let E=0;E<g;E++)y[E]=d[E];return y}return[]}function F(d,g){for(let y=1;y<arguments.length;y++){let E=arguments[y];if(u(E)){let k=d.length||0,z=E.length||0;d.length=k+z;for(let J=0;J<z;J++)d[k+J]=E[J]}else d.push(E)}}class H{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function Q(d){return/^[\s\xa0]*$/.test(d)}function q(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function oe(d){return oe[" "](d),d}oe[" "]=function(){};var he=q().indexOf("Gecko")!=-1&&!(q().toLowerCase().indexOf("webkit")!=-1&&q().indexOf("Edge")==-1)&&!(q().indexOf("Trident")!=-1||q().indexOf("MSIE")!=-1)&&q().indexOf("Edge")==-1;function le(d,g,y){for(let E in d)g.call(y,d[E],E,d)}function S(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function C(d){let g={};for(let y in d)g[y]=d[y];return g}let x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,g){let y,E;for(let k=1;k<arguments.length;k++){E=arguments[k];for(y in E)d[y]=E[y];for(let z=0;z<x.length;z++)y=x[z],Object.prototype.hasOwnProperty.call(E,y)&&(d[y]=E[y])}}function R(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function N(d){c.setTimeout(()=>{throw d},0)}function T(){var d=mt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Ot{constructor(){this.h=this.g=null}add(g,y){let E=Ni.get();E.set(g,y),this.h?this.h.next=E:this.g=E,this.h=E}}var Ni=new H(()=>new Te,d=>d.reset());class Te{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let vo,we=!1,mt=new Ot,gn=()=>{let d=c.Promise.resolve(void 0);vo=()=>{d.then(Cn)}};var Cn=()=>{for(var d;d=T();){try{d.h.call(d.g)}catch(y){N(y)}var g=Ni;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}we=!1};function lt(){this.s=this.s,this.C=this.C}lt.prototype.s=!1,lt.prototype.ma=function(){this.s||(this.s=!0,this.N())},lt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var Ge=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return d}();function kn(d,g){if(xe.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,E=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(he){e:{try{oe(g.nodeName);var k=!0;break e}catch{}k=!1}k||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:er[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&kn.aa.h.call(this)}}M(kn,xe);var er={2:"touch",3:"pen",4:"mouse"};kn.prototype.h=function(){kn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var yo="closure_listenable_"+(1e6*Math.random()|0),ru=0;function ou(d,g,y,E,k){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!E,this.ha=k,this.key=++ru,this.da=this.fa=!1}function tr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function bo(d){this.src=d,this.g={},this.h=0}bo.prototype.add=function(d,g,y,E,k){var z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);var J=ja(d,g,E,k);return-1<J?(g=d[J],y||(g.fa=!1)):(g=new ou(g,this.src,z,!!E,k),g.fa=y,d.push(g)),g};function su(d,g){var y=g.type;if(y in d.g){var E=d.g[y],k=Array.prototype.indexOf.call(E,g,void 0),z;(z=0<=k)&&Array.prototype.splice.call(E,k,1),z&&(tr(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function ja(d,g,y,E){for(var k=0;k<d.length;++k){var z=d[k];if(!z.da&&z.listener==g&&z.capture==!!y&&z.ha==E)return k}return-1}var za="closure_lm_"+(1e6*Math.random()|0),gs={};function _s(d,g,y,E,k){if(E&&E.once)return Ua(d,g,y,E,k);if(Array.isArray(g)){for(var z=0;z<g.length;z++)_s(d,g[z],y,E,k);return null}return y=qa(y),d&&d[yo]?d.K(g,y,f(E)?!!E.capture:!!E,k):$h(d,g,y,!1,E,k)}function $h(d,g,y,E,k,z){if(!g)throw Error("Invalid event type");var J=f(k)?!!k.capture:!!k,Fe=vs(d);if(Fe||(d[za]=Fe=new bo(d)),y=Fe.add(g,y,E,J,z),y.proxy)return y;if(E=Hh(),y.proxy=E,E.src=d,E.listener=y,d.addEventListener)Ge||(k=J),k===void 0&&(k=!1),d.addEventListener(g.toString(),E,k);else if(d.attachEvent)d.attachEvent(qh(g.toString()),E);else if(d.addListener&&d.removeListener)d.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Hh(){function d(y){return g.call(d.src,d.listener,y)}let g=v_;return d}function Ua(d,g,y,E,k){if(Array.isArray(g)){for(var z=0;z<g.length;z++)Ua(d,g[z],y,E,k);return null}return y=qa(y),d&&d[yo]?d.L(g,y,f(E)?!!E.capture:!!E,k):$h(d,g,y,!0,E,k)}function au(d,g,y,E,k){if(Array.isArray(g))for(var z=0;z<g.length;z++)au(d,g[z],y,E,k);else E=f(E)?!!E.capture:!!E,y=qa(y),d&&d[yo]?(d=d.i,g=String(g).toString(),g in d.g&&(z=d.g[g],y=ja(z,y,E,k),-1<y&&(tr(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete d.g[g],d.h--)))):d&&(d=vs(d))&&(g=d.g[g.toString()],d=-1,g&&(d=ja(g,y,E,k)),(y=-1<d?g[d]:null)&&$a(y))}function $a(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[yo])su(g.i,d);else{var y=d.type,E=d.proxy;g.removeEventListener?g.removeEventListener(y,E,d.capture):g.detachEvent?g.detachEvent(qh(y),E):g.addListener&&g.removeListener&&g.removeListener(E),(y=vs(g))?(su(y,d),y.h==0&&(y.src=null,g[za]=null)):tr(d)}}}function qh(d){return d in gs?gs[d]:gs[d]="on"+d}function v_(d,g){if(d.da)d=!0;else{g=new kn(g,this);var y=d.listener,E=d.ha||d.src;d.fa&&$a(d),d=y.call(E,g)}return d}function vs(d){return d=d[za],d instanceof bo?d:null}var Ha="__closure_events_fn_"+(1e9*Math.random()>>>0);function qa(d){return typeof d=="function"?d:(d[Ha]||(d[Ha]=function(g){return d.handleEvent(g)}),d[Ha])}function ln(){lt.call(this),this.i=new bo(this),this.M=this,this.F=null}M(ln,lt),ln.prototype[yo]=!0,ln.prototype.removeEventListener=function(d,g,y,E){au(this,d,g,y,E)};function un(d,g){var y,E=d.F;if(E)for(y=[];E;E=E.F)y.push(E);if(d=d.M,E=g.type||g,typeof g=="string")g=new xe(g,d);else if(g instanceof xe)g.target=g.target||d;else{var k=g;g=new xe(E,d),A(g,k)}if(k=!0,y)for(var z=y.length-1;0<=z;z--){var J=g.g=y[z];k=ys(J,E,!0,g)&&k}if(J=g.g=d,k=ys(J,E,!0,g)&&k,k=ys(J,E,!1,g)&&k,y)for(z=0;z<y.length;z++)J=g.g=y[z],k=ys(J,E,!1,g)&&k}ln.prototype.N=function(){if(ln.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],E=0;E<y.length;E++)tr(y[E]);delete d.g[g],d.h--}}this.F=null},ln.prototype.K=function(d,g,y,E){return this.i.add(String(d),g,!1,y,E)},ln.prototype.L=function(d,g,y,E){return this.i.add(String(d),g,!0,y,E)};function ys(d,g,y,E){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var k=!0,z=0;z<g.length;++z){var J=g[z];if(J&&!J.da&&J.capture==y){var Fe=J.listener,kt=J.ha||J.src;J.fa&&su(d.i,J),k=Fe.call(kt,E)!==!1&&k}}return k&&!E.defaultPrevented}function Gh(d,g,y){if(typeof d=="function")y&&(d=b(d,y));else if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function cu(d){d.g=Gh(()=>{d.g=null,d.i&&(d.i=!1,cu(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class lu extends lt{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:cu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(d){lt.call(this),this.h=d,this.g={}}M(wo,lt);var Wh=[];function Io(d){le(d.g,function(g,y){this.g.hasOwnProperty(y)&&$a(g)},d),d.g={}}wo.prototype.N=function(){wo.aa.N.call(this),Io(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uu=c.JSON.stringify,y_=c.JSON.parse,Zh=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Ga(){}Ga.prototype.h=null;function du(d){return d.h||(d.h=d.i())}function Kh(){}var bs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function hu(){xe.call(this,"d")}M(hu,xe);function fu(){xe.call(this,"c")}M(fu,xe);var Lr={},Qh=null;function Eo(){return Qh=Qh||new ln}Lr.La="serverreachability";function Yh(d){xe.call(this,Lr.La,d)}M(Yh,xe);function ws(d){let g=Eo();un(g,new Yh(g))}Lr.STAT_EVENT="statevent";function Xh(d,g){xe.call(this,Lr.STAT_EVENT,d),this.stat=g}M(Xh,xe);function _n(d){let g=Eo();un(g,new Xh(g,d))}Lr.Ma="timingevent";function ti(d,g){xe.call(this,Lr.Ma,d),this.size=g}M(ti,xe);function de(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function Co(){this.g=!0}Co.prototype.xa=function(){this.g=!1};function Jh(d,g,y,E,k,z){d.info(function(){if(d.g)if(z)for(var J="",Fe=z.split("&"),kt=0;kt<Fe.length;kt++){var Qe=Fe[kt].split("=");if(1<Qe.length){var It=Qe[0];Qe=Qe[1];var dn=It.split("_");J=2<=dn.length&&dn[1]=="type"?J+(It+"="+Qe+"&"):J+(It+"=redacted&")}}else J=null;else J=z;return"XMLHTTP REQ ("+E+") [attempt "+k+"]: "+g+`
`+y+`
`+J})}function ef(d,g,y,E,k,z,J){d.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+k+"]: "+g+`
`+y+`
`+z+" "+J})}function Fr(d,g,y,E){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+tf(d,y)+(E?" "+E:"")})}function pu(d,g){d.info(function(){return"TIMEOUT: "+g})}Co.prototype.info=function(){};function tf(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var E=y[d];if(!(2>E.length)){var k=E[1];if(Array.isArray(k)&&!(1>k.length)){var z=k[0];if(z!="noop"&&z!="stop"&&z!="close")for(var J=1;J<k.length;J++)k[J]=""}}}}return uu(y)}catch{return g}}var Oi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},mu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gu;function Wa(){}M(Wa,Ga),Wa.prototype.g=function(){return new XMLHttpRequest},Wa.prototype.i=function(){return{}},gu=new Wa;function nr(d,g,y,E){this.j=d,this.i=g,this.l=y,this.R=E||1,this.U=new wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nf}function nf(){this.i=null,this.g="",this.h=!1}var _u={},vu={};function xo(d,g,y){d.L=1,d.v=To(vn(g)),d.m=y,d.P=!0,rf(d,null)}function rf(d,g){d.F=Date.now(),Za(d),d.A=vn(d.v);var y=d.A,E=d.R;Array.isArray(E)||(E=[String(E)]),ut(y.i,"t",E),d.C=0,y=d.j.J,d.h=new nf,d.g=ks(d.j,y?g:null,!d.m),0<d.O&&(d.M=new lu(b(d.Y,d,d.g),d.O)),g=d.U,y=d.g,E=d.ca;var k="readystatechange";Array.isArray(k)||(k&&(Wh[0]=k.toString()),k=Wh);for(var z=0;z<k.length;z++){var J=_s(y,k[z],E||g.handleEvent,!1,g.h||g);if(!J)break;g.g[J.key]=J}g=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),ws(),Jh(d.i,d.u,d.A,d.l,d.R,d.m)}nr.prototype.ca=function(d){d=d.target;let g=this.M;g&&ii(d)==3?g.j():this.Y(d)},nr.prototype.Y=function(d){try{if(d==this.g)e:{let dn=ii(this.g);var g=this.g.Ba();let oi=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||df(this.g)))){this.J||dn!=4||g==7||(g==8||0>=oi?ws(3):ws(2)),Is(this);var y=this.g.Z();this.X=y;t:if(of(this)){var E=df(this.g);d="";var k=E.length,z=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ir(this),Li(this);var J="";break t}this.h.i=new c.TextDecoder}for(g=0;g<k;g++)this.h.h=!0,d+=this.h.i.decode(E[g],{stream:!(z&&g==k-1)});E.length=0,this.h.g+=d,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=y==200,ef(this.i,this.u,this.A,this.l,this.R,dn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,kt=this.g;if((Fe=kt.g?kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(Fe)){var Qe=Fe;break t}}Qe=null}if(y=Qe)Fr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ka(this,y);else{this.o=!1,this.s=3,_n(12),ir(this),Li(this);break e}}if(this.P){y=!0;let si;for(;!this.J&&this.C<J.length;)if(si=b_(this,J),si==vu){dn==4&&(this.s=4,_n(14),y=!1),Fr(this.i,this.l,null,"[Incomplete Response]");break}else if(si==_u){this.s=4,_n(15),Fr(this.i,this.l,J,"[Invalid Chunk]"),y=!1;break}else Fr(this.i,this.l,si,null),Ka(this,si);if(of(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||J.length!=0||this.h.h||(this.s=1,_n(16),y=!1),this.o=this.o&&y,!y)Fr(this.i,this.l,J,"[Invalid Chunked Response]"),ir(this),Li(this);else if(0<J.length&&!this.W){this.W=!0;var It=this.j;It.g==this&&It.ba&&!It.M&&(It.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),tc(It),It.M=!0,_n(11))}}else Fr(this.i,this.l,J,null),Ka(this,J);dn==4&&ir(this),this.o&&!this.J&&(dn==4?mf(this.j,this):(this.o=!1,Za(this)))}else hf(this.g),y==400&&0<J.indexOf("Unknown SID")?(this.s=3,_n(12)):(this.s=0,_n(13)),ir(this),Li(this)}}}catch{}finally{}};function of(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function b_(d,g){var y=d.C,E=g.indexOf(`
`,y);return E==-1?vu:(y=Number(g.substring(y,E)),isNaN(y)?_u:(E+=1,E+y>g.length?vu:(g=g.slice(E,E+y),d.C=E+y,g)))}nr.prototype.cancel=function(){this.J=!0,ir(this)};function Za(d){d.S=Date.now()+d.I,sf(d,d.I)}function sf(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=de(b(d.ba,d),g)}function Is(d){d.B&&(c.clearTimeout(d.B),d.B=null)}nr.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(pu(this.i,this.A),this.L!=2&&(ws(),_n(17)),ir(this),this.s=2,Li(this)):sf(this,this.S-d)};function Li(d){d.j.G==0||d.J||mf(d.j,d)}function ir(d){Is(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Io(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Ka(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||rr(y.h,d))){if(!d.K&&rr(y.h,d)&&y.G==3){try{var E=y.Da.g.parse(g)}catch{E=null}if(Array.isArray(E)&&E.length==3){var k=E;if(k[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)nc(y),Xa(y);else break e;Mu(y),_n(18)}}else y.za=k[1],0<y.za-y.T&&37500>k[2]&&y.F&&y.v==0&&!y.C&&(y.C=de(b(y.Za,y),6e3));if(1>=Cs(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else zr(y,11)}else if((d.K||y.g==d)&&nc(y),!Q(g))for(k=y.Da.g.parse(g),g=0;g<k.length;g++){let Qe=k[g];if(y.T=Qe[0],Qe=Qe[1],y.G==2)if(Qe[0]=="c"){y.K=Qe[1],y.ia=Qe[2];let It=Qe[3];It!=null&&(y.la=It,y.j.info("VER="+y.la));let dn=Qe[4];dn!=null&&(y.Aa=dn,y.j.info("SVER="+y.Aa));let oi=Qe[5];oi!=null&&typeof oi=="number"&&0<oi&&(E=1.5*oi,y.L=E,y.j.info("backChannelRequestTimeoutMs_="+E)),E=y;let si=d.g;if(si){let cr=si.g?si.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cr){var z=E.h;z.g||cr.indexOf("spdy")==-1&&cr.indexOf("quic")==-1&&cr.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(or(z,z.h),z.h=null))}if(E.D){let oc=si.g?si.g.getResponseHeader("X-HTTP-Session-Id"):null;oc&&(E.ya=oc,it(E.I,E.D,oc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),E=y;var J=d;if(E.qa=ku(E,E.J?E.ia:null,E.W),J.K){Qa(E.h,J);var Fe=J,kt=E.L;kt&&(Fe.I=kt),Fe.B&&(Is(Fe),Za(Fe)),E.g=J}else ec(E);0<y.i.length&&Ja(y)}else Qe[0]!="stop"&&Qe[0]!="close"||zr(y,7);else y.G==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?zr(y,7):Rs(y):Qe[0]!="noop"&&y.l&&y.l.ta(Qe),y.v=0)}}ws(4)}catch{}}var Es=class{constructor(d,g){this.g=d,this.map=g}};function Ke(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Cs(d){return d.h?1:d.g?d.g.size:0}function rr(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function or(d,g){d.g?d.g.add(g):d.h=g}function Qa(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Ke.prototype.cancel=function(){if(this.i=Me(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Me(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return P(d.i)}function Lt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,E=0;E<y;E++)g.push(d[E]);return g}g=[],y=0;for(E in d)g[y++]=d[E];return g}function yu(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let E in d)g[y++]=E;return g}}}function xs(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=yu(d),E=Lt(d),k=E.length,z=0;z<k;z++)g.call(void 0,E[z],y&&y[z],d)}var Nn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function w_(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var E=d[y].indexOf("="),k=null;if(0<=E){var z=d[y].substring(0,E);k=d[y].substring(E+1)}else z=d[y];g(z,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function pi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof pi){this.h=d.h,At(this,d.j),this.o=d.o,this.g=d.g,mi(this,d.s),this.l=d.l;var g=d.i,y=new Br;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Do(this,y),this.m=d.m}else d&&(g=String(d).match(Nn))?(this.h=!1,At(this,g[1]||"",!0),this.o=Fi(g[2]||""),this.g=Fi(g[3]||"",!0),mi(this,g[4]),this.l=Fi(g[5]||"",!0),Do(this,g[6]||"",!0),this.m=Fi(g[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}pi.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Vr(g,Ds,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Vr(g,Ds,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Vr(y,y.charAt(0)=="/"?Iu:wu,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Vr(y,af)),d.join("")};function vn(d){return new pi(d)}function At(d,g,y){d.j=y?Fi(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function mi(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Do(d,g,y){g instanceof Br?(d.i=g,Eu(d.i,d.h)):(y||(g=Vr(g,Ya)),d.i=new Br(g,d.h))}function it(d,g,y){d.i.set(g,y)}function To(d){return it(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Fi(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Vr(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,bu),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function bu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Ds=/[#\/\?@]/g,wu=/[#\?:]/g,Iu=/[#\?]/g,Ya=/[#\?@]/g,af=/#/g;function Br(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function sr(d){d.g||(d.g=new Map,d.h=0,d.i&&w_(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Br.prototype,t.add=function(d,g){sr(this),this.i=null,d=jr(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function De(d,g){sr(d),g=jr(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function ni(d,g){return sr(d),g=jr(d,g),d.g.has(g)}t.forEach=function(d,g){sr(this),this.g.forEach(function(y,E){y.forEach(function(k){d.call(g,k,E,this)},this)},this)},t.na=function(){sr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let E=0;E<g.length;E++){let k=d[E];for(let z=0;z<k.length;z++)y.push(g[E])}return y},t.V=function(d){sr(this);let g=[];if(typeof d=="string")ni(this,d)&&(g=g.concat(this.g.get(jr(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return sr(this),this.i=null,d=jr(this,d),ni(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function ut(d,g,y){De(d,g),0<y.length&&(d.i=null,d.g.set(jr(d,g),P(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var E=g[y];let z=encodeURIComponent(String(E)),J=this.V(E);for(E=0;E<J.length;E++){var k=z;J[E]!==""&&(k+="="+encodeURIComponent(String(J[E]))),d.push(k)}}return this.i=d.join("&")};function jr(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function Eu(d,g){g&&!d.j&&(sr(d),d.i=null,d.g.forEach(function(y,E){var k=E.toLowerCase();E!=k&&(De(this,E),ut(this,k,y))},d)),d.j=g}function Cu(d,g){let y=new Co;if(c.Image){let E=new Image;E.onload=I(xn,y,"TestLoadImage: loaded",!0,g,E),E.onerror=I(xn,y,"TestLoadImage: error",!1,g,E),E.onabort=I(xn,y,"TestLoadImage: abort",!1,g,E),E.ontimeout=I(xn,y,"TestLoadImage: timeout",!1,g,E),c.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=d}else g(!1)}function xu(d,g){let y=new Co,E=new AbortController,k=setTimeout(()=>{E.abort(),xn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:E.signal}).then(z=>{clearTimeout(k),z.ok?xn(y,"TestPingServer: ok",!0,g):xn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(k),xn(y,"TestPingServer: error",!1,g)})}function xn(d,g,y,E,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),E(y)}catch{}}function Du(){this.g=new Zh}function Ts(d,g,y){let E=y||"";try{xs(d,function(k,z){let J=k;f(k)&&(J=uu(k)),g.push(E+z+"="+encodeURIComponent(J))})}catch(k){throw g.push(E+"type="+encodeURIComponent("_badmap")),k}}function Ft(d){this.l=d.Ub||null,this.j=d.eb||!1}M(Ft,Ga),Ft.prototype.g=function(){return new gi(this.l,this.j)},Ft.prototype.i=function(d){return function(){return d}}({});function gi(d,g){ln.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(gi,ln),t=gi.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Ss(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,So(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ss(this)),this.g&&(this.readyState=3,Ss(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?So(this):Ss(this),this.readyState==3&&Tu(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,So(this))},t.Qa=function(d){this.g&&(this.response=d,So(this))},t.ga=function(){this.g&&So(this)};function So(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Ss(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function Ss(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(gi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Su(d){let g="";return le(d,function(y,E){g+=E,g+=":",g+=y,g+=`\r
`}),g}function As(d,g,y){e:{for(E in y){var E=!1;break e}E=!0}E||(y=Su(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):it(d,g,y))}function Rt(d){ln.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Rt,ln);var cf=/^https?$/i,We=["POST","PUT"];t=Rt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gu.g(),this.v=this.o?du(this.o):du(gu),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(z){lf(this,z);return}if(d=y||"",y=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var k in E)y.set(k,E[k]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(let z of E.keys())y.set(z,E.get(z));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),k=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(We,g,void 0))||E||k||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[z,J]of y)this.g.setRequestHeader(z,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{uf(this),this.u=!0,this.g.send(d),this.u=!1}catch(z){lf(this,z)}};function lf(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Hn(d),Ms(d)}function Hn(d){d.A||(d.A=!0,un(d,"complete"),un(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,un(this,"complete"),un(this,"abort"),Ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ao(this):this.bb())},t.bb=function(){Ao(this)};function Ao(d){if(d.h&&typeof a<"u"&&(!d.v[1]||ii(d)!=4||d.Z()!=2)){if(d.u&&ii(d)==4)Gh(d.Ea,0,d);else if(un(d,"readystatechange"),ii(d)==4){d.h=!1;try{let J=d.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var E;if(E=J===0){var k=String(d.D).match(Nn)[1]||null;!k&&c.self&&c.self.location&&(k=c.self.location.protocol.slice(0,-1)),E=!cf.test(k?k.toLowerCase():"")}y=E}if(y)un(d,"complete"),un(d,"success");else{d.m=6;try{var z=2<ii(d)?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.Z()+"]",Hn(d)}}finally{Ms(d)}}}}function Ms(d,g){if(d.g){uf(d);let y=d.g,E=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||un(d,"ready");try{y.onreadystatechange=E}catch{}}}function uf(d){d.I&&(c.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ii(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),y_(g)}};function df(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function hf(d){let g={};d=(d.g&&2<=ii(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<d.length;E++){if(Q(d[E]))continue;var y=R(d[E]);let k=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let z=g[k]||[];g[k]=z,z.push(y)}S(g,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function ff(d){this.Aa=0,this.i=[],this.j=new Co,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ps("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ps("baseRetryDelayMs",5e3,d),this.cb=Ps("retryDelaySeedMs",1e4,d),this.Wa=Ps("forwardChannelMaxRetries",2,d),this.wa=Ps("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ke(d&&d.concurrentRequestLimit),this.Da=new Du,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ff.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,E){_n(0),this.W=d,this.H=g||{},y&&E!==void 0&&(this.H.OSID=y,this.H.OAID=E),this.F=this.X,this.I=ku(this,null,this.W),Ja(this)};function Rs(d){if(ri(d),d.G==3){var g=d.U++,y=vn(d.I);if(it(y,"SID",d.K),it(y,"RID",g),it(y,"TYPE","terminate"),Mo(d,y),g=new nr(d,d.j,g),g.L=2,g.v=To(vn(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=ks(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Za(g)}Ru(d)}function Xa(d){d.g&&(tc(d),d.g.cancel(),d.g=null)}function ri(d){Xa(d),d.u&&(c.clearTimeout(d.u),d.u=null),nc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Ja(d){if(!wt(d.h)&&!d.s){d.s=!0;var g=d.Ga;vo||gn(),we||(vo(),we=!0),mt.add(g,d),d.B=0}}function pf(d,g){return Cs(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=de(b(d.Ga,d,g),ic(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let k=new nr(this,this.j,d),z=this.o;if(this.S&&(z?(z=C(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(k.H=z,z=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var E=this.i[y];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(g+=E,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Au(this,k,g),y=vn(this.I),it(y,"RID",d),it(y,"CVER",22),this.D&&it(y,"X-HTTP-Session-Id",this.D),Mo(this,y),z&&(this.O?g="headers="+encodeURIComponent(String(Su(z)))+"&"+g:this.m&&As(y,this.m,z)),or(this.h,k),this.Ua&&it(y,"TYPE","init"),this.P?(it(y,"$req",g),it(y,"SID","null"),k.T=!0,xo(k,y,null)):xo(k,y,g),this.G=2}}else this.G==3&&(d?Vi(this,d):this.i.length==0||wt(this.h)||Vi(this))};function Vi(d,g){var y;g?y=g.l:y=d.U++;let E=vn(d.I);it(E,"SID",d.K),it(E,"RID",y),it(E,"AID",d.T),Mo(d,E),d.m&&d.o&&As(E,d.m,d.o),y=new nr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Au(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),or(d.h,y),xo(y,E,g)}function Mo(d,g){d.H&&le(d.H,function(y,E){it(g,E,y)}),d.l&&xs({},function(y,E){it(g,E,y)})}function Au(d,g,y){y=Math.min(d.i.length,y);var E=d.l?b(d.l.Na,d.l,d):null;e:{var k=d.i;let z=-1;for(;;){let J=["count="+y];z==-1?0<y?(z=k[0].g,J.push("ofs="+z)):z=0:J.push("ofs="+z);let Fe=!0;for(let kt=0;kt<y;kt++){let Qe=k[kt].g,It=k[kt].map;if(Qe-=z,0>Qe)z=Math.max(0,k[kt].g-100),Fe=!1;else try{Ts(It,J,"req"+Qe+"_")}catch{E&&E(It)}}if(Fe){E=J.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,E}function ec(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;vo||gn(),we||(vo(),we=!0),mt.add(g,d),d.v=0}}function Mu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=de(b(d.Fa,d),ic(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Pu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=de(b(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_n(10),Xa(this),Pu(this))};function tc(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function Pu(d){d.g=new nr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=vn(d.qa);it(g,"RID","rpc"),it(g,"SID",d.K),it(g,"AID",d.T),it(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&it(g,"TO",d.ja),it(g,"TYPE","xmlhttp"),Mo(d,g),d.m&&d.o&&As(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=To(vn(g)),y.m=null,y.P=!0,rf(y,d)}t.Za=function(){this.C!=null&&(this.C=null,Xa(this),Mu(this),_n(19))};function nc(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function mf(d,g){var y=null;if(d.g==g){nc(d),tc(d),d.g=null;var E=2}else if(rr(d.h,g))y=g.D,Qa(d.h,g),E=1;else return;if(d.G!=0){if(g.o)if(E==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var k=d.B;E=Eo(),un(E,new ti(E,y)),Ja(d)}else ec(d);else if(k=g.s,k==3||k==0&&0<g.X||!(E==1&&pf(d,g)||E==2&&Mu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),k){case 1:zr(d,5);break;case 4:zr(d,10);break;case 3:zr(d,6);break;default:zr(d,2)}}}function ic(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function zr(d,g){if(d.j.info("Error code "+g),g==2){var y=b(d.fb,d),E=d.Xa;let k=!E;E=new pi(E||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||At(E,"https"),To(E),k?Cu(E.toString(),y):xu(E.toString(),y)}else _n(2);d.G=0,d.l&&d.l.sa(g),Ru(d),ri(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),_n(2)):(this.j.info("Failed to ping google.com"),_n(1))};function Ru(d){if(d.G=0,d.ka=[],d.l){let g=Me(d.h);(g.length!=0||d.i.length!=0)&&(F(d.ka,g),F(d.ka,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.ra()}}function ku(d,g,y){var E=y instanceof pi?vn(y):new pi(y);if(E.g!="")g&&(E.g=g+"."+E.g),mi(E,E.s);else{var k=c.location;E=k.protocol,g=g?g+"."+k.hostname:k.hostname,k=+k.port;var z=new pi(null);E&&At(z,E),g&&(z.g=g),k&&mi(z,k),y&&(z.l=y),E=z}return y=d.D,g=d.ya,y&&g&&it(E,y,g),it(E,"VER",d.la),Mo(d,E),E}function ks(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Rt(new Ft({eb:y})):new Rt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ar(){}t=ar.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function rc(){}rc.prototype.g=function(d,g){return new on(d,g)};function on(d,g){ln.call(this),this.g=new ff(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!Q(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!Q(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Ur(this)}M(on,ln),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){Rs(this.g)},on.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=uu(d),d=y);g.i.push(new Es(g.Ya++,d)),g.G==3&&Ja(g)},on.prototype.N=function(){this.g.l=null,delete this.j,Rs(this.g),delete this.g,on.aa.N.call(this)};function On(d){hu.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}M(On,hu);function Nu(){fu.call(this),this.status=1}M(Nu,fu);function Ur(d){this.g=d}M(Ur,ar),Ur.prototype.ua=function(){un(this.g,"a")},Ur.prototype.ta=function(d){un(this.g,new On(d))},Ur.prototype.sa=function(d){un(this.g,new Nu)},Ur.prototype.ra=function(){un(this.g,"b")},rc.prototype.createWebChannel=rc.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Z0=ao.createWebChannelTransport=function(){return new rc},W0=ao.getStatEventTarget=function(){return Eo()},G0=ao.Event=Lr,Qm=ao.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Oi.NO_ERROR=0,Oi.TIMEOUT=8,Oi.HTTP_ERROR=6,eh=ao.ErrorCode=Oi,mu.COMPLETE="complete",q0=ao.EventType=mu,Kh.EventType=bs,bs.OPEN="a",bs.CLOSE="b",bs.ERROR="c",bs.MESSAGE="d",ln.prototype.listen=ln.prototype.K,gl=ao.WebChannel=Kh,H0=ao.FetchXmlHttpFactory=Ft,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,$0=ao.XhrIo=Rt}).apply(typeof Km<"u"?Km:typeof self<"u"?self:typeof window<"u"?window:{});var dM="@firebase/firestore";var tn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");var Wl="10.12.1";var is=new Af("@firebase/firestore");function wl(){return is.logLevel}function dP(t){is.setLogLevel(t)}function K(t,...e){if(is.logLevel<=ur.DEBUG){let n=e.map(YI);is.debug(`Firestore (${Wl}): ${t}`,...n)}}function Zt(t,...e){if(is.logLevel<=ur.ERROR){let n=e.map(YI);is.error(`Firestore (${Wl}): ${t}`,...n)}}function Pi(t,...e){if(is.logLevel<=ur.WARN){let n=e.map(YI);is.warn(`Firestore (${Wl}): ${t}`,...n)}}function YI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ae(t="Unexpected state"){let e=`FIRESTORE (${Wl}) INTERNAL ASSERTION FAILED: `+t;throw Zt(e),new Error(e)}function fe(t,e){t||ae()}function hP(t,e){t||ae()}function re(t,e){return t}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends _C{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var nn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var ag=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},J0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(tn.UNAUTHENTICATED))}shutdown(){}},ew=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},tw=class{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve(),o=new nn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new nn,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>U(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new nn)}},0),a()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string"),new ag(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new tn(e)}},nw=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},iw=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new nw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(tn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},rw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ow=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new rw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function i$(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var cg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=i$(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function Ne(t,e){return t<e?-1:t>e?1:0}function Ml(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function fP(t){return t+"\0"}var zt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var me=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new zt(0,0))}static max(){return new t(new zt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var lg=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&ae(),i===void 0?i=e.length-n:i>e.length-n&&ae(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Xe=class t extends lg{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new G($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},r$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kt=class t extends lg{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return r$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new G($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},a=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new G($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new G($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ie=class t{constructor(e){this.path=e}static fromPath(e){return new t(Xe.fromString(e))}static fromName(e){return new t(Xe.fromString(e).popFirst(5))}static empty(){return new t(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Xe(e.slice()))}};var Pl=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function sw(t){return t.fields.find(e=>e.kind===2)}function ma(t){return t.fields.filter(e=>e.kind!==2)}Pl.UNKNOWN_ID=-1;var Tl=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var hh=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ri.min())}};function pP(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=me.fromTimestamp(i===1e9?new zt(n+1,0):new zt(n,i));return new Ri(r,ie.empty(),e)}function mP(t){return new Ri(t.readTime,t.key,-1)}var Ri=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(me.min(),ie.empty(),-1)}static max(){return new t(me.max(),ie.empty(),-1)}};function XI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ie.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}var gP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ug=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function fs(t){return U(this,null,function*(){if(t.code!==$.FAILED_PRECONDITION||t.message!==gP)throw t;K("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},u=>i(u))}),a=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,a=new Array(o),c=0;for(let u=0;u<o;u++){let f=u;n(e[f]).next(m=>{a[f]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var dg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new nn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new wa(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=JI(i.target.error);this.V.reject(new wa(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new wa(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(K("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new cw(n)}},rs=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Vu())===12.2&&Zt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return K("SimpleDb","Removing database:",e),ga(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Sf())return!1;if(t.C())return!0;let e=Vu(),n=t.S(e),i=0<n&&n<10,r=_P(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return U(this,null,function*(){return this.db||(K("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let a=o.target.result;n(a)},r.onblocked=()=>{i(new wa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let a=o.target.error;a.name==="VersionError"?i(new G($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new G($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new wa(e,a))},r.onupgradeneeded=o=>{K("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let a=o.target.result;this.p.O(a,r.transaction,o.oldVersion,this.version).next(()=>{K("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return U(this,null,function*(){let o=n==="readonly",a=0;for(;;){++a;try{this.db=yield this.M(e);let c=dg.open(this.db,e,o?"readonly":"readwrite",i),u=r(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),B.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){let u=c,f=u.name!=="FirebaseError"&&a<3;if(K("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),this.close(),!f)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function _P(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var aw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ga(this.B.delete())}},wa=class extends G{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ps(t){return t.name==="IndexedDbTransactionError"}var cw=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(K("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(K("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ga(i)}add(e){return K("SimpleDb","ADD",this.store.name,e,e),ga(this.store.add(e))}get(e){return ga(this.store.get(e)).next(n=>(n===void 0&&(n=null),K("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return K("SimpleDb","DELETE",this.store.name,e),ga(this.store.delete(e))}count(){return K("SimpleDb","COUNT",this.store.name),ga(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new B((a,c)=>{o.onerror=u=>{c(u.target.error)},o.onsuccess=u=>{a(u.target.result)}})}{let o=this.cursor(i),a=[];return this.W(o,(c,u)=>{a.push(u)}).next(()=>a)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new B((r,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}j(e,n){K("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,a,c)=>c.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new B((i,r)=>{n.onerror=o=>{let a=JI(o.target.error);r(a)},n.onsuccess=o=>{let a=o.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():i()}):i()}})}W(e,n){let i=[];return new B((r,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{let c=a.target.result;if(!c)return void r();let u=new aw(c),f=n(c.primaryKey,c.value,u);if(f instanceof B){let m=f.catch(_=>(u.done(),B.reject(_)));i.push(m)}u.isDone?r():u.K===null?c.continue():c.continue(u.K)}}).next(()=>B.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ga(t){return new B((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=JI(i.target.error);n(r)}})}var hM=!1;function JI(t){let e=rs.S(Vu());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hM||(hM=!0,setTimeout(()=>{throw i},0)),i}}return t}var lw=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){K("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>U(this,null,function*(){this.task=null;try{K("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ps(n)?K("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield fs(n)}yield this.X(6e4)}))}},uw=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return U(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return B.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return K("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,r).next(c=>{r-=c,i.add(a)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(r,o)).next(c=>(K("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>a.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let a=mP(o);XI(a,i)>0&&(i=a)}),new Ri(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var hi=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Nh(t){return t==null}function fh(t){return t===0&&1/t==-1/0}function vP(t){return typeof t=="number"&&Number.isInteger(t)&&!fh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function zn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=fM(e)),e=o$(t.get(n),e);return fM(e)}function o$(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function fM(t){return t+""}function xr(t){let e=t.length;if(fe(e>=2),e===2)return fe(t.charAt(0)===""&&t.charAt(1)===""),Xe.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let a=t.indexOf("",o);switch((a<0||a>n)&&ae(),t.charAt(a+1)){case"":let c=t.substring(o,a),u;r.length===0?u=c:(r+=c,u=r,r=""),i.push(u);break;case"":r+=t.substring(o,a),r+="\0";break;case"":r+=t.substring(o,a+1);break;default:ae()}o=a+2}return new Xe(i)}var pM=["userId","batchId"];function tg(t,e){return[t,zn(e)]}function yP(t,e,n){return[t,zn(e),n]}var s$={},a$=["prefixPath","collectionGroup","readTime","documentId"],c$=["prefixPath","collectionGroup","documentId"],l$=["collectionGroup","readTime","prefixPath","documentId"],u$=["canonicalId","targetId"],d$=["targetId","path"],h$=["path","targetId"],f$=["collectionId","parent"],p$=["indexId","uid"],m$=["uid","sequenceNumber"],g$=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_$=["indexId","uid","orderedDocumentKey"],v$=["userId","collectionPath","documentId"],y$=["userId","collectionPath","largestBatchId"],b$=["userId","collectionGroup","largestBatchId"],bP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],w$=[...bP,"documentOverlays"],wP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],IP=wP,EP=[...IP,"indexConfiguration","indexState","indexEntries"],I$=EP;var ph=class extends ug{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function mn(t,e){let n=re(t);return rs.F(n._e,e)}function mM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ka(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function CP(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Pt=class t{constructor(e,n){this.comparator=e,this.root=n||Tr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Dl(this.root,e,this.comparator,!0)}},Dl=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Tr=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ae();let e=this.left.check();if(e!==this.right.check())throw ae();return e+(this.isRed()?0:1)}};Tr.EMPTY=null,Tr.RED=!0,Tr.BLACK=!1;Tr.EMPTY=new class{constructor(){this.size=0}get key(){throw ae()}get value(){throw ae()}get color(){throw ae()}get left(){throw ae()}get right(){throw ae()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Tr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var bt=class t{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hg(this.data.getIterator())}getIteratorFrom(e){return new hg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},hg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function _l(t){return t.hasNext()?t.getNext():void 0}var fi=class t{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new t([])}unionWith(e){let n=new bt(Kt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ml(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var fg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function xP(){return typeof atob<"u"}var pn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new fg("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pn.EMPTY_BYTE_STRING=new pn("");var E$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function uo(t){if(fe(!!t),typeof t=="string"){let e=0,n=E$.exec(t);if(fe(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:$t(t.seconds),nanos:$t(t.nanos)}}function $t(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?pn.fromBase64String(t):pn.fromUint8Array(t)}function i_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function eE(t){let e=t.mapValue.fields.__previous_value__;return i_(e)?eE(e):e}function mh(t){let e=uo(t.mapValue.fields.__local_write_time__.timestampValue);return new zt(e.seconds,e.nanos)}var dw=class{constructor(e,n,i,r,o,a,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f}},ss=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ts={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ng={nullValue:"NULL_VALUE"};function Ia(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?i_(t)?4:DP(t)?9007199254740991:10:ae()}function Mr(t,e){if(t===e)return!0;let n=Ia(t);if(n!==Ia(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return mh(t).isEqual(mh(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=uo(r.timestampValue),c=uo(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return os(r.bytesValue).isEqual(os(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return $t(r.geoPointValue.latitude)===$t(o.geoPointValue.latitude)&&$t(r.geoPointValue.longitude)===$t(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return $t(r.integerValue)===$t(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=$t(r.doubleValue),c=$t(o.doubleValue);return a===c?fh(a)===fh(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Ml(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:return function(r,o){let a=r.mapValue.fields||{},c=o.mapValue.fields||{};if(mM(a)!==mM(c))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Mr(a[u],c[u])))return!1;return!0}(t,e);default:return ae()}}function gh(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function as(t,e){if(t===e)return 0;let n=Ia(t),i=Ia(e);if(n!==i)return Ne(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(o,a){let c=$t(o.integerValue||o.doubleValue),u=$t(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return gM(t.timestampValue,e.timestampValue);case 4:return gM(mh(t),mh(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(o,a){let c=os(o),u=os(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){let c=o.split("/"),u=a.split("/");for(let f=0;f<c.length&&f<u.length;f++){let m=Ne(c[f],u[f]);if(m!==0)return m}return Ne(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){let c=Ne($t(o.latitude),$t(a.latitude));return c!==0?c:Ne($t(o.longitude),$t(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,a){let c=o.values||[],u=a.values||[];for(let f=0;f<c.length&&f<u.length;++f){let m=as(c[f],u[f]);if(m)return m}return Ne(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,a){if(o===ts.mapValue&&a===ts.mapValue)return 0;if(o===ts.mapValue)return 1;if(a===ts.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let _=0;_<u.length&&_<m.length;++_){let b=Ne(u[_],m[_]);if(b!==0)return b;let I=as(c[u[_]],f[m[_]]);if(I!==0)return I}return Ne(u.length,m.length)}(t.mapValue,e.mapValue);default:throw ae()}}function gM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);let n=uo(t),i=uo(e),r=Ne(n.seconds,i.seconds);return r!==0?r:Ne(n.nanos,i.nanos)}function Rl(t){return hw(t)}function hw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=uo(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ie.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=hw(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${hw(n.fields[a])}`;return r+"}"}(t.mapValue):ae()}function Ea(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fw(t){return!!t&&"integerValue"in t}function _h(t){return!!t&&"arrayValue"in t}function _M(t){return!!t&&"nullValue"in t}function vM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ig(t){return!!t&&"mapValue"in t}function ah(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ka(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ah(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ah(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function C$(t){return"nullValue"in t?ng:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ea(ss.empty(),ie.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ae()}function x$(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ea(ss.empty(),ie.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ts:ae()}function yM(t,e){let n=as(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function bM(t,e){let n=as(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Rn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ig(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ah(n)}setAll(e){let n=Kt.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=ah(a):r.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());ig(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];ig(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ka(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(ah(this.value))}};function TP(t){let e=[];return ka(t.fields,(n,i)=>{let r=new Kt([n]);if(ig(i)){let o=TP(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new fi(e)}var rn=class t{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new t(e,0,me.min(),me.min(),me.min(),Rn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,me.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,me.min(),me.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,me.min(),me.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Pr=class{constructor(e,n){this.position=e,this.inclusive=n}};function wM(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ie.comparator(ie.fromName(a.referenceValue),n.key):i=as(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function IM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}var Ca=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function D$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var pg=class{},Ze=class t extends pg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new gw(e,n,i):n==="array-contains"?new yw(e,i):n==="in"?new mg(e,i):n==="not-in"?new bw(e,i):n==="array-contains-any"?new ww(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new _w(e,i):new vw(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(as(n,this.value)):n!==null&&Ia(this.value)===Ia(n)&&this.matchesComparison(as(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},ht=class t extends pg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return kl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function kl(t){return t.op==="and"}function pw(t){return t.op==="or"}function tE(t){return SP(t)&&kl(t)}function SP(t){for(let e of t.filters)if(e instanceof ht)return!1;return!0}function mw(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Rl(t.value);if(tE(t))return t.filters.map(e=>mw(e)).join(",");{let e=t.filters.map(n=>mw(n)).join(",");return`${t.op}(${e})`}}function AP(t,e){return t instanceof Ze?function(i,r){return r instanceof Ze&&i.op===r.op&&i.field.isEqual(r.field)&&Mr(i.value,r.value)}(t,e):t instanceof ht?function(i,r){return r instanceof ht&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,c)=>o&&AP(a,r.filters[c]),!0):!1}(t,e):void ae()}function MP(t,e){let n=t.filters.concat(e);return ht.create(n,t.op)}function PP(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Rl(n.value)}`}(t):t instanceof ht?function(n){return n.op.toString()+" {"+n.getFilters().map(PP).join(" ,")+"}"}(t):"Filter"}var gw=class extends Ze{constructor(e,n,i){super(e,n,i),this.key=ie.fromName(i.referenceValue)}matches(e){let n=ie.comparator(e.key,this.key);return this.matchesComparison(n)}},_w=class extends Ze{constructor(e,n){super(e,"in",n),this.keys=RP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},vw=class extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=RP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function RP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ie.fromName(i.referenceValue))}var yw=class extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return _h(n)&&gh(n.arrayValue,this.value)}},mg=class extends Ze{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&gh(this.value.arrayValue,n)}},bw=class extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(gh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!gh(this.value.arrayValue,n)}},ww=class extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!_h(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>gh(this.value.arrayValue,i))}};var Iw=class{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function Ew(t,e=null,n=[],i=[],r=null,o=null,a=null){return new Iw(t,e,n,i,r,o,a)}function xa(t){let e=re(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>mw(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Nh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Rl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Rl(i)).join(",")),e.ue=n}return e.ue}function Oh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!D$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!AP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IM(t.startAt,e.startAt)&&IM(t.endAt,e.endAt)}function gg(t){return ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function _g(t,e){return t.filters.filter(n=>n instanceof Ze&&n.field.isEqual(e))}function EM(t,e,n){let i=ng,r=!0;for(let o of _g(t,e)){let a=ng,c=!0;switch(o.op){case"<":case"<=":a=C$(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,c=!1;break;case"!=":case"not-in":a=ng}yM({value:i,inclusive:r},{value:a,inclusive:c})<0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];yM({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function CM(t,e,n){let i=ts,r=!0;for(let o of _g(t,e)){let a=ts,c=!0;switch(o.op){case">=":case">":a=x$(o.value),c=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,c=!1;break;case"!=":case"not-in":a=ts}bM({value:i,inclusive:r},{value:a,inclusive:c})>0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];bM({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}var Ki=class{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function kP(t,e,n,i,r,o,a,c){return new Ki(t,e,n,i,r,o,a,c)}function Zl(t){return new Ki(t)}function xM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nE(t){return t.collectionGroup!==null}function Sl(t){let e=re(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new bt(Kt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ca(o,i))}),n.has(Kt.keyField().canonicalString())||e.ce.push(new Ca(Kt.keyField(),i))}return e.ce}function Un(t){let e=re(t);return e.le||(e.le=T$(e,Sl(t))),e.le}function T$(t,e){if(t.limitType==="F")return Ew(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Ca(r.field,o)});let n=t.endAt?new Pr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Pr(t.startAt.position,t.startAt.inclusive):null;return Ew(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Cw(t,e){let n=t.filters.concat([e]);return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vg(t,e,n){return new Ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lh(t,e){return Oh(Un(t),Un(e))&&t.limitType===e.limitType}function NP(t){return`${xa(Un(t))}|lt:${t.limitType}`}function Il(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>PP(r)).join(", ")}]`),Nh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Rl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Rl(r)).join(",")),`Target(${i})`}(Un(t))}; limitType=${t.limitType})`}function Fh(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ie.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of Sl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,c,u){let f=wM(a,c,u);return a.inclusive?f<=0:f<0}(i.startAt,Sl(i),r)||i.endAt&&!function(a,c,u){let f=wM(a,c,u);return a.inclusive?f>=0:f>0}(i.endAt,Sl(i),r))}(t,e)}function OP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function LP(t){return(e,n)=>{let i=!1;for(let r of Sl(t)){let o=S$(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function S$(t,e,n){let i=t.field.isKeyField()?ie.comparator(e.key,n.key):function(o,a,c){let u=a.data.field(o),f=c.data.field(o);return u!==null&&f!==null?as(u,f):ae()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ae()}}var Rr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ka(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return CP(this.inner)}size(){return this.innerSize}};var A$=new Pt(ie.comparator);function ei(){return A$}var FP=new Pt(ie.comparator);function oh(...t){let e=FP;for(let n of t)e=e.insert(n.key,n);return e}function VP(t){let e=FP;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Dr(){return ch()}function BP(){return ch()}function ch(){return new Rr(t=>t.toString(),(t,e)=>t.isEqual(e))}var M$=new Pt(ie.comparator),P$=new bt(ie.comparator);function Oe(...t){let e=P$;for(let n of t)e=e.add(n);return e}var R$=new bt(Ne);function iE(){return R$}function jP(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function zP(t){return{integerValue:""+t}}function UP(t,e){return vP(e)?zP(e):jP(t,e)}var Nl=class{constructor(){this._=void 0}};function k$(t,e,n){return t instanceof cs?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&i_(o)&&(o=eE(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof ho?HP(t,e):t instanceof fo?qP(t,e):function(r,o){let a=$P(r,o),c=DM(a)+DM(r.Pe);return fw(a)&&fw(r.Pe)?zP(c):jP(r.serializer,c)}(t,e)}function N$(t,e,n){return t instanceof ho?HP(t,e):t instanceof fo?qP(t,e):n}function $P(t,e){return t instanceof ls?function(i){return fw(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var cs=class extends Nl{},ho=class extends Nl{constructor(e){super(),this.elements=e}};function HP(t,e){let n=GP(e);for(let i of t.elements)n.some(r=>Mr(r,i))||n.push(i);return{arrayValue:{values:n}}}var fo=class extends Nl{constructor(e){super(),this.elements=e}};function qP(t,e){let n=GP(e);for(let i of t.elements)n=n.filter(r=>!Mr(r,i));return{arrayValue:{values:n}}}var ls=class extends Nl{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function DM(t){return $t(t.integerValue||t.doubleValue)}function GP(t){return _h(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Da=class{constructor(e,n){this.field=e,this.transform=n}};function O$(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ho&&r instanceof ho||i instanceof fo&&r instanceof fo?Ml(i.elements,r.elements,Mr):i instanceof ls&&r instanceof ls?Mr(i.Pe,r.Pe):i instanceof cs&&r instanceof cs}(t.transform,e.transform)}var xw=class{constructor(e,n){this.version=e,this.transformResults=n}},Ht=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function rg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ol=class{};function WP(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ds(t.key,Ht.none()):new us(t.key,t.data,Ht.none());{let n=t.data,i=Rn.empty(),r=new bt(Kt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new Qi(t.key,i,new fi(r.toArray()),Ht.none())}}function L$(t,e,n){t instanceof us?function(r,o,a){let c=r.value.clone(),u=SM(r.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Qi?function(r,o,a){if(!rg(r.precondition,o))return void o.convertToUnknownDocument(a.version);let c=SM(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(ZP(r)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function lh(t,e,n,i){return t instanceof us?function(o,a,c,u){if(!rg(o.precondition,a))return c;let f=o.value.clone(),m=AM(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof Qi?function(o,a,c,u){if(!rg(o.precondition,a))return c;let f=AM(o.fieldTransforms,u,a),m=a.data;return m.setAll(ZP(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(o,a,c){return rg(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function F$(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=$P(i.transform,r||null);o!=null&&(n===null&&(n=Rn.empty()),n.set(i.field,o))}return n||null}function TM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Ml(i,r,(o,a)=>O$(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var us=class extends Ol{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Qi=class extends Ol{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function ZP(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function SM(t,e,n){let i=new Map;fe(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,N$(a,c,n[r]))}return i}function AM(t,e,n){let i=new Map;for(let r of t){let o=r.transform,a=n.data.field(r.field);i.set(r.field,k$(o,a,e))}return i}var ds=class extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},vh=class extends Ol{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var yh=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&L$(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=lh(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=lh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=BP();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;let u=WP(a,c);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(me.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Ml(this.mutations,e.mutations,(n,i)=>TM(n,i))&&Ml(this.baseMutations,e.baseMutations,(n,i)=>TM(n,i))}},Dw=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){fe(e.mutations.length===i.length);let r=function(){return M$}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new t(e,n,i,r)}};var bh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Tw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Jt,Ye;function KP(t){switch(t){default:return ae();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function QP(t){if(t===void 0)return Zt("GRPC error has no .code"),$.UNKNOWN;switch(t){case Jt.OK:return $.OK;case Jt.CANCELLED:return $.CANCELLED;case Jt.UNKNOWN:return $.UNKNOWN;case Jt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Jt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Jt.INTERNAL:return $.INTERNAL;case Jt.UNAVAILABLE:return $.UNAVAILABLE;case Jt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Jt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Jt.NOT_FOUND:return $.NOT_FOUND;case Jt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Jt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Jt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Jt.ABORTED:return $.ABORTED;case Jt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Jt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Jt.DATA_LOSS:return $.DATA_LOSS;default:return ae()}}(Ye=Jt||(Jt={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";var MM=null;function YP(){return new TextEncoder}var V$=new Qo([4294967295,4294967295],0);function PM(t){let e=YP().encode(t),n=new U0;return n.update(e),new Uint8Array(n.digest())}function RM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Qo([n,i],0),new Qo([r,o],0)]}var Sw=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ba(`Invalid padding: ${n}`);if(i<0)throw new ba(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ba(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ba(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Qo.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Qo.fromNumber(i)));return r.compare(V$)===1&&(r=new Qo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=PM(e),[i,r]=RM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let n=PM(e),[i,r]=RM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},ba=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var wh=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Ih.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(me.min(),r,new Pt(Ne),ei(),Oe())}},Ih=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Oe(),Oe(),Oe())}};var Al=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},yg=class{constructor(e,n){this.targetId=e,this.me=n}},bg=class{constructor(e,n,i=pn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},wg=class{constructor(){this.fe=0,this.ge=NM(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Oe(),n=Oe(),i=Oe();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ae()}}),new Ih(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=NM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Aw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=ei(),this.qe=kM(),this.Qe=new Pt(Ne)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ae()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(gg(o))if(i===0){let a=new ie(o.path);this.Ue(n,a,rn.newNoDocument(a,me.min()))}else fe(i===1);else{let a=this.Ye(n);if(a!==i){let c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}MM?.et(function(m,_,b,I,M){var P,F,H,Q,q,oe;let he={localCacheCount:m,existenceFilterCount:_.count,databaseId:b.database,projectId:b.projectId},le=_.unchangedNames;return le&&(he.bloomFilter={applied:M===0,hashCount:(P=le?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(Q=(H=(F=le?.bits)===null||F===void 0?void 0:F.bitmap)===null||H===void 0?void 0:H.length)!==null&&Q!==void 0?Q:0,padding:(oe=(q=le?.bits)===null||q===void 0?void 0:q.padding)!==null&&oe!==void 0?oe:0,mightContain:S=>{var C;return(C=I?.mightContain(S))!==null&&C!==void 0&&C}}),he}(a,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,a,c;try{a=os(i).toUint8Array()}catch(u){if(u instanceof fg)return Pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Sw(a,r,o)}catch(u){return Pi(u instanceof ba?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,a)=>{let c=this.Je(a);if(c){if(o.current&&gg(c.target)){let u=new ie(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,rn.newNoDocument(u,e))}o.be&&(n.set(a,o.Ce()),o.ve())}});let i=Oe();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new wh(e,n,this.Qe,this.ke,i);return this.ke=ei(),this.qe=kM(),this.Qe=new Pt(Ne),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new wg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new bt(Ne),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new wg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function kM(){return new Pt(ie.comparator)}function NM(){return new Pt(ie.comparator)}var B$={asc:"ASCENDING",desc:"DESCENDING"},j$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z$={and:"AND",or:"OR"},Mw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Pw(t,e){return t.useProto3Json||Nh(e)?e:{value:e}}function Ll(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XP(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function U$(t,e){return Ll(t,e.toTimestamp())}function Qt(t){return fe(!!t),me.fromTimestamp(function(n){let i=uo(n);return new zt(i.seconds,i.nanos)}(t))}function rE(t,e){return Rw(t,e).canonicalString()}function Rw(t,e){let n=function(r){return new Xe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function JP(t){let e=Xe.fromString(t);return fe(lR(e)),e}function Eh(t,e){return rE(t.databaseId,e.path)}function Sr(t,e){let n=JP(e);if(n.get(1)!==t.databaseId.projectId)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ie(nR(n))}function eR(t,e){return rE(t.databaseId,e)}function tR(t){let e=JP(t);return e.length===4?Xe.emptyPath():nR(e)}function kw(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function nR(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function OM(t,e,n){return{name:Eh(t,e),fields:n.value.mapValue.fields}}function iR(t,e,n){let i=Sr(t,e.name),r=Qt(e.updateTime),o=e.createTime?Qt(e.createTime):me.min(),a=new Rn({mapValue:{fields:e.fields}}),c=rn.newFoundDocument(i,r,o,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function $$(t,e){return"found"in e?function(i,r){fe(!!r.found),r.found.name,r.found.updateTime;let o=Sr(i,r.found.name),a=Qt(r.found.updateTime),c=r.found.createTime?Qt(r.found.createTime):me.min(),u=new Rn({mapValue:{fields:r.found.fields}});return rn.newFoundDocument(o,a,c,u)}(t,e):"missing"in e?function(i,r){fe(!!r.missing),fe(!!r.readTime);let o=Sr(i,r.missing),a=Qt(r.readTime);return rn.newNoDocument(o,a)}(t,e):ae()}function H$(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(fe(m===void 0||typeof m=="string"),pn.fromBase64String(m||"")):(fe(m===void 0||m instanceof Buffer||m instanceof Uint8Array),pn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let m=f.code===void 0?$.UNKNOWN:QP(f.code);return new G(m,f.message||"")}(a);n=new bg(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Sr(t,i.document.name),o=Qt(i.document.updateTime),a=i.document.createTime?Qt(i.document.createTime):me.min(),c=new Rn({mapValue:{fields:i.document.fields}}),u=rn.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Al(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Sr(t,i.document),o=i.readTime?Qt(i.readTime):me.min(),a=rn.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Al([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Sr(t,i.document),o=i.removedTargetIds||[];n=new Al([],o,r,null)}else{if(!("filter"in e))return ae();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new Tw(r,o),c=i.targetId;n=new yg(c,a)}}return n}function Ch(t,e){let n;if(e instanceof us)n={update:OM(t,e.key,e.value)};else if(e instanceof ds)n={delete:Eh(t,e.key)};else if(e instanceof Qi)n={update:OM(t,e.key,e.data),updateMask:Q$(e.fieldMask)};else{if(!(e instanceof vh))return ae();n={verify:Eh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let c=a.transform;if(c instanceof cs)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof ho)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof fo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ls)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ae()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:U$(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ae()}(t,e.precondition)),n}function Nw(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Ht.updateTime(Qt(o.updateTime)):o.exists!==void 0?Ht.exists(o.exists):Ht.none()}(e.currentDocument):Ht.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,c){let u=null;if("setToServerValue"in c)fe(c.setToServerValue==="REQUEST_TIME"),u=new cs;else if("appendMissingElements"in c){let m=c.appendMissingElements.values||[];u=new ho(m)}else if("removeAllFromArray"in c){let m=c.removeAllFromArray.values||[];u=new fo(m)}else"increment"in c?u=new ls(a,c.increment):ae();let f=Kt.fromServerFormat(c.fieldPath);return new Da(f,u)}(t,r)):[];if(e.update){e.update.name;let r=Sr(t,e.update.name),o=new Rn({mapValue:{fields:e.update.fields}});if(e.updateMask){let a=function(u){let f=u.fieldPaths||[];return new fi(f.map(m=>Kt.fromServerFormat(m)))}(e.updateMask);return new Qi(r,o,a,n,i)}return new us(r,o,n,i)}if(e.delete){let r=Sr(t,e.delete);return new ds(r,n)}if(e.verify){let r=Sr(t,e.verify);return new vh(r,n)}return ae()}function q$(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?Qt(r.updateTime):Qt(o);return a.isEqual(me.min())&&(a=Qt(o)),new xw(a,r.transformResults||[])}(n,e))):[]}function rR(t,e){return{documents:[eR(t,e.path)]}}function oR(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=eR(t,r);let o=function(f){if(f.length!==0)return cR(ht.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(b){return{field:El(b.field),direction:W$(b.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);let c=Pw(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function sR(t){let e=tR(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){fe(i===1);let m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(_){let b=aR(_);return b instanceof ht&&tE(b)?b.getFilters():[b]}(n.where));let a=[];n.orderBy&&(a=function(_){return _.map(b=>function(M){return new Ca(Cl(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(_){let b;return b=typeof _=="object"?_.value:_,Nh(b)?null:b}(n.limit));let u=null;n.startAt&&(u=function(_){let b=!!_.before,I=_.values||[];return new Pr(I,b)}(n.startAt));let f=null;return n.endAt&&(f=function(_){let b=!_.before,I=_.values||[];return new Pr(I,b)}(n.endAt)),kP(e,r,a,o,c,"F",u,f)}function G$(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Cl(n.unaryFilter.field);return Ze.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Cl(n.unaryFilter.field);return Ze.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Cl(n.unaryFilter.field);return Ze.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Cl(n.unaryFilter.field);return Ze.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ae()}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Cl(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ae()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ht.create(n.compositeFilter.filters.map(i=>aR(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ae()}}(n.compositeFilter.op))}(t):ae()}function W$(t){return B$[t]}function Z$(t){return j$[t]}function K$(t){return z$[t]}function El(t){return{fieldPath:t.canonicalString()}}function Cl(t){return Kt.fromServerFormat(t.fieldPath)}function cR(t){return t instanceof Ze?function(n){if(n.op==="=="){if(vM(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NAN"}};if(_M(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vM(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NOT_NAN"}};if(_M(n.value))return{unaryFilter:{field:El(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:El(n.field),op:Z$(n.op),value:n.value}}}(t):t instanceof ht?function(n){let i=n.getFilters().map(r=>cR(r));return i.length===1?i[0]:{compositeFilter:{op:K$(n.op),filters:i}}}(t):ae()}function Q$(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Fl=class t{constructor(e,n,i,r,o=me.min(),a=me.min(),c=pn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Ig=class{constructor(e){this.ct=e}};function Y$(t,e){let n;if(e.document)n=iR(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=ie.fromSegments(e.noDocument.path),r=Sa(e.noDocument.readTime);n=rn.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ae();{let i=ie.fromSegments(e.unknownDocument.path),r=Sa(e.unknownDocument.version);n=rn.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new zt(r[0],r[1]);return me.fromTimestamp(o)}(e.readTime)),n}function LM(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Eg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,a){return{name:Eh(o,a.key),fields:a.data.value.mapValue.fields,updateTime:Ll(o,a.version.toTimestamp()),createTime:Ll(o,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Ta(e.version)};else{if(!e.isUnknownDocument())return ae();i.unknownDocument={path:n.path.toArray(),version:Ta(e.version)}}return i}function Eg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ta(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Sa(t){let e=new zt(t.seconds,t.nanoseconds);return me.fromTimestamp(e)}function _a(t,e){let n=(e.baseMutations||[]).map(o=>Nw(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let c=e.mutations[o+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>Nw(t.ct,o)),r=zt.fromMillis(e.localWriteTimeMs);return new yh(e.batchId,r,n,i)}function sh(t){let e=Sa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Sa(t.lastLimboFreeSnapshotVersion):me.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return fe(o.documents.length===1),Un(Zl(tR(o.documents[0])))}(t.query):function(o){return Un(sR(o))}(t.query),new Fl(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,pn.fromBase64String(t.resumeToken))}function uR(t,e){let n=Ta(e.snapshotVersion),i=Ta(e.lastLimboFreeSnapshotVersion),r;r=gg(e.target)?rR(t.ct,e.target):oR(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:xa(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function oE(t){let e=sR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vg(e,e.limit,"L"):e}function K0(t,e){return new bh(e.largestBatchId,Nw(t.ct,e.overlayMutation))}function FM(t,e){let n=e.path.lastSegment();return[t,zn(e.path.popLast()),n]}function VM(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ta(i.readTime),documentKey:zn(i.documentKey.path),largestBatchId:i.largestBatchId}}var Ow=class{getBundleMetadata(e,n){return BM(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Sa(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return BM(e).put(function(r){return{bundleId:r.id,createTime:Ta(Qt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return jM(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:oE(o.bundledQuery),readTime:Sa(o.readTime)}}(i)})}saveNamedQuery(e,n){return jM(e).put(function(r){return{name:r.name,readTime:Ta(Qt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function BM(t){return mn(t,"bundles")}function jM(t){return mn(t,"namedQueries")}var Cg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return th(e).get(FM(this.userId,n)).next(i=>i?K0(this.serializer,i):null)}getOverlays(e,n){let i=Dr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,a)=>{let c=new bh(n,a);r.push(this.ht(e,c))}),B.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(a=>r.add(zn(a.getCollectionPath())));let o=[];return r.forEach(a=>{let c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);o.push(th(e).j("collectionPathOverlayIndex",c))}),B.waitFor(o)}getOverlaysForCollection(e,n,i){let r=Dr(),o=zn(n),a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return th(e).U("collectionPathOverlayIndex",a).next(c=>{for(let u of c){let f=K0(this.serializer,u);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=Dr(),a,c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return th(e).J({index:"collectionGroupOverlayIndex",range:c},(u,f,m)=>{let _=K0(this.serializer,f);o.size()<r||_.largestBatchId===a?(o.set(_.getKey(),_),a=_.largestBatchId):m.done()}).next(()=>o)}ht(e,n){return th(e).put(function(r,o,a){let[c,u,f]=FM(o,a.mutation.key);return{userId:o,collectionPath:u,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Ch(r.ct,a.mutation)}}(this.serializer,this.userId,n))}};function th(t){return mn(t,"documentOverlays")}var co=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt($t(e.integerValue));else if("doubleValue"in e){let i=$t(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),fh(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=uo(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(os(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?DP(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ae()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),ie.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};co.bt=new co;function X$(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function zM(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let a=X$(255&i[o]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}var Lw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=zM(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=zM(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Fw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},Vw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},va=class{constructor(){this.Gt=new Lw,this.zt=new Fw(this.Gt),this.jt=new Vw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var ya=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Yo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=UM(t.arrayValue,e.arrayValue),n!==0?n:(n=UM(t.directionalValue,e.directionalValue),n!==0?n:ie.comparator(t.documentKey,e.documentKey)))}function UM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var xg=class{constructor(e){this.Yt=new bt((n,i)=>Kt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(fe(e.collectionGroup===this.collectionId),this.en)return!1;let n=sw(e);if(n!==void 0&&!this.nn(n))return!1;let i=ma(e),r=new Set,o=0,a=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let c=this.Yt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let u=i[o];if(!this.rn(c,u)||!this.sn(this.Zt[a++],u))return!1}++o}for(;o<i.length;++o){let c=i[o];if(a>=this.Zt.length||!this.sn(this.Zt[a++],c))return!1}return!0}on(){if(this.en)return null;let e=new bt(Kt.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Tl(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Tl(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Tl(i.field,i.dir==="asc"?0:1)));return new Pl(Pl.UNKNOWN_ID,this.collectionId,n,hh.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function dR(t){var e,n;if(fe(t instanceof Ze||t instanceof ht),t instanceof Ze){if(t instanceof mg){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Ze.create(t.field,"==",o)))||[];return ht.create(r,"or")}return t}let i=t.filters.map(r=>dR(r));return ht.create(i,t.op)}function J$(t){if(t.getFilters().length===0)return[];let e=zw(dR(t));return fe(hR(e)),Bw(e)||jw(e)?[e]:e.getFilters()}function Bw(t){return t instanceof Ze}function jw(t){return t instanceof ht&&tE(t)}function hR(t){return Bw(t)||jw(t)||function(n){if(n instanceof ht&&pw(n)){for(let i of n.getFilters())if(!Bw(i)&&!jw(i))return!1;return!0}return!1}(t)}function zw(t){if(fe(t instanceof Ze||t instanceof ht),t instanceof Ze)return t;if(t.filters.length===1)return zw(t.filters[0]);let e=t.filters.map(i=>zw(i)),n=ht.create(e,t.op);return n=Dg(n),hR(n)?n:(fe(n instanceof ht),fe(kl(n)),fe(n.filters.length>1),n.filters.reduce((i,r)=>sE(i,r)))}function sE(t,e){let n;return fe(t instanceof Ze||t instanceof ht),fe(e instanceof Ze||e instanceof ht),n=t instanceof Ze?e instanceof Ze?function(r,o){return ht.create([r,o],"and")}(t,e):$M(t,e):e instanceof Ze?$M(e,t):function(r,o){if(fe(r.filters.length>0&&o.filters.length>0),kl(r)&&kl(o))return MP(r,o.getFilters());let a=pw(r)?r:o,c=pw(r)?o:r,u=a.filters.map(f=>sE(f,c));return ht.create(u,"or")}(t,e),Dg(n)}function $M(t,e){if(kl(e))return MP(e,t.getFilters());{let n=e.filters.map(i=>sE(t,i));return ht.create(n,"or")}}function Dg(t){if(fe(t instanceof Ze||t instanceof ht),t instanceof Ze)return t;let e=t.getFilters();if(e.length===1)return Dg(e[0]);if(SP(t))return t;let n=e.map(r=>Dg(r)),i=[];return n.forEach(r=>{r instanceof Ze?i.push(r):r instanceof ht&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:ht.create(i,t.op)}var Uw=class{constructor(){this._n=new xh}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ri.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},xh=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new bt(Xe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new bt(Xe.comparator)).toArray()}};var Ym=new Uint8Array(0),$w=class{constructor(e,n){this.databaseId=n,this.an=new xh,this.un=new Rr(i=>xa(i),(i,r)=>Oh(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:zn(r)};return HM(e).put(o)}return B.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[fP(n),""],!1,!0);return HM(e).U(r).next(o=>{for(let a of o){if(a.collectionId!==n)break;i.push(xr(a.parent))}return i})}addFieldIndex(e,n){let i=nh(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let a=yl(e);return o.next(c=>{a.put(VM(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=nh(e),r=yl(e),o=vl(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=nh(e),i=vl(e),r=yl(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return B.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new xg(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=vl(e),r=!0,o=new Map;return B.forEach(this.cn(n),a=>this.ln(e,a).next(c=>{r&&(r=!!c),o.set(a,c)})).next(()=>{if(r){let a=Oe(),c=[];return B.forEach(o,(u,f)=>{K("IndexedDbIndexManager",`Using index ${function(q){return`id=${q.indexId}|cg=${q.collectionGroup}|f=${q.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`}(u)} to execute ${xa(n)}`);let m=function(q,oe){let he=sw(oe);if(he===void 0)return null;for(let le of _g(q,he.fieldPath))switch(le.op){case"array-contains-any":return le.value.arrayValue.values||[];case"array-contains":return[le.value]}return null}(f,u),_=function(q,oe){let he=new Map;for(let le of ma(oe))for(let S of _g(q,le.fieldPath))switch(S.op){case"==":case"in":he.set(le.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return he.set(le.fieldPath.canonicalString(),S.value),Array.from(he.values())}return null}(f,u),b=function(q,oe){let he=[],le=!0;for(let S of ma(oe)){let C=S.kind===0?EM(q,S.fieldPath,q.startAt):CM(q,S.fieldPath,q.startAt);he.push(C.value),le&&(le=C.inclusive)}return new Pr(he,le)}(f,u),I=function(q,oe){let he=[],le=!0;for(let S of ma(oe)){let C=S.kind===0?CM(q,S.fieldPath,q.endAt):EM(q,S.fieldPath,q.endAt);he.push(C.value),le&&(le=C.inclusive)}return new Pr(he,le)}(f,u),M=this.hn(u,f,b),P=this.hn(u,f,I),F=this.Pn(u,f,_),H=this.In(u.indexId,m,M,b.inclusive,P,I.inclusive,F);return B.forEach(H,Q=>i.G(Q,n.limit).next(q=>{q.forEach(oe=>{let he=ie.fromSegments(oe.documentKey);a.has(he)||(a=a.add(he),c.push(he))})}))}).next(()=>c)}return B.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=J$(ht.create(e.filters,"and")).map(i=>Ew(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,a,c){let u=(n!=null?n.length:1)*Math.max(i.length,o.length),f=u/(n!=null?n.length:1),m=[];for(let _=0;_<u;++_){let b=n?this.Tn(n[_/f]):Ym,I=this.En(e,b,i[_%f],r),M=this.dn(e,b,o[_%f],a),P=c.map(F=>this.En(e,b,F,!0));m.push(...this.createRange(I,M,P))}return m}En(e,n,i,r){let o=new ya(e,ie.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new ya(e,ie.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new xg(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let a=null;for(let c of o)i.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,n){let i=2,r=this.cn(n);return B.forEach(r,o=>this.ln(e,o).next(a=>{a?i!==0&&a.fields.length<function(u){let f=new bt(Kt.comparator),m=!1;for(let _ of u.filters)for(let b of _.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?m=!0:f=f.add(b.field));for(let _ of u.orderBy)_.field.isKeyField()||(f=f.add(_.field));return f.size+(m?1:0)}(o)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new va;for(let r of ma(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let a=i.Ht(r.kind);co.bt.Pt(o,a)}return i.Wt()}Tn(e){let n=new va;return co.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new va;return co.bt.Pt(Ea(this.databaseId,n),i.Ht(function(o){let a=ma(o);return a.length===0?0:a[a.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new va);let o=0;for(let a of ma(e)){let c=i[o++];for(let u of r)if(this.Vn(n,a.fieldPath)&&_h(c))r=this.mn(r,a,c);else{let f=u.Ht(a.kind);co.bt.Pt(c,f)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let a of i.arrayValue.values||[])for(let c of r){let u=new va;u.seed(c.Wt()),co.bt.Pt(a,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof Ze&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=nh(e),r=yl(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let a=[];return B.forEach(o,c=>r.get([c.indexId,this.uid]).next(u=>{a.push(function(m,_){let b=_?new hh(_.sequenceNumber,new Ri(Sa(_.readTime),new ie(xr(_.documentKey)),_.largestBatchId)):hh.empty(),I=m.fields.map(([M,P])=>new Tl(Kt.fromServerFormat(M),P));return new Pl(m.indexId,m.collectionGroup,I,b)}(c,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Ne(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=nh(e),o=yl(e);return this.gn(e).next(a=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>B.forEach(c,u=>o.put(VM(u.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){let i=new Map;return B.forEach(n,(r,o)=>{let a=i.get(r.collectionGroup);return(a?B.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),B.forEach(c,u=>this.pn(e,r,u).next(f=>{let m=this.yn(o,u);return f.isEqual(m)?B.resolve():this.wn(e,o,u,f,m)}))))})}Sn(e,n,i,r){return vl(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return vl(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=vl(e),o=new bt(Yo);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(a,c)=>{o=o.add(new ya(i.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>o)}yn(e,n){let i=new bt(Yo),r=this.An(n,e);if(r==null)return i;let o=sw(n);if(o!=null){let a=e.data.field(o.fieldPath);if(_h(a))for(let c of a.arrayValue.values||[])i=i.add(new ya(n.indexId,e.key,this.Tn(c),r))}else i=i.add(new ya(n.indexId,e.key,Ym,r));return i}wn(e,n,i,r,o){K("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let a=[];return function(u,f,m,_,b){let I=u.getIterator(),M=f.getIterator(),P=_l(I),F=_l(M);for(;P||F;){let H=!1,Q=!1;if(P&&F){let q=m(P,F);q<0?Q=!0:q>0&&(H=!0)}else P!=null?Q=!0:H=!0;H?(_(F),F=_l(M)):Q?(b(P),P=_l(I)):(P=_l(I),F=_l(M))}}(r,o,Yo,c=>{a.push(this.Sn(e,n,i,c))},c=>{a.push(this.bn(e,n,i,c))}),B.waitFor(a)}gn(e){let n=1;return yl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,c)=>Yo(a,c)).filter((a,c,u)=>!c||Yo(a,u[c-1])!==0);let r=[];r.push(e);for(let a of i){let c=Yo(a,e),u=Yo(a,n);if(c===0)r[0]=e.Jt();else if(c>0&&u<0)r.push(a),r.push(a.Jt());else if(u>0)break}r.push(n);let o=[];for(let a=0;a<r.length;a+=2){if(this.Dn(r[a],r[a+1]))return[];let c=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,Ym,[]],u=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,Ym,[]];o.push(IDBKeyRange.bound(c,u))}return o}Dn(e,n){return Yo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(qM)}getMinOffset(e,n){return B.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||ae())).next(qM)}};function HM(t){return mn(t,"collectionParents")}function vl(t){return mn(t,"indexEntries")}function nh(t){return mn(t,"indexConfiguration")}function yl(t){return mn(t,"indexState")}function qM(t){fe(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;XI(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Ri(e.readTime,e.documentKey,n)}var GM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Mi=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function fR(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId),c=0,u=i.J({range:a},(m,_,b)=>(c++,b.delete()));o.push(u.next(()=>{fe(c===1)}));let f=[];for(let m of n.mutations){let _=yP(e,m.key.path,n.batchId);o.push(r.delete(_)),f.push(m.key)}return B.waitFor(o).next(()=>f)}function Tg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ae();e=t.noDocument}return JSON.stringify(e).length}Mi.DEFAULT_COLLECTION_PERCENTILE=10,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mi.DEFAULT=new Mi(41943040,Mi.DEFAULT_COLLECTION_PERCENTILE,Mi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mi.DISABLED=new Mi(-1,0,0);var Sg=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){fe(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xo(e).J({index:"userMutationsIndex",range:i},(r,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=xl(e),a=Xo(e);return a.add({}).next(c=>{fe(typeof c=="number");let u=new yh(c,n,i,r),f=function(I,M,P){let F=P.baseMutations.map(Q=>Ch(I.ct,Q)),H=P.mutations.map(Q=>Ch(I.ct,Q));return{userId:M,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:F,mutations:H}}(this.serializer,this.userId,u),m=[],_=new bt((b,I)=>Ne(b.canonicalString(),I.canonicalString()));for(let b of r){let I=yP(this.userId,b.key.path,c);_=_.add(b.key.path.popLast()),m.push(a.put(f)),m.push(o.put(I,s$))}return _.forEach(b=>{m.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Cn[c]=u.keys()}),B.waitFor(m).next(()=>u)})}lookupMutationBatch(e,n){return Xo(e).get(n).next(i=>i?(fe(i.userId===this.userId),_a(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?B.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Xo(e).J({index:"userMutationsIndex",range:r},(a,c,u)=>{c.userId===this.userId&&(fe(c.batchId>=i),o=_a(this.serializer,c)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Xo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,a)=>{i=o.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xo(e).U("userMutationsIndex",n).next(i=>i.map(r=>_a(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=tg(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return xl(e).J({range:r},(a,c,u)=>{let[f,m,_]=a,b=xr(m);if(f===this.userId&&n.path.isEqual(b))return Xo(e).get(_).next(I=>{if(!I)throw ae();fe(I.userId===this.userId),o.push(_a(this.serializer,I))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bt(Ne),r=[];return n.forEach(o=>{let a=tg(this.userId,o.path),c=IDBKeyRange.lowerBound(a),u=xl(e).J({range:c},(f,m,_)=>{let[b,I,M]=f,P=xr(I);b===this.userId&&o.path.isEqual(P)?i=i.add(M):_.done()});r.push(u)}),B.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=tg(this.userId,i),a=IDBKeyRange.lowerBound(o),c=new bt(Ne);return xl(e).J({range:a},(u,f,m)=>{let[_,b,I]=u,M=xr(b);_===this.userId&&i.isPrefixOf(M)?M.length===r&&(c=c.add(I)):m.done()}).next(()=>this.Fn(e,c))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Xo(e).get(o).next(a=>{if(a===null)throw ae();fe(a.userId===this.userId),i.push(_a(this.serializer,a))}))}),B.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return fR(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),B.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();let i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return xl(e).J({range:i},(o,a,c)=>{if(o[0]===this.userId){let u=xr(o[1]);r.push(u)}else c.done()}).next(()=>{fe(r.length===0)})})}containsKey(e,n){return pR(e,this.userId,n)}xn(e){return mR(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function pR(t,e,n){let i=tg(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),a=!1;return xl(t).J({range:o,H:!0},(c,u,f)=>{let[m,_,b]=c;m===e&&_===r&&(a=!0),f.done()}).next(()=>a)}function Xo(t){return mn(t,"mutations")}function xl(t){return mn(t,"documentMutations")}function mR(t){return mn(t,"mutationQueues")}var Vl=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Hw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new Vl(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>me.fromTimestamp(new zt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>bl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(fe(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return bl(e).J((a,c)=>{let u=sh(c);u.sequenceNumber<=n&&i.get(u.targetId)===null&&(r++,o.push(this.removeTargetData(e,u)))}).next(()=>B.waitFor(o)).next(()=>r)}forEachTarget(e,n){return bl(e).J((i,r)=>{let o=sh(r);n(o)})}Bn(e){return WM(e).get("targetGlobalKey").next(n=>(fe(n!==null),n))}kn(e,n){return WM(e).put("targetGlobalKey",n)}qn(e,n){return bl(e).put(uR(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=xa(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return bl(e).J({range:r,index:"queryTargetsIndex"},(a,c,u)=>{let f=sh(c);Oh(n,f.target)&&(o=f,u.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Jo(e);return n.forEach(a=>{let c=zn(a.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,a))}),B.waitFor(r)}removeMatchingKeys(e,n,i){let r=Jo(e);return B.forEach(n,o=>{let a=zn(o.path);return B.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Jo(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Jo(e),o=Oe();return r.J({range:i,H:!0},(a,c,u)=>{let f=xr(a[1]),m=new ie(f);o=o.add(m)}).next(()=>o)}containsKey(e,n){let i=zn(n.path),r=IDBKeyRange.bound([i],[fP(i)],!1,!0),o=0;return Jo(e).J({index:"documentTargetsIndex",H:!0,range:r},([a,c],u,f)=>{a!==0&&(o++,f.done())}).next(()=>o>0)}ot(e,n){return bl(e).get(n).next(i=>i?sh(i):null)}};function bl(t){return mn(t,"targets")}function WM(t){return mn(t,"targetGlobal")}function Jo(t){return mn(t,"targetDocuments")}function ZM([t,e],[n,i]){let r=Ne(t,n);return r===0?Ne(e,i):r}var qw=class{constructor(e){this.Kn=e,this.buffer=new bt(ZM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();ZM(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},Gw=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){K("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>U(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ps(n)?K("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield fs(n)}yield this.zn(3e5)}))}},Ww=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(hi.oe);let i=new qw(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(GM)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GM):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,a,c,u,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,a=Date.now(),this.nthSequenceNumber(e,r))).next(_=>(i=_,c=Date.now(),this.removeTargets(e,i,n))).next(_=>(o=_,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(f=Date.now(),wl()<=ur.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${_} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_})))}};function e5(t,e){return new Ww(t,e)}var Zw=class{constructor(e,n){this.db=e,this.garbageCollector=e5(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return Xm(e,i)}removeReference(e,n,i){return Xm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Xm(e,n)}er(e,n){return function(r,o){let a=!1;return mR(r).Y(c=>pR(r,c,o).next(u=>(u&&(a=!0),B.resolve(!u)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(a,c)=>{if(c<=n){let u=this.er(e,a).next(f=>{if(!f)return o++,i.getEntry(e,a).next(()=>(i.removeEntry(a,me.min()),Jo(e).delete(function(_){return[0,zn(_.path)]}(a))))});r.push(u)}}).next(()=>B.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Xm(e,n)}Xn(e,n){let i=Jo(e),r,o=hi.oe;return i.J({index:"documentTargetsIndex"},([a,c],{path:u,sequenceNumber:f})=>{a===0?(o!==hi.oe&&n(new ie(xr(r)),o),o=f,r=u):o=hi.oe}).next(()=>{o!==hi.oe&&n(new ie(xr(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Xm(t,e){return Jo(t).put(function(i,r){return{targetId:0,path:zn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Ag=class{constructor(){this.changes=new Rr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Kw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return pa(e).put(i)}removeEntry(e,n,i){return pa(e).delete(function(o,a){let c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Eg(a),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=rn.newInvalidDocument(n);return pa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ih(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:rn.newInvalidDocument(n)};return pa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ih(n))},(r,o)=>{i={document:this.nr(n,o),size:Tg(o)}}).next(()=>i)}getEntries(e,n){let i=ei();return this.ir(e,n,(r,o)=>{let a=this.nr(r,o);i=i.insert(r,a)}).next(()=>i)}sr(e,n){let i=ei(),r=new Pt(ie.comparator);return this.ir(e,n,(o,a)=>{let c=this.nr(o,a);i=i.insert(o,c),r=r.insert(o,Tg(a))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return B.resolve();let r=new bt(YM);n.forEach(u=>r=r.add(u));let o=IDBKeyRange.bound(ih(r.first()),ih(r.last())),a=r.getIterator(),c=a.getNext();return pa(e).J({index:"documentKeyIndex",range:o},(u,f,m)=>{let _=ie.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&YM(c,_)<0;)i(c,null),c=a.getNext();c&&c.isEqual(_)&&(i(c,f),c=a.hasNext()?a.getNext():null),c?m.$(ih(c)):m.done()}).next(()=>{for(;c;)i(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let a=n.path,c=[a.popLast().toArray(),a.lastSegment(),Eg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return pa(e).U(IDBKeyRange.bound(c,u,!0)).next(f=>{o?.incrementDocumentReadCount(f.length);let m=ei();for(let _ of f){let b=this.nr(ie.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);b.isFoundDocument()&&(Fh(n,b)||r.has(b.key))&&(m=m.insert(b.key,b))}return m})}getAllFromCollectionGroup(e,n,i,r){let o=ei(),a=QM(n,i),c=QM(n,Ri.max());return pa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(u,f,m)=>{let _=this.nr(ie.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(_.key,_),o.size===r&&m.done()}).next(()=>o)}newChangeBuffer(e){return new Qw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return KM(e).get("remoteDocumentGlobalKey").next(n=>(fe(!!n),n))}tr(e,n){return KM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=Y$(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(me.min())))return i}return rn.newInvalidDocument(e)}};function gR(t){return new Kw(t)}var Qw=class extends Ag{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Rr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new bt((o,a)=>Ne(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{let c=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,c.readTime)),a.isValidDocument()){let u=LM(this.ar.serializer,a);r=r.add(o.path.popLast());let f=Tg(u);i+=f-c.size,n.push(this.ar.addEntry(e,o,u))}else if(i-=c.size,this.trackRemovals){let u=LM(this.ar.serializer,a.convertToNoDocument(me.min()));n.push(this.ar.addEntry(e,o,u))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),B.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,a)=>{this.ur.set(o,{size:a,readTime:i.get(o).readTime})}),i))}};function KM(t){return mn(t,"remoteDocumentGlobal")}function pa(t){return mn(t,"remoteDocumentsV14")}function ih(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function QM(t,e){let n=e.documentKey.path.toArray();return[t,Eg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function YM(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Ne(n[o],i[o]),r)return r;return r=Ne(n.length,i.length),r||(r=Ne(n[n.length-2],i[i.length-2]),r||Ne(n[n.length-1],i[i.length-1]))}var Yw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Mg=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&lh(i.mutation,r,fi.empty(),zt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Oe()){let r=Dr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=oh();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){let i=Dr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Oe()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=ei(),a=ch(),c=function(){return ch()}();return n.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof Qi)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),lh(m.mutation,f,m.mutation.getFieldMask(),zt.now())):a.set(f.key,fi.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>{var _;return c.set(f,new Yw(m,(_=a.get(f))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){let i=ch(),r=new Pt((a,c)=>a-c),o=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(let c of a)c.keys().forEach(u=>{let f=n.get(u);if(f===null)return;let m=i.get(u)||fi.empty();m=c.applyToLocalView(f,m),i.set(u,m);let _=(r.get(c.batchId)||Oe()).add(u);r=r.insert(c.batchId,_)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),f=u.key,m=u.value,_=BP();m.forEach(b=>{if(!o.has(b)){let I=WP(n.get(b),i.get(b));I!==null&&_.set(b,I),o=o.add(b)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,_))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):B.resolve(Dr()),c=-1,u=o;return a.next(f=>B.forEach(f,(m,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(b=>{u=u.insert(m,b)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,Oe())).next(m=>({batchId:c,changes:VP(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ie(n)).next(i=>{let r=oh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,a=oh();return this.indexManager.getCollectionParents(e,o).next(c=>B.forEach(c,u=>{let f=function(_,b){return new Ki(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((_,b)=>{a=a.insert(_,b)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,rn.newInvalidDocument(m)))});let c=oh();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&lh(m.mutation,f,fi.empty(),zt.now()),Fh(n,f)&&(c=c.insert(u,f))}),c})}};var Xw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Qt(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:oE(r.bundledQuery),readTime:Qt(r.readTime)}}(n)),B.resolve()}};var Jw=class{constructor(){this.overlays=new Pt(ie.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Dr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){let r=Dr(),o=n.length+1,a=new ie(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Pt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=Dr(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let c=Dr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return B.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new bh(n,i));let o=this.hr.get(n);o===void 0&&(o=Oe(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var Dh=class{constructor(){this.Pr=new bt(en.Ir),this.Tr=new bt(en.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new en(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new en(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new ie(new Xe([])),i=new en(n,e),r=new en(n,e+1),o=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new ie(new Xe([])),i=new en(n,e),r=new en(n,e+1),o=Oe();return this.Tr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let n=new en(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},en=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ie.comparator(e.key,n.key)||Ne(e.pr,n.pr)}static Er(e,n){return Ne(e.pr,n.pr)||ie.comparator(e.key,n.key)}};var eI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new bt(en.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new yh(o,n,i,r);this.mutationQueue.push(a);for(let c of r)this.wr=this.wr.add(new en(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new en(n,0),r=new en(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],a=>{let c=this.Sr(a.pr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new bt(Ne);return n.forEach(r=>{let o=new en(r,0),a=new en(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],c=>{i=i.add(c.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;ie.isDocumentKey(o)||(o=o.child(""));let a=new en(new ie(o),0),c=new bt(Ne);return this.wr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(u.pr)),!0)},a),B.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){fe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(n.mutations,r=>{let o=new en(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new en(n,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var tI=class{constructor(e){this.vr=e,this.docs=function(){return new Pt(ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let i=ei();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():rn.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=ei(),a=n.path,c=new ie(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||XI(mP(m),i)<=0||(r.has(m.key)||Fh(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ae()}Fr(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new nI(this)}getSize(e){return B.resolve(this.size)}},nI=class extends Ag{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var iI=class{constructor(e){this.persistence=e,this.Mr=new Rr(n=>xa(n),Oh),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Dh,this.targetCount=0,this.Lr=Vl.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Vl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),B.waitFor(o).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}};var Pg=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new hi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new iI(this),this.indexManager=new Uw,this.remoteDocumentCache=function(r){return new tI(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Ig(n),this.$r=new Xw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Jw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new eI(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){K("MemoryPersistence","Starting transaction:",e);let r=new rI(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},rI=class extends ug{constructor(e){super(),this.currentSequenceNumber=e}},Rg=class t{constructor(e){this.persistence=e,this.zr=new Dh,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ae()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{let r=ie.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,me.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var oI=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new dg("createOrUpgrade",n);i<1&&r>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pM,{unique:!0}),u.createObjectStore("documentMutations")}(e),XM(e),function(u){u.createObjectStore("remoteDocuments")}(e));let a=B.resolve();return i<3&&r>=3&&(i!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),XM(e)),a=a.next(()=>function(u){let f=u.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:me.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(o))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(u,f){return f.store("mutations").U().next(m=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pM,{unique:!0});let _=f.store("mutations"),b=m.map(I=>_.put(I));return B.waitFor(b)})}(e,o))),a=a.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Xr(o))),i<6&&r>=6&&(a=a.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(a=a.next(()=>this.ti(o))),i<8&&r>=8&&(a=a.next(()=>this.ni(e,o))),i<9&&r>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ri(o))),i<11&&r>=11&&(a=a.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(u){let f=u.createObjectStore("documentOverlays",{keyPath:v$});f.createIndex("collectionPathOverlayIndex",y$,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",b$,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(u){let f=u.createObjectStore("remoteDocumentsV14",{keyPath:a$});f.createIndex("documentKeyIndex",c$),f.createIndex("collectionGroupIndex",l$)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,o))),i<15&&r>=15&&(a=a.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:p$}).createIndex("sequenceNumberIndex",m$,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:g$}).createIndex("documentKeyIndex",_$,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),a}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=Tg(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>B.forEach(r,o=>{let a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",a).next(c=>B.forEach(c,u=>{fe(u.userId===o.userId);let f=_a(this.serializer,u);return fR(e,o.userId,f).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((a,c)=>{let u=new Xe(a),f=function(_){return[0,zn(_)]}(u);o.push(n.get(f).next(m=>m?B.resolve():(_=>n.put({targetId:0,path:zn(_),sequenceNumber:r.highestListenSequenceNumber}))(u)))}).next(()=>B.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:f$});let i=n.store("collectionParents"),r=new xh,o=a=>{if(r.add(a)){let c=a.lastSegment(),u=a.popLast();return i.put({collectionId:c,parent:zn(u)})}};return n.store("remoteDocuments").J({H:!0},(a,c)=>{let u=new Xe(a);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,c,u],f)=>{let m=xr(c);return o(m.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=sh(r),a=uR(this.serializer,o);return n.put(a)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,a)=>{let c=n.store("remoteDocumentsV14"),u=function(_){return _.document?new ie(Xe.fromString(_.document.name).popFirst(5)):_.noDocument?ie.fromSegments(_.noDocument.path):_.unknownDocument?ie.fromSegments(_.unknownDocument.path):ae()}(a).path.toArray(),f={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(c.put(f))}).next(()=>B.waitFor(r))}si(e,n){let i=n.store("mutations"),r=gR(this.serializer),o=new Pg(Rg.Hr,this.serializer.ct);return i.U().next(a=>{let c=new Map;return a.forEach(u=>{var f;let m=(f=c.get(u.userId))!==null&&f!==void 0?f:Oe();_a(this.serializer,u).keys().forEach(_=>m=m.add(_)),c.set(u.userId,m)}),B.forEach(c,(u,f)=>{let m=new tn(f),_=Cg.lt(this.serializer,m),b=o.getIndexManager(m),I=Sg.lt(m,this.serializer,b,o.referenceDelegate);return new Mg(r,I,_,b).recalculateAndSaveOverlaysForDocumentKeys(new ph(n,hi.oe),u).next()})})}};function XM(t){t.createObjectStore("targetDocuments",{keyPath:d$}).createIndex("documentTargetsIndex",h$,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",u$,{unique:!0}),t.createObjectStore("targetGlobal")}var Q0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",sI=class t{constructor(e,n,i,r,o,a,c,u,f,m,_=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=a,this.document=c,this._i=f,this.ai=m,this.ui=_,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=b=>Promise.resolve(),!t.D())throw new G($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zw(this,r),this.Ti=n+"main",this.serializer=new Ig(u),this.Ei=new rs(this.Ti,this.ui,new oI(this.serializer)),this.Qr=new Hw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=gR(this.serializer),this.$r=new Ow,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,m===!1&&Zt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G($.FAILED_PRECONDITION,Q0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new hi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>U(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>U(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>U(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Jm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ps(e))return K("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return K("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return rh(e).get("owner").next(n=>B.resolve(this.Si(n)))}bi(e){return Jm(e).delete(this.clientId)}Di(){return U(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=mn(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),a=r.filter(c=>o.indexOf(c)===-1);return B.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):rh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new G($.FAILED_PRECONDITION,Q0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jm(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&K("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return U(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new ph(e,hi.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Jm(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Sg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $w(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Cg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){K("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?I$:u===15?EP:u===14?IP:u===13?wP:u===12?w$:u===11?bP:void ae()}(this.ui),a;return this.Ei.runTransaction(e,r,o,c=>(a=new ph(c,this.kr?this.kr.next():hi.oe),n==="readwrite-primary"?this.gi(a).next(u=>!!u||this.pi(a)).next(u=>{if(!u)throw Zt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new G($.FAILED_PRECONDITION,gP);return i(a)}).next(u=>this.wi(a).next(()=>u)):this.ki(a).next(()=>i(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}ki(e){return rh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new G($.FAILED_PRECONDITION,Q0)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return rh(e).put("owner",n)}static D(){return rs.D()}yi(e){let n=rh(e);return n.get("owner").next(i=>this.Si(i)?(K("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Zt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;A_()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return K("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Zt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Zt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function rh(t){return mn(t,"owner")}function Jm(t){return mn(t,"clientMetadata")}function aE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var aI=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Oe(),r=Oe();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var cI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var kg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return A_()?8:_P(Vu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new cI;return this.Ji(e,n,a).next(c=>{if(o.result=c,this.Ui)return this.Yi(e,n,a,c.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(wl()<=ur.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Il(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(wl()<=ur.DEBUG&&K("QueryEngine","Query:",Il(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(wl()<=ur.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Il(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Un(n))):B.resolve())}ji(e,n){if(xM(n))return B.resolve(null);let i=Un(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=vg(n,null,"F"),i=Un(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=Oe(...o);return this.zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.Zi(n,c);return this.Xi(n,f,a,u.readTime)?this.ji(e,vg(n,null,"F")):this.es(e,f,n,u)}))})))}Hi(e,n,i,r){return xM(n)||r.isEqual(me.min())?B.resolve(null):this.zi.getDocuments(e,i).next(o=>{let a=this.Zi(n,o);return this.Xi(n,a,i,r)?B.resolve(null):(wl()<=ur.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Il(n)),this.es(e,a,n,pP(r,-1)).next(c=>c))})}Zi(e,n){let i=new bt(LP(e));return n.forEach((r,o)=>{Fh(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return wl()<=ur.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Il(n)),this.zi.getDocumentsMatchingQuery(e,n,Ri.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}};var lI=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Pt(Ne),this.rs=new Rr(o=>xa(o),Oh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mg(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function _R(t,e,n,i){return new lI(t,e,n,i)}function vR(t,e){return U(this,null,function*(){let n=re(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],u=Oe();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){c.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({us:f,removedBatchIds:a,addedBatchIds:c}))})})})}function t5(t,e){let n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,f,m){let _=f.batch,b=_.keys(),I=B.resolve();return b.forEach(M=>{I=I.next(()=>m.getEntry(u,M)).next(P=>{let F=f.docVersions.get(M);fe(F!==null),P.version.compareTo(F)<0&&(_.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),m.addEntry(P)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,_))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=Oe();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function yR(t){let e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function n5(t,e){let n=re(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((m,_)=>{let b=r.get(_);if(!b)return;c.push(n.Qr.removeMatchingKeys(o,m.removedDocuments,_).next(()=>n.Qr.addMatchingKeys(o,m.addedDocuments,_)));let I=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(pn.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,i)),r=r.insert(_,I),function(P,F,H){return P.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0}(b,I,m)&&c.push(n.Qr.updateTargetData(o,I))});let u=ei(),f=Oe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(bR(o,a,e.documentUpdates).next(m=>{u=m.cs,f=m.ls})),!i.isEqual(me.min())){let m=n.Qr.getLastRemoteSnapshotVersion(o).next(_=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return B.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.ns=r,o))}function bR(t,e,n){let i=Oe(),r=Oe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=ei();return n.forEach((c,u)=>{let f=o.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(me.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):K("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)}),{cs:a,ls:r}})}function i5(t,e){let n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Bl(t,e){let n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,B.resolve(r)):n.Qr.allocateTargetId(i).next(a=>(r=new Fl(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function jl(t,e,n){return U(this,null,function*(){let i=re(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!ps(a))throw a;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function Ng(t,e,n){let i=re(t),r=me.min(),o=Oe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){let _=re(u),b=_.rs.get(m);return b!==void 0?B.resolve(_.ns.get(b)):_.Qr.getTargetData(f,m)}(i,a,Un(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,n?r:me.min(),n?o:Oe())).next(c=>(ER(i,OP(e),c),{documents:c,hs:o})))}function wR(t,e){let n=re(t),i=re(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(a=>a?a.target:null))}function IR(t,e){let n=re(t),i=n.ss.get(e)||me.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,pP(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(ER(n,e,r),r))}function ER(t,e,n){let i=t.ss.get(e)||me.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function r5(t,e,n,i){return U(this,null,function*(){let r=re(t),o=Oe(),a=ei();for(let f of n){let m=e.Ps(f.metadata.name);f.document&&(o=o.add(m));let _=e.Is(f);_.setReadTime(e.Ts(f.metadata.readTime)),a=a.insert(m,_)}let c=r.os.newChangeBuffer({trackRemovals:!0}),u=yield Bl(r,function(m){return Un(Zl(Xe.fromString(`__bundle__/docs/${m}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>bR(f,c,a).next(m=>(c.apply(f),m)).next(m=>r.Qr.removeMatchingKeysForTargetId(f,u.targetId).next(()=>r.Qr.addMatchingKeys(f,o,u.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,m.cs,m.ls)).next(()=>m.cs)))})}function o5(i,r){return U(this,arguments,function*(t,e,n=Oe()){let o=yield Bl(t,Un(oE(e.bundledQuery))),a=re(t);return a.persistence.runTransaction("Save named query","readwrite",c=>{let u=Qt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return a.$r.saveNamedQuery(c,e);let f=o.withResumeToken(pn.EMPTY_BYTE_STRING,u);return a.ns=a.ns.insert(f.targetId,f),a.Qr.updateTargetData(c,f).next(()=>a.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>a.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>a.$r.saveNamedQuery(c,e))})})}function JM(t,e){return`firestore_clients_${t}_${e}`}function eP(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Y0(t,e){return`firestore_targets_${t}_${e}`}var Og=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new G(r.error.code,r.error.message))),a?new t(e,n,r.state,o):(Zt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},uh=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new G(i.error.code,i.error.message))),o?new t(e,i.state,r):(Zt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Lg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=iE();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=vP(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new t(e,o):(Zt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},uI=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Zt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Th=class{constructor(){this.activeTargetIds=iE()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},dh=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Pt(Ne),this.started=!1,this.ys=[];let a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=JM(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Th),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return U(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(JM(this.persistenceKey,i));if(r){let o=Lg.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Y0(this.persistenceKey,e));if(i){let r=uh.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Y0(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return K("SharedClientState","READ",e,n),n}setItem(e,n){K("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){K("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(K("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Zt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>U(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let a=hi.oe;if(o!=null)try{let c=JSON.parse(o);fe(typeof c=="number"),a=c}catch(c){Zt("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(n.newValue);i!==hi.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new Og(this.currentUser,e,n,i),o=eP(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=eP(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=Y0(this.persistenceKey,e),o=new uh(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return Lg.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Og.Es(new tn(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return uh.Es(r,n)}xs(e){return uI.Es(e)}Js(e){return JSON.parse(e)}zs(e){return U(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);K("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),a=[],c=[];return o.forEach(u=>{r.has(u)||a.push(u)}),r.forEach(u=>{o.has(u)||c.push(u)}),this.syncEngine.eo(a,c).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=iE();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},Fg=class{constructor(){this.no=new Th,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Th,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dI=class{io(e){}shutdown(){}};var Vg=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var eg=null;function X0(){return eg===null?eg=function(){return 268435456+Math.round(2147483648*Math.random())}():eg++,"0x"+eg.toString(16)}var s5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var hI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Pn="WebChannelConnection",fI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,a){let c=X0(),u=this.vo(n,i.toUriEncodedString());K("RestConnection",`Sending RPC '${n}' ${c}:`,u,r);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,a),this.Mo(n,u,f,r).then(m=>(K("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw Pi("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",r),m})}xo(n,i,r,o,a,c){return this.Co(n,i,r,o,a)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}vo(n,i){let r=s5[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=X0();return new Promise((a,c)=>{let u=new $0;u.setWithCredentials(!0),u.listenOnce(q0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case eh.NO_ERROR:let m=u.getResponseJson();K(Pn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case eh.TIMEOUT:K(Pn,`RPC '${e}' ${o} timed out`),c(new G($.DEADLINE_EXCEEDED,"Request time out"));break;case eh.HTTP_ERROR:let _=u.getStatus();if(K(Pn,`RPC '${e}' ${o} failed with status:`,_,"response text:",u.getResponseText()),_>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);let I=b?.error;if(I&&I.status&&I.message){let M=function(F){let H=F.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(H)>=0?H:$.UNKNOWN}(I.status);c(new G(M,I.message))}else c(new G($.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new G($.UNAVAILABLE,"Connection failed."));break;default:ae()}}finally{K(Pn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);K(Pn,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,i,15)})}Oo(e,n,i){let r=X0(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Z0(),c=W0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.xmlHttpFactory=new H0({})),this.Fo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;let m=o.join("");K(Pn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let _=a.createWebChannel(m,u),b=!1,I=!1,M=new hI({lo:F=>{I?K(Pn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(b||(K(Pn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),b=!0),K(Pn,`RPC '${e}' stream ${r} sending:`,F),_.send(F))},ho:()=>_.close()}),P=(F,H,Q)=>{F.listen(H,q=>{try{Q(q)}catch(oe){setTimeout(()=>{throw oe},0)}})};return P(_,gl.EventType.OPEN,()=>{I||(K(Pn,`RPC '${e}' stream ${r} transport opened.`),M.mo())}),P(_,gl.EventType.CLOSE,()=>{I||(I=!0,K(Pn,`RPC '${e}' stream ${r} transport closed`),M.po())}),P(_,gl.EventType.ERROR,F=>{I||(I=!0,Pi(Pn,`RPC '${e}' stream ${r} transport errored:`,F),M.po(new G($.UNAVAILABLE,"The operation could not be completed")))}),P(_,gl.EventType.MESSAGE,F=>{var H;if(!I){let Q=F.data[0];fe(!!Q);let q=Q,oe=q.error||((H=q[0])===null||H===void 0?void 0:H.error);if(oe){K(Pn,`RPC '${e}' stream ${r} received error:`,oe);let he=oe.status,le=function(x){let A=Jt[x];if(A!==void 0)return QP(A)}(he),S=oe.message;le===void 0&&(le=$.INTERNAL,S="Unknown error status: "+he+" with message "+oe.message),I=!0,M.po(new G(le,S)),_.close()}else K(Pn,`RPC '${e}' stream ${r} received:`,Q),M.yo(Q)}}),P(c,G0.STAT_EVENT,F=>{F.stat===Qm.PROXY?K(Pn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Qm.NOPROXY&&K(Pn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}};function CR(){return typeof window<"u"?window:null}function og(){return typeof document<"u"?document:null}function Vh(t){return new Mw(t,!0)}var Sh=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Bg=class{constructor(e,n,i,r,o,a,c,u){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Sh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return U(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return U(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return U(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Zt(n.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new G($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>U(this,null,function*(){this.state=0,this.start()}))}c_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pI=class extends Bg{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=H$(this.serializer,e),i=function(o){if(!("targetChange"in o))return me.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?me.min():a.readTime?Qt(a.readTime):me.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=kw(this.serializer),n.addTarget=function(o,a){let c,u=a.target;if(c=gg(u)?{documents:rR(o,u)}:{query:oR(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=XP(o,a.resumeToken);let f=Pw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(me.min())>0){c.readTime=Ll(o,a.snapshotVersion.toTimestamp());let f=Pw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=G$(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=kw(this.serializer),n.removeTarget=e,this.i_(n)}},mI=class extends Bg{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=q$(e.writeResults,e.commitTime),i=Qt(e.commitTime);return this.listener.A_(i,n)}return fe(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=kw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Ch(this.serializer,i))};this.i_(n)}};var gI=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Rw(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G($.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(e,Rw(n,i),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G($.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},_I=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Zt(n),this.y_=!1):K("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var vI=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{i.enqueueAndForget(()=>U(this,null,function*(){ms(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(u){return U(this,null,function*(){let f=re(u);f.M_.add(4),yield Kl(f),f.N_.set("Unknown"),f.M_.delete(4),yield Bh(f)})}(this))}))}),this.N_=new _I(i,r)}};function Bh(t){return U(this,null,function*(){if(ms(t))for(let e of t.x_)yield e(!0)})}function Kl(t){return U(this,null,function*(){for(let e of t.x_)yield e(!1)})}function r_(t,e){let n=re(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),uE(n)?lE(n):Yl(n).Xo()&&cE(n,e))}function zl(t,e){let n=re(t),i=Yl(n);n.F_.delete(e),i.Xo()&&xR(n,e),n.F_.size===0&&(i.Xo()?i.n_():ms(n)&&n.N_.set("Unknown"))}function cE(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yl(t).P_(e)}function xR(t,e){t.L_.xe(e),Yl(t).I_(e)}function lE(t){t.L_=new Aw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yl(t).start(),t.N_.w_()}function uE(t){return ms(t)&&!Yl(t).Zo()&&t.F_.size>0}function ms(t){return re(t).M_.size===0}function DR(t){t.L_=void 0}function a5(t){return U(this,null,function*(){t.N_.set("Online")})}function c5(t){return U(this,null,function*(){t.F_.forEach((e,n)=>{cE(t,e)})})}function l5(t,e){return U(this,null,function*(){DR(t),uE(t)?(t.N_.D_(e),lE(t)):t.N_.set("Unknown")})}function u5(t,e,n){return U(this,null,function*(){if(t.N_.set("Online"),e instanceof bg&&e.state===2&&e.cause)try{yield function(r,o){return U(this,null,function*(){let a=o.cause;for(let c of o.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield jg(t,i)}else if(e instanceof Al?t.L_.Ke(e):e instanceof yg?t.L_.He(e):t.L_.We(e),!n.isEqual(me.min()))try{let i=yield yR(t.localStore);n.compareTo(i)>=0&&(yield function(o,a){let c=o.L_.rt(a);return c.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.F_.get(f);m&&o.F_.set(f,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,f)=>{let m=o.F_.get(u);if(!m)return;o.F_.set(u,m.withResumeToken(pn.EMPTY_BYTE_STRING,m.snapshotVersion)),xR(o,u);let _=new Fl(m.target,u,f,m.sequenceNumber);cE(o,_)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){K("RemoteStore","Failed to raise snapshot:",i),yield jg(t,i)}})}function jg(t,e,n){return U(this,null,function*(){if(!ps(e))throw e;t.M_.add(1),yield Kl(t),t.N_.set("Offline"),n||(n=()=>yR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>U(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Bh(t)}))})}function TR(t,e){return e().catch(n=>jg(t,n,e))}function Ql(t){return U(this,null,function*(){let e=re(t),n=hs(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;d5(e);)try{let r=yield i5(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,h5(e,r)}catch(r){yield jg(e,r)}SR(e)&&AR(e)})}function d5(t){return ms(t)&&t.v_.length<10}function h5(t,e){t.v_.push(e);let n=hs(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function SR(t){return ms(t)&&!hs(t).Zo()&&t.v_.length>0}function AR(t){hs(t).start()}function f5(t){return U(this,null,function*(){hs(t).V_()})}function p5(t){return U(this,null,function*(){let e=hs(t);for(let n of t.v_)e.d_(n.mutations)})}function m5(t,e,n){return U(this,null,function*(){let i=t.v_.shift(),r=Dw.from(i,e,n);yield TR(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Ql(t)})}function g5(t,e){return U(this,null,function*(){e&&hs(t).E_&&(yield function(i,r){return U(this,null,function*(){if(function(a){return KP(a)&&a!==$.ABORTED}(r.code)){let o=i.v_.shift();hs(i).t_(),yield TR(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ql(i)}})}(t,e)),SR(t)&&AR(t)})}function tP(t,e){return U(this,null,function*(){let n=re(t);n.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let i=ms(n);n.M_.add(3),yield Kl(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Bh(n)})}function yI(t,e){return U(this,null,function*(){let n=re(t);e?(n.M_.delete(2),yield Bh(n)):e||(n.M_.add(2),yield Kl(n),n.N_.set("Unknown"))})}function Yl(t){return t.B_||(t.B_=function(n,i,r){let o=re(n);return o.f_(),new pI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:a5.bind(null,t),To:c5.bind(null,t),Ao:l5.bind(null,t),h_:u5.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.B_.t_(),uE(t)?lE(t):t.N_.set("Unknown")):(yield t.B_.stop(),DR(t))}))),t.B_}function hs(t){return t.k_||(t.k_=function(n,i,r){let o=re(n);return o.f_(),new mI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:f5.bind(null,t),Ao:g5.bind(null,t),R_:p5.bind(null,t),A_:m5.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.k_.t_(),yield Ql(t)):(yield t.k_.stop(),t.v_.length>0&&(K("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var bI=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let a=Date.now()+i,c=new t(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Xl(t,e){if(Zt("AsyncQueue",`${e}: ${t}`),ps(t))return new G($.UNAVAILABLE,`${e}: ${t}`);throw t}var zg=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ie.comparator(n.key,i.key):(n,i)=>ie.comparator(n.key,i.key),this.keyedMap=oh(),this.sortedSet=new Pt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Ug=class{constructor(){this.q_=new Pt(ie.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ae():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Ul=class t{constructor(e,n,i,r,o,a,c,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){let a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new t(e,n,zg.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var wI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},II=class{constructor(){this.queries=new Rr(e=>NP(e),Lh),this.onlineState="Unknown",this.z_=new Set}};function dE(t,e){return U(this,null,function*(){let n=re(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new wI,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(a){let c=Xl(a,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&fE(n)})}function hE(t,e){return U(this,null,function*(){let n=re(t),i=e.query,r=3,o=n.queries.get(i);if(o){let a=o.U_.indexOf(e);a>=0&&(o.U_.splice(a,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function _5(t,e){let n=re(t),i=!1;for(let r of e){let o=r.query,a=n.queries.get(o);if(a){for(let c of a.U_)c.H_(r)&&(i=!0);a.K_=r}}i&&fE(n)}function v5(t,e,n){let i=re(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function fE(t){t.z_.forEach(e=>{e.next()})}var EI,nP;(nP=EI||(EI={})).J_="default",nP.Cache="cache";var Ah=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ul(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Ul.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==EI.Cache}};var CI=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var $g=class{constructor(e){this.serializer=e}Ps(e){return Sr(this.serializer,e)}Is(e){return e.metadata.exists?iR(this.serializer,e.document,!1):rn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Qt(e)}},xI=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=MR(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=Xe.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new $g(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let a of r.metadata.queries){let c=(n.get(a)||Oe()).add(o);n.set(a,c)}}return n}complete(){return U(this,null,function*(){let e=yield r5(this.localStore,new $g(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield o5(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function MR(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Hg=class{constructor(e){this.key=e}},qg=class{constructor(e){this.key=e}},Gg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Oe(),this.mutatedKeys=Oe(),this.Ia=LP(e),this.Ta=new zg(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new Ug,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,_)=>{let b=r.get(m),I=Fh(this.query,_)?_:null,M=!!b&&this.mutatedKeys.has(b.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),F=!1;b&&I?b.data.isEqual(I.data)?M!==P&&(i.track({type:3,doc:I}),F=!0):this.Ra(b,I)||(i.track({type:2,doc:I}),F=!0,(u&&this.Ia(I,u)>0||f&&this.Ia(I,f)<0)&&(c=!0)):!b&&I?(i.track({type:0,doc:I}),F=!0):b&&!I&&(i.track({type:1,doc:b}),F=!0,(u||f)&&(c=!0)),F&&(I?(a=a.add(I),o=P?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ta:a,Aa:i,Xi:c,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((m,_)=>function(I,M){let P=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae()}};return P(I)-P(M)}(m.type,_.type)||this.Ia(m.doc,_.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,f=u!==this.ha;return this.ha=u,a.length!==0||f?{snapshot:new Ul(this.query,e.Ta,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Ug,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Oe(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new qg(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new Hg(i))}),n}pa(e){this.la=e.hs,this.Pa=Oe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Ul.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},DI=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},TI=class{constructor(e){this.key=e,this.wa=!1}},SI=class{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Rr(c=>NP(c),Lh),this.Da=new Map,this.Ca=new Set,this.va=new Pt(ie.comparator),this.Fa=new Map,this.Ma=new Dh,this.xa={},this.Oa=new Map,this.Na=Vl.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function y5(t,e,n=!0){return U(this,null,function*(){let i=o_(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield PR(i,e,n,!0),r})}function b5(t,e){return U(this,null,function*(){let n=o_(t);yield PR(n,e,!0,!1)})}function PR(t,e,n,i){return U(this,null,function*(){let r=yield Bl(t.localStore,Un(e)),o=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",c;return i&&(c=yield pE(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&r_(t.remoteStore,r),c})}function pE(t,e,n,i,r){return U(this,null,function*(){t.Ba=(_,b,I)=>function(P,F,H,Q){return U(this,null,function*(){let q=F.view.da(H);q.Xi&&(q=yield Ng(P.localStore,F.query,!1).then(({documents:S})=>F.view.da(S,q)));let oe=Q&&Q.targetChanges.get(F.targetId),he=Q&&Q.targetMismatches.get(F.targetId)!=null,le=F.view.applyChanges(q,P.isPrimaryClient,oe,he);return AI(P,F.targetId,le.fa),le.snapshot})}(t,_,b,I);let o=yield Ng(t.localStore,e,!0),a=new Gg(e,o.hs),c=a.da(o.documents),u=Ih.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(c,t.isPrimaryClient,u);AI(t,n,f.fa);let m=new DI(e,n,a);return t.ba.set(e,m),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),f.snapshot})}function w5(t,e,n){return U(this,null,function*(){let i=re(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(a=>!Lh(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&zl(i.remoteStore,r.targetId),$l(i,r.targetId)}).catch(fs))):($l(i,r.targetId),yield jl(i.localStore,r.targetId,!0))})}function I5(t,e){return U(this,null,function*(){let n=re(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),zl(n.remoteStore,i.targetId))})}function E5(t,e,n){return U(this,null,function*(){let i=vE(t);try{let r=yield function(a,c){let u=re(a),f=zt.now(),m=c.reduce((I,M)=>I.add(M.key),Oe()),_,b;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let M=ei(),P=Oe();return u.os.getEntries(I,m).next(F=>{M=F,M.forEach((H,Q)=>{Q.isValidDocument()||(P=P.add(H))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,M)).next(F=>{_=F;let H=[];for(let Q of c){let q=F$(Q,_.get(Q.key).overlayedDocument);q!=null&&H.push(new Qi(Q.key,q,TP(q.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,H,c)}).next(F=>{b=F;let H=F.applyToLocalDocumentSet(_,P);return u.documentOverlayCache.saveOverlays(I,F.batchId,H)})}).then(()=>({batchId:b.batchId,changes:VP(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,u){let f=a.xa[a.currentUser.toKey()];f||(f=new Pt(Ne)),f=f.insert(c,u),a.xa[a.currentUser.toKey()]=f}(i,r.batchId,n),yield go(i,r.changes),yield Ql(i.remoteStore)}catch(r){let o=Xl(r,"Failed to persist write");n.reject(o)}})}function RR(t,e){return U(this,null,function*(){let n=re(t);try{let i=yield n5(n.localStore,e);e.targetChanges.forEach((r,o)=>{let a=n.Fa.get(o);a&&(fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?fe(a.wa):r.removedDocuments.size>0&&(fe(a.wa),a.wa=!1))}),yield go(n,i,e)}catch(i){yield fs(i)}})}function iP(t,e,n){let i=re(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,a)=>{let c=a.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){let u=re(a);u.onlineState=c;let f=!1;u.queries.forEach((m,_)=>{for(let b of _.U_)b.j_(c)&&(f=!0)}),f&&fE(u)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function C5(t,e,n){return U(this,null,function*(){let i=re(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let a=new Pt(ie.comparator);a=a.insert(o,rn.newNoDocument(o,me.min()));let c=Oe().add(o),u=new wh(me.min(),new Map,new Pt(Ne),a,c);yield RR(i,u),i.va=i.va.remove(o),i.Fa.delete(e),_E(i)}else yield jl(i.localStore,e,!1).then(()=>$l(i,e,n)).catch(fs)})}function x5(t,e){return U(this,null,function*(){let n=re(t),i=e.batch.batchId;try{let r=yield t5(n.localStore,e);gE(n,i,null),mE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield go(n,r)}catch(r){yield fs(r)}})}function D5(t,e,n){return U(this,null,function*(){let i=re(t);try{let r=yield function(a,c){let u=re(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,c).next(_=>(fe(_!==null),m=_.keys(),u.mutationQueue.removeMutationBatch(f,_))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);gE(i,e,n),mE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield go(i,r)}catch(r){yield fs(r)}})}function T5(t,e){return U(this,null,function*(){let n=re(t);ms(n.remoteStore)||K("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(a){let c=re(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=Xl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function mE(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function gE(t,e,n){let i=re(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function $l(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||kR(t,i)})}function kR(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(zl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),_E(t))}function AI(t,e,n){for(let i of n)i instanceof Hg?(t.Ma.addReference(i.key,e),S5(t,i)):i instanceof qg?(K("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||kR(t,i.key)):ae()}function S5(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(K("SyncEngine","New document in limbo: "+n),t.Ca.add(i),_E(t))}function _E(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new ie(Xe.fromString(e)),i=t.Na.next();t.Fa.set(i,new TI(n)),t.va=t.va.insert(n,i),r_(t.remoteStore,new Fl(Un(Zl(n.path)),i,"TargetPurposeLimboResolution",hi.oe))}}function go(t,e,n){return U(this,null,function*(){let i=re(t),r=[],o=[],a=[];i.ba.isEmpty()||(i.ba.forEach((c,u)=>{a.push(i.Ba(u,e,n).then(f=>{if((f||n)&&i.isPrimaryClient){let m=f&&!f.fromCache;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){r.push(f);let m=aI.Ki(u.targetId,f);o.push(m)}}))}),yield Promise.all(a),i.Sa.h_(r),yield function(u,f){return U(this,null,function*(){let m=re(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>B.forEach(f,b=>B.forEach(b.qi,I=>m.persistence.referenceDelegate.addReference(_,b.targetId,I)).next(()=>B.forEach(b.Qi,I=>m.persistence.referenceDelegate.removeReference(_,b.targetId,I)))))}catch(_){if(!ps(_))throw _;K("LocalStore","Failed to update sequence numbers: "+_)}for(let _ of f){let b=_.targetId;if(!_.fromCache){let I=m.ns.get(b),M=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(M);m.ns=m.ns.insert(b,P)}}})}(i.localStore,o))})}function A5(t,e){return U(this,null,function*(){let n=re(t);if(!n.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let i=yield vR(n.localStore,e);n.currentUser=e,function(o,a){o.Oa.forEach(c=>{c.forEach(u=>{u.reject(new G($.CANCELLED,a))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield go(n,i.us)}})}function M5(t,e){let n=re(t),i=n.Fa.get(e);if(i&&i.wa)return Oe().add(i.key);{let r=Oe(),o=n.Da.get(e);if(!o)return r;for(let a of o){let c=n.ba.get(a);r=r.unionWith(c.view.Ea)}return r}}function P5(t,e){return U(this,null,function*(){let n=re(t),i=yield Ng(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&AI(n,e.targetId,r.fa),r})}function R5(t,e){return U(this,null,function*(){let n=re(t);return IR(n.localStore,e).then(i=>go(n,i))})}function k5(t,e,n,i){return U(this,null,function*(){let r=re(t),o=yield function(c,u){let f=re(c),m=re(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",_=>m.vn(_,u).next(b=>b?f.localDocuments.getDocuments(_,b):B.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Ql(r.remoteStore):n==="acknowledged"||n==="rejected"?(gE(r,e,i||null),mE(r,e),function(c,u){re(re(c).mutationQueue).Mn(u)}(r.localStore,e)):ae(),yield go(r,o)):K("SyncEngine","Cannot apply mutation batch with id: "+e)})}function N5(t,e){return U(this,null,function*(){let n=re(t);if(o_(n),vE(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield rP(n,i.toArray());n.La=!0,yield yI(n.remoteStore,!0);for(let o of r)r_(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>($l(n,a),jl(n.localStore,a,!0))),zl(n.remoteStore,a)}),yield r,yield rP(n,i),function(a){let c=re(a);c.Fa.forEach((u,f)=>{zl(c.remoteStore,f)}),c.Ma.mr(),c.Fa=new Map,c.va=new Pt(ie.comparator)}(n),n.La=!1,yield yI(n.remoteStore,!1)}})}function rP(t,e,n){return U(this,null,function*(){let i=re(t),r=[],o=[];for(let a of e){let c,u=i.Da.get(a);if(u&&u.length!==0){c=yield Bl(i.localStore,Un(u[0]));for(let f of u){let m=i.ba.get(f),_=yield P5(i,m);_.snapshot&&o.push(_.snapshot)}}else{let f=yield wR(i.localStore,a);c=yield Bl(i.localStore,f),yield pE(i,NR(f),a,!1,c.resumeToken)}r.push(c)}return i.Sa.h_(o),r})}function NR(t){return kP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function O5(t){return function(n){return re(re(n).persistence).Bi()}(re(t).localStore)}function L5(t,e,n,i){return U(this,null,function*(){let r=re(t);if(r.La)return void K("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let a=yield IR(r.localStore,OP(o[0])),c=wh.createSynthesizedRemoteEventForCurrentChange(e,n==="current",pn.EMPTY_BYTE_STRING);yield go(r,a,c);break}case"rejected":yield jl(r.localStore,e,!0),$l(r,e,i);break;default:ae()}})}function F5(t,e,n){return U(this,null,function*(){let i=o_(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){K("SyncEngine","Adding an already active target "+r);continue}let o=yield wR(i.localStore,r),a=yield Bl(i.localStore,o);yield pE(i,NR(o),a.targetId,!1,a.resumeToken),r_(i.remoteStore,a)}for(let r of n)i.Da.has(r)&&(yield jl(i.localStore,r,!1).then(()=>{zl(i.remoteStore,r),$l(i,r)}).catch(fs))}})}function o_(t){let e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=RR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=C5.bind(null,e),e.Sa.h_=_5.bind(null,e.eventManager),e.Sa.ka=v5.bind(null,e.eventManager),e}function vE(t){let e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D5.bind(null,e),e}function V5(t,e,n){let i=re(t);(function(o,a,c){return U(this,null,function*(){try{let u=yield a.getMetadata();if(yield function(I,M){let P=re(I),F=Qt(M.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",H=>P.$r.getBundleMetadata(H,M.id)).then(H=>!!H&&H.createTime.compareTo(F)>=0)}(o.localStore,u))return yield a.close(),c._completeWith(function(I){return{taskState:"Success",documentsLoaded:I.totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}}(u)),Promise.resolve(new Set);c._updateProgress(MR(u));let f=new xI(u,o.localStore,a.serializer),m=yield a.qa();for(;m;){let b=yield f._a(m);b&&c._updateProgress(b),m=yield a.qa()}let _=yield f.complete();return yield go(o,_.ca,void 0),yield function(I,M){let P=re(I);return P.persistence.runTransaction("Save bundle","readwrite",F=>P.$r.saveBundleMetadata(F,M))}(o.localStore,u),c._completeWith(_.progress),Promise.resolve(_.ua)}catch(u){return Pi("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Mh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){this.serializer=Vh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return _R(this.persistence,new kg,e.initialUser,this.serializer)}createPersistence(e){return new Pg(Rg.Hr,this.serializer)}createSharedClientState(e){return new Fg}terminate(){return U(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Wg=class t extends Mh{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){yield T_(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield vE(this.Qa.syncEngine),yield Ql(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return _R(this.persistence,new kg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new Gw(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new uw(n,this.persistence);return new lw(e.asyncQueue,i)}createPersistence(e){let n=aE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Mi.withCacheSize(this.cacheSizeBytes):Mi.DEFAULT;return new sI(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,CR(),og(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Fg}},MI=class t extends Wg{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return U(this,null,function*(){yield T_(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof dh&&(this.sharedClientState.syncEngine={Zs:k5.bind(null,n),Xs:L5.bind(null,n),eo:F5.bind(null,n),Bi:O5.bind(null,n),Ys:R5.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>U(this,null,function*(){yield N5(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=CR();if(!dh.D(n))throw new G($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=aE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new dh(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Ph=class{initialize(e,n){return U(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>iP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=A5.bind(null,this.syncEngine),yield yI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new II}()}createDatastore(e){let n=Vh(e.databaseInfo.databaseId),i=function(o){return new fI(o)}(e.databaseInfo);return function(o,a,c,u){return new gI(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,c){return new vI(i,r,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>iP(this.syncEngine,n,0),function(){return Vg.D()?new Vg:new dI}())}createSyncEngine(e,n){return function(r,o,a,c,u,f,m){let _=new SI(r,o,a,c,u,f);return m&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return U(this,null,function*(){var e;yield function(i){return U(this,null,function*(){let r=re(i);K("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Kl(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function oP(t,e=10240){let n=0;return{read(){return U(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return U(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Hl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Zt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var PI=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new nn,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return U(this,null,function*(){return this.metadata.promise})}qa(){return U(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return U(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new CI(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return U(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return U(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return U(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var RI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return U(this,null,function*(){let a=re(r),c={documents:o.map(_=>Eh(a.serializer,_))},u=yield a.xo("BatchGetDocuments",a.serializer.databaseId,Xe.emptyPath(),c,o.length),f=new Map;u.forEach(_=>{let b=$$(a.serializer,_);f.set(b.key.toString(),b)});let m=[];return o.forEach(_=>{let b=f.get(_.toString());fe(!!b),m.push(b)}),m})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new ds(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=ie.fromPath(i);this.mutations.push(new vh(r,this.precondition(r)))}),yield function(i,r){return U(this,null,function*(){let o=re(i),a={writes:r.map(c=>Ch(o.serializer,c))};yield o.Co("Commit",o.serializer.databaseId,Xe.emptyPath(),a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ae();n=me.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new G($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(me.min())?Ht.exists(!1):Ht.updateTime(n):Ht.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(me.min()))throw new G($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ht.updateTime(n)}return Ht.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var kI=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new Sh(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>U(this,null,function*(){let e=new RI(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!Nh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!KP(n)}return!1}};var NI=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=tn.UNAUTHENTICATED,this.clientId=cg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>U(this,null,function*(){K("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Xl(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function sg(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>U(this,null,function*(){i.isEqual(r)||(yield vR(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function OI(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield yE(t);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>tP(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>tP(e.remoteStore,r)),t._onlineComponents=e})}function OR(t){return t.name==="FirebaseError"?t.code===$.FAILED_PRECONDITION||t.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function yE(t){return U(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!OR(n))throw n;Pi("Error using user provided cache. Falling back to memory cache: "+n),yield sg(t,new Mh)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield sg(t,new Mh);return t._offlineComponents})}function s_(t){return U(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield OI(t,t._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield OI(t,new Ph))),t._onlineComponents})}function LR(t){return yE(t).then(e=>e.persistence)}function bE(t){return yE(t).then(e=>e.localStore)}function FR(t){return s_(t).then(e=>e.remoteStore)}function wE(t){return s_(t).then(e=>e.syncEngine)}function B5(t){return s_(t).then(e=>e.datastore)}function ql(t){return U(this,null,function*(){let e=yield s_(t),n=e.eventManager;return n.onListen=y5.bind(null,e.syncEngine),n.onUnlisten=w5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=b5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=I5.bind(null,e.syncEngine),n})}function j5(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield LR(t),n=yield FR(t);return e.setNetworkEnabled(!0),function(r){let o=re(r);return o.M_.delete(0),Bh(o)}(n)}))}function z5(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield LR(t),n=yield FR(t);return e.setNetworkEnabled(!1),function(r){return U(this,null,function*(){let o=re(r);o.M_.add(0),yield Kl(o),o.N_.set("Offline")})}(n)}))}function U5(t,e){let n=new nn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield function(f,m){let _=re(f);return _.persistence.runTransaction("read document","readonly",b=>_.localDocuments.getDocument(b,m))}(r,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new G($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let u=Xl(c,`Failed to get document '${o} from cache`);a.reject(u)}})}(yield bE(t),e,n)})),n.promise}function VR(t,e,n={}){let i=new nn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Hl({next:b=>{a.enqueueAndForget(()=>hE(o,_));let I=b.docs.has(c);!I&&b.fromCache?f.reject(new G($.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&u&&u.source==="server"?f.reject(new G($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),_=new Ah(Zl(c.path),m,{includeMetadataChanges:!0,ra:!0});return dE(o,_)}(yield ql(t),t.asyncQueue,e,n,i)})),i.promise}function $5(t,e){let n=new nn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield Ng(r,o,!0),u=new Gg(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){let u=Xl(c,`Failed to execute query '${o} against cache`);a.reject(u)}})}(yield bE(t),e,n)})),n.promise}function BR(t,e,n={}){let i=new nn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Hl({next:b=>{a.enqueueAndForget(()=>hE(o,_)),b.fromCache&&u.source==="server"?f.reject(new G($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),_=new Ah(c,m,{includeMetadataChanges:!0,ra:!0});return dE(o,_)}(yield ql(t),t.asyncQueue,e,n,i)})),i.promise}function H5(t,e){let n=new Hl(e);return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){re(r).z_.add(o),o.next()}(yield ql(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){re(r).z_.delete(o)}(yield ql(t),n)}))}}function q5(t,e,n,i){let r=function(a,c){let u;return u=typeof a=="string"?YP().encode(a):a,function(m,_){return new PI(m,_)}(function(m,_){if(m instanceof Uint8Array)return oP(m,_);if(m instanceof ArrayBuffer)return oP(new Uint8Array(m),_);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),c)}(n,Vh(e));t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){V5(yield wE(t),r,i)}))}function G5(t,e){return t.asyncQueue.enqueue(()=>U(this,null,function*(){return function(i,r){let o=re(i);return o.persistence.runTransaction("Get named query","readonly",a=>o.$r.getNamedQuery(a,r))}(yield bE(t),e)}))}function jR(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var sP=new Map;function IE(t,e,n){if(!n)throw new G($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function EE(t,e,n,i){if(e===!0&&i===!0)throw new G($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function aP(t){if(!ie.isDocumentKey(t))throw new G($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function cP(t){if(ie.isDocumentKey(t))throw new G($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function a_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae()}function Je(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=a_(t);throw new G($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function zR(t,e){if(e<=0)throw new G($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Zg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}EE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jR((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Aa=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new J0;switch(i.type){case"firstParty":return new iw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=sP.get(n);i&&(K("ComponentProvider","Removing Datastore"),sP.delete(n),i.terminate())}(this),Promise.resolve()}};function UR(t,e,n,i={}){var r;let o=(t=Je(t,Aa))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=tn.MOCK_USER;else{c=gC(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new G($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new tn(f)}t._authCredentials=new ew(new ag(c,u))}}var En=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},St=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ar=class t extends En{constructor(e,n,i){super(e,n,Zl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new ie(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function CE(t,e,...n){if(t=Vt(t),IE("collection","path",e),t instanceof Aa){let i=Xe.fromString(e,...n);return cP(i),new Ar(t,null,i)}{if(!(t instanceof St||t instanceof Ar))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Xe.fromString(e,...n));return cP(i),new Ar(t.firestore,null,i)}}function $R(t,e){if(t=Je(t,Aa),IE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new En(t,null,function(i){return new Ki(Xe.emptyPath(),i)}(e))}function jh(t,e,...n){if(t=Vt(t),arguments.length===1&&(e=cg.newId()),IE("doc","path",e),t instanceof Aa){let i=Xe.fromString(e,...n);return aP(i),new St(t,null,new ie(i))}{if(!(t instanceof St||t instanceof Ar))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Xe.fromString(e,...n));return aP(i),new St(t.firestore,t instanceof Ar?t.converter:null,new ie(i))}}function xE(t,e){return t=Vt(t),e=Vt(e),(t instanceof St||t instanceof Ar)&&(e instanceof St||e instanceof Ar)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function DE(t,e){return t=Vt(t),e=Vt(e),t instanceof En&&e instanceof En&&t.firestore===e.firestore&&Lh(t._query,e._query)&&t.converter===e.converter}var LI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Sh(this,"async_queue_retry"),this.hu=()=>{let n=og();n&&K("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=og();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=og();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new nn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return U(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ps(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw Zt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=bI.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&ae()}verifyOperationInProgress(){}du(){return U(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function FI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var VI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new nn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var HR=-1,Nt=class extends Aa{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new LI}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||qR(this),this._firestoreClient.terminate()}};function cn(t){return t._firestoreClient||qR(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qR(t){var e,n,i;let r=t._freezeSettings(),o=function(c,u,f,m){return new dw(c,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,jR(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new NI(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function GR(t,e){tk(t=Je(t,Nt));let n=cn(t);if(n._uninitializedComponentsProvider)throw new G($.FAILED_PRECONDITION,"SDK cache is already specified.");Pi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Ph;return ZR(n,r,new Wg(r,i.cacheSizeBytes,e?.forceOwnership))}function WR(t){tk(t=Je(t,Nt));let e=cn(t);if(e._uninitializedComponentsProvider)throw new G($.FAILED_PRECONDITION,"SDK cache is already specified.");Pi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Ph;return ZR(e,i,new MI(i,n.cacheSizeBytes))}function ZR(t,e,n){let i=new nn;return t.asyncQueue.enqueue(()=>U(this,null,function*(){try{yield sg(t,n),yield OI(t,e),i.resolve()}catch(r){let o=r;if(!OR(o))throw o;Pi("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function KR(t){if(t._initialized&&!t._terminated)throw new G($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new nn;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{yield function(i){return U(this,null,function*(){if(!rs.D())return Promise.resolve();let r=i+"main";yield rs.delete(r)})}(aE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function QR(t){return function(n){let i=new nn;return n.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return T5(yield wE(n),i)})),i.promise}(cn(t=Je(t,Nt)))}function YR(t){return j5(cn(t=Je(t,Nt)))}function XR(t){return z5(cn(t=Je(t,Nt)))}function JR(t,e){let n=cn(t=Je(t,Nt)),i=new VI;return q5(n,t._databaseId,e,i),i}function ek(t,e){return G5(cn(t=Je(t,Nt)),e).then(n=>n?new En(t,null,n.query):null)}function tk(t){if(t._initialized||t._terminated)throw new G($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var kr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(pn.fromBase64String(e))}catch(n){throw new G($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Yi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var po=class{constructor(e){this._methodName=e}};var Ma=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}};var W5=/^__.*__$/,BI=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new us(e,this.data,n,this.fieldTransforms)}},Kg=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function nk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae()}}var Qg=class t{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Yg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(nk(this.fu)&&W5.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},jI=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Vh(e)}Fu(e,n,i,r=!1){return new Qg({fu:e,methodName:n,vu:i,path:Kt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Na(t){let e=t._freezeSettings(),n=Vh(t._databaseId);return new jI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function c_(t,e,n,i,r,o={}){let a=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);AE("Data must be an object, but it was:",a,i);let c=ok(i,a),u,f;if(o.merge)u=new fi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let _ of o.mergeFields){let b=qI(e,_,n);if(!a.contains(b))throw new G($.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);ak(m,b)||m.push(b)}u=new fi(m),f=a.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,f=a.fieldTransforms;return new BI(new Rn(c),u,f)}var Rh=class t extends po{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function ik(t,e,n){return new Qg({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zI=class t extends po{_toFieldTransform(e){return new Da(e.path,new cs)}isEqual(e){return e instanceof t}},UI=class t extends po{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=ik(this,e,!0),i=this.Mu.map(o=>Oa(o,n)),r=new ho(i);return new Da(e.path,r)}isEqual(e){return e instanceof t&&M_(this.Mu,e.Mu)}},$I=class t extends po{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=ik(this,e,!0),i=this.Mu.map(o=>Oa(o,n)),r=new fo(i);return new Da(e.path,r)}isEqual(e){return e instanceof t&&M_(this.Mu,e.Mu)}},HI=class t extends po{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new ls(e.serializer,UP(e.serializer,this.xu));return new Da(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function TE(t,e,n,i){let r=t.Fu(1,e,n);AE("Data must be an object, but it was:",r,i);let o=[],a=Rn.empty();ka(i,(u,f)=>{let m=ME(e,u,n);f=Vt(f);let _=r.Su(m);if(f instanceof Rh)o.push(m);else{let b=Oa(f,_);b!=null&&(o.push(m),a.set(m,b))}});let c=new fi(o);return new Kg(a,c,r.fieldTransforms)}function SE(t,e,n,i,r,o){let a=t.Fu(1,e,n),c=[qI(e,i,n)],u=[r];if(o.length%2!=0)throw new G($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(qI(e,o[b])),u.push(o[b+1]);let f=[],m=Rn.empty();for(let b=c.length-1;b>=0;--b)if(!ak(f,c[b])){let I=c[b],M=u[b];M=Vt(M);let P=a.Su(I);if(M instanceof Rh)f.push(I);else{let F=Oa(M,P);F!=null&&(f.push(I),m.set(I,F))}}let _=new fi(f);return new Kg(m,_,a.fieldTransforms)}function rk(t,e,n,i=!1){return Oa(n,t.Fu(i?4:3,e))}function Oa(t,e){if(sk(t=Vt(t)))return AE("Unsupported field value:",e,t),ok(t,e);if(t instanceof po)return function(i,r){if(!nk(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let c of i){let u=Oa(c,r.bu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Vt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return UP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=zt.fromDate(i);return{timestampValue:Ll(r.serializer,o)}}if(i instanceof zt){let o=new zt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ll(r.serializer,o)}}if(i instanceof Ma)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof kr)return{bytesValue:XP(r.serializer,i._byteString)};if(i instanceof St){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rE(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${a_(i)}`)}(t,e)}function ok(t,e){let n={};return CP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ka(t,(i,r)=>{let o=Oa(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function sk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof zt||t instanceof Ma||t instanceof kr||t instanceof St||t instanceof po)}function AE(t,e,n){if(!sk(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=a_(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function qI(t,e,n){if((e=Vt(e))instanceof Yi)return e._internalPath;if(typeof e=="string")return ME(t,e);throw Yg("Field path arguments must be of type string or ",t,!1,void 0,n)}var Z5=new RegExp("[~\\*/\\[\\]]");function ME(t,e,n){if(e.search(Z5)>=0)throw Yg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yi(...e.split("."))._internalPath}catch{throw Yg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Yg(t,e,n,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new G($.INVALID_ARGUMENT,c+t+u)}function ak(t,e){return t.some(n=>n.isEqual(e))}var Pa=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new GI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(l_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},GI=class extends Pa{data(){return super.data()}};function l_(t,e){return typeof e=="string"?ME(t,e):e instanceof Yi?e._internalPath:e._delegate._internalPath}function ck(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kh=class{},Ra=class extends kh{};function _o(t,e,...n){let i=[];e instanceof kh&&i.push(e),i=i.concat(n),function(o){let a=o.filter(u=>u instanceof WI).length,c=o.filter(u=>u instanceof Xg).length;if(a>1||a>0&&c>0)throw new G($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Xg=class t extends Ra{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return vk(e._query,n),new En(e.firestore,e.converter,Cw(e._query,n))}_parse(e){let n=Na(e.firestore);return function(o,a,c,u,f,m,_){let b;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new G($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){uP(_,m);let I=[];for(let M of _)I.push(lP(u,o,M));b={arrayValue:{values:I}}}else b=lP(u,o,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||uP(_,m),b=rk(c,a,_,m==="in"||m==="not-in");return Ze.create(f,m,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function lk(t,e,n){let i=e,r=l_("where",t);return Xg._create(r,i,n)}var WI=class t extends kh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ht.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r,c=o.getFlattenedFilters();for(let u of c)vk(a,u),a=Cw(a,u)}(e._query,n),new En(e.firestore,e.converter,Cw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var ZI=class t extends Ra{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,a){if(r.startAt!==null)throw new G($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new G($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ca(o,a)}(e._query,this._field,this._direction);return new En(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new Ki(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function uk(t,e="asc"){let n=e,i=l_("orderBy",t);return ZI._create(i,n)}var Jg=class t extends Ra{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new En(e.firestore,e.converter,vg(e._query,this._limit,this._limitType))}};function dk(t){return zR("limit",t),Jg._create("limit",t,"F")}function hk(t){return zR("limitToLast",t),Jg._create("limitToLast",t,"L")}var e_=class t extends Ra{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=_k(e,this.type,this._docOrFields,this._inclusive);return new En(e.firestore,e.converter,function(r,o){return new Ki(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function fk(...t){return e_._create("startAt",t,!0)}function pk(...t){return e_._create("startAfter",t,!1)}var t_=class t extends Ra{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=_k(e,this.type,this._docOrFields,this._inclusive);return new En(e.firestore,e.converter,function(r,o){return new Ki(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function mk(...t){return t_._create("endBefore",t,!1)}function gk(...t){return t_._create("endAt",t,!0)}function _k(t,e,n,i){if(n[0]=Vt(n[0]),n[0]instanceof Pa)return function(o,a,c,u,f){if(!u)throw new G($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let m=[];for(let _ of Sl(o))if(_.field.isKeyField())m.push(Ea(a,u.key));else{let b=u.data.field(_.field);if(i_(b))throw new G($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){let I=_.field.canonicalString();throw new G($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}m.push(b)}return new Pr(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Na(t.firestore);return function(a,c,u,f,m,_){let b=a.explicitOrderBy;if(m.length>b.length)throw new G($.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let I=[];for(let M=0;M<m.length;M++){let P=m[M];if(b[M].field.isKeyField()){if(typeof P!="string")throw new G($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof P}`);if(!nE(a)&&P.indexOf("/")!==-1)throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${P}' contains a slash.`);let F=a.path.child(Xe.fromString(P));if(!ie.isDocumentKey(F))throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);let H=new ie(F);I.push(Ea(c,H))}else{let F=rk(u,f,P);I.push(F)}}return new Pr(I,_)}(t._query,t.firestore._databaseId,r,e,n,i)}}function lP(t,e,n){if(typeof(n=Vt(n))=="string"){if(n==="")throw new G($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nE(e)&&n.indexOf("/")!==-1)throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Xe.fromString(n));if(!ie.isDocumentKey(i))throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Ea(t,new ie(i))}if(n instanceof St)return Ea(t,n._key);throw new G($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${a_(n)}.`)}function uP(t,e){if(!Array.isArray(t)||t.length===0)throw new G($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vk(t,e){let n=function(r,o){for(let a of r)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Gl=class{convertValue(e,n="none"){switch(Ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ae()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return ka(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Ma($t(e.latitude),$t(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=eE(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(mh(e));default:return null}}convertTimestamp(e){let n=uo(e);return new zt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Xe.fromString(e);fe(lR(i));let r=new ss(i.get(1),i.get(3)),o=new ie(i.popFirst(5));return r.isEqual(n)||Zt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function u_(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var KI=class extends Gl{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}};var lo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ki=class extends Pa{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(l_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},ns=class extends ki{data(e={}){return super.data(e)}},Xi=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new lo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ns(this._firestore,this._userDataWriter,i.key,i,new lo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let u=new ns(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new ns(r._firestore,r._userDataWriter,c.doc.key,c.doc,new lo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:K5(c.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function K5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae()}}function PE(t,e){return t instanceof ki&&e instanceof ki?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Xi&&e instanceof Xi&&t._firestore===e._firestore&&DE(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function yk(t){t=Je(t,St);let e=Je(t.firestore,Nt);return VR(cn(e),t._key).then(n=>OE(e,t,n))}var mo=class extends Gl{constructor(e){super(),this.firestore=e}convertBytes(e){return new kr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}};function bk(t){t=Je(t,St);let e=Je(t.firestore,Nt),n=cn(e),i=new mo(e);return U5(n,t._key).then(r=>new ki(e,i,t._key,r,new lo(r!==null&&r.hasLocalMutations,!0),t.converter))}function wk(t){t=Je(t,St);let e=Je(t.firestore,Nt);return VR(cn(e),t._key,{source:"server"}).then(n=>OE(e,t,n))}function Ik(t){t=Je(t,En);let e=Je(t.firestore,Nt),n=cn(e),i=new mo(e);return ck(t._query),BR(n,t._query).then(r=>new Xi(e,i,t,r))}function Ek(t){t=Je(t,En);let e=Je(t.firestore,Nt),n=cn(e),i=new mo(e);return $5(n,t._query).then(r=>new Xi(e,i,t,r))}function Ck(t){t=Je(t,En);let e=Je(t.firestore,Nt),n=cn(e),i=new mo(e);return BR(n,t._query,{source:"server"}).then(r=>new Xi(e,i,t,r))}function RE(t,e,n){t=Je(t,St);let i=Je(t.firestore,Nt),r=u_(t.converter,e,n);return Jl(i,[c_(Na(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ht.none())])}function kE(t,e,n,...i){t=Je(t,St);let r=Je(t.firestore,Nt),o=Na(r),a;return a=typeof(e=Vt(e))=="string"||e instanceof Yi?SE(o,"updateDoc",t._key,e,n,i):TE(o,"updateDoc",t._key,e),Jl(r,[a.toMutation(t._key,Ht.exists(!0))])}function xk(t){return Jl(Je(t.firestore,Nt),[new ds(t._key,Ht.none())])}function Dk(t,e){let n=Je(t.firestore,Nt),i=jh(t),r=u_(t.converter,e);return Jl(n,[c_(Na(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ht.exists(!1))]).then(()=>i)}function NE(t,...e){var n,i,r;t=Vt(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||FI(e[a])||(o=e[a],a++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(FI(e[a])){let _=e[a];e[a]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[a+1]=(i=_.error)===null||i===void 0?void 0:i.bind(_),e[a+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let u,f,m;if(t instanceof St)f=Je(t.firestore,Nt),m=Zl(t._key.path),u={next:_=>{e[a]&&e[a](OE(f,t,_))},error:e[a+1],complete:e[a+2]};else{let _=Je(t,En);f=Je(_.firestore,Nt),m=_._query;let b=new mo(f);u={next:I=>{e[a]&&e[a](new Xi(f,b,_,I))},error:e[a+1],complete:e[a+2]},ck(t._query)}return function(b,I,M,P){let F=new Hl(P),H=new Ah(I,F,M);return b.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return dE(yield ql(b),H)})),()=>{F.$a(),b.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return hE(yield ql(b),H)}))}}(cn(f),m,c,u)}function Tk(t,e){return H5(cn(t=Je(t,Nt)),FI(e)?e:{next:e})}function Jl(t,e){return function(i,r){let o=new nn;return i.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return E5(yield wE(i),r,o)})),o.promise}(cn(t),e)}function OE(t,e,n){let i=n.docs.get(e._key),r=new mo(t);return new ki(t,r,e._key,i,new lo(n.hasPendingWrites,n.fromCache),e.converter)}var Q5={maxAttempts:5};var n_=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Na(e)}set(e,n,i){this._verifyNotCommitted();let r=es(e,this._firestore),o=u_(r.converter,n,i),a=c_(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Ht.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=es(e,this._firestore),a;return a=typeof(n=Vt(n))=="string"||n instanceof Yi?SE(this._dataReader,"WriteBatch.update",o._key,n,i,r):TE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Ht.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=es(e,this._firestore);return this._mutations=this._mutations.concat(new ds(n._key,Ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function es(t,e){if((t=Vt(t)).firestore!==e)throw new G($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var QI=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Na(n)}get(n){let i=es(n,this._firestore),r=new KI(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return ae();let a=o[0];if(a.isFoundDocument())return new Pa(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new Pa(this._firestore,r,i._key,null,i.converter);throw ae()})}set(n,i,r){let o=es(n,this._firestore),a=u_(o.converter,i,r),c=c_(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(n,i,r,...o){let a=es(n,this._firestore),c;return c=typeof(i=Vt(i))=="string"||i instanceof Yi?SE(this._dataReader,"Transaction.update",a._key,i,r,o):TE(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,c),this}delete(n){let i=es(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=es(e,this._firestore),i=new mo(this._firestore);return super.get(e).then(r=>new ki(this._firestore,i,n._key,r._document,new lo(!1,!1),n.converter))}};function Sk(t,e,n){t=Je(t,Nt);let i=Object.assign(Object.assign({},Q5),n);return function(o){if(o.maxAttempts<1)throw new G($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,a,c){let u=new nn;return o.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){let f=yield B5(o);new kI(o.asyncQueue,f,c,a,u).Xa()})),u.promise}(cn(t),r=>e(new QI(t,r)),i)}function Ak(){return new Rh("deleteField")}function Mk(){return new zI("serverTimestamp")}function Pk(...t){return new UI("arrayUnion",t)}function Rk(...t){return new $I("arrayRemove",t)}function kk(t){return new HI("increment",t)}(function(e,n=!0){(function(r){Wl=r})(yC),Bu(new Ns("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),c=new Nt(new tw(i.getProvider("auth-internal")),new ow(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new G($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Ro(dM,"4.6.3",e),Ro(dM,"4.6.3","esm2017")})();var Y5="@firebase/firestore-compat",X5="0.3.32";function zE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Nk(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function Ok(){if(!xP())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}var d_=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Ok(),new t(kr.fromBase64String(e))}static fromUint8Array(e){return Nk(),new t(kr.fromUint8Array(e))}toBase64(){return Ok(),this._delegate.toBase64()}toUint8Array(){return Nk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function LE(t){return J5(t,["next","error","complete"])}function J5(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var FE=class{enableIndexedDbPersistence(e,n){return GR(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return WR(e._delegate)}clearIndexedDbPersistence(e){return KR(e._delegate)}},h_=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof ss||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Pi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){UR(this._delegate,e,n,i)}enableNetwork(){return YR(this._delegate)}disableNetwork(){return XR(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,EE("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return QR(this._delegate)}onSnapshotsInSync(e){return Tk(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nu(this,CE(this._delegate,e))}catch(n){throw $n(n,"collection()","Firestore.collection()")}}doc(e){try{return new Nr(this,jh(this._delegate,e))}catch(n){throw $n(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ba(this,$R(this._delegate,e))}catch(n){throw $n(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Sk(this._delegate,n=>e(new f_(this,n)))}batch(){return cn(this._delegate),new p_(new n_(this._delegate,e=>Jl(this._delegate,e)))}loadBundle(e){return JR(this._delegate,e)}namedQuery(e){return ek(this._delegate,e).then(n=>n?new Ba(this,n):null)}},eu=class extends Gl{constructor(e){super(),this.firestore=e}convertBytes(e){return new d_(new kr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Nr.forKey(n,this.firestore,null)}};function e4(t){dP(t)}var f_=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new eu(e)}get(e){let n=La(e);return this._delegate.get(n).then(i=>new Fa(this._firestore,new ki(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=La(e);return i?(zE("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=La(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=La(e);return this._delegate.delete(n),this}},p_=class{constructor(e){this._delegate=e}set(e,n,i){let r=La(e);return i?(zE("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=La(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=La(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},tu=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new ns(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Va(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new eu(e),n),r.set(n,o)),o}};tu.INSTANCES=new WeakMap;var Nr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new eu(e)}static forPath(e,n,i){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new St(n._delegate,i,new ie(e)))}static forKey(e,n,i){return new t(n,new St(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new nu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nu(this.firestore,CE(this._delegate,e))}catch(n){throw $n(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Vt(e),e instanceof St?xE(this._delegate,e):!1}set(e,n){n=zE("DocumentReference.set",n);try{return n?RE(this._delegate,e,n):RE(this._delegate,e)}catch(i){throw $n(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?kE(this._delegate,e):kE(this._delegate,e,n,...i)}catch(r){throw $n(r,"updateDoc()","DocumentReference.update()")}}delete(){return xk(this._delegate)}onSnapshot(...e){let n=Lk(e),i=Fk(e,r=>new Fa(this.firestore,new ki(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return NE(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=bk(this._delegate):e?.source==="server"?n=wk(this._delegate):n=yk(this._delegate),n.then(i=>new Fa(this.firestore,new ki(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(tu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $n(t,e,n){return t.message=t.message.replace(e,n),t}function Lk(t){for(let e of t)if(typeof e=="object"&&!LE(e))return e;return{}}function Fk(t,e){var n,i;let r;return LE(t[0])?r=t[0]:LE(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Fa=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Nr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return PE(this._delegate,e._delegate)}},Va=class extends Fa{data(e){let n=this._delegate.data(e);return this._delegate._converter||hP(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Ba=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new eu(e)}where(e,n,i){try{return new t(this.firestore,_o(this._delegate,lk(e,n,i)))}catch(r){throw $n(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,_o(this._delegate,uk(e,n)))}catch(i){throw $n(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,_o(this._delegate,dk(e)))}catch(n){throw $n(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,_o(this._delegate,hk(e)))}catch(n){throw $n(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,_o(this._delegate,fk(...e)))}catch(n){throw $n(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,_o(this._delegate,pk(...e)))}catch(n){throw $n(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,_o(this._delegate,mk(...e)))}catch(n){throw $n(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,_o(this._delegate,gk(...e)))}catch(n){throw $n(n,"endAt()","Query.endAt()")}}isEqual(e){return DE(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=Ek(this._delegate):e?.source==="server"?n=Ck(this._delegate):n=Ik(this._delegate),n.then(i=>new zh(this.firestore,new Xi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=Lk(e),i=Fk(e,r=>new zh(this.firestore,new Xi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return NE(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(tu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},VE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Va(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},zh=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ba(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Va(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new VE(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Va(this._firestore,i))})}isEqual(e){return PE(this._delegate,e._delegate)}},nu=class t extends Ba{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Nr(this.firestore,e):null}doc(e){try{return e===void 0?new Nr(this.firestore,jh(this._delegate)):new Nr(this.firestore,jh(this._delegate,e))}catch(n){throw $n(n,"doc()","CollectionReference.doc()")}}add(e){return Dk(this._delegate,e).then(n=>new Nr(this.firestore,n))}isEqual(e){return xE(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(tu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function La(t){return Je(t,St)}var BE=class t{constructor(...e){this._delegate=new Yi(...e)}static documentId(){return new t(Kt.keyField().canonicalString())}isEqual(e){return e=Vt(e),e instanceof Yi?this._delegate._internalPath.isEqual(e._internalPath):!1}};var jE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Mk();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Ak();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Pk(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Rk(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=kk(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var t4={Firestore:h_,GeoPoint:Ma,Timestamp:zt,Blob:d_,Transaction:f_,WriteBatch:p_,DocumentReference:Nr,DocumentSnapshot:Fa,Query:Ba,QueryDocumentSnapshot:Va,QuerySnapshot:zh,CollectionReference:nu,FieldPath:BE,FieldValue:jE,setLogLevel:e4,CACHE_SIZE_UNLIMITED:HR};function n4(t,e){t.INTERNAL.registerComponent(new Ns("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},t4)))}function i4(t){n4(t,(e,n)=>new h_(e,n,new FE)),t.registerVersion(Y5,X5)}i4(ai);function r4(t,e=dr){return new Pe(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function Vk(t,e){return r4(t,e)}function o4(t,e){return Vk(t,e).pipe(fr(void 0),xc(),_e(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function HE(t,e){return Vk(t,e).pipe(_e(n=>({payload:n,type:"query"})))}var m_=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=zk(i,n);return new __(r,o,this.afs)}snapshotChanges(){return o4(this.ref,this.afs.schedulers.outsideAngular).pipe(Jn)}valueChanges(e={}){return this.snapshotChanges().pipe(_e(({payload:n})=>e.idField?Et(ee({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return dt(this.ref.get(e)).pipe(Jn)}};function g_(t,e){return HE(t,e).pipe(fr(void 0),xc(),_e(n=>{let[i,r]=n,o=r.payload.docChanges(),a=o.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,u)=>{let f=o.find(_=>_.doc.ref.isEqual(c.ref)),m=i?.payload.docs.find(_=>_.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:c}})}),a}))}function Bk(t,e,n){return g_(t,n).pipe(Vs((i,r)=>s4(i,r.map(o=>o.payload),e),[]),Ec(),_e(i=>i.map(r=>({type:r.type,payload:r}))))}function s4(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=a4(t,i))}),t}function UE(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function a4(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return UE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return UE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return UE(t,e.oldIndex,1);break}return t}function jk(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var __=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=g_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(_e(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(fr(void 0),xc(),Bt(([i,r])=>r.length>0||!i),_e(([,i])=>i),Jn)}auditTrail(e){return this.stateChanges(e).pipe(Vs((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=jk(e);return Bk(this.query,n,this.afs.schedulers.outsideAngular).pipe(Jn)}valueChanges(e={}){return HE(this.query,this.afs.schedulers.outsideAngular).pipe(_e(n=>n.payload.docs.map(i=>e.idField?Et(ee({},i.data()),{[e.idField]:i.id}):i.data())),Jn)}get(e){return dt(this.query.get(e)).pipe(Jn)}add(e){return this.ref.add(e)}doc(e){return new m_(this.ref.doc(e),this.afs)}},$E=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?g_(this.query,this.afs.schedulers.outsideAngular).pipe(Jn):g_(this.query,this.afs.schedulers.outsideAngular).pipe(_e(n=>n.filter(i=>e.indexOf(i.type)>-1)),Bt(n=>n.length>0),Jn)}auditTrail(e){return this.stateChanges(e).pipe(Vs((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=jk(e);return Bk(this.query,n,this.afs.schedulers.outsideAngular).pipe(Jn)}valueChanges(e={}){return HE(this.query,this.afs.schedulers.outsideAngular).pipe(_e(i=>i.payload.docs.map(r=>e.idField?ee({[e.idField]:r.id},r.data()):r.data())),Jn)}get(e){return dt(this.query.get(e)).pipe(Jn)}},c4=new ce("angularfire2.enableFirestorePersistence"),l4=new ce("angularfire2.firestore.persistenceSettings"),u4=new ce("angularfire2.firestore.settings"),d4=new ce("angularfire2.firestore.use-emulator");function zk(t,e=n=>n){return{query:e(t),ref:t}}var Uk=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,a,c,u,f,m,_,b,I,M,P,F,H,Q){this.schedulers=u;let q=qd(n,c,i),oe=m;_&&z0(q,c,b,M,P,F,I,H),[this.firestore,this.persistenceEnabled$]=Fm(`${q.name}.firestore`,"AngularFirestore",q.name,()=>{let he=c.runOutsideAngular(()=>q.firestore());if(o&&he.settings(o),oe&&he.useEmulator(...oe),r&&!ia(a)){let le=()=>{try{return dt(he.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(S){return typeof console<"u"&&console.warn(S),pe(!1)}};return[he,c.runOutsideAngular(le)]}else return[he,pe(!1)]},[o,oe,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:a}=zk(r,i),c=this.schedulers.ngZone.run(()=>o);return new __(c,a,this)}collectionGroup(n,i){let r=i||(a=>a),o=this.firestore.collectionGroup(n);return new $E(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new m_(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(V(sl),V(al,8),V(c4,8),V(u4,8),V(jn),V(ve),V(Om),V(l4,8),V(d4,8),V(Zm,8),V(O0,8),V(L0,8),V(F0,8),V(V0,8),V(B0,8),V(j0,8),V(ca,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Ji=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.afs=r,this.router=o,this.firebaseConfig={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},this.user$=this.afAuth.authState.pipe(xt(a=>a?this.afs.doc(`users/${a.uid}`).valueChanges():pe(null))),this.userData=this.afAuth.authState.pipe(xt(a=>a?this.afs.doc(`users/${a.uid}/data/data`).valueChanges():pe(null)))}googleSignin(){return U(this,null,function*(){let i=new P_,r=yield this.afAuth.signInWithPopup(i);return this.currentUser=r.user,console.log(r),localStorage.setItem("key",r.user.uid),this.updateUserData(r.user)})}signOut(){return U(this,null,function*(){return yield this.afAuth.signOut(),this.router.navigate(["/"])})}updateUserData(i){console.log("update User Data");let r=this.afs.doc(`users/${i.uid}`);console.log("uid:",i.email,i.displayName,i.photoUrl,i.uid,r);let o={uid:i.uid,email:i.email,displayName:i.displayName,photoUrl:i.photoUrl,test:"test"};return this.addUserData(o),r.set(o)}getUserData(i){return this.afs.collection("users/",r=>r.where("uid","==",i)).valueChanges()}addUserData(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}`).set(i,{merge:!0})}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}`).set(i,{merge:!0})):null}addDataToUser(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}/data/data`).set(i,{merge:!0})}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}/data/data`).set(i,{merge:!0})):null}};e.\u0275fac=function(r){return new(r||e)(V(Zm),V(Uk),V(km))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function f4(t,e){if(t&1){let n=An();Z(0,"div",15)(1,"button",16),He("click",function(){bn(n);let r=Be();return wn(r.onCloseClick())}),ue(2,"X"),Y(),Z(3,"h1"),ue(4,"Car"),Y(),Z(5,"p"),ue(6),Y(),Z(7,"p"),ue(8),Y()()}if(t&2){let n=Be();yt("z-index",n.z)("display","block"),te(6),Dt(n.randomCar.car),te(2),Dt(n.randomCar.hp)}}function p4(t,e){if(t&1){let n=An();Z(0,"img",17),He("click",function(){bn(n);let r=Be();return wn(r.hideMap.emit("profile"))}),Y()}if(t&2){let n=Be();et("src",n.user.photoUrl,li)}}function m4(t,e){if(t&1){let n=An();Z(0,"img",18),He("click",function(){bn(n);let r=Be();return wn(r.hideMap.emit("profile"))}),Y()}}var $k=(()=>{let e=class e{ngOnInit(){if(localStorage.getItem("garagePrice")){console.log(JSON.parse(localStorage.getItem("garages")));let i=JSON.parse(localStorage.getItem("garages"));this.garagePrice=JSON.parse(localStorage.getItem("garagePrice")),this.allGarages.push(...i),console.log(i),setTimeout(()=>{i.forEach(r=>{console.log(r);let o=pt.marker([r.lat,r.lng],{icon:this.garageIcon}).addTo(this.map),a=pt.circle([r.lat,r.lng],100).addTo(this.map).setStyle({color:"#20C912"})})},500)}}initMap(){navigator.geolocation.getCurrentPosition(r=>{console.log(r.coords),this.moveMap([r.coords.latitude,r.coords.longitude])}),this.map=pt.map("map",{center:[0,0],zoom:18,attributionControl:!0}).on("click",r=>{console.log(r.latlng.lat,r.latlng.lng);let o=new S0;var a=pt.popup().setLatLng([r.latlng.lat,r.latlng.lng]).setContent(`<p>Do you want to buy a Garage here</p>
        
        <p>Price: ${o.transform(this.garagePrice.price)} </p>
        
        <button id="buyButton">Buy Garage</button>
        
        <style>
        #buyButton {
        background-color: green;
        width: 80%;
        margin: auto;
        border-radius: 5px;
        color: white;
        }
        * {
          text-align: center;
        }
        </style>
        `).openOn(this.map);document.getElementById("buyButton").addEventListener("click",c=>{if(console.log(c),console.log(r.latlng),this.coins>this.garagePrice.price){console.log("passt"),this.coins=this.coins-this.garagePrice.price,this.garagePrice.price=this.garagePrice.price*15,this.allGarages.push({lat:r.latlng.lat,lng:r.latlng.lng}),console.log(this.allGarages),localStorage.setItem("garages",JSON.stringify(this.allGarages)),localStorage.setItem("garagePrice",JSON.stringify(this.garagePrice));let u=pt.marker([r.latlng.lat,r.latlng.lng],{icon:this.garageIcon}).addTo(this.map).on("click",()=>{}),f=pt.circle([r.latlng.lat,r.latlng.lng],100).addTo(this.map).setStyle({color:"#20C912"})}})}),this.moveMap([49,12]);let i=pt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});navigator.geolocation.watchPosition(r=>{let o=r.coords.latitude,a=r.coords.longitude,c=r.coords.accuracy;setTimeout(()=>{pt.marker([49.3,10.5833333],{icon:this.repairShop}).addTo(this.map).on("click",this.onRepairShopClick)},5e3),setTimeout(()=>{this.currentPos=null},5e3)}),i.addTo(this.map),this.path(),this.generateRandomCars()}onBuyGarageClick(i){console.log(i)}onRepairShopClick(){console.log("jetzt")}constructor(i){this.auth=i,this.hideMap=new tt,this.coins=0,this.iconHome=pt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/home.png'>",iconSize:[86,105],iconAnchor:[43,105]}),this.iconCar=pt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img id='car' src='../../assets/Car.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.manCar=pt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Man.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.repairShop=pt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Repair.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.garageIcon=pt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/garage_locater.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.carLayer=new pt.FeatureGroup,this.allGarages=[],this.garagePrice={price:1e4,symbol:"K"},this.cars=+localStorage.getItem("carcount"),this.gems=0,this.oldPos={lat:0,lng:0},this.distance=.005,this.allCities=[],this.cityMarkers=[],this.isoCountries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},this.randomCars=[],this.generiertePositionen=[],this.randomCar={car:"Car12",hp:1},this.visible=!0,this.z=0,this.user=i.user$.subscribe(r=>{console.log(r),this.user=r})}onUserClick(){this.hideMap.emit("garage")}hideMapNow(i){this.hideMap.emit(i)}ngAfterViewInit(){navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,console.log(this.lng,this.lat)}),console.log(this.lat,this.lng),this.initMap(),setTimeout(()=>{},5e3),navigator.geolocation.watchPosition(i=>{console.log(i),this.marker!=null&&this.map.removeLayer(this.marker),this.marker=pt.marker([i.coords.latitude,i.coords.longitude],{icon:this.manCar}).addTo(this.map),this.moveMap([i.coords.latitude,i.coords.longitude]),console.log(this.marker,this.carLayer),setTimeout(()=>{console.log("jetzt")},5e3);let r=!0;console.log(this.generiertePositionen),this.generiertePositionen.forEach(o=>{let a=this.getDistance([o[0],o[1]],[this.lat,this.lng]);console.log("Distance:",a,this.generiertePositionen),a<500&&(r=!1)}),r==!0&&this.genNewCars(),this.allCities.forEach(o=>{let a=o.latitude,c=o.longitude,u=this.lng-c,f=this.lat-a;u>-.005&&u<.005&&(console.log(o),console.log(this.lat,this.lng),console.log(f,u))})}),this.getAllCities()}moveMap(i){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.map.flyTo(i,18),this.oldPos.lat=i[0],this.oldPos.lng=i[1])}path(){console.log("Start"),navigator.geolocation.watchPosition(i=>{let r=i.coords.latitude,o=i.coords.longitude,a=i.coords.accuracy;this.lat=r,this.lng=o;var c=[[r,o],[r,o+this.distance]]})}getCountryName(i){return this.isoCountries.hasOwnProperty(i)?this.isoCountries[i]:i}generateRandomCars(){console.log("generateRandomCarsStart",this.lat,this.lng),navigator.geolocation.getCurrentPosition(i=>{this.generiertePositionen.push([i.coords.latitude,i.coords.longitude]);for(let r=0;r<25;r++){let o=i.coords.latitude+(Math.random()-.5)/100,a=i.coords.longitude+(Math.random()-.5)/100;console.log(o,a);let c=pt.circle([o,a],50).addTo(this.map);this.randomCars.push({Lat:o,Lng:a});let u=pt.marker([o,a],{icon:this.iconCar}).addTo(this.map);u.on("click",()=>{this.getDistance([o,a],[this.lat,this.lng])<=50&&(console.log(o,a,this.getDistance([o,a],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c))}),console.log(this.randomCars),this.map.removeLayer(this.map)}}),console.log("fertig Random")}genNewCars(){console.log("generateRandomCarsStart",this.lat,this.lng),this.generiertePositionen.push([this.lat,this.lng]),console.log("hier");for(let i=0;i<25;i++){console.log("hier");let r=this.lat+(Math.random()-.5)/100,o=this.lng+(Math.random()-.5)/100;console.log(r,o);let a=pt.circle([r,o],50).addTo(this.map);this.randomCars.push({Lat:r,Lng:o});let c=pt.marker([r,o],{icon:this.iconCar}).addTo(this.map);c.on("click",()=>{this.getDistance([r,o],[this.lat,this.lng])<=50&&(console.log(r,o,this.getDistance([r,o],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a))}),console.log(this.randomCars),this.map.removeLayer(this.map)}console.log("fertig Random")}getAllCities(){return U(this,null,function*(){let i={method:"GET",redirect:"follow"},r;yield fetch("https://api.country.is/",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{r=this.getCountryName(o.country)}).catch(o=>{console.log(o)}),yield fetch("https://countriesnow.space/api/v0.1/countries/population/cities",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{console.log(o.data),o.data.forEach(a=>{setTimeout(()=>{a.populationCounts[0].value>1e4&&a.country==r&&fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${a.city}`,{method:"GET",redirect:"follow"}).then(c=>c.json()).then(c=>{setTimeout(()=>{c.results&&(pt.marker([c.results[0].latitude,c.results[0].longitude],{icon:this.repairShop}).addTo(this.map),this.allCities.push(c.results[0]),pt.circle([c.results[0].latitude,c.results[0].longitude],550).addTo(this.map).setStyle({color:"red"}))},1e3)}).catch(c=>console.log(c))})},100)}).catch(o=>console.log(o))})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,m=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(m/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}onCloseClick(){this.visible=!0,console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ye(Ji))},e.\u0275cmp=ft({type:e,selectors:[["app-leaflat-map"]],inputs:{coins:"coins"},outputs:{hideMap:"hideMap"},standalone:!0,features:[Tt],decls:27,vars:13,consts:[[1,"items"],["id","coins"],["id","icon"],["src","../../assets/icon%20(2).png"],["id","text"],["id","cars"],["src","../../assets/icon%20(3).png"],["id","gems"],["src","../../assets/icon%20(1).png"],[1,"map-container"],[1,"map-frame"],["id","map"],["id","carCard",3,"z-Index","display"],["id","user"],["width","50px","height","50px",3,"src"],["id","carCard"],["id","closeBtn",3,"click"],["width","50px","height","50px",3,"click","src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px",3,"click"]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"div",1)(2,"div",2),be(3,"img",3),Y(),Z(4,"div",4)(5,"p"),ue(6),Wc(7,"currency"),Y()()(),Z(8,"div",5)(9,"div",2),be(10,"img",6),Y(),Z(11,"div",4)(12,"p"),ue(13),Y()()(),Z(14,"div",7)(15,"div",2),be(16,"img",8),Y(),Z(17,"div",4)(18,"p"),ue(19),Y()()()(),Z(20,"div",9)(21,"div",10),be(22,"div",11),Y()(),nt(23,f4,9,6,"div",12),Z(24,"div",13),nt(25,p4,1,1,"img",14)(26,m4,1,0),Y()),r&2&&(te(6),Dt(Zc(7,11,o.coins)),te(7),Dt(o.cars),te(6),Dt(o.gems),te(),yt("display",o.visible?"block":"none"),te(),yt("display",o.visible?"block":"none"),te(),yt("display",o.visible?"block":"none"),te(),jt(23,o.visible==!1?23:-1),te(2),jt(25,o.user.photoUrl?25:26))},dependencies:[KA,S0],styles:['.map-container[_ngcontent-%COMP%]{position:absolute;inset:0;height:calc(100% + -0px)}.items[_ngcontent-%COMP%]{position:absolute;top:25px;left:0;display:flex;z-index:50000;justify-content:space-around;width:100%}#user[_ngcontent-%COMP%]{z-index:50000;position:absolute;bottom:35px;left:15px;width:50px;height:50px}#user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}#buyButton[_ngcontent-%COMP%]{width:80%;height:25px;background-color:green}.items[_ngcontent-%COMP%]   #cars[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #gems[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #coins[_ngcontent-%COMP%]{width:100px;height:25px;background-color:#fff;border:1px black solid;border-radius:2px}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map[_ngcontent-%COMP%]{height:100%}.marker-pin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:500}.marker-pin[_ngcontent-%COMP%]:after{content:"";width:1px;height:1px;margin:3px 0 0 3px;background:#fff;position:absolute;border-radius:50%}.custom-div-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:5px;font-size:5px;left:0;right:0;margin:10px auto;text-align:center}img[_ngcontent-%COMP%]{width:50px;height:55px}#car[_ngcontent-%COMP%]{width:3px;height:3px}#carCard[_ngcontent-%COMP%]{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:5000;background-color:#fff;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}#icon[_ngcontent-%COMP%]{width:30%;height:100%}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:75%}#text[_ngcontent-%COMP%]{width:70%}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-37.5px;left:25px}']});let t=e;return t})();var Hk=(()=>{let e=class e{constructor(){fetch("../../assets/cars.json",{method:"GET",redirect:"follow"}).then(i=>i.json()).then(i=>{console.log(i),this.cars=i,console.log(this.cars)}).catch(i=>console.error(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _4(t,e){if(t&1&&(be(0,"br"),Z(1,"h1"),ue(2),Y(),be(3,"img",2),Z(4,"div",3)(5,"div",4),ue(6),Y(),Z(7,"div",5),ue(8),Y(),Z(9,"div",6),ue(10),Y(),Z(11,"div",7),ue(12),Y(),Z(13,"div",8),ue(14),Y(),Z(15,"div",9),ue(16),Y()(),be(17,"br")),t&2){let n=Be();te(),yt("color",n.randomCar.textColor),te(),Dt(n.randomCar.Name.toUpperCase()),te(),et("src",n.randomCar.Path,li),te(2),yt("background",n.randomCar.Color)("color",n.randomCar.textColor),te(),Mn("",n.randomCar.Horsepower," hp"),te(),yt("background",n.randomCar.Color)("color",n.randomCar.textColor),te(),Mn("",n.randomCar.Miles_per_Gallon," Miles per Gallon"),te(),yt("background",n.randomCar.Color)("color",n.randomCar.textColor),te(),Mn("",n.randomCar.Cylinders," Cylinders"),te(),yt("background",n.randomCar.Color)("color",n.randomCar.textColor),te(),Mn(" ",n.randomCar.Acceleration,"s 0 - 60 mp/h"),te(),yt("background",n.randomCar.Color)("color",n.randomCar.textColor),te(),Mn(" ",n.randomCar.CPS.toFixed(2)," coins per second"),te(),yt("background",n.randomCar.Color)("color",n.randomCar.textColor),te(),Mn(" Year: ",n.randomCar.Year," ")}}var qk=(()=>{let e=class e{addCoin(i){console.log(i),this.addCoins.emit(Math.floor(i))}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){if(setTimeout(()=>{this.getRandomCar()},500),localStorage.getItem("mycars")){let i=JSON.parse(localStorage.getItem("mycars"));console.log(localStorage.getItem("mycars"),JSON.parse(localStorage.getItem("mycars"))),console.log("allcars"),console.log(i),this.myCars.push(...i),console.log(this.myCars)}}constructor(i){this.car=i,this.hideMap=new tt,this.addCoins=new tt,this.CPS=0,this.randomCar={car:"Car12",hp:1,topSpeed:152},this.myCars=[],this.allCars=[],this.allCars=this.car.cars}getAllCars(){this.allCars=this.car.cars}getRandomCar(){if(console.log(this.car.cars),this.car.cars){let i=this.car.cars[Math.floor(Math.random()*this.car.cars.length)];console.log(i),this.randomCar=i,this.randomCar.CPS=this.randomCar.Horsepower*this.randomCar.Acceleration*this.randomCar.Cylinders/1e3,this.myCars.push(i),console.log(this.CPS),this.CPS=this.CPS+i.CPS,console.log(this.CPS),this.getCPS(),localStorage.setItem("mycars",JSON.stringify(this.myCars))}}getCPS(){this.addCoin(this.CPS),console.log(this.CPS)}};e.\u0275fac=function(r){return new(r||e)(ye(Hk))},e.\u0275cmp=ft({type:e,selectors:[["app-car-found"]],outputs:{hideMap:"hideMap",addCoins:"addCoins"},standalone:!0,features:[Tt],decls:6,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&(Z(0,"body")(1,"div",0)(2,"button",1),He("click",function(){return o.onCloseClick()}),ue(3,"X"),Y(),be(4,"br"),nt(5,_4,18,34),Y()()),r&2&&(te(),yt("display","block")("background",o.randomCar.Color),te(4),jt(5,o.randomCar.Color?5:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;height:30px;padding-top:7.5px}"]});let t=e;return t})();function v4(t,e){if(t&1&&(Z(0,"div",6),be(1,"br")(2,"img",7)(3,"br"),Z(4,"p"),ue(5),Y()()),t&2){let n=e.$implicit;yt("background",n.Color),te(2),et("src",n.Path,li),te(3),Dt(n.Name)}}function y4(t,e){if(t&1&&am(0,v4,6,4,"div",5,sm),t&2){let n=Be();cm(n.myCars)}}var Gk=(()=>{let e=class e{constructor(){this.hideMap=new tt}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ft({type:e,selectors:[["app-my-cars"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Tt],decls:6,vars:1,consts:[[1,"container"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["id","car",3,"background"],["id","car"],["width","50%","height","auto",3,"src"]],template:function(r,o){r&1&&(Z(0,"div",0),nt(1,y4,2,0),Y(),Z(2,"div",1),He("click",function(){return o.onCloseClick()}),Z(3,"div",2),He("click",function(){return o.onCloseClick()}),Z(4,"button",3),He("click",function(){return o.onCloseClick()}),be(5,"img",4),Y()()()),r&2&&(te(),jt(1,o.myCars?1:-1))},styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();function b4(t,e){if(t&1&&be(0,"img",5),t&2){let n=Be(2);et("src",n.user.photoUrl,li)}}function w4(t,e){t&1&&be(0,"img",6)}function I4(t,e){if(t&1&&(Z(0,"div",4),nt(1,b4,1,1,"img",5)(2,w4,1,0),Z(3,"p"),ue(4),Y()(),be(5,"br")),t&2){let n=Be();te(),jt(1,n.user.photoUrl?1:2),te(3),Dt(n.user.displayName)}}function E4(t,e){if(t&1&&(Z(0,"div",7)(1,"p"),ue(2),Y()(),Z(3,"div",8),be(4,"img",9),Y()),t&2){let n=Be();te(2),Dt(n.key),te(2),et("src","https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+n.key,li)}}var Wk=(()=>{let e=class e{constructor(i){this.auth=i,this.addFriend=new tt,this.key=localStorage.getItem("key"),i.user$.subscribe(r=>{console.log(r),this.user=r}),this.key=localStorage.getItem("key")}onFriendAdd(i){console.log(i),this.addFriend.emit(i)}};e.\u0275fac=function(r){return new(r||e)(ye(Ji))},e.\u0275cmp=ft({type:e,selectors:[["app-add-friend"]],outputs:{addFriend:"addFriend"},standalone:!0,features:[Tt],decls:9,vars:2,consts:[["friendInput",""],["id","input"],["type","text"],[3,"click"],[1,"user","container"],["width","50px","height","50px",3,"src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px"],["id","key"],["id","qr"],["alt","","width","150px","height","150px",3,"src"]],template:function(r,o){if(r&1){let a=An();nt(0,I4,6,2)(1,E4,5,2),Z(2,"p"),ue(3,"Add Friend"),Y(),Z(4,"div",1),be(5,"input",2,0),Z(7,"button",3),He("click",function(){bn(a);let u=lm(6);return wn(o.onFriendAdd(u.value))}),ue(8,"Add Friend"),Y()()}r&2&&(jt(0,o.user?0:-1),te(),jt(1,o.key?1:-1))},styles:[".user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#qr[_ngcontent-%COMP%]{width:175px;height:175px;border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#qr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:12.5px}*[_ngcontent-%COMP%]{text-align:center}#key[_ngcontent-%COMP%]{border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#input[_ngcontent-%COMP%]{margin:auto}"]});let t=e;return t})();function C4(t,e){if(t&1&&(Z(0,"div",5),be(1,"img",6),Z(2,"p",7),ue(3),Y()()),t&2){let n=Be().$implicit;te(),et("src",n.photoUrl,li),te(2),Dt(n.displayName)}}function x4(t,e){if(t&1&&nt(0,C4,4,2,"div",5),t&2){let n=e.$implicit;jt(0,n?0:-1)}}var Zk=(()=>{let e=class e{constructor(i){this.auth=i,this.hideMap=new tt,this.friends=[],this.friendData=[]}ngOnInit(){localStorage.getItem("friends")&&(this.friends=JSON.parse(localStorage.getItem("friends"))),this.getAllFriends()}addFriend(i){console.log(i,i.length),i.length>20&&i.length<32&&(this.friends.push(i),localStorage.setItem("friends",JSON.stringify(this.friends))),this.getAllFriends()}removeDup(i){let r=[];return i.forEach((o,a)=>{r.indexOf(o)===-1&&r.push(o)}),r}getAllFriends(){this.friendData=[],this.removeDup(this.friends).forEach(i=>{console.log(i),console.log(this.auth.getUserData(i).subscribe(r=>{console.log(r),this.friendData.push(r[0])}))})}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(ye(Ji))},e.\u0275cmp=ft({type:e,selectors:[["app-friends"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Tt],decls:7,vars:0,consts:[[3,"addFriend"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"user","container"],["width","50px","height","50px",3,"src"],["id","username"]],template:function(r,o){r&1&&(Z(0,"app-add-friend",0),He("addFriend",function(c){return o.addFriend(c)}),Y(),am(1,x4,1,1,null,null,sm),Z(3,"div",1),He("click",function(){return o.onCloseClick()}),Z(4,"div",2),He("click",function(){return o.onCloseClick()}),Z(5,"button",3),He("click",function(){return o.onCloseClick()}),be(6,"img",4),Y()()()),r&2&&(te(),cm(o.friendData))},dependencies:[Wk],styles:['*[_ngcontent-%COMP%]{text-align:center}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#username[_ngcontent-%COMP%]{width:250px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var Kk=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Cr]});let t=e;return t})();function D4(t,e){if(t&1&&(Z(0,"div",5),be(1,"img",20),Z(2,"p"),ue(3),Y()()),t&2){let n=Be();te(),et("src",n.user.photoUrl,li),te(2),Dt(n.user.displayName)}}var Qk=(()=>{let e=class e{constructor(i){this.auth=i,this.hideMap=new tt,this.progress=0,i.user$.subscribe(r=>{console.log(r),this.user=r})}onLogoutClick(){localStorage.removeItem("key"),this.auth.signOut(),window.location.reload()}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(ye(Ji))},e.\u0275cmp=ft({type:e,selectors:[["app-profile"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Tt],decls:68,vars:3,consts:[[1,"logout"],["src","../../assets/image-removebg-preview (11).png","width","30px","height","30px",3,"click"],[1,"menu","container"],[1,"profile"],[1,"friends"],[1,"user","container"],[1,"container","level"],[1,"Level"],[1,"Progressbar"],["id","progress"],["id","fortschritt"],[1,"container"],["id","icon",3,"click"],["src","../../assets/car_icon.png","width","50px","height","50px"],["src","../../assets/addFriends_icon.png","width","50px","height","50px"],["id","icon"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["width","50px","height","50px",3,"src"]],template:function(r,o){r&1&&(Z(0,"div",0)(1,"img",1),He("click",function(){return o.onLogoutClick()}),Y()(),Z(2,"div",2),be(3,"div",3)(4,"div",4),Y(),nt(5,D4,4,2,"div",5),be(6,"br"),Z(7,"div",6)(8,"div",7)(9,"p"),ue(10,"1"),Y(),Z(11,"p"),ue(12,"LEVEL"),Y()(),Z(13,"div",8)(14,"div",9)(15,"p",10),ue(16,"7.125/ 10000"),Y()()()(),be(17,"hr"),Z(18,"div",11)(19,"div",12),He("click",function(){return o.hideMap.emit("garage")}),be(20,"img",13),Z(21,"p"),ue(22,"Garage"),Y()(),Z(23,"div",12),He("click",function(){return o.hideMap.emit("friends")}),be(24,"img",14),Z(25,"p"),ue(26,"Friends"),Y()(),Z(27,"div",15),be(28,"img",13),Z(29,"p"),ue(30,"Garage"),Y()(),Z(31,"div",15),be(32,"img",13),Z(33,"p"),ue(34,"Garage"),Y()()(),be(35,"br")(36,"br")(37,"hr"),Z(38,"div",11)(39,"p"),ue(40,"Gelaufene Distanz"),Y(),Z(41,"p"),ue(42,"1.5 km"),Y()(),Z(43,"div",11)(44,"p"),ue(45,"Gelaufene Distanz"),Y(),Z(46,"p"),ue(47,"1.5 km"),Y()(),Z(48,"div",11)(49,"p"),ue(50,"Gelaufene Distanz"),Y(),Z(51,"p"),ue(52,"1.5 km"),Y()(),Z(53,"div",11)(54,"p"),ue(55,"Gelaufene Distanz"),Y(),Z(56,"p"),ue(57,"1.5 km"),Y()(),Z(58,"div",11)(59,"p"),ue(60,"Gelaufene Distanz"),Y(),Z(61,"p"),ue(62,"1.5 km"),Y()(),be(63,"hr"),Z(64,"div",16),He("click",function(){return o.onCloseClick()}),Z(65,"div",17),He("click",function(){return o.onCloseClick()}),Z(66,"button",18),He("click",function(){return o.onCloseClick()}),be(67,"img",19),Y()()()),r&2&&(te(5),jt(5,o.user?5:-1),te(9),yt("width",o.progress+"%"))},dependencies:[Kk],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}.logout[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e53d31;border-radius:50%;position:absolute;right:5px}.logout[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px}img[_ngcontent-%COMP%]{margin:0 auto auto}#icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e96245;border-radius:50%;border:0px}.Progressbar[_ngcontent-%COMP%]{width:80%;height:50px;border-radius:50px}#progress[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#000;border-radius:50px}#fortschritt[_ngcontent-%COMP%]{margin-left:150px;width:150px}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var T4=["canvas"],S4=["rLabel"],A4=["reading"],M4=[[["ngx-gauge-prepend"]],[["ngx-gauge-value"]],[["ngx-gauge-append"]],[["ngx-gauge-label"]]],P4=["ngx-gauge-prepend","ngx-gauge-value","ngx-gauge-append","ngx-gauge-label"];function R4(t,e){t&1&&Gi(0,0,["*ngSwitchCase","true"])}function k4(t,e){if(t&1&&(Xs(0),ue(1),Js()),t&2){let n=Be();te(),Dt(n.prepend)}}function N4(t,e){t&1&&Gi(0,1,["*ngSwitchCase","true"])}function O4(t,e){if(t&1&&(Xs(0),ue(1),Wc(2,"number"),Js()),t&2){let n=Be();te(),Dt(Zc(2,1,n.value))}}function L4(t,e){t&1&&Gi(0,2,["*ngSwitchCase","true"])}function F4(t,e){if(t&1&&(Xs(0),ue(1),Js()),t&2){let n=Be();te(),Dt(n.append)}}function V4(t,e){t&1&&Gi(0,3,["*ngSwitchCase","true"])}function B4(t,e){if(t&1&&(Xs(0),ue(1),Js()),t&2){let n=Be();te(),Dt(n.label)}}function Yk(t,e,n){return Math.max(e,Math.min(n,t))}function j4(t){return t!=null&&`${t}`!="false"}function Uh(t,e=0){return isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function Xk(t){return`${t}px`}function Jk(t){return t!=null&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}var z4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["ngx-gauge-append"]],exportAs:["ngxGaugeAppend"]});let t=e;return t})(),U4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["ngx-gauge-prepend"]],exportAs:["ngxGaugePrepend"]});let t=e;return t})(),$4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["ngx-gauge-value"]],exportAs:["ngxGaugeValue"]});let t=e;return t})(),H4=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Mt({type:e,selectors:[["ngx-gauge-label"]],exportAs:["ngxGaugeLabel"]});let t=e;return t})(),Or={MIN:0,MAX:100,TYPE:"arch",THICK:4,FOREGROUND_COLOR:"rgba(0, 150, 136, 1)",BACKGROUND_COLOR:"rgba(0, 0, 0, 0.1)",CAP:"butt",SIZE:200},e1=(()=>{let e=class e{get size(){return this._size}set size(i){this._size=Uh(i)}get margin(){return this._margin}set margin(i){this._margin=Uh(i)}get min(){return this._min}set min(i){this._min=Uh(i,Or.MIN)}get animate(){return this._animate}set animate(i){this._animate=j4(i)}get max(){return this._max}set max(i){this._max=Uh(i,Or.MAX)}get value(){return this._value}set value(i){this._value=Uh(i)}constructor(i,r){this._elementRef=i,this._renderer=r,this._size=Or.SIZE,this._min=Or.MIN,this._max=Or.MAX,this._animate=!0,this._margin=0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=Or.TYPE,this.cap=Or.CAP,this.thick=Or.THICK,this.foregroundColor=Or.FOREGROUND_COLOR,this.backgroundColor=Or.BACKGROUND_COLOR,this.thresholds=Object.create(null),this.markers=Object.create(null),this._value=0,this.duration=1200}ngOnInit(){this.markers&&Object.keys(this.markers).length>0&&!this._margin&&(this._margin=10)}ngOnChanges(i){let r=i.thick||i.type||i.cap||i.size,o=i.value||i.min||i.max;if(this._initialized){if(o){let a;if(i.value){a=Number(i.value.currentValue),a=isNaN(a)?0:a;let c=Number(i.value.previousValue);this._oldChangeVal=isNaN(c)?this._oldChangeVal:c}this._update(a,this._oldChangeVal)}r&&(this._destroy(),this._init())}}_updateSize(){this._renderer.setStyle(this._elementRef.nativeElement,"width",Xk(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",Xk(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-this.size*.22/2)+"px)")}ngAfterViewInit(){this._canvas&&this._init()}ngOnDestroy(){this._destroy()}_getBounds(i){let r,o,a,c;return i=="semi"?(r=Math.PI,o=2*Math.PI,a=180,c=360):i=="full"?(r=1.5*Math.PI,o=3.5*Math.PI,a=270,c=a+360):i==="arch"&&(r=.8*Math.PI,o=2.2*Math.PI,a=180-.2*180,c=360+.2*180),{head:r,tail:o,start:a,end:c}}_drawShell(i,r,o,a){let c=this._getCenter(),u=this._getRadius();if(this._initialized){this._clear(),this._drawMarkersAndTicks();let f=this._getBackgroundColorRanges();if(this._context.lineWidth=this.thick,f&&f.length>0){this._context.lineCap="butt";for(let m=0;m<f.length;++m){let _=f[m];this._context.beginPath(),this._context.strokeStyle=_.backgroundColor?_.backgroundColor:_.bgOpacity?_.color:this.backgroundColor,_.bgOpacity!==void 0&&_.bgOpacity!==null&&(this._context.globalAlpha=_.bgOpacity),this._context.arc(c.x,c.y,u,this._getDisplacement(_.start),this._getDisplacement(_.end),!1),this._context.stroke(),this._context.globalAlpha=1}}else this._context.lineCap=this.cap,this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(c.x,c.y,u,i,o,!1),this._context.stroke();this._drawFill(i,r,o,a)}}_drawFill(i,r,o,a){let c=this._getCenter(),u=this._getRadius();this._context.lineCap=this.cap,this._context.lineWidth=this.thick,r=Math.max(r,i),r=Math.min(r,o),this._context.lineCap=this.cap,this._context.lineWidth=this.thick,this._context.beginPath(),this._context.strokeStyle=a,this._context.arc(c.x,c.y,u,i,r,!1),this._context.stroke()}_addMarker(i,r,o,a,c,u){var f=i*Math.PI/180;let m=2;c||(c=8),a||(a="line");let _=this._getCenter(),b=this._getRadius(),I=(b+this.thick/2+m)*Math.cos(f)+_.x,M=(b+this.thick/2+m)*Math.sin(f)+_.y,P=(b+this.thick/2+m+c)*Math.cos(f)+_.x,F=(b+this.thick/2+m+c)*Math.sin(f)+_.y;if(a=="triangle"){this._context.beginPath(),this._context.strokeStyle=r,this._context.moveTo(I,M),this._context.lineWidth=1;let H=i-45,Q=i+45;H<0&&(H+=360),H>360&&(H-=360),Q<0&&(Q+=360),Q>360&&(Q-=360);let q=H*Math.PI/180,oe=c*Math.cos(q)+I,he=c*Math.sin(q)+M;this._context.lineTo(oe,he);let le=Q*Math.PI/180,S=c*Math.cos(le)+I,C=c*Math.sin(le)+M;this._context.lineTo(S,C),this._context.lineTo(I,M),this._context.closePath(),this._context.stroke(),this._context.fillStyle=r,this._context.fill()}else this._context.beginPath(),this._context.lineWidth=.5,this._context.strokeStyle=r,this._context.moveTo(I,M),this._context.lineTo(P,F),this._context.closePath(),this._context.stroke();o&&(this._context.save(),this._context.translate(P,F),this._context.rotate((i+90)*(Math.PI/180)),this._context.textAlign="center",this._context.font=u||"13px Arial",this._context.fillText(o,0,-3),this._context.restore())}_clear(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())}_getWidth(){return this.size}_getHeight(){return this.size}_getCanvasHeight(){return this.type=="arch"||this.type=="semi"?.85*this._getHeight():this._getHeight()}_getRadius(){var r=this._getCenter().x-this.thick;return this._margin>0&&(r-=this._margin),r}_getCenter(){var i=this._getWidth()/2,r=this._getHeight()/2;return{x:i,y:r}}_init(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._create()}_destroy(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1}_getForegroundColorByRange(i){let r=this._getThresholdMatchForValue(i);return r&&r.color?r.color:this.foregroundColor}_getThresholdMatchForValue(i){let r=Object.keys(this.thresholds).filter(function(o){return Jk(o)&&Number(o)<=i}).sort((o,a)=>Number(o)-Number(a)).reverse()[0];if(r!==void 0){let o=this.thresholds[r];return{color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity,start:Number(r),end:this._getNextThreshold(Number(r))}}}_getNextThreshold(i){let r=Object.keys(this.thresholds).filter(function(o){return Jk(o)&&Number(o)>i}).sort((o,a)=>Number(o)-Number(a));return r&&r[0]!==void 0?Number(r[0]):this.max}_getBackgroundColorRanges(){let i=0,r=[];do{let o=this._getThresholdMatchForValue(i);if(o){if(r.push({start:o.start,end:o.end,color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity}),i=o.end,i>=this.max)break}else break}while(!0);return r}_getDisplacement(i){let r=this.type,o=this._getBounds(r),a=this.min,c=this.max,u=o.head,f=Yk(i,this.min,this.max),m=(o.tail-o.head)/(c-a),_=m*(f-a);return u+_}_create(i,r){let o=this,a=this.type,c=this._getBounds(a),u=this.duration,f=this.min,m=this.max,_=Yk(this.value,f,m),b=c.head,I=(c.tail-c.head)/(m-f),M=I*(_-f),P=c.tail,F=this._getForegroundColorByRange(_),H;o._animationRequestID&&window.cancelAnimationFrame(o._animationRequestID);let Q=q=>{q=q||new Date().getTime();let oe=q-H,he=Math.min(oe/u,1),le=r?(r-f)*I:0,S=b+le+M*he;o._drawShell(b,S,P,F),o._animationRequestID&&oe<u?o._animationRequestID=window.requestAnimationFrame(C=>Q(C)):window.cancelAnimationFrame(o._animationRequestID)};this._animate?(i!==void 0&&r!==void 0&&r!==0&&(M=I*i-I*r),o._animationRequestID=window.requestAnimationFrame(q=>{H=q||new Date().getTime(),Q(H)})):o._drawShell(b,b+M,P,F)}_drawMarkersAndTicks(){if(this.markers){let i=this._getBounds(this.type),o=(i.end-i.start)/(this.max-this.min);for(let a in this.markers){let c=Number(a)-this.min,u=i.start+c*o,f=this.markers[a];this._addMarker(u,f.color,f.label,f.type,f.size,f.font)}}}_update(i,r){this._clear(),this._create(i,r)}};e.\u0275fac=function(r){return new(r||e)(ye(vt),ye(_d))},e.\u0275cmp=ft({type:e,selectors:[["ngx-gauge"]],contentQueries:function(r,o,a){if(r&1&&(Gc(a,H4,5),Gc(a,U4,5),Gc(a,z4,5),Gc(a,$4,5)),r&2){let c;Yn(c=Xn())&&(o._labelChild=c.first),Yn(c=Xn())&&(o._prependChild=c.first),Yn(c=Xn())&&(o._appendChild=c.first),Yn(c=Xn())&&(o._valueDisplayChild=c.first)}},viewQuery:function(r,o){if(r&1&&(ro(T4,7),ro(S4,7),ro(A4,7)),r&2){let a;Yn(a=Xn())&&(o._canvas=a.first),Yn(a=Xn())&&(o._label=a.first),Yn(a=Xn())&&(o._reading=a.first)}},hostAttrs:["role","slider","aria-readonly","true"],hostVars:7,hostBindings:function(r,o){r&2&&(qi("aria-valuemin",o.min)("aria-valuemax",o.max)("aria-valuenow",o.value)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby),br("ngx-gauge-meter",!0))},inputs:{ariaLabel:[st.None,"aria-label","ariaLabel"],ariaLabelledby:[st.None,"aria-labelledby","ariaLabelledby"],size:"size",margin:"margin",min:"min",animate:"animate",max:"max",type:"type",cap:"cap",thick:"thick",label:"label",append:"append",prepend:"prepend",foregroundColor:"foregroundColor",backgroundColor:"backgroundColor",thresholds:"thresholds",markers:"markers",value:"value",duration:"duration"},features:[eo],ngContentSelectors:P4,decls:17,vars:16,consts:[["reading",""],["rLabel",""],["canvas",""],[1,"reading-block"],[1,"reading-affix",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch"],[1,"reading-label",3,"ngSwitch"]],template:function(r,o){r&1&&(qc(M4),Z(0,"div",3,0)(2,"u",4),nt(3,R4,1,0,"ng-content",5)(4,k4,2,1,"ng-container",5),Y(),Xs(5,6),nt(6,N4,1,0,"ng-content",5)(7,O4,3,3,"ng-container",5),Js(),Z(8,"u",4),nt(9,L4,1,0,"ng-content",5)(10,F4,2,1,"ng-container",5),Y()(),Z(11,"div",7,1),nt(13,V4,1,0,"ng-content",5)(14,B4,2,1,"ng-container",5),Y(),be(15,"canvas",null,2)),r&2&&(yt("font-size",(o.size-o.margin*2)*.22+"px"),te(2),et("ngSwitch",o._prependChild!=null),te(),et("ngSwitchCase",!0),te(),et("ngSwitchCase",!1),te(),et("ngSwitch",o._valueDisplayChild!=null),te(),et("ngSwitchCase",!0),te(),et("ngSwitchCase",!1),te(),et("ngSwitch",o._appendChild!=null),te(),et("ngSwitchCase",!0),te(),et("ngSwitchCase",!1),te(),yt("font-size",(o.size-o.margin*2)/13+"px"),et("ngSwitch",o._labelChild!=null),te(2),et("ngSwitchCase",!0),te(),et("ngSwitchCase",!1))},dependencies:[rb,aS,uS],styles:[`.ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}
`],encapsulation:2});let t=e;return t})(),t1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Ed]});let t=e;return t})();var n1=(()=>{let e=class e{constructor(){this.oldPos={lat:0,lng:0},this.distance=0,this.speed=0,this.gaugeType="semi",this.gaugeValue=this.speed,this.gaugeLabel="Speed",this.gaugeAppendText="km/h"}ngOnInit(){setInterval(()=>{},500),navigator.geolocation.watchPosition(i=>{this.speed=i.coords.speed})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,m=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(m/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}moveMap(i){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.distance=this.distance+2,this.oldPos.lat=i[0],this.oldPos.lng=i[1])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ft({type:e,selectors:[["app-when-moving"]],standalone:!0,features:[Tt],decls:7,vars:6,consts:[["type","semi",3,"value","label","append","max"]],template:function(r,o){r&1&&(Z(0,"p"),ue(1,"when-moving works!"),Y(),Z(2,"p"),ue(3),Y(),Z(4,"p"),ue(5),Y(),be(6,"ngx-gauge",0)),r&2&&(te(3),Dt(o.distance),te(2),Dt(o.speed),te(),et("value",o.gaugeValue)("label",o.gaugeLabel)("append",o.gaugeAppendText)("max",250))},dependencies:[t1,e1]});let t=e;return t})();function G4(t,e){if(t&1){let n=An();Z(0,"app-car-found",3),He("hideMap",function(r){bn(n);let o=Be(2);return wn(o.switchVisibile(r))})("addCoins",function(r){bn(n);let o=Be(2);return wn(o.addCoins(r))}),Y()}}function W4(t,e){if(t&1){let n=An();Z(0,"app-my-cars",4),He("hideMap",function(r){bn(n);let o=Be(2);return wn(o.switchVisibile(r))}),Y()}}function Z4(t,e){if(t&1){let n=An();Z(0,"app-profile",4),He("hideMap",function(r){bn(n);let o=Be(2);return wn(o.switchVisibile(r))}),Y()}}function K4(t,e){if(t&1){let n=An();Z(0,"app-friends",4),He("hideMap",function(r){bn(n);let o=Be(2);return wn(o.switchVisibile(r))}),Y()}}function Q4(t,e){if(t&1&&(ue(0),be(1,"app-when-moving")),t&2){let n=Be(2);Mn(" ",n.speed," ")}}function Y4(t,e){if(t&1){let n=An();Z(0,"div",1)(1,"app-leaflat-map",2),He("hideMap",function(r){bn(n);let o=Be();return wn(o.switchVisibile(r))}),Y(),nt(2,G4,1,0,"app-car-found")(3,W4,1,0,"app-my-cars")(4,Z4,1,0)(5,K4,1,0)(6,Q4,2,1),Y()}if(t&2){let n=Be();te(),yt("display",n.visible?"block":"none"),et("coins",n.coins),te(),jt(2,!n.visible&&n.currentVisible=="carFound"?2:-1),te(),jt(3,!n.visible&&n.currentVisible=="garage"?3:!n.visible&&n.currentVisible=="profile"?4:!n.visible&&n.currentVisible=="friends"?5:!n.visible&&n.currentVisible=="whenMoving"?6:-1)}}function X4(t,e){if(t&1){let n=An();Z(0,"div"),ue(1),be(2,"hr"),Z(3,"button",6),He("click",function(){bn(n);let r=Be(2);return wn(r.auth.signOut())}),ue(4,"Sign Out"),Y()()}if(t&2){let n=e.ngIf;te(),Mn(" ",n.jsonData,`
`)}}function J4(t,e){if(t&1){let n=An();Z(0,"button",6),He("click",function(){bn(n);let r=Be(2);return wn(r.signIn())}),ue(1,"Login"),Y()}}function eH(t,e){if(t&1&&(nt(0,X4,5,1,"div",5),Wc(1,"async"),nt(2,J4,2,0,"ng-template",null,0,UT)),t&2){let n=lm(3),i=Be();et("ngIf",Zc(1,2,i.auth.user$))("ngIfElse",n)}}var i1=(()=>{let e=class e{constructor(i){this.auth=i,this.key=localStorage.getItem("key"),this.title="world-clicker",this.cps=0,this.coins=0,this.visible=!0}signIn(){this.auth.googleSignin(),setInterval(()=>{localStorage.getItem("key")&&window.location.reload()},500)}addCoins(i){console.log("coin:",i),this.cps=this.cps+i,localStorage.setItem("cps",this.cps.toString())}ngOnInit(){navigator.geolocation.watchPosition(i=>{let r=i.coords.speed*3.6;console.log("hier",r),this.speed=r,r>25?this.switchVisibile("whenMoving"):this.switchVisibile("exit")}),console.log(this.auth.user$,this.auth.currentUser,this.auth.userData.subscribe(i=>{console.log(i,i.update);var r=new Date().getTime()/1e3;i.update&&(console.log(r,i.update,r-i.update),this.coins=+localStorage.getItem("coins")+ +localStorage.getItem("cps")*(r-i.update)/2,console.log(this.coins))})),localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins"))),setInterval(()=>{Math.floor(this.coins=this.coins+this.cps),localStorage.setItem("coins",this.coins.toString())},1e3),this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps")}),setInterval(()=>{var i=new Date().getTime()/1e3;this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps"),update:i})},25e3)}updateUserDat(i){this.auth.addDataToUser(i)}switchVisibile(i){i=="exit"&&(this.visible=!0,this.currentVisible="exit"),i!="exit"&&(this.visible=!1,this.currentVisible=i),console.log(i),console.log(this.visible),console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ye(Ji))},e.\u0275cmp=ft({type:e,selectors:[["app-root"]],standalone:!0,features:[Tt],decls:2,vars:1,consts:[["login",""],[1,"App"],[3,"hideMap","coins"],[3,"hideMap","addCoins"],[3,"hideMap"],[4,"ngIf","ngIfElse"],[1,"button",3,"click"]],template:function(r,o){r&1&&nt(0,Y4,7,5,"div",1)(1,eH,4,4),r&2&&jt(0,o.key?0:1)},dependencies:[$k,qk,Gk,Ed,sS,lS,Zk,Qk,n1],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.App[_ngcontent-%COMP%]{text-align:center}app-leaflet-map[_ngcontent-%COMP%]{height:100%}.push[_ngcontent-%COMP%]{height:calc(100% - 150px)}app-navigation[_ngcontent-%COMP%]{width:100%;height:100px;left:0;z-index:545}"]});let t=e;return t})();yS(i1,sA).catch(t=>console.error(t));
