import{A as wo,B as Jn,C as r_,a as X,b as _t,c as Qk,d as Yk,e as e_,f as U,g as PE,h as cf,i as kE,j as NE,k as OE,l as t_,m as LE,n as Iu,o as n_,p as lf,q as FE,r as VE,s as i_,t as Pt,u as Es,v as rr,w as uf,x as Eu,y as BE,z as jE}from"./chunk-JHDVRTR6.js";var LS=Qk((um,OS)=>{(function(t,e){typeof um=="object"&&typeof OS<"u"?e(um):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.leaflet={}))})(um,function(t){"use strict";var e="1.9.4";function n(s){var l,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(l in _)s[l]=_[l]}return s}var i=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function r(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,l,h){var p,_,b,x;return x=function(){p=!1,_&&(b.apply(h,_),_=!1)},b=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(x,l),p=!0)},b}function u(s,l,h){var p=l[1],_=l[0],b=p-_;return s===p&&h?s:((s-_)%b+b)%b+_}function f(){return!1}function m(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function w(s){return v(s).split(/\s+/)}function E(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function M(s,l,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function F(s,l){return s.replace(k,function(h,p){var _=l[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(l)),_})}var q=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function ie(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ae(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var pe=0;function ue(s){var l=+new Date,h=Math.max(0,16-(l-pe));return pe=l+h,window.setTimeout(s,h)}var S=window.requestAnimationFrame||ae("RequestAnimationFrame")||ue,C=window.cancelAnimationFrame||ae("CancelAnimationFrame")||ae("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,l,h){if(h&&S===ue)s.call(l);else return S.call(window,r(s,l))}function A(s){s&&C.call(window,s)}var R={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:a,throttle:c,wrapNum:u,falseFn:f,formatNum:m,trim:v,splitWords:w,setOptions:E,getParamString:M,template:F,isArray:q,indexOf:ie,emptyImageUrl:Z,requestFn:S,cancelFn:C,requestAnimFrame:D,cancelAnimFrame:A};function N(){}N.extend=function(s){var l=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=i(h);p.constructor=l,l.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return s.statics&&n(l,s.statics),s.includes&&(T(s.includes),n.apply(null,[p].concat(s.includes))),n(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},n(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,x=p._initHooks.length;b<x;b++)p._initHooks[b].call(this)}},l},N.include=function(s){var l=this.prototype.options;return n(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return n(this.prototype.options,s),this},N.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function T(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=q(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var At={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=w(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=w(s);for(var _=arguments.length===1,b=0,x=s.length;b<x;b++)_?this._off(s[b]):this._off(s[b],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var _={fn:l,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,l,h){var p,_,b;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,b=p.length;_<b;_++)p[_].fn=f;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var x=this._listens(s,l,h);if(x!==!1){var O=p[x];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(x,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=n({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var b=0,x=_.length;b<x;b++){var O=_[b],j=O.fn;O.once&&this.off(s,j,O.ctx),j.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(p=!!l,_=void 0,h=void 0);var b=this._events&&this._events[s];if(b&&b.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var x in this._eventParents)if(this._eventParents[x].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var _=0,b=p.length;_<b;_++)if(p[_].fn===l&&p[_].ctx===h)return _;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=w(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,n({layer:s.target,propagatedFrom:s.target},s),!0)}};At.addEventListener=At.on,At.removeEventListener=At.clearAllEventListeners=At.off,At.addOneTimeEventListener=At.once,At.fireEvent=At.fire,At.hasEventListeners=At.listens;var Ti=N.extend(At);function De(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var so=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};De.prototype={clone:function(){return new De(this.x,this.y)},add:function(s){return this.clone()._add(ye(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ye(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new De(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new De(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=so(this.x),this.y=so(this.y),this},distanceTo:function(s){s=ye(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=ye(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ye(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function ye(s,l,h){return s instanceof De?s:q(s)?new De(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new De(s.x,s.y):new De(s,l,h)}function lt(s,l){if(s)for(var h=l?[s,l]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}lt.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof De||typeof s[0]=="number"||"x"in s)l=h=ye(s);else if(s=fn(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return ye((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ye(this.min.x,this.max.y)},getTopRight:function(){return ye(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof De?s=ye(s):s=fn(s),s instanceof lt?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=fn(s);var l=this.min,h=this.max,p=s.min,_=s.max,b=_.x>=l.x&&p.x<=h.x,x=_.y>=l.y&&p.y<=h.y;return b&&x},overlaps:function(s){s=fn(s);var l=this.min,h=this.max,p=s.min,_=s.max,b=_.x>l.x&&p.x<h.x,x=_.y>l.y&&p.y<h.y;return b&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,_=Math.abs(l.y-h.y)*s;return fn(ye(l.x-p,l.y-_),ye(h.x+p,h.y+_))},equals:function(s){return s?(s=fn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function fn(s,l){return!s||s instanceof lt?s:new lt(s,l)}function bn(s,l){if(s)for(var h=l?[s,l]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}bn.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,_;if(s instanceof Ee)p=s,_=s;else if(s instanceof bn){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend($e(s)||tt(s)):this;return!l&&!h?(this._southWest=new Ee(p.lat,p.lng),this._northEast=new Ee(_.lat,_.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,_=Math.abs(l.lng-h.lng)*s;return new bn(new Ee(l.lat-p,l.lng-_),new Ee(h.lat+p,h.lng+_))},getCenter:function(){return new Ee((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ee(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ee(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ee||"lat"in s?s=$e(s):s=tt(s);var l=this._southWest,h=this._northEast,p,_;return s instanceof bn?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=l.lat&&_.lat<=h.lat&&p.lng>=l.lng&&_.lng<=h.lng},intersects:function(s){s=tt(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>=l.lat&&p.lat<=h.lat,x=_.lng>=l.lng&&p.lng<=h.lng;return b&&x},overlaps:function(s){s=tt(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>l.lat&&p.lat<h.lat,x=_.lng>l.lng&&p.lng<h.lng;return b&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=tt(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function tt(s,l){return s instanceof bn?s:new bn(s,l)}function Ee(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}Ee.prototype={equals:function(s,l){if(!s)return!1;s=$e(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return Zi.distance(this,$e(s))},wrap:function(){return Zi.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return tt([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Ee(this.lat,this.lng,this.alt)}};function $e(s,l,h){return s instanceof Ee?s:q(s)&&typeof s[0]!="object"?s.length===3?new Ee(s[0],s[1],s[2]):s.length===2?new Ee(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ee(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ee(s,l,h)}var Tn={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),_=this.transformation.transform(l.max,h);return new lt(p,_)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ee(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,_=l.lng-h.lng;if(p===0&&_===0)return s;var b=s.getSouthWest(),x=s.getNorthEast(),O=new Ee(b.lat-p,b.lng-_),j=new Ee(x.lat-p,x.lng-_);return new bn(O,j)}},Zi=n({},Tn,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,_=l.lat*h,b=Math.sin((l.lat-s.lat)*h/2),x=Math.sin((l.lng-s.lng)*h/2),O=b*b+Math.cos(p)*Math.cos(_)*x*x,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),ao=6378137,Ul={R:ao,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*l);return new De(this.R*s.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var l=180/Math.PI;return new Ee((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=ao*Math.PI;return new lt([-s,-s],[s,s])}()};function $l(s,l,h,p){if(q(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}$l.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new De((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Ki(s,l,h,p){return new $l(s,l,h,p)}var co=n({},Zi,{code:"EPSG:3857",projection:Ul,transformation:function(){var s=.5/(Math.PI*Ul.R);return Ki(s,.5,-s,.5)}()}),Hl=n({},co,{code:"EPSG:900913"});function Sa(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Aa(s,l){var h="",p,_,b,x,O,j;for(p=0,b=s.length;p<b;p++){for(O=s[p],_=0,x=O.length;_<x;_++)j=O[_],h+=(_?"L":"M")+j.x+" "+j.y;h+=l?ce.svg?"z":"x":""}return h||"M0 0"}var os=document.documentElement.style,ss="ActiveXObject"in window,Ch=ss&&!document.addEventListener,Dh="msLaunchUri"in navigator&&!("documentMode"in document),Ma=Wn("webkit"),ql=Wn("android"),Ra=Wn("android 2")||Wn("android 3"),xh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),qg=ql&&Wn("Google")&&xh<537&&!("AudioNode"in window),as=!!window.opera,Pa=!Dh&&Wn("chrome"),ka=Wn("gecko")&&!Ma&&!as&&!ss,on=!Pa&&Wn("safari"),sn=Wn("phantom"),cs="OTransition"in os,Th=navigator.platform.indexOf("Win")===0,Gl=ss&&"transition"in os,Wl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ra,lo="MozPerspective"in os,Sh=!window.L_DISABLE_3D&&(Gl||Wl||lo)&&!cs&&!sn,uo=typeof orientation<"u"||Wn("mobile"),Zl=uo&&Ma,Gg=uo&&Wl,Ah=!window.PointerEvent&&window.MSPointerEvent,Na=!!(window.PointerEvent||Ah),Kl="ontouchstart"in window||!!window.TouchEvent,Mh=!window.L_NO_TOUCH&&(Kl||Na),ls=uo&&as,Ql=uo&&ka,Yl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Sr=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,l),window.removeEventListener("testPassiveEventSupport",f,l)}catch{}return s}(),Rh=function(){return!!document.createElement("canvas").getContext}(),ho=!!(document.createElementNS&&Sa("svg").createSVGRect),Ph=!!ho&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),us=!ho&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),kh=navigator.platform.indexOf("Mac")===0,pn=navigator.platform.indexOf("Linux")===0;function Wn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ce={ie:ss,ielt9:Ch,edge:Dh,webkit:Ma,android:ql,android23:Ra,androidStock:qg,opera:as,chrome:Pa,gecko:ka,safari:on,phantom:sn,opera12:cs,win:Th,ie3d:Gl,webkit3d:Wl,gecko3d:lo,any3d:Sh,mobile:uo,mobileWebkit:Zl,mobileWebkit3d:Gg,msPointer:Ah,pointer:Na,touch:Mh,touchNative:Kl,mobileOpera:ls,mobileGecko:Ql,retina:Yl,passiveEvents:Sr,canvas:Rh,svg:ho,vml:us,inlineSvg:Ph,mac:kh,linux:pn},fo=ce.msPointer?"MSPointerDown":"pointerdown",Nh=ce.msPointer?"MSPointerMove":"pointermove",Oh=ce.msPointer?"MSPointerUp":"pointerup",Ar=ce.msPointer?"MSPointerCancel":"pointercancel",Xl={touchstart:fo,touchmove:Nh,touchend:Oh,touchcancel:Ar},Lh={touchstart:Vh,touchmove:po,touchend:po,touchcancel:po},Si={},Jl=!1;function eu(s,l,h){return l==="touchstart"&&nu(),Lh[l]?(h=Lh[l].bind(this,h),s.addEventListener(Xl[l],h,!1),h):(console.warn("wrong event specified:",l),f)}function Oa(s,l,h){if(!Xl[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Xl[l],h,!1)}function Qi(s){Si[s.pointerId]=s}function Fh(s){Si[s.pointerId]&&(Si[s.pointerId]=s)}function tu(s){delete Si[s.pointerId]}function nu(){Jl||(document.addEventListener(fo,Qi,!0),document.addEventListener(Nh,Fh,!0),document.addEventListener(Oh,tu,!0),document.addEventListener(Ar,tu,!0),Jl=!0)}function po(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in Si)l.touches.push(Si[h]);l.changedTouches=[l],s(l)}}function Vh(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Rt(l),po(s,l)}function Bh(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Wg=200;function La(s,l){s.addEventListener("dblclick",l);var h=0,p;function _(b){if(b.detail!==1){p=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var x=du(b);if(!(x.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!x.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-h<=Wg?(p++,p===2&&l(Bh(b))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:l,simDblclick:_}}function jh(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var ds=ai(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ai=ai(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Yi=Ai==="webkitTransition"||Ai==="OTransition"?Ai+"End":"transitionend";function Fa(s){return typeof s=="string"?document.getElementById(s):s}function hs(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function Ge(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function mt(s){var l=s.parentNode;l&&l.removeChild(s)}function fs(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Xi(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Ji(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function Va(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=ps(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Se(s,l){if(s.classList!==void 0)for(var h=w(l),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!Va(s,l)){var b=ps(s);iu(s,(b?b+" ":"")+l)}}function Mt(s,l){s.classList!==void 0?s.classList.remove(l):iu(s,v((" "+ps(s)+" ").replace(" "+l+" "," ")))}function iu(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ps(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Sn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Zg(s,l)}function Zg(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function ai(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function mn(s,l,h){var p=l||new De(0,0);s.style[ds]=(ce.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function wt(s,l){s._leaflet_pos=l,ce.any3d?mn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function ci(s){return s._leaflet_pos||new De(0,0)}var mo,Xe,go;if("onselectstart"in document)mo=function(){Ce(window,"selectstart",Rt)},Xe=function(){nt(window,"selectstart",Rt)};else{var Mi=ai(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);mo=function(){if(Mi){var s=document.documentElement.style;go=s[Mi],s[Mi]="none"}},Xe=function(){Mi&&(document.documentElement.style[Mi]=go,go=void 0)}}function Mr(){Ce(window,"dragstart",Rt)}function ru(){nt(window,"dragstart",Rt)}var ms,ou;function su(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Ba(),ms=s,ou=s.style.outlineStyle,s.style.outlineStyle="none",Ce(window,"keydown",Ba))}function Ba(){ms&&(ms.style.outlineStyle=ou,ms=void 0,ou=void 0,nt(window,"keydown",Ba))}function zh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Rr(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var er={__proto__:null,TRANSFORM:ds,TRANSITION:Ai,TRANSITION_END:Yi,get:Fa,getStyle:hs,create:Ge,remove:mt,empty:fs,toFront:Xi,toBack:Ji,hasClass:Va,addClass:Se,removeClass:Mt,setClass:iu,getClass:ps,setOpacity:Sn,testProp:ai,setTransform:mn,setPosition:wt,getPosition:ci,get disableTextSelection(){return mo},get enableTextSelection(){return Xe},disableImageDrag:Mr,enableImageDrag:ru,preventOutline:su,restoreOutline:Ba,getSizedParentNode:zh,getScale:Rr};function Ce(s,l,h,p){if(l&&typeof l=="object")for(var _ in l)cu(s,_,l[_],h);else{l=w(l);for(var b=0,x=l.length;b<x;b++)cu(s,l[b],h,p)}return this}var Zn="_leaflet_events";function nt(s,l,h,p){if(arguments.length===1)Pr(s),delete s[Zn];else if(l&&typeof l=="object")for(var _ in l)lu(s,_,l[_],h);else if(l=w(l),arguments.length===2)Pr(s,function(O){return ie(l,O)!==-1});else for(var b=0,x=l.length;b<x;b++)lu(s,l[b],h,p);return this}function Pr(s,l){for(var h in s[Zn]){var p=h.split(/\d/)[0];(!l||l(p))&&lu(s,p,null,null,h)}}var au={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cu(s,l,h,p){var _=l+a(h)+(p?"_"+a(p):"");if(s[Zn]&&s[Zn][_])return this;var b=function(O){return h.call(p||s,O||window.event)},x=b;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?b=eu(s,l,b):ce.touch&&l==="dblclick"?b=La(s,b):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(au[l]||l,b,ce.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(b=function(O){O=O||window.event,vs(s,O)&&x(O)},s.addEventListener(au[l],b,!1)):s.addEventListener(l,x,!1):s.attachEvent("on"+l,b),s[Zn]=s[Zn]||{},s[Zn][_]=b}function lu(s,l,h,p,_){_=_||l+a(h)+(p?"_"+a(p):"");var b=s[Zn]&&s[Zn][_];if(!b)return this;!ce.touchNative&&ce.pointer&&l.indexOf("touch")===0?Oa(s,l,b):ce.touch&&l==="dblclick"?jh(s,b):"removeEventListener"in s?s.removeEventListener(au[l]||l,b,!1):s.detachEvent("on"+l,b),s[Zn][_]=null}function wn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function uu(s){return cu(s,"wheel",wn),this}function gs(s){return Ce(s,"mousedown touchstart dblclick contextmenu",wn),s._leaflet_disable_click=!0,this}function Rt(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function li(s){return Rt(s),wn(s),this}function du(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function _o(s,l){if(!l)return new De(s.clientX,s.clientY);var h=Rr(l),p=h.boundingClientRect;return new De((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var _s=ce.linux&&ce.chrome?window.devicePixelRatio:ce.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function hu(s){return ce.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/_s:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function vs(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Dt={__proto__:null,on:Ce,off:nt,stopPropagation:wn,disableScrollPropagation:uu,disableClickPropagation:gs,preventDefault:Rt,stop:li,getPropagationPath:du,getMousePosition:_o,getWheelDelta:hu,isExternalTarget:vs,addListener:Ce,removeListener:nt},Uh=Ti.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=ci(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),wt(this._el,h),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),He=Ti.extend({options:{crs:co,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=E(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView($e(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ai&&ce.any3d&&!ce.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,Yi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter($e(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=n({animate:h.animate},h.zoom),h.pan=n({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ce.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),_=this.getSize().divideBy(2),b=s instanceof De?s:this.latLngToContainerPoint(s),x=b.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(x));return this.setView(O,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():tt(s);var h=ye(l.paddingTopLeft||l.padding||[0,0]),p=ye(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var b=p.subtract(h).divideBy(2),x=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),j=this.unproject(x.add(O).divideBy(2).add(b),_);return{center:j,zoom:_}},fitBounds:function(s,l){if(s=tt(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=ye(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Uh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Se(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!ce.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),b=this.getSize(),x=this._zoom;s=$e(s),l=l===void 0?x:l;var O=Math.max(b.x,b.y),j=O*this.getZoomScale(x,l),G=_.distanceTo(p)||1,re=1.42,be=re*re;function Ve(qt){var af=qt?-1:1,Gk=qt?j:O,Wk=j*j-O*O+af*be*be*G*G,Zk=2*Gk*be*G,Jg=Wk/Zk,RE=Math.sqrt(Jg*Jg+1)-Jg,Kk=RE<1e-9?-18:Math.log(RE);return Kk}function Mn(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function cn(qt){return(Math.exp(qt)+Math.exp(-qt))/2}function ui(qt){return Mn(qt)/cn(qt)}var jn=Ve(0);function Ya(qt){return O*(cn(jn)/cn(jn+re*qt))}function Uk(qt){return O*(cn(jn)*ui(jn+re*qt)-Mn(jn))/be}function $k(qt){return 1-Math.pow(1-qt,1.5)}var Hk=Date.now(),AE=(Ve(1)-jn)/re,qk=h.duration?1e3*h.duration:1e3*AE*.8;function ME(){var qt=(Date.now()-Hk)/qk,af=$k(qt)*AE;qt<=1?(this._flyToFrame=D(ME,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(Uk(af)/G)),x),this.getScaleZoom(O/Ya(af),x),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),ME.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=tt(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,tt(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=ye(l.paddingTopLeft||l.padding||[0,0]),p=ye(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),b=this.project(s),x=this.getPixelBounds(),O=fn([x.min.add(h),x.max.subtract(p)]),j=O.getSize();if(!O.contains(b)){this._enforcingBounds=!0;var G=b.subtract(O.getCenter()),re=O.extend(b).getSize().subtract(j);_.x+=G.x<0?-re.x:re.x,_.y+=G.y<0?-re.y:re.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=n({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),_=h.divideBy(2).round(),b=p.subtract(_);return!b.x&&!b.y?this:(s.animate&&s.pan?this.panBy(b):(s.pan&&this._rawPanBy(b),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=n({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new Ee(l,h),_=p.toBounds(s.coords.accuracy*2),b=this._locateOptions;if(b.setView){var x=this.getBoundsZoom(_);this.setView(p,b.maxZoom?Math.min(x,b.maxZoom):x)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var j in s.coords)typeof s.coords[j]=="number"&&(O[j]=s.coords[j]);this.fire("locationfound",O)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)mt(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ge("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new bn(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=tt(s),h=ye(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),b=this.getMaxZoom(),x=s.getNorthWest(),O=s.getSouthEast(),j=this.getSize().subtract(h),G=fn(this.project(O,p),this.project(x,p)).getSize(),re=ce.any3d?this.options.zoomSnap:1,be=j.x/G.x,Ve=j.y/G.y,Mn=l?Math.max(be,Ve):Math.min(be,Ve);return p=this.getScaleZoom(Mn,p),re&&(p=Math.round(p/(re/100))*(re/100),p=l?Math.ceil(p/re)*re:Math.floor(p/re)*re),Math.max(_,Math.min(b,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new De(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new lt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint($e(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ye(s),l)},layerPointToLatLng:function(s){var l=ye(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project($e(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng($e(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(tt(s))},distance:function(s,l){return this.options.crs.distance($e(s),$e(l))},containerPointToLayerPoint:function(s){return ye(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ye(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(ye(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint($e(s)))},mouseEventToContainerPoint:function(s){return _o(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Fa(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ce(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ce.any3d,Se(s,"leaflet-container"+(ce.touch?" leaflet-touch":"")+(ce.retina?" leaflet-retina":"")+(ce.ielt9?" leaflet-oldie":"")+(ce.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=hs(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),wt(this._mapPane,new De(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Se(s.markerPane,"leaflet-zoom-hide"),Se(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){wt(this._mapPane,new De(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,h)._move(s,l)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){wt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var l=s?nt:Ce;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ce.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,_=l==="mouseout"||l==="mouseover",b=s.target||s.srcElement,x=!1;b;){if(p=this._targets[a(b)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){x=!0;break}if(p&&p.listens(l,!0)&&(_&&!vs(b,s)||(h.push(p),_))||b===this._container)break;b=b.parentNode}return!h.length&&!x&&!_&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&su(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=n({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,l);if(h){for(var b=[],x=0;x<h.length;x++)h[x].listens(l,!0)&&b.push(h[x]);_=b.concat(_)}if(_.length){l==="contextmenu"&&Rt(s);var O=_[0],j={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var G=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=G?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=G?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(x=0;x<_.length;x++)if(_[x].fire(l,j,!0),j.originalEvent._stopped||_[x].options.bubblingMouseEvents===!1&&ie(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return ci(this._mapPane)||new De(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return fn([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),_=this.getSize().divideBy(2),b=new lt(p.subtract(_),p.add(_)),x=this._getBoundsOffset(b,h,l);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?s:this.unproject(p.add(x),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new lt(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=fn(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),_=p.min.subtract(s.min),b=p.max.subtract(s.max),x=this._rebound(_.x,-b.x),O=this._rebound(_.y,-b.y);return new De(x,O)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=ce.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Mt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ge("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=ds,p=this._proxy.style[h];mn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();mn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Mt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $h(s,l){return new He(s,l)}var Bn=N.extend({options:{position:"topright"},initialize:function(s){E(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Se(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),vo=function(s){return new Bn(s)};He.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=Ge("div",l+"control-container",this._container);function p(_,b){var x=l+_+" "+l+b;s[_+b]=Ge("div",x,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)mt(this._controlCorners[s]);mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ys=Bn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){E(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Bn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Mt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Mt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ge("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),gs(l),uu(l);var p=this._section=Ge("section",s+"-list");h&&(this._map.on("click",this.collapse,this),Ce(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=Ge("a",s+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),Ce(_,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){Rt(b),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=Ge("div",s+"-base",p),this._separator=Ge("div",s+"-separator",p),this._overlaysList=Ge("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fs(this._baseLayersList),fs(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(a(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),Ce(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var b=document.createElement("span");l.appendChild(b),b.appendChild(p),b.appendChild(_);var x=s.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],_=[];this._handlingClick=!0;for(var b=s.length-1;b>=0;b--)l=s[b],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||_.push(h);for(b=0;b<_.length;b++)this._map.hasLayer(_[b])&&this._map.removeLayer(_[b]);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])||this._map.addLayer(p[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)l=s[_],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ce(s,"click",Rt),this.expand();var l=this;setTimeout(function(){nt(s,"click",Rt),l._preventClick=!1})}}),Hh=function(s,l,h){return new ys(s,l,h)},Kn=Bn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=Ge("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,_){var b=Ge("a",h,p);return b.innerHTML=s,b.href="#",b.title=l,b.setAttribute("role","button"),b.setAttribute("aria-label",l),gs(b),Ce(b,"click",li),Ce(b,"click",_,this),Ce(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Mt(this._zoomInButton,l),Mt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Se(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Se(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});He.mergeOptions({zoomControl:!0}),He.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kn,this.addControl(this.zoomControl))});var qh=function(s){return new Kn(s)},Gh=Bn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=Ge("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=Ge("div",l,h)),s.imperial&&(this._iScale=Ge("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,_;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),bs=function(s){return new Gh(s)},Wh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ws=Bn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ce.inlineSvg?Wh+" ":"")+"Leaflet</a>"},initialize:function(s){E(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ge("div","leaflet-control-attribution"),gs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});He.mergeOptions({attributionControl:!0}),He.addInitHook(function(){this.options.attributionControl&&new ws().addTo(this)});var ja=function(s){return new ws(s)};Bn.Layers=ys,Bn.Zoom=Kn,Bn.Scale=Gh,Bn.Attribution=ws,vo.layers=Hh,vo.zoom=qh,vo.scale=bs,vo.attribution=ja;var Qn=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qn.addTo=function(s,l){return s.addHandler(l,this),this};var za={Events:At},Zh=ce.touch?"touchstart mousedown":"mousedown",Ri=Ti.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){E(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(Ce(this._dragStartTarget,Zh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ri._dragging===this&&this.finishDrag(!0),nt(this._dragStartTarget,Zh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!Va(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ri._dragging===this&&this.finishDrag();return}if(!(Ri._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ri._dragging=this,this._preventOutline&&su(this._element),Mr(),mo(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=zh(this._element);this._startPoint=new De(l.clientX,l.clientY),this._startPos=ci(this._element),this._parentScale=Rr(h);var p=s.type==="mousedown";Ce(document,p?"mousemove":"touchmove",this._onMove,this),Ce(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new De(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Rt(s),this._moved||(this.fire("dragstart"),this._moved=!0,Se(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),wt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Mt(document.body,"leaflet-dragging"),this._lastTarget&&(Mt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),nt(document,"mousemove touchmove",this._onMove,this),nt(document,"mouseup touchend touchcancel",this._onUp,this),ru(),Xe();var l=this._moved&&this._moving;this._moving=!1,Ri._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function yo(s,l,h){var p,_=[1,4,2,8],b,x,O,j,G,re,be,Ve;for(b=0,re=s.length;b<re;b++)s[b]._code=tr(s[b],l);for(O=0;O<4;O++){for(be=_[O],p=[],b=0,re=s.length,x=re-1;b<re;x=b++)j=s[b],G=s[x],j._code&be?G._code&be||(Ve=Is(G,j,be,l,h),Ve._code=tr(Ve,l),p.push(Ve)):(G._code&be&&(Ve=Is(G,j,be,l,h),Ve._code=tr(Ve,l),p.push(Ve)),p.push(j));s=p}return s}function fu(s,l){var h,p,_,b,x,O,j,G,re;if(!s||s.length===0)throw new Error("latlngs not passed");An(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var be=$e([0,0]),Ve=tt(s),Mn=Ve.getNorthWest().distanceTo(Ve.getSouthWest())*Ve.getNorthEast().distanceTo(Ve.getNorthWest());Mn<1700&&(be=Ua(s));var cn=s.length,ui=[];for(h=0;h<cn;h++){var jn=$e(s[h]);ui.push(l.project($e([jn.lat-be.lat,jn.lng-be.lng])))}for(O=j=G=0,h=0,p=cn-1;h<cn;p=h++)_=ui[h],b=ui[p],x=_.y*b.x-b.y*_.x,j+=(_.x+b.x)*x,G+=(_.y+b.y)*x,O+=x*3;O===0?re=ui[0]:re=[j/O,G/O];var Ya=l.unproject(ye(re));return $e([Ya.lat+be.lat,Ya.lng+be.lng])}function Ua(s){for(var l=0,h=0,p=0,_=0;_<s.length;_++){var b=$e(s[_]);l+=b.lat,h+=b.lng,p++}return $e([l/p,h/p])}var pu={__proto__:null,clipPolygon:yo,polygonCenter:fu,centroid:Ua};function $a(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=kr(s,h),s=Kh(s,h),s}function mu(s,l,h){return Math.sqrt(en(s,l,h,!0))}function Ha(s,l,h){return en(s,l,h)}function Kh(s,l){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,qa(s,_,l,0,h-1);var b,x=[];for(b=0;b<h;b++)_[b]&&x.push(s[b]);return x}function qa(s,l,h,p,_){var b=0,x,O,j;for(O=p+1;O<=_-1;O++)j=en(s[O],s[p],s[_],!0),j>b&&(x=O,b=j);b>h&&(l[x]=1,qa(s,l,h,p,x),qa(s,l,h,x,_))}function kr(s,l){for(var h=[s[0]],p=1,_=0,b=s.length;p<b;p++)Ga(s[p],s[_])>l&&(h.push(s[p]),_=p);return _<b-1&&h.push(s[b-1]),h}var gu;function _u(s,l,h,p,_){var b=p?gu:tr(s,h),x=tr(l,h),O,j,G;for(gu=x;;){if(!(b|x))return[s,l];if(b&x)return!1;O=b||x,j=Is(s,l,O,h,_),G=tr(j,h),O===b?(s=j,b=G):(l=j,x=G)}}function Is(s,l,h,p,_){var b=l.x-s.x,x=l.y-s.y,O=p.min,j=p.max,G,re;return h&8?(G=s.x+b*(j.y-s.y)/x,re=j.y):h&4?(G=s.x+b*(O.y-s.y)/x,re=O.y):h&2?(G=j.x,re=s.y+x*(j.x-s.x)/b):h&1&&(G=O.x,re=s.y+x*(O.x-s.x)/b),new De(G,re,_)}function tr(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function Ga(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function en(s,l,h,p){var _=l.x,b=l.y,x=h.x-_,O=h.y-b,j=x*x+O*O,G;return j>0&&(G=((s.x-_)*x+(s.y-b)*O)/j,G>1?(_=h.x,b=h.y):G>0&&(_+=x*G,b+=O*G)),x=s.x-_,O=s.y-b,p?x*x+O*O:new De(_,b)}function An(s){return!q(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function vu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),An(s)}function Nr(s,l){var h,p,_,b,x,O,j,G;if(!s||s.length===0)throw new Error("latlngs not passed");An(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var re=$e([0,0]),be=tt(s),Ve=be.getNorthWest().distanceTo(be.getSouthWest())*be.getNorthEast().distanceTo(be.getNorthWest());Ve<1700&&(re=Ua(s));var Mn=s.length,cn=[];for(h=0;h<Mn;h++){var ui=$e(s[h]);cn.push(l.project($e([ui.lat-re.lat,ui.lng-re.lng])))}for(h=0,p=0;h<Mn-1;h++)p+=cn[h].distanceTo(cn[h+1])/2;if(p===0)G=cn[0];else for(h=0,b=0;h<Mn-1;h++)if(x=cn[h],O=cn[h+1],_=x.distanceTo(O),b+=_,b>p){j=(b-p)/_,G=[O.x-j*(O.x-x.x),O.y-j*(O.y-x.y)];break}var jn=l.unproject(ye(G));return $e([jn.lat+re.lat,jn.lng+re.lng])}var d={__proto__:null,simplify:$a,pointToSegmentDistance:mu,closestPointOnSegment:Ha,clipSegment:_u,_getEdgeIntersection:Is,_getBitCode:tr,_sqClosestPointOnSegment:en,isFlat:An,_flat:vu,polylineCenter:Nr},g={project:function(s){return new De(s.lng,s.lat)},unproject:function(s){return new Ee(s.y,s.x)},bounds:new lt([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new lt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,_=this.R_MINOR/h,b=Math.sqrt(1-_*_),x=b*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-x)/(1+x),b/2);return p=-h*Math.log(Math.max(O,1e-10)),new De(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),b=Math.exp(-s.y/h),x=Math.PI/2-2*Math.atan(b),O=0,j=.1,G;O<15&&Math.abs(j)>1e-7;O++)G=_*Math.sin(x),G=Math.pow((1-G)/(1+G),_/2),j=Math.PI/2-2*Math.atan(b*G)-x,x+=j;return new Ee(x*l,s.x*l/h)}},I={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:Ul},P=n({},Zi,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return Ki(s,.5,-s,.5)}()}),z=n({},Zi,{code:"EPSG:4326",projection:g,transformation:Ki(1/180,1,-1/180,.5)}),Q=n({},Tn,{projection:g,transformation:Ki(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});Tn.Earth=Zi,Tn.EPSG3395=P,Tn.EPSG3857=co,Tn.EPSG900913=Hl,Tn.EPSG4326=z,Tn.Simple=Q;var Le=Ti.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});He.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=a(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?q(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=a(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var xt=Le.extend({initialize:function(s,l){E(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),We=function(s,l){return new xt(s,l)},gt=xt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),xt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),xt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new bn;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),an=function(s,l){return new gt(s,l)},Yn=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){E(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var _=ye(p),b=ye(l==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),b&&(s.style.marginLeft=-b.x+"px",s.style.marginTop=-b.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ce.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Xn(s){return new Yn(s)}var nr=Yn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof nr.imagePath!="string"&&(nr.imagePath=this._detectIconPath()),(this.options.imagePath||nr.imagePath)+Yn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,_){var b=p.exec(h);return b&&b[_]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ge("div","leaflet-default-icon-path",document.body),l=hs(s,"background-image")||hs(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Wa=Qn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ri(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Se(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Mt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,b=ci(l._icon),x=h.getPixelBounds(),O=h.getPixelOrigin(),j=fn(x.min._subtract(O).add(_),x.max._subtract(O).subtract(_));if(!j.contains(b)){var G=ye((Math.max(j.max.x,b.x)-j.max.x)/(x.max.x-j.max.x)-(Math.min(j.min.x,b.x)-j.min.x)/(x.min.x-j.min.x),(Math.max(j.max.y,b.y)-j.max.y)/(x.max.y-j.max.y)-(Math.min(j.min.y,b.y)-j.min.y)/(x.min.y-j.min.y)).multiplyBy(p);h.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),wt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=ci(l._icon),_=l._map.layerPointToLatLng(p);h&&wt(h,p),l._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Qh=Le.extend({options:{icon:new nr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){E(this,l),this._latlng=$e(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=$e(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Se(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ce(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),b=!1;_!==this._shadow&&(this._removeShadow(),b=!0),_&&(Se(_,l),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&b&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&nt(this._icon,"focus",this._panOnFocus,this),mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&mt(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&wt(this._icon,s),this._shadow&&wt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Wa)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Wa(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Sn(this._icon,s),this._shadow&&Sn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?ye(l.iconSize):ye(0,0),p=l.iconAnchor?ye(l.iconAnchor):ye(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ck(s,l){return new Qh(s,l)}var bo=Le.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return E(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Yh=bo.extend({options:{fill:!0,radius:10},initialize:function(s,l){E(this,l),this._latlng=$e(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=$e(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return bo.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new lt(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Dk(s,l){return new Yh(s,l)}var Kg=Yh.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=n({},h,{radius:l})),E(this,l),this._latlng=$e(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new bn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:bo.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Zi.distance){var _=Math.PI/180,b=this._mRadius/Zi.R/_,x=h.project([l+b,s]),O=h.project([l-b,s]),j=x.add(O).divideBy(2),G=h.unproject(j).lat,re=Math.acos((Math.cos(b*_)-Math.sin(l*_)*Math.sin(G*_))/(Math.cos(l*_)*Math.cos(G*_)))/_;(isNaN(re)||re===0)&&(re=b/Math.cos(Math.PI/180*l)),this._point=j.subtract(h.getPixelOrigin()),this._radius=isNaN(re)?0:j.x-h.project([G,s-re]).x,this._radiusY=j.y-x.y}else{var be=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(be).x}this._updateBounds()}});function xk(s,l,h){return new Kg(s,l,h)}var Or=bo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){E(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=en,_,b,x=0,O=this._parts.length;x<O;x++)for(var j=this._parts[x],G=1,re=j.length;G<re;G++){_=j[G-1],b=j[G];var be=p(s,_,b,!0);be<l&&(l=be,h=p(s,_,b))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Nr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=$e(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new bn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return An(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=An(s),p=0,_=s.length;p<_;p++)h?(l[p]=$e(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new lt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new De(s,s);this._rawPxBounds&&(this._pxBounds=new lt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof Ee,_=s.length,b,x;if(p){for(x=[],b=0;b<_;b++)x[b]=this._map.latLngToLayerPoint(s[b]),h.extend(x[b]);l.push(x)}else for(b=0;b<_;b++)this._projectLatlngs(s[b],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,_,b,x,O,j;for(h=0,_=0,b=this._rings.length;h<b;h++)for(j=this._rings[h],p=0,x=j.length;p<x-1;p++)O=_u(j[p],j[p+1],s,p,!0),O&&(l[_]=l[_]||[],l[_].push(O[0]),(O[1]!==j[p+1]||p===x-2)&&(l[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=$a(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,_,b,x,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,b=this._parts.length;h<b;h++)for(O=this._parts[h],p=0,x=O.length,_=x-1;p<x;_=p++)if(!(!l&&p===0)&&mu(s,O[_],O[p])<=j)return!0;return!1}});function Tk(s,l){return new Or(s,l)}Or._flat=vu;var Za=Or.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Or.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof Ee&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){Or.prototype._setLatLngs.call(this,s),An(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return An(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new De(l,l);if(s=new lt(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,b;p<_;p++)b=yo(this._rings[p],s,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,_,b,x,O,j,G;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(b=0,j=this._parts.length;b<j;b++)for(h=this._parts[b],x=0,G=h.length,O=G-1;x<G;O=x++)p=h[x],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(l=!l);return l||Or.prototype._containsPoint.call(this,s,!0)}});function Sk(s,l){return new Za(s,l)}var Lr=gt.extend({initialize:function(s,l){E(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=q(s)?s:s.features,h,p,_;if(l){for(h=0,p=l.length;h<p;h++)_=l[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var b=this.options;if(b.filter&&!b.filter(s))return this;var x=Xh(s,b);return x?(x.feature=tf(s),x.defaultOptions=x.options,this.resetStyle(x),b.onEachFeature&&b.onEachFeature(s,x),this.addLayer(x)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=n({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Xh(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],b=l&&l.pointToLayer,x=l&&l.coordsToLatLng||Qg,O,j,G,re;if(!p&&!h)return null;switch(h.type){case"Point":return O=x(p),dE(b,s,O,l);case"MultiPoint":for(G=0,re=p.length;G<re;G++)O=x(p[G]),_.push(dE(b,s,O,l));return new gt(_);case"LineString":case"MultiLineString":return j=Jh(p,h.type==="LineString"?0:1,x),new Or(j,l);case"Polygon":case"MultiPolygon":return j=Jh(p,h.type==="Polygon"?1:2,x),new Za(j,l);case"GeometryCollection":for(G=0,re=h.geometries.length;G<re;G++){var be=Xh({geometry:h.geometries[G],type:"Feature",properties:s.properties},l);be&&_.push(be)}return new gt(_);case"FeatureCollection":for(G=0,re=h.features.length;G<re;G++){var Ve=Xh(h.features[G],l);Ve&&_.push(Ve)}return new gt(_);default:throw new Error("Invalid GeoJSON object.")}}function dE(s,l,h,p){return s?s(l,h):new Qh(h,p&&p.markersInheritOptions&&p)}function Qg(s){return new Ee(s[1],s[0],s[2])}function Jh(s,l,h){for(var p=[],_=0,b=s.length,x;_<b;_++)x=l?Jh(s[_],l-1,h):(h||Qg)(s[_]),p.push(x);return p}function Yg(s,l){return s=$e(s),s.alt!==void 0?[m(s.lng,l),m(s.lat,l),m(s.alt,l)]:[m(s.lng,l),m(s.lat,l)]}function ef(s,l,h,p){for(var _=[],b=0,x=s.length;b<x;b++)_.push(l?ef(s[b],An(s[b])?0:l-1,h,p):Yg(s[b],p));return!l&&h&&_.length>0&&_.push(_[0].slice()),_}function Ka(s,l){return s.feature?n({},s.feature,{geometry:l}):tf(l)}function tf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Xg={toGeoJSON:function(s){return Ka(this,{type:"Point",coordinates:Yg(this.getLatLng(),s)})}};Qh.include(Xg),Kg.include(Xg),Yh.include(Xg),Or.include({toGeoJSON:function(s){var l=!An(this._latlngs),h=ef(this._latlngs,l?1:0,!1,s);return Ka(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),Za.include({toGeoJSON:function(s){var l=!An(this._latlngs),h=l&&!An(this._latlngs[0]),p=ef(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),Ka(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),xt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),Ka(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var b=_.toGeoJSON(s);if(h)p.push(b.geometry);else{var x=tf(b);x.type==="FeatureCollection"?p.push.apply(p,x.features):p.push(x)}}}),h?Ka(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function hE(s,l){return new Lr(s,l)}var Ak=hE,nf=Le.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=tt(l),E(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Xi(this._image),this},bringToBack:function(){return this._map&&Ji(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=tt(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ge("img");if(Se(l,"leaflet-image-layer"),this._zoomAnimated&&Se(l,"leaflet-zoom-animated"),this.options.className&&Se(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;mn(this._image,h,l)},_reset:function(){var s=this._image,l=new lt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();wt(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Sn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Mk=function(s,l,h){return new nf(s,l,h)},fE=nf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ge("video");if(Se(l,"leaflet-image-layer"),this._zoomAnimated&&Se(l,"leaflet-zoom-animated"),this.options.className&&Se(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onloadeddata=r(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[l.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var x=Ge("source");x.src=this._url[b],l.appendChild(x)}}});function Rk(s,l,h){return new fE(s,l,h)}var pE=nf.extend({_initImage:function(){var s=this._image=this._url;Se(s,"leaflet-image-layer"),this._zoomAnimated&&Se(s,"leaflet-zoom-animated"),this.options.className&&Se(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function Pk(s,l,h){return new pE(s,l,h)}var ir=Le.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ee||q(s))?(this._latlng=$e(s),E(this,l)):(E(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Sn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Sn(this._container,1),this.bringToFront(),this.options.interactive&&(Se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Sn(this._container,0),this._removeTimeout=setTimeout(r(mt,void 0,this._container),200)):mt(this._container),this.options.interactive&&(Mt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=$e(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Xi(this._container),this},bringToBack:function(){return this._map&&Ji(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof gt){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=ye(this.options.offset),h=this._getAnchor();this._zoomAnimated?wt(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});He.include({_initOverlay:function(s,l,h,p){var _=l;return _ instanceof s||(_=new s(p).setContent(l)),h&&_.setLatLng(h),_}}),Le.include({_initOverlay:function(s,l,h,p){var _=h;return _ instanceof s?(E(_,p),_._source=this):(_=l&&!p?l:new s(p,this),_.setContent(h)),_}});var rf=ir.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,ir.prototype.openOn.call(this,s)},onAdd:function(s){ir.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof bo||this._source.on("preclick",wn))},onRemove:function(s){ir.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof bo||this._source.off("preclick",wn))},getEvents:function(){var s=ir.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ge("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=Ge("div",s+"-content-wrapper",l);if(this._contentNode=Ge("div",s+"-content",h),gs(l),uu(this._contentNode),Ce(l,"contextmenu",wn),this._tipContainer=Ge("div",s+"-tip-container",l),this._tip=Ge("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ge("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ce(p,"click",function(_){Rt(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,_=this.options.maxHeight,b="leaflet-popup-scrolled";_&&p>_?(l.height=_+"px",Se(s,b)):Mt(s,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();wt(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(hs(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,_=new De(this._containerLeft,-h-this._containerBottom);_._add(ci(this._container));var b=s.layerPointToContainerPoint(_),x=ye(this.options.autoPanPadding),O=ye(this.options.autoPanPaddingTopLeft||x),j=ye(this.options.autoPanPaddingBottomRight||x),G=s.getSize(),re=0,be=0;b.x+p+j.x>G.x&&(re=b.x+p-G.x+j.x),b.x-re-O.x<0&&(re=b.x-O.x),b.y+h+j.y>G.y&&(be=b.y+h-G.y+j.y),b.y-be-O.y<0&&(be=b.y-O.y),(re||be)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([re,be]))}},_getAnchor:function(){return ye(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kk=function(s,l){return new rf(s,l)};He.mergeOptions({closePopupOnClick:!0}),He.include({openPopup:function(s,l,h){return this._initOverlay(rf,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Le.include({bindPopup:function(s,l){return this._popup=this._initOverlay(rf,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof gt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){li(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof bo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var of=ir.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){ir.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){ir.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=ir.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ge("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,_=this._container,b=p.latLngToContainerPoint(p.getCenter()),x=p.layerPointToContainerPoint(s),O=this.options.direction,j=_.offsetWidth,G=_.offsetHeight,re=ye(this.options.offset),be=this._getAnchor();O==="top"?(l=j/2,h=G):O==="bottom"?(l=j/2,h=0):O==="center"?(l=j/2,h=G/2):O==="right"?(l=0,h=G/2):O==="left"?(l=j,h=G/2):x.x<b.x?(O="right",l=0,h=G/2):(O="left",l=j+(re.x+be.x)*2,h=G/2),s=s.subtract(ye(l,h,!0)).add(re).add(be),Mt(_,"leaflet-tooltip-right"),Mt(_,"leaflet-tooltip-left"),Mt(_,"leaflet-tooltip-top"),Mt(_,"leaflet-tooltip-bottom"),Se(_,"leaflet-tooltip-"+O),wt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Sn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return ye(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Nk=function(s,l){return new of(s,l)};He.include({openTooltip:function(s,l,h){return this._initOverlay(of,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Le.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(of,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof gt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ce(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ce(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var mE=Yn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(fs(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=ye(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Ok(s){return new mE(s)}Yn.Default=nr;var yu=Le.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ce.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){E(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),mt(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Xi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ji(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof De?s:new De(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,_=l.length,b;p<_;p++)b=l[p].style.zIndex,l[p]!==this._container&&b&&(h=s(h,+b));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ce.ielt9){Sn(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var b=Math.min(1,(s-_.loaded)/200);Sn(_.el,b),b<1?l=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(A(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=Ge("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(mt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=Ge("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)mt(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var _=Math.floor(s/2),b=Math.floor(l/2),x=h-1,O=new De(+_,+b);O.z=+x;var j=this._tileCoordsToKey(O),G=this._tiles[j];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),x>p?this._retainParent(_,b,x,p):!1)},_retainChildren:function(s,l,h,p){for(var _=2*s;_<2*s+2;_++)for(var b=2*l;b<2*l+2;b++){var x=new De(_,b);x.z=h+1;var O=this._tileCoordsToKey(x),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);h+1<p&&this._retainChildren(_,b,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var b=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||b)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();ce.any3d?mn(s.el,_,p):wt(s.el,_)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),_=l.project(s,this._tileZoom).floor(),b=l.getSize().divideBy(p*2);return new lt(_.subtract(b),_.add(b))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),b=_.getCenter(),x=[],O=this.options.keepBuffer,j=new lt(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var re=this._tiles[G].coords;(re.z!==this._tileZoom||!j.contains(new De(re.x,re.y)))&&(this._tiles[G].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var be=_.min.y;be<=_.max.y;be++)for(var Ve=_.min.x;Ve<=_.max.x;Ve++){var Mn=new De(Ve,be);if(Mn.z=this._tileZoom,!!this._isValidTile(Mn)){var cn=this._tiles[this._tileCoordsToKey(Mn)];cn?cn.current=!0:x.push(Mn)}}if(x.sort(function(jn,Ya){return jn.distanceTo(b)-Ya.distanceTo(b)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ui=document.createDocumentFragment();for(Ve=0;Ve<x.length;Ve++)this._addTile(x[Ve],ui);this._level.el.appendChild(ui)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return tt(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),b=l.unproject(p,s.z),x=l.unproject(_,s.z);return[b,x]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new bn(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new De(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(mt(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Se(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=f,s.onmousemove=f,ce.ielt9&&this.options.opacity<1&&Sn(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(r(this._tileReady,this,s,null,_)),wt(_,h),this._tiles[p]={el:_,coords:s,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Sn(h.el,0),A(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Se(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ce.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new De(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new lt(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Lk(s){return new yu(s)}var Qa=yu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=E(this,l),l.detectRetina&&ce.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return Ce(h,"load",r(this._tileOnLoad,this,l,h)),Ce(h,"error",r(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:ce.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return F(this._url,n(l,this.options))},_tileOnLoad:function(s,l){ce.ielt9?setTimeout(r(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=f,l.onerror=f,!l.complete)){l.src=Z;var h=this._tiles[s].coords;mt(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",Z),yu.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===Z))return yu.prototype._tileReady.call(this,s,l,h)}});function gE(s,l){return new Qa(s,l)}var _E=Qa.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=n({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=E(this,l);var _=l.detectRetina&&ce.retina?2:1,b=this.getTileSize();h.width=b.x*_,h.height=b.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Qa.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=fn(h.project(l[0]),h.project(l[1])),_=p.min,b=p.max,x=(this._wmsVersion>=1.3&&this._crs===z?[_.y,_.x,b.y,b.x]:[_.x,_.y,b.x,b.y]).join(","),O=Qa.prototype.getTileUrl.call(this,s);return O+M(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(s,l){return n(this.wmsParams,s),l||this.redraw(),this}});function Fk(s,l){return new _E(s,l)}Qa.WMS=_E,gE.wms=Fk;var Fr=Le.extend({options:{padding:.1},initialize:function(s){E(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),b=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,l));ce.any3d?mn(this._container,b,h):wt(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new lt(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vE=Fr.extend({options:{tolerance:0},getEvents:function(){var s=Fr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ce(s,"mousemove",this._onMouseMove,this),Ce(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,mt(this._container),nt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fr.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=ce.retina?2:1;wt(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",ce.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Fr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<l.length;_++){if(p=Number(l[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new lt,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,_,b,x=s._parts,O=x.length,j=this._ctx;if(O){for(j.beginPath(),h=0;h<O;h++){for(p=0,_=x[h].length;p<_;p++)b=x[h][p],j[p?"lineTo":"moveTo"](b.x,b.y);l&&j.closePath()}this._fillStroke(j,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(l.x,l.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Mt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Se(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function yE(s){return ce.canvas?new vE(s):null}var bu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Vk={_initContainer:function(){this._container=Ge("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=bu("shape");Se(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=bu("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;mt(l),s.removeInteractiveTarget(l),delete this._layers[a(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(l||(l=s._stroke=bu("stroke")),_.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=q(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(_.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=bu("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Xi(s._container)},_bringToBack:function(s){Ji(s._container)}},sf=ce.vml?bu:Sa,wu=Fr.extend({_initContainer:function(){this._container=sf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){mt(this._container),nt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),wt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=sf("path");s.options.className&&Se(l,s.options.className),s.options.interactive&&Se(l,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){mt(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Aa(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",b=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,b)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Xi(s._path)},_bringToBack:function(s){Ji(s._path)}});ce.vml&&wu.include(Vk);function bE(s){return ce.svg||ce.vml?new wu(s):null}He.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&yE(s)||bE(s)}});var wE=Za.extend({initialize:function(s,l){Za.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=tt(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Bk(s,l){return new wE(s,l)}wu.create=sf,wu.pointsToPath=Aa,Lr.geometryToLayer=Xh,Lr.coordsToLatLng=Qg,Lr.coordsToLatLngs=Jh,Lr.latLngToCoords=Yg,Lr.latLngsToCoords=ef,Lr.getFeature=Ka,Lr.asFeature=tf,He.mergeOptions({boxZoom:!0});var IE=Qn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){nt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),mo(),Mr(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ce(document,{contextmenu:li,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ge("div","leaflet-zoom-box",this._container),Se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new lt(this._point,this._startPoint),h=l.getSize();wt(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(mt(this._box),Mt(this._container,"leaflet-crosshair")),Xe(),ru(),nt(document,{contextmenu:li,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new bn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});He.addInitHook("addHandler","boxZoom",IE),He.mergeOptions({doubleClickZoom:!0});var EE=Qn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(s.containerPoint,_)}});He.addInitHook("addHandler","doubleClickZoom",EE),He.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var CE=Qn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ri(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Mt(this._map._container,"leaflet-grab"),Mt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=tt(this._map.options.maxBounds);this._offsetLimit=fn(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-l+h)%s+l-h,b=(p+l+h)%s-l-h,x=Math.abs(_+h)<Math.abs(b+h)?_:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,x=h.easeLinearity,O=_.multiplyBy(x/b),j=O.distanceTo([0,0]),G=Math.min(h.inertiaMaxSpeed,j),re=O.multiplyBy(G/j),be=G/(h.inertiaDeceleration*x),Ve=re.multiplyBy(-be/2).round();!Ve.x&&!Ve.y?l.fire("moveend"):(Ve=l._limitOffset(Ve,l.options.maxBounds),D(function(){l.panBy(Ve,{duration:be,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});He.addInitHook("addHandler","dragging",CE),He.mergeOptions({keyboard:!0,keyboardPanDelta:80});var DE=Qn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ce(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),nt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)l[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)l[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)l[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)l[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){nt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=ye(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(ye(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;li(s)}}});He.addInitHook("addHandler","keyboard",DE),He.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xE=Qn.extend({addHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){nt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=hu(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),li(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,b=h?Math.ceil(_/h)*h:_,x=s._limitZoom(l+(this._delta>0?b:-b))-l;this._delta=0,this._startTime=null,x&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+x):s.setZoomAround(this._lastMousePos,l+x))}});He.addInitHook("addHandler","scrollWheelZoom",xE);var jk=600;He.mergeOptions({tapHold:ce.touchNative&&ce.safari&&ce.mobile,tapTolerance:15});var TE=Qn.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){nt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new De(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Ce(document,"touchend",Rt),Ce(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),jk),Ce(document,"touchend touchcancel contextmenu",this._cancel,this),Ce(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){nt(document,"touchend",Rt),nt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),nt(document,"touchend touchcancel contextmenu",this._cancel,this),nt(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new De(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});He.addInitHook("addHandler","tapHold",TE),He.mergeOptions({touchZoom:ce.touch,bounceAtZoomLimits:!0});var SE=Qn.extend({addHooks:function(){Se(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Mt(this._map._container,"leaflet-touch-zoom"),nt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend touchcancel",this._onTouchEnd,this),Rt(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var b=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&b.x===0&&b.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var x=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(x,this,!0),Rt(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),nt(document,"touchmove",this._onTouchMove,this),nt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});He.addInitHook("addHandler","touchZoom",SE),He.BoxZoom=IE,He.DoubleClickZoom=EE,He.Drag=CE,He.Keyboard=DE,He.ScrollWheelZoom=xE,He.TapHold=TE,He.TouchZoom=SE,t.Bounds=lt,t.Browser=ce,t.CRS=Tn,t.Canvas=vE,t.Circle=Kg,t.CircleMarker=Yh,t.Class=N,t.Control=Bn,t.DivIcon=mE,t.DivOverlay=ir,t.DomEvent=Dt,t.DomUtil=er,t.Draggable=Ri,t.Evented=Ti,t.FeatureGroup=gt,t.GeoJSON=Lr,t.GridLayer=yu,t.Handler=Qn,t.Icon=Yn,t.ImageOverlay=nf,t.LatLng=Ee,t.LatLngBounds=bn,t.Layer=Le,t.LayerGroup=xt,t.LineUtil=d,t.Map=He,t.Marker=Qh,t.Mixin=za,t.Path=bo,t.Point=De,t.PolyUtil=pu,t.Polygon=Za,t.Polyline=Or,t.Popup=rf,t.PosAnimation=Uh,t.Projection=I,t.Rectangle=wE,t.Renderer=Fr,t.SVG=wu,t.SVGOverlay=pE,t.TileLayer=Qa,t.Tooltip=of,t.Transformation=$l,t.Util=R,t.VideoOverlay=fE,t.bind=r,t.bounds=fn,t.canvas=yE,t.circle=xk,t.circleMarker=Dk,t.control=vo,t.divIcon=Ok,t.extend=n,t.featureGroup=an,t.geoJSON=hE,t.geoJson=Ak,t.gridLayer=Lk,t.icon=Xn,t.imageOverlay=Mk,t.latLng=$e,t.latLngBounds=tt,t.layerGroup=We,t.map=$h,t.marker=Ck,t.point=ye,t.polygon=Sk,t.polyline=Tk,t.popup=kk,t.rectangle=Bk,t.setOptions=E,t.stamp=a,t.svg=bE,t.svgOverlay=Pk,t.tileLayer=gE,t.tooltip=Nk,t.transformation=Ki,t.version=e,t.videoOverlay=Rk;var zk=window.L;t.noConflict=function(){return window.L=zk,this},window.L=t})});var zE=null;var o_=1,UE=Symbol("SIGNAL");function ze(t){let e=zE;return zE=t,e}var $E={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xk(t){if(!(c_(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===o_)){if(!t.producerMustRecompute(t)&&!s_(t)){t.dirty=!1,t.lastCleanEpoch=o_;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=o_}}function HE(t){return t&&(t.nextProducerIndex=0),ze(t)}function qE(t,e){if(ze(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(c_(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)a_(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function s_(t){df(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(Xk(n),i!==n.version))return!0}return!1}function GE(t){if(df(t),c_(t))for(let e=0;e<t.producerNode.length;e++)a_(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function a_(t,e){if(Jk(t),df(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)a_(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];df(r),r.producerIndexOfThis[i]=e}}function c_(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function df(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Jk(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function e1(){throw new Error}var t1=e1;function WE(t){t1=t}function me(t){return typeof t=="function"}function Xa(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hf=Xa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Cs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var vt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(me(i))try{i()}catch(o){e=o instanceof hf?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{ZE(o)}catch(a){e=e??[],a instanceof hf?e=[...e,...a.errors]:e.push(a)}}if(e)throw new hf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)ZE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Cs(n,e)}remove(e){let{_finalizers:n}=this;n&&Cs(n,e),e instanceof t&&e._removeParent(this)}};vt.EMPTY=(()=>{let t=new vt;return t.closed=!0,t})();var l_=vt.EMPTY;function ff(t){return t instanceof vt||t&&"closed"in t&&me(t.remove)&&me(t.add)&&me(t.unsubscribe)}function ZE(t){me(t)?t():t.unsubscribe()}var Pi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ja={setTimeout(t,e,...n){let{delegate:i}=Ja;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ja;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pf(t){Ja.setTimeout(()=>{let{onUnhandledError:e}=Pi;if(e)e(t);else throw t})}function Cu(){}var KE=u_("C",void 0,void 0);function QE(t){return u_("E",void 0,t)}function YE(t){return u_("N",t,void 0)}function u_(t,e,n){return{kind:t,value:e,error:n}}var Ds=null;function ec(t){if(Pi.useDeprecatedSynchronousErrorHandling){let e=!Ds;if(e&&(Ds={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Ds;if(Ds=null,n)throw i}}else t()}function XE(t){Pi.useDeprecatedSynchronousErrorHandling&&Ds&&(Ds.errorThrown=!0,Ds.error=t)}var xs=class extends vt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ff(e)&&e.add(this)):this.destination=r1}static create(e,n,i){return new Vr(e,n,i)}next(e){this.isStopped?h_(YE(e),this):this._next(e)}error(e){this.isStopped?h_(QE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?h_(KE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},n1=Function.prototype.bind;function d_(t,e){return n1.call(t,e)}var f_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){mf(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){mf(i)}else mf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){mf(n)}}},Vr=class extends xs{constructor(e,n,i){super();let r;if(me(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Pi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&d_(e.next,o),error:e.error&&d_(e.error,o),complete:e.complete&&d_(e.complete,o)}):r=e}this.destination=new f_(r)}};function mf(t){Pi.useDeprecatedSynchronousErrorHandling?XE(t):pf(t)}function i1(t){throw t}function h_(t,e){let{onStoppedNotification:n}=Pi;n&&Ja.setTimeout(()=>n(t,e))}var r1={closed:!0,next:Cu,error:i1,complete:Cu};var tc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rn(t){return t}function p_(...t){return m_(t)}function m_(t){return t.length===0?Rn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=s1(n)?n:new Vr(n,i,r);return ec(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=JE(i),new i((r,o)=>{let a=new Vr({next:c=>{try{n(c)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[tc](){return this}pipe(...n){return m_(n)(this)}toPromise(n){return n=JE(n),new n((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return t.create=e=>new t(e),t})();function JE(t){var e;return(e=t??Pi.Promise)!==null&&e!==void 0?e:Promise}function o1(t){return t&&me(t.next)&&me(t.error)&&me(t.complete)}function s1(t){return t&&t instanceof xs||o1(t)&&ff(t)}function g_(t){return me(t?.lift)}function xe(t){return e=>{if(g_(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Me(t,e,n,i,r){return new __(t,e,n,i,r)}var __=class extends xs{constructor(e,n,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function nc(){return xe((t,e)=>{let n=null;t._refCount++;let i=Me(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ic=class extends Ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,g_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new vt;let n=this.getSubject();e.add(this.source.subscribe(Me(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=vt.EMPTY)}return e}refCount(){return nc()(this)}};var eC=Xa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Te=(()=>{class t extends Ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new gf(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new eC}next(n){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?l_:(this.currentObservers=null,o.push(n),new vt(()=>{this.currentObservers=null,Cs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Ae;return n.source=this,n}}return t.create=(e,n)=>new gf(e,n),t})(),gf=class extends Te{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:l_}};var tn=class extends Te{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Du={now(){return(Du.delegate||Date).now()},delegate:void 0};var _f=class extends Te{constructor(e=1/0,n=1/0,i=Du){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:a}=this;n||(i.push(e),!r&&i.push(o.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let a=0;a<o.length&&!e.closed;a+=i?1:2)e.next(o[a]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let a=n.now(),c=0;for(let u=1;u<i.length&&i[u]<=a;u+=2)c=u;c&&i.splice(0,c+1)}}};var vf=class extends vt{constructor(e,n){super()}schedule(e,n=0){return this}};var xu={setInterval(t,e,...n){let{delegate:i}=xu;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var rc=class extends vf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return xu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&xu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Cs(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var oc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};oc.now=Du.now;var sc=class extends oc{constructor(e,n=oc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var or=new sc(rc),v_=or;var yf=class extends rc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var bf=class extends sc{};var y_=new bf(yf);var Pn=new Ae(t=>t.complete());function wf(t){return t&&me(t.schedule)}function b_(t){return t[t.length-1]}function tC(t){return me(b_(t))?t.pop():void 0}function sr(t){return wf(b_(t))?t.pop():void 0}function nC(t,e){return typeof b_(t)=="number"?t.pop():e}var ac=t=>t&&typeof t.length=="number"&&typeof t!="function";function If(t){return me(t?.then)}function Ef(t){return me(t[tc])}function Cf(t){return Symbol.asyncIterator&&me(t?.[Symbol.asyncIterator])}function Df(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function a1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xf=a1();function Tf(t){return me(t?.[xf])}function Sf(t){return kE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield cf(n.read());if(r)return yield cf(void 0);yield yield cf(i)}}finally{n.releaseLock()}})}function Af(t){return me(t?.getReader)}function ut(t){if(t instanceof Ae)return t;if(t!=null){if(Ef(t))return c1(t);if(ac(t))return l1(t);if(If(t))return u1(t);if(Cf(t))return iC(t);if(Tf(t))return d1(t);if(Af(t))return h1(t)}throw Df(t)}function c1(t){return new Ae(e=>{let n=t[tc]();if(me(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function l1(t){return new Ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function u1(t){return new Ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,pf)})}function d1(t){return new Ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function iC(t){return new Ae(e=>{f1(t,e).catch(n=>e.error(n))})}function h1(t){return iC(Sf(t))}function f1(t,e){var n,i,r,o;return PE(this,void 0,void 0,function*(){try{for(n=NE(t);i=yield n.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function zn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function di(t,e=0){return xe((n,i)=>{n.subscribe(Me(i,r=>zn(i,t,()=>i.next(r),e),()=>zn(i,t,()=>i.complete(),e),r=>zn(i,t,()=>i.error(r),e)))})}function ki(t,e=0){return xe((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function rC(t,e){return ut(t).pipe(ki(e),di(e))}function oC(t,e){return ut(t).pipe(ki(e),di(e))}function sC(t,e){return new Ae(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function aC(t,e){return new Ae(n=>{let i;return zn(n,e,()=>{i=t[xf](),zn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){n.error(a);return}o?n.complete():n.next(r)},0,!0)}),()=>me(i?.return)&&i.return()})}function Mf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ae(n=>{zn(n,e,()=>{let i=t[Symbol.asyncIterator]();zn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function cC(t,e){return Mf(Sf(t),e)}function lC(t,e){if(t!=null){if(Ef(t))return rC(t,e);if(ac(t))return sC(t,e);if(If(t))return oC(t,e);if(Cf(t))return Mf(t,e);if(Tf(t))return aC(t,e);if(Af(t))return cC(t,e)}throw Df(t)}function it(t,e){return e?lC(t,e):ut(t)}function he(...t){let e=sr(t);return it(t,e)}function cc(t,e){let n=me(t)?t:()=>t,i=r=>r.error(n());return new Ae(e?r=>e.schedule(i,0,r):i)}function Rf(t){return!!t&&(t instanceof Ae||me(t.lift)&&me(t.subscribe))}var Br=Xa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function uC(t){return t instanceof Date&&!isNaN(t)}function ge(t,e){return xe((n,i)=>{let r=0;n.subscribe(Me(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:p1}=Array;function m1(t,e){return p1(e)?t(...e):t(e)}function Pf(t){return ge(e=>m1(t,e))}var{isArray:g1}=Array,{getPrototypeOf:_1,prototype:v1,keys:y1}=Object;function dC(t){if(t.length===1){let e=t[0];if(g1(e))return{args:e,keys:null};if(b1(e)){let n=y1(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function b1(t){return t&&typeof t=="object"&&_1(t)===v1}function hC(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function lc(...t){let e=sr(t),n=tC(t),{args:i,keys:r}=dC(t);if(i.length===0)return it([],e);let o=new Ae(w1(i,e,r?a=>hC(r,a):Rn));return n?o.pipe(Pf(n)):o}function w1(t,e,n=Rn){return i=>{fC(e,()=>{let{length:r}=t,o=new Array(r),a=r,c=r;for(let u=0;u<r;u++)fC(e,()=>{let f=it(t[u],e),m=!1;f.subscribe(Me(i,v=>{o[u]=v,m||(m=!0,c--),c||i.next(n(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function fC(t,e,n){t?zn(n,t,e):e()}function pC(t,e,n,i,r,o,a,c){let u=[],f=0,m=0,v=!1,w=()=>{v&&!u.length&&!f&&e.complete()},E=k=>f<i?M(k):u.push(k),M=k=>{o&&e.next(k),f++;let F=!1;ut(n(k,m++)).subscribe(Me(e,q=>{r?.(q),o?E(q):e.next(q)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;u.length&&f<i;){let q=u.shift();a?zn(e,a,()=>M(q)):M(q)}w()}catch(q){e.error(q)}}))};return t.subscribe(Me(e,E,()=>{v=!0,w()})),()=>{c?.()}}function jt(t,e,n=1/0){return me(e)?jt((i,r)=>ge((o,a)=>e(i,o,r,a))(ut(t(i,r))),n):(typeof e=="number"&&(n=e),xe((i,r)=>pC(i,r,t,n)))}function Tu(t=1/0){return jt(Rn,t)}function mC(){return Tu(1)}function Io(...t){return mC()(it(t,sr(t)))}function kf(t){return new Ae(e=>{ut(t()).subscribe(e)})}var I1=["addListener","removeListener"],E1=["addEventListener","removeEventListener"],C1=["on","off"];function Su(t,e,n,i){if(me(n)&&(i=n,n=void 0),i)return Su(t,e,n).pipe(Pf(i));let[r,o]=T1(t)?E1.map(a=>c=>t[a](e,c,n)):D1(t)?I1.map(gC(t,e)):x1(t)?C1.map(gC(t,e)):[];if(!r&&ac(t))return jt(a=>Su(a,e,n))(ut(t));if(!r)throw new TypeError("Invalid event target");return new Ae(a=>{let c=(...u)=>a.next(1<u.length?u:u[0]);return r(c),()=>o(c)})}function gC(t,e){return n=>i=>t[n](e,i)}function D1(t){return me(t.addListener)&&me(t.removeListener)}function x1(t){return me(t.on)&&me(t.off)}function T1(t){return me(t.addEventListener)&&me(t.removeEventListener)}function _C(t=0,e,n=v_){let i=-1;return e!=null&&(wf(e)?n=e:i=e),new Ae(r=>{let o=uC(t)?+t-n.now():t;o<0&&(o=0);let a=0;return n.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Au(...t){let e=sr(t),n=nC(t,1/0),i=t;return i.length?i.length===1?ut(i[0]):Tu(n)(it(i,e)):Pn}function kt(t,e){return xe((n,i)=>{let r=0;n.subscribe(Me(i,o=>t.call(e,o,r++)&&i.next(o)))})}function vC(t){return xe((e,n)=>{let i=!1,r=null,o=null,a=!1,c=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let f=r;r=null,n.next(f)}a&&n.complete()},u=()=>{o=null,a&&n.complete()};e.subscribe(Me(n,f=>{i=!0,r=f,o||ut(t(f)).subscribe(o=Me(n,c,u))},()=>{a=!0,(!i||!o||o.closed)&&n.complete()}))})}function Nf(t,e=or){return vC(()=>_C(t,e))}function Eo(t){return xe((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Me(n,void 0,void 0,a=>{o=ut(t(a,Eo(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function yC(t,e,n,i,r){return(o,a)=>{let c=n,u=e,f=0;o.subscribe(Me(a,m=>{let v=f++;u=c?t(u,m,v):(c=!0,m),i&&a.next(u)},r&&(()=>{c&&a.next(u),a.complete()})))}}function uc(t,e){return me(e)?jt(t,e,1):jt(t,1)}function Of(t,e=or){return xe((n,i)=>{let r=null,o=null,a=null,c=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=a+t,m=e.now();if(m<f){r=this.schedule(void 0,f-m),i.add(r);return}c()}n.subscribe(Me(i,f=>{o=f,a=e.now(),r||(r=e.schedule(u,t),i.add(r))},()=>{c(),i.complete()},void 0,()=>{o=r=null}))})}function Co(t){return xe((e,n)=>{let i=!1;e.subscribe(Me(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function hi(t){return t<=0?()=>Pn:xe((e,n)=>{let i=0;e.subscribe(Me(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function w_(t){return ge(()=>t)}function dc(t,e=Rn){return t=t??S1,xe((n,i)=>{let r,o=!0;n.subscribe(Me(i,a=>{let c=e(a);(o||!t(r,c))&&(o=!1,r=c,i.next(a))}))})}function S1(t,e){return t===e}function Lf(t=A1){return xe((e,n)=>{let i=!1;e.subscribe(Me(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function A1(){return new Br}function Mu(t){return xe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function fi(t,e){let n=arguments.length>=2;return i=>i.pipe(t?kt((r,o)=>t(r,o,i)):Rn,hi(1),n?Co(e):Lf(()=>new Br))}function hc(t){return t<=0?()=>Pn:xe((e,n)=>{let i=[];e.subscribe(Me(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function I_(t,e){let n=arguments.length>=2;return i=>i.pipe(t?kt((r,o)=>t(r,o,i)):Rn,hc(1),n?Co(e):Lf(()=>new Br))}function fc(){return xe((t,e)=>{let n,i=!1;t.subscribe(Me(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function Ts(t,e){return xe(yC(t,e,arguments.length>=2,!0))}function bC(t={}){let{connector:e=()=>new Te,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let a,c,u,f=0,m=!1,v=!1,w=()=>{c?.unsubscribe(),c=void 0},E=()=>{w(),a=u=void 0,m=v=!1},M=()=>{let k=a;E(),k?.unsubscribe()};return xe((k,F)=>{f++,!v&&!m&&w();let q=u=u??e();F.add(()=>{f--,f===0&&!v&&!m&&(c=E_(M,r))}),q.subscribe(F),!a&&f>0&&(a=new Vr({next:ie=>q.next(ie),error:ie=>{v=!0,w(),c=E_(E,n,ie),q.error(ie)},complete:()=>{m=!0,w(),c=E_(E,i),q.complete()}}),ut(k).subscribe(a))})(o)}}function E_(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Vr({next:()=>{i.unsubscribe(),t()}});return ut(e(...n)).subscribe(i)}function Ru(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,bC({connector:()=>new _f(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Pu(t){return kt((e,n)=>t<=n)}function ar(...t){let e=sr(t);return xe((n,i)=>{(e?Io(t,n,e):Io(t,n)).subscribe(i)})}function yt(t,e){return xe((n,i)=>{let r=null,o=0,a=!1,c=()=>a&&!r&&i.complete();n.subscribe(Me(i,u=>{r?.unsubscribe();let f=0,m=o++;ut(t(u,m)).subscribe(r=Me(i,v=>i.next(e?e(u,v,m,f++):v),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function Ff(t,e){return me(e)?yt(()=>t,e):yt(()=>t)}function pi(t){return xe((e,n)=>{ut(t).subscribe(Me(n,()=>n.complete(),Cu)),!n.closed&&e.subscribe(n)})}function Gt(t,e,n){let i=me(t)||e||n?{next:t,error:e,complete:n}:t;return i?xe((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let c=!0;r.subscribe(Me(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;c=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;c=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;c&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Rn}var JC="https://g.co/ng/security#xss",we=class extends Error{constructor(e,n){super(Rv(e,n)),this.code=e}};function Rv(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Qu(t){return{toString:t}.toString()}var Vf="__parameters__";function M1(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function R1(t,e,n){return Qu(()=>{let i=M1(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return c.annotation=a,c;function c(u,f,m){let v=u.hasOwnProperty(Vf)?u[Vf]:Object.defineProperty(u,Vf,{value:[]})[Vf];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(a),u}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var ku=globalThis;function dt(t){for(let e in t)if(t[e]===dt)return e;throw Error("Could not find renamed property on target object.")}function P1(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(kn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function V_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var k1=dt({__forward_ref__:dt});function eD(t){return t.__forward_ref__=eD,t.toString=function(){return kn(this())},t}function mi(t){return tD(t)?t():t}function tD(t){return typeof t=="function"&&t.hasOwnProperty(k1)&&t.__forward_ref__===eD}function J(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rt(t){return{providers:t.providers||[],imports:t.imports||[]}}function mp(t){return wC(t,iD)||wC(t,rD)}function nD(t){return mp(t)!==null}function wC(t,e){return t.hasOwnProperty(e)?t[e]:null}function N1(t){let e=t&&(t[iD]||t[rD]);return e||null}function IC(t){return t&&(t.hasOwnProperty(EC)||t.hasOwnProperty(O1))?t[EC]:null}var iD=dt({\u0275prov:dt}),EC=dt({\u0275inj:dt}),rD=dt({ngInjectableDef:dt}),O1=dt({ngInjectorDef:dt}),se=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function oD(t){return t&&!!t.\u0275providers}var L1=dt({\u0275cmp:dt}),F1=dt({\u0275dir:dt}),V1=dt({\u0275pipe:dt}),B1=dt({\u0275mod:dt}),Wf=dt({\u0275fac:dt}),Nu=dt({__NG_ELEMENT_ID__:dt}),CC=dt({__NG_ENV_ID__:dt});function gp(t){return typeof t=="string"?t:t==null?"":String(t)}function j1(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():gp(t)}function z1(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new we(-200,t)}function Pv(t,e){throw new we(-201,!1)}var Be=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Be||{}),B_;function sD(){return B_}function Un(t){let e=B_;return B_=t,e}function aD(t,e,n){let i=mp(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Be.Optional)return null;if(e!==void 0)return e;Pv(t,"Injector")}var U1={},Ou=U1,j_="__NG_DI_FLAG__",Zf="ngTempTokenPath",$1="ngTokenPath",H1=/\n/gm,q1="\u0275",DC="__source",_c;function G1(){return _c}function Do(t){let e=_c;return _c=t,e}function W1(t,e=Be.Default){if(_c===void 0)throw new we(-203,!1);return _c===null?aD(t,void 0,e):_c.get(t,e&Be.Optional?null:void 0,e)}function V(t,e=Be.Default){return(sD()||W1)(mi(t),e)}function K(t,e=Be.Default){return V(t,_p(e))}function _p(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function z_(t){let e=[];for(let n=0;n<t.length;n++){let i=mi(t[n]);if(Array.isArray(i)){if(i.length===0)throw new we(900,!1);let r,o=Be.Default;for(let a=0;a<i.length;a++){let c=i[a],u=K1(c);typeof u=="number"?u===-1?r=c.token:o|=u:r=c}e.push(V(r,o))}else e.push(V(i))}return e}function Z1(t,e){return t[j_]=e,t.prototype[j_]=e,t}function K1(t){return t[j_]}function Q1(t,e,n,i){let r=t[Zf];throw e[DC]&&r.unshift(e[DC]),t.message=Y1(`
`+t.message,r,n,i),t[$1]=r,t[Zf]=null,t}function Y1(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==q1?t.slice(2):t;let r=kn(e);if(Array.isArray(e))r=e.map(kn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):kn(c)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(H1,`
  `)}`}var vp=Z1(R1("Optional"),8);function Ms(t,e){let n=t.hasOwnProperty(Wf);return n?t[Wf]:null}function X1(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function J1(t){return t.flat(Number.POSITIVE_INFINITY)}function kv(t,e){t.forEach(n=>Array.isArray(n)?kv(n,e):e(n))}function cD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function eN(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function tN(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function Nv(t,e,n){let i=Yu(t,e);return i>=0?t[i|1]=n:(i=~i,tN(t,i,e,n)),i}function C_(t,e){let n=Yu(t,e);if(n>=0)return t[n|1]}function Yu(t,e){return nN(t,e,1)}function nN(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),a=t[o<<n];if(e===a)return o<<n;a>e?r=o:i=o+1}return~(r<<n)}var bc={},$n=[],wc=new se(""),lD=new se("",-1),uD=new se(""),Qf=class{get(e,n=Ou){if(n===Ou){let i=new Error(`NullInjectorError: No provider for ${kn(e)}!`);throw i.name="NullInjectorError",i}return n}},dD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(dD||{}),ur=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(ur||{}),ht=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(ht||{});function iN(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function U_(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],a=n[i++],c=n[i++];t.setAttribute(e,a,c,o)}else{let o=r,a=n[++i];oN(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),i++}}return i}function rN(t){return t===3||t===4||t===6}function oN(t){return t.charCodeAt(0)===64}function Lu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?xC(t,n,r,null,e[++i]):xC(t,n,r,null,null))}}return t}function xC(t,e,n,i,r){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var hD="ng-template";function sN(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&iN(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(Ov(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Ov(t){return t.type===4&&t.value!==hD}function aN(t,e,n){let i=t.type===4&&!n?hD:t.value;return e===i}function cN(t,e,n){let i=4,r=t.attrs,o=r!==null?dN(r):0,a=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!a&&!Ni(i)&&!Ni(u))return!1;if(a&&Ni(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!aN(t,u,n)||u===""&&e.length===1){if(Ni(i))return!1;a=!0}}else if(i&8){if(r===null||!sN(t,r,u,n)){if(Ni(i))return!1;a=!0}}else{let f=e[++c],m=lN(u,r,Ov(t),n);if(m===-1){if(Ni(i))return!1;a=!0;continue}if(f!==""){let v;if(m>o?v="":v=r[m+1].toLowerCase(),i&2&&f!==v){if(Ni(i))return!1;a=!0}}}}return Ni(i)||a}function Ni(t){return(t&1)===0}function lN(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let a=e[r];if(a===t)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++r];for(;typeof c=="string";)c=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return hN(e,t)}function fD(t,e,n=!1){for(let i=0;i<e.length;i++)if(cN(t,e[i],n))return!0;return!1}function uN(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function dN(t){for(let e=0;e<t.length;e++){let n=t[e];if(rN(n))return e}return t.length}function hN(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function fN(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function TC(t,e){return t?":not("+e.trim()+")":e}function pN(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(i&2){let c=t[++n];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!Ni(a)&&(e+=TC(o,r),r=""),i=a,o=o||!Ni(i);n++}return r!==""&&(e+=TC(o,r)),e}function mN(t){return t.map(pN).join(",")}function gN(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Ni(r))break;r=o}i++}return{attrs:e,classes:n}}function Wt(t){return Qu(()=>{let e=yD(t),n=_t(X({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===dD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ur.Emulated,styles:t.styles||$n,_:null,schemas:t.schemas||null,tView:null,id:""});bD(n);let i=t.dependencies;return n.directiveDefs=AC(i,!1),n.pipeDefs=AC(i,!0),n.id=yN(n),n})}function _N(t){return Rs(t)||mD(t)}function vN(t){return t!==null}function ot(t){return Qu(()=>({type:t.type,bootstrap:t.bootstrap||$n,declarations:t.declarations||$n,imports:t.imports||$n,exports:t.exports||$n,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function SC(t,e){if(t==null)return bc;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,a,c=ht.None;Array.isArray(r)?(c=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(n[o]=c!==ht.None?[i,c]:i,e[o]=a):n[o]=i}return n}function ln(t){return Qu(()=>{let e=yD(t);return bD(e),e})}function pD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Rs(t){return t[L1]||null}function mD(t){return t[F1]||null}function gD(t){return t[V1]||null}function _D(t){let e=Rs(t)||mD(t)||gD(t);return e!==null?e.standalone:!1}function vD(t,e){let n=t[B1]||null;if(!n&&e===!0)throw new Error(`Type ${kn(t)} does not have '\u0275mod' property.`);return n}function yD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||bc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||$n,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:SC(t.inputs,e),outputs:SC(t.outputs),debugInfo:null}}function bD(t){t.features?.forEach(e=>e(t))}function AC(t,e){if(!t)return null;let n=e?gD:_N;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(vN)}function yN(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yp(t){return{\u0275providers:t}}function Lv(...t){return{\u0275providers:wD(!0,t),\u0275fromNgModule:!0}}function wD(t,...e){let n=[],i=new Set,r,o=a=>{n.push(a)};return kv(e,a=>{let c=a;$_(c,o,[],i)&&(r||=[],r.push(c))}),r!==void 0&&ID(r,o),n}function ID(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Fv(r,o=>{e(o,i)})}}function $_(t,e,n,i){if(t=mi(t),!t)return!1;let r=null,o=IC(t),a=!o&&Rs(t);if(!o&&!a){let u=t.ngModule;if(o=IC(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=t}let c=i.has(r);if(a){if(c)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)$_(f,e,n,i)}}else if(o){if(o.imports!=null&&!c){i.add(r);let f;try{kv(o.imports,m=>{$_(m,e,n,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&ID(f,e)}if(!c){let f=Ms(r)||(()=>new r);e({provide:r,useFactory:f,deps:$n},r),e({provide:uD,useValue:r,multi:!0},r),e({provide:wc,useValue:()=>V(r),multi:!0},r)}let u=o.providers;if(u!=null&&!c){let f=t;Fv(u,m=>{e(m,f)})}}else return!1;return r!==t&&t.providers!==void 0}function Fv(t,e){for(let n of t)oD(n)&&(n=n.\u0275providers),Array.isArray(n)?Fv(n,e):e(n)}var bN=dt({provide:String,useValue:dt});function ED(t){return t!==null&&typeof t=="object"&&bN in t}function wN(t){return!!(t&&t.useExisting)}function IN(t){return!!(t&&t.useFactory)}function H_(t){return typeof t=="function"}var bp=new se(""),zf={},EN={},D_;function Vv(){return D_===void 0&&(D_=new Qf),D_}var Hn=class{},Fu=class extends Hn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,G_(e,a=>this.processProvider(a)),this.records.set(lD,pc(void 0,this)),r.has("environment")&&this.records.set(Hn,pc(void 0,this));let o=this.records.get(bp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(uD,$n,Be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ze(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ze(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Do(this),i=Un(void 0),r;try{return e()}finally{Do(n),Un(i)}}get(e,n=Ou,i=Be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(CC))return e[CC](this);i=_p(i);let r,o=Do(this),a=Un(void 0);try{if(!(i&Be.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=AN(e)&&mp(e);f&&this.injectableDefInScope(f)?u=pc(q_(e),zf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=i&Be.Self?Vv():this.parent;return n=i&Be.Optional&&n===Ou?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Zf]=c[Zf]||[]).unshift(kn(e)),o)throw c;return Q1(c,e,"R3InjectorError",this.source)}else throw c}finally{Un(a),Do(o)}}resolveInjectorInitializers(){let e=ze(null),n=Do(this),i=Un(void 0),r;try{let o=this.get(wc,$n,Be.Self);for(let a of o)a()}finally{Do(n),Un(i),ze(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(kn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(e){e=mi(e);let n=H_(e)?e:mi(e&&e.provide),i=DN(e);if(!H_(e)&&e.multi===!0){let r=this.records.get(n);r||(r=pc(void 0,zf,!0),r.factory=()=>z_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=ze(null);try{return n.value===zf&&(n.value=EN,n.value=n.factory()),typeof n.value=="object"&&n.value&&SN(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ze(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=mi(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function q_(t){let e=mp(t),n=e!==null?e.factory:Ms(t);if(n!==null)return n;if(t instanceof se)throw new we(204,!1);if(t instanceof Function)return CN(t);throw new we(204,!1)}function CN(t){if(t.length>0)throw new we(204,!1);let n=N1(t);return n!==null?()=>n.factory(t):()=>new t}function DN(t){if(ED(t))return pc(void 0,t.useValue);{let e=xN(t);return pc(e,zf)}}function xN(t,e,n){let i;if(H_(t)){let r=mi(t);return Ms(r)||q_(r)}else if(ED(t))i=()=>mi(t.useValue);else if(IN(t))i=()=>t.useFactory(...z_(t.deps||[]));else if(wN(t))i=()=>V(mi(t.useExisting));else{let r=mi(t&&(t.useClass||t.provide));if(TN(t))i=()=>new r(...z_(t.deps));else return Ms(r)||q_(r)}return i}function pc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function TN(t){return!!t.deps}function SN(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function AN(t){return typeof t=="function"||typeof t=="object"&&t instanceof se}function G_(t,e){for(let n of t)Array.isArray(n)?G_(n,e):n&&oD(n)?G_(n.\u0275providers,e):e(n)}function $r(t,e){t instanceof Fu&&t.assertNotDestroyed();let n,i=Do(t),r=Un(void 0);try{return e()}finally{Do(i),Un(r)}}function CD(){return sD()!==void 0||G1()!=null}function DD(t){if(!CD())throw new we(-203,!1)}function MN(t){return typeof t=="function"}var fr=0,Re=1,Ie=2,gn=3,Li=4,ei=5,Ic=6,Vu=7,In=8,Ec=9,Fi=10,nn=11,Bu=12,MC=13,Tc=14,gi=15,Xu=16,mc=17,jr=18,wp=19,xD=20,xo=21,x_=22,Ps=23,Nn=25,Bv=1;var ks=7,Yf=8,Cc=9,En=10,jv=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(jv||{});function vc(t){return Array.isArray(t)&&typeof t[Bv]=="object"}function Hr(t){return Array.isArray(t)&&t[Bv]===!0}function TD(t){return(t.flags&4)!==0}function Ip(t){return t.componentOffset>-1}function zv(t){return(t.flags&1)===1}function To(t){return!!t.template}function RN(t){return(t[Ie]&512)!==0}var W_=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function SD(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Vs(){return AD}function AD(t){return t.type.prototype.ngOnChanges&&(t.setInput=kN),PN}Vs.ngInherit=!0;function PN(){let t=RD(this),e=t?.current;if(e){let n=t.previous;if(n===bc)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function kN(t,e,n,i,r){let o=this.declaredInputs[i],a=RD(t)||NN(t,{previous:bc,current:null}),c=a.current||(a.current={}),u=a.previous,f=u[o];c[o]=new W_(f&&f.currentValue,n,u===bc),SD(t,e,r,n)}var MD="__ngSimpleChanges__";function RD(t){return t[MD]||null}function NN(t,e){return t[MD]=e}var RC=null;var cr=function(t,e,n){RC?.(t,e,n)},ON="svg",LN="math",FN=!1;function VN(){return FN}function dr(t){for(;Array.isArray(t);)t=t[fr];return t}function BN(t){for(;Array.isArray(t);){if(typeof t[Bv]=="object")return t;t=t[fr]}return null}function PD(t,e){return dr(e[t])}function _i(t,e){return dr(e[t.index])}function Uv(t,e){return t.data[e]}function kD(t,e){return t[e]}function Bs(t,e){let n=e[t];return vc(n)?n:n[fr]}function jN(t){return(t[Ie]&4)===4}function $v(t){return(t[Ie]&128)===128}function zN(t){return Hr(t[gn])}function Xf(t,e){return e==null?null:t[e]}function ND(t){t[mc]=0}function UN(t){t[Ie]&1024||(t[Ie]|=1024,$v(t)&&ju(t))}function $N(t,e){for(;t>0;)e=e[Tc],t--;return e}function Hv(t){return!!(t[Ie]&9216||t[Ps]?.dirty)}function Z_(t){t[Fi].changeDetectionScheduler?.notify(1),Hv(t)?ju(t):t[Ie]&64&&(VN()?(t[Ie]|=1024,ju(t)):t[Fi].changeDetectionScheduler?.notify())}function ju(t){t[Fi].changeDetectionScheduler?.notify();let e=zu(t);for(;e!==null&&!(e[Ie]&8192||(e[Ie]|=8192,!$v(e)));)e=zu(e)}function OD(t,e){if((t[Ie]&256)===256)throw new we(911,!1);t[xo]===null&&(t[xo]=[]),t[xo].push(e)}function HN(t,e){if(t[xo]===null)return;let n=t[xo].indexOf(e);n!==-1&&t[xo].splice(n,1)}function zu(t){let e=t[gn];return Hr(e)?e[gn]:e}var Fe={lFrame:qD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function qN(){return Fe.lFrame.elementDepthCount}function GN(){Fe.lFrame.elementDepthCount++}function WN(){Fe.lFrame.elementDepthCount--}function LD(){return Fe.bindingsEnabled}function FD(){return Fe.skipHydrationRootTNode!==null}function ZN(t){return Fe.skipHydrationRootTNode===t}function KN(){Fe.skipHydrationRootTNode=null}function Ze(){return Fe.lFrame.lView}function Cn(){return Fe.lFrame.tView}function vi(t){return Fe.lFrame.contextLView=t,t[In]}function yi(t){return Fe.lFrame.contextLView=null,t}function Bi(){let t=VD();for(;t!==null&&t.type===64;)t=t.parent;return t}function VD(){return Fe.lFrame.currentTNode}function QN(){let t=Fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ju(t,e){let n=Fe.lFrame;n.currentTNode=t,n.isParent=e}function BD(){return Fe.lFrame.isParent}function jD(){Fe.lFrame.isParent=!1}function YN(){return Fe.lFrame.contextLView}function XN(){let t=Fe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JN(t){return Fe.lFrame.bindingIndex=t}function Sc(){return Fe.lFrame.bindingIndex++}function zD(t){let e=Fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eO(){return Fe.lFrame.inI18n}function tO(t,e){let n=Fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,K_(e)}function nO(){return Fe.lFrame.currentDirectiveIndex}function K_(t){Fe.lFrame.currentDirectiveIndex=t}function qv(t){let e=Fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function UD(){return Fe.lFrame.currentQueryIndex}function Gv(t){Fe.lFrame.currentQueryIndex=t}function iO(t){let e=t[Re];return e.type===2?e.declTNode:e.type===1?t[ei]:null}function $D(t,e,n){if(n&Be.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&Be.Host);)if(r=iO(o),r===null||(o=o[Tc],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=Fe.lFrame=HD();return i.currentTNode=e,i.lView=t,!0}function Wv(t){let e=HD(),n=t[Re];Fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function HD(){let t=Fe.lFrame,e=t===null?null:t.child;return e===null?qD(t):e}function qD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function GD(){let t=Fe.lFrame;return Fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var WD=GD;function Zv(){let t=GD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rO(t){return(Fe.lFrame.contextLView=$N(t,Fe.lFrame.contextLView))[In]}function Ao(){return Fe.lFrame.selectedIndex}function Ns(t){Fe.lFrame.selectedIndex=t}function Kv(){let t=Fe.lFrame;return Uv(t.tView,t.selectedIndex)}function oO(){return Fe.lFrame.currentNamespace}var ZD=!0;function Qv(){return ZD}function Yv(t){ZD=t}function sO(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=AD(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Xv(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(t.contentHooks??=[]).push(-n,a),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),f&&((t.viewHooks??=[]).push(n,f),(t.viewCheckHooks??=[]).push(n,f)),m!=null&&(t.destroyHooks??=[]).push(n,m)}}function Uf(t,e,n){KD(t,e,3,n)}function $f(t,e,n,i){(t[Ie]&3)===n&&KD(t,e,n,i)}function T_(t,e){let n=t[Ie];(n&3)===e&&(n&=16383,n+=1,t[Ie]=n)}function KD(t,e,n,i){let r=i!==void 0?t[mc]&65535:0,o=i??-1,a=e.length-1,c=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(c=e[u],i!=null&&c>=i)break}else e[u]<0&&(t[mc]+=65536),(c<o||o==-1)&&(aO(t,n,e,u),t[mc]=(t[mc]&4294901760)+u+2),u++}function PC(t,e){cr(4,t,e);let n=ze(null);try{e.call(t)}finally{ze(n),cr(5,t,e)}}function aO(t,e,n,i){let r=n[i]<0,o=n[i+1],a=r?-n[i]:n[i],c=t[a];r?t[Ie]>>14<t[mc]>>16&&(t[Ie]&3)===e&&(t[Ie]+=16384,PC(c,o)):PC(c,o)}var yc=-1,Uu=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function cO(t){return t instanceof Uu}function lO(t){return(t.flags&8)!==0}function uO(t){return(t.flags&16)!==0}function QD(t){return t!==yc}function Jf(t){return t&32767}function dO(t){return t>>16}function ep(t,e){let n=dO(t),i=e;for(;n>0;)i=i[Tc],n--;return i}var Q_=!0;function tp(t){let e=Q_;return Q_=t,e}var hO=256,YD=hO-1,XD=5,fO=0,lr={};function pO(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Nu)&&(i=n[Nu]),i==null&&(i=n[Nu]=fO++);let r=i&YD,o=1<<r;e.data[t+(r>>XD)]|=o}function JD(t,e){let n=ex(t,e);if(n!==-1)return n;let i=e[Re];i.firstCreatePass&&(t.injectorIndex=e.length,S_(i.data,t),S_(e,null),S_(i.blueprint,null));let r=Jv(t,e),o=t.injectorIndex;if(QD(r)){let a=Jf(r),c=ep(r,e),u=c[Re].data;for(let f=0;f<8;f++)e[o+f]=c[a+f]|u[a+f]}return e[o+8]=r,o}function S_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ex(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Jv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=ox(r),i===null)return yc;if(n++,r=r[Tc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return yc}function mO(t,e,n){pO(t,e,n)}function tx(t,e,n){if(n&Be.Optional||t!==void 0)return t;Pv(e,"NodeInjector")}function nx(t,e,n,i){if(n&Be.Optional&&i===void 0&&(i=null),!(n&(Be.Self|Be.Host))){let r=t[Ec],o=Un(void 0);try{return r?r.get(e,i,n&Be.Optional):aD(e,i,n&Be.Optional)}finally{Un(o)}}return tx(i,e,n)}function ix(t,e,n,i=Be.Default,r){if(t!==null){if(e[Ie]&2048&&!(i&Be.Self)){let a=yO(t,e,n,i,lr);if(a!==lr)return a}let o=rx(t,e,n,i,lr);if(o!==lr)return o}return nx(e,n,i,r)}function rx(t,e,n,i,r){let o=_O(n);if(typeof o=="function"){if(!$D(e,t,i))return i&Be.Host?tx(r,n,i):nx(e,n,i,r);try{let a;if(a=o(i),a==null&&!(i&Be.Optional))Pv(n);else return a}finally{WD()}}else if(typeof o=="number"){let a=null,c=ex(t,e),u=yc,f=i&Be.Host?e[gi][ei]:null;for((c===-1||i&Be.SkipSelf)&&(u=c===-1?Jv(t,e):e[c+8],u===yc||!NC(i,!1)?c=-1:(a=e[Re],c=Jf(u),e=ep(u,e)));c!==-1;){let m=e[Re];if(kC(o,c,m.data)){let v=gO(c,e,n,a,i,f);if(v!==lr)return v}u=e[c+8],u!==yc&&NC(i,e[Re].data[c+8]===f)&&kC(o,c,e)?(a=m,c=Jf(u),e=ep(u,e)):c=-1}}return r}function gO(t,e,n,i,r,o){let a=e[Re],c=a.data[t+8],u=i==null?Ip(c)&&Q_:i!=a&&(c.type&3)!==0,f=r&Be.Host&&o===c,m=Hf(c,a,n,u,f);return m!==null?Dc(e,a,m,c):lr}function Hf(t,e,n,i,r){let o=t.providerIndexes,a=e.data,c=o&1048575,u=t.directiveStart,f=t.directiveEnd,m=o>>20,v=i?c:c+m,w=r?c+m:f;for(let E=v;E<w;E++){let M=a[E];if(E<u&&n===M||E>=u&&M.type===n)return E}if(r){let E=a[u];if(E&&To(E)&&E.type===n)return u}return null}function Dc(t,e,n,i){let r=t[n],o=e.data;if(cO(r)){let a=r;a.resolving&&z1(j1(o[n]));let c=tp(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Un(a.injectImpl):null,m=$D(t,i,Be.Default);try{r=t[n]=a.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&sO(n,o[n],e)}finally{f!==null&&Un(f),tp(c),a.resolving=!1,WD()}}return r}function _O(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Nu)?t[Nu]:void 0;return typeof e=="number"?e>=0?e&YD:vO:e}function kC(t,e,n){let i=1<<t;return!!(n[e+(t>>XD)]&i)}function NC(t,e){return!(t&Be.Self)&&!(t&Be.Host&&e)}var As=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return ix(this._tNode,this._lView,e,_p(i),n)}};function vO(){return new As(Bi(),Ze())}function Ep(t){return Qu(()=>{let e=t.prototype.constructor,n=e[Wf]||Y_(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Wf]||Y_(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Y_(t){return tD(t)?()=>{let e=Y_(mi(t));return e&&e()}:Ms(t)}function yO(t,e,n,i,r){let o=t,a=e;for(;o!==null&&a!==null&&a[Ie]&2048&&!(a[Ie]&512);){let c=rx(o,a,n,i|Be.Self,lr);if(c!==lr)return c;let u=o.parent;if(!u){let f=a[xD];if(f){let m=f.get(n,lr,i);if(m!==lr)return m}u=ox(a),a=a[Tc]}o=u}return r}function ox(t){let e=t[Re],n=e.type;return n===2?e.declTNode:n===1?t[ei]:null}function OC(t,e=null,n=null,i){let r=sx(t,e,n,i);return r.resolveInjectorInitializers(),r}function sx(t,e=null,n=null,i,r=new Set){let o=[n||$n,Lv(t)];return i=i||(typeof t=="object"?void 0:kn(t)),new Fu(o,e||Vv(),i||null,r)}var un=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return OC({name:""},r,i,"");{let o=i.name??"";return OC({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Ou,e.NULL=new Qf,e.\u0275prov=J({token:e,providedIn:"any",factory:()=>V(lD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var bO="ngOriginalError";function A_(t){return t[bO]}var hr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&A_(e);for(;n&&A_(n);)n=A_(n);return n||null}},ax=new se("",{providedIn:"root",factory:()=>K(hr).handleError.bind(void 0)}),Cp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=wO,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),X_=class extends Cp{constructor(e){super(),this._lView=e}onDestroy(e){return OD(this._lView,e),()=>HN(this._lView,e)}};function wO(){return new X_(Ze())}function IO(){return Ac(Bi(),Ze())}function Ac(t,e){return new It(_i(t,e))}var It=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=IO;let t=e;return t})();function EO(t){return t instanceof It?t.nativeElement:t}var J_=class extends Te{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,CD()&&(this.destroyRef=K(Cp,{optional:!0})??void 0)}emit(e){let n=ze(null);try{super.next(e)}finally{ze(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=M_(o),r&&(r=M_(r)),a&&(a=M_(a)));let c=super.subscribe({next:r,error:o,complete:a});return e instanceof vt&&e.add(c),c}};function M_(t){return e=>{setTimeout(t,void 0,e)}}var at=J_;function CO(){return this._results[Symbol.iterator]()}var np=class t{get changes(){return this._changes??=new at}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=CO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=J1(e);(this._changesDetected=!X1(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function cx(t){return(t.flags&128)===128}var lx=new Map,DO=0;function xO(){return DO++}function TO(t){lx.set(t[wp],t)}function SO(t){lx.delete(t[wp])}var LC="__ngContext__";function Os(t,e){vc(e)?(t[LC]=e[wp],TO(e)):t[LC]=e}function ux(t){return hx(t[Bu])}function dx(t){return hx(t[Li])}function hx(t){for(;t!==null&&!Hr(t);)t=t[Li];return t}var ev;function fx(t){ev=t}function AO(){if(ev!==void 0)return ev;if(typeof document<"u")return document;throw new we(210,!1)}var Dp=new se("",{providedIn:"root",factory:()=>MO}),MO="ng",ey=new se(""),On=new se("",{providedIn:"platform",factory:()=>"unknown"});var js=new se(""),ed=new se("",{providedIn:"root",factory:()=>AO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var RO="h",PO="b";var kO=()=>null;function ty(t,e,n=!1){return kO(t,e,n)}var px=!1,NO=new se("",{providedIn:"root",factory:()=>px});var ip=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${JC})`}};function td(t){return t instanceof ip?t.changingThisBreaksApplicationSecurity:t}function mx(t,e){let n=OO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${JC})`)}return n===e}function OO(t){return t instanceof ip&&t.getTypeName()||null}var LO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function gx(t){return t=String(t),t.match(LO)?t:"unsafe:"+t}var ny=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ny||{});function Mo(t){let e=FO();return e?e.sanitize(ny.URL,t)||"":mx(t,"URL")?td(t):gx(gp(t))}function FO(){let t=Ze();return t&&t[Fi].sanitizer}function _x(t){return t instanceof Function?t():t}function vx(t){return(t??K(un)).get(On)==="browser"}var zr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zr||{}),VO;function iy(t,e){return VO(t,e)}function gc(t,e,n,i,r){if(i!=null){let o,a=!1;Hr(i)?o=i:vc(i)&&(a=!0,i=i[fr]);let c=dr(i);t===0&&n!==null?r==null?Ex(e,n,c):rp(e,n,c,r||null,!0):t===1&&n!==null?rp(e,n,c,r||null,!0):t===2?JO(e,c,a):t===3&&e.destroyNode(c),o!=null&&tL(e,t,o,n,r)}}function BO(t,e){return t.createText(e)}function jO(t,e,n){t.setValue(e,n)}function yx(t,e,n){return t.createElement(e,n)}function zO(t,e){bx(t,e),e[fr]=null,e[ei]=null}function UO(t,e,n,i,r,o){i[fr]=r,i[ei]=e,Tp(t,i,n,1,r,o)}function bx(t,e){e[Fi].changeDetectionScheduler?.notify(1),Tp(t,e,e[nn],2,null,null)}function $O(t){let e=t[Bu];if(!e)return R_(t[Re],t);for(;e;){let n=null;if(vc(e))n=e[Bu];else{let i=e[En];i&&(n=i)}if(!n){for(;e&&!e[Li]&&e!==t;)vc(e)&&R_(e[Re],e),e=e[gn];e===null&&(e=t),vc(e)&&R_(e[Re],e),n=e&&e[Li]}e=n}}function HO(t,e,n,i){let r=En+i,o=n.length;i>0&&(n[r-1][Li]=e),i<o-En?(e[Li]=n[r],cD(n,En+i,e)):(n.push(e),e[Li]=null),e[gn]=n;let a=e[Xu];a!==null&&n!==a&&qO(a,e);let c=e[jr];c!==null&&c.insertView(t),Z_(e),e[Ie]|=128}function qO(t,e){let n=t[Cc],r=e[gn][gn][gi];e[gi]!==r&&(t[Ie]|=jv.HasTransplantedViews),n===null?t[Cc]=[e]:n.push(e)}function wx(t,e){let n=t[Cc],i=n.indexOf(e);n.splice(i,1)}function $u(t,e){if(t.length<=En)return;let n=En+e,i=t[n];if(i){let r=i[Xu];r!==null&&r!==t&&wx(r,i),e>0&&(t[n-1][Li]=i[Li]);let o=Kf(t,En+e);zO(i[Re],i);let a=o[jr];a!==null&&a.detachView(o[Re]),i[gn]=null,i[Li]=null,i[Ie]&=-129}return i}function xp(t,e){if(!(e[Ie]&256)){let n=e[nn];n.destroyNode&&Tp(t,e,n,3,null,null),$O(e)}}function R_(t,e){if(e[Ie]&256)return;let n=ze(null);try{e[Ie]&=-129,e[Ie]|=256,e[Ps]&&GE(e[Ps]),WO(t,e),GO(t,e),e[Re].type===1&&e[nn].destroy();let i=e[Xu];if(i!==null&&Hr(e[gn])){i!==e[gn]&&wx(i,e);let r=e[jr];r!==null&&r.detachView(t)}SO(e)}finally{ze(n)}}function GO(t,e){let n=t.cleanup,i=e[Vu];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[n[o+1]];n[o].call(a)}i!==null&&(e[Vu]=null);let r=e[xo];if(r!==null){e[xo]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function WO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Uu)){let o=n[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=r[o[a]],u=o[a+1];cr(4,c,u);try{u.call(c)}finally{cr(5,c,u)}}else{cr(4,r,o);try{o.call(r)}finally{cr(5,r,o)}}}}}function Ix(t,e,n){return ZO(t,e.parent,n)}function ZO(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[fr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===ur.None||o===ur.Emulated)return null}return _i(i,n)}}function rp(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Ex(t,e,n){t.appendChild(e,n)}function FC(t,e,n,i,r){i!==null?rp(t,e,n,i,r):Ex(t,e,n)}function KO(t,e,n,i){t.removeChild(e,n,i)}function ry(t,e){return t.parentNode(e)}function QO(t,e){return t.nextSibling(e)}function Cx(t,e,n){return XO(t,e,n)}function YO(t,e,n){return t.type&40?_i(t,n):null}var XO=YO,VC;function oy(t,e,n,i){let r=Ix(t,i,e),o=e[nn],a=i.parent||e[ei],c=Cx(a,i,e);if(r!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)FC(o,r,n[u],c,!1);else FC(o,r,n,c,!1);VC!==void 0&&VC(o,i,e,n,r)}function qf(t,e){if(e!==null){let n=e.type;if(n&3)return _i(e,t);if(n&4)return tv(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return qf(t,i);{let r=t[e.index];return Hr(r)?tv(-1,r):dr(r)}}else{if(n&32)return iy(e,t)()||dr(t[e.index]);{let i=Dx(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=zu(t[gi]);return qf(r,i)}else return qf(t,e.next)}}}return null}function Dx(t,e){if(e!==null){let i=t[gi][ei],r=e.projection;return i.projection[r]}return null}function tv(t,e){let n=En+t+1;if(n<e.length){let i=e[n],r=i[Re].firstChild;if(r!==null)return qf(i,r)}return e[ks]}function JO(t,e,n){let i=ry(t,e);i&&KO(t,i,e,n)}function sy(t,e,n,i,r,o,a){for(;n!=null;){let c=i[n.index],u=n.type;if(a&&e===0&&(c&&Os(dr(c),i),n.flags|=2),(n.flags&32)!==32)if(u&8)sy(t,e,n.child,i,r,o,!1),gc(e,t,r,c,o);else if(u&32){let f=iy(n,i),m;for(;m=f();)gc(e,t,r,m,o);gc(e,t,r,c,o)}else u&16?xx(t,e,i,n,r,o):gc(e,t,r,c,o);n=a?n.projectionNext:n.next}}function Tp(t,e,n,i,r,o){sy(n,i,t.firstChild,e,r,o,!1)}function eL(t,e,n){let i=e[nn],r=Ix(t,n,e),o=n.parent||e[ei],a=Cx(o,n,e);xx(i,0,e,n,r,a)}function xx(t,e,n,i,r,o){let a=n[gi],u=a[ei].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];gc(e,t,r,m,o)}else{let f=u,m=a[gn];cx(i)&&(f.flags|=128),sy(t,e,f,m,r,o,!0)}}function tL(t,e,n,i,r){let o=n[ks],a=dr(n);o!==a&&gc(e,t,i,o,r);for(let c=En;c<n.length;c++){let u=n[c];Tp(u[Re],u,t,e,i,o)}}function nL(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:zr.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=zr.Important),t.setStyle(n,i,r,o))}}function iL(t,e,n){t.setAttribute(e,"style",n)}function Tx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Sx(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&U_(t,e,i),r!==null&&Tx(t,e,r),o!==null&&iL(t,e,o)}var qr={};function de(t=1){Ax(Cn(),Ze(),Ao()+t,!1)}function Ax(t,e,n,i){if(!i)if((e[Ie]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Uf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&$f(e,o,0,n)}Ns(n)}function ke(t,e=Be.Default){let n=Ze();if(n===null)return V(t,e);let i=Bi();return ix(i,n,mi(t),e)}function ay(){let t="invalid";throw new Error(t)}function Mx(t,e,n,i,r,o){let a=ze(null);try{let c=null;r&ht.SignalBased&&(c=e[i][UE]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),r&ht.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):SD(e,c,i,o)}finally{ze(a)}}function rL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Ns(~r);else{let o=r,a=n[++i],c=n[++i];tO(a,o);let u=e[o];c(2,u)}}}finally{Ns(-1)}}function Sp(t,e,n,i,r,o,a,c,u,f,m){let v=e.blueprint.slice();return v[fr]=r,v[Ie]=i|4|128|8|64,(f!==null||t&&t[Ie]&2048)&&(v[Ie]|=2048),ND(v),v[gn]=v[Tc]=t,v[In]=n,v[Fi]=a||t&&t[Fi],v[nn]=c||t&&t[nn],v[Ec]=u||t&&t[Ec]||null,v[ei]=o,v[wp]=xO(),v[Ic]=m,v[xD]=f,v[gi]=e.type==2?t[gi]:v,v}function nd(t,e,n,i,r){let o=t.data[e];if(o===null)o=oL(t,e,n,i,r),eO()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let a=QN();o.injectorIndex=a===null?-1:a.injectorIndex}return Ju(o,!0),o}function oL(t,e,n,i,r){let o=VD(),a=BD(),c=a?o:o&&o.parent,u=t.data[e]=dL(t,c,n,e,i,r);return t.firstChild===null&&(t.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function Rx(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function Px(t,e,n,i,r){let o=Ao(),a=i&2;try{Ns(-1),a&&e.length>Nn&&Ax(t,e,Nn,!1),cr(a?2:0,r),n(i,r)}finally{Ns(o),cr(a?3:1,r)}}function kx(t,e,n){if(TD(e)){let i=ze(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let c=t.data[a];if(c.contentQueries){let u=n[a];c.contentQueries(1,u,a)}}}finally{ze(i)}}}function Nx(t,e,n){LD()&&(_L(t,e,n,_i(n,e)),(n.flags&64)===64&&jx(t,e,n))}function Ox(t,e,n=_i){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],c=a===-1?n(e,t):t[a];t[r++]=c}}}function Lx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=cy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function cy(t,e,n,i,r,o,a,c,u,f,m){let v=Nn+i,w=v+r,E=sL(v,w),M=typeof f=="function"?f():f;return E[Re]={type:t,blueprint:E,template:n,queries:null,viewQuery:c,declTNode:e,data:E.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:m}}function sL(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:qr);return n}function aL(t,e,n,i){let o=i.get(NO,px)||n===ur.ShadowDom,a=t.selectRootElement(e,o);return cL(a),a}function cL(t){lL(t)}var lL=()=>null;function uL(t,e,n,i){let r=$x(e);r.push(n),t.firstCreatePass&&Hx(t).push(i,r.length-1)}function dL(t,e,n,i,r,o){let a=e?e.injectorIndex:-1,c=0;return FD()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function BC(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let c,u=ht.None;Array.isArray(a)?(c=a[0],u=a[1]):c=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}t===0?jC(i,n,f,c,u):jC(i,n,f,c)}return i}function jC(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function hL(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,a=e.attrs,c=[],u=null,f=null;for(let m=i;m<r;m++){let v=o[m],w=n?n.get(v):null,E=w?w.inputs:null,M=w?w.outputs:null;u=BC(0,v.inputs,m,u,E),f=BC(1,v.outputs,m,f,M);let k=u!==null&&a!==null&&!Ov(e)?SL(u,m,a):null;c.push(k)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=f}function fL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Fx(t,e,n,i,r,o,a,c){let u=_i(e,n),f=e.inputs,m;!c&&f!=null&&(m=f[i])?(ly(t,n,m,i,r),Ip(e)&&pL(n,e.index)):e.type&3?(i=fL(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function pL(t,e){let n=Bs(e,t);n[Ie]&16||(n[Ie]|=64)}function Vx(t,e,n,i){if(LD()){let r=i===null?null:{"":-1},o=yL(t,n),a,c;o===null?a=c=null:[a,c]=o,a!==null&&Bx(t,e,n,a,r,c),r&&bL(n,i,r)}n.mergedAttrs=Lu(n.mergedAttrs,n.attrs)}function Bx(t,e,n,i,r,o){for(let f=0;f<i.length;f++)mO(JD(n,e),t,i[f].type);IL(n,t.data.length,i.length);for(let f=0;f<i.length;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let a=!1,c=!1,u=Rx(t,e,i.length,null);for(let f=0;f<i.length;f++){let m=i[f];n.mergedAttrs=Lu(n.mergedAttrs,m.hostAttrs),EL(t,n,e,u,m),wL(u,m,r),m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let v=m.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),a=!0),!c&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}hL(t,n,o)}function mL(t,e,n,i,r){let o=r.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let c=~e.index;gL(a)!=c&&a.push(c),a.push(n,i,o)}}function gL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function _L(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Ip(n)&&CL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||JD(n,e),Os(i,e);let a=n.initialInputs;for(let c=r;c<o;c++){let u=t.data[c],f=Dc(e,t,c,n);if(Os(f,e),a!==null&&TL(e,c-r,f,u,n,a),To(u)){let m=Bs(n.index,e);m[In]=Dc(e,t,c,n)}}}function jx(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,a=nO();try{Ns(o);for(let c=i;c<r;c++){let u=t.data[c],f=e[c];K_(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&vL(u,f)}}finally{Ns(-1),K_(a)}}function vL(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function yL(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(fD(e,a.selectors,!1))if(i||(i=[]),To(a))if(a.findHostDirectiveDefs!==null){let c=[];r=r||new Map,a.findHostDirectiveDefs(a,c,r),i.unshift(...c,a);let u=c.length;nv(t,e,u)}else i.unshift(a),nv(t,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function nv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function bL(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new we(-301,!1);i.push(e[r],o)}}}function wL(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;To(e)&&(n[""]=t)}}function IL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function EL(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ms(r.type,!0)),a=new Uu(o,To(r),ke);t.blueprint[i]=a,n[i]=a,mL(t,e,i,Rx(t,n,r.hostVars,qr),r)}function CL(t,e,n){let i=_i(e,t),r=Lx(n),o=t[Fi].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let c=Ap(t,Sp(t,r,null,a,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=c}function DL(t,e,n,i,r,o){let a=_i(t,e);xL(e[nn],a,o,t.value,n,i,r)}function xL(t,e,n,i,r,o,a){if(o==null)t.removeAttribute(e,r,n);else{let c=a==null?gp(o):a(o,i||"",r);t.setAttribute(e,r,c,n)}}function TL(t,e,n,i,r,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;){let u=a[c++],f=a[c++],m=a[c++],v=a[c++];Mx(i,n,u,f,m,v)}}function SL(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let a=t[o];for(let c=0;c<a.length;c+=3)if(a[c]===e){i.push(o,a[c+1],a[c+2],n[r+1]);break}}r+=2}return i}function zx(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function Ux(t,e){let n=t.contentQueries;if(n!==null){let i=ze(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a!==-1){let c=t.data[a];Gv(o),c.contentQueries(2,e[a],a)}}}finally{ze(i)}}}function Ap(t,e){return t[Bu]?t[MC][Li]=e:t[Bu]=e,t[MC]=e,e}function iv(t,e,n){Gv(0);let i=ze(null);try{e(t,n)}finally{ze(i)}}function $x(t){return t[Vu]||(t[Vu]=[])}function Hx(t){return t.cleanup||(t.cleanup=[])}function qx(t,e,n){return(t===null||To(t))&&(n=BN(n[e.index])),n[nn]}function Gx(t,e){let n=t[Ec],i=n?n.get(hr,null):null;i&&i.handleError(e)}function ly(t,e,n,i,r){for(let o=0;o<n.length;){let a=n[o++],c=n[o++],u=n[o++],f=e[a],m=t.data[a];Mx(m,f,i,c,u,r)}}function AL(t,e,n){let i=PD(e,t);jO(t[nn],i,n)}function ML(t,e){let n=Bs(e,t),i=n[Re];RL(i,n);let r=n[fr];r!==null&&n[Ic]===null&&(n[Ic]=ty(r,n[Ec])),uy(i,n,n[In])}function RL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function uy(t,e,n){Wv(e);try{let i=t.viewQuery;i!==null&&iv(1,i,n);let r=t.template;r!==null&&Px(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[jr]?.finishViewCreation(t),t.staticContentQueries&&Ux(t,e),t.staticViewQueries&&iv(2,t.viewQuery,n);let o=t.components;o!==null&&PL(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Ie]&=-5,Zv()}}function PL(t,e){for(let n=0;n<e.length;n++)ML(t,e[n])}function Mp(t,e,n,i){let r=ze(null);try{let o=e.tView,c=t[Ie]&4096?4096:16,u=Sp(t,o,n,c,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=t[e.index];u[Xu]=f;let m=t[jr];return m!==null&&(u[jr]=m.createEmbeddedView(o)),uy(o,u,n),u}finally{ze(r)}}function Wx(t,e){let n=En+e;if(n<t.length)return t[n]}function Hu(t,e){return!e||e.firstChild===null||cx(t)}function Rp(t,e,n,i=!0){let r=e[Re];if(HO(r,e,t,n),i){let a=tv(n,t),c=e[nn],u=ry(c,t[ks]);u!==null&&UO(r,t[ei],c,e,u,a)}let o=e[Ic];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Zx(t,e){let n=$u(t,e);return n!==void 0&&xp(n[Re],n),n}function op(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(dr(o)),Hr(o)&&kL(o,i);let a=n.type;if(a&8)op(t,e,n.child,i);else if(a&32){let c=iy(n,e),u;for(;u=c();)i.push(u)}else if(a&16){let c=Dx(e,n);if(Array.isArray(c))i.push(...c);else{let u=zu(e[gi]);op(u[Re],u,c,i,!0)}}n=r?n.projectionNext:n.next}return i}function kL(t,e){for(let n=En;n<t.length;n++){let i=t[n],r=i[Re].firstChild;r!==null&&op(i[Re],i,r,e)}t[ks]!==t[fr]&&e.push(t[ks])}var Kx=[];function NL(t){return t[Ps]??OL(t)}function OL(t){let e=Kx.pop()??Object.create(FL);return e.lView=t,e}function LL(t){t.lView[Ps]!==t&&(t.lView=null,Kx.push(t))}var FL=_t(X({},$E),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ju(t.lView)},consumerOnSignalRead(){this.lView[Ps]=this}}),Qx=100;function Yx(t,e=!0,n=0){let i=t[Fi],r=i.rendererFactory,o=!1;o||r.begin?.();try{VL(t,n)}catch(a){throw e&&Gx(t,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function VL(t,e){rv(t,e);let n=0;for(;Hv(t);){if(n===Qx)throw new we(103,!1);n++,rv(t,1)}}function BL(t,e,n,i){let r=e[Ie];if((r&256)===256)return;let o=!1;!o&&e[Fi].inlineEffectRunner?.flush(),Wv(e);let a=null,c=null;!o&&jL(t)&&(c=NL(e),a=HE(c));try{ND(e),JN(t.bindingStartIndex),n!==null&&Px(t,e,n,2,i);let u=(r&3)===3;if(!o)if(u){let v=t.preOrderCheckHooks;v!==null&&Uf(e,v,null)}else{let v=t.preOrderHooks;v!==null&&$f(e,v,0,null),T_(e,0)}if(zL(e),Xx(e,0),t.contentQueries!==null&&Ux(t,e),!o)if(u){let v=t.contentCheckHooks;v!==null&&Uf(e,v)}else{let v=t.contentHooks;v!==null&&$f(e,v,1),T_(e,1)}rL(t,e);let f=t.components;f!==null&&eT(e,f,0);let m=t.viewQuery;if(m!==null&&iv(2,m,i),!o)if(u){let v=t.viewCheckHooks;v!==null&&Uf(e,v)}else{let v=t.viewHooks;v!==null&&$f(e,v,2),T_(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[x_]){for(let v of e[x_])v();e[x_]=null}o||(e[Ie]&=-73)}catch(u){throw ju(e),u}finally{c!==null&&(qE(c,a),LL(c)),Zv()}}function jL(t){return t.type!==2}function Xx(t,e){for(let n=ux(t);n!==null;n=dx(n))for(let i=En;i<n.length;i++){let r=n[i];Jx(r,e)}}function zL(t){for(let e=ux(t);e!==null;e=dx(e)){if(!(e[Ie]&jv.HasTransplantedViews))continue;let n=e[Cc];for(let i=0;i<n.length;i++){let r=n[i],o=r[gn];UN(r)}}}function UL(t,e,n){let i=Bs(e,t);Jx(i,n)}function Jx(t,e){$v(t)&&rv(t,e)}function rv(t,e){let i=t[Re],r=t[Ie],o=t[Ps],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&s_(o)),o&&(o.dirty=!1),t[Ie]&=-9217,a)BL(i,t,i.template,t[In]);else if(r&8192){Xx(t,1);let c=i.components;c!==null&&eT(t,c,1)}}function eT(t,e,n){for(let i=0;i<e.length;i++)UL(t,e[i],n)}function dy(t){for(t[Fi].changeDetectionScheduler?.notify();t;){t[Ie]|=64;let e=zu(t);if(RN(t)&&!e)return t;t=e}return null}var Ls=class{get rootNodes(){let e=this._lView,n=e[Re];return op(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[In]}set context(e){this._lView[In]=e}get destroyed(){return(this._lView[Ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gn];if(Hr(e)){let n=e[Yf],i=n?n.indexOf(this):-1;i>-1&&($u(e,i),Kf(n,i))}this._attachedToViewContainer=!1}xp(this._lView[Re],this._lView)}onDestroy(e){OD(this._lView,e)}markForCheck(){dy(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ie]&=-129}reattach(){Z_(this._lView),this._lView[Ie]|=128}detectChanges(){this._lView[Ie]|=1024,Yx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,bx(this._lView[Re],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=e,Z_(this._lView)}},Vi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qL;let t=e;return t})(),$L=Vi,HL=class extends $L{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Mp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Ls(r)}};function qL(){return Pp(Bi(),Ze())}function Pp(t,e){return t.type&4?new HL(e,t,Ac(t,e)):null}var XG=new RegExp(`^(\\d+)*(${PO}|${RO})*(.*)`);var GL=()=>null;function qu(t,e){return GL(t,e)}var sp=class{},ov=class{},ap=class{};function WL(t){let e=Error(`No component factory found for ${kn(t)}.`);return e[ZL]=t,e}var ZL="ngComponent";var sv=class{resolveComponentFactory(e){throw WL(e)}},Ro=(()=>{let e=class e{};e.NULL=new sv;let t=e;return t})(),Gu=class{};var KL=(()=>{let e=class e{};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),P_={};var zC=new Set;function Mc(t){zC.has(t)||(zC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function UC(...t){}function QL(){let t=typeof ku.requestAnimationFrame=="function",e=ku[t?"requestAnimationFrame":"setTimeout"],n=ku[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new at(!1),this.onMicrotaskEmpty=new at(!1),this.onStable=new at(!1),this.onError=new at(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=QL().nativeRequestAnimationFrame,JL(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new we(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,YL,UC,UC);try{return o.runTask(a,n,i)}finally{o.cancelTask(a)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},YL={};function hy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function XL(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ku,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,av(t),t.isCheckStableRunning=!0,hy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),av(t))}function JL(t){let e=()=>{XL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,a,c)=>{if(eF(c))return n.invokeTask(r,o,a,c);try{return $C(t),n.invokeTask(r,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),HC(t)}},onInvoke:(n,i,r,o,a,c,u)=>{try{return $C(t),n.invoke(r,o,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),HC(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,av(t),hy(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function av(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function $C(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function HC(t){t._nesting--,hy(t)}function eF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Ss=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ss||{}),tT={destroy(){}};function fy(t,e){!e&&DD(fy);let n=e?.injector??K(un);if(!vx(n))return tT;Mc("NgAfterRender");let i=n.get(kp),r=i.handler??=new lp,o=e?.phase??Ss.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Cp).onDestroy(a),u=$r(n,()=>new cp(o,t));return r.register(u),{destroy:a}}function id(t,e){!e&&DD(id);let n=e?.injector??K(un);if(!vx(n))return tT;Mc("NgAfterNextRender");let i=n.get(kp),r=i.handler??=new lp,o=e?.phase??Ss.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Cp).onDestroy(a),u=$r(n,()=>new cp(o,()=>{a(),t()}));return r.register(u),{destroy:a}}var cp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=K(_e),this.errorHandler=K(hr,{optional:!0}),K(sp,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},lp=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ss.EarlyRead]:new Set,[Ss.Write]:new Set,[Ss.MixedReadWrite]:new Set,[Ss.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},kp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=J({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function cv(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)r=V_(r,c);else if(o==2){let u=c,f=e[++a];i=V_(i,u+": "+f+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var up=class extends Ro{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Rs(e);return new Wu(n,this.ngModule)}};function qC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function tF(t){let e=t.toLowerCase();return e==="svg"?ON:e==="math"?LN:null}var lv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=_p(i);let r=this.injector.get(e,P_,i);return r!==P_||n===P_?r:this.parentInjector.get(e,n,i)}},Wu=class extends ap{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=qC(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return qC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=mN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=ze(null);try{r=r||this.ngModule;let a=r instanceof Hn?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new lv(e,a):e,u=c.get(Gu,null);if(u===null)throw new we(407,!1);let f=c.get(KL,null),m=c.get(kp,null),v=c.get(sp,null),w={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,afterRenderEventManager:m,changeDetectionScheduler:v},E=u.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=i?aL(E,i,this.componentDef.encapsulation,c):yx(E,M,tF(M)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let q=null;k!==null&&(q=ty(k,c,!0));let ie=cy(0,null,null,1,0,null,null,null,null,null,null),Z=Sp(null,ie,null,F,null,null,w,E,c,null,q);Wv(Z);let ae,pe;try{let ue=this.componentDef,S,C=null;ue.findHostDirectiveDefs?(S=[],C=new Map,ue.findHostDirectiveDefs(ue,S,C),S.push(ue)):S=[ue];let D=nF(Z,k),A=iF(D,k,ue,S,Z,w,E);pe=Uv(ie,Nn),k&&sF(E,ue,k,i),n!==void 0&&aF(pe,this.ngContentSelectors,n),ae=oF(A,ue,S,C,Z,[cF]),uy(ie,Z,null)}finally{Zv()}return new uv(this.componentType,ae,Ac(pe,Z),Z,pe)}finally{ze(o)}}},uv=class extends ov{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ls(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;ly(o[Re],o,r,e,n),this.previousInputValues.set(e,n);let a=Bs(this._tNode.index,o);dy(a)}}get injector(){return new As(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function nF(t,e){let n=t[Re],i=Nn;return t[i]=e,nd(n,i,2,"#host",null)}function iF(t,e,n,i,r,o,a){let c=r[Re];rF(i,t,e,a);let u=null;e!==null&&(u=ty(e,r[Ec]));let f=o.rendererFactory.createRenderer(e,n),m=16;n.signals?m=4096:n.onPush&&(m=64);let v=Sp(r,Lx(n),null,m,r[t.index],t,o,f,null,null,u);return c.firstCreatePass&&nv(c,t,i.length-1),Ap(r,v),r[t.index]=v}function rF(t,e,n,i){for(let r of t)e.mergedAttrs=Lu(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(cv(e,e.mergedAttrs,!0),n!==null&&Sx(i,n,e))}function oF(t,e,n,i,r,o){let a=Bi(),c=r[Re],u=_i(a,r);Bx(c,r,a,n,null,i);for(let m=0;m<n.length;m++){let v=a.directiveStart+m,w=Dc(r,c,v,a);Os(w,r)}jx(c,r,a),u&&Os(u,r);let f=Dc(r,c,a.directiveStart+a.componentOffset,a);if(t[In]=r[In]=f,o!==null)for(let m of o)m(f,e);return kx(c,a,r),f}function sF(t,e,n,i){if(i)U_(t,n,["ng-version","17.3.10"]);else{let{attrs:r,classes:o}=gN(e.selectors[0]);r&&U_(t,n,r),o&&o.length>0&&Tx(t,n,o.join(" "))}}function aF(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function cF(){let t=Bi();Xv(Ze()[Re],t)}var ji=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=lF;let t=e;return t})();function lF(){let t=Bi();return iT(t,Ze())}var uF=ji,nT=class extends uF{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new As(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jv(this._hostTNode,this._hostLView);if(QD(e)){let n=ep(e,this._hostLView),i=Jf(e),r=n[Re].data[i+8];return new As(r,n)}else return new As(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=GC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=qu(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(c,r,Hu(this._hostTNode,a)),c}createComponent(e,n,i,r,o){let a=e&&!MN(e),c;if(a)c=n;else{let M=n||{};c=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=a?e:new Wu(Rs(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let k=(a?f:this.parentInjector).get(Hn,null);k&&(o=k)}let m=Rs(u.componentType??{}),v=qu(this._lContainer,m?.id??null),w=v?.firstChild??null,E=u.create(f,r,w,o);return this.insertImpl(E.hostView,c,Hu(this._hostTNode,v)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(zN(r)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=r[gn],f=new nT(u,u[ei],u[gn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return Rp(a,r,o,i),e.attachToViewContainerRef(),cD(k_(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=GC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=$u(this._lContainer,n);i&&(Kf(k_(this._lContainer),n),xp(i[Re],i))}detach(e){let n=this._adjustIndex(e,-1),i=$u(this._lContainer,n);return i&&Kf(k_(this._lContainer),n)!=null?new Ls(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function GC(t){return t[Yf]}function k_(t){return t[Yf]||(t[Yf]=[])}function iT(t,e){let n,i=e[t.index];return Hr(i)?n=i:(n=zx(i,e,null,t),e[t.index]=n,Ap(e,n)),hF(n,e,t,i),new nT(n,t,e)}function dF(t,e){let n=t[nn],i=n.createComment(""),r=_i(e,t),o=ry(n,r);return rp(n,o,i,QO(n,r),!1),i}var hF=mF,fF=()=>!1;function pF(t,e,n){return fF(t,e,n)}function mF(t,e,n,i){if(t[ks])return;let r;n.type&8?r=dr(i):r=dF(e,n),t[ks]=r}var dv=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},hv=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let a=n.getByIndex(o),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)py(e,n).matches!==null&&this.queries[n].setDirty()}},fv=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=EF(e):this.predicate=e}},pv=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},mv=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,gF(n,o)),this.matchTNodeWithReadOption(e,n,Hf(n,e,o,!1,!1))}else i===Vi?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Hf(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===It||r===ji||r===Vi&&n.type&4)this.addMatch(n.index,-2);else{let o=Hf(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function gF(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function _F(t,e){return t.type&11?Ac(t,e):t.type&4?Pp(t,e):null}function vF(t,e,n,i){return n===-1?_F(e,t):n===-2?yF(t,e,i):Dc(t,t[Re],n,e)}function yF(t,e,n){if(n===It)return Ac(e,t);if(n===Vi)return Pp(e,t);if(n===ji)return iT(e,t)}function rT(t,e,n,i){let r=e[jr].queries[i];if(r.matches===null){let o=t.data,a=n.matches,c=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)c.push(null);else{let m=o[f];c.push(vF(e,m,a[u+1],n.metadata.read))}}r.matches=c}return r.matches}function gv(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let a=rT(t,e,r,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)i.push(a[c/2]);else{let f=o[c+1],m=e[-u];for(let v=En;v<m.length;v++){let w=m[v];w[Xu]===w[gn]&&gv(w[Re],w,f,i)}if(m[Cc]!==null){let v=m[Cc];for(let w=0;w<v.length;w++){let E=v[w];gv(E[Re],E,f,i)}}}}}return i}function bF(t,e){return t[jr].queries[e].queryList}function wF(t,e,n){let i=new np((n&4)===4);return uL(t,e,i,i.destroy),(e[jr]??=new hv).queries.push(new dv(i))-1}function IF(t,e,n){let i=Cn();return i.firstCreatePass&&(CF(i,new fv(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),wF(i,Ze(),e)}function EF(t){return t.split(",").map(e=>e.trim())}function CF(t,e,n){t.queries===null&&(t.queries=new pv),t.queries.track(new mv(e,n))}function py(t,e){return t.queries.getByIndex(e)}function DF(t,e){let n=t[Re],i=py(n,e);return i.crossesNgTemplate?gv(n,t,e,[]):rT(n,t,i,e)}function xF(t){return Object.getPrototypeOf(t.prototype).constructor}function Po(t){let e=xF(t.type),n=!0,i=[t];for(;e;){let r;if(To(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new we(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let a=t;a.inputs=Bf(t.inputs),a.inputTransforms=Bf(t.inputTransforms),a.declaredInputs=Bf(t.declaredInputs),a.outputs=Bf(t.outputs);let c=r.hostBindings;c&&RF(t,c);let u=r.viewQuery,f=r.contentQueries;if(u&&AF(t,u),f&&MF(t,f),TF(t,r),P1(t.outputs,r.outputs),To(r)&&r.data.animation){let m=t.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(t),c===Po&&(n=!1)}}e=Object.getPrototypeOf(e)}SF(i)}function TF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function SF(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Lu(r.hostAttrs,n=Lu(n,r.hostAttrs))}}function Bf(t){return t===bc?{}:t===$n?[]:t}function AF(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function MF(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function RF(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Gr(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var So=class{},Zu=class{};var _v=class extends So{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new up(this);let r=vD(e);this._bootstrapComponents=_x(r.bootstrap),this._r3Injector=sx(e,n,[{provide:So,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver},...i],kn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},vv=class extends Zu{constructor(e){super(),this.moduleType=e}create(e){return new _v(this.moduleType,e,[])}};var dp=class extends So{constructor(e){super(),this.componentFactoryResolver=new up(this),this.instance=null;let n=new Fu([...e.providers,{provide:So,useValue:this},{provide:Ro,useValue:this.componentFactoryResolver}],e.parent||Vv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function my(t,e,n=null){return new dp({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Np=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new tn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function PF(t,e,n){return t[e]=n}function Wr(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function kF(t){return(t.flags&32)===32}function NF(t,e,n,i,r,o,a,c,u){let f=e.consts,m=nd(e,t,4,a||null,Xf(f,c));Vx(e,n,m,Xf(f,u)),Xv(e,m);let v=m.tView=cy(2,m,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,m),v.queries=e.queries.embeddedTView(m)),m}function Ot(t,e,n,i,r,o,a,c){let u=Ze(),f=Cn(),m=t+Nn,v=f.firstCreatePass?NF(m,f,u,e,n,i,r,o,a):f.data[m];Ju(v,!1);let w=OF(f,u,v,t);Qv()&&oy(f,u,w,v),Os(w,u);let E=zx(w,u,w,v);return u[m]=E,Ap(u,E),pF(E,v,u),zv(v)&&Nx(f,u,v),a!=null&&Ox(u,v,c),Ot}var OF=LF;function LF(t,e,n,i){return Yv(!0),e[nn].createComment("")}function Zr(t,e,n,i){let r=Ze(),o=Sc();if(Wr(r,o,e)){let a=Cn(),c=Kv();DL(c,r,t,e,n,i)}return Zr}function FF(t,e,n,i){return Wr(t,Sc(),n)?e+gp(n)+i:qr}function jf(t,e){return t<<17|e<<2}function Fs(t){return t>>17&32767}function VF(t){return(t&2)==2}function BF(t,e){return t&131071|e<<17}function yv(t){return t|2}function xc(t){return(t&131068)>>2}function N_(t,e){return t&-131069|e<<2}function jF(t){return(t&1)===1}function bv(t){return t|1}function zF(t,e,n,i,r,o){let a=o?e.classBindings:e.styleBindings,c=Fs(a),u=xc(a);t[i]=n;let f=!1,m;if(Array.isArray(n)){let v=n;m=v[1],(m===null||Yu(v,m)>0)&&(f=!0)}else m=n;if(r)if(u!==0){let w=Fs(t[c+1]);t[i+1]=jf(w,c),w!==0&&(t[w+1]=N_(t[w+1],i)),t[c+1]=BF(t[c+1],i)}else t[i+1]=jf(c,0),c!==0&&(t[c+1]=N_(t[c+1],i)),c=i;else t[i+1]=jf(u,0),c===0?c=i:t[u+1]=N_(t[u+1],i),u=i;f&&(t[i+1]=yv(t[i+1])),WC(t,m,i,!0),WC(t,m,i,!1),UF(e,m,t,i,o),a=jf(c,u),o?e.classBindings=a:e.styleBindings=a}function UF(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Yu(o,e)>=0&&(n[i+1]=bv(n[i+1]))}function WC(t,e,n,i){let r=t[n+1],o=e===null,a=i?Fs(r):xc(r),c=!1;for(;a!==0&&(c===!1||o);){let u=t[a],f=t[a+1];$F(u,e)&&(c=!0,t[a+1]=i?bv(f):yv(f)),a=i?Fs(f):xc(f)}c&&(t[n+1]=i?yv(r):bv(r))}function $F(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Yu(t,e)>=0:!1}var Oi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function HF(t){return t.substring(Oi.key,Oi.keyEnd)}function qF(t){return GF(t),oT(t,sT(t,0,Oi.textEnd))}function oT(t,e){let n=Oi.textEnd;return n===e?-1:(e=Oi.keyEnd=WF(t,Oi.key=e,n),sT(t,e,n))}function GF(t){Oi.key=0,Oi.keyEnd=0,Oi.value=0,Oi.valueEnd=0,Oi.textEnd=t.length}function sT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function WF(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function ti(t,e,n){let i=Ze(),r=Sc();if(Wr(i,r,e)){let o=Cn(),a=Kv();Fx(o,a,i,t,e,i[nn],n,!1)}return ti}function wv(t,e,n,i,r){let o=e.inputs,a=r?"class":"style";ly(t,n,o[a],a,i)}function Tt(t,e,n){return aT(t,e,n,!1),Tt}function ko(t,e){return aT(t,e,null,!0),ko}function gy(t){KF(tV,ZF,t,!0)}function ZF(t,e){for(let n=qF(e);n>=0;n=oT(e,n))Nv(t,HF(e),!0)}function aT(t,e,n,i){let r=Ze(),o=Cn(),a=zD(2);if(o.firstUpdatePass&&lT(o,t,a,i),e!==qr&&Wr(r,a,e)){let c=o.data[Ao()];uT(o,c,r,r[nn],t,r[a+1]=iV(e,n),i,a)}}function KF(t,e,n,i){let r=Cn(),o=zD(2);r.firstUpdatePass&&lT(r,null,o,i);let a=Ze();if(n!==qr&&Wr(a,o,n)){let c=r.data[Ao()];if(dT(c,i)&&!cT(r,o)){let u=i?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=V_(u,n||"")),wv(r,c,a,n,i)}else nV(r,c,a,a[nn],a[o+1],a[o+1]=eV(t,e,n),i,o)}}function cT(t,e){return e>=t.expandoStartIndex}function lT(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[Ao()],a=cT(t,n);dT(o,i)&&e===null&&!a&&(e=!1),e=QF(r,o,e,i),zF(r,o,e,n,a,i)}}function QF(t,e,n,i){let r=qv(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=O_(null,t,e,n,i),n=Ku(n,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==r)if(n=O_(r,t,e,n,i),o===null){let u=YF(t,e,i);u!==void 0&&Array.isArray(u)&&(u=O_(null,t,e,u[1],i),u=Ku(u,e.attrs,i),XF(t,e,i,u))}else o=JF(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function YF(t,e,n){let i=n?e.classBindings:e.styleBindings;if(xc(i)!==0)return t[Fs(i)]}function XF(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Fs(r)]=i}function JF(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=t[o].hostAttrs;i=Ku(i,a,n)}return Ku(i,e.attrs,n)}function O_(t,e,n,i,r){let o=null,a=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<a&&(o=e[c],i=Ku(i,o.hostAttrs,r),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),i}function Ku(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Nv(t,a,n?!0:e[++o]))}return t===void 0?null:t}function eV(t,e,n){if(n==null||n==="")return $n;let i=[],r=td(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function tV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&Nv(t,i,n)}function nV(t,e,n,i,r,o,a,c){r===qr&&(r=$n);let u=0,f=0,m=0<r.length?r[0]:null,v=0<o.length?o[0]:null;for(;m!==null||v!==null;){let w=u<r.length?r[u+1]:void 0,E=f<o.length?o[f+1]:void 0,M=null,k;m===v?(u+=2,f+=2,w!==E&&(M=v,k=E)):v===null||m!==null&&m<v?(u+=2,M=m):(f+=2,M=v,k=E),M!==null&&uT(t,e,n,i,M,k,a,c),m=u<r.length?r[u]:null,v=f<o.length?o[f]:null}}function uT(t,e,n,i,r,o,a,c){if(!(e.type&3))return;let u=t.data,f=u[c+1],m=jF(f)?ZC(u,e,n,r,xc(f),a):void 0;if(!hp(m)){hp(o)||VF(f)&&(o=ZC(u,null,n,r,c,a));let v=PD(Ao(),n);nL(i,a,v,r,o)}}function ZC(t,e,n,i,r,o){let a=e===null,c;for(;r>0;){let u=t[r],f=Array.isArray(u),m=f?u[1]:u,v=m===null,w=n[r+1];w===qr&&(w=v?$n:void 0);let E=v?C_(w,i):m===i?w:void 0;if(f&&!hp(E)&&(E=C_(u,i)),hp(E)&&(c=E,a))return c;let M=t[r+1];r=a?Fs(M):xc(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=C_(u,i))}return c}function hp(t){return t!==void 0}function iV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kn(td(t)))),t}function dT(t,e){return(t.flags&(e?8:16))!==0}var Iv=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function L_(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function rV(t,e,n){let i,r,o=0,a=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=a&&o<=c;){let u=t.at(o),f=e[o],m=L_(o,u,o,f,n);if(m!==0){m<0&&t.updateValue(o,f),o++;continue}let v=t.at(a),w=e[c],E=L_(a,v,c,w,n);if(E!==0){E<0&&t.updateValue(a,w),a--,c--;continue}let M=n(o,u),k=n(a,v),F=n(o,f);if(Object.is(F,k)){let q=n(c,w);Object.is(q,M)?(t.swap(o,a),t.updateValue(a,w),c--,a--):t.move(a,o),t.updateValue(o,f),o++;continue}if(i??=new fp,r??=QC(t,o,a,n),Ev(t,i,o,F))t.updateValue(o,f),o++,a++;else if(r.has(F))i.set(M,t.detach(o)),a--;else{let q=t.create(o,e[o]);t.attach(o,q),o++,a++}}for(;o<=c;)KC(t,i,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=a;){let f=t.at(o),m=u.value,v=L_(o,f,o,m,n);if(v!==0)v<0&&t.updateValue(o,m),o++,u=c.next();else{i??=new fp,r??=QC(t,o,a,n);let w=n(o,m);if(Ev(t,i,o,w))t.updateValue(o,m),o++,a++,u=c.next();else if(!r.has(w))t.attach(o,t.create(o,m)),o++,a++,u=c.next();else{let E=n(o,f);i.set(E,t.detach(o)),a--}}}for(;!u.done;)KC(t,i,n,t.length,u.value),u=c.next()}for(;o<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function Ev(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function KC(t,e,n,i,r){if(Ev(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function QC(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var fp=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function _n(t,e,n){Mc("NgControlFlow");let i=Ze(),r=Sc(),o=Tv(i,Nn+t),a=0;if(Wr(i,r,e)){let c=ze(null);try{if(Zx(o,a),e!==-1){let u=Sv(i[Re],Nn+e),f=qu(o,u.tView.ssrId),m=Mp(i,u,n,{dehydratedView:f});Rp(o,m,a,Hu(u,f))}}finally{ze(c)}}else{let c=Wx(o,a);c!==void 0&&(c[In]=n)}}var Cv=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-En}};function hT(t,e){return e}var Dv=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function fT(t,e,n,i,r,o,a,c,u,f,m,v,w){Mc("NgControlFlow");let E=u!==void 0,M=Ze(),k=c?a.bind(M[gi][In]):a,F=new Dv(E,k);M[Nn+t]=F,Ot(t+1,e,n,i,r,o),E&&Ot(t+2,u,f,m,v,w)}var xv=class extends Iv{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-En}at(e){return this.getLView(e)[In].$implicit}attach(e,n){let i=n[Ic];this.needsIndexUpdate||=e!==this.length,Rp(this.lContainer,n,e,Hu(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,oV(this.lContainer,e)}create(e,n){let i=qu(this.lContainer,this.templateTNode.tView.ssrId);return Mp(this.hostLView,this.templateTNode,new Cv(this.lContainer,n,e),{dehydratedView:i})}destroy(e){xp(e[Re],e)}updateValue(e,n){this.getLView(e)[In].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[In].$index=e}getLView(e){return sV(this.lContainer,e)}};function pT(t){let e=ze(null),n=Ao();try{let i=Ze(),r=i[Re],o=i[n];if(o.liveCollection===void 0){let c=n+1,u=Tv(i,c),f=Sv(r,c);o.liveCollection=new xv(u,i,f)}else o.liveCollection.reset();let a=o.liveCollection;if(rV(a,t,o.trackByFn),a.updateIndexes(),o.hasEmptyBlock){let c=Sc(),u=a.length===0;if(Wr(i,c,u)){let f=n+2,m=Tv(i,f);if(u){let v=Sv(r,f),w=qu(m,v.tView.ssrId),E=Mp(i,v,void 0,{dehydratedView:w});Rp(m,E,0,Hu(v,w))}else Zx(m,0)}}}finally{ze(e)}}function Tv(t,e){return t[e]}function oV(t,e){return $u(t,e)}function sV(t,e){return Wx(t,e)}function Sv(t,e){return Uv(t,e)}function aV(t,e,n,i,r,o){let a=e.consts,c=Xf(a,r),u=nd(e,t,2,i,c);return Vx(e,n,u,Xf(a,o)),u.attrs!==null&&cv(u,u.attrs,!1),u.mergedAttrs!==null&&cv(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Y(t,e,n,i){let r=Ze(),o=Cn(),a=Nn+t,c=r[nn],u=o.firstCreatePass?aV(a,o,r,e,n,i):o.data[a],f=cV(o,r,u,c,e,t);r[a]=f;let m=zv(u);return Ju(u,!0),Sx(c,f,u),!kF(u)&&Qv()&&oy(o,r,f,u),qN()===0&&Os(f,r),GN(),m&&(Nx(o,r,u),kx(o,u,r)),i!==null&&Ox(r,u),Y}function te(){let t=Bi();BD()?jD():(t=t.parent,Ju(t,!1));let e=t;ZN(e)&&KN(),WN();let n=Cn();return n.firstCreatePass&&(Xv(n,t),TD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&lO(e)&&wv(n,e,Ze(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&uO(e)&&wv(n,e,Ze(),e.stylesWithoutHost,!1),te}function je(t,e,n,i){return Y(t,e,n,i),te(),je}var cV=(t,e,n,i,r,o)=>(Yv(!0),yx(i,r,oO()));function zi(){return Ze()}function _y(t,e,n){let i=Ze(),r=Sc();if(Wr(i,r,e)){let o=Cn(),a=Kv(),c=qv(o.data),u=qx(c,a,i);Fx(o,a,i,t,e,u,n,!0)}return _y}var pp="en-US";var lV=pp;function uV(t){typeof t=="string"&&(lV=t.toLowerCase().replace(/_/g,"-"))}function ft(t,e,n,i){let r=Ze(),o=Cn(),a=Bi();return mT(o,r,r[nn],a,t,e,i),ft}function vy(t,e){let n=Bi(),i=Ze(),r=Cn(),o=qv(r.data),a=qx(o,n,i);return mT(r,i,a,n,t,e),vy}function dV(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===n&&r[o+1]===i){let c=e[Vu],u=r[o+2];return c.length>u?c[u]:null}typeof a=="string"&&(o+=2)}return null}function mT(t,e,n,i,r,o,a){let c=zv(i),f=t.firstCreatePass&&Hx(t),m=e[In],v=$x(e),w=!0;if(i.type&3||a){let k=_i(i,e),F=a?a(k):k,q=v.length,ie=a?ae=>a(dr(ae[i.index])):i.index,Z=null;if(!a&&c&&(Z=dV(t,e,r,i.index)),Z!==null){let ae=Z.__ngLastListenerFn__||Z;ae.__ngNextListenerFn__=o,Z.__ngLastListenerFn__=o,w=!1}else{o=XC(i,e,m,o,!1);let ae=n.listen(F,r,o);v.push(o,ae),f&&f.push(r,ie,q,q+1)}}else o=XC(i,e,m,o,!1);let E=i.outputs,M;if(w&&E!==null&&(M=E[r])){let k=M.length;if(k)for(let F=0;F<k;F+=2){let q=M[F],ie=M[F+1],pe=e[q][ie].subscribe(o),ue=v.length;v.push(o,pe),f&&f.push(r,i.index,ue,-(ue+1))}}}function YC(t,e,n,i){let r=ze(null);try{return cr(6,e,n),n(i)!==!1}catch(o){return Gx(t,o),!1}finally{cr(7,e,n),ze(r)}}function XC(t,e,n,i,r){return function o(a){if(a===Function)return i;let c=t.componentOffset>-1?Bs(t.index,e):e;dy(c);let u=YC(e,n,i,a),f=o.__ngNextListenerFn__;for(;f;)u=YC(e,n,f,a)&&u,f=f.__ngNextListenerFn__;return r&&u===!1&&a.preventDefault(),u}}function Je(t=1){return rO(t)}function hV(t,e){let n=null,i=uN(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?fD(t,o,!0):fN(i,o))return r}return n}function Op(t){let e=Ze()[gi][ei];if(!e.projection){let n=t?t.length:1,i=e.projection=eN(n,null),r=i.slice(),o=e.child;for(;o!==null;){let a=t?hV(o,t):0;a!==null&&(r[a]?r[a].projectionNext=o:i[a]=o,r[a]=o),o=o.next}}}function Rc(t,e=0,n){let i=Ze(),r=Cn(),o=nd(r,Nn+t,16,null,n||null);o.projection===null&&(o.projection=e),jD(),(!i[Ic]||FD())&&(o.flags&32)!==32&&eL(r,i,o)}function rd(t,e,n){IF(t,e,n)}function Pc(t){let e=Ze(),n=Cn(),i=UD();Gv(i+1);let r=py(n,i);if(t.dirty&&jN(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=DF(e,i);t.reset(o,EO),t.notifyOnChanges()}return!0}return!1}function kc(){return bF(Ze(),UD())}function fV(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function gT(t){let e=YN();return kD(e,Nn+t)}function ve(t,e=""){let n=Ze(),i=Cn(),r=t+Nn,o=i.firstCreatePass?nd(i,r,1,e,null):i.data[r],a=pV(i,n,o,e,t);n[r]=a,Qv()&&oy(i,n,a,o),Ju(o,!1)}var pV=(t,e,n,i,r)=>(Yv(!0),BO(e[nn],i));function ni(t){return Lt("",t,""),ni}function Lt(t,e,n){let i=Ze(),r=FF(i,t,e,n);return r!==qr&&AL(i,Ao(),r),Lt}var mV=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=wD(!1,i.type),o=r.length>0?my([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=J({token:e,providedIn:"environment",factory:()=>new e(V(Hn))});let t=e;return t})();function Zt(t){Mc("NgStandalone"),t.getStandaloneInjector=e=>e.get(mV).getOrCreateStandaloneInjector(t)}function gV(t,e){let n=t[e];return n===qr?void 0:n}function _V(t,e,n,i,r,o){let a=e+n;return Wr(t,a,r)?PF(t,a+1,o?i.call(o,r):i(r)):gV(t,a+1)}function _T(t,e){let n=Cn(),i,r=t+Nn;n.firstCreatePass?(i=vV(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=Ms(i.type,!0)),a,c=Un(ke);try{let u=tp(!1),f=o();return tp(u),fV(n,Ze(),r,f),f}finally{Un(c)}}function vV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function vT(t,e,n){let i=t+Nn,r=Ze(),o=kD(r,i);return yV(r,i)?_V(r,XN(),e,o.transform,n,o):o.transform(n)}function yV(t,e){return t[Re].data[e].pure}function yT(t,e){return Pp(t,e)}var Ur=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},bT=new Ur("17.3.10"),Lp=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var wT=new se("");function Nc(t){return!!t&&typeof t.then=="function"}function yy(t){return!!t&&typeof t.subscribe=="function"}var IT=new se(""),ET=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=K(IT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let a=o();if(Nc(a))i.push(a);else if(yy(a)){let c=new Promise((u,f)=>{a.subscribe({complete:u,error:f})});i.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),by=new se("");function bV(){WE(()=>{throw new we(600,!1)})}function wV(t){return t.isBoundToModule}function IV(t,e,n){try{let i=n();return Nc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var zs=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(ax),this.afterRenderEffectManager=K(kp),this.externalTestViews=new Set,this.beforeRender=new Te,this.afterTick=new Te,this.componentTypes=[],this.components=[],this.isStable=K(Np).hasPendingTasks.pipe(ge(i=>!i)),this._injector=K(Hn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof ap;if(!this._injector.get(ET).done){let E=!o&&_D(i),M=!1;throw new we(405,M)}let c;o?c=i:c=this._injector.get(Ro).resolveComponentFactory(i),this.componentTypes.push(c.componentType);let u=wV(c)?void 0:this._injector.get(So),f=r||c.selector,m=c.create(un.NULL,[],f,u),v=m.location.nativeElement,w=m.injector.get(wT,null);return w?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),F_(this.components,m),w?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new we(101,!1);let r=ze(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,ze(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===Qx)throw new we(103,!1);if(i){let a=r===0;this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)EV(c,a,u)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>Av(a))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>Av(a))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;F_(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(by,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>F_(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new we(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function F_(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function EV(t,e,n){!e&&!Av(t)||CV(t,n,e)}function Av(t){return Hv(t)}function CV(t,e,n){let i;n?(i=0,t[Ie]|=1024):t[Ie]&64?i=0:i=1,Yx(t,e,i)}var Mv=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},wy=(()=>{let e=class e{compileModuleSync(i){return new vv(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=vD(i),a=_x(o.declarations).reduce((c,u)=>{let f=Rs(u);return f&&c.push(new Wu(f)),c},[]);return new Mv(r,a)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var DV=(()=>{let e=class e{constructor(){this.zone=K(_e),this.applicationRef=K(zs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xV(t){return[{provide:_e,useFactory:t},{provide:wc,multi:!0,useFactory:()=>{let e=K(DV,{optional:!0});return()=>e.initialize()}},{provide:wc,multi:!0,useFactory:()=>{let e=K(MV);return()=>{e.initialize()}}},{provide:ax,useFactory:TV}]}function TV(){let t=K(_e),e=K(hr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function SV(t){let e=xV(()=>new _e(AV(t)));return yp([[],e])}function AV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var MV=(()=>{let e=class e{constructor(){this.subscription=new vt,this.initialized=!1,this.zone=K(_e),this.pendingTasks=K(Np)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RV(){return typeof $localize<"u"&&$localize.locale||pp}var Fp=new se("",{providedIn:"root",factory:()=>K(Fp,Be.Optional|Be.SkipSelf)||RV()});var CT=new se("");var Gf=null;function PV(t=[],e){return un.create({name:e,providers:[{provide:bp,useValue:"platform"},{provide:CT,useValue:new Set([()=>Gf=null])},...t]})}function kV(t=[]){if(Gf)return Gf;let e=PV(t);return Gf=e,bV(),NV(e),e}function NV(t){t.get(ey,null)?.forEach(n=>n())}function Iy(){return!1}var Ui=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=OV;let t=e;return t})();function OV(t){return LV(Bi(),Ze(),(t&16)===16)}function LV(t,e,n){if(Ip(t)&&!n){let i=Bs(t.index,e);return new Ls(i,i)}else if(t.type&47){let i=e[gi];return new Ls(i,e)}return null}function DT(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=kV(i),o=[SV(),...n||[]],c=new dp({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(_e);return u.run(()=>{c.resolveInjectorInitializers();let f=c.get(hr,null),m;u.runOutsideAngular(()=>{m=u.onError.subscribe({next:E=>{f.handleError(E)}})});let v=()=>c.destroy(),w=r.get(CT);return w.add(v),c.onDestroy(()=>{m.unsubscribe(),w.delete(v)}),IV(f,u,()=>{let E=c.get(ET);return E.runInitializers(),E.donePromise.then(()=>{let M=c.get(Fp,pp);uV(M||pp);let k=c.get(zs);return e!==void 0&&k.bootstrap(e),k})})})}catch(e){return Promise.reject(e)}}function pr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function od(t){let e=ze(null);try{return t()}finally{ze(e)}}var MT=null;function Oc(){return MT}function RT(t){MT??=t}var Vp=class{};var Ue=new se(""),PT=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>K(jV),providedIn:"platform"});let t=e;return t})();var jV=(()=>{let e=class e extends PT{constructor(){super(),this._doc=K(Ue),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Oc().getBaseHref(this._doc)}onPopState(i){let r=Oc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Oc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function kT(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function xT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Us(t){return t&&t[0]!=="?"?"?"+t:t}var jp=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>K(NT),providedIn:"root"});let t=e;return t})(),zV=new se(""),NT=(()=>{let e=class e extends jp{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??K(Ue).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return kT(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Us(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,a){let c=this.prepareExternalUrl(o+Us(a));this._platformLocation.pushState(i,r,c)}replaceState(i,r,o,a){let c=this.prepareExternalUrl(o+Us(a));this._platformLocation.replaceState(i,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(V(PT),V(zV,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $s=(()=>{let e=class e{constructor(i){this._subject=new at,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=HV(xT(TT(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Us(r))}normalize(i){return e.stripTrailingSlash($V(this._basePath,TT(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Us(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Us(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=Us,e.joinWithSlash=kT,e.stripTrailingSlash=xT,e.\u0275fac=function(r){return new(r||e)(V(jp))},e.\u0275prov=J({token:e,factory:()=>UV(),providedIn:"root"});let t=e;return t})();function UV(){return new $s(V(jp))}function $V(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function TT(t){return t.replace(/\/index.html$/,"")}function HV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function OT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var LT=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new Ey,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){ST("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){ST("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ke(ji),ke(Vi))},e.\u0275dir=ln({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),Ey=class{constructor(){this.$implicit=null,this.ngIf=null}};function ST(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${kn(e)}'.`)}function qV(t,e){return new we(2100,!1)}var Cy=class{createSubscription(e,n){return od(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){od(()=>e.unsubscribe())}},Dy=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},GV=new Dy,WV=new Cy,FT=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(Nc(i))return GV;if(yy(i))return WV;throw qV(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(ke(Ui,16))},e.\u0275pipe=pD({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var xy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})(),Ty="browser",ZV="server";function VT(t){return t===Ty}function Hs(t){return t===ZV}var Bp=class{};var My=class extends Vp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ry=class t extends My{static makeCurrent(){RT(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=KV();return n==null?null:QV(n)}resetBaseElement(){sd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return OT(document.cookie,e)}},sd=null;function KV(){return sd=sd||document.querySelector("base"),sd?sd.getAttribute("href"):null}function QV(t){return new URL(t,document.baseURI).pathname}var YV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Py=new se(""),$T=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(a=>a.supports(i)),!r)throw new we(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(V(Py),V(_e))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),zp=class{constructor(e){this._doc=e}},Sy="ng-app-id",HT=(()=>{let e=class e{constructor(i,r,o,a={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hs(a),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Sy}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let a=o.get(i);return a.usage+=r,a.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,a=o?.get(r);if(a?.parentNode===i)return o.delete(r),a.removeAttribute(Sy),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Sy,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),a=this.styleRef,c=a.get(r)?.elements;c?c.push(o):a.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(Dp),V(ed,8),V(On))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),Ay={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ny=/%COMP%/g,qT="%COMP%",XV=`_nghost-${qT}`,JV=`_ngcontent-${qT}`,e2=!0,t2=new se("",{providedIn:"root",factory:()=>e2});function n2(t){return JV.replace(Ny,t)}function i2(t){return XV.replace(Ny,t)}function GT(t,e){return e.map(n=>n.replace(Ny,t))}var jT=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=u,this.ngZone=f,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=Hs(u),this.defaultRenderer=new ad(i,c,f,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ur.ShadowDom&&(r=_t(X({},r),{encapsulation:ur.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof Up?o.applyToHost(i):o instanceof cd&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,a=o.get(r.id);if(!a){let c=this.doc,u=this.ngZone,f=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(r.encapsulation){case ur.Emulated:a=new Up(f,m,r,this.appId,v,c,u,w);break;case ur.ShadowDom:return new ky(f,m,i,r,c,u,this.nonce,w);default:a=new cd(f,m,r,v,c,u,w);break}o.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(V($T),V(HT),V(Dp),V(t2),V(Ue),V(On),V(_e),V(ed))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),ad=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ay[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(zT(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(zT(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new we(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=Ay[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Ay[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(zr.DashCase|zr.Important)?e.style.setProperty(n,i,r&zr.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&zr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Oc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function zT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ky=class extends ad{constructor(e,n,i,r,o,a,c,u){super(e,o,a,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=GT(r.id,r.styles);for(let m of f){let v=document.createElement("style");c&&v.setAttribute("nonce",c),v.textContent=m,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cd=class extends ad{constructor(e,n,i,r,o,a,c,u){super(e,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=u?GT(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Up=class extends cd{constructor(e,n,i,r,o,a,c,u){let f=r+"-"+i.id;super(e,n,i,o,a,c,u,f),this.contentAttr=n2(f),this.hostAttr=i2(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},r2=(()=>{let e=class e extends zp{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})(),UT=["alt","control","meta","shift"],o2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},s2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},a2=(()=>{let e=class e extends zp{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let a=e.parseEventName(r),c=e.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oc().onAndCancel(i,a.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let a=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),UT.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),c+=m+".")}),c+=a,r.length!=0||a.length===0)return null;let f={};return f.domEventName=o,f.fullKey=c,f}static matchEventFullKeyCode(i,r){let o=o2[i.key]||i.key,a="";return r.indexOf("code.")>-1&&(o=i.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),UT.forEach(c=>{if(c!==o){let u=s2[c];u(i)&&(a+=c+".")}}),a+=o,a===r)}static eventCallback(i,r,o){return a=>{e.matchEventFullKeyCode(a,i)&&o.runGuarded(()=>r(a))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=J({token:e,factory:e.\u0275fac});let t=e;return t})();function WT(t,e){return DT(X({rootComponent:t},c2(e)))}function c2(t){return{appProviders:[...f2,...t?.providers??[]],platformProviders:h2}}function l2(){Ry.makeCurrent()}function u2(){return new hr}function d2(){return fx(document),document}var h2=[{provide:On,useValue:Ty},{provide:ey,useValue:l2,multi:!0},{provide:Ue,useFactory:d2,deps:[]}];var f2=[{provide:bp,useValue:"root"},{provide:hr,useFactory:u2,deps:[]},{provide:Py,useClass:r2,multi:!0,deps:[Ue,_e,On]},{provide:Py,useClass:a2,multi:!0,deps:[Ue]},jT,HT,$T,{provide:Gu,useExisting:jT},{provide:Bp,useClass:YV,deps:[]},[]];var ZT=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Oe="primary",Ed=Symbol("RouteTitle"),By=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function jc(t){return new By(t)}function m2(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],c=t[o];if(a.startsWith(":"))r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function g2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!mr(t[n],e[n]))return!1;return!0}function mr(t,e){let n=t?jy(t):void 0,i=e?jy(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!eS(t[r],e[r]))return!1;return!0}function jy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function eS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function tS(t){return t.length>0?t[t.length-1]:null}function Lo(t){return Rf(t)?t:Nc(t)?it(Promise.resolve(t)):he(t)}var _2={exact:iS,subset:rS},nS={exact:v2,subset:y2,ignored:()=>!0};function KT(t,e,n){return _2[n.paths](t.root,e.root,n.matrixParams)&&nS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function v2(t,e){return mr(t,e)}function iS(t,e,n){if(!Gs(t.segments,e.segments)||!qp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!iS(t.children[i],e.children[i],n))return!1;return!0}function y2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>eS(t[n],e[n]))}function rS(t,e,n){return oS(t,e,e.segments,n)}function oS(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Gs(r,n)||e.hasChildren()||!qp(r,n,i))}else if(t.segments.length===n.length){if(!Gs(t.segments,n)||!qp(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!rS(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Gs(t.segments,r)||!qp(t.segments,r,i)||!t.children[Oe]?!1:oS(t.children[Oe],e,o,i)}}function qp(t,e,n){return e.every((i,r)=>nS[n](t[r].parameters,i.parameters))}var No=class{constructor(e=new et([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=jc(this.queryParams),this._queryParamMap}toString(){return I2.serialize(this)}},et=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gp(this)}},qs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=jc(this.parameters),this._parameterMap}toString(){return aS(this)}};function b2(t,e){return Gs(t,e)&&t.every((n,i)=>mr(n.parameters,e[i].parameters))}function Gs(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function w2(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Oe&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Oe&&(n=n.concat(e(r,i)))}),n}var hb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>new Zp,providedIn:"root"});let t=e;return t})(),Zp=class{parse(e){let n=new Uy(e);return new No(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ld(e.root,!0)}`,i=D2(e.queryParams),r=typeof e.fragment=="string"?`#${E2(e.fragment)}`:"";return`${n}${i}${r}`}},I2=new Zp;function Gp(t){return t.segments.map(e=>aS(e)).join("/")}function ld(t,e){if(!t.hasChildren())return Gp(t);if(e){let n=t.children[Oe]?ld(t.children[Oe],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Oe&&i.push(`${r}:${ld(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=w2(t,(i,r)=>r===Oe?[ld(t.children[Oe],!1)]:[`${r}:${ld(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Oe]!=null?`${Gp(t)}/${n[0]}`:`${Gp(t)}/(${n.join("//")})`}}function sS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $p(t){return sS(t).replace(/%3B/gi,";")}function E2(t){return encodeURI(t)}function zy(t){return sS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wp(t){return decodeURIComponent(t)}function QT(t){return Wp(t.replace(/\+/g,"%20"))}function aS(t){return`${zy(t.path)}${C2(t.parameters)}`}function C2(t){return Object.entries(t).map(([e,n])=>`;${zy(e)}=${zy(n)}`).join("")}function D2(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${$p(n)}=${$p(r)}`).join("&"):`${$p(n)}=${$p(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var x2=/^[^\/()?;#]+/;function Oy(t){let e=t.match(x2);return e?e[0]:""}var T2=/^[^\/()?;=#]+/;function S2(t){let e=t.match(T2);return e?e[0]:""}var A2=/^[^=?&#]+/;function M2(t){let e=t.match(A2);return e?e[0]:""}var R2=/^[^&#]+/;function P2(t){let e=t.match(R2);return e?e[0]:""}var Uy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new et([],{}):new et([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Oe]=new et(e,n)),i}parseSegment(){let e=Oy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new we(4009,!1);return this.capture(e),new qs(Wp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=S2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Oy(this.remaining);r&&(i=r,this.capture(i))}e[Wp(n)]=Wp(i)}parseQueryParam(e){let n=M2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let a=P2(this.remaining);a&&(i=a,this.capture(i))}let r=QT(n),o=QT(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Oy(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new we(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Oe);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Oe]:new et([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new we(4011,!1)}};function cS(t){return t.segments.length>0?new et([],{[Oe]:t}):t}function lS(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=lS(r);if(i===Oe&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new et(t.segments,e);return k2(n)}function k2(t){if(t.numberOfChildren===1&&t.children[Oe]){let e=t.children[Oe];return new et(t.segments.concat(e.segments),e.children)}return t}function zc(t){return t instanceof No}function N2(t,e,n=null,i=null){let r=uS(t);return dS(r,e,n,i)}function uS(t){let e;function n(o){let a={};for(let u of o.children){let f=n(u);a[u.outlet]=f}let c=new et(o.url,a);return o===t&&(e=c),c}let i=n(t.root),r=cS(i);return e??r}function dS(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Ly(r,r,r,n,i);let o=O2(e);if(o.toRoot())return Ly(r,r,new et([],{}),n,i);let a=L2(o,r,t),c=a.processChildren?hd(a.segmentGroup,a.index,o.commands):fS(a.segmentGroup,a.index,o.commands);return Ly(r,a.segmentGroup,c,n,i)}function Kp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function md(t){return typeof t=="object"&&t!=null&&t.outlets}function Ly(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;t===e?a=n:a=hS(t,e,n);let c=cS(lS(a));return new No(c,o,r)}function hS(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=hS(o,e,n)}),new et(t.segments,i)}var Qp=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Kp(i[0]))throw new we(4003,!1);let r=i.find(md);if(r&&r!==tS(i))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function O2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Qp(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,f])=>{c[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new Qp(n,e,i)}var Vc=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function L2(t,e,n){if(t.isAbsolute)return new Vc(e,!0,0);if(!n)return new Vc(e,!1,NaN);if(n.parent===null)return new Vc(n,!0,0);let i=Kp(t.commands[0])?0:1,r=n.segments.length-1+i;return F2(n,r,t.numberOfDoubleDots)}function F2(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new we(4005,!1);r=i.segments.length}return new Vc(i,!1,r-o)}function V2(t){return md(t[0])?t[0].outlets:{[Oe]:t}}function fS(t,e,n){if(t??=new et([],{}),t.segments.length===0&&t.hasChildren())return hd(t,e,n);let i=B2(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new et(t.segments.slice(0,i.pathIndex),{});return o.children[Oe]=new et(t.segments.slice(i.pathIndex),t.children),hd(o,0,r)}else return i.match&&r.length===0?new et(t.segments,{}):i.match&&!t.hasChildren()?$y(t,e,n):i.match?hd(t,0,r):$y(t,e,n)}function hd(t,e,n){if(n.length===0)return new et(t.segments,{});{let i=V2(n),r={};if(Object.keys(i).some(o=>o!==Oe)&&t.children[Oe]&&t.numberOfChildren===1&&t.children[Oe].segments.length===0){let o=hd(t.children[Oe],e,n);return new et(t.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=fS(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new et(t.segments,r)}}function B2(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let a=t.segments[r],c=n[i];if(md(c))break;let u=`${c}`,f=i<n.length-1?n[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!XT(u,f,a))return o;i+=2}else{if(!XT(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function $y(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(md(o)){let u=j2(o.outlets);return new et(i,u)}if(r===0&&Kp(n[0])){let u=t.segments[e];i.push(new qs(u.path,YT(n[0]))),r++;continue}let a=md(o)?o.outlets[Oe]:`${o}`,c=r<n.length-1?n[r+1]:null;a&&c&&Kp(c)?(i.push(new qs(a,YT(c))),r+=2):(i.push(new qs(a,{})),r++)}return new et(i,{})}function j2(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=$y(new et([],{}),0,i))}),e}function YT(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function XT(t,e,n){return t==n.path&&mr(e,n.parameters)}var fd="imperative",vn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(vn||{}),bi=class{constructor(e,n){this.id=e,this.url=n}},gd=class extends bi{constructor(e,n,i="imperative",r=null){super(e,n),this.type=vn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ws=class extends bi{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=vn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ri=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ri||{}),Hy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Hy||{}),Oo=class extends bi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=vn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zs=class extends bi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=vn.NavigationSkipped}},_d=class extends bi{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=vn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yp=class extends bi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qy=class extends bi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gy=class extends bi{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=vn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wy=class extends bi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zy=class extends bi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ky=class{constructor(e){this.route=e,this.type=vn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Qy=class{constructor(e){this.route=e,this.type=vn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yy=class{constructor(e){this.snapshot=e,this.type=vn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=vn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jy=class{constructor(e){this.snapshot=e,this.type=vn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eb=class{constructor(e){this.snapshot=e,this.type=vn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vd=class{},yd=class{constructor(e){this.url=e}};var tb=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new im,this.attachRef=null}},im=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new tb,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=nb(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=nb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ib(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ib(e,this._root).map(n=>n.value)}};function nb(t,e){if(t===e.value)return e;for(let n of e.children){let i=nb(t,n);if(i)return i}return null}function ib(t,e){if(t===e.value)return[e];for(let n of e.children){let i=ib(t,n);if(i.length)return i.unshift(e),i}return[]}var ii=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Jp=class extends Xp{constructor(e,n){super(e),this.snapshot=n,pb(this,e)}toString(){return this.snapshot.toString()}};function pS(t){let e=z2(t),n=new tn([new qs("",{})]),i=new tn({}),r=new tn({}),o=new tn({}),a=new tn(""),c=new Uc(n,i,o,a,r,Oe,t,e.root);return c.snapshot=e.root,new Jp(new ii(c,[]),e)}function z2(t){let e={},n={},i={},r="",o=new bd([],e,i,r,n,Oe,t,null,{});return new em("",new ii(o,[]))}var Uc=class{constructor(e,n,i,r,o,a,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ge(f=>f[Ed]))??he(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>jc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>jc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fb(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:X(X({},e.params),t.params),data:X(X({},e.data),t.data),resolve:X(X(X(X({},t.data),e.data),r?.data),t._resolvedData)}:i={params:X({},t.params),data:X({},t.data),resolve:X(X({},t.data),t._resolvedData??{})},r&&gS(r)&&(i.resolve[Ed]=r.title),i}var bd=class{get title(){return this.data?.[Ed]}constructor(e,n,i,r,o,a,c,u,f){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=jc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=jc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},em=class extends Xp{constructor(e,n){super(n),this.url=e,pb(this,n)}toString(){return mS(this._root)}};function pb(t,e){e.value._routerState=t,e.children.forEach(n=>pb(t,n))}function mS(t){let e=t.children.length>0?` { ${t.children.map(mS).join(", ")} } `:"";return`${t.value}${e}`}function Fy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,mr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),mr(e.params,n.params)||t.paramsSubject.next(n.params),g2(e.url,n.url)||t.urlSubject.next(n.url),mr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function rb(t,e){let n=mr(t.params,e.params)&&b2(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||rb(t.parent,e.parent))}function gS(t){return typeof t.title=="string"||t.title===null}var U2=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Oe,this.activateEvents=new at,this.deactivateEvents=new at,this.attachEvents=new at,this.detachEvents=new at,this.parentContexts=K(im),this.location=K(ji),this.changeDetector=K(Ui),this.environmentInjector=K(Hn),this.inputBinder=K(mb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new we(4013,!1);this._activatedRoute=i;let o=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,f=new ob(i,u,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vs]});let t=e;return t})(),ob=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Uc?this.route:e===im?this.childContexts:this.parent.get(e,n)}},mb=new se("");function $2(t,e,n){let i=wd(t,e._root,n?n._root:void 0);return new Jp(i,e)}function wd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=H2(t,e,n);return new ii(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>wd(t,c)),a}}let i=q2(e.value),r=e.children.map(o=>wd(t,o));return new ii(i,r)}}function H2(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return wd(t,i,r);return wd(t,i)})}function q2(t){return new Uc(new tn(t.url),new tn(t.params),new tn(t.queryParams),new tn(t.fragment),new tn(t.data),t.outlet,t.component,t)}var _S="ngNavigationCancelingError";function vS(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=zc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=yS(!1,ri.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function yS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[_S]=!0,n.cancellationCode=e,n}function G2(t){return bS(t)&&zc(t.url)}function bS(t){return!!t&&t[_S]}var W2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Wt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Zt],decls:1,vars:0,template:function(r,o){r&1&&je(0,"router-outlet")},dependencies:[U2],encapsulation:2});let t=e;return t})();function Z2(t,e){return t.providers&&!t._injector&&(t._injector=my(t.providers,e,`Route: ${t.path}`)),t._injector??e}function gb(t){let e=t.children&&t.children.map(gb),n=e?_t(X({},t),{children:e}):X({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Oe&&(n.component=W2),n}function gr(t){return t.outlet||Oe}function K2(t,e){let n=t.filter(i=>gr(i)===e);return n.push(...t.filter(i=>gr(i)!==e)),n}function Cd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Q2=(t,e,n,i)=>ge(r=>(new sb(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),sb=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Fy(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Fc(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Fc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Fc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Fc(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new eb(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xy(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(Fy(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Fy(c.route.value),this.activateChildRoutes(e,null,a.children)}else{let c=Cd(r.snapshot);a.attachRef=null,a.route=r,a.injector=c,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}},tm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Bc=class{constructor(e,n){this.component=e,this.route=n}};function Y2(t,e,n){let i=t._root,r=e?e._root:null;return ud(i,r,n,[i.value])}function X2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Hc(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!nD(t)?t:e.get(t):i}function ud(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fc(e);return t.children.forEach(a=>{J2(a,o[a.value.outlet],n,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>pd(c,n.getContext(a),r)),r}function J2(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=eB(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new tm(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?ud(t,e,c?c.children:null,i,r):ud(t,e,n,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Bc(c.outlet.component,a))}else a&&pd(e,c,r),r.canActivateChecks.push(new tm(i)),o.component?ud(t,null,c?c.children:null,i,r):ud(t,null,n,i,r);return r}function eB(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Gs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Gs(t.url,e.url)||!mr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rb(t,e)||!mr(t.queryParams,e.queryParams);case"paramsChange":default:return!rb(t,e)}}function pd(t,e,n){let i=Fc(t),r=t.value;Object.entries(i).forEach(([o,a])=>{r.component?e?pd(a,e.children.getContext(o),n):pd(a,null,n):pd(a,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Bc(e.outlet.component,r)):n.canDeactivateChecks.push(new Bc(null,r)):n.canDeactivateChecks.push(new Bc(null,r))}function Dd(t){return typeof t=="function"}function tB(t){return typeof t=="boolean"}function nB(t){return t&&Dd(t.canLoad)}function iB(t){return t&&Dd(t.canActivate)}function rB(t){return t&&Dd(t.canActivateChild)}function oB(t){return t&&Dd(t.canDeactivate)}function sB(t){return t&&Dd(t.canMatch)}function wS(t){return t instanceof Br||t?.name==="EmptyError"}var Hp=Symbol("INITIAL_VALUE");function $c(){return yt(t=>lc(t.map(e=>e.pipe(hi(1),ar(Hp)))).pipe(ge(e=>{for(let n of e)if(n!==!0){if(n===Hp)return Hp;if(n===!1||n instanceof No)return n}return!0}),kt(e=>e!==Hp),hi(1)))}function aB(t,e){return jt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?he(_t(X({},n),{guardsResult:!0})):cB(a,i,r,t).pipe(jt(c=>c&&tB(c)?lB(i,o,t,e):he(c)),ge(c=>_t(X({},n),{guardsResult:c})))})}function cB(t,e,n,i){return it(t).pipe(jt(r=>pB(r.component,r.route,n,e,i)),fi(r=>r!==!0,!0))}function lB(t,e,n,i){return it(e).pipe(uc(r=>Io(dB(r.route.parent,i),uB(r.route,i),fB(t,r.path,n),hB(t,r.route,n))),fi(r=>r!==!0,!0))}function uB(t,e){return t!==null&&e&&e(new Jy(t)),he(!0)}function dB(t,e){return t!==null&&e&&e(new Yy(t)),he(!0)}function hB(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return he(!0);let r=i.map(o=>kf(()=>{let a=Cd(e)??n,c=Hc(o,a),u=iB(c)?c.canActivate(e,t):$r(a,()=>c(e,t));return Lo(u).pipe(fi())}));return he(r).pipe($c())}function fB(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>X2(a)).filter(a=>a!==null).map(a=>kf(()=>{let c=a.guards.map(u=>{let f=Cd(a.node)??n,m=Hc(u,f),v=rB(m)?m.canActivateChild(i,t):$r(f,()=>m(i,t));return Lo(v).pipe(fi())});return he(c).pipe($c())}));return he(o).pipe($c())}function pB(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return he(!0);let a=o.map(c=>{let u=Cd(e)??r,f=Hc(c,u),m=oB(f)?f.canDeactivate(t,e,n,i):$r(u,()=>f(t,e,n,i));return Lo(m).pipe(fi())});return he(a).pipe($c())}function mB(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return he(!0);let o=r.map(a=>{let c=Hc(a,t),u=nB(c)?c.canLoad(e,n):$r(t,()=>c(e,n));return Lo(u)});return he(o).pipe($c(),IS(i))}function IS(t){return p_(Gt(e=>{if(zc(e))throw vS(t,e)}),ge(e=>e===!0))}function gB(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return he(!0);let o=r.map(a=>{let c=Hc(a,t),u=sB(c)?c.canMatch(e,n):$r(t,()=>c(e,n));return Lo(u)});return he(o).pipe($c(),IS(i))}var Id=class{constructor(e){this.segmentGroup=e||null}},nm=class extends Error{constructor(e){super(),this.urlTree=e}};function Lc(t){return cc(new Id(t))}function _B(t){return cc(new we(4e3,!1))}function vB(t){return cc(yS(!1,ri.GuardRejected))}var ab=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return he(i);if(r.numberOfChildren>1||!r.children[Oe])return _B(e.redirectTo);r=r.children[Oe]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new nm(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new No(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);i[r]=n[c]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),a={};return Object.entries(n.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,i,r)}),new et(o,a)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new we(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},cb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function yB(t,e,n,i,r){let o=_b(t,e,n);return o.matched?(i=Z2(e,i),gB(i,e,n,r).pipe(ge(a=>a===!0?o:X({},cb)))):he(o)}function _b(t,e,n){if(e.path==="**")return bB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?X({},cb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||m2)(n,t,e);if(!r)return X({},cb);let o={};Object.entries(r.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let a=r.consumed.length>0?X(X({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function bB(t){return{matched:!0,parameters:t.length>0?tS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function JT(t,e,n,i){return n.length>0&&EB(t,n,i)?{segmentGroup:new et(e,IB(i,new et(n,t.children))),slicedSegments:[]}:n.length===0&&CB(t,n,i)?{segmentGroup:new et(t.segments,wB(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new et(t.segments,t.children),slicedSegments:n}}function wB(t,e,n,i){let r={};for(let o of n)if(rm(t,e,o)&&!i[gr(o)]){let a=new et([],{});r[gr(o)]=a}return X(X({},i),r)}function IB(t,e){let n={};n[Oe]=e;for(let i of t)if(i.path===""&&gr(i)!==Oe){let r=new et([],{});n[gr(i)]=r}return n}function EB(t,e,n){return n.some(i=>rm(t,e,i)&&gr(i)!==Oe)}function CB(t,e,n){return n.some(i=>rm(t,e,i))}function rm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function DB(t,e,n,i){return gr(t)!==i&&(i===Oe||!rm(e,n,t))?!1:_b(e,t,n).matched}function xB(t,e,n){return e.length===0&&!t.children[n]}var lb=class{};function TB(t,e,n,i,r,o,a="emptyOnly"){return new ub(t,e,n,i,r,a,o).recognize()}var SB=31,ub=class{constructor(e,n,i,r,o,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new ab(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new we(4002,`'${e.segmentGroup}'`)}recognize(){let e=JT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(n=>{let i=new bd([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,{},Oe,this.rootComponentType,null,{}),r=new ii(i,n),o=new em("",r),a=N2(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Oe).pipe(Eo(i=>{if(i instanceof nm)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Id?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=fb(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(ge(o=>o instanceof ii?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return it(r).pipe(uc(o=>{let a=i.children[o],c=K2(n,o);return this.processSegmentGroup(e,c,a,o)}),Ts((o,a)=>(o.push(...a),o)),Co(null),I_(),jt(o=>{if(o===null)return Lc(i);let a=ES(o);return AB(a),he(a)}))}processSegment(e,n,i,r,o,a){return it(n).pipe(uc(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,o,a).pipe(Eo(u=>{if(u instanceof Id)return he(null);throw u}))),fi(c=>!!c),Eo(c=>{if(wS(c))return xB(i,r,o)?he(new lb):Lc(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,o,a,c){return DB(i,r,o,a)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,a):Lc(r):Lc(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,a){let{matched:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:m}=_b(n,r,o);if(!c)return Lc(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>SB&&(this.allowRedirects=!1));let v=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,f);return this.applyRedirects.lineralizeSegments(r,v).pipe(jt(w=>this.processSegment(e,i,n,w.concat(m),a,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let a=yB(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(yt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(yt(({routes:u})=>{let f=i._loadedInjector??e,{consumedSegments:m,remainingSegments:v,parameters:w}=c,E=new bd(m,w,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,RB(i),gr(i),i.component??i._loadedComponent??null,i,PB(i)),{segmentGroup:M,slicedSegments:k}=JT(n,m,v,u);if(k.length===0&&M.hasChildren())return this.processChildren(f,u,M).pipe(ge(q=>q===null?null:new ii(E,q)));if(u.length===0&&k.length===0)return he(new ii(E,[]));let F=gr(i)===o;return this.processSegment(f,u,M,k,F?Oe:o,!0).pipe(ge(q=>new ii(E,q instanceof ii?[q]:[])))}))):Lc(n)))}getChildConfig(e,n,i){return n.children?he({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?he({routes:n._loadedRoutes,injector:n._loadedInjector}):mB(e,n,i,this.urlSerializer).pipe(jt(r=>r?this.configLoader.loadChildren(e,n).pipe(Gt(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):vB(n))):he({routes:[],injector:e})}};function AB(t){t.sort((e,n)=>e.value.outlet===Oe?-1:n.value.outlet===Oe?1:e.value.outlet.localeCompare(n.value.outlet))}function MB(t){let e=t.value.routeConfig;return e&&e.path===""}function ES(t){let e=[],n=new Set;for(let i of t){if(!MB(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=ES(i.children);e.push(new ii(i.value,r))}return e.filter(i=>!n.has(i))}function RB(t){return t.data||{}}function PB(t){return t.resolve||{}}function kB(t,e,n,i,r,o){return jt(a=>TB(t,e,n,i,a.extractedUrl,r,o).pipe(ge(({state:c,tree:u})=>_t(X({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function NB(t,e){return jt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return he(n);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of CS(u))a.add(f);let c=0;return it(a).pipe(uc(u=>o.has(u)?OB(u,i,t,e):(u.data=fb(u,u.parent,t).resolve,he(void 0))),Gt(()=>c++),hc(1),jt(u=>c===a.size?he(n):Pn))})}function CS(t){let e=t.children.map(n=>CS(n)).flat();return[t,...e]}function OB(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!gS(r)&&(o[Ed]=r.title),LB(o,t,e,i).pipe(ge(a=>(t._resolvedData=a,t.data=fb(t,t.parent,n).resolve,null)))}function LB(t,e,n,i){let r=jy(t);if(r.length===0)return he({});let o={};return it(r).pipe(jt(a=>FB(t[a],e,n,i).pipe(fi(),Gt(c=>{o[a]=c}))),hc(1),w_(o),Eo(a=>wS(a)?Pn:cc(a)))}function FB(t,e,n,i){let r=Cd(e)??i,o=Hc(t,r),a=o.resolve?o.resolve(e,n):$r(r,()=>o(e,n));return Lo(a)}function Vy(t){return yt(e=>{let n=t(e);return n?it(n).pipe(ge(()=>e)):he(e)})}var DS=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(a=>a.outlet===Oe);return r}getResolvedTitleForRoute(i){return i.data[Ed]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>K(VB),providedIn:"root"});let t=e;return t})(),VB=(()=>{let e=class e extends DS{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(V(ZT))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vb=new se("",{providedIn:"root",factory:()=>({})}),yb=new se(""),BB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=K(wy)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return he(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Lo(i.loadComponent()).pipe(ge(xS),Gt(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Mu(()=>{this.componentLoaders.delete(i)})),o=new ic(r,()=>new Te).pipe(nc());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return he({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=jB(r,this.compiler,i,this.onLoadEndListener).pipe(Mu(()=>{this.childrenLoaders.delete(r)})),c=new ic(a,()=>new Te).pipe(nc());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jB(t,e,n,i){return Lo(t.loadChildren()).pipe(ge(xS),jt(r=>r instanceof Zu||Array.isArray(r)?he(r):it(e.compileModuleAsync(r))),ge(r=>{i&&i(t);let o,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(o=r.create(n).injector,a=o.get(yb,[],{optional:!0,self:!0}).flat()),{routes:a.map(gb),injector:o}}))}function zB(t){return t&&typeof t=="object"&&"default"in t}function xS(t){return zB(t)?t.default:t}var bb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>K(UB),providedIn:"root"});let t=e;return t})(),UB=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$B=new se("");var HB=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Te,this.transitionAbortSubject=new Te,this.configLoader=K(BB),this.environmentInjector=K(Hn),this.urlSerializer=K(hb),this.rootContexts=K(im),this.location=K($s),this.inputBindingEnabled=K(mb,{optional:!0})!==null,this.titleStrategy=K(DS),this.options=K(vb,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=K(bb),this.createViewTransition=K($B,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>he(void 0),this.rootComponentType=null;let i=o=>this.events.next(new Ky(o)),r=o=>this.events.next(new Qy(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(_t(X(X({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new tn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fd,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(kt(a=>a.id!==0),ge(a=>_t(X({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),yt(a=>{let c=!1,u=!1;return he(a).pipe(yt(f=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",ri.SupersededByNewNavigation),Pn;this.currentTransition=a,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?_t(X({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=f.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!m&&v!=="reload"){let w="";return this.events.next(new Zs(f.id,this.urlSerializer.serialize(f.rawUrl),w,Hy.IgnoredSameUrlNavigation)),f.resolve(null),Pn}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return he(f).pipe(yt(w=>{let E=this.transitions?.getValue();return this.events.next(new gd(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?Pn:Promise.resolve(w)}),kB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Gt(w=>{a.targetSnapshot=w.targetSnapshot,a.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=_t(X({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let E=new Yp(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:w,extractedUrl:E,source:M,restoredState:k,extras:F}=f,q=new gd(w,this.urlSerializer.serialize(E),M,k);this.events.next(q);let ie=pS(this.rootComponentType).snapshot;return this.currentTransition=a=_t(X({},f),{targetSnapshot:ie,urlAfterRedirects:E,extras:_t(X({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,he(a)}else{let w="";return this.events.next(new Zs(f.id,this.urlSerializer.serialize(f.extractedUrl),w,Hy.IgnoredByUrlHandlingStrategy)),f.resolve(null),Pn}}),Gt(f=>{let m=new qy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),ge(f=>(this.currentTransition=a=_t(X({},f),{guards:Y2(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),a)),aB(this.environmentInjector,f=>this.events.next(f)),Gt(f=>{if(a.guardsResult=f.guardsResult,zc(f.guardsResult))throw vS(this.urlSerializer,f.guardsResult);let m=new Gy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(m)}),kt(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",ri.GuardRejected),!1)),Vy(f=>{if(f.guards.canActivateChecks.length)return he(f).pipe(Gt(m=>{let v=new Wy(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),yt(m=>{let v=!1;return he(m).pipe(NB(this.paramsInheritanceStrategy,this.environmentInjector),Gt({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(m,"",ri.NoDataFromResolver)}}))}),Gt(m=>{let v=new Zy(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),Vy(f=>{let m=v=>{let w=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(v.routeConfig).pipe(Gt(E=>{v.component=E}),ge(()=>{})));for(let E of v.children)w.push(...m(E));return w};return lc(m(f.targetSnapshot.root)).pipe(Co(null),hi(1))}),Vy(()=>this.afterPreactivation()),yt(()=>{let{currentSnapshot:f,targetSnapshot:m}=a,v=this.createViewTransition?.(this.environmentInjector,f.root,m.root);return v?it(v).pipe(ge(()=>a)):he(a)}),ge(f=>{let m=$2(i.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=a=_t(X({},f),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,a}),Gt(()=>{this.events.next(new vd)}),Q2(this.rootContexts,i.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),hi(1),Gt({next:f=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ws(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{c=!0}}),pi(this.transitionAbortSubject.pipe(Gt(f=>{throw f}))),Mu(()=>{!c&&!u&&this.cancelNavigationTransition(a,"",ri.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),Eo(f=>{if(u=!0,bS(f))this.events.next(new Oo(a.id,this.urlSerializer.serialize(a.extractedUrl),f.message,f.cancellationCode)),G2(f)?this.events.next(new yd(f.url)):a.resolve(!1);else{this.events.next(new _d(a.id,this.urlSerializer.serialize(a.extractedUrl),f,a.targetSnapshot??void 0));try{a.resolve(i.errorHandler(f))}catch(m){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(m)}}return Pn}))}))}cancelNavigationTransition(i,r,o){let a=new Oo(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(a),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qB(t){return t!==fd}var GB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>K(WB),providedIn:"root"});let t=e;return t})(),db=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},WB=(()=>{let e=class e extends db{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ep(e)))(o||e)}})(),e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),TS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:()=>K(ZB),providedIn:"root"});let t=e;return t})(),ZB=(()=>{let e=class e extends TS{constructor(){super(...arguments),this.location=K($s),this.urlSerializer=K(hb),this.options=K(vb,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=K(bb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new No,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=pS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof gd)this.stateMemento=this.createStateMemento();else if(i instanceof Zs)this.rawUrlTree=r.initialUrl;else if(i instanceof Yp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof vd?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Oo&&(i.code===ri.GuardRejected||i.code===ri.NoDataFromResolver)?this.restoreHistory(r):i instanceof _d?this.restoreHistory(r,!0):i instanceof Ws&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let a=this.browserPageId,c=X(X({},r.extras.state),this.generateNgRouterState(r.id,a));this.location.replaceState(o,"",c)}else{let a=X(X({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===i.finalUrl&&a===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ep(e)))(o||e)}})(),e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(dd||{});function KB(t,e){t.events.pipe(kt(n=>n instanceof Ws||n instanceof Oo||n instanceof _d||n instanceof Zs),ge(n=>n instanceof Ws||n instanceof Zs?dd.COMPLETE:(n instanceof Oo?n.code===ri.Redirect||n.code===ri.SupersededByNewNavigation:!1)?dd.REDIRECTING:dd.FAILED),kt(n=>n!==dd.REDIRECTING),hi(1)).subscribe(()=>{e()})}function QB(t){throw t}var YB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},XB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},om=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=K(Lp),this.stateManager=K(TS),this.options=K(vb,{optional:!0})||{},this.pendingTasks=K(Np),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=K(HB),this.urlSerializer=K(hb),this.location=K($s),this.urlHandlingStrategy=K(bb),this._events=new Te,this.errorHandler=this.options.errorHandler||QB,this.navigated=!1,this.routeReuseStrategy=K(GB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=K(yb,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!K(mb,{optional:!0}),this.eventsSubscription=new vt,this.isNgZoneEnabled=K(_e)instanceof _e&&_e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof Oo&&r.code!==ri.Redirect&&r.code!==ri.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ws)this.navigated=!0;else if(r instanceof yd){let c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||qB(o.source)};this.scheduleNavigation(c,fd,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}ej(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let a={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let f=X({},o);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(a.state=f)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(gb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:a,fragment:c,queryParamsHandling:u,preserveFragment:f}=r,m=f?this.currentUrlTree.fragment:c,v=null;switch(u){case"merge":v=X(X({},this.currentUrlTree.queryParams),a);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=a||null}v!==null&&(v=this.removeEmptyProps(v));let w;try{let E=o?o.snapshot:this.routerState.snapshot.root;w=uS(E)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),w=this.currentUrlTree.root}return dS(w,i,v,m??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=zc(i)?i:this.parseUrl(i),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,fd,null,r)}navigate(i,r={skipLocationChange:!1}){return JB(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=X({},YB):r===!1?o=X({},XB):o=r,zc(i))return KT(this.currentUrlTree,i,o);let a=this.parseUrl(i);return KT(this.currentUrlTree,a,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,a])=>(a!=null&&(r[o]=a),r),{})}scheduleNavigation(i,r,o,a,c){if(this.disposed)return Promise.resolve(!1);let u,f,m;c?(u=c.resolve,f=c.reject,m=c.promise):m=new Promise((w,E)=>{u=w,f=E});let v=this.pendingTasks.add();return KB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:a,resolve:u,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(w=>Promise.reject(w))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new we(4008,!1)}function ej(t){return!(t instanceof vd)&&!(t instanceof yd)}var tj=new se("");function SS(t,...e){return yp([{provide:yb,multi:!0,useValue:t},[],{provide:Uc,useFactory:nj,deps:[om]},{provide:by,multi:!0,useFactory:ij},e.map(n=>n.\u0275providers)])}function nj(t){return t.routerState.root}function ij(){let t=K(un);return e=>{let n=t.get(zs);if(e!==n.components[0])return;let i=t.get(om),r=t.get(rj);t.get(oj)===1&&i.initialNavigation(),t.get(sj,null,Be.Optional)?.setUpPreloading(),t.get(tj,null,Be.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var rj=new se("",{factory:()=>new Te}),oj=new se("",{providedIn:"root",factory:()=>1});var sj=new se("");var AS=[];var cj="firebase",lj="10.12.2";wo(cj,lj,"app");var xd=new Ur("ANGULARFIRE2_VERSION");var uj=(t,e)=>{let n=e?[e]:jE(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Ks=class{constructor(){return uj(dj)}},dj="app-check";function wb(){}var sm=class{zone;delegate;constructor(e,n=y_){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,n,i)}},Ib=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",wb,{},wb,wb)),n.pipe(Gt({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},am=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new sm(Zone.current)),this.insideAngular=n.run(()=>new sm(Zone.current,or)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(V(_e))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function hj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function qn(t){return fj(hj())(t)}function fj(t){return function(n){return n=n.lift(new Ib(t.ngZone)),n.pipe(ki(t.outsideAngular),di(t.insideAngular))}}var pj="firebase",mj="10.12.2";Jn.registerVersion(pj,mj,"app-compat");var gj=["ngOnDestroy"],PS=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(gj.indexOf(o)>-1)return()=>{};let a=e.toPromise().then(c=>{let u=c?.[o];return typeof u=="function"?u.bind(c):u?.then?u.then(f=>n.run(()=>f)):n.run(()=>u)});return new Proxy(()=>{},{get:(c,u)=>a[u],apply:(c,u,f)=>a.then(m=>{let v=m?.(...f);return i?.spy?.apply&&i.spy.apply(o,f,v),v})})})});var cm=class{constructor(e){return e}},qc=new se("angularfire2.app.options"),Gc=new se("angularfire2.app.name");function Td(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let a=Jn.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>Jn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(a.options)){let c=!!module.hot;_j("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new cm(a)}var _j=(t,...e)=>{Iy()&&typeof console<"u"&&console[t](...e)},vj={provide:cm,useFactory:Td,deps:[qc,_e,[new vp,Gc]]},kS=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:qc,useValue:n},{provide:Gc,useValue:i}]}}constructor(n){Jn.registerVersion("angularfire",xd.full,"core"),Jn.registerVersion("angularfire",xd.full,"app-compat"),Jn.registerVersion("angular",bT.full,n.toString())}static \u0275fac=function(i){return new(i||t)(V(On))};static \u0275mod=ot({type:t});static \u0275inj=rt({providers:[vj]})}return t})();function lm(t,e,n,i,r){let[,o,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===t)||[];if(o)return yj(r,a)||(RS("error",`${e} was already initialized on the ${n} Firebase App with different settings.${bj?" You may need to reload as Firebase is not HMR aware.":""}`),RS("warn",{is:r,was:a})),o;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([t,c,r]),c}}function yj(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var bj=typeof module<"u"&&!!module.hot,RS=(t,...e)=>{Iy()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var wj={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},NS={providers:[SS(AS),Lv(kS.initializeApp(wj))]};var ct=Yk(LS());var Cb;try{Cb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Cb=!1}var Ft=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?VT(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Cb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(V(On))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Sd;function Ij(){if(Sd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sd=!0}))}finally{Sd=Sd||!1}return Sd}function Wc(t){return Ij()?t:!!t.capture}var Qs;function FS(){if(Qs==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Qs=!1,Qs;if("scrollBehavior"in document.documentElement.style)Qs=!0;else{let t=Element.prototype.scrollTo;t?Qs=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Qs=!1}}return Qs}var Eb;function Ej(){if(Eb==null){let t=typeof document<"u"?document.head:null;Eb=!!(t&&(t.createShadowRoot||t.attachShadow))}return Eb}function VS(t){if(Ej()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function wi(t){return t.composedPath?t.composedPath()[0]:t.target}function Ad(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Zc(t){return Array.isArray(t)?t:[t]}function zt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Kr(t){return t instanceof It?t.nativeElement:t}var BS=new Set,Xs,Cj=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xj}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Dj(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(V(Ft),V(ed,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Dj(t,e){if(!BS.has(t))try{Xs||(Xs=document.createElement("style"),e&&Xs.setAttribute("nonce",e),Xs.setAttribute("type","text/css"),document.head.appendChild(Xs)),Xs.sheet&&(Xs.sheet.insertRule(`@media ${t} {body{ }}`,0),BS.add(t))}catch(n){console.error(n)}}function xj(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var dm=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Te}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return jS(Zc(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=jS(Zc(i)).map(c=>this._registerQuery(c).observable),a=lc(o);return a=Io(a.pipe(hi(1)),a.pipe(Pu(1),Of(0))),a.pipe(ge(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:m})=>{u.matches=u.matches||f,u.breakpoints[m]=f}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),a={observable:new Ae(c=>{let u=f=>this._zone.run(()=>c.next(f));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(ar(r),ge(({matches:c})=>({query:i,matches:c})),pi(this._destroySubject)),mql:r};return this._queries.set(i,a),a}};e.\u0275fac=function(r){return new(r||e)(V(Cj),V(_e))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jS(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var zS={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function xb(t){return t.buttons===0||t.detail===0}function Tb(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Sj=new se("cdk-input-modality-detector-options"),Aj={ignoreKeys:[18,17,224,91,16]},HS=650,Kc=Wc({passive:!0,capture:!0}),Mj=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,a){this._platform=i,this._mostRecentTarget=null,this._modality=new tn(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(u=>u===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=wi(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<HS||(this._modality.next(xb(c)?"keyboard":"mouse"),this._mostRecentTarget=wi(c))},this._onTouchstart=c=>{if(Tb(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=wi(c)},this._options=X(X({},Aj),a),this.modalityDetected=this._modality.pipe(Pu(1)),this.modalityChanged=this.modalityDetected.pipe(dc()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Kc),o.addEventListener("mousedown",this._onMousedown,Kc),o.addEventListener("touchstart",this._onTouchstart,Kc)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Kc),document.removeEventListener("mousedown",this._onMousedown,Kc),document.removeEventListener("touchstart",this._onTouchstart,Kc))}};e.\u0275fac=function(r){return new(r||e)(V(Ft),V(_e),V(Ue),V(Sj,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rj=new se("liveAnnouncerElement",{providedIn:"root",factory:Pj});function Pj(){return null}var kj=new se("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Nj=0,qS=(()=>{let e=class e{constructor(i,r,o,a){this._ngZone=r,this._defaultOptions=a,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,a,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[a,c]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=o&&o.politeness?o.politeness:"polite"),c==null&&o&&(c=o.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(u=>this._currentResolve=u)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${Nj++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}};e.\u0275fac=function(r){return new(r||e)(V(Rj,8),V(_e),V(Ue),V(kj,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fm=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(fm||{}),Oj=new se("cdk-focus-monitor-default-options"),hm=Wc({passive:!0,capture:!0}),GS=(()=>{let e=class e{constructor(i,r,o,a,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Te,this._rootNodeFocusAndBlurListener=u=>{let f=wi(u);for(let m=f;m;m=m.parentElement)u.type==="focus"?this._onFocus(u,m):this._onBlur(u,m)},this._document=a,this._detectionMode=c?.detectionMode||fm.IMMEDIATE}monitor(i,r=!1){let o=Kr(i);if(!this._platform.isBrowser||o.nodeType!==1)return he();let a=VS(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;let u={checkChildren:r,subject:new Te,rootNode:a};return this._elementInfo.set(o,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(i){let r=Kr(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let a=Kr(i),c=this._getDocument().activeElement;a===c?this._getClosestElementsInfo(a).forEach(([u,f])=>this._originChanged(u,r,f)):(this._setOrigin(r),typeof a.focus=="function"&&a.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===fm.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===fm.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?HS:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),a=wi(i);!o||!o.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,hm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,hm)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(pi(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,a)=>{(a===i||o.checkChildren&&a.contains(i))&&r.push([a,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let a=i.labels;if(a){for(let c=0;c<a.length;c++)if(a[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(V(_e),V(Ft),V(Mj),V(Ue,8),V(Oj,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Js=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Js||{}),US="cdk-high-contrast-black-on-white",$S="cdk-high-contrast-white-on-black",Db="cdk-high-contrast-active",WS=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=K(dm).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Js.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,a=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Js.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Js.BLACK_ON_WHITE}return Js.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Db,US,$S),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Js.BLACK_ON_WHITE?i.add(Db,US):r===Js.WHITE_ON_BLACK&&i.add(Db,$S)}}};e.\u0275fac=function(r){return new(r||e)(V(Ft),V(Ue))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Lj=new se("cdk-dir-doc",{providedIn:"root",factory:Fj});function Fj(){return K(Ue)}var Vj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Bj(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Vj.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var KS=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new at,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=Bj(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(V(Lj,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Fo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})();function Uj(){return!0}var $j=new se("mat-sanity-checks",{providedIn:"root",factory:Uj}),_r=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Ad()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(V(WS),V($j,8),V(Ue))},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Fo,Fo]});let t=e;return t})();var Ii=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Ii||{}),Rb=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ii.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},QS=Wc({passive:!0,capture:!0}),Pb=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=wi(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let a=o.get(i);a?a.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,QS)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,QS)))}},YS={enterDuration:225,exitDuration:150},Hj=800,XS=Wc({passive:!0,capture:!0}),JS=["mousedown","touchstart"],eA=["mouseup","mouseleave","touchend","touchcancel"],Md=class Md{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Kr(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=X(X({},YS),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let a=i.radius||qj(e,n,r),c=e-r.left,u=n-r.top,f=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${c-a}px`,m.style.top=`${u-a}px`,m.style.height=`${a*2}px`,m.style.width=`${a*2}px`,i.color!=null&&(m.style.backgroundColor=i.color),m.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(m);let v=window.getComputedStyle(m),w=v.transitionProperty,E=v.transitionDuration,M=w==="none"||E==="0s"||E==="0s, 0s"||r.width===0&&r.height===0,k=new Rb(this,m,i,M);m.style.transform="scale3d(1, 1, 1)",k.state=Ii.FADING_IN,i.persistent||(this._mostRecentTransientRipple=k);let F=null;return!M&&(f||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let q=()=>this._finishRippleTransition(k),ie=()=>this._destroyRipple(k);m.addEventListener("transitionend",q),m.addEventListener("transitioncancel",ie),F={onTransitionEnd:q,onTransitionCancel:ie}}),this._activeRipples.set(k,F),(M||!f)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(e.state===Ii.FADING_OUT||e.state===Ii.HIDDEN)return;let n=e.element,i=X(X({},YS),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Ii.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Kr(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,JS.forEach(i=>{Md._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{eA.forEach(n=>{this._triggerElement.addEventListener(n,this,XS)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ii.FADING_IN?this._startFadeOutTransition(e):e.state===Ii.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Ii.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ii.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=xb(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Hj;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Tb(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Ii.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ii.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(JS.forEach(n=>Md._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(eA.forEach(n=>e.removeEventListener(n,this,XS)),this._pointerUpEventsRegistered=!1))}};Md._eventManager=new Pb;var kb=Md;function qj(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var rA=new se("mat-ripple-global-options"),Gj=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,a,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new kb(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:X(X(X({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,X(X({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,X(X({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(ke(It),ke(_e),ke(Ft),ke(rA,8),ke(js,8))},e.\u0275dir=ln({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&ko("mat-ripple-unbounded",o.unbounded)},inputs:{color:[ht.None,"matRippleColor","color"],unbounded:[ht.None,"matRippleUnbounded","unbounded"],centered:[ht.None,"matRippleCentered","centered"],radius:[ht.None,"matRippleRadius","radius"],animation:[ht.None,"matRippleAnimation","animation"],disabled:[ht.None,"matRippleDisabled","disabled"],trigger:[ht.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),oA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[_r,_r]});let t=e;return t})();var tA={capture:!0},nA=["focus","mousedown","mouseenter","touchstart"],Ab="mat-ripple-loader-uninitialized",Mb="mat-ripple-loader-class-name",iA="mat-ripple-loader-centered",pm="mat-ripple-loader-disabled",sA=(()=>{let e=class e{constructor(){this._document=K(Ue,{optional:!0}),this._animationMode=K(js,{optional:!0}),this._globalRippleOptions=K(rA,{optional:!0}),this._platform=K(Ft),this._ngZone=K(_e),this._hosts=new Map,this._onInteraction=i=>{let r=wi(i);if(r instanceof HTMLElement){let o=r.closest(`[${Ab}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}},this._ngZone.runOutsideAngular(()=>{for(let i of nA)this._document?.addEventListener(i,this._onInteraction,tA)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of nA)this._document?.removeEventListener(r,this._onInteraction,tA)}configureRipple(i,r){i.setAttribute(Ab,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute(Mb))&&i.setAttribute(Mb,r.className||""),r.centered&&i.setAttribute(iA,""),r.disabled&&i.setAttribute(pm,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(pm,""):i.removeAttribute(pm)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(Mb)),i.append(o);let a=new Gj(new It(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=i,a.centered=i.hasAttribute(iA),a.disabled=i.hasAttribute(pm),this.attachRipple(i,a),a}attachRipple(i,r){i.removeAttribute(Ab),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Wj=["mat-button",""],Zj=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Kj=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Qj=new se("MAT_BUTTON_CONFIG");var Yj=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Xj=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,a){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=a,this._focusMonitor=K(GS),this._rippleLoader=K(sA),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=K(Qj,{optional:!0}),u=i.nativeElement,f=u.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:m,mdcClasses:v}of Yj)u.hasAttribute(m)&&f.add(...v)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){ay()},e.\u0275dir=ln({type:e,inputs:{color:"color",disableRipple:[ht.HasDecoratorInputTransform,"disableRipple","disableRipple",pr],disabled:[ht.HasDecoratorInputTransform,"disabled","disabled",pr],ariaDisabled:[ht.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",pr],disabledInteractive:[ht.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",pr]},features:[Gr]});let t=e;return t})();var aA=(()=>{let e=class e extends Xj{constructor(i,r,o,a){super(i,r,o,a)}};e.\u0275fac=function(r){return new(r||e)(ke(It),ke(Ft),ke(_e),ke(js,8))},e.\u0275cmp=Wt({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Zr("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),gy(o.color?"mat-"+o.color:""),ko("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Po,Zt],attrs:Wj,ngContentSelectors:Kj,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(Op(Zj),je(0,"span",0),Rc(1),Y(2,"span",1),Rc(3,1),te(),Rc(4,2),je(5,"span",2)(6,"span",3)),r&2&&ko("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var cA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[_r,oA,_r]});let t=e;return t})();var Qc=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Qc||{});function lA(t,e){return{type:Qc.Trigger,name:t,definitions:e,options:{}}}function Nb(t,e=null){return{type:Qc.Animate,styles:e,timings:t}}function mm(t){return{type:Qc.Style,styles:t,offset:null}}function Ob(t,e,n){return{type:Qc.State,name:t,styles:e,options:n}}function Lb(t,e,n=null){return{type:Qc.Transition,expr:t,animation:e,options:n}}var Rd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Yc=class extends Rd{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Xc=class extends Rd{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Fb=class extends Rd{constructor(e){super(),this.element=e instanceof It?e.nativeElement:e}},Jc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Yc)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Xc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Fb)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var gm=class extends Jc{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");c.parentNode.insertBefore(u,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||un.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Vb=(()=>{let e=class e extends Jc{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new at,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");a.setAttachedHost(this),c.parentNode.insertBefore(u,c),this._getRootNode().appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,a=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(a,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(ke(Ro),ke(ji),ke(Ue))},e.\u0275dir=ln({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[ht.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Po]});let t=e;return t})();var _m=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})();var Jj=20,dA=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Te,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=Jj){return this._platform.isBrowser?new Ae(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(Nf(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):he()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(kt(a=>!a||o.indexOf(a)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,a)=>{this._scrollableContainsElement(a,i)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Kr(r),a=i.getElementRef().nativeElement;do if(o==a)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Su(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(V(_e),V(Ft),V(Ue,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ez=20,Bb=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new Te,this._changeListener=a=>{this._change.next(a)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,a=o.getBoundingClientRect(),c=-a.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,u=-a.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:c,left:u}}change(i=ez){return i>0?this._change.pipe(Nf(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(V(Ft),V(_e),V(Ue,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({});let t=e;return t})(),jb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[Fo,uA,Fo,uA]});let t=e;return t})();var hA=FS(),zb=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=zt(-this._previousScrollPosition.left),e.style.top=zt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),hA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),hA&&(i.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var Ub=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(kt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},vm=class{enable(){}disable(){}attach(){}};function $b(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,a=t.left>n.right;return i||r||o||a})}function fA(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,a=t.right>n.right;return i||r||o||a})}var Hb=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();$b(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},nz=(()=>{let e=class e{constructor(i,r,o,a){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new vm,this.close=c=>new Ub(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new zb(this._viewportRuler,this._document),this.reposition=c=>new Hb(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}};e.\u0275fac=function(r){return new(r||e)(V(dA),V(Bb),V(_e),V(Ue))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pd=class{constructor(e){if(this.scrollStrategy=new vm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var qb=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var vA=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(V(Ue))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iz=(()=>{let e=class e extends vA{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){let u=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(_e,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rz=(()=>{let e=class e extends vA{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=wi(a)},this._clickListener=a=>{let c=wi(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let f=this._attachedOverlays.slice();for(let m=f.length-1;m>-1;m--){let v=f[m];if(v._outsidePointerEvents.observers.length<1||!v.hasAttached())continue;if(v.overlayElement.contains(c)||v.overlayElement.contains(u))break;let w=v._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>w.next(a)):w.next(a)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(Ft),V(_e,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yA=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Ad()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let a=0;a<o.length;a++)o[a].remove()}let r=this._document.createElement("div");r.classList.add(i),Ad()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(V(Ue),V(Ft))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gb=class{constructor(e,n,i,r,o,a,c,u,f,m=!1,v){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=c,this._location=u,this._outsideClickDispatcher=f,this._animationsDisabled=m,this._injector=v,this._backdropElement=null,this._backdropClick=new Te,this._attachments=new Te,this._detachments=new Te,this._locationChanges=vt.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._backdropTransitionendHandler=w=>{this._disposeBackdrop(w.target)},this._keydownEvents=new Te,this._outsidePointerEvents=new Te,this._renders=new Te,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=od(()=>fy(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),id(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=X(X({},this._config),e),this._updateElementSize()}setDirection(e){this._config=_t(X({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=zt(this._config.width),e.height=zt(this._config.height),e.minWidth=zt(this._config.minWidth),e.minHeight=zt(this._config.minHeight),e.maxWidth=zt(this._config.maxWidth),e.maxHeight=zt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=Zc(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(pi(Au(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},pA="cdk-overlay-connected-position-bounding-box",oz=/([A-Za-z%]+)$/,Wb=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Te,this._resizeSubscription=vt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(pA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],a;for(let c of this._preferredPositions){let u=this._getOriginPoint(e,r,c),f=this._getOverlayPoint(u,n,c),m=this._getOverlayFit(f,n,i,c);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,u);return}if(this._canFitWithFlexibleDimensions(m,f,i)){o.push({position:c,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,c)});continue}(!a||a.overlayFit.visibleArea<m.visibleArea)&&(a={overlayFit:m,overlayPoint:f,originPoint:u,position:c,overlayRect:n})}if(o.length){let c=null,u=-1;for(let f of o){let m=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);m>u&&(u=m,c=f)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&ea(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let a=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?a:c}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=gA(n),{x:a,y:c}=e,u=this._getOffset(r,"x"),f=this._getOffset(r,"y");u&&(a+=u),f&&(c+=f);let m=0-a,v=a+o.width-i.width,w=0-c,E=c+o.height-i.height,M=this._subtractOverflows(o.width,m,v),k=this._subtractOverflows(o.height,w,E),F=M*k;return{visibleArea:F,isCompletelyWithinViewport:o.width*o.height===F,fitsInViewportVertically:k===o.height,fitsInViewportHorizontally:M==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,a=mA(this._overlayRef.getConfig().minHeight),c=mA(this._overlayRef.getConfig().minWidth),u=e.fitsInViewportVertically||a!=null&&a<=r,f=e.fitsInViewportHorizontally||c!=null&&c<=o;return u&&f}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=gA(n),o=this._viewportRect,a=Math.max(e.x+r.width-o.width,0),c=Math.max(e.y+r.height-o.height,0),u=Math.max(o.top-i.top-e.y,0),f=Math.max(o.left-i.left-e.x,0),m=0,v=0;return r.width<=o.width?m=f||-a:m=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?v=u||-c:v=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:m,y:v},{x:e.x+m,y:e.y+v}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!sz(this._lastScrollVisibility,i)){let r=new qb(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,a,c;if(n.overlayY==="top")a=e.y,o=i.height-a+this._viewportMargin;else if(n.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,o=i.height-c+this._viewportMargin;else{let E=Math.min(i.bottom-e.y+i.top,e.y),M=this._lastBoundingBoxSize.height;o=E*2,a=e.y-E,o>M&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-M/2)}let u=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,f=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,m,v,w;if(f)w=i.width-e.x+this._viewportMargin*2,m=e.x-this._viewportMargin;else if(u)v=e.x,m=i.right-e.x;else{let E=Math.min(i.right-e.x+i.left,e.x),M=this._lastBoundingBoxSize.width;m=E*2,v=e.x-E,m>M&&!this._isInitialRender&&!this._growAfterOpen&&(v=e.x-M/2)}return{top:a,left:v,bottom:c,right:w,width:m,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=zt(i.height),r.top=zt(i.top),r.bottom=zt(i.bottom),r.width=zt(i.width),r.left=zt(i.left),r.right=zt(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=zt(o)),a&&(r.maxWidth=zt(a))}this._lastBoundingBoxSize=i,ea(this._boundingBox.style,r)}_resetBoundingBoxStyles(){ea(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){ea(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let m=this._viewportRuler.getViewportScrollPosition();ea(i,this._getExactOverlayY(n,e,m)),ea(i,this._getExactOverlayX(n,e,m))}else i.position="static";let c="",u=this._getOffset(n,"x"),f=this._getOffset(n,"y");u&&(c+=`translateX(${u}px) `),f&&(c+=`translateY(${f}px)`),i.transform=c.trim(),a.maxHeight&&(r?i.maxHeight=zt(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=zt(a.maxWidth):o&&(i.maxWidth="")),ea(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(o.y+this._overlayRect.height)}px`}else r.top=zt(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let a;if(this._isRtl()?a=e.overlayX==="end"?"left":"right":a=e.overlayX==="end"?"right":"left",a==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(o.x+this._overlayRect.width)}px`}else r.left=zt(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:fA(e,i),isOriginOutsideView:$b(e,i),isOverlayClipped:fA(n,i),isOverlayOutsideView:$b(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Zc(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof It)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function ea(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function mA(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(oz);return!n||n==="px"?parseFloat(e):null}return t||null}function gA(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function sz(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var _A="cdk-global-overlay-wrapper",Zb=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(_A),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:c}=i,u=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),f=(o==="100%"||o==="100vh")&&(!c||c==="100%"||c==="100vh"),m=this._xPosition,v=this._xOffset,w=this._overlayRef.getConfig().direction==="rtl",E="",M="",k="";u?k="flex-start":m==="center"?(k="center",w?M=v:E=v):w?m==="left"||m==="end"?(k="flex-end",E=v):(m==="right"||m==="start")&&(k="flex-start",M=v):m==="left"||m==="start"?(k="flex-start",E=v):(m==="right"||m==="end")&&(k="flex-end",M=v),e.position=this._cssPosition,e.marginLeft=u?"0":E,e.marginTop=f?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":M,n.justifyContent=k,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(_A),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},az=(()=>{let e=class e{constructor(i,r,o,a){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=a}global(){return new Zb}flexibleConnectedTo(i){return new Wb(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(V(Bb),V(Ue),V(Ft),V(yA))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cz=0,kd=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m,v,w,E,M){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=u,this._ngZone=f,this._document=m,this._directionality=v,this._location=w,this._outsideClickDispatcher=E,this._animationsModuleType=M}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),a=this._createPortalOutlet(o),c=new Pd(i);return c.direction=c.direction||this._directionality.value,new Gb(a,r,o,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Hn))}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${cz++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(zs)),new gm(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(V(nz),V(yA),V(Ro),V(az),V(iz),V(un),V(_e),V(Ue),V(KS),V($s),V(rz),V(js,8))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var lz=new se("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(kd);return()=>t.scrollStrategies.reposition()}});function uz(t){return()=>t.scrollStrategies.reposition()}var dz={provide:lz,deps:[kd],useFactory:uz},bA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({providers:[kd,dz],imports:[Fo,_m,jb,jb]});let t=e;return t})();function fz(t,e){if(t&1){let n=zi();Y(0,"div",1)(1,"button",2),ft("click",function(){vi(n);let r=Je();return yi(r.action())}),ve(2),te()()}if(t&2){let n=Je();de(2),Lt(" ",n.data.action," ")}}var pz=["label"];function mz(t,e){}var gz=Math.pow(2,31)-1,Nd=class{constructor(e,n){this._overlayRef=n,this._afterDismissed=new Te,this._afterOpened=new Te,this._onAction=new Te,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,gz))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},wA=new se("MatSnackBarData"),el=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},_z=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let t=e;return t})(),vz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let t=e;return t})(),yz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let t=e;return t})(),IA=(()=>{let e=class e{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};e.\u0275fac=function(r){return new(r||e)(ke(Nd),ke(wA))},e.\u0275cmp=Wt({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Zt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(Y(0,"div",0),ve(1),te(),Ot(2,fz,3,1,"div",1)),r&2&&(de(),Lt(" ",o.data.message,`
`),de(),_n(2,o.hasAction?2:-1))},dependencies:[aA,_z,vz,yz],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let t=e;return t})(),bz={snackBarState:lA("state",[Ob("void, hidden",mm({transform:"scale(0.8)",opacity:0})),Ob("visible",mm({transform:"scale(1)",opacity:1})),Lb("* => visible",Nb("150ms cubic-bezier(0, 0, 0.2, 1)")),Lb("* => void, * => hidden",Nb("75ms cubic-bezier(0.4, 0.0, 1, 1)",mm({opacity:0})))])},wz=0,Iz=(()=>{let e=class e extends Jc{constructor(i,r,o,a,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=c,this._document=K(Ue),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Te,this._onExit=new Te,this._onEnter=new Te,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${wz++}`,this.attachDomPortal=u=>{this._assertNotAttached();let f=this._portalOutlet.attachDomPortal(u);return this._afterPortalAttached(),f},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:o}=i;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,a="mdc-snackbar__label";o.classList.toggle(a,!o.querySelector(`.${a}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");this._trackedModals.add(a),c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?i.setAttribute("aria-owns",o):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};e.\u0275fac=function(r){return new(r||e)(ke(_e),ke(It),ke(Ui),ke(Ft),ke(el))},e.\u0275cmp=Wt({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(rd(Vb,7),rd(pz,7)),r&2){let a;Pc(a=kc())&&(o._portalOutlet=a.first),Pc(a=kc())&&(o._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&vy("@state.done",function(c){return o.onAnimationEnd(c)}),r&2&&_y("@state",o._animationState)},standalone:!0,features:[Po,Zt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(Y(0,"div",1)(1,"div",2,0)(3,"div",3),Ot(4,mz,0,0,"ng-template",4),te(),je(5,"div"),te()()),r&2&&(de(5),Zr("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[Vb],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[bz.snackBarState]}});let t=e;return t})();function Ez(){return new el}var Cz=new se("mat-snack-bar-default-options",{providedIn:"root",factory:Ez}),Dz=(()=>{let e=class e{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,o,a,c,u){this._overlay=i,this._live=r,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=c,this._defaultConfig=u,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=IA,this.snackBarContainerComponent=Iz,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",o){let a=X(X({},this._defaultConfig),o);return a.data={message:i,action:r},a.announcementMessage===i&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,a=un.create({parent:o||this._injector,providers:[{provide:el,useValue:r}]}),c=new Yc(this.snackBarContainerComponent,r.viewContainerRef,a),u=i.attach(c);return u.instance.snackBarConfig=r,u.instance}_attach(i,r){let o=X(X(X({},new el),this._defaultConfig),r),a=this._createOverlay(o),c=this._attachSnackBarContainer(a,o),u=new Nd(c,a);if(i instanceof Vi){let f=new Xc(i,null,{$implicit:o.data,snackBarRef:u});u.instance=c.attachTemplatePortal(f)}else{let f=this._createInjector(o,u),m=new Yc(i,void 0,f),v=c.attachComponentPortal(m);u.instance=v.instance}return this._breakpointObserver.observe(zS.HandsetPortrait).pipe(pi(a.detachments())).subscribe(f=>{a.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),o.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(u,o),this._openedSnackBarRef=u,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new Pd;r.direction=i.direction;let o=this._overlay.position().global(),a=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!a||i.horizontalPosition==="end"&&a,u=!c&&i.horizontalPosition!=="center";return c?o.left("0"):u?o.right("0"):o.centerHorizontally(),i.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(i,r){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector;return un.create({parent:o||this._injector,providers:[{provide:Nd,useValue:r},{provide:wA,useValue:i.data}]})}};e.\u0275fac=function(r){return new(r||e)(V(kd),V(qS),V(un),V(dm),V(e,12),V(Cz))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var EA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({providers:[Dz],imports:[bA,_m,cA,_r,IA,_r]});let t=e;return t})();var Sz=new Map,Az={activated:!1,tokenObservers:[]},Mz={initialized:!1,enabled:!1};function $i(t){return Sz.get(t)||Object.assign({},Az)}function SA(){return Mz}var Rz="https://content-firebaseappcheck.googleapis.com/v1";var Pz="exchangeDebugToken",CA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},rY=24*60*60*1e3;var Qb=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return U(this,null,function*(){this.stop();try{this.pending=new t_,this.pending.promise.catch(n=>{}),yield kz(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new t_,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function kz(t){return new Promise(e=>{setTimeout(e,t)})}var Nz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Vo=new VE("appCheck","AppCheck",Nz);function AA(t){if(!$i(t).activated)throw Vo.create("use-before-activation",{appName:t.name})}function MA(i,r){return U(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let E=yield a.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(E){throw Vo.create("fetch-network-error",{originalErrorMessage:E?.message})}if(u.status!==200)throw Vo.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(E){throw Vo.create("fetch-parse-error",{originalErrorMessage:E?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Vo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let v=Number(m[1])*1e3,w=Date.now();return{token:f.token,expireTimeMillis:w+v,issuedAtTimeMillis:w}})}function RA(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${Rz}/projects/${n}/apps/${i}:${Pz}?key=${r}`,body:{debug_token:e}}}var Oz="firebase-app-check-database",Lz=1,Yb="firebase-app-check-store";var ym=null;function Fz(){return ym||(ym=new Promise((t,e)=>{try{let n=indexedDB.open(Oz,Lz);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Vo.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Yb,{keyPath:"compositeKey"})}}}catch(n){e(Vo.create("storage-open",{originalErrorMessage:n?.message}))}}),ym)}function Vz(t,e){return Bz(jz(t),e)}function Bz(t,e){return U(this,null,function*(){let i=(yield Fz()).transaction(Yb,"readwrite"),o=i.objectStore(Yb).put({compositeKey:t,value:e});return new Promise((a,c)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;c(Vo.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function jz(t){return`${t.options.appId}-${t.name}`}var Xb=new uf("@firebase/app-check");function Kb(t,e){return lf()?Vz(t,e).catch(n=>{Xb.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function PA(){return SA().enabled}function kA(){return U(this,null,function*(){let t=SA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var zz={error:"UNKNOWN_ERROR"};function Uz(t){return OE.encodeString(JSON.stringify(t),!1)}function Jb(t,e=!1){return U(this,null,function*(){let n=t.app;AA(n);let i=$i(n),r=i.token,o;if(r&&!Od(r)&&(i.token=void 0,r=void 0),!r){let u=yield i.cachedTokenPromise;u&&(Od(u)?r=u:yield Kb(n,void 0))}if(!e&&r&&Od(r))return{token:r.token};let a=!1;if(PA()){i.exchangeTokenPromise||(i.exchangeTokenPromise=MA(RA(n,yield kA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield Kb(n,u),i.token=u,{token:u.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),r=yield $i(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Xb.warn(u.message):Xb.error(u),o=u}let c;return r?o?Od(r)?c={token:r.token,internalError:o}:c=xA(o):(c={token:r.token},i.token=r,yield Kb(n,r)):c=xA(o),a&&Gz(n,c),c})}function $z(t){return U(this,null,function*(){let e=t.app;AA(e);let{provider:n}=$i(e);if(PA()){let i=yield kA(),{token:r}=yield MA(RA(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function Hz(t,e,n,i){let{app:r}=t,o=$i(r),a={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&Od(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),DA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>DA(t))}function NA(t,e){let n=$i(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function DA(t){let{app:e}=t,n=$i(e),i=n.tokenRefresher;i||(i=qz(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function qz(t){let{app:e}=t;return new Qb(()=>U(this,null,function*(){let n=$i(e),i;if(n.token?i=yield Jb(t,!0):i=yield Jb(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=$i(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},CA.RETRIAL_MIN_WAIT,CA.RETRIAL_MAX_WAIT)}function Gz(t,e){let n=$i(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Od(t){return t.expireTimeMillis-Date.now()>0}function xA(t){return{token:Uz(zz),error:t}}var e0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=$i(this.app);for(let n of e)NA(this.app,n.next);return Promise.resolve()}};function Wz(t,e){return new e0(t,e)}function Zz(t){return{getToken:e=>Jb(t,e),getLimitedUseToken:()=>$z(t),addTokenListener:e=>Hz(t,"INTERNAL",e),removeTokenListener:e=>NA(t.app,e)}}var Kz="@firebase/app-check",Qz="0.8.4";var Yz="app-check",TA="app-check-internal";function Xz(){Eu(new Es(Yz,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Wz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(TA).initialize()})),Eu(new Es(TA,t=>{let e=t.getProvider("app-check").getImmediate();return Zz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),wo(Kz,Qz)}Xz();var Jz=["localhost","0.0.0.0","127.0.0.1"],gY=typeof window<"u"&&Jz.includes(window.location.hostname);var t0=new se("angularfire2.auth.use-emulator"),n0=new se("angularfire2.auth.settings"),i0=new se("angularfire2.auth.tenant-id"),r0=new se("angularfire2.auth.langugage-code"),o0=new se("angularfire2.auth.use-device-language"),s0=new se("angularfire.auth.persistence"),a0=(t,e,n,i,r,o,a,c)=>lm(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),i&&(u.tenantId=i),u.languageCode=r,o&&u.useDeviceLanguage(),a)for(let[f,m]of Object.entries(a))u.settings[f]=m;return c&&u.setPersistence(c),u},[n,i,r,o,a,c]),bm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,a,c,u,f,m,v,w,E){let M=new Te,k=he(void 0).pipe(di(a.outsideAngular),yt(()=>o.runOutsideAngular(()=>import("./chunk-PY5DTK2U.js"))),ge(()=>Td(n,o,i)),ge(F=>a0(F,o,c,f,m,v,u,w)),Ru({bufferSize:1,refCount:!1}));if(Hs(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=he(null);else{k.pipe(fi()).subscribe();let F=k.pipe(yt(Z=>Z.getRedirectResult().then(ae=>ae,()=>null)),qn,Ru({bufferSize:1,refCount:!1})),q=k.pipe(yt(Z=>new Ae(ae=>({unsubscribe:o.runOutsideAngular(()=>Z.onAuthStateChanged(pe=>ae.next(pe),pe=>ae.error(pe),()=>ae.complete()))})))),ie=k.pipe(yt(Z=>new Ae(ae=>({unsubscribe:o.runOutsideAngular(()=>Z.onIdTokenChanged(pe=>ae.next(pe),pe=>ae.error(pe),()=>ae.complete()))}))));this.authState=F.pipe(Ff(q),ki(a.outsideAngular),di(a.insideAngular)),this.user=F.pipe(Ff(ie),ki(a.outsideAngular),di(a.insideAngular)),this.idToken=this.user.pipe(yt(Z=>Z?it(Z.getIdToken()):he(null))),this.idTokenResult=this.user.pipe(yt(Z=>Z?it(Z.getIdTokenResult()):he(null))),this.credential=Au(F,M,this.authState.pipe(kt(Z=>!Z))).pipe(ge(Z=>Z?.user?Z:null),ki(a.outsideAngular),di(a.insideAngular))}return PS(this,k,o,{spy:{apply:(F,q,ie)=>{(F.startsWith("signIn")||F.startsWith("createUser"))&&ie.then(Z=>M.next(Z))}}})}static \u0275fac=function(i){return new(i||t)(V(qc),V(Gc,8),V(On),V(_e),V(am),V(t0,8),V(n0,8),V(i0,8),V(r0,8),V(o0,8),V(s0,8),V(Ks,8))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var FA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VA={};var Bo,c0;(function(){var t;function e(S,C){function D(){}D.prototype=C.prototype,S.D=C.prototype,S.prototype=new D,S.prototype.constructor=S,S.C=function(A,R,N){for(var T=Array(arguments.length-2),At=2;At<arguments.length;At++)T[At-2]=arguments[At];return C.prototype[R].apply(A,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,C,D){D||(D=0);var A=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)A[R]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(R=0;16>R;++R)A[R]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=S.g[0],D=S.g[1],R=S.g[2];var N=S.g[3],T=C+(N^D&(R^N))+A[0]+3614090360&4294967295;C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[1]+3905402710&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[2]+606105819&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[3]+3250441966&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(N^D&(R^N))+A[4]+4118548399&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[5]+1200080426&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[6]+2821735955&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[7]+4249261313&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(N^D&(R^N))+A[8]+1770035416&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[9]+2336552879&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[10]+4294925233&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[11]+2304563134&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(N^D&(R^N))+A[12]+1804603682&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[13]+4254626195&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[14]+2792965006&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[15]+1236535329&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(R^N&(D^R))+A[1]+4129170786&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[6]+3225465664&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[11]+643717713&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[0]+3921069994&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(D^R))+A[5]+3593408605&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[10]+38016083&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[15]+3634488961&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[4]+3889429448&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(D^R))+A[9]+568446438&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[14]+3275163606&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[3]+4107603335&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[8]+1163531501&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(D^R))+A[13]+2850285829&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[2]+4243563512&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[7]+1735328473&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[12]+2368359562&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(D^R^N)+A[5]+4294588738&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[8]+2272392833&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[11]+1839030562&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[14]+4259657740&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(D^R^N)+A[1]+2763975236&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[4]+1272893353&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[7]+4139469664&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[10]+3200236656&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(D^R^N)+A[13]+681279174&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[0]+3936430074&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[3]+3572445317&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[6]+76029189&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(D^R^N)+A[9]+3654602809&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[12]+3873151461&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[15]+530742520&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[2]+3299628645&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(R^(D|~N))+A[0]+4096336452&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[7]+1126891415&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[14]+2878612391&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[5]+4237533241&4294967295,D=R+(T<<21&4294967295|T>>>11),T=C+(R^(D|~N))+A[12]+1700485571&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[3]+2399980690&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[10]+4293915773&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[1]+2240044497&4294967295,D=R+(T<<21&4294967295|T>>>11),T=C+(R^(D|~N))+A[8]+1873313359&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[15]+4264355552&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[6]+2734768916&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[13]+1309151649&4294967295,D=R+(T<<21&4294967295|T>>>11),T=C+(R^(D|~N))+A[4]+4149444226&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[11]+3174756917&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[2]+718787259&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+N&4294967295}i.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var D=C-this.blockSize,A=this.B,R=this.h,N=0;N<C;){if(R==0)for(;N<=D;)r(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<C;)if(A[R++]=S.charCodeAt(N++),R==this.blockSize){r(this,A),R=0;break}}else for(;N<C;)if(A[R++]=S[N++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=C},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var D=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=D&255,D/=256;for(this.u(S),S=Array(16),C=D=0;4>C;++C)for(var A=0;32>A;A+=8)S[D++]=this.g[C]>>>A&255;return S};function o(S,C){var D=c;return Object.prototype.hasOwnProperty.call(D,S)?D[S]:D[S]=C(S)}function a(S,C){this.h=C;for(var D=[],A=!0,R=S.length-1;0<=R;R--){var N=S[R]|0;A&&N==C||(D[R]=N,A=!1)}this.g=D}var c={};function u(S){return-128<=S&&128>S?o(S,function(C){return new a([C|0],0>C?-1:0)}):new a([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return v;if(0>S)return F(f(-S));for(var C=[],D=1,A=0;S>=D;A++)C[A]=S/D|0,D*=4294967296;return new a(C,0)}function m(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return F(m(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(C,8)),A=v,R=0;R<S.length;R+=8){var N=Math.min(8,S.length-R),T=parseInt(S.substring(R,R+N),C);8>N?(N=f(Math.pow(C,N)),A=A.j(N).add(f(T))):(A=A.j(D),A=A.add(f(T)))}return A}var v=u(0),w=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-F(this).m();for(var S=0,C=1,D=0;D<this.g.length;D++){var A=this.i(D);S+=(0<=A?A:4294967296+A)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(k(this))return"-"+F(this).toString(S);for(var C=f(Math.pow(S,6)),D=this,A="";;){var R=ae(D,C).g;D=q(D,R.j(C));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(S);if(D=R,M(D))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=q(this,S),k(S)?-1:M(S)?0:1};function F(S){for(var C=S.g.length,D=[],A=0;A<C;A++)D[A]=~S.g[A];return new a(D,~S.h).add(w)}t.abs=function(){return k(this)?F(this):this},t.add=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0,R=0;R<=C;R++){var N=A+(this.i(R)&65535)+(S.i(R)&65535),T=(N>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);A=T>>>16,N&=65535,T&=65535,D[R]=T<<16|N}return new a(D,D[D.length-1]&-2147483648?-1:0)};function q(S,C){return S.add(F(C))}t.j=function(S){if(M(this)||M(S))return v;if(k(this))return k(S)?F(this).j(F(S)):F(F(this).j(S));if(k(S))return F(this.j(F(S)));if(0>this.l(E)&&0>S.l(E))return f(this.m()*S.m());for(var C=this.g.length+S.g.length,D=[],A=0;A<2*C;A++)D[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<S.g.length;R++){var N=this.i(A)>>>16,T=this.i(A)&65535,At=S.i(R)>>>16,Ti=S.i(R)&65535;D[2*A+2*R]+=T*Ti,ie(D,2*A+2*R),D[2*A+2*R+1]+=N*Ti,ie(D,2*A+2*R+1),D[2*A+2*R+1]+=T*At,ie(D,2*A+2*R+1),D[2*A+2*R+2]+=N*At,ie(D,2*A+2*R+2)}for(A=0;A<C;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=C;A<2*C;A++)D[A]=0;return new a(D,0)};function ie(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function Z(S,C){this.g=S,this.h=C}function ae(S,C){if(M(C))throw Error("division by zero");if(M(S))return new Z(v,v);if(k(S))return C=ae(F(S),C),new Z(F(C.g),F(C.h));if(k(C))return C=ae(S,F(C)),new Z(F(C.g),C.h);if(30<S.g.length){if(k(S)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var D=w,A=C;0>=A.l(S);)D=pe(D),A=pe(A);var R=ue(D,1),N=ue(A,1);for(A=ue(A,2),D=ue(D,2);!M(A);){var T=N.add(A);0>=T.l(S)&&(R=R.add(D),N=T),A=ue(A,1),D=ue(D,1)}return C=q(S,R.j(C)),new Z(R,C)}for(R=v;0<=S.l(C);){for(D=Math.max(1,Math.floor(S.m()/C.m())),A=Math.ceil(Math.log(D)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=f(D),T=N.j(C);k(T)||0<T.l(S);)D-=A,N=f(D),T=N.j(C);M(N)&&(N=w),R=R.add(N),S=q(S,T)}return new Z(R,S)}t.A=function(S){return ae(this,S).h},t.and=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)&S.i(A);return new a(D,this.h&S.h)},t.or=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)|S.i(A);return new a(D,this.h|S.h)},t.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)^S.i(A);return new a(D,this.h^S.h)};function pe(S){for(var C=S.g.length+1,D=[],A=0;A<C;A++)D[A]=S.i(A)<<1|S.i(A-1)>>>31;return new a(D,S.h)}function ue(S,C){var D=C>>5;C%=32;for(var A=S.g.length-D,R=[],N=0;N<A;N++)R[N]=0<C?S.i(N+D)>>>C|S.i(N+D+1)<<32-C:S.i(N+D);return new a(R,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,c0=VA.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Bo=VA.Integer=a}).apply(typeof FA<"u"?FA:typeof self<"u"?self:typeof window<"u"?window:{});var wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qr={};var l0,u0,tl,d0,Ld,Im,h0,f0,p0;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof wm=="object"&&wm];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var P=d[I];if(!(P in y))break e;y=y[P]}d=d[d.length-1],I=y[d],g=g(I),g!=I&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,I=!1,P={next:function(){if(!I&&y<d.length){var z=y++;return{value:g(z,d[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},c=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,y){return d.call.apply(d.bind,arguments)}function v(d,g,y){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,I),d.apply(g,P)}}return function(){return d.apply(g,arguments)}}function w(d,g,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,w.apply(null,arguments)}function E(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function M(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(I,P,z){for(var Q=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)Q[Le-2]=arguments[Le];return g.prototype[P].apply(I,Q)}}function k(d){let g=d.length;if(0<g){let y=Array(g);for(let I=0;I<g;I++)y[I]=d[I];return y}return[]}function F(d,g){for(let y=1;y<arguments.length;y++){let I=arguments[y];if(u(I)){let P=d.length||0,z=I.length||0;d.length=P+z;for(let Q=0;Q<z;Q++)d[P+Q]=I[Q]}else d.push(I)}}class q{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function ie(d){return/^[\s\xa0]*$/.test(d)}function Z(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function ae(d){return ae[" "](d),d}ae[" "]=function(){};var pe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ue(d,g,y){for(let I in d)g.call(y,d[I],I,d)}function S(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function C(d){let g={};for(let y in d)g[y]=d[y];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,g){let y,I;for(let P=1;P<arguments.length;P++){I=arguments[P];for(y in I)d[y]=I[y];for(let z=0;z<D.length;z++)y=D[z],Object.prototype.hasOwnProperty.call(I,y)&&(d[y]=I[y])}}function R(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function N(d){c.setTimeout(()=>{throw d},0)}function T(){var d=lt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class At{constructor(){this.h=this.g=null}add(g,y){let I=Ti.get();I.set(g,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Ti=new q(()=>new De,d=>d.reset());class De{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let so,ye=!1,lt=new At,fn=()=>{let d=c.Promise.resolve(void 0);so=()=>{d.then(bn)}};var bn=()=>{for(var d;d=T();){try{d.h.call(d.g)}catch(y){N(y)}var g=Ti;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}ye=!1};function tt(){this.s=this.s,this.C=this.C}tt.prototype.s=!1,tt.prototype.ma=function(){this.s||(this.s=!0,this.N())},tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ee(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ee.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return d}();function Tn(d,g){if(Ee.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(pe){e:{try{ae(g.nodeName);var P=!0;break e}catch{}P=!1}P||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Zi[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Tn.aa.h.call(this)}}M(Tn,Ee);var Zi={2:"touch",3:"pen",4:"mouse"};Tn.prototype.h=function(){Tn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ao="closure_listenable_"+(1e6*Math.random()|0),Ul=0;function $l(d,g,y,I,P){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!I,this.ha=P,this.key=++Ul,this.da=this.fa=!1}function Ki(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function co(d){this.src=d,this.g={},this.h=0}co.prototype.add=function(d,g,y,I,P){var z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);var Q=Sa(d,g,I,P);return-1<Q?(g=d[Q],y||(g.fa=!1)):(g=new $l(g,this.src,z,!!I,P),g.fa=y,d.push(g)),g};function Hl(d,g){var y=g.type;if(y in d.g){var I=d.g[y],P=Array.prototype.indexOf.call(I,g,void 0),z;(z=0<=P)&&Array.prototype.splice.call(I,P,1),z&&(Ki(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function Sa(d,g,y,I){for(var P=0;P<d.length;++P){var z=d[P];if(!z.da&&z.listener==g&&z.capture==!!y&&z.ha==I)return P}return-1}var Aa="closure_lm_"+(1e6*Math.random()|0),os={};function ss(d,g,y,I,P){if(I&&I.once)return Ma(d,g,y,I,P);if(Array.isArray(g)){for(var z=0;z<g.length;z++)ss(d,g[z],y,I,P);return null}return y=ka(y),d&&d[ao]?d.K(g,y,f(I)?!!I.capture:!!I,P):Ch(d,g,y,!1,I,P)}function Ch(d,g,y,I,P,z){if(!g)throw Error("Invalid event type");var Q=f(P)?!!P.capture:!!P,Le=as(d);if(Le||(d[Aa]=Le=new co(d)),y=Le.add(g,y,I,Q,z),y.proxy)return y;if(I=Dh(),y.proxy=I,I.src=d,I.listener=y,d.addEventListener)$e||(P=Q),P===void 0&&(P=!1),d.addEventListener(g.toString(),I,P);else if(d.attachEvent)d.attachEvent(xh(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Dh(){function d(y){return g.call(d.src,d.listener,y)}let g=qg;return d}function Ma(d,g,y,I,P){if(Array.isArray(g)){for(var z=0;z<g.length;z++)Ma(d,g[z],y,I,P);return null}return y=ka(y),d&&d[ao]?d.L(g,y,f(I)?!!I.capture:!!I,P):Ch(d,g,y,!0,I,P)}function ql(d,g,y,I,P){if(Array.isArray(g))for(var z=0;z<g.length;z++)ql(d,g[z],y,I,P);else I=f(I)?!!I.capture:!!I,y=ka(y),d&&d[ao]?(d=d.i,g=String(g).toString(),g in d.g&&(z=d.g[g],y=Sa(z,y,I,P),-1<y&&(Ki(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete d.g[g],d.h--)))):d&&(d=as(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Sa(g,y,I,P)),(y=-1<d?g[d]:null)&&Ra(y))}function Ra(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ao])Hl(g.i,d);else{var y=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(y,I,d.capture):g.detachEvent?g.detachEvent(xh(y),I):g.addListener&&g.removeListener&&g.removeListener(I),(y=as(g))?(Hl(y,d),y.h==0&&(y.src=null,g[Aa]=null)):Ki(d)}}}function xh(d){return d in os?os[d]:os[d]="on"+d}function qg(d,g){if(d.da)d=!0;else{g=new Tn(g,this);var y=d.listener,I=d.ha||d.src;d.fa&&Ra(d),d=y.call(I,g)}return d}function as(d){return d=d[Aa],d instanceof co?d:null}var Pa="__closure_events_fn_"+(1e9*Math.random()>>>0);function ka(d){return typeof d=="function"?d:(d[Pa]||(d[Pa]=function(g){return d.handleEvent(g)}),d[Pa])}function on(){tt.call(this),this.i=new co(this),this.M=this,this.F=null}M(on,tt),on.prototype[ao]=!0,on.prototype.removeEventListener=function(d,g,y,I){ql(this,d,g,y,I)};function sn(d,g){var y,I=d.F;if(I)for(y=[];I;I=I.F)y.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new Ee(g,d);else if(g instanceof Ee)g.target=g.target||d;else{var P=g;g=new Ee(I,d),A(g,P)}if(P=!0,y)for(var z=y.length-1;0<=z;z--){var Q=g.g=y[z];P=cs(Q,I,!0,g)&&P}if(Q=g.g=d,P=cs(Q,I,!0,g)&&P,P=cs(Q,I,!1,g)&&P,y)for(z=0;z<y.length;z++)Q=g.g=y[z],P=cs(Q,I,!1,g)&&P}on.prototype.N=function(){if(on.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],I=0;I<y.length;I++)Ki(y[I]);delete d.g[g],d.h--}}this.F=null},on.prototype.K=function(d,g,y,I){return this.i.add(String(d),g,!1,y,I)},on.prototype.L=function(d,g,y,I){return this.i.add(String(d),g,!0,y,I)};function cs(d,g,y,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var P=!0,z=0;z<g.length;++z){var Q=g[z];if(Q&&!Q.da&&Q.capture==y){var Le=Q.listener,xt=Q.ha||Q.src;Q.fa&&Hl(d.i,Q),P=Le.call(xt,I)!==!1&&P}}return P&&!I.defaultPrevented}function Th(d,g,y){if(typeof d=="function")y&&(d=w(d,y));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function Gl(d){d.g=Th(()=>{d.g=null,d.i&&(d.i=!1,Gl(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class Wl extends tt{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Gl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lo(d){tt.call(this),this.h=d,this.g={}}M(lo,tt);var Sh=[];function uo(d){ue(d.g,function(g,y){this.g.hasOwnProperty(y)&&Ra(g)},d),d.g={}}lo.prototype.N=function(){lo.aa.N.call(this),uo(this)},lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zl=c.JSON.stringify,Gg=c.JSON.parse,Ah=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Na(){}Na.prototype.h=null;function Kl(d){return d.h||(d.h=d.i())}function Mh(){}var ls={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ql(){Ee.call(this,"d")}M(Ql,Ee);function Yl(){Ee.call(this,"c")}M(Yl,Ee);var Sr={},Rh=null;function ho(){return Rh=Rh||new on}Sr.La="serverreachability";function Ph(d){Ee.call(this,Sr.La,d)}M(Ph,Ee);function us(d){let g=ho();sn(g,new Ph(g))}Sr.STAT_EVENT="statevent";function kh(d,g){Ee.call(this,Sr.STAT_EVENT,d),this.stat=g}M(kh,Ee);function pn(d){let g=ho();sn(g,new kh(g,d))}Sr.Ma="timingevent";function Wn(d,g){Ee.call(this,Sr.Ma,d),this.size=g}M(Wn,Ee);function ce(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function fo(){this.g=!0}fo.prototype.xa=function(){this.g=!1};function Nh(d,g,y,I,P,z){d.info(function(){if(d.g)if(z)for(var Q="",Le=z.split("&"),xt=0;xt<Le.length;xt++){var We=Le[xt].split("=");if(1<We.length){var gt=We[0];We=We[1];var an=gt.split("_");Q=2<=an.length&&an[1]=="type"?Q+(gt+"="+We+"&"):Q+(gt+"=redacted&")}}else Q=null;else Q=z;return"XMLHTTP REQ ("+I+") [attempt "+P+"]: "+g+`
`+y+`
`+Q})}function Oh(d,g,y,I,P,z,Q){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+P+"]: "+g+`
`+y+`
`+z+" "+Q})}function Ar(d,g,y,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Lh(d,y)+(I?" "+I:"")})}function Xl(d,g){d.info(function(){return"TIMEOUT: "+g})}fo.prototype.info=function(){};function Lh(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var I=y[d];if(!(2>I.length)){var P=I[1];if(Array.isArray(P)&&!(1>P.length)){var z=P[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Q=1;Q<P.length;Q++)P[Q]=""}}}}return Zl(y)}catch{return g}}var Si={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eu;function Oa(){}M(Oa,Na),Oa.prototype.g=function(){return new XMLHttpRequest},Oa.prototype.i=function(){return{}},eu=new Oa;function Qi(d,g,y,I){this.j=d,this.i=g,this.l=y,this.R=I||1,this.U=new lo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fh}function Fh(){this.i=null,this.g="",this.h=!1}var tu={},nu={};function po(d,g,y){d.L=1,d.v=go(mn(g)),d.m=y,d.P=!0,Vh(d,null)}function Vh(d,g){d.F=Date.now(),La(d),d.A=mn(d.v);var y=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),nt(y.i,"t",I),d.C=0,y=d.j.J,d.h=new Fh,d.g=Is(d.j,y?g:null,!d.m),0<d.O&&(d.M=new Wl(w(d.Y,d,d.g),d.O)),g=d.U,y=d.g,I=d.ca;var P="readystatechange";Array.isArray(P)||(P&&(Sh[0]=P.toString()),P=Sh);for(var z=0;z<P.length;z++){var Q=ss(y,P[z],I||g.handleEvent,!1,g.h||g);if(!Q)break;g.g[Q.key]=Q}g=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),us(),Nh(d.i,d.u,d.A,d.l,d.R,d.m)}Qi.prototype.ca=function(d){d=d.target;let g=this.M;g&&Kn(d)==3?g.j():this.Y(d)},Qi.prototype.Y=function(d){try{if(d==this.g)e:{let an=Kn(this.g);var g=this.g.Ba();let Yn=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||qh(this.g)))){this.J||an!=4||g==7||(g==8||0>=Yn?us(3):us(2)),ds(this);var y=this.g.Z();this.X=y;t:if(Bh(this)){var I=qh(this.g);d="";var P=I.length,z=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Yi(this),Ai(this);var Q="";break t}this.h.i=new c.TextDecoder}for(g=0;g<P;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!(z&&g==P-1)});I.length=0,this.h.g+=d,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=y==200,Oh(this.i,this.u,this.A,this.l,this.R,an,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,xt=this.g;if((Le=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ie(Le)){var We=Le;break t}}We=null}if(y=We)Ar(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fa(this,y);else{this.o=!1,this.s=3,pn(12),Yi(this),Ai(this);break e}}if(this.P){y=!0;let Xn;for(;!this.J&&this.C<Q.length;)if(Xn=Wg(this,Q),Xn==nu){an==4&&(this.s=4,pn(14),y=!1),Ar(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==tu){this.s=4,pn(15),Ar(this.i,this.l,Q,"[Invalid Chunk]"),y=!1;break}else Ar(this.i,this.l,Xn,null),Fa(this,Xn);if(Bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||Q.length!=0||this.h.h||(this.s=1,pn(16),y=!1),this.o=this.o&&y,!y)Ar(this.i,this.l,Q,"[Invalid Chunked Response]"),Yi(this),Ai(this);else if(0<Q.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),$a(gt),gt.M=!0,pn(11))}}else Ar(this.i,this.l,Q,null),Fa(this,Q);an==4&&Yi(this),this.o&&!this.J&&(an==4?Kh(this.j,this):(this.o=!1,La(this)))}else Gh(this.g),y==400&&0<Q.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),Yi(this),Ai(this)}}}catch{}finally{}};function Bh(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Wg(d,g){var y=d.C,I=g.indexOf(`
`,y);return I==-1?nu:(y=Number(g.substring(y,I)),isNaN(y)?tu:(I+=1,I+y>g.length?nu:(g=g.slice(I,I+y),d.C=I+y,g)))}Qi.prototype.cancel=function(){this.J=!0,Yi(this)};function La(d){d.S=Date.now()+d.I,jh(d,d.I)}function jh(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ce(w(d.ba,d),g)}function ds(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Qi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Xl(this.i,this.A),this.L!=2&&(us(),pn(17)),Yi(this),this.s=2,Ai(this)):jh(this,this.S-d)};function Ai(d){d.j.G==0||d.J||Kh(d.j,d)}function Yi(d){ds(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,uo(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Fa(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||Xi(y.h,d))){if(!d.K&&Xi(y.h,d)&&y.G==3){try{var I=y.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var P=I;if(P[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)Ha(y),ja(y);else break e;pu(y),pn(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=ce(w(y.Za,y),6e3));if(1>=fs(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else kr(y,11)}else if((d.K||y.g==d)&&Ha(y),!ie(g))for(P=y.Da.g.parse(g),g=0;g<P.length;g++){let We=P[g];if(y.T=We[0],We=We[1],y.G==2)if(We[0]=="c"){y.K=We[1],y.ia=We[2];let gt=We[3];gt!=null&&(y.la=gt,y.j.info("VER="+y.la));let an=We[4];an!=null&&(y.Aa=an,y.j.info("SVER="+y.Aa));let Yn=We[5];Yn!=null&&typeof Yn=="number"&&0<Yn&&(I=1.5*Yn,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;let Xn=d.g;if(Xn){let nr=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(nr){var z=I.h;z.g||nr.indexOf("spdy")==-1&&nr.indexOf("quic")==-1&&nr.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Ji(z,z.h),z.h=null))}if(I.D){let Wa=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;Wa&&(I.ya=Wa,Xe(I.I,I.D,Wa))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var Q=d;if(I.qa=_u(I,I.J?I.ia:null,I.W),Q.K){Va(I.h,Q);var Le=Q,xt=I.L;xt&&(Le.I=xt),Le.B&&(ds(Le),La(Le)),I.g=Q}else Ua(I);0<y.i.length&&za(y)}else We[0]!="stop"&&We[0]!="close"||kr(y,7);else y.G==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?kr(y,7):ws(y):We[0]!="noop"&&y.l&&y.l.ta(We),y.v=0)}}us(4)}catch{}}var hs=class{constructor(d,g){this.g=d,this.map=g}};function Ge(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function fs(d){return d.h?1:d.g?d.g.size:0}function Xi(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Ji(d,g){d.g?d.g.add(g):d.h=g}function Va(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}Ge.prototype.cancel=function(){if(this.i=Se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Se(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return k(d.i)}function Mt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,I=0;I<y;I++)g.push(d[I]);return g}g=[],y=0;for(I in d)g[y++]=d[I];return g}function iu(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let I in d)g[y++]=I;return g}}}function ps(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=iu(d),I=Mt(d),P=I.length,z=0;z<P;z++)g.call(void 0,I[z],y&&y[z],d)}var Sn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zg(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var I=d[y].indexOf("="),P=null;if(0<=I){var z=d[y].substring(0,I);P=d[y].substring(I+1)}else z=d[y];g(z,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function ai(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ai){this.h=d.h,wt(this,d.j),this.o=d.o,this.g=d.g,ci(this,d.s),this.l=d.l;var g=d.i,y=new Rr;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),mo(this,y),this.m=d.m}else d&&(g=String(d).match(Sn))?(this.h=!1,wt(this,g[1]||"",!0),this.o=Mi(g[2]||""),this.g=Mi(g[3]||"",!0),ci(this,g[4]),this.l=Mi(g[5]||"",!0),mo(this,g[6]||"",!0),this.m=Mi(g[7]||"")):(this.h=!1,this.i=new Rr(null,this.h))}ai.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Mr(g,ms,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Mr(g,ms,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Mr(y,y.charAt(0)=="/"?su:ou,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Mr(y,zh)),d.join("")};function mn(d){return new ai(d)}function wt(d,g,y){d.j=y?Mi(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function ci(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function mo(d,g,y){g instanceof Rr?(d.i=g,au(d.i,d.h)):(y||(g=Mr(g,Ba)),d.i=new Rr(g,d.h))}function Xe(d,g,y){d.i.set(g,y)}function go(d){return Xe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Mi(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Mr(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,ru),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ru(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var ms=/[#\/\?@]/g,ou=/[#\?:]/g,su=/[#\?]/g,Ba=/[#\?@]/g,zh=/#/g;function Rr(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function er(d){d.g||(d.g=new Map,d.h=0,d.i&&Zg(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Rr.prototype,t.add=function(d,g){er(this),this.i=null,d=Pr(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Ce(d,g){er(d),g=Pr(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Zn(d,g){return er(d),g=Pr(d,g),d.g.has(g)}t.forEach=function(d,g){er(this),this.g.forEach(function(y,I){y.forEach(function(P){d.call(g,P,I,this)},this)},this)},t.na=function(){er(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let I=0;I<g.length;I++){let P=d[I];for(let z=0;z<P.length;z++)y.push(g[I])}return y},t.V=function(d){er(this);let g=[];if(typeof d=="string")Zn(this,d)&&(g=g.concat(this.g.get(Pr(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return er(this),this.i=null,d=Pr(this,d),Zn(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function nt(d,g,y){Ce(d,g),0<y.length&&(d.i=null,d.g.set(Pr(d,g),k(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var I=g[y];let z=encodeURIComponent(String(I)),Q=this.V(I);for(I=0;I<Q.length;I++){var P=z;Q[I]!==""&&(P+="="+encodeURIComponent(String(Q[I]))),d.push(P)}}return this.i=d.join("&")};function Pr(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function au(d,g){g&&!d.j&&(er(d),d.i=null,d.g.forEach(function(y,I){var P=I.toLowerCase();I!=P&&(Ce(this,I),nt(this,P,y))},d)),d.j=g}function cu(d,g){let y=new fo;if(c.Image){let I=new Image;I.onload=E(wn,y,"TestLoadImage: loaded",!0,g,I),I.onerror=E(wn,y,"TestLoadImage: error",!1,g,I),I.onabort=E(wn,y,"TestLoadImage: abort",!1,g,I),I.ontimeout=E(wn,y,"TestLoadImage: timeout",!1,g,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function lu(d,g){let y=new fo,I=new AbortController,P=setTimeout(()=>{I.abort(),wn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(z=>{clearTimeout(P),z.ok?wn(y,"TestPingServer: ok",!0,g):wn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),wn(y,"TestPingServer: error",!1,g)})}function wn(d,g,y,I,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),I(y)}catch{}}function uu(){this.g=new Ah}function gs(d,g,y){let I=y||"";try{ps(d,function(P,z){let Q=P;f(P)&&(Q=Zl(P)),g.push(I+z+"="+encodeURIComponent(Q))})}catch(P){throw g.push(I+"type="+encodeURIComponent("_badmap")),P}}function Rt(d){this.l=d.Ub||null,this.j=d.eb||!1}M(Rt,Na),Rt.prototype.g=function(){return new li(this.l,this.j)},Rt.prototype.i=function(d){return function(){return d}}({});function li(d,g){on.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(li,on),t=li.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,_s(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,_s(this)),this.g&&(this.readyState=3,_s(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?_o(this):_s(this),this.readyState==3&&du(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,_o(this))},t.Qa=function(d){this.g&&(this.response=d,_o(this))},t.ga=function(){this.g&&_o(this)};function _o(d){d.readyState=4,d.l=null,d.j=null,d.v=null,_s(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function _s(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hu(d){let g="";return ue(d,function(y,I){g+=I,g+=":",g+=y,g+=`\r
`}),g}function vs(d,g,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=hu(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):Xe(d,g,y))}function Dt(d){on.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Dt,on);var Uh=/^https?$/i,He=["POST","PUT"];t=Dt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eu.g(),this.v=this.o?Kl(this.o):Kl(eu),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(z){$h(this,z);return}if(d=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var P in I)y.set(P,I[P]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let z of I.keys())y.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),P=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(He,g,void 0))||I||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[z,Q]of y)this.g.setRequestHeader(z,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hh(this),this.u=!0,this.g.send(d),this.u=!1}catch(z){$h(this,z)}};function $h(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Bn(d),ys(d)}function Bn(d){d.A||(d.A=!0,sn(d,"complete"),sn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,sn(this,"complete"),sn(this,"abort"),ys(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ys(this,!0)),Dt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?vo(this):this.bb())},t.bb=function(){vo(this)};function vo(d){if(d.h&&typeof a<"u"&&(!d.v[1]||Kn(d)!=4||d.Z()!=2)){if(d.u&&Kn(d)==4)Th(d.Ea,0,d);else if(sn(d,"readystatechange"),Kn(d)==4){d.h=!1;try{let Q=d.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var I;if(I=Q===0){var P=String(d.D).match(Sn)[1]||null;!P&&c.self&&c.self.location&&(P=c.self.location.protocol.slice(0,-1)),I=!Uh.test(P?P.toLowerCase():"")}y=I}if(y)sn(d,"complete"),sn(d,"success");else{d.m=6;try{var z=2<Kn(d)?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.Z()+"]",Bn(d)}}finally{ys(d)}}}}function ys(d,g){if(d.g){Hh(d);let y=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||sn(d,"ready");try{y.onreadystatechange=I}catch{}}}function Hh(d){d.I&&(c.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Kn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Gg(g)}};function qh(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Gh(d){let g={};d=(d.g&&2<=Kn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(ie(d[I]))continue;var y=R(d[I]);let P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let z=g[P]||[];g[P]=z,z.push(y)}S(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Wh(d){this.Aa=0,this.i=[],this.j=new fo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bs("baseRetryDelayMs",5e3,d),this.cb=bs("retryDelaySeedMs",1e4,d),this.Wa=bs("forwardChannelMaxRetries",2,d),this.wa=bs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Ge(d&&d.concurrentRequestLimit),this.Da=new uu,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wh.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,I){pn(0),this.W=d,this.H=g||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=_u(this,null,this.W),za(this)};function ws(d){if(Qn(d),d.G==3){var g=d.U++,y=mn(d.I);if(Xe(y,"SID",d.K),Xe(y,"RID",g),Xe(y,"TYPE","terminate"),yo(d,y),g=new Qi(d,d.j,g),g.L=2,g.v=go(mn(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=Is(g.j,null),g.g.ea(g.v)),g.F=Date.now(),La(g)}gu(d)}function ja(d){d.g&&($a(d),d.g.cancel(),d.g=null)}function Qn(d){ja(d),d.u&&(c.clearTimeout(d.u),d.u=null),Ha(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function za(d){if(!mt(d.h)&&!d.s){d.s=!0;var g=d.Ga;so||fn(),ye||(so(),ye=!0),lt.add(g,d),d.B=0}}function Zh(d,g){return fs(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ce(w(d.Ga,d,g),qa(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let P=new Qi(this,this.j,d),z=this.o;if(this.S&&(z?(z=C(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(P.H=z,z=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=fu(this,P,g),y=mn(this.I),Xe(y,"RID",d),Xe(y,"CVER",22),this.D&&Xe(y,"X-HTTP-Session-Id",this.D),yo(this,y),z&&(this.O?g="headers="+encodeURIComponent(String(hu(z)))+"&"+g:this.m&&vs(y,this.m,z)),Ji(this.h,P),this.Ua&&Xe(y,"TYPE","init"),this.P?(Xe(y,"$req",g),Xe(y,"SID","null"),P.T=!0,po(P,y,null)):po(P,y,g),this.G=2}}else this.G==3&&(d?Ri(this,d):this.i.length==0||mt(this.h)||Ri(this))};function Ri(d,g){var y;g?y=g.l:y=d.U++;let I=mn(d.I);Xe(I,"SID",d.K),Xe(I,"RID",y),Xe(I,"AID",d.T),yo(d,I),d.m&&d.o&&vs(I,d.m,d.o),y=new Qi(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=fu(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ji(d.h,y),po(y,I,g)}function yo(d,g){d.H&&ue(d.H,function(y,I){Xe(g,I,y)}),d.l&&ps({},function(y,I){Xe(g,I,y)})}function fu(d,g,y){y=Math.min(d.i.length,y);var I=d.l?w(d.l.Na,d.l,d):null;e:{var P=d.i;let z=-1;for(;;){let Q=["count="+y];z==-1?0<y?(z=P[0].g,Q.push("ofs="+z)):z=0:Q.push("ofs="+z);let Le=!0;for(let xt=0;xt<y;xt++){let We=P[xt].g,gt=P[xt].map;if(We-=z,0>We)z=Math.max(0,P[xt].g-100),Le=!1;else try{gs(gt,Q,"req"+We+"_")}catch{I&&I(gt)}}if(Le){I=Q.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,I}function Ua(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;so||fn(),ye||(so(),ye=!0),lt.add(g,d),d.v=0}}function pu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ce(w(d.Fa,d),qa(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ce(w(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),ja(this),mu(this))};function $a(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function mu(d){d.g=new Qi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=mn(d.qa);Xe(g,"RID","rpc"),Xe(g,"SID",d.K),Xe(g,"AID",d.T),Xe(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Xe(g,"TO",d.ja),Xe(g,"TYPE","xmlhttp"),yo(d,g),d.m&&d.o&&vs(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=go(mn(g)),y.m=null,y.P=!0,Vh(y,d)}t.Za=function(){this.C!=null&&(this.C=null,ja(this),pu(this),pn(19))};function Ha(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Kh(d,g){var y=null;if(d.g==g){Ha(d),$a(d),d.g=null;var I=2}else if(Xi(d.h,g))y=g.D,Va(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var P=d.B;I=ho(),sn(I,new Wn(I,y)),za(d)}else Ua(d);else if(P=g.s,P==3||P==0&&0<g.X||!(I==1&&Zh(d,g)||I==2&&pu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),P){case 1:kr(d,5);break;case 4:kr(d,10);break;case 3:kr(d,6);break;default:kr(d,2)}}}function qa(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function kr(d,g){if(d.j.info("Error code "+g),g==2){var y=w(d.fb,d),I=d.Xa;let P=!I;I=new ai(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||wt(I,"https"),go(I),P?cu(I.toString(),y):lu(I.toString(),y)}else pn(2);d.G=0,d.l&&d.l.sa(g),gu(d),Qn(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function gu(d){if(d.G=0,d.ka=[],d.l){let g=Se(d.h);(g.length!=0||d.i.length!=0)&&(F(d.ka,g),F(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function _u(d,g,y){var I=y instanceof ai?mn(y):new ai(y);if(I.g!="")g&&(I.g=g+"."+I.g),ci(I,I.s);else{var P=c.location;I=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;var z=new ai(null);I&&wt(z,I),g&&(z.g=g),P&&ci(z,P),y&&(z.l=y),I=z}return y=d.D,g=d.ya,y&&g&&Xe(I,y,g),Xe(I,"VER",d.la),yo(d,I),I}function Is(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Dt(new Rt({eb:y})):new Dt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function tr(){}t=tr.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ga(){}Ga.prototype.g=function(d,g){return new en(d,g)};function en(d,g){on.call(this),this.g=new Wh(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!ie(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!ie(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Nr(this)}M(en,on),en.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},en.prototype.close=function(){ws(this.g)},en.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Zl(d),d=y);g.i.push(new hs(g.Ya++,d)),g.G==3&&za(g)},en.prototype.N=function(){this.g.l=null,delete this.j,ws(this.g),delete this.g,en.aa.N.call(this)};function An(d){Ql.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}M(An,Ql);function vu(){Yl.call(this),this.status=1}M(vu,Yl);function Nr(d){this.g=d}M(Nr,tr),Nr.prototype.ua=function(){sn(this.g,"a")},Nr.prototype.ta=function(d){sn(this.g,new An(d))},Nr.prototype.sa=function(d){sn(this.g,new vu)},Nr.prototype.ra=function(){sn(this.g,"b")},Ga.prototype.createWebChannel=Ga.prototype.g,en.prototype.send=en.prototype.o,en.prototype.open=en.prototype.m,en.prototype.close=en.prototype.close,p0=Qr.createWebChannelTransport=function(){return new Ga},f0=Qr.getStatEventTarget=function(){return ho()},h0=Qr.Event=Sr,Im=Qr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Si.NO_ERROR=0,Si.TIMEOUT=8,Si.HTTP_ERROR=6,Ld=Qr.ErrorCode=Si,Jl.COMPLETE="complete",d0=Qr.EventType=Jl,Mh.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",on.prototype.listen=on.prototype.K,tl=Qr.WebChannel=Mh,u0=Qr.FetchXmlHttpFactory=Rt,Dt.prototype.listenOnce=Dt.prototype.L,Dt.prototype.getLastError=Dt.prototype.Ka,Dt.prototype.getLastErrorCode=Dt.prototype.Ba,Dt.prototype.getStatus=Dt.prototype.Z,Dt.prototype.getResponseJson=Dt.prototype.Oa,Dt.prototype.getResponseText=Dt.prototype.oa,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Ha,l0=Qr.XhrIo=Dt}).apply(typeof wm<"u"?wm:typeof self<"u"?self:typeof window<"u"?window:{});var BA="@firebase/firestore";var Yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");var Pl="10.12.1";var Go=new uf("@firebase/firestore");function sl(){return Go.logLevel}function BM(t){Go.setLogLevel(t)}function W(t,...e){if(Go.logLevel<=rr.DEBUG){let n=e.map(_I);Go.debug(`Firestore (${Pl}): ${t}`,...n)}}function Ut(t,...e){if(Go.logLevel<=rr.ERROR){let n=e.map(_I);Go.error(`Firestore (${Pl}): ${t}`,...n)}}function Ci(t,...e){if(Go.logLevel<=rr.WARN){let n=e.map(_I);Go.warn(`Firestore (${Pl}): ${t}`,...n)}}function _I(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function oe(t="Unexpected state"){let e=`FIRESTORE (${Pl}) INTERNAL ASSERTION FAILED: `+t;throw Ut(e),new Error(e)}function le(t,e){t||oe()}function jM(t,e){t||oe()}function ne(t,e){return t}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends FE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var km=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},y0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}},b0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},w0=class{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve(),o=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xt,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>U(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xt)}},0),a()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(le(typeof i.accessToken=="string"),new km(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new Yt(e)}},I0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},E0=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new I0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},C0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},D0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new C0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function eU(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Nm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=eU(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function Pe(t,e){return t<e?-1:t>e?1:0}function ml(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function zM(t){return t+"\0"}var Nt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Nt(0,0))}static max(){return new t(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Om=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&oe(),i===void 0?i=e.length-n:i>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Qe=class t extends Om{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new H($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},tU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$t=class t extends Om{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return tU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new H($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},a=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new H($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new H($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var ee=class t{constructor(e){this.path=e}static fromPath(e){return new t(Qe.fromString(e))}static fromName(e){return new t(Qe.fromString(e).popFirst(5))}static empty(){return new t(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Qe(e.slice()))}};var gl=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function x0(t){return t.fields.find(e=>e.kind===2)}function na(t){return t.fields.filter(e=>e.kind!==2)}gl.UNKNOWN_ID=-1;var hl=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Zd=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Di.min())}};function UM(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=fe.fromTimestamp(i===1e9?new Nt(n+1,0):new Nt(n,i));return new Di(r,ee.empty(),e)}function $M(t){return new Di(t.readTime,t.key,-1)}var Di=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(fe.min(),ee.empty(),-1)}static max(){return new t(fe.max(),ee.empty(),-1)}};function vI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}var HM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ns(t){return U(this,null,function*(){if(t.code!==$.FAILED_PRECONDITION||t.message!==HM)throw t;W("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},u=>i(u))}),a=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,a=new Array(o),c=0;for(let u=0;u<o;u++){let f=u;n(e[f]).next(m=>{a[f]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var Fm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Xt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ca(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=yI(i.target.error);this.V.reject(new ca(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new ca(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new S0(n)}},Wo=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Iu())===12.2&&Ut("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),ia(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!lf())return!1;if(t.C())return!0;let e=Iu(),n=t.S(e),i=0<n&&n<10,r=qM(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return U(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let a=o.target.result;n(a)},r.onblocked=()=>{i(new ca(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let a=o.target.error;a.name==="VersionError"?i(new H($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new H($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new ca(e,a))},r.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let a=o.target.result;this.p.O(a,r.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return U(this,null,function*(){let o=n==="readonly",a=0;for(;;){++a;try{this.db=yield this.M(e);let c=Fm.open(this.db,e,o?"readonly":"readwrite",i),u=r(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),B.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){let u=c,f=u.name!=="FirebaseError"&&a<3;if(W("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),this.close(),!f)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function qM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var T0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ia(this.B.delete())}},ca=class extends H{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function is(t){return t.name==="IndexedDbTransactionError"}var S0=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),ia(i)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),ia(this.store.add(e))}get(e){return ia(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),ia(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),ia(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new B((a,c)=>{o.onerror=u=>{c(u.target.error)},o.onsuccess=u=>{a(u.target.result)}})}{let o=this.cursor(i),a=[];return this.W(o,(c,u)=>{a.push(u)}).next(()=>a)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new B((r,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,a,c)=>c.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new B((i,r)=>{n.onerror=o=>{let a=yI(o.target.error);r(a)},n.onsuccess=o=>{let a=o.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():i()}):i()}})}W(e,n){let i=[];return new B((r,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{let c=a.target.result;if(!c)return void r();let u=new T0(c),f=n(c.primaryKey,c.value,u);if(f instanceof B){let m=f.catch(v=>(u.done(),B.reject(v)));i.push(m)}u.isDone?r():u.K===null?c.continue():c.continue(u.K)}}).next(()=>B.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ia(t){return new B((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=yI(i.target.error);n(r)}})}var jA=!1;function yI(t){let e=Wo.S(Iu());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jA||(jA=!0,setTimeout(()=>{throw i},0)),i}}return t}var A0=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>U(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){is(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield ns(n)}yield this.X(6e4)}))}},M0=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return U(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return B.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return W("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,r).next(c=>{r-=c,i.add(a)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(r,o)).next(c=>(W("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>a.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let a=$M(o);vI(a,i)>0&&(i=a)}),new Di(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var oi=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function gh(t){return t==null}function Kd(t){return t===0&&1/t==-1/0}function GM(t){return typeof t=="number"&&Number.isInteger(t)&&!Kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ln(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zA(e)),e=nU(t.get(n),e);return zA(e)}function nU(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function zA(t){return t+""}function vr(t){let e=t.length;if(le(e>=2),e===2)return le(t.charAt(0)===""&&t.charAt(1)===""),Qe.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let a=t.indexOf("",o);switch((a<0||a>n)&&oe(),t.charAt(a+1)){case"":let c=t.substring(o,a),u;r.length===0?u=c:(r+=c,u=r,r=""),i.push(u);break;case"":r+=t.substring(o,a),r+="\0";break;case"":r+=t.substring(o,a+1);break;default:oe()}o=a+2}return new Qe(i)}var UA=["userId","batchId"];function Tm(t,e){return[t,Ln(e)]}function WM(t,e,n){return[t,Ln(e),n]}var iU={},rU=["prefixPath","collectionGroup","readTime","documentId"],oU=["prefixPath","collectionGroup","documentId"],sU=["collectionGroup","readTime","prefixPath","documentId"],aU=["canonicalId","targetId"],cU=["targetId","path"],lU=["path","targetId"],uU=["collectionId","parent"],dU=["indexId","uid"],hU=["uid","sequenceNumber"],fU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pU=["indexId","uid","orderedDocumentKey"],mU=["userId","collectionPath","documentId"],gU=["userId","collectionPath","largestBatchId"],_U=["userId","collectionGroup","largestBatchId"],ZM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vU=[...ZM,"documentOverlays"],KM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QM=KM,YM=[...QM,"indexConfiguration","indexState","indexEntries"],yU=YM;var Qd=class extends Lm{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function hn(t,e){let n=ne(t);return Wo.F(n._e,e)}function $A(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ba(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ct=class t{constructor(e,n){this.comparator=e,this.root=n||br.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dl(this.root,e,this.comparator,!0)}},dl=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},br=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();let e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}};br.EMPTY=null,br.RED=!0,br.BLACK=!1;br.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,i,r,o){return this}insert(e,n,i){return new br(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var pt=class t{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vm(this.data.getIterator())}getIteratorFrom(e){return new Vm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Vm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function nl(t){return t.hasNext()?t.getNext():void 0}var si=class t{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new t([])}unionWith(e){let n=new pt($t.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ml(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Bm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function JM(){return typeof atob<"u"}var dn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bm("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dn.EMPTY_BYTE_STRING=new dn("");var bU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(le(!!t),typeof t=="string"){let e=0,n=bU.exec(t);if(le(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Vt(t.seconds),nanos:Vt(t.nanos)}}function Vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zo(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}function Ag(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bI(t){let e=t.mapValue.fields.__previous_value__;return Ag(e)?bI(e):e}function Yd(t){let e=Jr(t.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}var R0=class{constructor(e,n,i,r,o,a,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f}},Ko=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ho={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sm={nullValue:"NULL_VALUE"};function la(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ag(t)?4:eR(t)?9007199254740991:10:oe()}function Er(t,e){if(t===e)return!0;let n=la(t);if(n!==la(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yd(t).isEqual(Yd(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=Jr(r.timestampValue),c=Jr(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Zo(r.bytesValue).isEqual(Zo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Vt(r.geoPointValue.latitude)===Vt(o.geoPointValue.latitude)&&Vt(r.geoPointValue.longitude)===Vt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vt(r.integerValue)===Vt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=Vt(r.doubleValue),c=Vt(o.doubleValue);return a===c?Kd(a)===Kd(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return ml(t.arrayValue.values||[],e.arrayValue.values||[],Er);case 10:return function(r,o){let a=r.mapValue.fields||{},c=o.mapValue.fields||{};if($A(a)!==$A(c))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Er(a[u],c[u])))return!1;return!0}(t,e);default:return oe()}}function Xd(t,e){return(t.values||[]).find(n=>Er(n,e))!==void 0}function Qo(t,e){if(t===e)return 0;let n=la(t),i=la(e);if(n!==i)return Pe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(o,a){let c=Vt(o.integerValue||o.doubleValue),u=Vt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return HA(t.timestampValue,e.timestampValue);case 4:return HA(Yd(t),Yd(e));case 5:return Pe(t.stringValue,e.stringValue);case 6:return function(o,a){let c=Zo(o),u=Zo(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){let c=o.split("/"),u=a.split("/");for(let f=0;f<c.length&&f<u.length;f++){let m=Pe(c[f],u[f]);if(m!==0)return m}return Pe(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){let c=Pe(Vt(o.latitude),Vt(a.latitude));return c!==0?c:Pe(Vt(o.longitude),Vt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,a){let c=o.values||[],u=a.values||[];for(let f=0;f<c.length&&f<u.length;++f){let m=Qo(c[f],u[f]);if(m)return m}return Pe(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,a){if(o===Ho.mapValue&&a===Ho.mapValue)return 0;if(o===Ho.mapValue)return 1;if(a===Ho.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){let w=Pe(u[v],m[v]);if(w!==0)return w;let E=Qo(c[u[v]],f[m[v]]);if(E!==0)return E}return Pe(u.length,m.length)}(t.mapValue,e.mapValue);default:throw oe()}}function HA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);let n=Jr(t),i=Jr(e),r=Pe(n.seconds,i.seconds);return r!==0?r:Pe(n.nanos,i.nanos)}function _l(t){return P0(t)}function P0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Jr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=P0(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${P0(n.fields[a])}`;return r+"}"}(t.mapValue):oe()}function ua(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function k0(t){return!!t&&"integerValue"in t}function Jd(t){return!!t&&"arrayValue"in t}function qA(t){return!!t&&"nullValue"in t}function GA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Am(t){return!!t&&"mapValue"in t}function $d(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ba(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=$d(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$d(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function wU(t){return"nullValue"in t?Sm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ua(Ko.empty(),ee.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:oe()}function IU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ua(Ko.empty(),ee.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ho:oe()}function WA(t,e){let n=Qo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ZA(t,e){let n=Qo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var xn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Am(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$d(n)}setAll(e){let n=$t.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=$d(a):r.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Am(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Er(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Am(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ba(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t($d(this.value))}};function tR(t){let e=[];return ba(t.fields,(n,i)=>{let r=new $t([n]);if(Am(i)){let o=tR(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new si(e)}var Jt=class t{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new t(e,0,fe.min(),fe.min(),fe.min(),xn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,fe.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,fe.min(),fe.min(),xn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,fe.min(),fe.min(),xn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Cr=class{constructor(e,n){this.position=e,this.inclusive=n}};function KA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ee.comparator(ee.fromName(a.referenceValue),n.key):i=Qo(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function QA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Er(t.position[n],e.position[n]))return!1;return!0}var da=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function EU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var jm=class{},qe=class t extends jm{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new L0(e,n,i):n==="array-contains"?new B0(e,i):n==="in"?new zm(e,i):n==="not-in"?new j0(e,i):n==="array-contains-any"?new z0(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new F0(e,i):new V0(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qo(n,this.value)):n!==null&&la(this.value)===la(n)&&this.matchesComparison(Qo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},st=class t extends jm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return vl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function vl(t){return t.op==="and"}function N0(t){return t.op==="or"}function wI(t){return nR(t)&&vl(t)}function nR(t){for(let e of t.filters)if(e instanceof st)return!1;return!0}function O0(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+_l(t.value);if(wI(t))return t.filters.map(e=>O0(e)).join(",");{let e=t.filters.map(n=>O0(n)).join(",");return`${t.op}(${e})`}}function iR(t,e){return t instanceof qe?function(i,r){return r instanceof qe&&i.op===r.op&&i.field.isEqual(r.field)&&Er(i.value,r.value)}(t,e):t instanceof st?function(i,r){return r instanceof st&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,c)=>o&&iR(a,r.filters[c]),!0):!1}(t,e):void oe()}function rR(t,e){let n=t.filters.concat(e);return st.create(n,t.op)}function oR(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${_l(n.value)}`}(t):t instanceof st?function(n){return n.op.toString()+" {"+n.getFilters().map(oR).join(" ,")+"}"}(t):"Filter"}var L0=class extends qe{constructor(e,n,i){super(e,n,i),this.key=ee.fromName(i.referenceValue)}matches(e){let n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}},F0=class extends qe{constructor(e,n){super(e,"in",n),this.keys=sR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},V0=class extends qe{constructor(e,n){super(e,"not-in",n),this.keys=sR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function sR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>ee.fromName(i.referenceValue))}var B0=class extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Jd(n)&&Xd(n.arrayValue,this.value)}},zm=class extends qe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Xd(this.value.arrayValue,n)}},j0=class extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Xd(this.value.arrayValue,n)}},z0=class extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Xd(this.value.arrayValue,i))}};var U0=class{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function $0(t,e=null,n=[],i=[],r=null,o=null,a=null){return new U0(t,e,n,i,r,o,a)}function ha(t){let e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>O0(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),gh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>_l(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>_l(i)).join(",")),e.ue=n}return e.ue}function _h(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!EU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QA(t.startAt,e.startAt)&&QA(t.endAt,e.endAt)}function Um(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $m(t,e){return t.filters.filter(n=>n instanceof qe&&n.field.isEqual(e))}function YA(t,e,n){let i=Sm,r=!0;for(let o of $m(t,e)){let a=Sm,c=!0;switch(o.op){case"<":case"<=":a=wU(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,c=!1;break;case"!=":case"not-in":a=Sm}WA({value:i,inclusive:r},{value:a,inclusive:c})<0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];WA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function XA(t,e,n){let i=Ho,r=!0;for(let o of $m(t,e)){let a=Ho,c=!0;switch(o.op){case">=":case">":a=IU(o.value),c=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,c=!1;break;case"!=":case"not-in":a=Ho}ZA({value:i,inclusive:r},{value:a,inclusive:c})>0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];ZA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}var Hi=class{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function aR(t,e,n,i,r,o,a,c){return new Hi(t,e,n,i,r,o,a,c)}function kl(t){return new Hi(t)}function JA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function II(t){return t.collectionGroup!==null}function fl(t){let e=ne(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new pt($t.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new da(o,i))}),n.has($t.keyField().canonicalString())||e.ce.push(new da($t.keyField(),i))}return e.ce}function Fn(t){let e=ne(t);return e.le||(e.le=CU(e,fl(t))),e.le}function CU(t,e){if(t.limitType==="F")return $0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new da(r.field,o)});let n=t.endAt?new Cr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Cr(t.startAt.position,t.startAt.inclusive):null;return $0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function H0(t,e){let n=t.filters.concat([e]);return new Hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hm(t,e,n){return new Hi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vh(t,e){return _h(Fn(t),Fn(e))&&t.limitType===e.limitType}function cR(t){return`${ha(Fn(t))}|lt:${t.limitType}`}function al(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>oR(r)).join(", ")}]`),gh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>_l(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>_l(r)).join(",")),`Target(${i})`}(Fn(t))}; limitType=${t.limitType})`}function yh(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ee.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of fl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,c,u){let f=KA(a,c,u);return a.inclusive?f<=0:f<0}(i.startAt,fl(i),r)||i.endAt&&!function(a,c,u){let f=KA(a,c,u);return a.inclusive?f>=0:f>0}(i.endAt,fl(i),r))}(t,e)}function lR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uR(t){return(e,n)=>{let i=!1;for(let r of fl(t)){let o=DU(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function DU(t,e,n){let i=t.field.isKeyField()?ee.comparator(e.key,n.key):function(o,a,c){let u=a.data.field(o),f=c.data.field(o);return u!==null&&f!==null?Qo(u,f):oe()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return oe()}}var Dr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ba(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return XM(this.inner)}size(){return this.innerSize}};var xU=new Ct(ee.comparator);function Gn(){return xU}var dR=new Ct(ee.comparator);function zd(...t){let e=dR;for(let n of t)e=e.insert(n.key,n);return e}function hR(t){let e=dR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function yr(){return Hd()}function fR(){return Hd()}function Hd(){return new Dr(t=>t.toString(),(t,e)=>t.isEqual(e))}var TU=new Ct(ee.comparator),SU=new pt(ee.comparator);function Ne(...t){let e=SU;for(let n of t)e=e.add(n);return e}var AU=new pt(Pe);function EI(){return AU}function pR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function mR(t){return{integerValue:""+t}}function gR(t,e){return GM(e)?mR(e):pR(t,e)}var yl=class{constructor(){this._=void 0}};function MU(t,e,n){return t instanceof Yo?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Ag(o)&&(o=bI(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof eo?vR(t,e):t instanceof to?yR(t,e):function(r,o){let a=_R(r,o),c=eM(a)+eM(r.Pe);return k0(a)&&k0(r.Pe)?mR(c):pR(r.serializer,c)}(t,e)}function RU(t,e,n){return t instanceof eo?vR(t,e):t instanceof to?yR(t,e):n}function _R(t,e){return t instanceof Xo?function(i){return k0(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Yo=class extends yl{},eo=class extends yl{constructor(e){super(),this.elements=e}};function vR(t,e){let n=bR(e);for(let i of t.elements)n.some(r=>Er(r,i))||n.push(i);return{arrayValue:{values:n}}}var to=class extends yl{constructor(e){super(),this.elements=e}};function yR(t,e){let n=bR(e);for(let i of t.elements)n=n.filter(r=>!Er(r,i));return{arrayValue:{values:n}}}var Xo=class extends yl{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function eM(t){return Vt(t.integerValue||t.doubleValue)}function bR(t){return Jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var fa=class{constructor(e,n){this.field=e,this.transform=n}};function PU(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof eo&&r instanceof eo||i instanceof to&&r instanceof to?ml(i.elements,r.elements,Er):i instanceof Xo&&r instanceof Xo?Er(i.Pe,r.Pe):i instanceof Yo&&r instanceof Yo}(t.transform,e.transform)}var q0=class{constructor(e,n){this.version=e,this.transformResults=n}},Bt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var bl=class{};function wR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new es(t.key,Bt.none()):new Jo(t.key,t.data,Bt.none());{let n=t.data,i=xn.empty(),r=new pt($t.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new qi(t.key,i,new si(r.toArray()),Bt.none())}}function kU(t,e,n){t instanceof Jo?function(r,o,a){let c=r.value.clone(),u=nM(r.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof qi?function(r,o,a){if(!Mm(r.precondition,o))return void o.convertToUnknownDocument(a.version);let c=nM(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(IR(r)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qd(t,e,n,i){return t instanceof Jo?function(o,a,c,u){if(!Mm(o.precondition,a))return c;let f=o.value.clone(),m=iM(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof qi?function(o,a,c,u){if(!Mm(o.precondition,a))return c;let f=iM(o.fieldTransforms,u,a),m=a.data;return m.setAll(IR(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,a,c){return Mm(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function NU(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=_R(i.transform,r||null);o!=null&&(n===null&&(n=xn.empty()),n.set(i.field,o))}return n||null}function tM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&ml(i,r,(o,a)=>PU(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Jo=class extends bl{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},qi=class extends bl{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function IR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function nM(t,e,n){let i=new Map;le(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,RU(a,c,n[r]))}return i}function iM(t,e,n){let i=new Map;for(let r of t){let o=r.transform,a=n.data.field(r.field);i.set(r.field,MU(o,a,e))}return i}var es=class extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},eh=class extends bl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var th=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&kU(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=qd(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=qd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=fR();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;let u=wR(a,c);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(fe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ne())}isEqual(e){return this.batchId===e.batchId&&ml(this.mutations,e.mutations,(n,i)=>tM(n,i))&&ml(this.baseMutations,e.baseMutations,(n,i)=>tM(n,i))}},G0=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){le(e.mutations.length===i.length);let r=function(){return TU}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new t(e,n,i,r)}};var nh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var W0=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Kt,Ke;function ER(t){switch(t){default:return oe();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function CR(t){if(t===void 0)return Ut("GRPC error has no .code"),$.UNKNOWN;switch(t){case Kt.OK:return $.OK;case Kt.CANCELLED:return $.CANCELLED;case Kt.UNKNOWN:return $.UNKNOWN;case Kt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Kt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Kt.INTERNAL:return $.INTERNAL;case Kt.UNAVAILABLE:return $.UNAVAILABLE;case Kt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Kt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Kt.NOT_FOUND:return $.NOT_FOUND;case Kt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Kt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Kt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Kt.ABORTED:return $.ABORTED;case Kt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Kt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Kt.DATA_LOSS:return $.DATA_LOSS;default:return oe()}}(Ke=Kt||(Kt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";var rM=null;function DR(){return new TextEncoder}var OU=new Bo([4294967295,4294967295],0);function oM(t){let e=DR().encode(t),n=new c0;return n.update(e),new Uint8Array(n.digest())}function sM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Bo([n,i],0),new Bo([r,o],0)]}var Z0=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new aa(`Invalid padding: ${n}`);if(i<0)throw new aa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new aa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new aa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Bo.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Bo.fromNumber(i)));return r.compare(OU)===1&&(r=new Bo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=oM(e),[i,r]=sM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let n=oM(e),[i,r]=sM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},aa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ih=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(fe.min(),r,new Ct(Pe),Gn(),Ne())}},rh=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Ne(),Ne(),Ne())}};var pl=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},qm=class{constructor(e,n){this.targetId=e,this.me=n}},Gm=class{constructor(e,n,i=dn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Wm=class{constructor(){this.fe=0,this.ge=cM(),this.pe=dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Ne(),n=Ne(),i=Ne();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:oe()}}),new rh(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=cM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},K0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gn(),this.qe=aM(),this.Qe=new Ct(Pe)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(Um(o))if(i===0){let a=new ee(o.path);this.Ue(n,a,Jt.newNoDocument(a,fe.min()))}else le(i===1);else{let a=this.Ye(n);if(a!==i){let c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}rM?.et(function(m,v,w,E,M){var k,F,q,ie,Z,ae;let pe={localCacheCount:m,existenceFilterCount:v.count,databaseId:w.database,projectId:w.projectId},ue=v.unchangedNames;return ue&&(pe.bloomFilter={applied:M===0,hashCount:(k=ue?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(ie=(q=(F=ue?.bits)===null||F===void 0?void 0:F.bitmap)===null||q===void 0?void 0:q.length)!==null&&ie!==void 0?ie:0,padding:(ae=(Z=ue?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ae!==void 0?ae:0,mightContain:S=>{var C;return(C=E?.mightContain(S))!==null&&C!==void 0&&C}}),pe}(a,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,a,c;try{a=Zo(i).toUint8Array()}catch(u){if(u instanceof Bm)return Ci("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Z0(a,r,o)}catch(u){return Ci(u instanceof aa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,a)=>{let c=this.Je(a);if(c){if(o.current&&Um(c.target)){let u=new ee(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Jt.newNoDocument(u,e))}o.be&&(n.set(a,o.Ce()),o.ve())}});let i=Ne();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new ih(e,n,this.Qe,this.ke,i);return this.ke=Gn(),this.qe=aM(),this.Qe=new Ct(Pe),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new pt(Pe),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function aM(){return new Ct(ee.comparator)}function cM(){return new Ct(ee.comparator)}var LU={asc:"ASCENDING",desc:"DESCENDING"},FU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VU={and:"AND",or:"OR"},Q0=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Y0(t,e){return t.useProto3Json||gh(e)?e:{value:e}}function wl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BU(t,e){return wl(t,e.toTimestamp())}function Ht(t){return le(!!t),fe.fromTimestamp(function(n){let i=Jr(n);return new Nt(i.seconds,i.nanos)}(t))}function CI(t,e){return X0(t,e).canonicalString()}function X0(t,e){let n=function(r){return new Qe(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TR(t){let e=Qe.fromString(t);return le(FR(e)),e}function oh(t,e){return CI(t.databaseId,e.path)}function wr(t,e){let n=TR(e);if(n.get(1)!==t.databaseId.projectId)throw new H($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(MR(n))}function SR(t,e){return CI(t.databaseId,e)}function AR(t){let e=TR(t);return e.length===4?Qe.emptyPath():MR(e)}function J0(t){return new Qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MR(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lM(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function RR(t,e,n){let i=wr(t,e.name),r=Ht(e.updateTime),o=e.createTime?Ht(e.createTime):fe.min(),a=new xn({mapValue:{fields:e.fields}}),c=Jt.newFoundDocument(i,r,o,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function jU(t,e){return"found"in e?function(i,r){le(!!r.found),r.found.name,r.found.updateTime;let o=wr(i,r.found.name),a=Ht(r.found.updateTime),c=r.found.createTime?Ht(r.found.createTime):fe.min(),u=new xn({mapValue:{fields:r.found.fields}});return Jt.newFoundDocument(o,a,c,u)}(t,e):"missing"in e?function(i,r){le(!!r.missing),le(!!r.readTime);let o=wr(i,r.missing),a=Ht(r.readTime);return Jt.newNoDocument(o,a)}(t,e):oe()}function zU(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(le(m===void 0||typeof m=="string"),dn.fromBase64String(m||"")):(le(m===void 0||m instanceof Buffer||m instanceof Uint8Array),dn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let m=f.code===void 0?$.UNKNOWN:CR(f.code);return new H(m,f.message||"")}(a);n=new Gm(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=wr(t,i.document.name),o=Ht(i.document.updateTime),a=i.document.createTime?Ht(i.document.createTime):fe.min(),c=new xn({mapValue:{fields:i.document.fields}}),u=Jt.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];n=new pl(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=wr(t,i.document),o=i.readTime?Ht(i.readTime):fe.min(),a=Jt.newNoDocument(r,o),c=i.removedTargetIds||[];n=new pl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=wr(t,i.document),o=i.removedTargetIds||[];n=new pl([],o,r,null)}else{if(!("filter"in e))return oe();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new W0(r,o),c=i.targetId;n=new qm(c,a)}}return n}function sh(t,e){let n;if(e instanceof Jo)n={update:lM(t,e.key,e.value)};else if(e instanceof es)n={delete:oh(t,e.key)};else if(e instanceof qi)n={update:lM(t,e.key,e.data),updateMask:WU(e.fieldMask)};else{if(!(e instanceof eh))return oe();n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let c=a.transform;if(c instanceof Yo)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof eo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof to)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Xo)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw oe()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:BU(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:oe()}(t,e.precondition)),n}function ew(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Bt.updateTime(Ht(o.updateTime)):o.exists!==void 0?Bt.exists(o.exists):Bt.none()}(e.currentDocument):Bt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,c){let u=null;if("setToServerValue"in c)le(c.setToServerValue==="REQUEST_TIME"),u=new Yo;else if("appendMissingElements"in c){let m=c.appendMissingElements.values||[];u=new eo(m)}else if("removeAllFromArray"in c){let m=c.removeAllFromArray.values||[];u=new to(m)}else"increment"in c?u=new Xo(a,c.increment):oe();let f=$t.fromServerFormat(c.fieldPath);return new fa(f,u)}(t,r)):[];if(e.update){e.update.name;let r=wr(t,e.update.name),o=new xn({mapValue:{fields:e.update.fields}});if(e.updateMask){let a=function(u){let f=u.fieldPaths||[];return new si(f.map(m=>$t.fromServerFormat(m)))}(e.updateMask);return new qi(r,o,a,n,i)}return new Jo(r,o,n,i)}if(e.delete){let r=wr(t,e.delete);return new es(r,n)}if(e.verify){let r=wr(t,e.verify);return new eh(r,n)}return oe()}function UU(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?Ht(r.updateTime):Ht(o);return a.isEqual(fe.min())&&(a=Ht(o)),new q0(a,r.transformResults||[])}(n,e))):[]}function PR(t,e){return{documents:[SR(t,e.path)]}}function kR(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=SR(t,r);let o=function(f){if(f.length!==0)return LR(st.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(w){return{field:cl(w.field),direction:HU(w.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);let c=Y0(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function NR(t){let e=AR(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){le(i===1);let m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(v){let w=OR(v);return w instanceof st&&wI(w)?w.getFilters():[w]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(w=>function(M){return new da(ll(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let c=null;n.limit&&(c=function(v){let w;return w=typeof v=="object"?v.value:v,gh(w)?null:w}(n.limit));let u=null;n.startAt&&(u=function(v){let w=!!v.before,E=v.values||[];return new Cr(E,w)}(n.startAt));let f=null;return n.endAt&&(f=function(v){let w=!v.before,E=v.values||[];return new Cr(E,w)}(n.endAt)),aR(e,r,a,o,c,"F",u,f)}function $U(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=ll(n.unaryFilter.field);return qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ll(n.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ll(n.unaryFilter.field);return qe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=ll(n.unaryFilter.field);return qe.create(a,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ll(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return st.create(n.compositeFilter.filters.map(i=>OR(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function HU(t){return LU[t]}function qU(t){return FU[t]}function GU(t){return VU[t]}function cl(t){return{fieldPath:t.canonicalString()}}function ll(t){return $t.fromServerFormat(t.fieldPath)}function LR(t){return t instanceof qe?function(n){if(n.op==="=="){if(GA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NAN"}};if(qA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NAN"}};if(qA(n.value))return{unaryFilter:{field:cl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cl(n.field),op:qU(n.op),value:n.value}}}(t):t instanceof st?function(n){let i=n.getFilters().map(r=>LR(r));return i.length===1?i[0]:{compositeFilter:{op:GU(n.op),filters:i}}}(t):oe()}function WU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Il=class t{constructor(e,n,i,r,o=fe.min(),a=fe.min(),c=dn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Zm=class{constructor(e){this.ct=e}};function ZU(t,e){let n;if(e.document)n=RR(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=ee.fromSegments(e.noDocument.path),r=ma(e.noDocument.readTime);n=Jt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return oe();{let i=ee.fromSegments(e.unknownDocument.path),r=ma(e.unknownDocument.version);n=Jt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Nt(r[0],r[1]);return fe.fromTimestamp(o)}(e.readTime)),n}function uM(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Km(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,a){return{name:oh(o,a.key),fields:a.data.value.mapValue.fields,updateTime:wl(o,a.version.toTimestamp()),createTime:wl(o,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:pa(e.version)};else{if(!e.isUnknownDocument())return oe();i.unknownDocument={path:n.path.toArray(),version:pa(e.version)}}return i}function Km(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function pa(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ma(t){let e=new Nt(t.seconds,t.nanoseconds);return fe.fromTimestamp(e)}function ra(t,e){let n=(e.baseMutations||[]).map(o=>ew(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let c=e.mutations[o+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>ew(t.ct,o)),r=Nt.fromMillis(e.localWriteTimeMs);return new th(e.batchId,r,n,i)}function Ud(t){let e=ma(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ma(t.lastLimboFreeSnapshotVersion):fe.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return le(o.documents.length===1),Fn(kl(AR(o.documents[0])))}(t.query):function(o){return Fn(NR(o))}(t.query),new Il(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dn.fromBase64String(t.resumeToken))}function VR(t,e){let n=pa(e.snapshotVersion),i=pa(e.lastLimboFreeSnapshotVersion),r;r=Um(e.target)?PR(t.ct,e.target):kR(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ha(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function DI(t){let e=NR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hm(e,e.limit,"L"):e}function m0(t,e){return new nh(e.largestBatchId,ew(t.ct,e.overlayMutation))}function dM(t,e){let n=e.path.lastSegment();return[t,Ln(e.path.popLast()),n]}function hM(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:pa(i.readTime),documentKey:Ln(i.documentKey.path),largestBatchId:i.largestBatchId}}var tw=class{getBundleMetadata(e,n){return fM(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:ma(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return fM(e).put(function(r){return{bundleId:r.id,createTime:pa(Ht(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return pM(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:DI(o.bundledQuery),readTime:ma(o.readTime)}}(i)})}saveNamedQuery(e,n){return pM(e).put(function(r){return{name:r.name,readTime:pa(Ht(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function fM(t){return hn(t,"bundles")}function pM(t){return hn(t,"namedQueries")}var Qm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Fd(e).get(dM(this.userId,n)).next(i=>i?m0(this.serializer,i):null)}getOverlays(e,n){let i=yr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,a)=>{let c=new nh(n,a);r.push(this.ht(e,c))}),B.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(a=>r.add(Ln(a.getCollectionPath())));let o=[];return r.forEach(a=>{let c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);o.push(Fd(e).j("collectionPathOverlayIndex",c))}),B.waitFor(o)}getOverlaysForCollection(e,n,i){let r=yr(),o=Ln(n),a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fd(e).U("collectionPathOverlayIndex",a).next(c=>{for(let u of c){let f=m0(this.serializer,u);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=yr(),a,c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fd(e).J({index:"collectionGroupOverlayIndex",range:c},(u,f,m)=>{let v=m0(this.serializer,f);o.size()<r||v.largestBatchId===a?(o.set(v.getKey(),v),a=v.largestBatchId):m.done()}).next(()=>o)}ht(e,n){return Fd(e).put(function(r,o,a){let[c,u,f]=dM(o,a.mutation.key);return{userId:o,collectionPath:u,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:sh(r.ct,a.mutation)}}(this.serializer,this.userId,n))}};function Fd(t){return hn(t,"documentOverlays")}var Yr=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Vt(e.integerValue));else if("doubleValue"in e){let i=Vt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Kd(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Jr(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Zo(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?eR(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):oe()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),ee.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Yr.bt=new Yr;function KU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function mM(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let a=KU(255&i[o]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}var nw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=mM(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=mM(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},iw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},rw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},oa=class{constructor(){this.Gt=new nw,this.zt=new iw(this.Gt),this.jt=new rw(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var sa=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function jo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=gM(t.arrayValue,e.arrayValue),n!==0?n:(n=gM(t.directionalValue,e.directionalValue),n!==0?n:ee.comparator(t.documentKey,e.documentKey)))}function gM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Ym=class{constructor(e){this.Yt=new pt((n,i)=>$t.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(le(e.collectionGroup===this.collectionId),this.en)return!1;let n=x0(e);if(n!==void 0&&!this.nn(n))return!1;let i=na(e),r=new Set,o=0,a=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let c=this.Yt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let u=i[o];if(!this.rn(c,u)||!this.sn(this.Zt[a++],u))return!1}++o}for(;o<i.length;++o){let c=i[o];if(a>=this.Zt.length||!this.sn(this.Zt[a++],c))return!1}return!0}on(){if(this.en)return null;let e=new pt($t.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new hl(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new hl(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new hl(i.field,i.dir==="asc"?0:1)));return new gl(gl.UNKNOWN_ID,this.collectionId,n,Zd.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function BR(t){var e,n;if(le(t instanceof qe||t instanceof st),t instanceof qe){if(t instanceof zm){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>qe.create(t.field,"==",o)))||[];return st.create(r,"or")}return t}let i=t.filters.map(r=>BR(r));return st.create(i,t.op)}function QU(t){if(t.getFilters().length===0)return[];let e=aw(BR(t));return le(jR(e)),ow(e)||sw(e)?[e]:e.getFilters()}function ow(t){return t instanceof qe}function sw(t){return t instanceof st&&wI(t)}function jR(t){return ow(t)||sw(t)||function(n){if(n instanceof st&&N0(n)){for(let i of n.getFilters())if(!ow(i)&&!sw(i))return!1;return!0}return!1}(t)}function aw(t){if(le(t instanceof qe||t instanceof st),t instanceof qe)return t;if(t.filters.length===1)return aw(t.filters[0]);let e=t.filters.map(i=>aw(i)),n=st.create(e,t.op);return n=Xm(n),jR(n)?n:(le(n instanceof st),le(vl(n)),le(n.filters.length>1),n.filters.reduce((i,r)=>xI(i,r)))}function xI(t,e){let n;return le(t instanceof qe||t instanceof st),le(e instanceof qe||e instanceof st),n=t instanceof qe?e instanceof qe?function(r,o){return st.create([r,o],"and")}(t,e):_M(t,e):e instanceof qe?_M(e,t):function(r,o){if(le(r.filters.length>0&&o.filters.length>0),vl(r)&&vl(o))return rR(r,o.getFilters());let a=N0(r)?r:o,c=N0(r)?o:r,u=a.filters.map(f=>xI(f,c));return st.create(u,"or")}(t,e),Xm(n)}function _M(t,e){if(vl(e))return rR(e,t.getFilters());{let n=e.filters.map(i=>xI(t,i));return st.create(n,"or")}}function Xm(t){if(le(t instanceof qe||t instanceof st),t instanceof qe)return t;let e=t.getFilters();if(e.length===1)return Xm(e[0]);if(nR(t))return t;let n=e.map(r=>Xm(r)),i=[];return n.forEach(r=>{r instanceof qe?i.push(r):r instanceof st&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:st.create(i,t.op)}var cw=class{constructor(){this._n=new ah}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Di.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Di.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},ah=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new pt(Qe.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new pt(Qe.comparator)).toArray()}};var Em=new Uint8Array(0),lw=class{constructor(e,n){this.databaseId=n,this.an=new ah,this.un=new Dr(i=>ha(i),(i,r)=>_h(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:Ln(r)};return vM(e).put(o)}return B.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[zM(n),""],!1,!0);return vM(e).U(r).next(o=>{for(let a of o){if(a.collectionId!==n)break;i.push(vr(a.parent))}return i})}addFieldIndex(e,n){let i=Vd(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let a=rl(e);return o.next(c=>{a.put(hM(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=Vd(e),r=rl(e),o=il(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Vd(e),i=il(e),r=rl(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return B.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new Ym(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=il(e),r=!0,o=new Map;return B.forEach(this.cn(n),a=>this.ln(e,a).next(c=>{r&&(r=!!c),o.set(a,c)})).next(()=>{if(r){let a=Ne(),c=[];return B.forEach(o,(u,f)=>{W("IndexedDbIndexManager",`Using index ${function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`}(u)} to execute ${ha(n)}`);let m=function(Z,ae){let pe=x0(ae);if(pe===void 0)return null;for(let ue of $m(Z,pe.fieldPath))switch(ue.op){case"array-contains-any":return ue.value.arrayValue.values||[];case"array-contains":return[ue.value]}return null}(f,u),v=function(Z,ae){let pe=new Map;for(let ue of na(ae))for(let S of $m(Z,ue.fieldPath))switch(S.op){case"==":case"in":pe.set(ue.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return pe.set(ue.fieldPath.canonicalString(),S.value),Array.from(pe.values())}return null}(f,u),w=function(Z,ae){let pe=[],ue=!0;for(let S of na(ae)){let C=S.kind===0?YA(Z,S.fieldPath,Z.startAt):XA(Z,S.fieldPath,Z.startAt);pe.push(C.value),ue&&(ue=C.inclusive)}return new Cr(pe,ue)}(f,u),E=function(Z,ae){let pe=[],ue=!0;for(let S of na(ae)){let C=S.kind===0?XA(Z,S.fieldPath,Z.endAt):YA(Z,S.fieldPath,Z.endAt);pe.push(C.value),ue&&(ue=C.inclusive)}return new Cr(pe,ue)}(f,u),M=this.hn(u,f,w),k=this.hn(u,f,E),F=this.Pn(u,f,v),q=this.In(u.indexId,m,M,w.inclusive,k,E.inclusive,F);return B.forEach(q,ie=>i.G(ie,n.limit).next(Z=>{Z.forEach(ae=>{let pe=ee.fromSegments(ae.documentKey);a.has(pe)||(a=a.add(pe),c.push(pe))})}))}).next(()=>c)}return B.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=QU(st.create(e.filters,"and")).map(i=>$0(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,a,c){let u=(n!=null?n.length:1)*Math.max(i.length,o.length),f=u/(n!=null?n.length:1),m=[];for(let v=0;v<u;++v){let w=n?this.Tn(n[v/f]):Em,E=this.En(e,w,i[v%f],r),M=this.dn(e,w,o[v%f],a),k=c.map(F=>this.En(e,w,F,!0));m.push(...this.createRange(E,M,k))}return m}En(e,n,i,r){let o=new sa(e,ee.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new sa(e,ee.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new Ym(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let a=null;for(let c of o)i.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,n){let i=2,r=this.cn(n);return B.forEach(r,o=>this.ln(e,o).next(a=>{a?i!==0&&a.fields.length<function(u){let f=new pt($t.comparator),m=!1;for(let v of u.filters)for(let w of v.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?m=!0:f=f.add(w.field));for(let v of u.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(o)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new oa;for(let r of na(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let a=i.Ht(r.kind);Yr.bt.Pt(o,a)}return i.Wt()}Tn(e){let n=new oa;return Yr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new oa;return Yr.bt.Pt(ua(this.databaseId,n),i.Ht(function(o){let a=na(o);return a.length===0?0:a[a.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new oa);let o=0;for(let a of na(e)){let c=i[o++];for(let u of r)if(this.Vn(n,a.fieldPath)&&Jd(c))r=this.mn(r,a,c);else{let f=u.Ht(a.kind);Yr.bt.Pt(c,f)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let a of i.arrayValue.values||[])for(let c of r){let u=new oa;u.seed(c.Wt()),Yr.bt.Pt(a,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof qe&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Vd(e),r=rl(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let a=[];return B.forEach(o,c=>r.get([c.indexId,this.uid]).next(u=>{a.push(function(m,v){let w=v?new Zd(v.sequenceNumber,new Di(ma(v.readTime),new ee(vr(v.documentKey)),v.largestBatchId)):Zd.empty(),E=m.fields.map(([M,k])=>new hl($t.fromServerFormat(M),k));return new gl(m.indexId,m.collectionGroup,E,w)}(c,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Pe(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Vd(e),o=rl(e);return this.gn(e).next(a=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>B.forEach(c,u=>o.put(hM(u.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){let i=new Map;return B.forEach(n,(r,o)=>{let a=i.get(r.collectionGroup);return(a?B.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),B.forEach(c,u=>this.pn(e,r,u).next(f=>{let m=this.yn(o,u);return f.isEqual(m)?B.resolve():this.wn(e,o,u,f,m)}))))})}Sn(e,n,i,r){return il(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return il(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=il(e),o=new pt(jo);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(a,c)=>{o=o.add(new sa(i.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>o)}yn(e,n){let i=new pt(jo),r=this.An(n,e);if(r==null)return i;let o=x0(n);if(o!=null){let a=e.data.field(o.fieldPath);if(Jd(a))for(let c of a.arrayValue.values||[])i=i.add(new sa(n.indexId,e.key,this.Tn(c),r))}else i=i.add(new sa(n.indexId,e.key,Em,r));return i}wn(e,n,i,r,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let a=[];return function(u,f,m,v,w){let E=u.getIterator(),M=f.getIterator(),k=nl(E),F=nl(M);for(;k||F;){let q=!1,ie=!1;if(k&&F){let Z=m(k,F);Z<0?ie=!0:Z>0&&(q=!0)}else k!=null?ie=!0:q=!0;q?(v(F),F=nl(M)):ie?(w(k),k=nl(E)):(k=nl(E),F=nl(M))}}(r,o,jo,c=>{a.push(this.Sn(e,n,i,c))},c=>{a.push(this.bn(e,n,i,c))}),B.waitFor(a)}gn(e){let n=1;return rl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,c)=>jo(a,c)).filter((a,c,u)=>!c||jo(a,u[c-1])!==0);let r=[];r.push(e);for(let a of i){let c=jo(a,e),u=jo(a,n);if(c===0)r[0]=e.Jt();else if(c>0&&u<0)r.push(a),r.push(a.Jt());else if(u>0)break}r.push(n);let o=[];for(let a=0;a<r.length;a+=2){if(this.Dn(r[a],r[a+1]))return[];let c=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,Em,[]],u=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,Em,[]];o.push(IDBKeyRange.bound(c,u))}return o}Dn(e,n){return jo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yM)}getMinOffset(e,n){return B.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||oe())).next(yM)}};function vM(t){return hn(t,"collectionParents")}function il(t){return hn(t,"indexEntries")}function Vd(t){return hn(t,"indexConfiguration")}function rl(t){return hn(t,"indexState")}function yM(t){le(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;vI(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Di(e.readTime,e.documentKey,n)}var bM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ei=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function zR(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId),c=0,u=i.J({range:a},(m,v,w)=>(c++,w.delete()));o.push(u.next(()=>{le(c===1)}));let f=[];for(let m of n.mutations){let v=WM(e,m.key.path,n.batchId);o.push(r.delete(v)),f.push(m.key)}return B.waitFor(o).next(()=>f)}function Jm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw oe();e=t.noDocument}return JSON.stringify(e).length}Ei.DEFAULT_COLLECTION_PERCENTILE=10,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ei.DEFAULT=new Ei(41943040,Ei.DEFAULT_COLLECTION_PERCENTILE,Ei.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ei.DISABLED=new Ei(-1,0,0);var eg=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){le(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zo(e).J({index:"userMutationsIndex",range:i},(r,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=ul(e),a=zo(e);return a.add({}).next(c=>{le(typeof c=="number");let u=new th(c,n,i,r),f=function(E,M,k){let F=k.baseMutations.map(ie=>sh(E.ct,ie)),q=k.mutations.map(ie=>sh(E.ct,ie));return{userId:M,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:F,mutations:q}}(this.serializer,this.userId,u),m=[],v=new pt((w,E)=>Pe(w.canonicalString(),E.canonicalString()));for(let w of r){let E=WM(this.userId,w.key.path,c);v=v.add(w.key.path.popLast()),m.push(a.put(f)),m.push(o.put(E,iU))}return v.forEach(w=>{m.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[c]=u.keys()}),B.waitFor(m).next(()=>u)})}lookupMutationBatch(e,n){return zo(e).get(n).next(i=>i?(le(i.userId===this.userId),ra(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?B.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return zo(e).J({index:"userMutationsIndex",range:r},(a,c,u)=>{c.userId===this.userId&&(le(c.batchId>=i),o=ra(this.serializer,c)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return zo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,a)=>{i=o.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zo(e).U("userMutationsIndex",n).next(i=>i.map(r=>ra(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=Tm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return ul(e).J({range:r},(a,c,u)=>{let[f,m,v]=a,w=vr(m);if(f===this.userId&&n.path.isEqual(w))return zo(e).get(v).next(E=>{if(!E)throw oe();le(E.userId===this.userId),o.push(ra(this.serializer,E))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pt(Pe),r=[];return n.forEach(o=>{let a=Tm(this.userId,o.path),c=IDBKeyRange.lowerBound(a),u=ul(e).J({range:c},(f,m,v)=>{let[w,E,M]=f,k=vr(E);w===this.userId&&o.path.isEqual(k)?i=i.add(M):v.done()});r.push(u)}),B.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=Tm(this.userId,i),a=IDBKeyRange.lowerBound(o),c=new pt(Pe);return ul(e).J({range:a},(u,f,m)=>{let[v,w,E]=u,M=vr(w);v===this.userId&&i.isPrefixOf(M)?M.length===r&&(c=c.add(E)):m.done()}).next(()=>this.Fn(e,c))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(zo(e).get(o).next(a=>{if(a===null)throw oe();le(a.userId===this.userId),i.push(ra(this.serializer,a))}))}),B.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return zR(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),B.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();let i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return ul(e).J({range:i},(o,a,c)=>{if(o[0]===this.userId){let u=vr(o[1]);r.push(u)}else c.done()}).next(()=>{le(r.length===0)})})}containsKey(e,n){return UR(e,this.userId,n)}xn(e){return $R(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function UR(t,e,n){let i=Tm(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),a=!1;return ul(t).J({range:o,H:!0},(c,u,f)=>{let[m,v,w]=c;m===e&&v===r&&(a=!0),f.done()}).next(()=>a)}function zo(t){return hn(t,"mutations")}function ul(t){return hn(t,"documentMutations")}function $R(t){return hn(t,"mutationQueues")}var El=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var uw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new El(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>fe.fromTimestamp(new Nt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>ol(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(le(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return ol(e).J((a,c)=>{let u=Ud(c);u.sequenceNumber<=n&&i.get(u.targetId)===null&&(r++,o.push(this.removeTargetData(e,u)))}).next(()=>B.waitFor(o)).next(()=>r)}forEachTarget(e,n){return ol(e).J((i,r)=>{let o=Ud(r);n(o)})}Bn(e){return wM(e).get("targetGlobalKey").next(n=>(le(n!==null),n))}kn(e,n){return wM(e).put("targetGlobalKey",n)}qn(e,n){return ol(e).put(VR(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=ha(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return ol(e).J({range:r,index:"queryTargetsIndex"},(a,c,u)=>{let f=Ud(c);_h(n,f.target)&&(o=f,u.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Uo(e);return n.forEach(a=>{let c=Ln(a.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,a))}),B.waitFor(r)}removeMatchingKeys(e,n,i){let r=Uo(e);return B.forEach(n,o=>{let a=Ln(o.path);return B.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Uo(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Uo(e),o=Ne();return r.J({range:i,H:!0},(a,c,u)=>{let f=vr(a[1]),m=new ee(f);o=o.add(m)}).next(()=>o)}containsKey(e,n){let i=Ln(n.path),r=IDBKeyRange.bound([i],[zM(i)],!1,!0),o=0;return Uo(e).J({index:"documentTargetsIndex",H:!0,range:r},([a,c],u,f)=>{a!==0&&(o++,f.done())}).next(()=>o>0)}ot(e,n){return ol(e).get(n).next(i=>i?Ud(i):null)}};function ol(t){return hn(t,"targets")}function wM(t){return hn(t,"targetGlobal")}function Uo(t){return hn(t,"targetDocuments")}function IM([t,e],[n,i]){let r=Pe(t,n);return r===0?Pe(e,i):r}var dw=class{constructor(e){this.Kn=e,this.buffer=new pt(IM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();IM(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},hw=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>U(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){is(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield ns(n)}yield this.zn(3e5)}))}},fw=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(oi.oe);let i=new dw(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(bM)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bM):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,a,c,u,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,a=Date.now(),this.nthSequenceNumber(e,r))).next(v=>(i=v,c=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),sl()<=rr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${v} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}};function YU(t,e){return new fw(t,e)}var pw=class{constructor(e,n){this.db=e,this.garbageCollector=YU(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return Cm(e,i)}removeReference(e,n,i){return Cm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Cm(e,n)}er(e,n){return function(r,o){let a=!1;return $R(r).Y(c=>UR(r,c,o).next(u=>(u&&(a=!0),B.resolve(!u)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(a,c)=>{if(c<=n){let u=this.er(e,a).next(f=>{if(!f)return o++,i.getEntry(e,a).next(()=>(i.removeEntry(a,fe.min()),Uo(e).delete(function(v){return[0,Ln(v.path)]}(a))))});r.push(u)}}).next(()=>B.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Cm(e,n)}Xn(e,n){let i=Uo(e),r,o=oi.oe;return i.J({index:"documentTargetsIndex"},([a,c],{path:u,sequenceNumber:f})=>{a===0?(o!==oi.oe&&n(new ee(vr(r)),o),o=f,r=u):o=oi.oe}).next(()=>{o!==oi.oe&&n(new ee(vr(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Cm(t,e){return Uo(t).put(function(i,r){return{targetId:0,path:Ln(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var tg=class{constructor(){this.changes=new Dr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var mw=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return ta(e).put(i)}removeEntry(e,n,i){return ta(e).delete(function(o,a){let c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Km(a),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=Jt.newInvalidDocument(n);return ta(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:Jt.newInvalidDocument(n)};return ta(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(n))},(r,o)=>{i={document:this.nr(n,o),size:Jm(o)}}).next(()=>i)}getEntries(e,n){let i=Gn();return this.ir(e,n,(r,o)=>{let a=this.nr(r,o);i=i.insert(r,a)}).next(()=>i)}sr(e,n){let i=Gn(),r=new Ct(ee.comparator);return this.ir(e,n,(o,a)=>{let c=this.nr(o,a);i=i.insert(o,c),r=r.insert(o,Jm(a))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return B.resolve();let r=new pt(DM);n.forEach(u=>r=r.add(u));let o=IDBKeyRange.bound(Bd(r.first()),Bd(r.last())),a=r.getIterator(),c=a.getNext();return ta(e).J({index:"documentKeyIndex",range:o},(u,f,m)=>{let v=ee.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&DM(c,v)<0;)i(c,null),c=a.getNext();c&&c.isEqual(v)&&(i(c,f),c=a.hasNext()?a.getNext():null),c?m.$(Bd(c)):m.done()}).next(()=>{for(;c;)i(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let a=n.path,c=[a.popLast().toArray(),a.lastSegment(),Km(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ta(e).U(IDBKeyRange.bound(c,u,!0)).next(f=>{o?.incrementDocumentReadCount(f.length);let m=Gn();for(let v of f){let w=this.nr(ee.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(yh(n,w)||r.has(w.key))&&(m=m.insert(w.key,w))}return m})}getAllFromCollectionGroup(e,n,i,r){let o=Gn(),a=CM(n,i),c=CM(n,Di.max());return ta(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(u,f,m)=>{let v=this.nr(ee.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===r&&m.done()}).next(()=>o)}newChangeBuffer(e){return new gw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return EM(e).get("remoteDocumentGlobalKey").next(n=>(le(!!n),n))}tr(e,n){return EM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=ZU(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(fe.min())))return i}return Jt.newInvalidDocument(e)}};function HR(t){return new mw(t)}var gw=class extends tg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Dr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new pt((o,a)=>Pe(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{let c=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,c.readTime)),a.isValidDocument()){let u=uM(this.ar.serializer,a);r=r.add(o.path.popLast());let f=Jm(u);i+=f-c.size,n.push(this.ar.addEntry(e,o,u))}else if(i-=c.size,this.trackRemovals){let u=uM(this.ar.serializer,a.convertToNoDocument(fe.min()));n.push(this.ar.addEntry(e,o,u))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),B.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,a)=>{this.ur.set(o,{size:a,readTime:i.get(o).readTime})}),i))}};function EM(t){return hn(t,"remoteDocumentGlobal")}function ta(t){return hn(t,"remoteDocumentsV14")}function Bd(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CM(t,e){let n=e.documentKey.path.toArray();return[t,Km(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function DM(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Pe(n[o],i[o]),r)return r;return r=Pe(n.length,i.length),r||(r=Pe(n[n.length-2],i[i.length-2]),r||Pe(n[n.length-1],i[i.length-1]))}var _w=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ng=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&qd(i.mutation,r,si.empty(),Nt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ne()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ne()){let r=yr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=zd();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){let i=yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ne()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=Gn(),a=Hd(),c=function(){return Hd()}();return n.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof qi)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),qd(m.mutation,f,m.mutation.getFieldMask(),Nt.now())):a.set(f.key,si.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>{var v;return c.set(f,new _w(m,(v=a.get(f))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){let i=Hd(),r=new Ct((a,c)=>a-c),o=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(let c of a)c.keys().forEach(u=>{let f=n.get(u);if(f===null)return;let m=i.get(u)||si.empty();m=c.applyToLocalView(f,m),i.set(u,m);let v=(r.get(c.batchId)||Ne()).add(u);r=r.insert(c.batchId,v)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),f=u.key,m=u.value,v=fR();m.forEach(w=>{if(!o.has(w)){let E=wR(n.get(w),i.get(w));E!==null&&v.set(w,E),o=o.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ee.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):II(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):B.resolve(yr()),c=-1,u=o;return a.next(f=>B.forEach(f,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{u=u.insert(m,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,Ne())).next(m=>({batchId:c,changes:hR(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(i=>{let r=zd();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,a=zd();return this.indexManager.getCollectionParents(e,o).next(c=>B.forEach(c,u=>{let f=function(v,w){return new Hi(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((v,w)=>{a=a.insert(v,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,Jt.newInvalidDocument(m)))});let c=zd();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&qd(m.mutation,f,si.empty(),Nt.now()),yh(n,f)&&(c=c.insert(u,f))}),c})}};var vw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ht(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:DI(r.bundledQuery),readTime:Ht(r.readTime)}}(n)),B.resolve()}};var yw=class{constructor(){this.overlays=new Ct(ee.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let i=yr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){let r=yr(),o=n.length+1,a=new ee(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ct((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=yr(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let c=yr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return B.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new nh(n,i));let o=this.hr.get(n);o===void 0&&(o=Ne(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var ch=class{constructor(){this.Pr=new pt(Qt.Ir),this.Tr=new pt(Qt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new Qt(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new Qt(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new ee(new Qe([])),i=new Qt(n,e),r=new Qt(n,e+1),o=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new ee(new Qe([])),i=new Qt(n,e),r=new Qt(n,e+1),o=Ne();return this.Tr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let n=new Qt(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},Qt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return ee.comparator(e.key,n.key)||Pe(e.pr,n.pr)}static Er(e,n){return Pe(e.pr,n.pr)||ee.comparator(e.key,n.key)}};var bw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new pt(Qt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new th(o,n,i,r);this.mutationQueue.push(a);for(let c of r)this.wr=this.wr.add(new Qt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new Qt(n,0),r=new Qt(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],a=>{let c=this.Sr(a.pr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new pt(Pe);return n.forEach(r=>{let o=new Qt(r,0),a=new Qt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],c=>{i=i.add(c.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;ee.isDocumentKey(o)||(o=o.child(""));let a=new Qt(new ee(o),0),c=new pt(Pe);return this.wr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(u.pr)),!0)},a),B.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){le(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(n.mutations,r=>{let o=new Qt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new Qt(n,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ww=class{constructor(e){this.vr=e,this.docs=function(){return new Ct(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let i=Gn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Jt.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Gn(),a=n.path,c=new ee(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||vI($M(m),i)<=0||(r.has(m.key)||yh(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,i,r){oe()}Fr(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new Iw(this)}getSize(e){return B.resolve(this.size)}},Iw=class extends tg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Ew=class{constructor(e){this.persistence=e,this.Mr=new Dr(n=>ha(n),_h),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ch,this.targetCount=0,this.Lr=El.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new El(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),B.waitFor(o).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}};var ig=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new oi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ew(this),this.indexManager=new cw,this.remoteDocumentCache=function(r){return new ww(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Zm(n),this.$r=new vw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new bw(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){W("MemoryPersistence","Starting transaction:",e);let r=new Cw(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},Cw=class extends Lm{constructor(e){super(),this.currentSequenceNumber=e}},rg=class t{constructor(e){this.persistence=e,this.zr=new ch,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw oe()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{let r=ee.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,fe.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Dw=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new Fm("createOrUpgrade",n);i<1&&r>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0}),u.createObjectStore("documentMutations")}(e),xM(e),function(u){u.createObjectStore("remoteDocuments")}(e));let a=B.resolve();return i<3&&r>=3&&(i!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),xM(e)),a=a.next(()=>function(u){let f=u.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(o))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(u,f){return f.store("mutations").U().next(m=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0});let v=f.store("mutations"),w=m.map(E=>v.put(E));return B.waitFor(w)})}(e,o))),a=a.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Xr(o))),i<6&&r>=6&&(a=a.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(a=a.next(()=>this.ti(o))),i<8&&r>=8&&(a=a.next(()=>this.ni(e,o))),i<9&&r>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ri(o))),i<11&&r>=11&&(a=a.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(u){let f=u.createObjectStore("documentOverlays",{keyPath:mU});f.createIndex("collectionPathOverlayIndex",gU,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",_U,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(u){let f=u.createObjectStore("remoteDocumentsV14",{keyPath:rU});f.createIndex("documentKeyIndex",oU),f.createIndex("collectionGroupIndex",sU)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,o))),i<15&&r>=15&&(a=a.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:dU}).createIndex("sequenceNumberIndex",hU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:fU}).createIndex("documentKeyIndex",pU,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),a}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=Jm(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>B.forEach(r,o=>{let a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",a).next(c=>B.forEach(c,u=>{le(u.userId===o.userId);let f=ra(this.serializer,u);return zR(e,o.userId,f).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((a,c)=>{let u=new Qe(a),f=function(v){return[0,Ln(v)]}(u);o.push(n.get(f).next(m=>m?B.resolve():(v=>n.put({targetId:0,path:Ln(v),sequenceNumber:r.highestListenSequenceNumber}))(u)))}).next(()=>B.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:uU});let i=n.store("collectionParents"),r=new ah,o=a=>{if(r.add(a)){let c=a.lastSegment(),u=a.popLast();return i.put({collectionId:c,parent:Ln(u)})}};return n.store("remoteDocuments").J({H:!0},(a,c)=>{let u=new Qe(a);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,c,u],f)=>{let m=vr(c);return o(m.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=Ud(r),a=VR(this.serializer,o);return n.put(a)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,a)=>{let c=n.store("remoteDocumentsV14"),u=function(v){return v.document?new ee(Qe.fromString(v.document.name).popFirst(5)):v.noDocument?ee.fromSegments(v.noDocument.path):v.unknownDocument?ee.fromSegments(v.unknownDocument.path):oe()}(a).path.toArray(),f={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(c.put(f))}).next(()=>B.waitFor(r))}si(e,n){let i=n.store("mutations"),r=HR(this.serializer),o=new ig(rg.Hr,this.serializer.ct);return i.U().next(a=>{let c=new Map;return a.forEach(u=>{var f;let m=(f=c.get(u.userId))!==null&&f!==void 0?f:Ne();ra(this.serializer,u).keys().forEach(v=>m=m.add(v)),c.set(u.userId,m)}),B.forEach(c,(u,f)=>{let m=new Yt(f),v=Qm.lt(this.serializer,m),w=o.getIndexManager(m),E=eg.lt(m,this.serializer,w,o.referenceDelegate);return new ng(r,E,v,w).recalculateAndSaveOverlaysForDocumentKeys(new Qd(n,oi.oe),u).next()})})}};function xM(t){t.createObjectStore("targetDocuments",{keyPath:cU}).createIndex("documentTargetsIndex",lU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aU,{unique:!0}),t.createObjectStore("targetGlobal")}var g0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",xw=class t{constructor(e,n,i,r,o,a,c,u,f,m,v=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=a,this.document=c,this._i=f,this.ai=m,this.ui=v,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new H($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pw(this,r),this.Ti=n+"main",this.serializer=new Zm(u),this.Ei=new Wo(this.Ti,this.ui,new Dw(this.serializer)),this.Qr=new uw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HR(this.serializer),this.$r=new tw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,m===!1&&Ut("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H($.FAILED_PRECONDITION,g0);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new oi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>U(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>U(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>U(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(is(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return jd(e).get("owner").next(n=>B.resolve(this.Si(n)))}bi(e){return Dm(e).delete(this.clientId)}Di(){return U(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=hn(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),a=r.filter(c=>o.indexOf(c)===-1);return B.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):jd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new H($.FAILED_PRECONDITION,g0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dm(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return U(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Qd(e,oi.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Dm(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return eg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Qm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){W("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?yU:u===15?YM:u===14?QM:u===13?KM:u===12?vU:u===11?ZM:void oe()}(this.ui),a;return this.Ei.runTransaction(e,r,o,c=>(a=new Qd(c,this.kr?this.kr.next():oi.oe),n==="readwrite-primary"?this.gi(a).next(u=>!!u||this.pi(a)).next(u=>{if(!u)throw Ut(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new H($.FAILED_PRECONDITION,HM);return i(a)}).next(u=>this.wi(a).next(()=>u)):this.ki(a).next(()=>i(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}ki(e){return jd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H($.FAILED_PRECONDITION,g0)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jd(e).put("owner",n)}static D(){return Wo.D()}yi(e){let n=jd(e);return n.get("owner").next(i=>this.Si(i)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Ut(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;n_()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Ut("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Ut("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function jd(t){return hn(t,"owner")}function Dm(t){return hn(t,"clientMetadata")}function TI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Tw=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Ne(),r=Ne();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var Sw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var og=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return n_()?8:qM(Iu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new Sw;return this.Ji(e,n,a).next(c=>{if(o.result=c,this.Ui)return this.Yi(e,n,a,c.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(sl()<=rr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(sl()<=rr.DEBUG&&W("QueryEngine","Query:",al(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(sl()<=rr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(n))):B.resolve())}ji(e,n){if(JA(n))return B.resolve(null);let i=Fn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Hm(n,null,"F"),i=Fn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=Ne(...o);return this.zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.Zi(n,c);return this.Xi(n,f,a,u.readTime)?this.ji(e,Hm(n,null,"F")):this.es(e,f,n,u)}))})))}Hi(e,n,i,r){return JA(n)||r.isEqual(fe.min())?B.resolve(null):this.zi.getDocuments(e,i).next(o=>{let a=this.Zi(n,o);return this.Xi(n,a,i,r)?B.resolve(null):(sl()<=rr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),al(n)),this.es(e,a,n,UM(r,-1)).next(c=>c))})}Zi(e,n){let i=new pt(uR(e));return n.forEach((r,o)=>{yh(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return sl()<=rr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",al(n)),this.zi.getDocumentsMatchingQuery(e,n,Di.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}};var Aw=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Ct(Pe),this.rs=new Dr(o=>ha(o),_h),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ng(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function qR(t,e,n,i){return new Aw(t,e,n,i)}function GR(t,e){return U(this,null,function*(){let n=ne(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],u=Ne();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){c.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({us:f,removedBatchIds:a,addedBatchIds:c}))})})})}function XU(t,e){let n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,f,m){let v=f.batch,w=v.keys(),E=B.resolve();return w.forEach(M=>{E=E.next(()=>m.getEntry(u,M)).next(k=>{let F=f.docVersions.get(M);le(F!==null),k.version.compareTo(F)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=Ne();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function WR(t){let e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function JU(t,e){let n=ne(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((m,v)=>{let w=r.get(v);if(!w)return;c.push(n.Qr.removeMatchingKeys(o,m.removedDocuments,v).next(()=>n.Qr.addMatchingKeys(o,m.addedDocuments,v)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(dn.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(v,E),function(k,F,q){return k.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(w,E,m)&&c.push(n.Qr.updateTargetData(o,E))});let u=Gn(),f=Ne();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(ZR(o,a,e.documentUpdates).next(m=>{u=m.cs,f=m.ls})),!i.isEqual(fe.min())){let m=n.Qr.getLastRemoteSnapshotVersion(o).next(v=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return B.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.ns=r,o))}function ZR(t,e,n){let i=Ne(),r=Ne();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Gn();return n.forEach((c,u)=>{let f=o.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)}),{cs:a,ls:r}})}function e$(t,e){let n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Cl(t,e){let n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,B.resolve(r)):n.Qr.allocateTargetId(i).next(a=>(r=new Il(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Dl(t,e,n){return U(this,null,function*(){let i=ne(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!is(a))throw a;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function sg(t,e,n){let i=ne(t),r=fe.min(),o=Ne();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){let v=ne(u),w=v.rs.get(m);return w!==void 0?B.resolve(v.ns.get(w)):v.Qr.getTargetData(f,m)}(i,a,Fn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,n?r:fe.min(),n?o:Ne())).next(c=>(YR(i,lR(e),c),{documents:c,hs:o})))}function KR(t,e){let n=ne(t),i=ne(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(a=>a?a.target:null))}function QR(t,e){let n=ne(t),i=n.ss.get(e)||fe.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,UM(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(YR(n,e,r),r))}function YR(t,e,n){let i=t.ss.get(e)||fe.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function t$(t,e,n,i){return U(this,null,function*(){let r=ne(t),o=Ne(),a=Gn();for(let f of n){let m=e.Ps(f.metadata.name);f.document&&(o=o.add(m));let v=e.Is(f);v.setReadTime(e.Ts(f.metadata.readTime)),a=a.insert(m,v)}let c=r.os.newChangeBuffer({trackRemovals:!0}),u=yield Cl(r,function(m){return Fn(kl(Qe.fromString(`__bundle__/docs/${m}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>ZR(f,c,a).next(m=>(c.apply(f),m)).next(m=>r.Qr.removeMatchingKeysForTargetId(f,u.targetId).next(()=>r.Qr.addMatchingKeys(f,o,u.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,m.cs,m.ls)).next(()=>m.cs)))})}function n$(i,r){return U(this,arguments,function*(t,e,n=Ne()){let o=yield Cl(t,Fn(DI(e.bundledQuery))),a=ne(t);return a.persistence.runTransaction("Save named query","readwrite",c=>{let u=Ht(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return a.$r.saveNamedQuery(c,e);let f=o.withResumeToken(dn.EMPTY_BYTE_STRING,u);return a.ns=a.ns.insert(f.targetId,f),a.Qr.updateTargetData(c,f).next(()=>a.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>a.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>a.$r.saveNamedQuery(c,e))})})}function TM(t,e){return`firestore_clients_${t}_${e}`}function SM(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function _0(t,e){return`firestore_targets_${t}_${e}`}var ag=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new H(r.error.code,r.error.message))),a?new t(e,n,r.state,o):(Ut("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gd=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new H(i.error.code,i.error.message))),o?new t(e,i.state,r):(Ut("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},cg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=EI();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=GM(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new t(e,o):(Ut("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},Mw=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Ut("SharedClientState",`Failed to parse online state: ${e}`),null)}},lh=class{constructor(){this.activeTargetIds=EI()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Wd=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ct(Pe),this.started=!1,this.ys=[];let a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=TM(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new lh),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return U(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(TM(this.persistenceKey,i));if(r){let o=cg.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(_0(this.persistenceKey,e));if(i){let r=Gd.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(_0(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Ut("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>U(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let a=oi.oe;if(o!=null)try{let c=JSON.parse(o);le(typeof c=="number"),a=c}catch(c){Ut("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(n.newValue);i!==oi.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new ag(this.currentUser,e,n,i),o=SM(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=SM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=_0(this.persistenceKey,e),o=new Gd(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return cg.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return ag.Es(new Yt(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return Gd.Es(r,n)}xs(e){return Mw.Es(e)}Js(e){return JSON.parse(e)}zs(e){return U(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),a=[],c=[];return o.forEach(u=>{r.has(u)||a.push(u)}),r.forEach(u=>{o.has(u)||c.push(u)}),this.syncEngine.eo(a,c).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=EI();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},lg=class{constructor(){this.no=new lh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new lh,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Rw=class{io(e){}shutdown(){}};var ug=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xm=null;function v0(){return xm===null?xm=function(){return 268435456+Math.round(2147483648*Math.random())}():xm++,"0x"+xm.toString(16)}var i$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Pw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Dn="WebChannelConnection",kw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,a){let c=v0(),u=this.vo(n,i.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${c}:`,u,r);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,a),this.Mo(n,u,f,r).then(m=>(W("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw Ci("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",r),m})}xo(n,i,r,o,a,c){return this.Co(n,i,r,o,a)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Pl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}vo(n,i){let r=i$[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=v0();return new Promise((a,c)=>{let u=new l0;u.setWithCredentials(!0),u.listenOnce(d0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ld.NO_ERROR:let m=u.getResponseJson();W(Dn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Ld.TIMEOUT:W(Dn,`RPC '${e}' ${o} timed out`),c(new H($.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:let v=u.getStatus();if(W(Dn,`RPC '${e}' ${o} failed with status:`,v,"response text:",u.getResponseText()),v>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let E=w?.error;if(E&&E.status&&E.message){let M=function(F){let q=F.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(q)>=0?q:$.UNKNOWN}(E.status);c(new H(M,E.message))}else c(new H($.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new H($.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{W(Dn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);W(Dn,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,i,15)})}Oo(e,n,i){let r=v0(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=p0(),c=f0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.xmlHttpFactory=new u0({})),this.Fo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;let m=o.join("");W(Dn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let v=a.createWebChannel(m,u),w=!1,E=!1,M=new Pw({lo:F=>{E?W(Dn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(w||(W(Dn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),w=!0),W(Dn,`RPC '${e}' stream ${r} sending:`,F),v.send(F))},ho:()=>v.close()}),k=(F,q,ie)=>{F.listen(q,Z=>{try{ie(Z)}catch(ae){setTimeout(()=>{throw ae},0)}})};return k(v,tl.EventType.OPEN,()=>{E||(W(Dn,`RPC '${e}' stream ${r} transport opened.`),M.mo())}),k(v,tl.EventType.CLOSE,()=>{E||(E=!0,W(Dn,`RPC '${e}' stream ${r} transport closed`),M.po())}),k(v,tl.EventType.ERROR,F=>{E||(E=!0,Ci(Dn,`RPC '${e}' stream ${r} transport errored:`,F),M.po(new H($.UNAVAILABLE,"The operation could not be completed")))}),k(v,tl.EventType.MESSAGE,F=>{var q;if(!E){let ie=F.data[0];le(!!ie);let Z=ie,ae=Z.error||((q=Z[0])===null||q===void 0?void 0:q.error);if(ae){W(Dn,`RPC '${e}' stream ${r} received error:`,ae);let pe=ae.status,ue=function(D){let A=Kt[D];if(A!==void 0)return CR(A)}(pe),S=ae.message;ue===void 0&&(ue=$.INTERNAL,S="Unknown error status: "+pe+" with message "+ae.message),E=!0,M.po(new H(ue,S)),v.close()}else W(Dn,`RPC '${e}' stream ${r} received:`,ie),M.yo(ie)}}),k(c,h0.STAT_EVENT,F=>{F.stat===Im.PROXY?W(Dn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Im.NOPROXY&&W(Dn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}};function XR(){return typeof window<"u"?window:null}function Rm(){return typeof document<"u"?document:null}function bh(t){return new Q0(t,!0)}var uh=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var dg=class{constructor(e,n,i,r,o,a,c,u){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new uh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return U(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return U(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return U(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Ut(n.toString()),Ut("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new H($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>U(this,null,function*(){this.state=0,this.start()}))}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Nw=class extends dg{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=zU(this.serializer,e),i=function(o){if(!("targetChange"in o))return fe.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?fe.min():a.readTime?Ht(a.readTime):fe.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=J0(this.serializer),n.addTarget=function(o,a){let c,u=a.target;if(c=Um(u)?{documents:PR(o,u)}:{query:kR(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=xR(o,a.resumeToken);let f=Y0(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(fe.min())>0){c.readTime=wl(o,a.snapshotVersion.toTimestamp());let f=Y0(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=$U(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=J0(this.serializer),n.removeTarget=e,this.i_(n)}},Ow=class extends dg{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=UU(e.writeResults,e.commitTime),i=Ht(e.commitTime);return this.listener.A_(i,n)}return le(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=J0(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>sh(this.serializer,i))};this.i_(n)}};var Lw=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new H($.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,X0(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H($.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(e,X0(n,i),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H($.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Fw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ut(n),this.y_=!1):W("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Vw=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{i.enqueueAndForget(()=>U(this,null,function*(){rs(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(u){return U(this,null,function*(){let f=ne(u);f.M_.add(4),yield Nl(f),f.N_.set("Unknown"),f.M_.delete(4),yield wh(f)})}(this))}))}),this.N_=new Fw(i,r)}};function wh(t){return U(this,null,function*(){if(rs(t))for(let e of t.x_)yield e(!0)})}function Nl(t){return U(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Mg(t,e){let n=ne(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),MI(n)?AI(n):Ll(n).Xo()&&SI(n,e))}function xl(t,e){let n=ne(t),i=Ll(n);n.F_.delete(e),i.Xo()&&JR(n,e),n.F_.size===0&&(i.Xo()?i.n_():rs(n)&&n.N_.set("Unknown"))}function SI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ll(t).P_(e)}function JR(t,e){t.L_.xe(e),Ll(t).I_(e)}function AI(t){t.L_=new K0({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ll(t).start(),t.N_.w_()}function MI(t){return rs(t)&&!Ll(t).Zo()&&t.F_.size>0}function rs(t){return ne(t).M_.size===0}function eP(t){t.L_=void 0}function r$(t){return U(this,null,function*(){t.N_.set("Online")})}function o$(t){return U(this,null,function*(){t.F_.forEach((e,n)=>{SI(t,e)})})}function s$(t,e){return U(this,null,function*(){eP(t),MI(t)?(t.N_.D_(e),AI(t)):t.N_.set("Unknown")})}function a$(t,e,n){return U(this,null,function*(){if(t.N_.set("Online"),e instanceof Gm&&e.state===2&&e.cause)try{yield function(r,o){return U(this,null,function*(){let a=o.cause;for(let c of o.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield hg(t,i)}else if(e instanceof pl?t.L_.Ke(e):e instanceof qm?t.L_.He(e):t.L_.We(e),!n.isEqual(fe.min()))try{let i=yield WR(t.localStore);n.compareTo(i)>=0&&(yield function(o,a){let c=o.L_.rt(a);return c.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.F_.get(f);m&&o.F_.set(f,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,f)=>{let m=o.F_.get(u);if(!m)return;o.F_.set(u,m.withResumeToken(dn.EMPTY_BYTE_STRING,m.snapshotVersion)),JR(o,u);let v=new Il(m.target,u,f,m.sequenceNumber);SI(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield hg(t,i)}})}function hg(t,e,n){return U(this,null,function*(){if(!is(e))throw e;t.M_.add(1),yield Nl(t),t.N_.set("Offline"),n||(n=()=>WR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>U(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield wh(t)}))})}function tP(t,e){return e().catch(n=>hg(t,n,e))}function Ol(t){return U(this,null,function*(){let e=ne(t),n=ts(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;c$(e);)try{let r=yield e$(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,l$(e,r)}catch(r){yield hg(e,r)}nP(e)&&iP(e)})}function c$(t){return rs(t)&&t.v_.length<10}function l$(t,e){t.v_.push(e);let n=ts(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function nP(t){return rs(t)&&!ts(t).Zo()&&t.v_.length>0}function iP(t){ts(t).start()}function u$(t){return U(this,null,function*(){ts(t).V_()})}function d$(t){return U(this,null,function*(){let e=ts(t);for(let n of t.v_)e.d_(n.mutations)})}function h$(t,e,n){return U(this,null,function*(){let i=t.v_.shift(),r=G0.from(i,e,n);yield tP(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Ol(t)})}function f$(t,e){return U(this,null,function*(){e&&ts(t).E_&&(yield function(i,r){return U(this,null,function*(){if(function(a){return ER(a)&&a!==$.ABORTED}(r.code)){let o=i.v_.shift();ts(i).t_(),yield tP(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Ol(i)}})}(t,e)),nP(t)&&iP(t)})}function AM(t,e){return U(this,null,function*(){let n=ne(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=rs(n);n.M_.add(3),yield Nl(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield wh(n)})}function Bw(t,e){return U(this,null,function*(){let n=ne(t);e?(n.M_.delete(2),yield wh(n)):e||(n.M_.add(2),yield Nl(n),n.N_.set("Unknown"))})}function Ll(t){return t.B_||(t.B_=function(n,i,r){let o=ne(n);return o.f_(),new Nw(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:r$.bind(null,t),To:o$.bind(null,t),Ao:s$.bind(null,t),h_:a$.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.B_.t_(),MI(t)?AI(t):t.N_.set("Unknown")):(yield t.B_.stop(),eP(t))}))),t.B_}function ts(t){return t.k_||(t.k_=function(n,i,r){let o=ne(n);return o.f_(),new Ow(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:u$.bind(null,t),Ao:f$.bind(null,t),R_:d$.bind(null,t),A_:h$.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.k_.t_(),yield Ol(t)):(yield t.k_.stop(),t.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var jw=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let a=Date.now()+i,c=new t(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Fl(t,e){if(Ut("AsyncQueue",`${e}: ${t}`),is(t))return new H($.UNAVAILABLE,`${e}: ${t}`);throw t}var fg=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||ee.comparator(n.key,i.key):(n,i)=>ee.comparator(n.key,i.key),this.keyedMap=zd(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var pg=class{constructor(){this.q_=new Ct(ee.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):oe():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Tl=class t{constructor(e,n,i,r,o,a,c,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){let a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new t(e,n,fg.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var zw=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Uw=class{constructor(){this.queries=new Dr(e=>cR(e),vh),this.onlineState="Unknown",this.z_=new Set}};function RI(t,e){return U(this,null,function*(){let n=ne(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new zw,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(a){let c=Fl(a,`Initialization of query '${al(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&kI(n)})}function PI(t,e){return U(this,null,function*(){let n=ne(t),i=e.query,r=3,o=n.queries.get(i);if(o){let a=o.U_.indexOf(e);a>=0&&(o.U_.splice(a,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function p$(t,e){let n=ne(t),i=!1;for(let r of e){let o=r.query,a=n.queries.get(o);if(a){for(let c of a.U_)c.H_(r)&&(i=!0);a.K_=r}}i&&kI(n)}function m$(t,e,n){let i=ne(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function kI(t){t.z_.forEach(e=>{e.next()})}var $w,MM;(MM=$w||($w={})).J_="default",MM.Cache="cache";var dh=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Tl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Tl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==$w.Cache}};var Hw=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var mg=class{constructor(e){this.serializer=e}Ps(e){return wr(this.serializer,e)}Is(e){return e.metadata.exists?RR(this.serializer,e.document,!1):Jt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ht(e)}},qw=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rP(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=Qe.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new mg(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let a of r.metadata.queries){let c=(n.get(a)||Ne()).add(o);n.set(a,c)}}return n}complete(){return U(this,null,function*(){let e=yield t$(this.localStore,new mg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield n$(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function rP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var gg=class{constructor(e){this.key=e}},_g=class{constructor(e){this.key=e}},vg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Ne(),this.mutatedKeys=Ne(),this.Ia=uR(e),this.Ta=new fg(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new pg,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{let w=r.get(m),E=yh(this.query,v)?v:null,M=!!w&&this.mutatedKeys.has(w.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),F=!1;w&&E?w.data.isEqual(E.data)?M!==k&&(i.track({type:3,doc:E}),F=!0):this.Ra(w,E)||(i.track({type:2,doc:E}),F=!0,(u&&this.Ia(E,u)>0||f&&this.Ia(E,f)<0)&&(c=!0)):!w&&E?(i.track({type:0,doc:E}),F=!0):w&&!E&&(i.track({type:1,doc:w}),F=!0,(u||f)&&(c=!0)),F&&(E?(a=a.add(E),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ta:a,Aa:i,Xi:c,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((m,v)=>function(E,M){let k=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return k(E)-k(M)}(m.type,v.type)||this.Ia(m.doc,v.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,f=u!==this.ha;return this.ha=u,a.length!==0||f?{snapshot:new Tl(this.query,e.Ta,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new pg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Ne(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new _g(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new gg(i))}),n}pa(e){this.la=e.hs,this.Pa=Ne();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Tl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Gw=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},Ww=class{constructor(e){this.key=e,this.wa=!1}},Zw=class{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Dr(c=>cR(c),vh),this.Da=new Map,this.Ca=new Set,this.va=new Ct(ee.comparator),this.Fa=new Map,this.Ma=new ch,this.xa={},this.Oa=new Map,this.Na=El.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function g$(t,e,n=!0){return U(this,null,function*(){let i=Rg(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield oP(i,e,n,!0),r})}function _$(t,e){return U(this,null,function*(){let n=Rg(t);yield oP(n,e,!0,!1)})}function oP(t,e,n,i){return U(this,null,function*(){let r=yield Cl(t.localStore,Fn(e)),o=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",c;return i&&(c=yield NI(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Mg(t.remoteStore,r),c})}function NI(t,e,n,i,r){return U(this,null,function*(){t.Ba=(v,w,E)=>function(k,F,q,ie){return U(this,null,function*(){let Z=F.view.da(q);Z.Xi&&(Z=yield sg(k.localStore,F.query,!1).then(({documents:S})=>F.view.da(S,Z)));let ae=ie&&ie.targetChanges.get(F.targetId),pe=ie&&ie.targetMismatches.get(F.targetId)!=null,ue=F.view.applyChanges(Z,k.isPrimaryClient,ae,pe);return Kw(k,F.targetId,ue.fa),ue.snapshot})}(t,v,w,E);let o=yield sg(t.localStore,e,!0),a=new vg(e,o.hs),c=a.da(o.documents),u=rh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(c,t.isPrimaryClient,u);Kw(t,n,f.fa);let m=new Gw(e,n,a);return t.ba.set(e,m),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),f.snapshot})}function v$(t,e,n){return U(this,null,function*(){let i=ne(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(a=>!vh(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Dl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&xl(i.remoteStore,r.targetId),Sl(i,r.targetId)}).catch(ns))):(Sl(i,r.targetId),yield Dl(i.localStore,r.targetId,!0))})}function y$(t,e){return U(this,null,function*(){let n=ne(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),xl(n.remoteStore,i.targetId))})}function b$(t,e,n){return U(this,null,function*(){let i=VI(t);try{let r=yield function(a,c){let u=ne(a),f=Nt.now(),m=c.reduce((E,M)=>E.add(M.key),Ne()),v,w;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let M=Gn(),k=Ne();return u.os.getEntries(E,m).next(F=>{M=F,M.forEach((q,ie)=>{ie.isValidDocument()||(k=k.add(q))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,M)).next(F=>{v=F;let q=[];for(let ie of c){let Z=NU(ie,v.get(ie.key).overlayedDocument);Z!=null&&q.push(new qi(ie.key,Z,tR(Z.value.mapValue),Bt.exists(!0)))}return u.mutationQueue.addMutationBatch(E,f,q,c)}).next(F=>{w=F;let q=F.applyToLocalDocumentSet(v,k);return u.documentOverlayCache.saveOverlays(E,F.batchId,q)})}).then(()=>({batchId:w.batchId,changes:hR(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,u){let f=a.xa[a.currentUser.toKey()];f||(f=new Ct(Pe)),f=f.insert(c,u),a.xa[a.currentUser.toKey()]=f}(i,r.batchId,n),yield ro(i,r.changes),yield Ol(i.remoteStore)}catch(r){let o=Fl(r,"Failed to persist write");n.reject(o)}})}function sP(t,e){return U(this,null,function*(){let n=ne(t);try{let i=yield JU(n.localStore,e);e.targetChanges.forEach((r,o)=>{let a=n.Fa.get(o);a&&(le(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?le(a.wa):r.removedDocuments.size>0&&(le(a.wa),a.wa=!1))}),yield ro(n,i,e)}catch(i){yield ns(i)}})}function RM(t,e,n){let i=ne(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,a)=>{let c=a.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){let u=ne(a);u.onlineState=c;let f=!1;u.queries.forEach((m,v)=>{for(let w of v.U_)w.j_(c)&&(f=!0)}),f&&kI(u)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function w$(t,e,n){return U(this,null,function*(){let i=ne(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let a=new Ct(ee.comparator);a=a.insert(o,Jt.newNoDocument(o,fe.min()));let c=Ne().add(o),u=new ih(fe.min(),new Map,new Ct(Pe),a,c);yield sP(i,u),i.va=i.va.remove(o),i.Fa.delete(e),FI(i)}else yield Dl(i.localStore,e,!1).then(()=>Sl(i,e,n)).catch(ns)})}function I$(t,e){return U(this,null,function*(){let n=ne(t),i=e.batch.batchId;try{let r=yield XU(n.localStore,e);LI(n,i,null),OI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield ro(n,r)}catch(r){yield ns(r)}})}function E$(t,e,n){return U(this,null,function*(){let i=ne(t);try{let r=yield function(a,c){let u=ne(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,c).next(v=>(le(v!==null),m=v.keys(),u.mutationQueue.removeMutationBatch(f,v))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);LI(i,e,n),OI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield ro(i,r)}catch(r){yield ns(r)}})}function C$(t,e){return U(this,null,function*(){let n=ne(t);rs(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(a){let c=ne(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=Fl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function OI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function LI(t,e,n){let i=ne(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Sl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||aP(t,i)})}function aP(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(xl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),FI(t))}function Kw(t,e,n){for(let i of n)i instanceof gg?(t.Ma.addReference(i.key,e),D$(t,i)):i instanceof _g?(W("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||aP(t,i.key)):oe()}function D$(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(W("SyncEngine","New document in limbo: "+n),t.Ca.add(i),FI(t))}function FI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new ee(Qe.fromString(e)),i=t.Na.next();t.Fa.set(i,new Ww(n)),t.va=t.va.insert(n,i),Mg(t.remoteStore,new Il(Fn(kl(n.path)),i,"TargetPurposeLimboResolution",oi.oe))}}function ro(t,e,n){return U(this,null,function*(){let i=ne(t),r=[],o=[],a=[];i.ba.isEmpty()||(i.ba.forEach((c,u)=>{a.push(i.Ba(u,e,n).then(f=>{if((f||n)&&i.isPrimaryClient){let m=f&&!f.fromCache;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){r.push(f);let m=Tw.Ki(u.targetId,f);o.push(m)}}))}),yield Promise.all(a),i.Sa.h_(r),yield function(u,f){return U(this,null,function*(){let m=ne(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>B.forEach(f,w=>B.forEach(w.qi,E=>m.persistence.referenceDelegate.addReference(v,w.targetId,E)).next(()=>B.forEach(w.Qi,E=>m.persistence.referenceDelegate.removeReference(v,w.targetId,E)))))}catch(v){if(!is(v))throw v;W("LocalStore","Failed to update sequence numbers: "+v)}for(let v of f){let w=v.targetId;if(!v.fromCache){let E=m.ns.get(w),M=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(M);m.ns=m.ns.insert(w,k)}}})}(i.localStore,o))})}function x$(t,e){return U(this,null,function*(){let n=ne(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let i=yield GR(n.localStore,e);n.currentUser=e,function(o,a){o.Oa.forEach(c=>{c.forEach(u=>{u.reject(new H($.CANCELLED,a))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield ro(n,i.us)}})}function T$(t,e){let n=ne(t),i=n.Fa.get(e);if(i&&i.wa)return Ne().add(i.key);{let r=Ne(),o=n.Da.get(e);if(!o)return r;for(let a of o){let c=n.ba.get(a);r=r.unionWith(c.view.Ea)}return r}}function S$(t,e){return U(this,null,function*(){let n=ne(t),i=yield sg(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&Kw(n,e.targetId,r.fa),r})}function A$(t,e){return U(this,null,function*(){let n=ne(t);return QR(n.localStore,e).then(i=>ro(n,i))})}function M$(t,e,n,i){return U(this,null,function*(){let r=ne(t),o=yield function(c,u){let f=ne(c),m=ne(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",v=>m.vn(v,u).next(w=>w?f.localDocuments.getDocuments(v,w):B.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Ol(r.remoteStore):n==="acknowledged"||n==="rejected"?(LI(r,e,i||null),OI(r,e),function(c,u){ne(ne(c).mutationQueue).Mn(u)}(r.localStore,e)):oe(),yield ro(r,o)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function R$(t,e){return U(this,null,function*(){let n=ne(t);if(Rg(n),VI(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield PM(n,i.toArray());n.La=!0,yield Bw(n.remoteStore,!0);for(let o of r)Mg(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Sl(n,a),Dl(n.localStore,a,!0))),xl(n.remoteStore,a)}),yield r,yield PM(n,i),function(a){let c=ne(a);c.Fa.forEach((u,f)=>{xl(c.remoteStore,f)}),c.Ma.mr(),c.Fa=new Map,c.va=new Ct(ee.comparator)}(n),n.La=!1,yield Bw(n.remoteStore,!1)}})}function PM(t,e,n){return U(this,null,function*(){let i=ne(t),r=[],o=[];for(let a of e){let c,u=i.Da.get(a);if(u&&u.length!==0){c=yield Cl(i.localStore,Fn(u[0]));for(let f of u){let m=i.ba.get(f),v=yield S$(i,m);v.snapshot&&o.push(v.snapshot)}}else{let f=yield KR(i.localStore,a);c=yield Cl(i.localStore,f),yield NI(i,cP(f),a,!1,c.resumeToken)}r.push(c)}return i.Sa.h_(o),r})}function cP(t){return aR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function P$(t){return function(n){return ne(ne(n).persistence).Bi()}(ne(t).localStore)}function k$(t,e,n,i){return U(this,null,function*(){let r=ne(t);if(r.La)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let a=yield QR(r.localStore,lR(o[0])),c=ih.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dn.EMPTY_BYTE_STRING);yield ro(r,a,c);break}case"rejected":yield Dl(r.localStore,e,!0),Sl(r,e,i);break;default:oe()}})}function N$(t,e,n){return U(this,null,function*(){let i=Rg(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){W("SyncEngine","Adding an already active target "+r);continue}let o=yield KR(i.localStore,r),a=yield Cl(i.localStore,o);yield NI(i,cP(o),a.targetId,!1,a.resumeToken),Mg(i.remoteStore,a)}for(let r of n)i.Da.has(r)&&(yield Dl(i.localStore,r,!1).then(()=>{xl(i.remoteStore,r),Sl(i,r)}).catch(ns))}})}function Rg(t){let e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=T$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w$.bind(null,e),e.Sa.h_=p$.bind(null,e.eventManager),e.Sa.ka=m$.bind(null,e.eventManager),e}function VI(t){let e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E$.bind(null,e),e}function O$(t,e,n){let i=ne(t);(function(o,a,c){return U(this,null,function*(){try{let u=yield a.getMetadata();if(yield function(E,M){let k=ne(E),F=Ht(M.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",q=>k.$r.getBundleMetadata(q,M.id)).then(q=>!!q&&q.createTime.compareTo(F)>=0)}(o.localStore,u))return yield a.close(),c._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(u)),Promise.resolve(new Set);c._updateProgress(rP(u));let f=new qw(u,o.localStore,a.serializer),m=yield a.qa();for(;m;){let w=yield f._a(m);w&&c._updateProgress(w),m=yield a.qa()}let v=yield f.complete();return yield ro(o,v.ca,void 0),yield function(E,M){let k=ne(E);return k.persistence.runTransaction("Save bundle","readwrite",F=>k.$r.saveBundleMetadata(F,M))}(o.localStore,u),c._completeWith(v.progress),Promise.resolve(v.ua)}catch(u){return Ci("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var hh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qR(this.persistence,new og,e.initialUser,this.serializer)}createPersistence(e){return new ig(rg.Hr,this.serializer)}createSharedClientState(e){return new lg}terminate(){return U(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var yg=class t extends hh{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){yield e_(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield VI(this.Qa.syncEngine),yield Ol(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return qR(this.persistence,new og,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new hw(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new M0(n,this.persistence);return new A0(e.asyncQueue,i)}createPersistence(e){let n=TI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Ei.withCacheSize(this.cacheSizeBytes):Ei.DEFAULT;return new xw(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,XR(),Rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lg}},Qw=class t extends yg{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return U(this,null,function*(){yield e_(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Wd&&(this.sharedClientState.syncEngine={Zs:M$.bind(null,n),Xs:k$.bind(null,n),eo:N$.bind(null,n),Bi:P$.bind(null,n),Ys:A$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>U(this,null,function*(){yield R$(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=XR();if(!Wd.D(n))throw new H($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=TI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wd(n,e.asyncQueue,i,e.clientId,e.initialUser)}},fh=class{initialize(e,n){return U(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x$.bind(null,this.syncEngine),yield Bw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Uw}()}createDatastore(e){let n=bh(e.databaseInfo.databaseId),i=function(o){return new kw(o)}(e.databaseInfo);return function(o,a,c,u){return new Lw(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,c){return new Vw(i,r,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>RM(this.syncEngine,n,0),function(){return ug.D()?new ug:new Rw}())}createSyncEngine(e,n){return function(r,o,a,c,u,f,m){let v=new Zw(r,o,a,c,u,f);return m&&(v.La=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return U(this,null,function*(){var e;yield function(i){return U(this,null,function*(){let r=ne(i);W("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Nl(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function kM(t,e=10240){let n=0;return{read(){return U(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return U(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Al=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Ut("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Yw=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Xt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return U(this,null,function*(){return this.metadata.promise})}qa(){return U(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return U(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new Hw(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return U(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return U(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return U(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Xw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return U(this,null,function*(){let a=ne(r),c={documents:o.map(v=>oh(a.serializer,v))},u=yield a.xo("BatchGetDocuments",a.serializer.databaseId,Qe.emptyPath(),c,o.length),f=new Map;u.forEach(v=>{let w=jU(a.serializer,v);f.set(w.key.toString(),w)});let m=[];return o.forEach(v=>{let w=f.get(v.toString());le(!!w),m.push(w)}),m})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new es(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=ee.fromPath(i);this.mutations.push(new eh(r,this.precondition(r)))}),yield function(i,r){return U(this,null,function*(){let o=ne(i),a={writes:r.map(c=>sh(o.serializer,c))};yield o.Co("Commit",o.serializer.databaseId,Qe.emptyPath(),a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw oe();n=fe.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new H($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(fe.min())?Bt.exists(!1):Bt.updateTime(n):Bt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(fe.min()))throw new H($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Bt.updateTime(n)}return Bt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Jw=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new uh(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>U(this,null,function*(){let e=new Xw(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!gh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ER(n)}return!1}};var eI=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Yt.UNAUTHENTICATED,this.clientId=Nm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>U(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Fl(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Pm(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>U(this,null,function*(){i.isEqual(r)||(yield GR(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function tI(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield BI(t);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>AM(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>AM(e.remoteStore,r)),t._onlineComponents=e})}function lP(t){return t.name==="FirebaseError"?t.code===$.FAILED_PRECONDITION||t.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function BI(t){return U(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!lP(n))throw n;Ci("Error using user provided cache. Falling back to memory cache: "+n),yield Pm(t,new hh)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Pm(t,new hh);return t._offlineComponents})}function Pg(t){return U(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield tI(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield tI(t,new fh))),t._onlineComponents})}function uP(t){return BI(t).then(e=>e.persistence)}function jI(t){return BI(t).then(e=>e.localStore)}function dP(t){return Pg(t).then(e=>e.remoteStore)}function zI(t){return Pg(t).then(e=>e.syncEngine)}function L$(t){return Pg(t).then(e=>e.datastore)}function Ml(t){return U(this,null,function*(){let e=yield Pg(t),n=e.eventManager;return n.onListen=g$.bind(null,e.syncEngine),n.onUnlisten=v$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=_$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=y$.bind(null,e.syncEngine),n})}function F$(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield uP(t),n=yield dP(t);return e.setNetworkEnabled(!0),function(r){let o=ne(r);return o.M_.delete(0),wh(o)}(n)}))}function V$(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield uP(t),n=yield dP(t);return e.setNetworkEnabled(!1),function(r){return U(this,null,function*(){let o=ne(r);o.M_.add(0),yield Nl(o),o.N_.set("Offline")})}(n)}))}function B$(t,e){let n=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield function(f,m){let v=ne(f);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,m))}(r,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new H($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let u=Fl(c,`Failed to get document '${o} from cache`);a.reject(u)}})}(yield jI(t),e,n)})),n.promise}function hP(t,e,n={}){let i=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Al({next:w=>{a.enqueueAndForget(()=>PI(o,v));let E=w.docs.has(c);!E&&w.fromCache?f.reject(new H($.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&u&&u.source==="server"?f.reject(new H($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new dh(kl(c.path),m,{includeMetadataChanges:!0,ra:!0});return RI(o,v)}(yield Ml(t),t.asyncQueue,e,n,i)})),i.promise}function j$(t,e){let n=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield sg(r,o,!0),u=new vg(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){let u=Fl(c,`Failed to execute query '${o} against cache`);a.reject(u)}})}(yield jI(t),e,n)})),n.promise}function fP(t,e,n={}){let i=new Xt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Al({next:w=>{a.enqueueAndForget(()=>PI(o,v)),w.fromCache&&u.source==="server"?f.reject(new H($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new dh(c,m,{includeMetadataChanges:!0,ra:!0});return RI(o,v)}(yield Ml(t),t.asyncQueue,e,n,i)})),i.promise}function z$(t,e){let n=new Al(e);return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){ne(r).z_.add(o),o.next()}(yield Ml(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){ne(r).z_.delete(o)}(yield Ml(t),n)}))}}function U$(t,e,n,i){let r=function(a,c){let u;return u=typeof a=="string"?DR().encode(a):a,function(m,v){return new Yw(m,v)}(function(m,v){if(m instanceof Uint8Array)return kM(m,v);if(m instanceof ArrayBuffer)return kM(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),c)}(n,bh(e));t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){O$(yield zI(t),r,i)}))}function $$(t,e){return t.asyncQueue.enqueue(()=>U(this,null,function*(){return function(i,r){let o=ne(i);return o.persistence.runTransaction("Get named query","readonly",a=>o.$r.getNamedQuery(a,r))}(yield jI(t),e)}))}function pP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NM=new Map;function UI(t,e,n){if(!n)throw new H($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $I(t,e,n,i){if(e===!0&&i===!0)throw new H($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OM(t){if(!ee.isDocumentKey(t))throw new H($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LM(t){if(ee.isDocumentKey(t))throw new H($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Ye(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=kg(t);throw new H($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function mP(t,e){if(e<=0)throw new H($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var bg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new H($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$I("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ga=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new y0;switch(i.type){case"firstParty":return new E0(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=NM.get(n);i&&(W("ComponentProvider","Removing Datastore"),NM.delete(n),i.terminate())}(this),Promise.resolve()}};function gP(t,e,n,i={}){var r;let o=(t=Ye(t,ga))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ci("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=Yt.MOCK_USER;else{c=LE(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new H($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yt(f)}t._authCredentials=new b0(new km(c,u))}}var yn=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},bt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ir=class t extends yn{constructor(e,n,i){super(e,n,kl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new ee(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function HI(t,e,...n){if(t=Pt(t),UI("collection","path",e),t instanceof ga){let i=Qe.fromString(e,...n);return LM(i),new Ir(t,null,i)}{if(!(t instanceof bt||t instanceof Ir))throw new H($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Qe.fromString(e,...n));return LM(i),new Ir(t.firestore,null,i)}}function _P(t,e){if(t=Ye(t,ga),UI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yn(t,null,function(i){return new Hi(Qe.emptyPath(),i)}(e))}function Ih(t,e,...n){if(t=Pt(t),arguments.length===1&&(e=Nm.newId()),UI("doc","path",e),t instanceof ga){let i=Qe.fromString(e,...n);return OM(i),new bt(t,null,new ee(i))}{if(!(t instanceof bt||t instanceof Ir))throw new H($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Qe.fromString(e,...n));return OM(i),new bt(t.firestore,t instanceof Ir?t.converter:null,new ee(i))}}function qI(t,e){return t=Pt(t),e=Pt(e),(t instanceof bt||t instanceof Ir)&&(e instanceof bt||e instanceof Ir)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function GI(t,e){return t=Pt(t),e=Pt(e),t instanceof yn&&e instanceof yn&&t.firestore===e.firestore&&vh(t._query,e._query)&&t.converter===e.converter}var nI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new uh(this,"async_queue_retry"),this.hu=()=>{let n=Rm();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Rm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Xt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return U(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!is(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw Ut("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=jw.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&oe()}verifyOperationInProgress(){}du(){return U(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function iI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var rI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var vP=-1,St=class extends ga{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new nI}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yP(this),this._firestoreClient.terminate()}};function rn(t){return t._firestoreClient||yP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yP(t){var e,n,i;let r=t._freezeSettings(),o=function(c,u,f,m){return new R0(c,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,pP(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new eI(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function bP(t,e){AP(t=Ye(t,St));let n=rn(t);if(n._uninitializedComponentsProvider)throw new H($.FAILED_PRECONDITION,"SDK cache is already specified.");Ci("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new fh;return IP(n,r,new yg(r,i.cacheSizeBytes,e?.forceOwnership))}function wP(t){AP(t=Ye(t,St));let e=rn(t);if(e._uninitializedComponentsProvider)throw new H($.FAILED_PRECONDITION,"SDK cache is already specified.");Ci("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new fh;return IP(e,i,new Qw(i,n.cacheSizeBytes))}function IP(t,e,n){let i=new Xt;return t.asyncQueue.enqueue(()=>U(this,null,function*(){try{yield Pm(t,n),yield tI(t,e),i.resolve()}catch(r){let o=r;if(!lP(o))throw o;Ci("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function EP(t){if(t._initialized&&!t._terminated)throw new H($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Xt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{yield function(i){return U(this,null,function*(){if(!Wo.D())return Promise.resolve();let r=i+"main";yield Wo.delete(r)})}(TI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function CP(t){return function(n){let i=new Xt;return n.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return C$(yield zI(n),i)})),i.promise}(rn(t=Ye(t,St)))}function DP(t){return F$(rn(t=Ye(t,St)))}function xP(t){return V$(rn(t=Ye(t,St)))}function TP(t,e){let n=rn(t=Ye(t,St)),i=new rI;return U$(n,t._databaseId,e,i),i}function SP(t,e){return $$(rn(t=Ye(t,St)),e).then(n=>n?new yn(t,null,n.query):null)}function AP(t){if(t._initialized||t._terminated)throw new H($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var xr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(dn.fromBase64String(e))}catch(n){throw new H($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Gi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var no=class{constructor(e){this._methodName=e}};var _a=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}};var H$=/^__.*__$/,oI=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new qi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Jo(e,this.data,n,this.fieldTransforms)}},wg=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new qi(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function MP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}var Ig=class t{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Eg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(MP(this.fu)&&H$.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},sI=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||bh(e)}Fu(e,n,i,r=!1){return new Ig({fu:e,methodName:n,vu:i,path:$t.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wa(t){let e=t._freezeSettings(),n=bh(t._databaseId);return new sI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ng(t,e,n,i,r,o={}){let a=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);KI("Data must be an object, but it was:",a,i);let c=kP(i,a),u,f;if(o.merge)u=new si(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let v of o.mergeFields){let w=dI(e,v,n);if(!a.contains(w))throw new H($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);OP(m,w)||m.push(w)}u=new si(m),f=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,f=a.fieldTransforms;return new oI(new xn(c),u,f)}var ph=class t extends no{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function RP(t,e,n){return new Ig({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var aI=class t extends no{_toFieldTransform(e){return new fa(e.path,new Yo)}isEqual(e){return e instanceof t}},cI=class t extends no{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=RP(this,e,!0),i=this.Mu.map(o=>Ia(o,n)),r=new eo(i);return new fa(e.path,r)}isEqual(e){return e instanceof t&&i_(this.Mu,e.Mu)}},lI=class t extends no{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=RP(this,e,!0),i=this.Mu.map(o=>Ia(o,n)),r=new to(i);return new fa(e.path,r)}isEqual(e){return e instanceof t&&i_(this.Mu,e.Mu)}},uI=class t extends no{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Xo(e.serializer,gR(e.serializer,this.xu));return new fa(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function WI(t,e,n,i){let r=t.Fu(1,e,n);KI("Data must be an object, but it was:",r,i);let o=[],a=xn.empty();ba(i,(u,f)=>{let m=QI(e,u,n);f=Pt(f);let v=r.Su(m);if(f instanceof ph)o.push(m);else{let w=Ia(f,v);w!=null&&(o.push(m),a.set(m,w))}});let c=new si(o);return new wg(a,c,r.fieldTransforms)}function ZI(t,e,n,i,r,o){let a=t.Fu(1,e,n),c=[dI(e,i,n)],u=[r];if(o.length%2!=0)throw new H($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(dI(e,o[w])),u.push(o[w+1]);let f=[],m=xn.empty();for(let w=c.length-1;w>=0;--w)if(!OP(f,c[w])){let E=c[w],M=u[w];M=Pt(M);let k=a.Su(E);if(M instanceof ph)f.push(E);else{let F=Ia(M,k);F!=null&&(f.push(E),m.set(E,F))}}let v=new si(f);return new wg(m,v,a.fieldTransforms)}function PP(t,e,n,i=!1){return Ia(n,t.Fu(i?4:3,e))}function Ia(t,e){if(NP(t=Pt(t)))return KI("Unsupported field value:",e,t),kP(t,e);if(t instanceof no)return function(i,r){if(!MP(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let c of i){let u=Ia(c,r.bu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Pt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Nt.fromDate(i);return{timestampValue:wl(r.serializer,o)}}if(i instanceof Nt){let o=new Nt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:wl(r.serializer,o)}}if(i instanceof _a)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof xr)return{bytesValue:xR(r.serializer,i._byteString)};if(i instanceof bt){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:CI(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${kg(i)}`)}(t,e)}function kP(t,e){let n={};return XM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ba(t,(i,r)=>{let o=Ia(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function NP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Nt||t instanceof _a||t instanceof xr||t instanceof bt||t instanceof no)}function KI(t,e,n){if(!NP(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=kg(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function dI(t,e,n){if((e=Pt(e))instanceof Gi)return e._internalPath;if(typeof e=="string")return QI(t,e);throw Eg("Field path arguments must be of type string or ",t,!1,void 0,n)}var q$=new RegExp("[~\\*/\\[\\]]");function QI(t,e,n){if(e.search(q$)>=0)throw Eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Gi(...e.split("."))._internalPath}catch{throw Eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eg(t,e,n,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new H($.INVALID_ARGUMENT,c+t+u)}function OP(t,e){return t.some(n=>n.isEqual(e))}var va=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new hI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},hI=class extends va{data(){return super.data()}};function Og(t,e){return typeof e=="string"?QI(t,e):e instanceof Gi?e._internalPath:e._delegate._internalPath}function LP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mh=class{},ya=class extends mh{};function oo(t,e,...n){let i=[];e instanceof mh&&i.push(e),i=i.concat(n),function(o){let a=o.filter(u=>u instanceof fI).length,c=o.filter(u=>u instanceof Cg).length;if(a>1||a>0&&c>0)throw new H($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Cg=class t extends ya{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return GP(e._query,n),new yn(e.firestore,e.converter,H0(e._query,n))}_parse(e){let n=wa(e.firestore);return function(o,a,c,u,f,m,v){let w;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){VM(v,m);let E=[];for(let M of v)E.push(FM(u,o,M));w={arrayValue:{values:E}}}else w=FM(u,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||VM(v,m),w=PP(c,a,v,m==="in"||m==="not-in");return qe.create(f,m,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function FP(t,e,n){let i=e,r=Og("where",t);return Cg._create(r,i,n)}var fI=class t extends mh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:st.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r,c=o.getFlattenedFilters();for(let u of c)GP(a,u),a=H0(a,u)}(e._query,n),new yn(e.firestore,e.converter,H0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var pI=class t extends ya{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,a){if(r.startAt!==null)throw new H($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new H($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new da(o,a)}(e._query,this._field,this._direction);return new yn(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new Hi(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function VP(t,e="asc"){let n=e,i=Og("orderBy",t);return pI._create(i,n)}var Dg=class t extends ya{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new yn(e.firestore,e.converter,Hm(e._query,this._limit,this._limitType))}};function BP(t){return mP("limit",t),Dg._create("limit",t,"F")}function jP(t){return mP("limitToLast",t),Dg._create("limitToLast",t,"L")}var xg=class t extends ya{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=qP(e,this.type,this._docOrFields,this._inclusive);return new yn(e.firestore,e.converter,function(r,o){return new Hi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function zP(...t){return xg._create("startAt",t,!0)}function UP(...t){return xg._create("startAfter",t,!1)}var Tg=class t extends ya{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=qP(e,this.type,this._docOrFields,this._inclusive);return new yn(e.firestore,e.converter,function(r,o){return new Hi(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function $P(...t){return Tg._create("endBefore",t,!1)}function HP(...t){return Tg._create("endAt",t,!0)}function qP(t,e,n,i){if(n[0]=Pt(n[0]),n[0]instanceof va)return function(o,a,c,u,f){if(!u)throw new H($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let m=[];for(let v of fl(o))if(v.field.isKeyField())m.push(ua(a,u.key));else{let w=u.data.field(v.field);if(Ag(w))throw new H($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let E=v.field.canonicalString();throw new H($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}m.push(w)}return new Cr(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=wa(t.firestore);return function(a,c,u,f,m,v){let w=a.explicitOrderBy;if(m.length>w.length)throw new H($.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let M=0;M<m.length;M++){let k=m[M];if(w[M].field.isKeyField()){if(typeof k!="string")throw new H($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof k}`);if(!II(a)&&k.indexOf("/")!==-1)throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${k}' contains a slash.`);let F=a.path.child(Qe.fromString(k));if(!ee.isDocumentKey(F))throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);let q=new ee(F);E.push(ua(c,q))}else{let F=PP(u,f,k);E.push(F)}}return new Cr(E,v)}(t._query,t.firestore._databaseId,r,e,n,i)}}function FM(t,e,n){if(typeof(n=Pt(n))=="string"){if(n==="")throw new H($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!II(e)&&n.indexOf("/")!==-1)throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Qe.fromString(n));if(!ee.isDocumentKey(i))throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ua(t,new ee(i))}if(n instanceof bt)return ua(t,n._key);throw new H($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kg(n)}.`)}function VM(t,e){if(!Array.isArray(t)||t.length===0)throw new H($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GP(t,e){let n=function(r,o){for(let a of r)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Rl=class{convertValue(e,n="none"){switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return ba(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new _a(Vt(e.latitude),Vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=bI(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yd(e));default:return null}}convertTimestamp(e){let n=Jr(e);return new Nt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Qe.fromString(e);le(FR(i));let r=new Ko(i.get(1),i.get(3)),o=new ee(i.popFirst(5));return r.isEqual(n)||Ut(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Lg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var mI=class extends Rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}};var Xr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},xi=class extends va{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new qo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Og("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},qo=class extends xi{data(e={}){return super.data(e)}},Wi=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Xr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new qo(this._firestore,this._userDataWriter,i.key,i,new Xr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let u=new qo(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Xr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new qo(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Xr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:G$(c.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function G$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}function YI(t,e){return t instanceof xi&&e instanceof xi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Wi&&e instanceof Wi&&t._firestore===e._firestore&&GI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function WP(t){t=Ye(t,bt);let e=Ye(t.firestore,St);return hP(rn(e),t._key).then(n=>tE(e,t,n))}var io=class extends Rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}};function ZP(t){t=Ye(t,bt);let e=Ye(t.firestore,St),n=rn(e),i=new io(e);return B$(n,t._key).then(r=>new xi(e,i,t._key,r,new Xr(r!==null&&r.hasLocalMutations,!0),t.converter))}function KP(t){t=Ye(t,bt);let e=Ye(t.firestore,St);return hP(rn(e),t._key,{source:"server"}).then(n=>tE(e,t,n))}function QP(t){t=Ye(t,yn);let e=Ye(t.firestore,St),n=rn(e),i=new io(e);return LP(t._query),fP(n,t._query).then(r=>new Wi(e,i,t,r))}function YP(t){t=Ye(t,yn);let e=Ye(t.firestore,St),n=rn(e),i=new io(e);return j$(n,t._query).then(r=>new Wi(e,i,t,r))}function XP(t){t=Ye(t,yn);let e=Ye(t.firestore,St),n=rn(e),i=new io(e);return fP(n,t._query,{source:"server"}).then(r=>new Wi(e,i,t,r))}function XI(t,e,n){t=Ye(t,bt);let i=Ye(t.firestore,St),r=Lg(t.converter,e,n);return Vl(i,[Ng(wa(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Bt.none())])}function JI(t,e,n,...i){t=Ye(t,bt);let r=Ye(t.firestore,St),o=wa(r),a;return a=typeof(e=Pt(e))=="string"||e instanceof Gi?ZI(o,"updateDoc",t._key,e,n,i):WI(o,"updateDoc",t._key,e),Vl(r,[a.toMutation(t._key,Bt.exists(!0))])}function JP(t){return Vl(Ye(t.firestore,St),[new es(t._key,Bt.none())])}function ek(t,e){let n=Ye(t.firestore,St),i=Ih(t),r=Lg(t.converter,e);return Vl(n,[Ng(wa(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Bt.exists(!1))]).then(()=>i)}function eE(t,...e){var n,i,r;t=Pt(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||iI(e[a])||(o=e[a],a++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(iI(e[a])){let v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[a+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let u,f,m;if(t instanceof bt)f=Ye(t.firestore,St),m=kl(t._key.path),u={next:v=>{e[a]&&e[a](tE(f,t,v))},error:e[a+1],complete:e[a+2]};else{let v=Ye(t,yn);f=Ye(v.firestore,St),m=v._query;let w=new io(f);u={next:E=>{e[a]&&e[a](new Wi(f,w,v,E))},error:e[a+1],complete:e[a+2]},LP(t._query)}return function(w,E,M,k){let F=new Al(k),q=new dh(E,F,M);return w.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return RI(yield Ml(w),q)})),()=>{F.$a(),w.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return PI(yield Ml(w),q)}))}}(rn(f),m,c,u)}function tk(t,e){return z$(rn(t=Ye(t,St)),iI(e)?e:{next:e})}function Vl(t,e){return function(i,r){let o=new Xt;return i.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return b$(yield zI(i),r,o)})),o.promise}(rn(t),e)}function tE(t,e,n){let i=n.docs.get(e._key),r=new io(t);return new xi(t,r,e._key,i,new Xr(n.hasPendingWrites,n.fromCache),e.converter)}var W$={maxAttempts:5};var Sg=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=wa(e)}set(e,n,i){this._verifyNotCommitted();let r=$o(e,this._firestore),o=Lg(r.converter,n,i),a=Ng(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Bt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=$o(e,this._firestore),a;return a=typeof(n=Pt(n))=="string"||n instanceof Gi?ZI(this._dataReader,"WriteBatch.update",o._key,n,i,r):WI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Bt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=$o(e,this._firestore);return this._mutations=this._mutations.concat(new es(n._key,Bt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function $o(t,e){if((t=Pt(t)).firestore!==e)throw new H($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var gI=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=wa(n)}get(n){let i=$o(n,this._firestore),r=new mI(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return oe();let a=o[0];if(a.isFoundDocument())return new va(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new va(this._firestore,r,i._key,null,i.converter);throw oe()})}set(n,i,r){let o=$o(n,this._firestore),a=Lg(o.converter,i,r),c=Ng(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(n,i,r,...o){let a=$o(n,this._firestore),c;return c=typeof(i=Pt(i))=="string"||i instanceof Gi?ZI(this._dataReader,"Transaction.update",a._key,i,r,o):WI(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,c),this}delete(n){let i=$o(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=$o(e,this._firestore),i=new io(this._firestore);return super.get(e).then(r=>new xi(this._firestore,i,n._key,r._document,new Xr(!1,!1),n.converter))}};function nk(t,e,n){t=Ye(t,St);let i=Object.assign(Object.assign({},W$),n);return function(o){if(o.maxAttempts<1)throw new H($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,a,c){let u=new Xt;return o.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){let f=yield L$(o);new Jw(o.asyncQueue,f,c,a,u).Xa()})),u.promise}(rn(t),r=>e(new gI(t,r)),i)}function ik(){return new ph("deleteField")}function rk(){return new aI("serverTimestamp")}function ok(...t){return new cI("arrayUnion",t)}function sk(...t){return new lI("arrayRemove",t)}function ak(t){return new uI("increment",t)}(function(e,n=!0){(function(r){Pl=r})(BE),Eu(new Es("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),c=new St(new w0(i.getProvider("auth-internal")),new D0(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new H($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ko(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),wo(BA,"4.6.3",e),wo(BA,"4.6.3","esm2017")})();var Z$="@firebase/firestore-compat",K$="0.3.32";function aE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new H("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function ck(){if(typeof Uint8Array>"u")throw new H("unimplemented","Uint8Arrays are not available in this environment.")}function lk(){if(!JM())throw new H("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Fg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return lk(),new t(xr.fromBase64String(e))}static fromUint8Array(e){return ck(),new t(xr.fromUint8Array(e))}toBase64(){return lk(),this._delegate.toBase64()}toUint8Array(){return ck(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function nE(t){return Q$(t,["next","error","complete"])}function Q$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var iE=class{enableIndexedDbPersistence(e,n){return bP(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return wP(e._delegate)}clearIndexedDbPersistence(e){return EP(e._delegate)}},Vg=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ko||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ci("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){gP(this._delegate,e,n,i)}enableNetwork(){return DP(this._delegate)}disableNetwork(){return xP(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,$I("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return CP(this._delegate)}onSnapshotsInSync(e){return tk(this._delegate,e)}get app(){if(!this._appCompat)throw new H("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zl(this,HI(this._delegate,e))}catch(n){throw Vn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Tr(this,Ih(this._delegate,e))}catch(n){throw Vn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xa(this,_P(this._delegate,e))}catch(n){throw Vn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return nk(this._delegate,n=>e(new Bg(this,n)))}batch(){return rn(this._delegate),new jg(new Sg(this._delegate,e=>Vl(this._delegate,e)))}loadBundle(e){return TP(this._delegate,e)}namedQuery(e){return SP(this._delegate,e).then(n=>n?new xa(this,n):null)}},Bl=class extends Rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fg(new xr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return Tr.forKey(n,this.firestore,null)}};function Y$(t){BM(t)}var Bg=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Bl(e)}get(e){let n=Ea(e);return this._delegate.get(n).then(i=>new Ca(this._firestore,new xi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=Ea(e);return i?(aE("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Ea(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Ea(e);return this._delegate.delete(n),this}},jg=class{constructor(e){this._delegate=e}set(e,n,i){let r=Ea(e);return i?(aE("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Ea(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Ea(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},jl=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new qo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Da(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new Bl(e),n),r.set(n,o)),o}};jl.INSTANCES=new WeakMap;var Tr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bl(e)}static forPath(e,n,i){if(e.length%2!==0)throw new H("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new bt(n._delegate,i,new ee(e)))}static forKey(e,n,i){return new t(n,new bt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new zl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zl(this.firestore,HI(this._delegate,e))}catch(n){throw Vn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Pt(e),e instanceof bt?qI(this._delegate,e):!1}set(e,n){n=aE("DocumentReference.set",n);try{return n?XI(this._delegate,e,n):XI(this._delegate,e)}catch(i){throw Vn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?JI(this._delegate,e):JI(this._delegate,e,n,...i)}catch(r){throw Vn(r,"updateDoc()","DocumentReference.update()")}}delete(){return JP(this._delegate)}onSnapshot(...e){let n=uk(e),i=dk(e,r=>new Ca(this.firestore,new xi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return eE(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=ZP(this._delegate):e?.source==="server"?n=KP(this._delegate):n=WP(this._delegate),n.then(i=>new Ca(this.firestore,new xi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Vn(t,e,n){return t.message=t.message.replace(e,n),t}function uk(t){for(let e of t)if(typeof e=="object"&&!nE(e))return e;return{}}function dk(t,e){var n,i;let r;return nE(t[0])?r=t[0]:nE(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Ca=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Tr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return YI(this._delegate,e._delegate)}},Da=class extends Ca{data(e){let n=this._delegate.data(e);return this._delegate._converter||jM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},xa=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Bl(e)}where(e,n,i){try{return new t(this.firestore,oo(this._delegate,FP(e,n,i)))}catch(r){throw Vn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,oo(this._delegate,VP(e,n)))}catch(i){throw Vn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,oo(this._delegate,BP(e)))}catch(n){throw Vn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,oo(this._delegate,jP(e)))}catch(n){throw Vn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,oo(this._delegate,zP(...e)))}catch(n){throw Vn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,oo(this._delegate,UP(...e)))}catch(n){throw Vn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,oo(this._delegate,$P(...e)))}catch(n){throw Vn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,oo(this._delegate,HP(...e)))}catch(n){throw Vn(n,"endAt()","Query.endAt()")}}isEqual(e){return GI(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=YP(this._delegate):e?.source==="server"?n=XP(this._delegate):n=QP(this._delegate),n.then(i=>new Eh(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=uk(e),i=dk(e,r=>new Eh(this.firestore,new Wi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return eE(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},rE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Da(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Eh=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new xa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Da(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new rE(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Da(this._firestore,i))})}isEqual(e){return YI(this._delegate,e._delegate)}},zl=class t extends xa{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Tr(this.firestore,e):null}doc(e){try{return e===void 0?new Tr(this.firestore,Ih(this._delegate)):new Tr(this.firestore,Ih(this._delegate,e))}catch(n){throw Vn(n,"doc()","CollectionReference.doc()")}}add(e){return ek(this._delegate,e).then(n=>new Tr(this.firestore,n))}isEqual(e){return qI(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(jl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ea(t){return Ye(t,bt)}var oE=class t{constructor(...e){this._delegate=new Gi(...e)}static documentId(){return new t($t.keyField().canonicalString())}isEqual(e){return e=Pt(e),e instanceof Gi?this._delegate._internalPath.isEqual(e._internalPath):!1}};var sE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=rk();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=ik();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=ok(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=sk(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=ak(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var X$={Firestore:Vg,GeoPoint:_a,Timestamp:Nt,Blob:Fg,Transaction:Bg,WriteBatch:jg,DocumentReference:Tr,DocumentSnapshot:Ca,Query:xa,QueryDocumentSnapshot:Da,QuerySnapshot:Eh,CollectionReference:zl,FieldPath:oE,FieldValue:sE,setLogLevel:Y$,CACHE_SIZE_UNLIMITED:vP};function J$(t,e){t.INTERNAL.registerComponent(new Es("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},X$)))}function eH(t){J$(t,(e,n)=>new Vg(e,n,new iE)),t.registerVersion(Z$,K$)}eH(Jn);function tH(t,e=or){return new Ae(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function hk(t,e){return tH(t,e)}function nH(t,e){return hk(t,e).pipe(ar(void 0),fc(),ge(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function uE(t,e){return hk(t,e).pipe(ge(n=>({payload:n,type:"query"})))}var zg=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=mk(i,n);return new $g(r,o,this.afs)}snapshotChanges(){return nH(this.ref,this.afs.schedulers.outsideAngular).pipe(qn)}valueChanges(e={}){return this.snapshotChanges().pipe(ge(({payload:n})=>e.idField?_t(X({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return it(this.ref.get(e)).pipe(qn)}};function Ug(t,e){return uE(t,e).pipe(ar(void 0),fc(),ge(n=>{let[i,r]=n,o=r.payload.docChanges(),a=o.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,u)=>{let f=o.find(v=>v.doc.ref.isEqual(c.ref)),m=i?.payload.docs.find(v=>v.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:c}})}),a}))}function fk(t,e,n){return Ug(t,n).pipe(Ts((i,r)=>iH(i,r.map(o=>o.payload),e),[]),dc(),ge(i=>i.map(r=>({type:r.type,payload:r}))))}function iH(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=rH(t,i))}),t}function cE(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function rH(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return cE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return cE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cE(t,e.oldIndex,1);break}return t}function pk(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var $g=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=Ug(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ge(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(ar(void 0),fc(),kt(([i,r])=>r.length>0||!i),ge(([,i])=>i),qn)}auditTrail(e){return this.stateChanges(e).pipe(Ts((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=pk(e);return fk(this.query,n,this.afs.schedulers.outsideAngular).pipe(qn)}valueChanges(e={}){return uE(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.payload.docs.map(i=>e.idField?_t(X({},i.data()),{[e.idField]:i.id}):i.data())),qn)}get(e){return it(this.query.get(e)).pipe(qn)}add(e){return this.ref.add(e)}doc(e){return new zg(this.ref.doc(e),this.afs)}},lE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Ug(this.query,this.afs.schedulers.outsideAngular).pipe(qn):Ug(this.query,this.afs.schedulers.outsideAngular).pipe(ge(n=>n.filter(i=>e.indexOf(i.type)>-1)),kt(n=>n.length>0),qn)}auditTrail(e){return this.stateChanges(e).pipe(Ts((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=pk(e);return fk(this.query,n,this.afs.schedulers.outsideAngular).pipe(qn)}valueChanges(e={}){return uE(this.query,this.afs.schedulers.outsideAngular).pipe(ge(i=>i.payload.docs.map(r=>e.idField?X({[e.idField]:r.id},r.data()):r.data())),qn)}get(e){return it(this.query.get(e)).pipe(qn)}},oH=new se("angularfire2.enableFirestorePersistence"),sH=new se("angularfire2.firestore.persistenceSettings"),aH=new se("angularfire2.firestore.settings"),cH=new se("angularfire2.firestore.use-emulator");function mk(t,e=n=>n){return{query:e(t),ref:t}}var gk=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,a,c,u,f,m,v,w,E,M,k,F,q,ie){this.schedulers=u;let Z=Td(n,c,i),ae=m;v&&a0(Z,c,w,M,k,F,E,q),[this.firestore,this.persistenceEnabled$]=lm(`${Z.name}.firestore`,"AngularFirestore",Z.name,()=>{let pe=c.runOutsideAngular(()=>Z.firestore());if(o&&pe.settings(o),ae&&pe.useEmulator(...ae),r&&!Hs(a)){let ue=()=>{try{return it(pe.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(S){return typeof console<"u"&&console.warn(S),he(!1)}};return[pe,c.runOutsideAngular(ue)]}else return[pe,he(!1)]},[o,ae,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:a}=mk(r,i),c=this.schedulers.ngZone.run(()=>o);return new $g(c,a,this)}collectionGroup(n,i){let r=i||(a=>a),o=this.firestore.collectionGroup(n);return new lE(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new zg(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(V(qc),V(Gc,8),V(oH,8),V(aH,8),V(On),V(_e),V(am),V(sH,8),V(cH,8),V(bm,8),V(t0,8),V(n0,8),V(i0,8),V(r0,8),V(o0,8),V(s0,8),V(Ks,8))};static \u0275prov=J({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var Ta=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.afs=r,this.router=o,this.user$=this.afAuth.authState.pipe(yt(a=>a?this.afs.doc(`users/${a.uid}`).valueChanges():he(null))),this.userData=this.afAuth.authState.pipe(yt(a=>a?this.afs.doc(`users/${a.uid}/data/data`).valueChanges():he(null)))}googleSignin(){return U(this,null,function*(){let i=new r_,r=yield this.afAuth.signInWithPopup(i);return this.currentUser=r.user,console.log(r),localStorage.setItem("key",r.user.uid),this.updateUserData(r.user)})}signOut(){return U(this,null,function*(){return yield this.afAuth.signOut(),this.router.navigate(["/"])})}updateUserData(i){console.log("update User Data");let r={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},o=this.afs.doc(`users/${i.uid}`);console.log(i.uid);let a={uid:i.uid,email:i.email,displayName:i.displayName,photoUrl:i.photoURL};return o.set(a,{merge:!0})}getUserData(){}addDataToUser(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}/data/data`).set(i,{merge:!0})}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}/data/data`).set(i,{merge:!0})):null}};e.\u0275fac=function(r){return new(r||e)(V(bm),V(gk),V(om))},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function uH(t,e){if(t&1&&(Y(0,"div",4)(1,"p"),ve(2),te()()),t&2){let n=Je();de(2),ni(n.coins.toFixed(2))}}function dH(t,e){if(t&1&&(Y(0,"div",4)(1,"p"),ve(2),te()()),t&2){let n=Je();de(2),Lt("",(n.coins/1e3).toFixed(2),"K")}}function hH(t,e){if(t&1&&(Y(0,"div",4)(1,"p"),ve(2),te()()),t&2){let n=Je();de(2),Lt("",(n.coins/1e6).toFixed(2),"M")}}function fH(t,e){if(t&1&&(Y(0,"div",4)(1,"p"),ve(2),te()()),t&2){let n=Je();de(2),Lt("",(n.coins/1e9).toFixed(2),"B")}}function pH(t,e){if(t&1&&(Y(0,"div",4)(1,"p"),ve(2),te()()),t&2){let n=Je();de(2),Lt("",(n.coins/1e12).toFixed(2),"T")}}function mH(t,e){if(t&1&&(Y(0,"div",4)(1,"p"),ve(2),te()()),t&2){let n=Je();de(2),Lt("",(n.coins/1e15).toFixed(2),"AA")}}function gH(t,e){if(t&1&&(Y(0,"div",4)(1,"p"),ve(2),te()()),t&2){let n=Je();de(2),Lt("",(n.coins/1e18).toFixed(2),"AB")}}function _H(t,e){if(t&1){let n=zi();Y(0,"div",15)(1,"button",16),ft("click",function(){vi(n);let r=Je();return yi(r.onCloseClick())}),ve(2,"X"),te(),Y(3,"h1"),ve(4,"Car"),te(),Y(5,"p"),ve(6),te(),Y(7,"p"),ve(8),te()()}if(t&2){let n=Je();Tt("z-index",n.z)("display","block"),de(6),ni(n.randomCar.car),de(2),ni(n.randomCar.hp)}}var _k=(()=>{let e=class e{ngOnInit(){if(localStorage.getItem("garagePrice")){console.log(JSON.parse(localStorage.getItem("garages")));let i=JSON.parse(localStorage.getItem("garages"));this.garagePrice=JSON.parse(localStorage.getItem("garagePrice")),this.allGarages.push(...i),console.log(i),setTimeout(()=>{i.forEach(r=>{console.log(r);let o=ct.marker([r.lat,r.lng],{icon:this.garageIcon}).addTo(this.map),a=ct.circle([r.lat,r.lng],100).addTo(this.map).setStyle({color:"#20C912"})})},500)}}initMap(){navigator.geolocation.getCurrentPosition(r=>{console.log(r.coords),this.moveMap([r.coords.latitude,r.coords.longitude])}),this.map=ct.map("map",{center:[0,0],zoom:18,attributionControl:!0}).on("click",r=>{console.log(r.latlng.lat,r.latlng.lng);var o=ct.popup().setLatLng([r.latlng.lat,r.latlng.lng]).setContent(`<p>Do you want to buy a Garage here</p>
        
        <p>Price: ${this.garagePrice.price+this.garagePrice.symbol} </p>
        
        <button id="buyButton">Buy Garage</button>
        
        <style>
        #buyButton {
        background-color: green;
        width: 80%;
        margin: auto;
        border-radius: 5px;
        color: white;
        }
        * {
          text-align: center;
        }
        </style>
        `).openOn(this.map);document.getElementById("buyButton").addEventListener("click",a=>{if(console.log(a),console.log(r.latlng),this.coins>this.garagePrice.price*1e3){console.log("passt"),this.coins=this.coins-this.garagePrice.price*1e3,this.garagePrice.price=this.garagePrice.price*15,this.allGarages.push({lat:r.latlng.lat,lng:r.latlng.lng}),console.log(this.allGarages),localStorage.setItem("garages",JSON.stringify(this.allGarages)),localStorage.setItem("garagePrice",JSON.stringify(this.garagePrice));let c=ct.marker([r.latlng.lat,r.latlng.lng],{icon:this.garageIcon}).addTo(this.map).on("click",()=>{}),u=ct.circle([r.latlng.lat,r.latlng.lng],100).addTo(this.map).setStyle({color:"#20C912"})}})}),this.moveMap([49,12]);let i=ct.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});navigator.geolocation.watchPosition(r=>{let o=r.coords.latitude,a=r.coords.longitude,c=r.coords.accuracy;setTimeout(()=>{ct.marker([49.3,10.5833333],{icon:this.repairShop}).addTo(this.map).on("click",this.onRepairShopClick)},5e3),setTimeout(()=>{this.currentPos=null},5e3)}),i.addTo(this.map),this.path(),this.generateRandomCars()}onBuyGarageClick(i){console.log(i)}onRepairShopClick(){console.log("jetzt")}constructor(i){this.auth=i,this.hideMap=new at,this.coins=0,this.iconHome=ct.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/home.png'>",iconSize:[86,105],iconAnchor:[43,105]}),this.iconCar=ct.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img id='car' src='../../assets/Car.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.manCar=ct.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Man.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.repairShop=ct.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Repair.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.garageIcon=ct.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/garage_locater.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.carLayer=new ct.FeatureGroup,this.allGarages=[],this.garagePrice={price:10,symbol:"K"},this.cars=+localStorage.getItem("carcount"),this.gems=0,this.distance=.005,this.allCities=[],this.cityMarkers=[],this.isoCountries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},this.randomCars=[],this.generiertePositionen=[],this.randomCar={car:"Car12",hp:1},this.visible=!0,this.z=0,this.user=i.user$.subscribe(r=>{console.log(r),this.user=r})}onUserClick(){this.hideMap.emit("garage")}hideMapNow(i){this.hideMap.emit(i)}ngAfterViewInit(){navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,console.log(this.lng,this.lat)}),console.log(this.lat,this.lng),this.initMap(),setTimeout(()=>{},5e3),navigator.geolocation.watchPosition(i=>{console.log(i),this.marker!=null&&this.map.removeLayer(this.marker),this.marker=ct.marker([i.coords.latitude,i.coords.longitude],{icon:this.manCar}).addTo(this.map),this.moveMap([i.coords.latitude,i.coords.longitude]),console.log(this.marker,this.carLayer),setTimeout(()=>{console.log("jetzt")},5e3);let r=!0;console.log(this.generiertePositionen),this.generiertePositionen.forEach(o=>{let a=this.getDistance([o[0],o[1]],[this.lat,this.lng]);console.log("Distance:",a,this.generiertePositionen),a<1600&&(r=!1)}),r==!0&&this.genNewCars(),this.allCities.forEach(o=>{let a=o.latitude,c=o.longitude,u=this.lng-c,f=this.lat-a;u>-.005&&u<.005&&(console.log(o),console.log(this.lat,this.lng),console.log(f,u))})}),this.getAllCities()}moveMap(i){this.map.flyTo(i,18)}path(){console.log("Start"),navigator.geolocation.watchPosition(i=>{let r=i.coords.latitude,o=i.coords.longitude,a=i.coords.accuracy;this.lat=r,this.lng=o;var c=[[r,o],[r,o+this.distance]]})}getCountryName(i){return this.isoCountries.hasOwnProperty(i)?this.isoCountries[i]:i}generateRandomCars(){console.log("generateRandomCarsStart",this.lat,this.lng),navigator.geolocation.getCurrentPosition(i=>{this.generiertePositionen.push([i.coords.latitude,i.coords.longitude]);for(let r=0;r<25;r++){let o=i.coords.latitude+(Math.random()-.5)/100,a=i.coords.longitude+(Math.random()-.5)/100;console.log(o,a);let c=ct.circle([o,a],50).addTo(this.map);this.randomCars.push({Lat:o,Lng:a});let u=ct.marker([o,a],{icon:this.iconCar}).addTo(this.map);u.on("click",()=>{this.getDistance([o,a],[this.lat,this.lng])<=50&&(console.log(o,a,this.getDistance([o,a],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c))}),console.log(this.randomCars),this.map.removeLayer(this.map)}}),console.log("fertig Random")}genNewCars(){console.log("generateRandomCarsStart",this.lat,this.lng),this.generiertePositionen.push([this.lat,this.lng]),console.log("hier");for(let i=0;i<25;i++){console.log("hier");let r=this.lat+(Math.random()-.5)/100,o=this.lng+(Math.random()-.5)/100;console.log(r,o);let a=ct.circle([r,o],50).addTo(this.map);this.randomCars.push({Lat:r,Lng:o});let c=ct.marker([r,o],{icon:this.iconCar}).addTo(this.map);c.on("click",()=>{this.getDistance([r,o],[this.lat,this.lng])<=50&&(console.log(r,o,this.getDistance([r,o],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a))}),console.log(this.randomCars),this.map.removeLayer(this.map)}console.log("fertig Random")}getAllCities(){return U(this,null,function*(){let i={method:"GET",redirect:"follow"},r;yield fetch("https://api.country.is/",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{r=this.getCountryName(o.country)}).catch(o=>{console.log(o)}),yield fetch("https://countriesnow.space/api/v0.1/countries/population/cities",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{console.log(o.data),o.data.forEach(a=>{setTimeout(()=>{a.populationCounts[0].value>1e4&&a.country==r&&fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${a.city}`,{method:"GET",redirect:"follow"}).then(c=>c.json()).then(c=>{setTimeout(()=>{c.results&&(ct.marker([c.results[0].latitude,c.results[0].longitude],{icon:this.repairShop}).addTo(this.map),this.allCities.push(c.results[0]),ct.circle([c.results[0].latitude,c.results[0].longitude],550).addTo(this.map).setStyle({color:"red"}))},1e3)}).catch(c=>console.log(c))})},100)}).catch(o=>console.log(o))})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,m=c-o,v=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(m/2),2),w=2*Math.asin(Math.sqrt(v)),E=6371;return console.log(w,E),w*E*1e3}onCloseClick(){this.visible=!0,console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ke(Ta))},e.\u0275cmp=Wt({type:e,selectors:[["app-leaflat-map"]],inputs:{coins:"coins"},outputs:{hideMap:"hideMap"},standalone:!0,features:[Zt],decls:29,vars:11,consts:[[1,"items"],["id","coins"],["id","icon"],["src","https://fab-io.xyz/world-clicker/assets/icon%20(2).png"],["id","text"],["id","cars"],["src","https://fab-io.xyz/world-clicker/assets/icon%20(3).png"],["id","gems"],["src","https://fab-io.xyz/world-clicker/assets/icon%20(1).png"],[1,"map-container"],[1,"map-frame"],["id","map"],["id","carCard",3,"z-Index","display"],["id","user"],["width","50px","height","50px",3,"click","src"],["id","carCard"],["id","closeBtn",3,"click"]],template:function(r,o){r&1&&(Y(0,"div",0)(1,"div",1)(2,"div",2),je(3,"img",3),te(),Ot(4,uH,3,1,"div",4)(5,dH,3,1)(6,hH,3,1)(7,fH,3,1)(8,pH,3,1)(9,mH,3,1)(10,gH,3,1),te(),Y(11,"div",5)(12,"div",2),je(13,"img",6),te(),Y(14,"div",4)(15,"p"),ve(16),te()()(),Y(17,"div",7)(18,"div",2),je(19,"img",8),te(),Y(20,"div",4)(21,"p"),ve(22),te()()()(),Y(23,"div",9)(24,"div",10),je(25,"div",11),te()(),Ot(26,_H,9,6,"div",12),Y(27,"div",13)(28,"img",14),ft("click",function(){return o.hideMap.emit("profile")}),te()()),r&2&&(de(4),_n(4,o.coins<1e3?4:o.coins>=1e3&&o.coins<=999999?5:o.coins>=1e6&&o.coins<=999999999?6:o.coins>=1e9&&o.coins<=999999999999?7:o.coins>=1e12&&o.coins<=999999999999999?8:o.coins>=1e15&&o.coins<=1e18?9:o.coins>=1e18&&o.coins<=1e21?10:-1),de(12),ni(o.cars),de(6),ni(o.gems),de(),Tt("display",o.visible?"block":"none"),de(),Tt("display",o.visible?"block":"none"),de(),Tt("display",o.visible?"block":"none"),de(),_n(26,o.visible==!1?26:-1),de(2),ti("src",o.user.photoUrl,Mo))},dependencies:[EA],styles:['.map-container[_ngcontent-%COMP%]{position:absolute;inset:0;height:calc(100% + -0px)}.items[_ngcontent-%COMP%]{position:absolute;top:25px;left:0;display:flex;z-index:50000;justify-content:space-around;width:100%}#user[_ngcontent-%COMP%]{z-index:50000;position:absolute;bottom:35px;left:15px;width:50px;height:50px}#user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}#buyButton[_ngcontent-%COMP%]{width:80%;height:25px;background-color:green}.items[_ngcontent-%COMP%]   #cars[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #gems[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #coins[_ngcontent-%COMP%]{width:100px;height:25px;background-color:#fff;border:1px black solid;border-radius:2px}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map[_ngcontent-%COMP%]{height:100%}.marker-pin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:500}.marker-pin[_ngcontent-%COMP%]:after{content:"";width:1px;height:1px;margin:3px 0 0 3px;background:#fff;position:absolute;border-radius:50%}.custom-div-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:5px;font-size:5px;left:0;right:0;margin:10px auto;text-align:center}img[_ngcontent-%COMP%]{width:50px;height:55px}#car[_ngcontent-%COMP%]{width:3px;height:3px}#carCard[_ngcontent-%COMP%]{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:5000;background-color:#fff;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}#icon[_ngcontent-%COMP%]{width:30%;height:100%}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:75%}#text[_ngcontent-%COMP%]{width:70%}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-37.5px;left:25px}']});let t=e;return t})();var vk=(()=>{let e=class e{constructor(){fetch("../../assets/cars.json",{method:"GET",redirect:"follow"}).then(i=>i.json()).then(i=>{console.log(i),this.cars=i,console.log(this.cars)}).catch(i=>console.error(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yH(t,e){if(t&1&&(je(0,"br"),Y(1,"h1"),ve(2),te(),je(3,"img",2),Y(4,"div",3)(5,"div",4),ve(6),te(),Y(7,"div",5),ve(8),te(),Y(9,"div",6),ve(10),te(),Y(11,"div",7),ve(12),te(),Y(13,"div",8),ve(14),te(),Y(15,"div",9),ve(16),te()(),je(17,"br")),t&2){let n=Je();de(),Tt("color",n.randomCar.textColor),de(),ni(n.randomCar.Name.toUpperCase()),de(),ti("src",n.randomCar.Path,Mo),de(2),Tt("background",n.randomCar.Color)("color",n.randomCar.textColor),de(),Lt("",n.randomCar.Horsepower," hp"),de(),Tt("background",n.randomCar.Color)("color",n.randomCar.textColor),de(),Lt("",n.randomCar.Miles_per_Gallon," Miles per Gallon"),de(),Tt("background",n.randomCar.Color)("color",n.randomCar.textColor),de(),Lt("",n.randomCar.Cylinders," Cylinders"),de(),Tt("background",n.randomCar.Color)("color",n.randomCar.textColor),de(),Lt(" ",n.randomCar.Acceleration,"s 0 - 60 mp/h"),de(),Tt("background",n.randomCar.Color)("color",n.randomCar.textColor),de(),Lt(" ",n.randomCar.CPS," coins per second"),de(),Tt("background",n.randomCar.Color)("color",n.randomCar.textColor),de(),Lt(" Year: ",n.randomCar.Year," ")}}var yk=(()=>{let e=class e{addCoin(i){console.log(i),this.addCoins.emit(Math.floor(i))}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){if(setTimeout(()=>{this.getRandomCar()},500),localStorage.getItem("mycars")){let i=JSON.parse(localStorage.getItem("mycars"));console.log(localStorage.getItem("mycars"),JSON.parse(localStorage.getItem("mycars"))),console.log("allcars"),console.log(i),this.myCars.push(...i),console.log(this.myCars)}}constructor(i){this.car=i,this.hideMap=new at,this.addCoins=new at,this.CPS=0,this.randomCar={car:"Car12",hp:1,topSpeed:152},this.myCars=[],this.allCars=[],this.allCars=this.car.cars}getAllCars(){this.allCars=this.car.cars}getRandomCar(){if(console.log(this.car.cars),this.car.cars){let i=this.car.cars[Math.floor(Math.random()*this.car.cars.length)];console.log(i),this.randomCar=i,this.randomCar.CPS=this.randomCar.Horsepower*this.randomCar.Acceleration*this.randomCar.Cylinders/1e3,this.myCars.push(i),console.log(this.CPS),this.CPS=this.CPS+i.CPS,console.log(this.CPS),this.getCPS(),localStorage.setItem("mycars",JSON.stringify(this.myCars))}}getCPS(){this.addCoin(this.CPS),console.log(this.CPS)}};e.\u0275fac=function(r){return new(r||e)(ke(vk))},e.\u0275cmp=Wt({type:e,selectors:[["app-car-found"]],outputs:{hideMap:"hideMap",addCoins:"addCoins"},standalone:!0,features:[Zt],decls:6,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&(Y(0,"body")(1,"div",0)(2,"button",1),ft("click",function(){return o.onCloseClick()}),ve(3,"X"),te(),je(4,"br"),Ot(5,yH,18,34),te()()),r&2&&(de(),Tt("display","block")("background",o.randomCar.Color),de(4),_n(5,o.randomCar.Color?5:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;height:30px;padding-top:7.5px}"]});let t=e;return t})();function bH(t,e){if(t&1&&(Y(0,"div",6),je(1,"br")(2,"img",7)(3,"br"),Y(4,"p"),ve(5),te()()),t&2){let n=e.$implicit;Tt("background",n.Color),de(2),ti("src",n.Path,Mo),de(3),ni(n.Name)}}function wH(t,e){if(t&1&&fT(0,bH,6,4,"div",5,hT),t&2){let n=Je();pT(n.myCars)}}var bk=(()=>{let e=class e{constructor(){this.hideMap=new at}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Wt({type:e,selectors:[["app-my-cars"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Zt],decls:6,vars:1,consts:[[1,"container"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["id","car",3,"background"],["id","car"],["width","50%","height","auto",3,"src"]],template:function(r,o){r&1&&(Y(0,"div",0),Ot(1,wH,2,0),te(),Y(2,"div",1),ft("click",function(){return o.onCloseClick()}),Y(3,"div",2),ft("click",function(){return o.onCloseClick()}),Y(4,"button",3),ft("click",function(){return o.onCloseClick()}),je(5,"img",4),te()()()),r&2&&(de(),_n(1,o.myCars?1:-1))},styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();var wk=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ot({type:e}),e.\u0275inj=rt({imports:[_r]});let t=e;return t})();function IH(t,e){if(t&1&&(Y(0,"div",5),je(1,"img",20),Y(2,"p"),ve(3),te()()),t&2){let n=Je();de(),ti("src",n.user.photoUrl,Mo),de(2),ni(n.user.displayName)}}var Ik=(()=>{let e=class e{constructor(i){this.auth=i,this.hideMap=new at,this.progress=0,i.user$.subscribe(r=>{console.log(r),this.user=r})}onLogoutClick(){localStorage.removeItem("key"),this.auth.signOut(),window.location.reload()}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(ke(Ta))},e.\u0275cmp=Wt({type:e,selectors:[["app-profile"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Zt],decls:68,vars:3,consts:[[1,"logout"],["src","../../assets/image-removebg-preview (11).png","width","30px","height","30px",3,"click"],[1,"menu","container"],[1,"profile"],[1,"friends"],[1,"user","container"],[1,"container","level"],[1,"Level"],[1,"Progressbar"],["id","progress"],["id","fortschritt"],[1,"container"],["id","icon",3,"click"],["src","../../assets/car_icon.png","width","50px","height","50px"],["id","icon"],["src","../../assets/addFriends_icon.png","width","50px","height","50px"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["width","50px","height","50px",3,"src"]],template:function(r,o){r&1&&(Y(0,"div",0)(1,"img",1),ft("click",function(){return o.onLogoutClick()}),te()(),Y(2,"div",2),je(3,"div",3)(4,"div",4),te(),Ot(5,IH,4,2,"div",5),je(6,"br"),Y(7,"div",6)(8,"div",7)(9,"p"),ve(10,"1"),te(),Y(11,"p"),ve(12,"LEVEL"),te()(),Y(13,"div",8)(14,"div",9)(15,"p",10),ve(16,"7.125/ 10000"),te()()()(),je(17,"hr"),Y(18,"div",11)(19,"div",12),ft("click",function(){return o.hideMap.emit("garage")}),je(20,"img",13),Y(21,"p"),ve(22,"Garage"),te()(),Y(23,"div",14),je(24,"img",15),Y(25,"p"),ve(26,"Friends"),te()(),Y(27,"div",14),je(28,"img",13),Y(29,"p"),ve(30,"Garage"),te()(),Y(31,"div",14),je(32,"img",13),Y(33,"p"),ve(34,"Garage"),te()()(),je(35,"br")(36,"br")(37,"hr"),Y(38,"div",11)(39,"p"),ve(40,"Gelaufene Distanz"),te(),Y(41,"p"),ve(42,"1.5 km"),te()(),Y(43,"div",11)(44,"p"),ve(45,"Gelaufene Distanz"),te(),Y(46,"p"),ve(47,"1.5 km"),te()(),Y(48,"div",11)(49,"p"),ve(50,"Gelaufene Distanz"),te(),Y(51,"p"),ve(52,"1.5 km"),te()(),Y(53,"div",11)(54,"p"),ve(55,"Gelaufene Distanz"),te(),Y(56,"p"),ve(57,"1.5 km"),te()(),Y(58,"div",11)(59,"p"),ve(60,"Gelaufene Distanz"),te(),Y(61,"p"),ve(62,"1.5 km"),te()(),je(63,"hr"),Y(64,"div",16),ft("click",function(){return o.onCloseClick()}),Y(65,"div",17),ft("click",function(){return o.onCloseClick()}),Y(66,"button",18),ft("click",function(){return o.onCloseClick()}),je(67,"img",19),te()()()),r&2&&(de(5),_n(5,o.user?5:-1),de(9),Tt("width",o.progress+"%"))},dependencies:[wk],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}.logout[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e53d31;border-radius:50%;position:absolute;right:5px}.logout[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px}img[_ngcontent-%COMP%]{margin:0 auto auto}#icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e96245;border-radius:50%;border:0px}.Progressbar[_ngcontent-%COMP%]{width:80%;height:50px;border-radius:50px}#progress[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#000;border-radius:50px}#fortschritt[_ngcontent-%COMP%]{margin-left:150px;width:150px}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px}']});let t=e;return t})();function EH(t,e){if(t&1){let n=zi();Y(0,"app-car-found",3),ft("hideMap",function(r){vi(n);let o=Je(2);return yi(o.switchVisibile(r))})("addCoins",function(r){vi(n);let o=Je(2);return yi(o.addCoins(r))}),te()}}function CH(t,e){if(t&1){let n=zi();Y(0,"app-my-cars",4),ft("hideMap",function(r){vi(n);let o=Je(2);return yi(o.switchVisibile(r))}),te()}}function DH(t,e){if(t&1){let n=zi();Y(0,"app-profile",4),ft("hideMap",function(r){vi(n);let o=Je(2);return yi(o.switchVisibile(r))}),te()}}function xH(t,e){if(t&1){let n=zi();Y(0,"div",1)(1,"app-leaflat-map",2),ft("hideMap",function(r){vi(n);let o=Je();return yi(o.switchVisibile(r))}),te(),Ot(2,EH,1,0,"app-car-found")(3,CH,1,0,"app-my-cars")(4,DH,1,0),te()}if(t&2){let n=Je();de(),Tt("display",n.visible?"block":"none"),ti("coins",n.coins),de(),_n(2,!n.visible&&n.currentVisible=="carFound"?2:-1),de(),_n(3,!n.visible&&n.currentVisible=="garage"?3:!n.visible&&n.currentVisible=="profile"?4:-1)}}function TH(t,e){if(t&1){let n=zi();Y(0,"div"),ve(1),je(2,"hr"),Y(3,"button",6),ft("click",function(){vi(n);let r=Je(2);return yi(r.auth.signOut())}),ve(4,"Sign Out"),te()()}if(t&2){let n=e.ngIf;de(),Lt(" ",n.jsonData,`
`)}}function SH(t,e){if(t&1){let n=zi();Y(0,"button",6),ft("click",function(){vi(n);let r=Je(2);return yi(r.signIn())}),ve(1,"Login"),te()}}function AH(t,e){if(t&1&&(Ot(0,TH,5,1,"div",5),_T(1,"async"),Ot(2,SH,2,0,"ng-template",null,0,yT)),t&2){let n=gT(3),i=Je();ti("ngIf",vT(1,2,i.auth.user$))("ngIfElse",n)}}var Ek=(()=>{let e=class e{constructor(i){this.auth=i,this.key=localStorage.getItem("key"),this.title="world-clicker",this.cps=0,this.coins=0,this.visible=!0}signIn(){this.auth.googleSignin(),setInterval(()=>{localStorage.getItem("key")&&window.location.reload()},500)}addCoins(i){console.log("coin:",i),this.cps=this.cps+i,localStorage.setItem("cps",this.cps.toString())}ngOnInit(){console.log(this.auth.user$,this.auth.currentUser,this.auth.userData.subscribe(i=>{console.log(i,i.update);var r=new Date().getTime()/1e3;i.update&&(console.log(r,i.update,r-i.update),this.coins=+localStorage.getItem("coins")+ +localStorage.getItem("cps")*(r-i.update)/2,console.log(this.coins))})),localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins"))),setInterval(()=>{Math.floor(this.coins=this.coins+this.cps),localStorage.setItem("coins",this.coins.toString())},1e3),this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps")}),setInterval(()=>{var i=new Date().getTime()/1e3;this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps"),update:i})},25e3)}updateUserDat(i){this.auth.addDataToUser(i)}switchVisibile(i){i=="exit"&&(this.visible=!0,this.currentVisible="exit"),i!="exit"&&(this.visible=!1,this.currentVisible=i),console.log(i),console.log(this.visible),console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ke(Ta))},e.\u0275cmp=Wt({type:e,selectors:[["app-root"]],standalone:!0,features:[Zt],decls:2,vars:1,consts:[["login",""],[1,"App"],[3,"hideMap","coins"],[3,"hideMap","addCoins"],[3,"hideMap"],[4,"ngIf","ngIfElse"],[1,"button",3,"click"]],template:function(r,o){r&1&&Ot(0,xH,5,5,"div",1)(1,AH,4,4),r&2&&_n(0,o.key?0:1)},dependencies:[_k,yk,bk,xy,LT,FT,Ik],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.App[_ngcontent-%COMP%]{text-align:center}app-leaflet-map[_ngcontent-%COMP%]{height:100%}.push[_ngcontent-%COMP%]{height:calc(100% - 150px)}app-navigation[_ngcontent-%COMP%]{width:100%;height:100px;left:0;z-index:545}"]});let t=e;return t})();WT(Ek,NS).catch(t=>console.error(t));
