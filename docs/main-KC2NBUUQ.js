import{A as vo,B as Jn,C as i_,a as Y,b as ht,c as Kk,d as Qk,e as Jg,f as U,g as RE,h as cf,i as PE,j as kE,k as NE,l as e_,m as OE,n as Iu,o as t_,p as lf,q as LE,r as FE,s as n_,t as At,u as ws,v as nr,w as uf,x as Eu,y as VE,z as BE}from"./chunk-JHDVRTR6.js";var LS=Kk((um,OS)=>{(function(t,e){typeof um=="object"&&typeof OS<"u"?e(um):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.leaflet={}))})(um,function(t){"use strict";var e="1.9.4";function n(s){var l,h,p,_;for(h=1,p=arguments.length;h<p;h++){_=arguments[h];for(l in _)s[l]=_[l]}return s}var i=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function r(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var p=h.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,l,h){var p,_,b,x;return x=function(){p=!1,_&&(b.apply(h,_),_=!1)},b=function(){p?_=arguments:(s.apply(h,arguments),setTimeout(x,l),p=!0)},b}function u(s,l,h){var p=l[1],_=l[0],b=p-_;return s===p&&h?s:((s-_)%b+b)%b+_}function f(){return!1}function m(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function v(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function w(s){return v(s).split(/\s+/)}function E(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function M(s,l,h){var p=[];for(var _ in s)p.push(encodeURIComponent(h?_.toUpperCase():_)+"="+encodeURIComponent(s[_]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function F(s,l){return s.replace(k,function(h,p){var _=l[p];if(_===void 0)throw new Error("No value provided for variable "+h);return typeof _=="function"&&(_=_(l)),_})}var q=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function te(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function oe(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var de=0;function ce(s){var l=+new Date,h=Math.max(0,16-(l-de));return de=l+h,window.setTimeout(s,h)}var S=window.requestAnimationFrame||oe("RequestAnimationFrame")||ce,C=window.cancelAnimationFrame||oe("CancelAnimationFrame")||oe("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function D(s,l,h){if(h&&S===ce)s.call(l);else return S.call(window,r(s,l))}function A(s){s&&C.call(window,s)}var R={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:a,throttle:c,wrapNum:u,falseFn:f,formatNum:m,trim:v,splitWords:w,setOptions:E,getParamString:M,template:F,isArray:q,indexOf:te,emptyImageUrl:Z,requestFn:S,cancelFn:C,requestAnimFrame:D,cancelAnimFrame:A};function N(){}N.extend=function(s){var l=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,p=i(h);p.constructor=l,l.prototype=p;for(var _ in this)Object.prototype.hasOwnProperty.call(this,_)&&_!=="prototype"&&_!=="__super__"&&(l[_]=this[_]);return s.statics&&n(l,s.statics),s.includes&&(T(s.includes),n.apply(null,[p].concat(s.includes))),n(p,s),delete p.statics,delete p.includes,p.options&&(p.options=h.options?i(h.options):{},n(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var b=0,x=p._initHooks.length;b<x;b++)p._initHooks[b].call(this)}},l},N.include=function(s){var l=this.prototype.options;return n(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return n(this.prototype.options,s),this},N.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function T(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=q(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var xt={on:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=w(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=w(s);for(var _=arguments.length===1,b=0,x=s.length;b<x;b++)_?this._off(s[b]):this._off(s[b],l,h)}return this},_on:function(s,l,h,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var _={fn:l,ctx:h};p&&(_.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(_)}},_off:function(s,l,h){var p,_,b;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(_=0,b=p.length;_<b;_++)p[_].fn=f;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var x=this._listens(s,l,h);if(x!==!1){var O=p[x];this._firingCount&&(O.fn=f,this._events[s]=p=p.slice()),p.splice(x,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var p=n({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var _=this._events[s];if(_){this._firingCount=this._firingCount+1||1;for(var b=0,x=_.length;b<x;b++){var O=_[b],j=O.fn;O.once&&this.off(s,j,O.ctx),j.call(O.ctx||this,p)}this._firingCount--}}return h&&this._propagateEvent(p),this},listens:function(s,l,h,p){typeof s!="string"&&console.warn('"string" type argument expected');var _=l;typeof l!="function"&&(p=!!l,_=void 0,h=void 0);var b=this._events&&this._events[s];if(b&&b.length&&this._listens(s,_,h)!==!1)return!0;if(p){for(var x in this._eventParents)if(this._eventParents[x].listens(s,l,h,p))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;h===this&&(h=void 0);for(var _=0,b=p.length;_<b;_++)if(p[_].fn===l&&p[_].ctx===h)return _;return!1},once:function(s,l,h){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=w(s);for(var _=0,b=s.length;_<b;_++)this._on(s[_],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,n({layer:s.target,propagatedFrom:s.target},s),!0)}};xt.addEventListener=xt.on,xt.removeEventListener=xt.clearAllEventListeners=xt.off,xt.addOneTimeEventListener=xt.once,xt.fireEvent=xt.fire,xt.hasEventListeners=xt.listens;var Di=N.extend(xt);function Ce(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var io=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Ce.prototype={clone:function(){return new Ce(this.x,this.y)},add:function(s){return this.clone()._add(me(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(me(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Ce(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Ce(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=io(this.x),this.y=io(this.y),this},distanceTo:function(s){s=me(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=me(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=me(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function me(s,l,h){return s instanceof Ce?s:q(s)?new Ce(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Ce(s.x,s.y):new Ce(s,l,h)}function rt(s,l){if(s)for(var h=l?[s,l]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}rt.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof Ce||typeof s[0]=="number"||"x"in s)l=h=me(s);else if(s=fn(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return me((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return me(this.min.x,this.max.y)},getTopRight:function(){return me(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof Ce?s=me(s):s=fn(s),s instanceof rt?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=fn(s);var l=this.min,h=this.max,p=s.min,_=s.max,b=_.x>=l.x&&p.x<=h.x,x=_.y>=l.y&&p.y<=h.y;return b&&x},overlaps:function(s){s=fn(s);var l=this.min,h=this.max,p=s.min,_=s.max,b=_.x>l.x&&p.x<h.x,x=_.y>l.y&&p.y<h.y;return b&&x},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,p=Math.abs(l.x-h.x)*s,_=Math.abs(l.y-h.y)*s;return fn(me(l.x-p,l.y-_),me(h.x+p,h.y+_))},equals:function(s){return s?(s=fn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function fn(s,l){return!s||s instanceof rt?s:new rt(s,l)}function yn(s,l){if(s)for(var h=l?[s,l]:s,p=0,_=h.length;p<_;p++)this.extend(h[p])}yn.prototype={extend:function(s){var l=this._southWest,h=this._northEast,p,_;if(s instanceof Ie)p=s,_=s;else if(s instanceof yn){if(p=s._southWest,_=s._northEast,!p||!_)return this}else return s?this.extend(ze(s)||Je(s)):this;return!l&&!h?(this._southWest=new Ie(p.lat,p.lng),this._northEast=new Ie(_.lat,_.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),h.lat=Math.max(_.lat,h.lat),h.lng=Math.max(_.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,p=Math.abs(l.lat-h.lat)*s,_=Math.abs(l.lng-h.lng)*s;return new yn(new Ie(l.lat-p,l.lng-_),new Ie(h.lat+p,h.lng+_))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ie||"lat"in s?s=ze(s):s=Je(s);var l=this._southWest,h=this._northEast,p,_;return s instanceof yn?(p=s.getSouthWest(),_=s.getNorthEast()):p=_=s,p.lat>=l.lat&&_.lat<=h.lat&&p.lng>=l.lng&&_.lng<=h.lng},intersects:function(s){s=Je(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>=l.lat&&p.lat<=h.lat,x=_.lng>=l.lng&&p.lng<=h.lng;return b&&x},overlaps:function(s){s=Je(s);var l=this._southWest,h=this._northEast,p=s.getSouthWest(),_=s.getNorthEast(),b=_.lat>l.lat&&p.lat<h.lat,x=_.lng>l.lng&&p.lng<h.lng;return b&&x},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Je(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Je(s,l){return s instanceof yn?s:new yn(s,l)}function Ie(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}Ie.prototype={equals:function(s,l){if(!s)return!1;s=ze(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+m(this.lat,s)+", "+m(this.lng,s)+")"},distanceTo:function(s){return Gi.distance(this,ze(s))},wrap:function(){return Gi.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return Je([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function ze(s,l,h){return s instanceof Ie?s:q(s)&&typeof s[0]!="object"?s.length===3?new Ie(s[0],s[1],s[2]):s.length===2?new Ie(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ie(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ie(s,l,h)}var xn={latLngToPoint:function(s,l){var h=this.projection.project(s),p=this.scale(l);return this.transformation._transform(h,p)},pointToLatLng:function(s,l){var h=this.scale(l),p=this.transformation.untransform(s,h);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),p=this.transformation.transform(l.min,h),_=this.transformation.transform(l.max,h);return new rt(p,_)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ie(h,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),p=l.lat-h.lat,_=l.lng-h.lng;if(p===0&&_===0)return s;var b=s.getSouthWest(),x=s.getNorthEast(),O=new Ie(b.lat-p,b.lng-_),j=new Ie(x.lat-p,x.lng-_);return new yn(O,j)}},Gi=n({},xn,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,p=s.lat*h,_=l.lat*h,b=Math.sin((l.lat-s.lat)*h/2),x=Math.sin((l.lng-s.lng)*h/2),O=b*b+Math.cos(p)*Math.cos(_)*x*x,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),ro=6378137,Ul={R:ro,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,p=Math.max(Math.min(h,s.lat),-h),_=Math.sin(p*l);return new Ce(this.R*s.lng*l,this.R*Math.log((1+_)/(1-_))/2)},unproject:function(s){var l=180/Math.PI;return new Ie((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=ro*Math.PI;return new rt([-s,-s],[s,s])}()};function $l(s,l,h,p){if(q(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=p}$l.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Ce((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Wi(s,l,h,p){return new $l(s,l,h,p)}var oo=n({},Gi,{code:"EPSG:3857",projection:Ul,transformation:function(){var s=.5/(Math.PI*Ul.R);return Wi(s,.5,-s,.5)}()}),Hl=n({},oo,{code:"EPSG:900913"});function xa(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ta(s,l){var h="",p,_,b,x,O,j;for(p=0,b=s.length;p<b;p++){for(O=s[p],_=0,x=O.length;_<x;_++)j=O[_],h+=(_?"L":"M")+j.x+" "+j.y;h+=l?se.svg?"z":"x":""}return h||"M0 0"}var is=document.documentElement.style,rs="ActiveXObject"in window,Ch=rs&&!document.addEventListener,Dh="msLaunchUri"in navigator&&!("documentMode"in document),Sa=Wn("webkit"),ql=Wn("android"),Aa=Wn("android 2")||Wn("android 3"),xh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Hg=ql&&Wn("Google")&&xh<537&&!("AudioNode"in window),os=!!window.opera,Ma=!Dh&&Wn("chrome"),Ra=Wn("gecko")&&!Sa&&!os&&!rs,on=!Ma&&Wn("safari"),sn=Wn("phantom"),ss="OTransition"in is,Th=navigator.platform.indexOf("Win")===0,Gl=rs&&"transition"in is,Wl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Aa,so="MozPerspective"in is,Sh=!window.L_DISABLE_3D&&(Gl||Wl||so)&&!ss&&!sn,ao=typeof orientation<"u"||Wn("mobile"),Zl=ao&&Sa,qg=ao&&Wl,Ah=!window.PointerEvent&&window.MSPointerEvent,Pa=!!(window.PointerEvent||Ah),Kl="ontouchstart"in window||!!window.TouchEvent,Mh=!window.L_NO_TOUCH&&(Kl||Pa),as=ao&&os,Ql=ao&&Ra,Yl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tr=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,l),window.removeEventListener("testPassiveEventSupport",f,l)}catch{}return s}(),Rh=function(){return!!document.createElement("canvas").getContext}(),co=!!(document.createElementNS&&xa("svg").createSVGRect),Ph=!!co&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),cs=!co&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),kh=navigator.platform.indexOf("Mac")===0,pn=navigator.platform.indexOf("Linux")===0;function Wn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var se={ie:rs,ielt9:Ch,edge:Dh,webkit:Sa,android:ql,android23:Aa,androidStock:Hg,opera:os,chrome:Ma,gecko:Ra,safari:on,phantom:sn,opera12:ss,win:Th,ie3d:Gl,webkit3d:Wl,gecko3d:so,any3d:Sh,mobile:ao,mobileWebkit:Zl,mobileWebkit3d:qg,msPointer:Ah,pointer:Pa,touch:Mh,touchNative:Kl,mobileOpera:as,mobileGecko:Ql,retina:Yl,passiveEvents:Tr,canvas:Rh,svg:co,vml:cs,inlineSvg:Ph,mac:kh,linux:pn},lo=se.msPointer?"MSPointerDown":"pointerdown",Nh=se.msPointer?"MSPointerMove":"pointermove",Oh=se.msPointer?"MSPointerUp":"pointerup",Sr=se.msPointer?"MSPointerCancel":"pointercancel",Xl={touchstart:lo,touchmove:Nh,touchend:Oh,touchcancel:Sr},Lh={touchstart:Vh,touchmove:uo,touchend:uo,touchcancel:uo},xi={},Jl=!1;function eu(s,l,h){return l==="touchstart"&&nu(),Lh[l]?(h=Lh[l].bind(this,h),s.addEventListener(Xl[l],h,!1),h):(console.warn("wrong event specified:",l),f)}function ka(s,l,h){if(!Xl[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Xl[l],h,!1)}function Zi(s){xi[s.pointerId]=s}function Fh(s){xi[s.pointerId]&&(xi[s.pointerId]=s)}function tu(s){delete xi[s.pointerId]}function nu(){Jl||(document.addEventListener(lo,Zi,!0),document.addEventListener(Nh,Fh,!0),document.addEventListener(Oh,tu,!0),document.addEventListener(Sr,tu,!0),Jl=!0)}function uo(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in xi)l.touches.push(xi[h]);l.changedTouches=[l],s(l)}}function Vh(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&St(l),uo(s,l)}function Bh(s){var l={},h,p;for(p in s)h=s[p],l[p]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Gg=200;function Na(s,l){s.addEventListener("dblclick",l);var h=0,p;function _(b){if(b.detail!==1){p=b.detail;return}if(!(b.pointerType==="mouse"||b.sourceCapabilities&&!b.sourceCapabilities.firesTouchEvents)){var x=du(b);if(!(x.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!x.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-h<=Gg?(p++,p===2&&l(Bh(b))):p=1,h=O}}}return s.addEventListener("click",_),{dblclick:l,simDblclick:_}}function jh(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var ls=oi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ti=oi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ki=Ti==="webkitTransition"||Ti==="OTransition"?Ti+"End":"transitionend";function Oa(s){return typeof s=="string"?document.getElementById(s):s}function us(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);h=p?p[l]:null}return h==="auto"?null:h}function He(s,l,h){var p=document.createElement(s);return p.className=l||"",h&&h.appendChild(p),p}function ut(s){var l=s.parentNode;l&&l.removeChild(s)}function ds(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Qi(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Yi(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function La(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=hs(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Te(s,l){if(s.classList!==void 0)for(var h=w(l),p=0,_=h.length;p<_;p++)s.classList.add(h[p]);else if(!La(s,l)){var b=hs(s);iu(s,(b?b+" ":"")+l)}}function Tt(s,l){s.classList!==void 0?s.classList.remove(l):iu(s,v((" "+hs(s)+" ").replace(" "+l+" "," ")))}function iu(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function hs(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function Tn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Wg(s,l)}function Wg(s,l){var h=!1,p="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function oi(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function mn(s,l,h){var p=l||new Ce(0,0);s.style[ls]=(se.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(h?" scale("+h+")":"")}function gt(s,l){s._leaflet_pos=l,se.any3d?mn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function si(s){return s._leaflet_pos||new Ce(0,0)}var ho,Qe,fo;if("onselectstart"in document)ho=function(){Ee(window,"selectstart",St)},Qe=function(){et(window,"selectstart",St)};else{var Si=oi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ho=function(){if(Si){var s=document.documentElement.style;fo=s[Si],s[Si]="none"}},Qe=function(){Si&&(document.documentElement.style[Si]=fo,fo=void 0)}}function Ar(){Ee(window,"dragstart",St)}function ru(){et(window,"dragstart",St)}var fs,ou;function su(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Fa(),fs=s,ou=s.style.outlineStyle,s.style.outlineStyle="none",Ee(window,"keydown",Fa))}function Fa(){fs&&(fs.style.outlineStyle=ou,fs=void 0,ou=void 0,et(window,"keydown",Fa))}function zh(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Mr(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Xi={__proto__:null,TRANSFORM:ls,TRANSITION:Ti,TRANSITION_END:Ki,get:Oa,getStyle:us,create:He,remove:ut,empty:ds,toFront:Qi,toBack:Yi,hasClass:La,addClass:Te,removeClass:Tt,setClass:iu,getClass:hs,setOpacity:Tn,testProp:oi,setTransform:mn,setPosition:gt,getPosition:si,get disableTextSelection(){return ho},get enableTextSelection(){return Qe},disableImageDrag:Ar,enableImageDrag:ru,preventOutline:su,restoreOutline:Fa,getSizedParentNode:zh,getScale:Mr};function Ee(s,l,h,p){if(l&&typeof l=="object")for(var _ in l)cu(s,_,l[_],h);else{l=w(l);for(var b=0,x=l.length;b<x;b++)cu(s,l[b],h,p)}return this}var Zn="_leaflet_events";function et(s,l,h,p){if(arguments.length===1)Rr(s),delete s[Zn];else if(l&&typeof l=="object")for(var _ in l)lu(s,_,l[_],h);else if(l=w(l),arguments.length===2)Rr(s,function(O){return te(l,O)!==-1});else for(var b=0,x=l.length;b<x;b++)lu(s,l[b],h,p);return this}function Rr(s,l){for(var h in s[Zn]){var p=h.split(/\d/)[0];(!l||l(p))&&lu(s,p,null,null,h)}}var au={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cu(s,l,h,p){var _=l+a(h)+(p?"_"+a(p):"");if(s[Zn]&&s[Zn][_])return this;var b=function(O){return h.call(p||s,O||window.event)},x=b;!se.touchNative&&se.pointer&&l.indexOf("touch")===0?b=eu(s,l,b):se.touch&&l==="dblclick"?b=Na(s,b):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(au[l]||l,b,se.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(b=function(O){O=O||window.event,gs(s,O)&&x(O)},s.addEventListener(au[l],b,!1)):s.addEventListener(l,x,!1):s.attachEvent("on"+l,b),s[Zn]=s[Zn]||{},s[Zn][_]=b}function lu(s,l,h,p,_){_=_||l+a(h)+(p?"_"+a(p):"");var b=s[Zn]&&s[Zn][_];if(!b)return this;!se.touchNative&&se.pointer&&l.indexOf("touch")===0?ka(s,l,b):se.touch&&l==="dblclick"?jh(s,b):"removeEventListener"in s?s.removeEventListener(au[l]||l,b,!1):s.detachEvent("on"+l,b),s[Zn][_]=null}function bn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function uu(s){return cu(s,"wheel",bn),this}function ps(s){return Ee(s,"mousedown touchstart dblclick contextmenu",bn),s._leaflet_disable_click=!0,this}function St(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ai(s){return St(s),bn(s),this}function du(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function po(s,l){if(!l)return new Ce(s.clientX,s.clientY);var h=Mr(l),p=h.boundingClientRect;return new Ce((s.clientX-p.left)/h.x-l.clientLeft,(s.clientY-p.top)/h.y-l.clientTop)}var ms=se.linux&&se.chrome?window.devicePixelRatio:se.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function hu(s){return se.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/ms:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function gs(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var wt={__proto__:null,on:Ee,off:et,stopPropagation:bn,disableScrollPropagation:uu,disableClickPropagation:ps,preventDefault:St,stop:ai,getPropagationPath:du,getMousePosition:po,getWheelDelta:hu,isExternalTarget:gs,addListener:Ee,removeListener:et},Uh=Di.extend({run:function(s,l,h,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=si(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=D(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),gt(this._el,h),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ue=Di.extend({options:{crs:oo,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=E(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ze(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ti&&se.any3d&&!se.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ee(this._proxy,Ki,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ze(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=n({animate:h.animate},h.zoom),h.pan=n({animate:h.animate,duration:h.duration},h.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(se.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var p=this.getZoomScale(l),_=this.getSize().divideBy(2),b=s instanceof Ce?s:this.latLngToContainerPoint(s),x=b.subtract(_).multiplyBy(1-1/p),O=this.containerPointToLatLng(_.add(x));return this.setView(O,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Je(s);var h=me(l.paddingTopLeft||l.padding||[0,0]),p=me(l.paddingBottomRight||l.padding||[0,0]),_=this.getBoundsZoom(s,!1,h.add(p));if(_=typeof l.maxZoom=="number"?Math.min(l.maxZoom,_):_,_===1/0)return{center:s.getCenter(),zoom:_};var b=p.subtract(h).divideBy(2),x=this.project(s.getSouthWest(),_),O=this.project(s.getNorthEast(),_),j=this.unproject(x.add(O).divideBy(2).add(b),_);return{center:j,zoom:_}},fitBounds:function(s,l){if(s=Je(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=me(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Uh,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Te(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!se.any3d)return this.setView(s,l,h);this._stop();var p=this.project(this.getCenter()),_=this.project(s),b=this.getSize(),x=this._zoom;s=ze(s),l=l===void 0?x:l;var O=Math.max(b.x,b.y),j=O*this.getZoomScale(x,l),G=_.distanceTo(p)||1,ne=1.42,ge=ne*ne;function Fe(Ut){var af=Ut?-1:1,qk=Ut?j:O,Gk=j*j-O*O+af*ge*ge*G*G,Wk=2*qk*ge*G,Xg=Gk/Wk,ME=Math.sqrt(Xg*Xg+1)-Xg,Zk=ME<1e-9?-18:Math.log(ME);return Zk}function An(Ut){return(Math.exp(Ut)-Math.exp(-Ut))/2}function cn(Ut){return(Math.exp(Ut)+Math.exp(-Ut))/2}function ci(Ut){return An(Ut)/cn(Ut)}var Bn=Fe(0);function Ka(Ut){return O*(cn(Bn)/cn(Bn+ne*Ut))}function zk(Ut){return O*(cn(Bn)*ci(Bn+ne*Ut)-An(Bn))/ge}function Uk(Ut){return 1-Math.pow(1-Ut,1.5)}var $k=Date.now(),SE=(Fe(1)-Bn)/ne,Hk=h.duration?1e3*h.duration:1e3*SE*.8;function AE(){var Ut=(Date.now()-$k)/Hk,af=Uk(Ut)*SE;Ut<=1?(this._flyToFrame=D(AE,this),this._move(this.unproject(p.add(_.subtract(p).multiplyBy(zk(af)/G)),x),this.getScaleZoom(O/Ka(af),x),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),AE.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=Je(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),p=this._limitCenter(h,this._zoom,Je(s));return h.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=me(l.paddingTopLeft||l.padding||[0,0]),p=me(l.paddingBottomRight||l.padding||[0,0]),_=this.project(this.getCenter()),b=this.project(s),x=this.getPixelBounds(),O=fn([x.min.add(h),x.max.subtract(p)]),j=O.getSize();if(!O.contains(b)){this._enforcingBounds=!0;var G=b.subtract(O.getCenter()),ne=O.extend(b).getSize().subtract(j);_.x+=G.x<0?-ne.x:ne.x,_.y+=G.y<0?-ne.y:ne.y,this.panTo(this.unproject(_),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=n({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),p=l.divideBy(2).round(),_=h.divideBy(2).round(),b=p.subtract(_);return!b.x&&!b.y?this:(s.animate&&s.pan?this.panBy(b):(s.pan&&this._rawPanBy(b),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=n({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,p=new Ie(l,h),_=p.toBounds(s.coords.accuracy*2),b=this._locateOptions;if(b.setView){var x=this.getBoundsZoom(_);this.setView(p,b.maxZoom?Math.min(x,b.maxZoom):x)}var O={latlng:p,bounds:_,timestamp:s.timestamp};for(var j in s.coords)typeof s.coords[j]=="number"&&(O[j]=s.coords[j]);this.fire("locationfound",O)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ut(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)ut(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=He("div",h,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new yn(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=Je(s),h=me(h||[0,0]);var p=this.getZoom()||0,_=this.getMinZoom(),b=this.getMaxZoom(),x=s.getNorthWest(),O=s.getSouthEast(),j=this.getSize().subtract(h),G=fn(this.project(O,p),this.project(x,p)).getSize(),ne=se.any3d?this.options.zoomSnap:1,ge=j.x/G.x,Fe=j.y/G.y,An=l?Math.max(ge,Fe):Math.min(ge,Fe);return p=this.getScaleZoom(An,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(_,Math.min(b,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ce(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new rt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var p=h.zoom(s*h.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ze(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(me(s),l)},layerPointToLatLng:function(s){var l=me(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ze(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ze(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Je(s))},distance:function(s,l){return this.options.crs.distance(ze(s),ze(l))},containerPointToLayerPoint:function(s){return me(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return me(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(me(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ze(s)))},mouseEventToContainerPoint:function(s){return po(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=Oa(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ee(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&se.any3d,Te(s,"leaflet-container"+(se.touch?" leaflet-touch":"")+(se.retina?" leaflet-retina":"")+(se.ielt9?" leaflet-oldie":"")+(se.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=us(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),gt(this._mapPane,new Ce(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Te(s.markerPane,"leaflet-zoom-hide"),Te(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){gt(this._mapPane,new Ce(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var _=this._zoom!==l;this._moveStart(_,h)._move(s,l)._moveEnd(_),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,p){l===void 0&&(l=this._zoom);var _=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?h&&h.pinch&&this.fire("zoom",h):((_||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){gt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var l=s?et:Ee;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),se.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=D(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],p,_=l==="mouseout"||l==="mouseover",b=s.target||s.srcElement,x=!1;b;){if(p=this._targets[a(b)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){x=!0;break}if(p&&p.listens(l,!0)&&(_&&!gs(b,s)||(h.push(p),_))||b===this._container)break;b=b.parentNode}return!h.length&&!x&&!_&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&su(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var p=n({},s);p.type="preclick",this._fireDOMEvent(p,p.type,h)}var _=this._findEventTargets(s,l);if(h){for(var b=[],x=0;x<h.length;x++)h[x].listens(l,!0)&&b.push(h[x]);_=b.concat(_)}if(_.length){l==="contextmenu"&&St(s);var O=_[0],j={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var G=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=G?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=G?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(x=0;x<_.length;x++)if(_[x].fire(l,j,!0),j.originalEvent._stopped||_[x].options.bubblingMouseEvents===!1&&te(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return si(this._mapPane)||new Ce(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,h){var p=this._getNewPixelOrigin(h,l);return fn([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var p=this.project(s,l),_=this.getSize().divideBy(2),b=new rt(p.subtract(_),p.add(_)),x=this._getBoundsOffset(b,h,l);return Math.abs(x.x)<=1&&Math.abs(x.y)<=1?s:this.unproject(p.add(x),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),p=new rt(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,h){var p=fn(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),_=p.min.subtract(s.min),b=p.max.subtract(s.max),x=this._rebound(_.x,-b.x),O=this._rebound(_.y,-b.y);return new Ce(x,O)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),p=se.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=He("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=ls,p=this._proxy.style[h];mn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ut(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();mn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),_=this._getCenterOffset(s)._divideBy(1-1/p);return h.animate!==!0&&!this.getSize().contains(_)?!1:(D(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,p){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Te(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function $h(s,l){return new Ue(s,l)}var Vn=N.extend({options:{position:"topright"},initialize:function(s){E(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),p=s._controlCorners[h];return Te(l,"leaflet-control"),h.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ut(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),mo=function(s){return new Vn(s)};Ue.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=He("div",l+"control-container",this._container);function p(_,b){var x=l+_+" "+l+b;s[_+b]=He("div",x,h)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)ut(this._controlCorners[s]);ut(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var _s=Vn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,p){return h<p?-1:p<h?1:0}},initialize:function(s,l,h){E(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return Vn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Te(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Te(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=He("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ps(l),uu(l);var p=this._section=He("section",s+"-list");h&&(this._map.on("click",this.collapse,this),Ee(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var _=this._layersLink=He("a",s+"-toggle",l);_.href="#",_.title="Layers",_.setAttribute("role","button"),Ee(_,{keydown:function(b){b.keyCode===13&&this._expandSafely()},click:function(b){St(b),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=He("div",s+"-base",p),this._separator=He("div",s+"-separator",p),this._overlaysList=He("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(p,_){return this.options.sortFunction(p.layer,_.layer,p.name,_.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ds(this._baseLayersList),ds(this._overlaysList),this._layerControlInputs=[];var s,l,h,p,_=0;for(h=0;h<this._layers.length;h++)p=this._layers[h],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,_+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&_>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(a(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=h,p.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=h):p=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(p),p.layerId=a(s.layer),Ee(p,"click",this._onInputClick,this);var _=document.createElement("span");_.innerHTML=" "+s.name;var b=document.createElement("span");l.appendChild(b),b.appendChild(p),b.appendChild(_);var x=s.overlay?this._overlaysList:this._baseLayersList;return x.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,p=[],_=[];this._handlingClick=!0;for(var b=s.length-1;b>=0;b--)l=s[b],h=this._getLayer(l.layerId).layer,l.checked?p.push(h):l.checked||_.push(h);for(b=0;b<_.length;b++)this._map.hasLayer(_[b])&&this._map.removeLayer(_[b]);for(b=0;b<p.length;b++)this._map.hasLayer(p[b])||this._map.addLayer(p[b]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,p=this._map.getZoom(),_=s.length-1;_>=0;_--)l=s[_],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&p<h.options.minZoom||h.options.maxZoom!==void 0&&p>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ee(s,"click",St),this.expand();var l=this;setTimeout(function(){et(s,"click",St),l._preventClick=!1})}}),Hh=function(s,l,h){return new _s(s,l,h)},Kn=Vn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=He("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,p,_){var b=He("a",h,p);return b.innerHTML=s,b.href="#",b.title=l,b.setAttribute("role","button"),b.setAttribute("aria-label",l),ps(b),Ee(b,"click",ai),Ee(b,"click",_,this),Ee(b,"click",this._refocusOnMap,this),b},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Tt(this._zoomInButton,l),Tt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Te(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Te(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ue.mergeOptions({zoomControl:!0}),Ue.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Kn,this.addControl(this.zoomControl))});var qh=function(s){return new Kn(s)},Gh=Vn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=He("div",l),p=this.options;return this._addScales(p,l+"-line",h),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=He("div",l,h)),s.imperial&&(this._iScale=He("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,p,_;l>5280?(h=l/5280,p=this._getRoundNum(h),this._updateScale(this._iScale,p+" mi",p/h)):(_=this._getRoundNum(l),this._updateScale(this._iScale,_+" ft",_/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),vs=function(s){return new Gh(s)},Wh='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ys=Vn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(se.inlineSvg?Wh+" ":"")+"Leaflet</a>"},initialize:function(s){E(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=He("div","leaflet-control-attribution"),ps(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Ue.mergeOptions({attributionControl:!0}),Ue.addInitHook(function(){this.options.attributionControl&&new ys().addTo(this)});var Va=function(s){return new ys(s)};Vn.Layers=_s,Vn.Zoom=Kn,Vn.Scale=Gh,Vn.Attribution=ys,mo.layers=Hh,mo.zoom=qh,mo.scale=vs,mo.attribution=Va;var Qn=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Qn.addTo=function(s,l){return s.addHandler(l,this),this};var Ba={Events:xt},Zh=se.touch?"touchstart mousedown":"mousedown",Ai=Di.extend({options:{clickTolerance:3},initialize:function(s,l,h,p){E(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(Ee(this._dragStartTarget,Zh,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ai._dragging===this&&this.finishDrag(!0),et(this._dragStartTarget,Zh,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!La(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Ai._dragging===this&&this.finishDrag();return}if(!(Ai._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Ai._dragging=this,this._preventOutline&&su(this._element),Ar(),ho(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=zh(this._element);this._startPoint=new Ce(l.clientX,l.clientY),this._startPos=si(this._element),this._parentScale=Mr(h);var p=s.type==="mousedown";Ee(document,p?"mousemove":"touchmove",this._onMove,this),Ee(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Ce(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,St(s),this._moved||(this.fire("dragstart"),this._moved=!0,Te(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Te(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),gt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Tt(document.body,"leaflet-dragging"),this._lastTarget&&(Tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),et(document,"mousemove touchmove",this._onMove,this),et(document,"mouseup touchend touchcancel",this._onUp,this),ru(),Qe();var l=this._moved&&this._moving;this._moving=!1,Ai._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function go(s,l,h){var p,_=[1,4,2,8],b,x,O,j,G,ne,ge,Fe;for(b=0,ne=s.length;b<ne;b++)s[b]._code=Ji(s[b],l);for(O=0;O<4;O++){for(ge=_[O],p=[],b=0,ne=s.length,x=ne-1;b<ne;x=b++)j=s[b],G=s[x],j._code&ge?G._code&ge||(Fe=bs(G,j,ge,l,h),Fe._code=Ji(Fe,l),p.push(Fe)):(G._code&ge&&(Fe=bs(G,j,ge,l,h),Fe._code=Ji(Fe,l),p.push(Fe)),p.push(j));s=p}return s}function fu(s,l){var h,p,_,b,x,O,j,G,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Sn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ge=ze([0,0]),Fe=Je(s),An=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());An<1700&&(ge=ja(s));var cn=s.length,ci=[];for(h=0;h<cn;h++){var Bn=ze(s[h]);ci.push(l.project(ze([Bn.lat-ge.lat,Bn.lng-ge.lng])))}for(O=j=G=0,h=0,p=cn-1;h<cn;p=h++)_=ci[h],b=ci[p],x=_.y*b.x-b.y*_.x,j+=(_.x+b.x)*x,G+=(_.y+b.y)*x,O+=x*3;O===0?ne=ci[0]:ne=[j/O,G/O];var Ka=l.unproject(me(ne));return ze([Ka.lat+ge.lat,Ka.lng+ge.lng])}function ja(s){for(var l=0,h=0,p=0,_=0;_<s.length;_++){var b=ze(s[_]);l+=b.lat,h+=b.lng,p++}return ze([l/p,h/p])}var pu={__proto__:null,clipPolygon:go,polygonCenter:fu,centroid:ja};function za(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=Pr(s,h),s=Kh(s,h),s}function mu(s,l,h){return Math.sqrt(Kt(s,l,h,!0))}function Ua(s,l,h){return Kt(s,l,h)}function Kh(s,l){var h=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,_=new p(h);_[0]=_[h-1]=1,$a(s,_,l,0,h-1);var b,x=[];for(b=0;b<h;b++)_[b]&&x.push(s[b]);return x}function $a(s,l,h,p,_){var b=0,x,O,j;for(O=p+1;O<=_-1;O++)j=Kt(s[O],s[p],s[_],!0),j>b&&(x=O,b=j);b>h&&(l[x]=1,$a(s,l,h,p,x),$a(s,l,h,x,_))}function Pr(s,l){for(var h=[s[0]],p=1,_=0,b=s.length;p<b;p++)Ha(s[p],s[_])>l&&(h.push(s[p]),_=p);return _<b-1&&h.push(s[b-1]),h}var gu;function _u(s,l,h,p,_){var b=p?gu:Ji(s,h),x=Ji(l,h),O,j,G;for(gu=x;;){if(!(b|x))return[s,l];if(b&x)return!1;O=b||x,j=bs(s,l,O,h,_),G=Ji(j,h),O===b?(s=j,b=G):(l=j,x=G)}}function bs(s,l,h,p,_){var b=l.x-s.x,x=l.y-s.y,O=p.min,j=p.max,G,ne;return h&8?(G=s.x+b*(j.y-s.y)/x,ne=j.y):h&4?(G=s.x+b*(O.y-s.y)/x,ne=O.y):h&2?(G=j.x,ne=s.y+x*(j.x-s.x)/b):h&1&&(G=O.x,ne=s.y+x*(O.x-s.x)/b),new Ce(G,ne,_)}function Ji(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function Ha(s,l){var h=l.x-s.x,p=l.y-s.y;return h*h+p*p}function Kt(s,l,h,p){var _=l.x,b=l.y,x=h.x-_,O=h.y-b,j=x*x+O*O,G;return j>0&&(G=((s.x-_)*x+(s.y-b)*O)/j,G>1?(_=h.x,b=h.y):G>0&&(_+=x*G,b+=O*G)),x=s.x-_,O=s.y-b,p?x*x+O*O:new Ce(_,b)}function Sn(s){return!q(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function vu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Sn(s)}function kr(s,l){var h,p,_,b,x,O,j,G;if(!s||s.length===0)throw new Error("latlngs not passed");Sn(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ze([0,0]),ge=Je(s),Fe=ge.getNorthWest().distanceTo(ge.getSouthWest())*ge.getNorthEast().distanceTo(ge.getNorthWest());Fe<1700&&(ne=ja(s));var An=s.length,cn=[];for(h=0;h<An;h++){var ci=ze(s[h]);cn.push(l.project(ze([ci.lat-ne.lat,ci.lng-ne.lng])))}for(h=0,p=0;h<An-1;h++)p+=cn[h].distanceTo(cn[h+1])/2;if(p===0)G=cn[0];else for(h=0,b=0;h<An-1;h++)if(x=cn[h],O=cn[h+1],_=x.distanceTo(O),b+=_,b>p){j=(b-p)/_,G=[O.x-j*(O.x-x.x),O.y-j*(O.y-x.y)];break}var Bn=l.unproject(me(G));return ze([Bn.lat+ne.lat,Bn.lng+ne.lng])}var d={__proto__:null,simplify:za,pointToSegmentDistance:mu,closestPointOnSegment:Ua,clipSegment:_u,_getEdgeIntersection:bs,_getBitCode:Ji,_sqClosestPointOnSegment:Kt,isFlat:Sn,_flat:vu,polylineCenter:kr},g={project:function(s){return new Ce(s.lng,s.lat)},unproject:function(s){return new Ie(s.y,s.x)},bounds:new rt([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new rt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,p=s.lat*l,_=this.R_MINOR/h,b=Math.sqrt(1-_*_),x=b*Math.sin(p),O=Math.tan(Math.PI/4-p/2)/Math.pow((1-x)/(1+x),b/2);return p=-h*Math.log(Math.max(O,1e-10)),new Ce(s.lng*l*h,p)},unproject:function(s){for(var l=180/Math.PI,h=this.R,p=this.R_MINOR/h,_=Math.sqrt(1-p*p),b=Math.exp(-s.y/h),x=Math.PI/2-2*Math.atan(b),O=0,j=.1,G;O<15&&Math.abs(j)>1e-7;O++)G=_*Math.sin(x),G=Math.pow((1-G)/(1+G),_/2),j=Math.PI/2-2*Math.atan(b*G)-x,x+=j;return new Ie(x*l,s.x*l/h)}},I={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:Ul},P=n({},Gi,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return Wi(s,.5,-s,.5)}()}),z=n({},Gi,{code:"EPSG:4326",projection:g,transformation:Wi(1/180,1,-1/180,.5)}),Q=n({},xn,{projection:g,transformation:Wi(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(h*h+p*p)},infinite:!0});xn.Earth=Gi,xn.EPSG3395=P,xn.EPSG3857=oo,xn.EPSG900913=Hl,xn.EPSG4326=z,xn.Simple=Q;var Oe=Di.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ue.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=a(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?q(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=a(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var p in this._zoomBoundLayers){var _=this._zoomBoundLayers[p].options;s=_.minZoom===void 0?s:Math.min(s,_.minZoom),l=_.maxZoom===void 0?l:Math.max(l,_.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var It=Oe.extend({initialize:function(s,l){E(this,l),this._layers={};var h,p;if(s)for(h=0,p=s.length;h<p;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,p;for(h in this._layers)p=this._layers[h],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),qe=function(s,l){return new It(s,l)},dt=It.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),It.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),It.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new yn;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),an=function(s,l){return new dt(s,l)},Yn=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){E(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var h=this.options,p=h[l+"Size"];typeof p=="number"&&(p=[p,p]);var _=me(p),b=me(l==="shadow"&&h.shadowAnchor||h.iconAnchor||_&&_.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),b&&(s.style.marginLeft=-b.x+"px",s.style.marginTop=-b.y+"px"),_&&(s.style.width=_.x+"px",s.style.height=_.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return se.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function Xn(s){return new Yn(s)}var er=Yn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof er.imagePath!="string"&&(er.imagePath=this._detectIconPath()),(this.options.imagePath||er.imagePath)+Yn.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,p,_){var b=p.exec(h);return b&&b[_]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=He("div","leaflet-default-icon-path",document.body),l=us(s,"background-image")||us(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),qa=Qn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Ai(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Te(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,p=this._marker.options.autoPanSpeed,_=this._marker.options.autoPanPadding,b=si(l._icon),x=h.getPixelBounds(),O=h.getPixelOrigin(),j=fn(x.min._subtract(O).add(_),x.max._subtract(O).subtract(_));if(!j.contains(b)){var G=me((Math.max(j.max.x,b.x)-j.max.x)/(x.max.x-j.max.x)-(Math.min(j.min.x,b.x)-j.min.x)/(x.min.x-j.min.x),(Math.max(j.max.y,b.y)-j.max.y)/(x.max.y-j.max.y)-(Math.min(j.min.y,b.y)-j.min.y)/(x.min.y-j.min.y)).multiplyBy(p);h.panBy(G,{animate:!1}),this._draggable._newPos._add(G),this._draggable._startPos._add(G),gt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=D(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=D(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,p=si(l._icon),_=l._map.layerPointToLatLng(p);h&&gt(h,p),l._latlng=_,s.latlng=_,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Qh=Oe.extend({options:{icon:new er,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){E(this,l),this._latlng=ze(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ze(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),p=!1;h!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Te(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ee(h,"focus",this._panOnFocus,this);var _=s.icon.createShadow(this._shadow),b=!1;_!==this._shadow&&(this._removeShadow(),b=!0),_&&(Te(_,l),_.alt=""),this._shadow=_,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),_&&b&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&et(this._icon,"focus",this._panOnFocus,this),ut(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ut(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&gt(this._icon,s),this._shadow&&gt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Te(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),qa)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new qa(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&Tn(this._icon,s),this._shadow&&Tn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?me(l.iconSize):me(0,0),p=l.iconAnchor?me(l.iconAnchor):me(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:h.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Ek(s,l){return new Qh(s,l)}var _o=Oe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return E(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Yh=_o.extend({options:{fill:!0,radius:10},initialize:function(s,l){E(this,l),this._latlng=ze(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ze(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return _o.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),p=[s+h,l+h];this._pxBounds=new rt(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ck(s,l){return new Yh(s,l)}var Zg=Yh.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=n({},h,{radius:l})),E(this,l),this._latlng=ze(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new yn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:_o.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,p=h.options.crs;if(p.distance===Gi.distance){var _=Math.PI/180,b=this._mRadius/Gi.R/_,x=h.project([l+b,s]),O=h.project([l-b,s]),j=x.add(O).divideBy(2),G=h.unproject(j).lat,ne=Math.acos((Math.cos(b*_)-Math.sin(l*_)*Math.sin(G*_))/(Math.cos(l*_)*Math.cos(G*_)))/_;(isNaN(ne)||ne===0)&&(ne=b/Math.cos(Math.PI/180*l)),this._point=j.subtract(h.getPixelOrigin()),this._radius=isNaN(ne)?0:j.x-h.project([G,s-ne]).x,this._radiusY=j.y-x.y}else{var ge=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(ge).x}this._updateBounds()}});function Dk(s,l,h){return new Zg(s,l,h)}var Nr=_o.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){E(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,p=Kt,_,b,x=0,O=this._parts.length;x<O;x++)for(var j=this._parts[x],G=1,ne=j.length;G<ne;G++){_=j[G-1],b=j[G];var ge=p(s,_,b,!0);ge<l&&(l=ge,h=p(s,_,b))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ze(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new yn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Sn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=Sn(s),p=0,_=s.length;p<_;p++)h?(l[p]=ze(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new rt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Ce(s,s);this._rawPxBounds&&(this._pxBounds=new rt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var p=s[0]instanceof Ie,_=s.length,b,x;if(p){for(x=[],b=0;b<_;b++)x[b]=this._map.latLngToLayerPoint(s[b]),h.extend(x[b]);l.push(x)}else for(b=0;b<_;b++)this._projectLatlngs(s[b],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,p,_,b,x,O,j;for(h=0,_=0,b=this._rings.length;h<b;h++)for(j=this._rings[h],p=0,x=j.length;p<x-1;p++)O=_u(j[p],j[p+1],s,p,!0),O&&(l[_]=l[_]||[],l[_].push(O[0]),(O[1]!==j[p+1]||p===x-2)&&(l[_].push(O[1]),_++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,p=s.length;h<p;h++)s[h]=za(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,p,_,b,x,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,b=this._parts.length;h<b;h++)for(O=this._parts[h],p=0,x=O.length,_=x-1;p<x;_=p++)if(!(!l&&p===0)&&mu(s,O[_],O[p])<=j)return!0;return!1}});function xk(s,l){return new Nr(s,l)}Nr._flat=vu;var Ga=Nr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return fu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Nr.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof Ie&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){Nr.prototype._setLatLngs.call(this,s),Sn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Sn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new Ce(l,l);if(s=new rt(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,_=this._rings.length,b;p<_;p++)b=go(this._rings[p],s,!0),b.length&&this._parts.push(b)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,p,_,b,x,O,j,G;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(b=0,j=this._parts.length;b<j;b++)for(h=this._parts[b],x=0,G=h.length,O=G-1;x<G;O=x++)p=h[x],_=h[O],p.y>s.y!=_.y>s.y&&s.x<(_.x-p.x)*(s.y-p.y)/(_.y-p.y)+p.x&&(l=!l);return l||Nr.prototype._containsPoint.call(this,s,!0)}});function Tk(s,l){return new Ga(s,l)}var Or=dt.extend({initialize:function(s,l){E(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=q(s)?s:s.features,h,p,_;if(l){for(h=0,p=l.length;h<p;h++)_=l[h],(_.geometries||_.geometry||_.features||_.coordinates)&&this.addData(_);return this}var b=this.options;if(b.filter&&!b.filter(s))return this;var x=Xh(s,b);return x?(x.feature=tf(s),x.defaultOptions=x.options,this.resetStyle(x),b.onEachFeature&&b.onEachFeature(s,x),this.addLayer(x)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=n({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Xh(s,l){var h=s.type==="Feature"?s.geometry:s,p=h?h.coordinates:null,_=[],b=l&&l.pointToLayer,x=l&&l.coordsToLatLng||Kg,O,j,G,ne;if(!p&&!h)return null;switch(h.type){case"Point":return O=x(p),uE(b,s,O,l);case"MultiPoint":for(G=0,ne=p.length;G<ne;G++)O=x(p[G]),_.push(uE(b,s,O,l));return new dt(_);case"LineString":case"MultiLineString":return j=Jh(p,h.type==="LineString"?0:1,x),new Nr(j,l);case"Polygon":case"MultiPolygon":return j=Jh(p,h.type==="Polygon"?1:2,x),new Ga(j,l);case"GeometryCollection":for(G=0,ne=h.geometries.length;G<ne;G++){var ge=Xh({geometry:h.geometries[G],type:"Feature",properties:s.properties},l);ge&&_.push(ge)}return new dt(_);case"FeatureCollection":for(G=0,ne=h.features.length;G<ne;G++){var Fe=Xh(h.features[G],l);Fe&&_.push(Fe)}return new dt(_);default:throw new Error("Invalid GeoJSON object.")}}function uE(s,l,h,p){return s?s(l,h):new Qh(h,p&&p.markersInheritOptions&&p)}function Kg(s){return new Ie(s[1],s[0],s[2])}function Jh(s,l,h){for(var p=[],_=0,b=s.length,x;_<b;_++)x=l?Jh(s[_],l-1,h):(h||Kg)(s[_]),p.push(x);return p}function Qg(s,l){return s=ze(s),s.alt!==void 0?[m(s.lng,l),m(s.lat,l),m(s.alt,l)]:[m(s.lng,l),m(s.lat,l)]}function ef(s,l,h,p){for(var _=[],b=0,x=s.length;b<x;b++)_.push(l?ef(s[b],Sn(s[b])?0:l-1,h,p):Qg(s[b],p));return!l&&h&&_.length>0&&_.push(_[0].slice()),_}function Wa(s,l){return s.feature?n({},s.feature,{geometry:l}):tf(l)}function tf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Yg={toGeoJSON:function(s){return Wa(this,{type:"Point",coordinates:Qg(this.getLatLng(),s)})}};Qh.include(Yg),Zg.include(Yg),Yh.include(Yg),Nr.include({toGeoJSON:function(s){var l=!Sn(this._latlngs),h=ef(this._latlngs,l?1:0,!1,s);return Wa(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),Ga.include({toGeoJSON:function(s){var l=!Sn(this._latlngs),h=l&&!Sn(this._latlngs[0]),p=ef(this._latlngs,h?2:l?1:0,!0,s);return l||(p=[p]),Wa(this,{type:(h?"Multi":"")+"Polygon",coordinates:p})}}),It.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),Wa(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",p=[];return this.eachLayer(function(_){if(_.toGeoJSON){var b=_.toGeoJSON(s);if(h)p.push(b.geometry);else{var x=tf(b);x.type==="FeatureCollection"?p.push.apply(p,x.features):p.push(x)}}}),h?Wa(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function dE(s,l){return new Or(s,l)}var Sk=dE,nf=Oe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=Je(l),E(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Te(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ut(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Qi(this._image),this},bringToBack:function(){return this._map&&Yi(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Je(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:He("img");if(Te(l,"leaflet-image-layer"),this._zoomAnimated&&Te(l,"leaflet-zoom-animated"),this.options.className&&Te(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;mn(this._image,h,l)},_reset:function(){var s=this._image,l=new rt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();gt(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){Tn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),Ak=function(s,l,h){return new nf(s,l,h)},hE=nf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:He("video");if(Te(l,"leaflet-image-layer"),this._zoomAnimated&&Te(l,"leaflet-zoom-animated"),this.options.className&&Te(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onloadeddata=r(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),p=[],_=0;_<h.length;_++)p.push(h[_].src);this._url=h.length>0?p:[l.src];return}q(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var b=0;b<this._url.length;b++){var x=He("source");x.src=this._url[b],l.appendChild(x)}}});function Mk(s,l,h){return new hE(s,l,h)}var fE=nf.extend({_initImage:function(){var s=this._image=this._url;Te(s,"leaflet-image-layer"),this._zoomAnimated&&Te(s,"leaflet-zoom-animated"),this.options.className&&Te(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function Rk(s,l,h){return new fE(s,l,h)}var tr=Oe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ie||q(s))?(this._latlng=ze(s),E(this,l)):(E(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&Tn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&Tn(this._container,1),this.bringToFront(),this.options.interactive&&(Te(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(Tn(this._container,0),this._removeTimeout=setTimeout(r(ut,void 0,this._container),200)):ut(this._container),this.options.interactive&&(Tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ze(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Qi(this._container),this},bringToBack:function(){return this._map&&Yi(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof dt){l=null;var h=this._source._layers;for(var p in h)if(h[p]._map){l=h[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=me(this.options.offset),h=this._getAnchor();this._zoomAnimated?gt(this._container,s.add(h)):l=l.add(s).add(h);var p=this._containerBottom=-l.y,_=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=_+"px"}},_getAnchor:function(){return[0,0]}});Ue.include({_initOverlay:function(s,l,h,p){var _=l;return _ instanceof s||(_=new s(p).setContent(l)),h&&_.setLatLng(h),_}}),Oe.include({_initOverlay:function(s,l,h,p){var _=h;return _ instanceof s?(E(_,p),_._source=this):(_=l&&!p?l:new s(p,this),_.setContent(h)),_}});var rf=tr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,tr.prototype.openOn.call(this,s)},onAdd:function(s){tr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof _o||this._source.on("preclick",bn))},onRemove:function(s){tr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof _o||this._source.off("preclick",bn))},getEvents:function(){var s=tr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=He("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=He("div",s+"-content-wrapper",l);if(this._contentNode=He("div",s+"-content",h),ps(l),uu(this._contentNode),Ee(l,"contextmenu",bn),this._tipContainer=He("div",s+"-tip-container",l),this._tip=He("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=He("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',Ee(p,"click",function(_){St(_),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,_=this.options.maxHeight,b="leaflet-popup-scrolled";_&&p>_?(l.height=_+"px",Te(s,b)):Tt(s,b),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();gt(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(us(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,p=this._containerWidth,_=new Ce(this._containerLeft,-h-this._containerBottom);_._add(si(this._container));var b=s.layerPointToContainerPoint(_),x=me(this.options.autoPanPadding),O=me(this.options.autoPanPaddingTopLeft||x),j=me(this.options.autoPanPaddingBottomRight||x),G=s.getSize(),ne=0,ge=0;b.x+p+j.x>G.x&&(ne=b.x+p-G.x+j.x),b.x-ne-O.x<0&&(ne=b.x-O.x),b.y+h+j.y>G.y&&(ge=b.y+h-G.y+j.y),b.y-ge-O.y<0&&(ge=b.y-O.y),(ne||ge)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,ge]))}},_getAnchor:function(){return me(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pk=function(s,l){return new rf(s,l)};Ue.mergeOptions({closePopupOnClick:!0}),Ue.include({openPopup:function(s,l,h){return this._initOverlay(rf,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Oe.include({bindPopup:function(s,l){return this._popup=this._initOverlay(rf,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof dt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ai(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof _o)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var of=tr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){tr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){tr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=tr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=He("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,p=this._map,_=this._container,b=p.latLngToContainerPoint(p.getCenter()),x=p.layerPointToContainerPoint(s),O=this.options.direction,j=_.offsetWidth,G=_.offsetHeight,ne=me(this.options.offset),ge=this._getAnchor();O==="top"?(l=j/2,h=G):O==="bottom"?(l=j/2,h=0):O==="center"?(l=j/2,h=G/2):O==="right"?(l=0,h=G/2):O==="left"?(l=j,h=G/2):x.x<b.x?(O="right",l=0,h=G/2):(O="left",l=j+(ne.x+ge.x)*2,h=G/2),s=s.subtract(me(l,h,!0)).add(ne).add(ge),Tt(_,"leaflet-tooltip-right"),Tt(_,"leaflet-tooltip-left"),Tt(_,"leaflet-tooltip-top"),Tt(_,"leaflet-tooltip-bottom"),Te(_,"leaflet-tooltip-"+O),gt(_,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&Tn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return me(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),kk=function(s,l){return new of(s,l)};Ue.include({openTooltip:function(s,l,h){return this._initOverlay(of,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Oe.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(of,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof dt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ee(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ee(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,p;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var pE=Yn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(ds(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var p=me(h.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function Nk(s){return new pE(s)}Yn.Default=er;var yu=Oe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:se.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){E(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),ut(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Qi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Ce?s:new Ce(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),p=0,_=l.length,b;p<_;p++)b=l[p].style.zIndex,l[p]!==this._container&&b&&(h=s(h,+b));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!se.ielt9){Tn(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var p in this._tiles){var _=this._tiles[p];if(!(!_.current||!_.loaded)){var b=Math.min(1,(s-_.loaded)/200);Tn(_.el,b),b<1?l=!0:(_.active?h=!0:this._onOpaqueTile(_),_.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(A(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=He("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(ut(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var p=this._levels[s],_=this._map;return p||(p=this._levels[s]={},p.el=He("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=_.project(_.unproject(_.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,_.getCenter(),_.getZoom()),f(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)ut(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,p){var _=Math.floor(s/2),b=Math.floor(l/2),x=h-1,O=new Ce(+_,+b);O.z=+x;var j=this._tileCoordsToKey(O),G=this._tiles[j];return G&&G.active?(G.retain=!0,!0):(G&&G.loaded&&(G.retain=!0),x>p?this._retainParent(_,b,x,p):!1)},_retainChildren:function(s,l,h,p){for(var _=2*s;_<2*s+2;_++)for(var b=2*l;b<2*l+2;b++){var x=new Ce(_,b);x.z=h+1;var O=this._tileCoordsToKey(x),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);h+1<p&&this._retainChildren(_,b,h+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,p){var _=Math.round(l);this.options.maxZoom!==void 0&&_>this.options.maxZoom||this.options.minZoom!==void 0&&_<this.options.minZoom?_=void 0:_=this._clampZoom(_);var b=this.options.updateWhenZooming&&_!==this._tileZoom;(!p||b)&&(this._tileZoom=_,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),_!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var p=this._map.getZoomScale(h,s.zoom),_=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,h)).round();se.any3d?mn(s.el,_,p):gt(s.el,_)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),p=this._tileZoom,_=this._map.getPixelWorldBounds(this._tileZoom);_&&(this._globalTileRange=this._pxBoundsToTileRange(_)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(h,this._tileZoom),_=l.project(s,this._tileZoom).floor(),b=l.getSize().divideBy(p*2);return new rt(_.subtract(b),_.add(b))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),_=this._pxBoundsToTileRange(p),b=_.getCenter(),x=[],O=this.options.keepBuffer,j=new rt(_.getBottomLeft().subtract([O,-O]),_.getTopRight().add([O,-O]));if(!(isFinite(_.min.x)&&isFinite(_.min.y)&&isFinite(_.max.x)&&isFinite(_.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var G in this._tiles){var ne=this._tiles[G].coords;(ne.z!==this._tileZoom||!j.contains(new Ce(ne.x,ne.y)))&&(this._tiles[G].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var ge=_.min.y;ge<=_.max.y;ge++)for(var Fe=_.min.x;Fe<=_.max.x;Fe++){var An=new Ce(Fe,ge);if(An.z=this._tileZoom,!!this._isValidTile(An)){var cn=this._tiles[this._tileCoordsToKey(An)];cn?cn.current=!0:x.push(An)}}if(x.sort(function(Bn,Ka){return Bn.distanceTo(b)-Ka.distanceTo(b)}),x.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var ci=document.createDocumentFragment();for(Fe=0;Fe<x.length;Fe++)this._addTile(x[Fe],ci);this._level.el.appendChild(ci)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Je(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),p=s.scaleBy(h),_=p.add(h),b=l.unproject(p,s.z),x=l.unproject(_,s.z);return[b,x]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new yn(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new Ce(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(ut(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Te(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=f,s.onmousemove=f,se.ielt9&&this.options.opacity<1&&Tn(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),p=this._tileCoordsToKey(s),_=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(_),this.createTile.length<2&&D(r(this._tileReady,this,s,null,_)),gt(_,h),this._tiles[p]={el:_,coords:s,current:!0},l.appendChild(_),this.fire("tileloadstart",{tile:_,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var p=this._tileCoordsToKey(s);h=this._tiles[p],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Tn(h.el,0),A(this._fadeFrame),this._fadeFrame=D(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Te(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),se.ielt9||!this._map._fadeAnimated?D(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Ce(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new rt(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function Ok(s){return new yu(s)}var Za=yu.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=E(this,l),l.detectRetina&&se.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return Ee(h,"load",r(this._tileOnLoad,this,l,h)),Ee(h,"error",r(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:se.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return F(this._url,n(l,this.options))},_tileOnLoad:function(s,l){se.ielt9?setTimeout(r(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,p=this.options.zoomOffset;return h&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=f,l.onerror=f,!l.complete)){l.src=Z;var h=this._tiles[s].coords;ut(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",Z),yu.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===Z))return yu.prototype._tileReady.call(this,s,l,h)}});function mE(s,l){return new Za(s,l)}var gE=Za.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=n({},this.defaultWmsParams);for(var p in l)p in this.options||(h[p]=l[p]);l=E(this,l);var _=l.detectRetina&&se.retina?2:1,b=this.getTileSize();h.width=b.x*_,h.height=b.y*_,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Za.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,p=fn(h.project(l[0]),h.project(l[1])),_=p.min,b=p.max,x=(this._wmsVersion>=1.3&&this._crs===z?[_.y,_.x,b.y,b.x]:[_.x,_.y,b.x,b.y]).join(","),O=Za.prototype.getTileUrl.call(this,s);return O+M(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+x},setParams:function(s,l){return n(this.wmsParams,s),l||this.redraw(),this}});function Lk(s,l){return new gE(s,l)}Za.WMS=gE,mE.wms=Lk;var Lr=Oe.extend({options:{padding:.1},initialize:function(s){E(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Te(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),_=this._map.project(this._center,l),b=p.multiplyBy(-h).add(_).subtract(this._map._getNewPixelOrigin(s,l));se.any3d?mn(this._container,b,h):gt(this._container,b)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new rt(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_E=Lr.extend({options:{tolerance:0},getEvents:function(){var s=Lr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Lr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ee(s,"mousemove",this._onMouseMove,this),Ee(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ee(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,ut(this._container),et(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),p=se.retina?2:1;gt(l,s.min),l.width=p*h.x,l.height=p*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",se.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Lr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,p=l.prev;h?h.prev=p:this._drawLast=p,p?p.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],p,_;for(_=0;_<l.length;_++){if(p=Number(l[_]),isNaN(p))return;h.push(p)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||D(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new rt,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,p,_,b,x=s._parts,O=x.length,j=this._ctx;if(O){for(j.beginPath(),h=0;h<O;h++){for(p=0,_=x[h].length;p<_;p++)b=x[h][p],j[p?"lineTo":"moveTo"](b.x,b.y);l&&j.closePath()}this._fillStroke(j,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,p=Math.max(Math.round(s._radius),1),_=(Math.max(Math.round(s._radiusY),1)||p)/p;_!==1&&(h.save(),h.scale(1,_)),h.beginPath(),h.arc(l.x,l.y/_,p,0,Math.PI*2,!1),_!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(p=h);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Tt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,p,_=this._drawFirst;_;_=_.next)h=_.layer,h.options.interactive&&h._containsPoint(l)&&(p=h);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(Te(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(h)h.prev=p;else return;p?p.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,p=l.prev;if(p)p.next=h;else return;h?h.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function vE(s){return se.canvas?new _E(s):null}var bu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Fk={_initContainer:function(){this._container=He("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Lr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=bu("shape");Te(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=bu("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;ut(l),s.removeInteractiveTarget(l),delete this._layers[a(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,p=s.options,_=s._container;_.stroked=!!p.stroke,_.filled=!!p.fill,p.stroke?(l||(l=s._stroke=bu("stroke")),_.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=q(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(_.removeChild(l),s._stroke=null),p.fill?(h||(h=s._fill=bu("fill")),_.appendChild(h),h.color=p.fillColor||p.color,h.opacity=p.fillOpacity):h&&(_.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),p=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Qi(s._container)},_bringToBack:function(s){Yi(s._container)}},sf=se.vml?bu:xa,wu=Lr.extend({_initContainer:function(){this._container=sf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=sf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ut(this._container),et(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Lr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),gt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=sf("path");s.options.className&&Te(l,s.options.className),s.options.interactive&&Te(l,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){ut(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Ta(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||h,_="a"+h+","+p+" 0 1,0 ",b=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+_+h*2+",0 "+_+-h*2+",0 ";this._setPath(s,b)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Qi(s._path)},_bringToBack:function(s){Yi(s._path)}});se.vml&&wu.include(Fk);function yE(s){return se.svg||se.vml?new wu(s):null}Ue.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&vE(s)||yE(s)}});var bE=Ga.extend({initialize:function(s,l){Ga.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Je(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function Vk(s,l){return new bE(s,l)}wu.create=sf,wu.pointsToPath=Ta,Or.geometryToLayer=Xh,Or.coordsToLatLng=Kg,Or.coordsToLatLngs=Jh,Or.latLngToCoords=Qg,Or.latLngsToCoords=ef,Or.getFeature=Wa,Or.asFeature=tf,Ue.mergeOptions({boxZoom:!0});var wE=Qn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ee(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){et(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ut(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ho(),Ar(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ee(document,{contextmenu:ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=He("div","leaflet-zoom-box",this._container),Te(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new rt(this._point,this._startPoint),h=l.getSize();gt(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(ut(this._box),Tt(this._container,"leaflet-crosshair")),Qe(),ru(),et(document,{contextmenu:ai,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new yn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ue.addInitHook("addHandler","boxZoom",wE),Ue.mergeOptions({doubleClickZoom:!0});var IE=Qn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),p=l.options.zoomDelta,_=s.originalEvent.shiftKey?h-p:h+p;l.options.doubleClickZoom==="center"?l.setZoom(_):l.setZoomAround(s.containerPoint,_)}});Ue.addInitHook("addHandler","doubleClickZoom",IE),Ue.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var EE=Qn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Ai(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Te(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tt(this._map._container,"leaflet-grab"),Tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Je(this._map.options.maxBounds);this._offsetLimit=fn(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,p=this._draggable._newPos.x,_=(p-l+h)%s+l-h,b=(p+l+h)%s-l-h,x=Math.abs(_+h)<Math.abs(b+h)?_:b;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=x},_onDragEnd:function(s){var l=this._map,h=l.options,p=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var _=this._lastPos.subtract(this._positions[0]),b=(this._lastTime-this._times[0])/1e3,x=h.easeLinearity,O=_.multiplyBy(x/b),j=O.distanceTo([0,0]),G=Math.min(h.inertiaMaxSpeed,j),ne=O.multiplyBy(G/j),ge=G/(h.inertiaDeceleration*x),Fe=ne.multiplyBy(-ge/2).round();!Fe.x&&!Fe.y?l.fire("moveend"):(Fe=l._limitOffset(Fe,l.options.maxBounds),D(function(){l.panBy(Fe,{duration:ge,easeLinearity:x,noMoveStart:!0,animate:!0})}))}}});Ue.addInitHook("addHandler","dragging",EE),Ue.mergeOptions({keyboard:!0,keyboardPanDelta:80});var CE=Qn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ee(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),et(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,p,_;for(p=0,_=h.left.length;p<_;p++)l[h.left[p]]=[-1*s,0];for(p=0,_=h.right.length;p<_;p++)l[h.right[p]]=[s,0];for(p=0,_=h.down.length;p<_;p++)l[h.down[p]]=[0,s];for(p=0,_=h.up.length;p<_;p++)l[h.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,p,_;for(p=0,_=h.zoomIn.length;p<_;p++)l[h.zoomIn[p]]=s;for(p=0,_=h.zoomOut.length;p<_;p++)l[h.zoomOut[p]]=-s},_addHooks:function(){Ee(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){et(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,p;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=me(p).multiplyBy(3)),h.options.maxBounds&&(p=h._limitOffset(me(p),h.options.maxBounds)),h.options.worldCopyJump){var _=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(p)));h.panTo(_)}else h.panBy(p)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;ai(s)}}});Ue.addInitHook("addHandler","keyboard",CE),Ue.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var DE=Qn.extend({addHooks:function(){Ee(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){et(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=hu(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),p),ai(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),_=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,b=h?Math.ceil(_/h)*h:_,x=s._limitZoom(l+(this._delta>0?b:-b))-l;this._delta=0,this._startTime=null,x&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+x):s.setZoomAround(this._lastMousePos,l+x))}});Ue.addInitHook("addHandler","scrollWheelZoom",DE);var Bk=600;Ue.mergeOptions({tapHold:se.touchNative&&se.safari&&se.mobile,tapTolerance:15});var xE=Qn.extend({addHooks:function(){Ee(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){et(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Ce(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Ee(document,"touchend",St),Ee(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),Bk),Ee(document,"touchend touchcancel contextmenu",this._cancel,this),Ee(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){et(document,"touchend",St),et(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),et(document,"touchend touchcancel contextmenu",this._cancel,this),et(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Ce(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});Ue.addInitHook("addHandler","tapHold",xE),Ue.mergeOptions({touchZoom:se.touch,bounceAtZoomLimits:!0});var TE=Qn.extend({addHooks:function(){Te(this._map._container,"leaflet-touch-zoom"),Ee(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tt(this._map._container,"leaflet-touch-zoom"),et(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(p)._divideBy(2))),this._startDist=h.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ee(document,"touchmove",this._onTouchMove,this),Ee(document,"touchend touchcancel",this._onTouchEnd,this),St(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),_=h.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(_,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&_<1||this._zoom>l.getMaxZoom()&&_>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,_===1)return}else{var b=h._add(p)._divideBy(2)._subtract(this._centerPoint);if(_===1&&b.x===0&&b.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(b),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var x=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=D(x,this,!0),St(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),et(document,"touchmove",this._onTouchMove,this),et(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ue.addInitHook("addHandler","touchZoom",TE),Ue.BoxZoom=wE,Ue.DoubleClickZoom=IE,Ue.Drag=EE,Ue.Keyboard=CE,Ue.ScrollWheelZoom=DE,Ue.TapHold=xE,Ue.TouchZoom=TE,t.Bounds=rt,t.Browser=se,t.CRS=xn,t.Canvas=_E,t.Circle=Zg,t.CircleMarker=Yh,t.Class=N,t.Control=Vn,t.DivIcon=pE,t.DivOverlay=tr,t.DomEvent=wt,t.DomUtil=Xi,t.Draggable=Ai,t.Evented=Di,t.FeatureGroup=dt,t.GeoJSON=Or,t.GridLayer=yu,t.Handler=Qn,t.Icon=Yn,t.ImageOverlay=nf,t.LatLng=Ie,t.LatLngBounds=yn,t.Layer=Oe,t.LayerGroup=It,t.LineUtil=d,t.Map=Ue,t.Marker=Qh,t.Mixin=Ba,t.Path=_o,t.Point=Ce,t.PolyUtil=pu,t.Polygon=Ga,t.Polyline=Nr,t.Popup=rf,t.PosAnimation=Uh,t.Projection=I,t.Rectangle=bE,t.Renderer=Lr,t.SVG=wu,t.SVGOverlay=fE,t.TileLayer=Za,t.Tooltip=of,t.Transformation=$l,t.Util=R,t.VideoOverlay=hE,t.bind=r,t.bounds=fn,t.canvas=vE,t.circle=Dk,t.circleMarker=Ck,t.control=mo,t.divIcon=Nk,t.extend=n,t.featureGroup=an,t.geoJSON=dE,t.geoJson=Sk,t.gridLayer=Ok,t.icon=Xn,t.imageOverlay=Ak,t.latLng=ze,t.latLngBounds=Je,t.layerGroup=qe,t.map=$h,t.marker=Ek,t.point=me,t.polygon=Tk,t.polyline=xk,t.popup=Pk,t.rectangle=Vk,t.setOptions=E,t.stamp=a,t.svg=yE,t.svgOverlay=Rk,t.tileLayer=mE,t.tooltip=kk,t.transformation=Wi,t.version=e,t.videoOverlay=Mk;var jk=window.L;t.noConflict=function(){return window.L=jk,this},window.L=t})});var jE=null;var r_=1,zE=Symbol("SIGNAL");function Be(t){let e=jE;return jE=t,e}var UE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Yk(t){if(!(a_(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===r_)){if(!t.producerMustRecompute(t)&&!o_(t)){t.dirty=!1,t.lastCleanEpoch=r_;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=r_}}function $E(t){return t&&(t.nextProducerIndex=0),Be(t)}function HE(t,e){if(Be(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(a_(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)s_(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function o_(t){df(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(Yk(n),i!==n.version))return!0}return!1}function qE(t){if(df(t),a_(t))for(let e=0;e<t.producerNode.length;e++)s_(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function s_(t,e){if(Xk(t),df(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)s_(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];df(r),r.producerIndexOfThis[i]=e}}function a_(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function df(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Xk(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function Jk(){throw new Error}var eN=Jk;function GE(t){eN=t}function he(t){return typeof t=="function"}function Qa(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var hf=Qa(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Is(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ft=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(he(i))try{i()}catch(o){e=o instanceof hf?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{WE(o)}catch(a){e=e??[],a instanceof hf?e=[...e,...a.errors]:e.push(a)}}if(e)throw new hf(e)}}add(e){var n;if(e&&e!==this)if(this.closed)WE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Is(n,e)}remove(e){let{_finalizers:n}=this;n&&Is(n,e),e instanceof t&&e._removeParent(this)}};ft.EMPTY=(()=>{let t=new ft;return t.closed=!0,t})();var c_=ft.EMPTY;function ff(t){return t instanceof ft||t&&"closed"in t&&he(t.remove)&&he(t.add)&&he(t.unsubscribe)}function WE(t){he(t)?t():t.unsubscribe()}var Mi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ya={setTimeout(t,e,...n){let{delegate:i}=Ya;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ya;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function pf(t){Ya.setTimeout(()=>{let{onUnhandledError:e}=Mi;if(e)e(t);else throw t})}function Cu(){}var ZE=l_("C",void 0,void 0);function KE(t){return l_("E",void 0,t)}function QE(t){return l_("N",t,void 0)}function l_(t,e,n){return{kind:t,value:e,error:n}}var Es=null;function Xa(t){if(Mi.useDeprecatedSynchronousErrorHandling){let e=!Es;if(e&&(Es={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Es;if(Es=null,n)throw i}}else t()}function YE(t){Mi.useDeprecatedSynchronousErrorHandling&&Es&&(Es.errorThrown=!0,Es.error=t)}var Cs=class extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ff(e)&&e.add(this)):this.destination=iN}static create(e,n,i){return new Fr(e,n,i)}next(e){this.isStopped?d_(QE(e),this):this._next(e)}error(e){this.isStopped?d_(KE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?d_(ZE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},tN=Function.prototype.bind;function u_(t,e){return tN.call(t,e)}var h_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){mf(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){mf(i)}else mf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){mf(n)}}},Fr=class extends Cs{constructor(e,n,i){super();let r;if(he(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Mi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&u_(e.next,o),error:e.error&&u_(e.error,o),complete:e.complete&&u_(e.complete,o)}):r=e}this.destination=new h_(r)}};function mf(t){Mi.useDeprecatedSynchronousErrorHandling?YE(t):pf(t)}function nN(t){throw t}function d_(t,e){let{onStoppedNotification:n}=Mi;n&&Ya.setTimeout(()=>n(t,e))}var iN={closed:!0,next:Cu,error:nN,complete:Cu};var Ja=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Mn(t){return t}function f_(...t){return p_(t)}function p_(t){return t.length===0?Mn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Se=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=oN(n)?n:new Fr(n,i,r);return Xa(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=XE(i),new i((r,o)=>{let a=new Fr({next:c=>{try{n(c)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Ja](){return this}pipe(...n){return p_(n)(this)}toPromise(n){return n=XE(n),new n((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return t.create=e=>new t(e),t})();function XE(t){var e;return(e=t??Mi.Promise)!==null&&e!==void 0?e:Promise}function rN(t){return t&&he(t.next)&&he(t.error)&&he(t.complete)}function oN(t){return t&&t instanceof Cs||rN(t)&&ff(t)}function m_(t){return he(t?.lift)}function De(t){return e=>{if(m_(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ae(t,e,n,i,r){return new g_(t,e,n,i,r)}var g_=class extends Cs{constructor(e,n,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ec(){return De((t,e)=>{let n=null;t._refCount++;let i=Ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var tc=class extends Se{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,m_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;let n=this.getSubject();e.add(this.source.subscribe(Ae(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return ec()(this)}};var JE=Qa(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var xe=(()=>{class t extends Se{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new gf(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new JE}next(n){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?c_:(this.currentObservers=null,o.push(n),new ft(()=>{this.currentObservers=null,Is(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Se;return n.source=this,n}}return t.create=(e,n)=>new gf(e,n),t})(),gf=class extends xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:c_}};var Qt=class extends xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Du={now(){return(Du.delegate||Date).now()},delegate:void 0};var _f=class extends xe{constructor(e=1/0,n=1/0,i=Du){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:a}=this;n||(i.push(e),!r&&i.push(o.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let a=0;a<o.length&&!e.closed;a+=i?1:2)e.next(o[a]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let a=n.now(),c=0;for(let u=1;u<i.length&&i[u]<=a;u+=2)c=u;c&&i.splice(0,c+1)}}};var vf=class extends ft{constructor(e,n){super()}schedule(e,n=0){return this}};var xu={setInterval(t,e,...n){let{delegate:i}=xu;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var nc=class extends vf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return xu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&xu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Is(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ic=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};ic.now=Du.now;var rc=class extends ic{constructor(e,n=ic.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var ir=new rc(nc),__=ir;var yf=class extends nc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var bf=class extends rc{};var v_=new bf(yf);var Rn=new Se(t=>t.complete());function wf(t){return t&&he(t.schedule)}function y_(t){return t[t.length-1]}function eC(t){return he(y_(t))?t.pop():void 0}function rr(t){return wf(y_(t))?t.pop():void 0}function tC(t,e){return typeof y_(t)=="number"?t.pop():e}var oc=t=>t&&typeof t.length=="number"&&typeof t!="function";function If(t){return he(t?.then)}function Ef(t){return he(t[Ja])}function Cf(t){return Symbol.asyncIterator&&he(t?.[Symbol.asyncIterator])}function Df(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function sN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var xf=sN();function Tf(t){return he(t?.[xf])}function Sf(t){return PE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield cf(n.read());if(r)return yield cf(void 0);yield yield cf(i)}}finally{n.releaseLock()}})}function Af(t){return he(t?.getReader)}function ot(t){if(t instanceof Se)return t;if(t!=null){if(Ef(t))return aN(t);if(oc(t))return cN(t);if(If(t))return lN(t);if(Cf(t))return nC(t);if(Tf(t))return uN(t);if(Af(t))return dN(t)}throw Df(t)}function aN(t){return new Se(e=>{let n=t[Ja]();if(he(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cN(t){return new Se(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function lN(t){return new Se(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,pf)})}function uN(t){return new Se(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function nC(t){return new Se(e=>{hN(t,e).catch(n=>e.error(n))})}function dN(t){return nC(Sf(t))}function hN(t,e){var n,i,r,o;return RE(this,void 0,void 0,function*(){try{for(n=kE(t);i=yield n.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function jn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function li(t,e=0){return De((n,i)=>{n.subscribe(Ae(i,r=>jn(i,t,()=>i.next(r),e),()=>jn(i,t,()=>i.complete(),e),r=>jn(i,t,()=>i.error(r),e)))})}function Ri(t,e=0){return De((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function iC(t,e){return ot(t).pipe(Ri(e),li(e))}function rC(t,e){return ot(t).pipe(Ri(e),li(e))}function oC(t,e){return new Se(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function sC(t,e){return new Se(n=>{let i;return jn(n,e,()=>{i=t[xf](),jn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){n.error(a);return}o?n.complete():n.next(r)},0,!0)}),()=>he(i?.return)&&i.return()})}function Mf(t,e){if(!t)throw new Error("Iterable cannot be null");return new Se(n=>{jn(n,e,()=>{let i=t[Symbol.asyncIterator]();jn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function aC(t,e){return Mf(Sf(t),e)}function cC(t,e){if(t!=null){if(Ef(t))return iC(t,e);if(oc(t))return oC(t,e);if(If(t))return rC(t,e);if(Cf(t))return Mf(t,e);if(Tf(t))return sC(t,e);if(Af(t))return aC(t,e)}throw Df(t)}function tt(t,e){return e?cC(t,e):ot(t)}function le(...t){let e=rr(t);return tt(t,e)}function sc(t,e){let n=he(t)?t:()=>t,i=r=>r.error(n());return new Se(e?r=>e.schedule(i,0,r):i)}function Rf(t){return!!t&&(t instanceof Se||he(t.lift)&&he(t.subscribe))}var Vr=Qa(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function lC(t){return t instanceof Date&&!isNaN(t)}function fe(t,e){return De((n,i)=>{let r=0;n.subscribe(Ae(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:fN}=Array;function pN(t,e){return fN(e)?t(...e):t(e)}function Pf(t){return fe(e=>pN(t,e))}var{isArray:mN}=Array,{getPrototypeOf:gN,prototype:_N,keys:vN}=Object;function uC(t){if(t.length===1){let e=t[0];if(mN(e))return{args:e,keys:null};if(yN(e)){let n=vN(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function yN(t){return t&&typeof t=="object"&&gN(t)===_N}function dC(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function ac(...t){let e=rr(t),n=eC(t),{args:i,keys:r}=uC(t);if(i.length===0)return tt([],e);let o=new Se(bN(i,e,r?a=>dC(r,a):Mn));return n?o.pipe(Pf(n)):o}function bN(t,e,n=Mn){return i=>{hC(e,()=>{let{length:r}=t,o=new Array(r),a=r,c=r;for(let u=0;u<r;u++)hC(e,()=>{let f=tt(t[u],e),m=!1;f.subscribe(Ae(i,v=>{o[u]=v,m||(m=!0,c--),c||i.next(n(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function hC(t,e,n){t?jn(n,t,e):e()}function fC(t,e,n,i,r,o,a,c){let u=[],f=0,m=0,v=!1,w=()=>{v&&!u.length&&!f&&e.complete()},E=k=>f<i?M(k):u.push(k),M=k=>{o&&e.next(k),f++;let F=!1;ot(n(k,m++)).subscribe(Ae(e,q=>{r?.(q),o?E(q):e.next(q)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;u.length&&f<i;){let q=u.shift();a?jn(e,a,()=>M(q)):M(q)}w()}catch(q){e.error(q)}}))};return t.subscribe(Ae(e,E,()=>{v=!0,w()})),()=>{c?.()}}function Ot(t,e,n=1/0){return he(e)?Ot((i,r)=>fe((o,a)=>e(i,o,r,a))(ot(t(i,r))),n):(typeof e=="number"&&(n=e),De((i,r)=>fC(i,r,t,n)))}function Tu(t=1/0){return Ot(Mn,t)}function pC(){return Tu(1)}function yo(...t){return pC()(tt(t,rr(t)))}function kf(t){return new Se(e=>{ot(t()).subscribe(e)})}var wN=["addListener","removeListener"],IN=["addEventListener","removeEventListener"],EN=["on","off"];function Su(t,e,n,i){if(he(n)&&(i=n,n=void 0),i)return Su(t,e,n).pipe(Pf(i));let[r,o]=xN(t)?IN.map(a=>c=>t[a](e,c,n)):CN(t)?wN.map(mC(t,e)):DN(t)?EN.map(mC(t,e)):[];if(!r&&oc(t))return Ot(a=>Su(a,e,n))(ot(t));if(!r)throw new TypeError("Invalid event target");return new Se(a=>{let c=(...u)=>a.next(1<u.length?u:u[0]);return r(c),()=>o(c)})}function mC(t,e){return n=>i=>t[n](e,i)}function CN(t){return he(t.addListener)&&he(t.removeListener)}function DN(t){return he(t.on)&&he(t.off)}function xN(t){return he(t.addEventListener)&&he(t.removeEventListener)}function gC(t=0,e,n=__){let i=-1;return e!=null&&(wf(e)?n=e:i=e),new Se(r=>{let o=lC(t)?+t-n.now():t;o<0&&(o=0);let a=0;return n.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Au(...t){let e=rr(t),n=tC(t,1/0),i=t;return i.length?i.length===1?ot(i[0]):Tu(n)(tt(i,e)):Rn}function Mt(t,e){return De((n,i)=>{let r=0;n.subscribe(Ae(i,o=>t.call(e,o,r++)&&i.next(o)))})}function _C(t){return De((e,n)=>{let i=!1,r=null,o=null,a=!1,c=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let f=r;r=null,n.next(f)}a&&n.complete()},u=()=>{o=null,a&&n.complete()};e.subscribe(Ae(n,f=>{i=!0,r=f,o||ot(t(f)).subscribe(o=Ae(n,c,u))},()=>{a=!0,(!i||!o||o.closed)&&n.complete()}))})}function Nf(t,e=ir){return _C(()=>gC(t,e))}function bo(t){return De((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Ae(n,void 0,void 0,a=>{o=ot(t(a,bo(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function vC(t,e,n,i,r){return(o,a)=>{let c=n,u=e,f=0;o.subscribe(Ae(a,m=>{let v=f++;u=c?t(u,m,v):(c=!0,m),i&&a.next(u)},r&&(()=>{c&&a.next(u),a.complete()})))}}function cc(t,e){return he(e)?Ot(t,e,1):Ot(t,1)}function Of(t,e=ir){return De((n,i)=>{let r=null,o=null,a=null,c=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=a+t,m=e.now();if(m<f){r=this.schedule(void 0,f-m),i.add(r);return}c()}n.subscribe(Ae(i,f=>{o=f,a=e.now(),r||(r=e.schedule(u,t),i.add(r))},()=>{c(),i.complete()},void 0,()=>{o=r=null}))})}function wo(t){return De((e,n)=>{let i=!1;e.subscribe(Ae(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function ui(t){return t<=0?()=>Rn:De((e,n)=>{let i=0;e.subscribe(Ae(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function b_(t){return fe(()=>t)}function lc(t,e=Mn){return t=t??TN,De((n,i)=>{let r,o=!0;n.subscribe(Ae(i,a=>{let c=e(a);(o||!t(r,c))&&(o=!1,r=c,i.next(a))}))})}function TN(t,e){return t===e}function Lf(t=SN){return De((e,n)=>{let i=!1;e.subscribe(Ae(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function SN(){return new Vr}function Mu(t){return De((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function di(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Mt((r,o)=>t(r,o,i)):Mn,ui(1),n?wo(e):Lf(()=>new Vr))}function uc(t){return t<=0?()=>Rn:De((e,n)=>{let i=[];e.subscribe(Ae(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function w_(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Mt((r,o)=>t(r,o,i)):Mn,uc(1),n?wo(e):Lf(()=>new Vr))}function dc(){return De((t,e)=>{let n,i=!1;t.subscribe(Ae(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function Ds(t,e){return De(vC(t,e,arguments.length>=2,!0))}function yC(t={}){let{connector:e=()=>new xe,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let a,c,u,f=0,m=!1,v=!1,w=()=>{c?.unsubscribe(),c=void 0},E=()=>{w(),a=u=void 0,m=v=!1},M=()=>{let k=a;E(),k?.unsubscribe()};return De((k,F)=>{f++,!v&&!m&&w();let q=u=u??e();F.add(()=>{f--,f===0&&!v&&!m&&(c=I_(M,r))}),q.subscribe(F),!a&&f>0&&(a=new Fr({next:te=>q.next(te),error:te=>{v=!0,w(),c=I_(E,n,te),q.error(te)},complete:()=>{m=!0,w(),c=I_(E,i),q.complete()}}),ot(k).subscribe(a))})(o)}}function I_(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Fr({next:()=>{i.unsubscribe(),t()}});return ot(e(...n)).subscribe(i)}function Ru(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,yC({connector:()=>new _f(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Pu(t){return Mt((e,n)=>t<=n)}function or(...t){let e=rr(t);return De((n,i)=>{(e?yo(t,n,e):yo(t,n)).subscribe(i)})}function _t(t,e){return De((n,i)=>{let r=null,o=0,a=!1,c=()=>a&&!r&&i.complete();n.subscribe(Ae(i,u=>{r?.unsubscribe();let f=0,m=o++;ot(t(u,m)).subscribe(r=Ae(i,v=>i.next(e?e(u,v,m,f++):v),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function Ff(t,e){return he(e)?_t(()=>t,e):_t(()=>t)}function hi(t){return De((e,n)=>{ot(t).subscribe(Ae(n,()=>n.complete(),Cu)),!n.closed&&e.subscribe(n)})}function $t(t,e,n){let i=he(t)||e||n?{next:t,error:e,complete:n}:t;return i?De((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let c=!0;r.subscribe(Ae(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;c=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;c=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;c&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Mn}var XC="https://g.co/ng/security#xss",be=class extends Error{constructor(e,n){super(Mv(e,n)),this.code=e}};function Mv(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Qu(t){return{toString:t}.toString()}var Vf="__parameters__";function AN(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function MN(t,e,n){return Qu(()=>{let i=AN(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return c.annotation=a,c;function c(u,f,m){let v=u.hasOwnProperty(Vf)?u[Vf]:Object.defineProperty(u,Vf,{value:[]})[Vf];for(;v.length<=m;)v.push(null);return(v[m]=v[m]||[]).push(a),u}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var ku=globalThis;function st(t){for(let e in t)if(t[e]===st)return e;throw Error("Could not find renamed property on target object.")}function RN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Pn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Pn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function F_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var PN=st({__forward_ref__:st});function JC(t){return t.__forward_ref__=JC,t.toString=function(){return Pn(this())},t}function fi(t){return eD(t)?t():t}function eD(t){return typeof t=="function"&&t.hasOwnProperty(PN)&&t.__forward_ref__===JC}function X(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function at(t){return{providers:t.providers||[],imports:t.imports||[]}}function mp(t){return bC(t,nD)||bC(t,iD)}function tD(t){return mp(t)!==null}function bC(t,e){return t.hasOwnProperty(e)?t[e]:null}function kN(t){let e=t&&(t[nD]||t[iD]);return e||null}function wC(t){return t&&(t.hasOwnProperty(IC)||t.hasOwnProperty(NN))?t[IC]:null}var nD=st({\u0275prov:st}),IC=st({\u0275inj:st}),iD=st({ngInjectableDef:st}),NN=st({ngInjectorDef:st}),re=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=X({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function rD(t){return t&&!!t.\u0275providers}var ON=st({\u0275cmp:st}),LN=st({\u0275dir:st}),FN=st({\u0275pipe:st}),VN=st({\u0275mod:st}),Wf=st({\u0275fac:st}),Nu=st({__NG_ELEMENT_ID__:st}),EC=st({__NG_ENV_ID__:st});function gp(t){return typeof t=="string"?t:t==null?"":String(t)}function BN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():gp(t)}function jN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new be(-200,t)}function Rv(t,e){throw new be(-201,!1)}var Ve=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ve||{}),V_;function oD(){return V_}function zn(t){let e=V_;return V_=t,e}function sD(t,e,n){let i=mp(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Ve.Optional)return null;if(e!==void 0)return e;Rv(t,"Injector")}var zN={},Ou=zN,B_="__NG_DI_FLAG__",Zf="ngTempTokenPath",UN="ngTokenPath",$N=/\n/gm,HN="\u0275",CC="__source",mc;function qN(){return mc}function Io(t){let e=mc;return mc=t,e}function GN(t,e=Ve.Default){if(mc===void 0)throw new be(-203,!1);return mc===null?sD(t,void 0,e):mc.get(t,e&Ve.Optional?null:void 0,e)}function V(t,e=Ve.Default){return(oD()||GN)(fi(t),e)}function K(t,e=Ve.Default){return V(t,_p(e))}function _p(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function j_(t){let e=[];for(let n=0;n<t.length;n++){let i=fi(t[n]);if(Array.isArray(i)){if(i.length===0)throw new be(900,!1);let r,o=Ve.Default;for(let a=0;a<i.length;a++){let c=i[a],u=ZN(c);typeof u=="number"?u===-1?r=c.token:o|=u:r=c}e.push(V(r,o))}else e.push(V(i))}return e}function WN(t,e){return t[B_]=e,t.prototype[B_]=e,t}function ZN(t){return t[B_]}function KN(t,e,n,i){let r=t[Zf];throw e[CC]&&r.unshift(e[CC]),t.message=QN(`
`+t.message,r,n,i),t[UN]=r,t[Zf]=null,t}function QN(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==HN?t.slice(2):t;let r=Pn(e);if(Array.isArray(e))r=e.map(Pn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):Pn(c)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace($N,`
  `)}`}var vp=WN(MN("Optional"),8);function Ss(t,e){let n=t.hasOwnProperty(Wf);return n?t[Wf]:null}function YN(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function XN(t){return t.flat(Number.POSITIVE_INFINITY)}function Pv(t,e){t.forEach(n=>Array.isArray(n)?Pv(n,e):e(n))}function aD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function JN(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function e1(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function kv(t,e,n){let i=Yu(t,e);return i>=0?t[i|1]=n:(i=~i,e1(t,i,e,n)),i}function E_(t,e){let n=Yu(t,e);if(n>=0)return t[n|1]}function Yu(t,e){return t1(t,e,1)}function t1(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),a=t[o<<n];if(e===a)return o<<n;a>e?r=o:i=o+1}return~(r<<n)}var vc={},Un=[],yc=new re(""),cD=new re("",-1),lD=new re(""),Qf=class{get(e,n=Ou){if(n===Ou){let i=new Error(`NullInjectorError: No provider for ${Pn(e)}!`);throw i.name="NullInjectorError",i}return n}},uD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(uD||{}),cr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(cr||{}),pt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(pt||{});function n1(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function z_(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],a=n[i++],c=n[i++];t.setAttribute(e,a,c,o)}else{let o=r,a=n[++i];r1(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),i++}}return i}function i1(t){return t===3||t===4||t===6}function r1(t){return t.charCodeAt(0)===64}function Lu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?DC(t,n,r,null,e[++i]):DC(t,n,r,null,null))}}return t}function DC(t,e,n,i,r){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var dD="ng-template";function o1(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&n1(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(Nv(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Nv(t){return t.type===4&&t.value!==dD}function s1(t,e,n){let i=t.type===4&&!n?dD:t.value;return e===i}function a1(t,e,n){let i=4,r=t.attrs,o=r!==null?u1(r):0,a=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!a&&!Pi(i)&&!Pi(u))return!1;if(a&&Pi(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!s1(t,u,n)||u===""&&e.length===1){if(Pi(i))return!1;a=!0}}else if(i&8){if(r===null||!o1(t,r,u,n)){if(Pi(i))return!1;a=!0}}else{let f=e[++c],m=c1(u,r,Nv(t),n);if(m===-1){if(Pi(i))return!1;a=!0;continue}if(f!==""){let v;if(m>o?v="":v=r[m+1].toLowerCase(),i&2&&f!==v){if(Pi(i))return!1;a=!0}}}}return Pi(i)||a}function Pi(t){return(t&1)===0}function c1(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let a=e[r];if(a===t)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++r];for(;typeof c=="string";)c=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return d1(e,t)}function hD(t,e,n=!1){for(let i=0;i<e.length;i++)if(a1(t,e[i],n))return!0;return!1}function l1(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function u1(t){for(let e=0;e<t.length;e++){let n=t[e];if(i1(n))return e}return t.length}function d1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function h1(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function xC(t,e){return t?":not("+e.trim()+")":e}function f1(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(i&2){let c=t[++n];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!Pi(a)&&(e+=xC(o,r),r=""),i=a,o=o||!Pi(i);n++}return r!==""&&(e+=xC(o,r)),e}function p1(t){return t.map(f1).join(",")}function m1(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Pi(r))break;r=o}i++}return{attrs:e,classes:n}}function Jt(t){return Qu(()=>{let e=vD(t),n=ht(Y({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===uD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||cr.Emulated,styles:t.styles||Un,_:null,schemas:t.schemas||null,tView:null,id:""});yD(n);let i=t.dependencies;return n.directiveDefs=SC(i,!1),n.pipeDefs=SC(i,!0),n.id=v1(n),n})}function g1(t){return As(t)||pD(t)}function _1(t){return t!==null}function ct(t){return Qu(()=>({type:t.type,bootstrap:t.bootstrap||Un,declarations:t.declarations||Un,imports:t.imports||Un,exports:t.exports||Un,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function TC(t,e){if(t==null)return vc;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,a,c=pt.None;Array.isArray(r)?(c=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(n[o]=c!==pt.None?[i,c]:i,e[o]=a):n[o]=i}return n}function ln(t){return Qu(()=>{let e=vD(t);return yD(e),e})}function fD(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function As(t){return t[ON]||null}function pD(t){return t[LN]||null}function mD(t){return t[FN]||null}function gD(t){let e=As(t)||pD(t)||mD(t);return e!==null?e.standalone:!1}function _D(t,e){let n=t[VN]||null;if(!n&&e===!0)throw new Error(`Type ${Pn(t)} does not have '\u0275mod' property.`);return n}function vD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Un,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TC(t.inputs,e),outputs:TC(t.outputs),debugInfo:null}}function yD(t){t.features?.forEach(e=>e(t))}function SC(t,e){if(!t)return null;let n=e?mD:g1;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(_1)}function v1(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function yp(t){return{\u0275providers:t}}function Ov(...t){return{\u0275providers:bD(!0,t),\u0275fromNgModule:!0}}function bD(t,...e){let n=[],i=new Set,r,o=a=>{n.push(a)};return Pv(e,a=>{let c=a;U_(c,o,[],i)&&(r||=[],r.push(c))}),r!==void 0&&wD(r,o),n}function wD(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Lv(r,o=>{e(o,i)})}}function U_(t,e,n,i){if(t=fi(t),!t)return!1;let r=null,o=wC(t),a=!o&&As(t);if(!o&&!a){let u=t.ngModule;if(o=wC(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=t}let c=i.has(r);if(a){if(c)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)U_(f,e,n,i)}}else if(o){if(o.imports!=null&&!c){i.add(r);let f;try{Pv(o.imports,m=>{U_(m,e,n,i)&&(f||=[],f.push(m))})}finally{}f!==void 0&&wD(f,e)}if(!c){let f=Ss(r)||(()=>new r);e({provide:r,useFactory:f,deps:Un},r),e({provide:lD,useValue:r,multi:!0},r),e({provide:yc,useValue:()=>V(r),multi:!0},r)}let u=o.providers;if(u!=null&&!c){let f=t;Lv(u,m=>{e(m,f)})}}else return!1;return r!==t&&t.providers!==void 0}function Lv(t,e){for(let n of t)rD(n)&&(n=n.\u0275providers),Array.isArray(n)?Lv(n,e):e(n)}var y1=st({provide:String,useValue:st});function ID(t){return t!==null&&typeof t=="object"&&y1 in t}function b1(t){return!!(t&&t.useExisting)}function w1(t){return!!(t&&t.useFactory)}function $_(t){return typeof t=="function"}var bp=new re(""),zf={},I1={},C_;function Fv(){return C_===void 0&&(C_=new Qf),C_}var $n=class{},Fu=class extends $n{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,q_(e,a=>this.processProvider(a)),this.records.set(cD,hc(void 0,this)),r.has("environment")&&this.records.set($n,hc(void 0,this));let o=this.records.get(bp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(lD,Un,Ve.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Be(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Be(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Io(this),i=zn(void 0),r;try{return e()}finally{Io(n),zn(i)}}get(e,n=Ou,i=Ve.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(EC))return e[EC](this);i=_p(i);let r,o=Io(this),a=zn(void 0);try{if(!(i&Ve.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=S1(e)&&mp(e);f&&this.injectableDefInScope(f)?u=hc(H_(e),zf):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=i&Ve.Self?Fv():this.parent;return n=i&Ve.Optional&&n===Ou?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[Zf]=c[Zf]||[]).unshift(Pn(e)),o)throw c;return KN(c,e,"R3InjectorError",this.source)}else throw c}finally{zn(a),Io(o)}}resolveInjectorInitializers(){let e=Be(null),n=Io(this),i=zn(void 0),r;try{let o=this.get(yc,Un,Ve.Self);for(let a of o)a()}finally{Io(n),zn(i),Be(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Pn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(e){e=fi(e);let n=$_(e)?e:fi(e&&e.provide),i=C1(e);if(!$_(e)&&e.multi===!0){let r=this.records.get(n);r||(r=hc(void 0,zf,!0),r.factory=()=>j_(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Be(null);try{return n.value===zf&&(n.value=I1,n.value=n.factory()),typeof n.value=="object"&&n.value&&T1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Be(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=fi(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function H_(t){let e=mp(t),n=e!==null?e.factory:Ss(t);if(n!==null)return n;if(t instanceof re)throw new be(204,!1);if(t instanceof Function)return E1(t);throw new be(204,!1)}function E1(t){if(t.length>0)throw new be(204,!1);let n=kN(t);return n!==null?()=>n.factory(t):()=>new t}function C1(t){if(ID(t))return hc(void 0,t.useValue);{let e=D1(t);return hc(e,zf)}}function D1(t,e,n){let i;if($_(t)){let r=fi(t);return Ss(r)||H_(r)}else if(ID(t))i=()=>fi(t.useValue);else if(w1(t))i=()=>t.useFactory(...j_(t.deps||[]));else if(b1(t))i=()=>V(fi(t.useExisting));else{let r=fi(t&&(t.useClass||t.provide));if(x1(t))i=()=>new r(...j_(t.deps));else return Ss(r)||H_(r)}return i}function hc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function x1(t){return!!t.deps}function T1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function S1(t){return typeof t=="function"||typeof t=="object"&&t instanceof re}function q_(t,e){for(let n of t)Array.isArray(n)?q_(n,e):n&&rD(n)?q_(n.\u0275providers,e):e(n)}function Ur(t,e){t instanceof Fu&&t.assertNotDestroyed();let n,i=Io(t),r=zn(void 0);try{return e()}finally{Io(i),zn(r)}}function ED(){return oD()!==void 0||qN()!=null}function CD(t){if(!ED())throw new be(-203,!1)}function A1(t){return typeof t=="function"}var dr=0,Me=1,we=2,gn=3,Ni=4,ei=5,bc=6,Vu=7,wn=8,wc=9,Oi=10,Yt=11,Bu=12,AC=13,Dc=14,pi=15,Xu=16,fc=17,Br=18,wp=19,DD=20,Eo=21,D_=22,Ms=23,kn=25,Vv=1;var Rs=7,Yf=8,Ic=9,In=10,Bv=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Bv||{});function gc(t){return Array.isArray(t)&&typeof t[Vv]=="object"}function $r(t){return Array.isArray(t)&&t[Vv]===!0}function xD(t){return(t.flags&4)!==0}function Ip(t){return t.componentOffset>-1}function jv(t){return(t.flags&1)===1}function Co(t){return!!t.template}function M1(t){return(t[we]&512)!==0}var G_=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function TD(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Ls(){return SD}function SD(t){return t.type.prototype.ngOnChanges&&(t.setInput=P1),R1}Ls.ngInherit=!0;function R1(){let t=MD(this),e=t?.current;if(e){let n=t.previous;if(n===vc)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function P1(t,e,n,i,r){let o=this.declaredInputs[i],a=MD(t)||k1(t,{previous:vc,current:null}),c=a.current||(a.current={}),u=a.previous,f=u[o];c[o]=new G_(f&&f.currentValue,n,u===vc),TD(t,e,r,n)}var AD="__ngSimpleChanges__";function MD(t){return t[AD]||null}function k1(t,e){return t[AD]=e}var MC=null;var sr=function(t,e,n){MC?.(t,e,n)},N1="svg",O1="math",L1=!1;function F1(){return L1}function lr(t){for(;Array.isArray(t);)t=t[dr];return t}function V1(t){for(;Array.isArray(t);){if(typeof t[Vv]=="object")return t;t=t[dr]}return null}function RD(t,e){return lr(e[t])}function mi(t,e){return lr(e[t.index])}function zv(t,e){return t.data[e]}function PD(t,e){return t[e]}function Fs(t,e){let n=e[t];return gc(n)?n:n[dr]}function B1(t){return(t[we]&4)===4}function Uv(t){return(t[we]&128)===128}function j1(t){return $r(t[gn])}function Xf(t,e){return e==null?null:t[e]}function kD(t){t[fc]=0}function z1(t){t[we]&1024||(t[we]|=1024,Uv(t)&&ju(t))}function U1(t,e){for(;t>0;)e=e[Dc],t--;return e}function $v(t){return!!(t[we]&9216||t[Ms]?.dirty)}function W_(t){t[Oi].changeDetectionScheduler?.notify(1),$v(t)?ju(t):t[we]&64&&(F1()?(t[we]|=1024,ju(t)):t[Oi].changeDetectionScheduler?.notify())}function ju(t){t[Oi].changeDetectionScheduler?.notify();let e=zu(t);for(;e!==null&&!(e[we]&8192||(e[we]|=8192,!Uv(e)));)e=zu(e)}function ND(t,e){if((t[we]&256)===256)throw new be(911,!1);t[Eo]===null&&(t[Eo]=[]),t[Eo].push(e)}function $1(t,e){if(t[Eo]===null)return;let n=t[Eo].indexOf(e);n!==-1&&t[Eo].splice(n,1)}function zu(t){let e=t[gn];return $r(e)?e[gn]:e}var Le={lFrame:HD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function H1(){return Le.lFrame.elementDepthCount}function q1(){Le.lFrame.elementDepthCount++}function G1(){Le.lFrame.elementDepthCount--}function OD(){return Le.bindingsEnabled}function LD(){return Le.skipHydrationRootTNode!==null}function W1(t){return Le.skipHydrationRootTNode===t}function Z1(){Le.skipHydrationRootTNode=null}function Ge(){return Le.lFrame.lView}function En(){return Le.lFrame.tView}function gi(t){return Le.lFrame.contextLView=t,t[wn]}function _i(t){return Le.lFrame.contextLView=null,t}function Fi(){let t=FD();for(;t!==null&&t.type===64;)t=t.parent;return t}function FD(){return Le.lFrame.currentTNode}function K1(){let t=Le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ju(t,e){let n=Le.lFrame;n.currentTNode=t,n.isParent=e}function VD(){return Le.lFrame.isParent}function BD(){Le.lFrame.isParent=!1}function Q1(){return Le.lFrame.contextLView}function Y1(){let t=Le.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function X1(t){return Le.lFrame.bindingIndex=t}function xc(){return Le.lFrame.bindingIndex++}function jD(t){let e=Le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function J1(){return Le.lFrame.inI18n}function eO(t,e){let n=Le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Z_(e)}function tO(){return Le.lFrame.currentDirectiveIndex}function Z_(t){Le.lFrame.currentDirectiveIndex=t}function Hv(t){let e=Le.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function zD(){return Le.lFrame.currentQueryIndex}function qv(t){Le.lFrame.currentQueryIndex=t}function nO(t){let e=t[Me];return e.type===2?e.declTNode:e.type===1?t[ei]:null}function UD(t,e,n){if(n&Ve.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&Ve.Host);)if(r=nO(o),r===null||(o=o[Dc],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=Le.lFrame=$D();return i.currentTNode=e,i.lView=t,!0}function Gv(t){let e=$D(),n=t[Me];Le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $D(){let t=Le.lFrame,e=t===null?null:t.child;return e===null?HD(t):e}function HD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qD(){let t=Le.lFrame;return Le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var GD=qD;function Wv(){let t=qD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function iO(t){return(Le.lFrame.contextLView=U1(t,Le.lFrame.contextLView))[wn]}function xo(){return Le.lFrame.selectedIndex}function Ps(t){Le.lFrame.selectedIndex=t}function Zv(){let t=Le.lFrame;return zv(t.tView,t.selectedIndex)}function rO(){return Le.lFrame.currentNamespace}var WD=!0;function Kv(){return WD}function Qv(t){WD=t}function oO(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=SD(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Yv(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:m}=o;a&&(t.contentHooks??=[]).push(-n,a),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),f&&((t.viewHooks??=[]).push(n,f),(t.viewCheckHooks??=[]).push(n,f)),m!=null&&(t.destroyHooks??=[]).push(n,m)}}function Uf(t,e,n){ZD(t,e,3,n)}function $f(t,e,n,i){(t[we]&3)===n&&ZD(t,e,n,i)}function x_(t,e){let n=t[we];(n&3)===e&&(n&=16383,n+=1,t[we]=n)}function ZD(t,e,n,i){let r=i!==void 0?t[fc]&65535:0,o=i??-1,a=e.length-1,c=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(c=e[u],i!=null&&c>=i)break}else e[u]<0&&(t[fc]+=65536),(c<o||o==-1)&&(sO(t,n,e,u),t[fc]=(t[fc]&4294901760)+u+2),u++}function RC(t,e){sr(4,t,e);let n=Be(null);try{e.call(t)}finally{Be(n),sr(5,t,e)}}function sO(t,e,n,i){let r=n[i]<0,o=n[i+1],a=r?-n[i]:n[i],c=t[a];r?t[we]>>14<t[fc]>>16&&(t[we]&3)===e&&(t[we]+=16384,RC(c,o)):RC(c,o)}var _c=-1,Uu=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function aO(t){return t instanceof Uu}function cO(t){return(t.flags&8)!==0}function lO(t){return(t.flags&16)!==0}function KD(t){return t!==_c}function Jf(t){return t&32767}function uO(t){return t>>16}function ep(t,e){let n=uO(t),i=e;for(;n>0;)i=i[Dc],n--;return i}var K_=!0;function tp(t){let e=K_;return K_=t,e}var dO=256,QD=dO-1,YD=5,hO=0,ar={};function fO(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Nu)&&(i=n[Nu]),i==null&&(i=n[Nu]=hO++);let r=i&QD,o=1<<r;e.data[t+(r>>YD)]|=o}function XD(t,e){let n=JD(t,e);if(n!==-1)return n;let i=e[Me];i.firstCreatePass&&(t.injectorIndex=e.length,T_(i.data,t),T_(e,null),T_(i.blueprint,null));let r=Xv(t,e),o=t.injectorIndex;if(KD(r)){let a=Jf(r),c=ep(r,e),u=c[Me].data;for(let f=0;f<8;f++)e[o+f]=c[a+f]|u[a+f]}return e[o+8]=r,o}function T_(t,e){t.push(0,0,0,0,0,0,0,0,e)}function JD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Xv(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=rx(r),i===null)return _c;if(n++,r=r[Dc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return _c}function pO(t,e,n){fO(t,e,n)}function ex(t,e,n){if(n&Ve.Optional||t!==void 0)return t;Rv(e,"NodeInjector")}function tx(t,e,n,i){if(n&Ve.Optional&&i===void 0&&(i=null),!(n&(Ve.Self|Ve.Host))){let r=t[wc],o=zn(void 0);try{return r?r.get(e,i,n&Ve.Optional):sD(e,i,n&Ve.Optional)}finally{zn(o)}}return ex(i,e,n)}function nx(t,e,n,i=Ve.Default,r){if(t!==null){if(e[we]&2048&&!(i&Ve.Self)){let a=vO(t,e,n,i,ar);if(a!==ar)return a}let o=ix(t,e,n,i,ar);if(o!==ar)return o}return tx(e,n,i,r)}function ix(t,e,n,i,r){let o=gO(n);if(typeof o=="function"){if(!UD(e,t,i))return i&Ve.Host?ex(r,n,i):tx(e,n,i,r);try{let a;if(a=o(i),a==null&&!(i&Ve.Optional))Rv(n);else return a}finally{GD()}}else if(typeof o=="number"){let a=null,c=JD(t,e),u=_c,f=i&Ve.Host?e[pi][ei]:null;for((c===-1||i&Ve.SkipSelf)&&(u=c===-1?Xv(t,e):e[c+8],u===_c||!kC(i,!1)?c=-1:(a=e[Me],c=Jf(u),e=ep(u,e)));c!==-1;){let m=e[Me];if(PC(o,c,m.data)){let v=mO(c,e,n,a,i,f);if(v!==ar)return v}u=e[c+8],u!==_c&&kC(i,e[Me].data[c+8]===f)&&PC(o,c,e)?(a=m,c=Jf(u),e=ep(u,e)):c=-1}}return r}function mO(t,e,n,i,r,o){let a=e[Me],c=a.data[t+8],u=i==null?Ip(c)&&K_:i!=a&&(c.type&3)!==0,f=r&Ve.Host&&o===c,m=Hf(c,a,n,u,f);return m!==null?Ec(e,a,m,c):ar}function Hf(t,e,n,i,r){let o=t.providerIndexes,a=e.data,c=o&1048575,u=t.directiveStart,f=t.directiveEnd,m=o>>20,v=i?c:c+m,w=r?c+m:f;for(let E=v;E<w;E++){let M=a[E];if(E<u&&n===M||E>=u&&M.type===n)return E}if(r){let E=a[u];if(E&&Co(E)&&E.type===n)return u}return null}function Ec(t,e,n,i){let r=t[n],o=e.data;if(aO(r)){let a=r;a.resolving&&jN(BN(o[n]));let c=tp(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?zn(a.injectImpl):null,m=UD(t,i,Ve.Default);try{r=t[n]=a.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&oO(n,o[n],e)}finally{f!==null&&zn(f),tp(c),a.resolving=!1,GD()}}return r}function gO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Nu)?t[Nu]:void 0;return typeof e=="number"?e>=0?e&QD:_O:e}function PC(t,e,n){let i=1<<t;return!!(n[e+(t>>YD)]&i)}function kC(t,e){return!(t&Ve.Self)&&!(t&Ve.Host&&e)}var Ts=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return nx(this._tNode,this._lView,e,_p(i),n)}};function _O(){return new Ts(Fi(),Ge())}function Ep(t){return Qu(()=>{let e=t.prototype.constructor,n=e[Wf]||Q_(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Wf]||Q_(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Q_(t){return eD(t)?()=>{let e=Q_(fi(t));return e&&e()}:Ss(t)}function vO(t,e,n,i,r){let o=t,a=e;for(;o!==null&&a!==null&&a[we]&2048&&!(a[we]&512);){let c=ix(o,a,n,i|Ve.Self,ar);if(c!==ar)return c;let u=o.parent;if(!u){let f=a[DD];if(f){let m=f.get(n,ar,i);if(m!==ar)return m}u=rx(a),a=a[Dc]}o=u}return r}function rx(t){let e=t[Me],n=e.type;return n===2?e.declTNode:n===1?t[ei]:null}function NC(t,e=null,n=null,i){let r=ox(t,e,n,i);return r.resolveInjectorInitializers(),r}function ox(t,e=null,n=null,i,r=new Set){let o=[n||Un,Ov(t)];return i=i||(typeof t=="object"?void 0:Pn(t)),new Fu(o,e||Fv(),i||null,r)}var un=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return NC({name:""},r,i,"");{let o=i.name??"";return NC({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=Ou,e.NULL=new Qf,e.\u0275prov=X({token:e,providedIn:"any",factory:()=>V(cD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var yO="ngOriginalError";function S_(t){return t[yO]}var ur=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&S_(e);for(;n&&S_(n);)n=S_(n);return n||null}},sx=new re("",{providedIn:"root",factory:()=>K(ur).handleError.bind(void 0)}),Cp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=bO,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Y_=class extends Cp{constructor(e){super(),this._lView=e}onDestroy(e){return ND(this._lView,e),()=>$1(this._lView,e)}};function bO(){return new Y_(Ge())}function wO(){return Tc(Fi(),Ge())}function Tc(t,e){return new Et(mi(t,e))}var Et=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=wO;let t=e;return t})();function IO(t){return t instanceof Et?t.nativeElement:t}var X_=class extends xe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,ED()&&(this.destroyRef=K(Cp,{optional:!0})??void 0)}emit(e){let n=Be(null);try{super.next(e)}finally{Be(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=A_(o),r&&(r=A_(r)),a&&(a=A_(a)));let c=super.subscribe({next:r,error:o,complete:a});return e instanceof ft&&e.add(c),c}};function A_(t){return e=>{setTimeout(t,void 0,e)}}var it=X_;function EO(){return this._results[Symbol.iterator]()}var np=class t{get changes(){return this._changes??=new it}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=EO)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=XN(e);(this._changesDetected=!YN(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function ax(t){return(t.flags&128)===128}var cx=new Map,CO=0;function DO(){return CO++}function xO(t){cx.set(t[wp],t)}function TO(t){cx.delete(t[wp])}var OC="__ngContext__";function ks(t,e){gc(e)?(t[OC]=e[wp],xO(e)):t[OC]=e}function lx(t){return dx(t[Bu])}function ux(t){return dx(t[Ni])}function dx(t){for(;t!==null&&!$r(t);)t=t[Ni];return t}var J_;function hx(t){J_=t}function SO(){if(J_!==void 0)return J_;if(typeof document<"u")return document;throw new be(210,!1)}var Dp=new re("",{providedIn:"root",factory:()=>AO}),AO="ng",Jv=new re(""),Nn=new re("",{providedIn:"platform",factory:()=>"unknown"});var Vs=new re(""),ed=new re("",{providedIn:"root",factory:()=>SO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var MO="h",RO="b";var PO=()=>null;function ey(t,e,n=!1){return PO(t,e,n)}var fx=!1,kO=new re("",{providedIn:"root",factory:()=>fx});var ip=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${XC})`}};function td(t){return t instanceof ip?t.changingThisBreaksApplicationSecurity:t}function px(t,e){let n=NO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${XC})`)}return n===e}function NO(t){return t instanceof ip&&t.getTypeName()||null}var OO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mx(t){return t=String(t),t.match(OO)?t:"unsafe:"+t}var ty=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(ty||{});function Sc(t){let e=LO();return e?e.sanitize(ty.URL,t)||"":px(t,"URL")?td(t):mx(gp(t))}function LO(){let t=Ge();return t&&t[Oi].sanitizer}function gx(t){return t instanceof Function?t():t}function _x(t){return(t??K(un)).get(Nn)==="browser"}var jr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(jr||{}),FO;function ny(t,e){return FO(t,e)}function pc(t,e,n,i,r){if(i!=null){let o,a=!1;$r(i)?o=i:gc(i)&&(a=!0,i=i[dr]);let c=lr(i);t===0&&n!==null?r==null?Ix(e,n,c):rp(e,n,c,r||null,!0):t===1&&n!==null?rp(e,n,c,r||null,!0):t===2?XO(e,c,a):t===3&&e.destroyNode(c),o!=null&&eL(e,t,o,n,r)}}function VO(t,e){return t.createText(e)}function BO(t,e,n){t.setValue(e,n)}function vx(t,e,n){return t.createElement(e,n)}function jO(t,e){yx(t,e),e[dr]=null,e[ei]=null}function zO(t,e,n,i,r,o){i[dr]=r,i[ei]=e,Tp(t,i,n,1,r,o)}function yx(t,e){e[Oi].changeDetectionScheduler?.notify(1),Tp(t,e,e[Yt],2,null,null)}function UO(t){let e=t[Bu];if(!e)return M_(t[Me],t);for(;e;){let n=null;if(gc(e))n=e[Bu];else{let i=e[In];i&&(n=i)}if(!n){for(;e&&!e[Ni]&&e!==t;)gc(e)&&M_(e[Me],e),e=e[gn];e===null&&(e=t),gc(e)&&M_(e[Me],e),n=e&&e[Ni]}e=n}}function $O(t,e,n,i){let r=In+i,o=n.length;i>0&&(n[r-1][Ni]=e),i<o-In?(e[Ni]=n[r],aD(n,In+i,e)):(n.push(e),e[Ni]=null),e[gn]=n;let a=e[Xu];a!==null&&n!==a&&HO(a,e);let c=e[Br];c!==null&&c.insertView(t),W_(e),e[we]|=128}function HO(t,e){let n=t[Ic],r=e[gn][gn][pi];e[pi]!==r&&(t[we]|=Bv.HasTransplantedViews),n===null?t[Ic]=[e]:n.push(e)}function bx(t,e){let n=t[Ic],i=n.indexOf(e);n.splice(i,1)}function $u(t,e){if(t.length<=In)return;let n=In+e,i=t[n];if(i){let r=i[Xu];r!==null&&r!==t&&bx(r,i),e>0&&(t[n-1][Ni]=i[Ni]);let o=Kf(t,In+e);jO(i[Me],i);let a=o[Br];a!==null&&a.detachView(o[Me]),i[gn]=null,i[Ni]=null,i[we]&=-129}return i}function xp(t,e){if(!(e[we]&256)){let n=e[Yt];n.destroyNode&&Tp(t,e,n,3,null,null),UO(e)}}function M_(t,e){if(e[we]&256)return;let n=Be(null);try{e[we]&=-129,e[we]|=256,e[Ms]&&qE(e[Ms]),GO(t,e),qO(t,e),e[Me].type===1&&e[Yt].destroy();let i=e[Xu];if(i!==null&&$r(e[gn])){i!==e[gn]&&bx(i,e);let r=e[Br];r!==null&&r.detachView(t)}TO(e)}finally{Be(n)}}function qO(t,e){let n=t.cleanup,i=e[Vu];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[n[o+1]];n[o].call(a)}i!==null&&(e[Vu]=null);let r=e[Eo];if(r!==null){e[Eo]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function GO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Uu)){let o=n[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=r[o[a]],u=o[a+1];sr(4,c,u);try{u.call(c)}finally{sr(5,c,u)}}else{sr(4,r,o);try{o.call(r)}finally{sr(5,r,o)}}}}}function wx(t,e,n){return WO(t,e.parent,n)}function WO(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[dr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===cr.None||o===cr.Emulated)return null}return mi(i,n)}}function rp(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Ix(t,e,n){t.appendChild(e,n)}function LC(t,e,n,i,r){i!==null?rp(t,e,n,i,r):Ix(t,e,n)}function ZO(t,e,n,i){t.removeChild(e,n,i)}function iy(t,e){return t.parentNode(e)}function KO(t,e){return t.nextSibling(e)}function Ex(t,e,n){return YO(t,e,n)}function QO(t,e,n){return t.type&40?mi(t,n):null}var YO=QO,FC;function ry(t,e,n,i){let r=wx(t,i,e),o=e[Yt],a=i.parent||e[ei],c=Ex(a,i,e);if(r!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)LC(o,r,n[u],c,!1);else LC(o,r,n,c,!1);FC!==void 0&&FC(o,i,e,n,r)}function qf(t,e){if(e!==null){let n=e.type;if(n&3)return mi(e,t);if(n&4)return ev(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return qf(t,i);{let r=t[e.index];return $r(r)?ev(-1,r):lr(r)}}else{if(n&32)return ny(e,t)()||lr(t[e.index]);{let i=Cx(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=zu(t[pi]);return qf(r,i)}else return qf(t,e.next)}}}return null}function Cx(t,e){if(e!==null){let i=t[pi][ei],r=e.projection;return i.projection[r]}return null}function ev(t,e){let n=In+t+1;if(n<e.length){let i=e[n],r=i[Me].firstChild;if(r!==null)return qf(i,r)}return e[Rs]}function XO(t,e,n){let i=iy(t,e);i&&ZO(t,i,e,n)}function oy(t,e,n,i,r,o,a){for(;n!=null;){let c=i[n.index],u=n.type;if(a&&e===0&&(c&&ks(lr(c),i),n.flags|=2),(n.flags&32)!==32)if(u&8)oy(t,e,n.child,i,r,o,!1),pc(e,t,r,c,o);else if(u&32){let f=ny(n,i),m;for(;m=f();)pc(e,t,r,m,o);pc(e,t,r,c,o)}else u&16?Dx(t,e,i,n,r,o):pc(e,t,r,c,o);n=a?n.projectionNext:n.next}}function Tp(t,e,n,i,r,o){oy(n,i,t.firstChild,e,r,o,!1)}function JO(t,e,n){let i=e[Yt],r=wx(t,n,e),o=n.parent||e[ei],a=Ex(o,n,e);Dx(i,0,e,n,r,a)}function Dx(t,e,n,i,r,o){let a=n[pi],u=a[ei].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let m=u[f];pc(e,t,r,m,o)}else{let f=u,m=a[gn];ax(i)&&(f.flags|=128),oy(t,e,f,m,r,o,!0)}}function eL(t,e,n,i,r){let o=n[Rs],a=lr(n);o!==a&&pc(e,t,i,o,r);for(let c=In;c<n.length;c++){let u=n[c];Tp(u[Me],u,t,e,i,o)}}function tL(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:jr.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=jr.Important),t.setStyle(n,i,r,o))}}function nL(t,e,n){t.setAttribute(e,"style",n)}function xx(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Tx(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&z_(t,e,i),r!==null&&xx(t,e,r),o!==null&&nL(t,e,o)}var Hr={};function _e(t=1){Sx(En(),Ge(),xo()+t,!1)}function Sx(t,e,n,i){if(!i)if((e[we]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Uf(e,o,n)}else{let o=t.preOrderHooks;o!==null&&$f(e,o,0,n)}Ps(n)}function ke(t,e=Ve.Default){let n=Ge();if(n===null)return V(t,e);let i=Fi();return nx(i,n,fi(t),e)}function sy(){let t="invalid";throw new Error(t)}function Ax(t,e,n,i,r,o){let a=Be(null);try{let c=null;r&pt.SignalBased&&(c=e[i][zE]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),r&pt.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):TD(e,c,i,o)}finally{Be(a)}}function iL(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Ps(~r);else{let o=r,a=n[++i],c=n[++i];eO(a,o);let u=e[o];c(2,u)}}}finally{Ps(-1)}}function Sp(t,e,n,i,r,o,a,c,u,f,m){let v=e.blueprint.slice();return v[dr]=r,v[we]=i|4|128|8|64,(f!==null||t&&t[we]&2048)&&(v[we]|=2048),kD(v),v[gn]=v[Dc]=t,v[wn]=n,v[Oi]=a||t&&t[Oi],v[Yt]=c||t&&t[Yt],v[wc]=u||t&&t[wc]||null,v[ei]=o,v[wp]=DO(),v[bc]=m,v[DD]=f,v[pi]=e.type==2?t[pi]:v,v}function nd(t,e,n,i,r){let o=t.data[e];if(o===null)o=rL(t,e,n,i,r),J1()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let a=K1();o.injectorIndex=a===null?-1:a.injectorIndex}return Ju(o,!0),o}function rL(t,e,n,i,r){let o=FD(),a=VD(),c=a?o:o&&o.parent,u=t.data[e]=uL(t,c,n,e,i,r);return t.firstChild===null&&(t.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function Mx(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function Rx(t,e,n,i,r){let o=xo(),a=i&2;try{Ps(-1),a&&e.length>kn&&Sx(t,e,kn,!1),sr(a?2:0,r),n(i,r)}finally{Ps(o),sr(a?3:1,r)}}function Px(t,e,n){if(xD(e)){let i=Be(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let c=t.data[a];if(c.contentQueries){let u=n[a];c.contentQueries(1,u,a)}}}finally{Be(i)}}}function kx(t,e,n){OD()&&(gL(t,e,n,mi(n,e)),(n.flags&64)===64&&Bx(t,e,n))}function Nx(t,e,n=mi){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],c=a===-1?n(e,t):t[a];t[r++]=c}}}function Ox(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ay(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ay(t,e,n,i,r,o,a,c,u,f,m){let v=kn+i,w=v+r,E=oL(v,w),M=typeof f=="function"?f():f;return E[Me]={type:t,blueprint:E,template:n,queries:null,viewQuery:c,declTNode:e,data:E.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:m}}function oL(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Hr);return n}function sL(t,e,n,i){let o=i.get(kO,fx)||n===cr.ShadowDom,a=t.selectRootElement(e,o);return aL(a),a}function aL(t){cL(t)}var cL=()=>null;function lL(t,e,n,i){let r=Ux(e);r.push(n),t.firstCreatePass&&$x(t).push(i,r.length-1)}function uL(t,e,n,i,r,o){let a=e?e.injectorIndex:-1,c=0;return LD()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function VC(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let c,u=pt.None;Array.isArray(a)?(c=a[0],u=a[1]):c=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}t===0?BC(i,n,f,c,u):BC(i,n,f,c)}return i}function BC(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function dL(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,a=e.attrs,c=[],u=null,f=null;for(let m=i;m<r;m++){let v=o[m],w=n?n.get(v):null,E=w?w.inputs:null,M=w?w.outputs:null;u=VC(0,v.inputs,m,u,E),f=VC(1,v.outputs,m,f,M);let k=u!==null&&a!==null&&!Nv(e)?TL(u,m,a):null;c.push(k)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=f}function hL(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Lx(t,e,n,i,r,o,a,c){let u=mi(e,n),f=e.inputs,m;!c&&f!=null&&(m=f[i])?(cy(t,n,m,i,r),Ip(e)&&fL(n,e.index)):e.type&3?(i=hL(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function fL(t,e){let n=Fs(e,t);n[we]&16||(n[we]|=64)}function Fx(t,e,n,i){if(OD()){let r=i===null?null:{"":-1},o=vL(t,n),a,c;o===null?a=c=null:[a,c]=o,a!==null&&Vx(t,e,n,a,r,c),r&&yL(n,i,r)}n.mergedAttrs=Lu(n.mergedAttrs,n.attrs)}function Vx(t,e,n,i,r,o){for(let f=0;f<i.length;f++)pO(XD(n,e),t,i[f].type);wL(n,t.data.length,i.length);for(let f=0;f<i.length;f++){let m=i[f];m.providersResolver&&m.providersResolver(m)}let a=!1,c=!1,u=Mx(t,e,i.length,null);for(let f=0;f<i.length;f++){let m=i[f];n.mergedAttrs=Lu(n.mergedAttrs,m.hostAttrs),IL(t,n,e,u,m),bL(u,m,r),m.contentQueries!==null&&(n.flags|=4),(m.hostBindings!==null||m.hostAttrs!==null||m.hostVars!==0)&&(n.flags|=64);let v=m.type.prototype;!a&&(v.ngOnChanges||v.ngOnInit||v.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),a=!0),!c&&(v.ngOnChanges||v.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}dL(t,n,o)}function pL(t,e,n,i,r){let o=r.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let c=~e.index;mL(a)!=c&&a.push(c),a.push(n,i,o)}}function mL(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function gL(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Ip(n)&&EL(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||XD(n,e),ks(i,e);let a=n.initialInputs;for(let c=r;c<o;c++){let u=t.data[c],f=Ec(e,t,c,n);if(ks(f,e),a!==null&&xL(e,c-r,f,u,n,a),Co(u)){let m=Fs(n.index,e);m[wn]=Ec(e,t,c,n)}}}function Bx(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,a=tO();try{Ps(o);for(let c=i;c<r;c++){let u=t.data[c],f=e[c];Z_(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&_L(u,f)}}finally{Ps(-1),Z_(a)}}function _L(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function vL(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(hD(e,a.selectors,!1))if(i||(i=[]),Co(a))if(a.findHostDirectiveDefs!==null){let c=[];r=r||new Map,a.findHostDirectiveDefs(a,c,r),i.unshift(...c,a);let u=c.length;tv(t,e,u)}else i.unshift(a),tv(t,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function tv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function yL(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new be(-301,!1);i.push(e[r],o)}}}function bL(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Co(e)&&(n[""]=t)}}function wL(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function IL(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ss(r.type,!0)),a=new Uu(o,Co(r),ke);t.blueprint[i]=a,n[i]=a,pL(t,e,i,Mx(t,n,r.hostVars,Hr),r)}function EL(t,e,n){let i=mi(e,t),r=Ox(n),o=t[Oi].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let c=Ap(t,Sp(t,r,null,a,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=c}function CL(t,e,n,i,r,o){let a=mi(t,e);DL(e[Yt],a,o,t.value,n,i,r)}function DL(t,e,n,i,r,o,a){if(o==null)t.removeAttribute(e,r,n);else{let c=a==null?gp(o):a(o,i||"",r);t.setAttribute(e,r,c,n)}}function xL(t,e,n,i,r,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;){let u=a[c++],f=a[c++],m=a[c++],v=a[c++];Ax(i,n,u,f,m,v)}}function TL(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let a=t[o];for(let c=0;c<a.length;c+=3)if(a[c]===e){i.push(o,a[c+1],a[c+2],n[r+1]);break}}r+=2}return i}function jx(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function zx(t,e){let n=t.contentQueries;if(n!==null){let i=Be(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a!==-1){let c=t.data[a];qv(o),c.contentQueries(2,e[a],a)}}}finally{Be(i)}}}function Ap(t,e){return t[Bu]?t[AC][Ni]=e:t[Bu]=e,t[AC]=e,e}function nv(t,e,n){qv(0);let i=Be(null);try{e(t,n)}finally{Be(i)}}function Ux(t){return t[Vu]||(t[Vu]=[])}function $x(t){return t.cleanup||(t.cleanup=[])}function Hx(t,e,n){return(t===null||Co(t))&&(n=V1(n[e.index])),n[Yt]}function qx(t,e){let n=t[wc],i=n?n.get(ur,null):null;i&&i.handleError(e)}function cy(t,e,n,i,r){for(let o=0;o<n.length;){let a=n[o++],c=n[o++],u=n[o++],f=e[a],m=t.data[a];Ax(m,f,i,c,u,r)}}function SL(t,e,n){let i=RD(e,t);BO(t[Yt],i,n)}function AL(t,e){let n=Fs(e,t),i=n[Me];ML(i,n);let r=n[dr];r!==null&&n[bc]===null&&(n[bc]=ey(r,n[wc])),ly(i,n,n[wn])}function ML(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ly(t,e,n){Gv(e);try{let i=t.viewQuery;i!==null&&nv(1,i,n);let r=t.template;r!==null&&Rx(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Br]?.finishViewCreation(t),t.staticContentQueries&&zx(t,e),t.staticViewQueries&&nv(2,t.viewQuery,n);let o=t.components;o!==null&&RL(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[we]&=-5,Wv()}}function RL(t,e){for(let n=0;n<e.length;n++)AL(t,e[n])}function Mp(t,e,n,i){let r=Be(null);try{let o=e.tView,c=t[we]&4096?4096:16,u=Sp(t,o,n,c,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=t[e.index];u[Xu]=f;let m=t[Br];return m!==null&&(u[Br]=m.createEmbeddedView(o)),ly(o,u,n),u}finally{Be(r)}}function Gx(t,e){let n=In+e;if(n<t.length)return t[n]}function Hu(t,e){return!e||e.firstChild===null||ax(t)}function Rp(t,e,n,i=!0){let r=e[Me];if($O(r,e,t,n),i){let a=ev(n,t),c=e[Yt],u=iy(c,t[Rs]);u!==null&&zO(r,t[ei],c,e,u,a)}let o=e[bc];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Wx(t,e){let n=$u(t,e);return n!==void 0&&xp(n[Me],n),n}function op(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(lr(o)),$r(o)&&PL(o,i);let a=n.type;if(a&8)op(t,e,n.child,i);else if(a&32){let c=ny(n,e),u;for(;u=c();)i.push(u)}else if(a&16){let c=Cx(e,n);if(Array.isArray(c))i.push(...c);else{let u=zu(e[pi]);op(u[Me],u,c,i,!0)}}n=r?n.projectionNext:n.next}return i}function PL(t,e){for(let n=In;n<t.length;n++){let i=t[n],r=i[Me].firstChild;r!==null&&op(i[Me],i,r,e)}t[Rs]!==t[dr]&&e.push(t[Rs])}var Zx=[];function kL(t){return t[Ms]??NL(t)}function NL(t){let e=Zx.pop()??Object.create(LL);return e.lView=t,e}function OL(t){t.lView[Ms]!==t&&(t.lView=null,Zx.push(t))}var LL=ht(Y({},UE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ju(t.lView)},consumerOnSignalRead(){this.lView[Ms]=this}}),Kx=100;function Qx(t,e=!0,n=0){let i=t[Oi],r=i.rendererFactory,o=!1;o||r.begin?.();try{FL(t,n)}catch(a){throw e&&qx(t,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function FL(t,e){iv(t,e);let n=0;for(;$v(t);){if(n===Kx)throw new be(103,!1);n++,iv(t,1)}}function VL(t,e,n,i){let r=e[we];if((r&256)===256)return;let o=!1;!o&&e[Oi].inlineEffectRunner?.flush(),Gv(e);let a=null,c=null;!o&&BL(t)&&(c=kL(e),a=$E(c));try{kD(e),X1(t.bindingStartIndex),n!==null&&Rx(t,e,n,2,i);let u=(r&3)===3;if(!o)if(u){let v=t.preOrderCheckHooks;v!==null&&Uf(e,v,null)}else{let v=t.preOrderHooks;v!==null&&$f(e,v,0,null),x_(e,0)}if(jL(e),Yx(e,0),t.contentQueries!==null&&zx(t,e),!o)if(u){let v=t.contentCheckHooks;v!==null&&Uf(e,v)}else{let v=t.contentHooks;v!==null&&$f(e,v,1),x_(e,1)}iL(t,e);let f=t.components;f!==null&&Jx(e,f,0);let m=t.viewQuery;if(m!==null&&nv(2,m,i),!o)if(u){let v=t.viewCheckHooks;v!==null&&Uf(e,v)}else{let v=t.viewHooks;v!==null&&$f(e,v,2),x_(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[D_]){for(let v of e[D_])v();e[D_]=null}o||(e[we]&=-73)}catch(u){throw ju(e),u}finally{c!==null&&(HE(c,a),OL(c)),Wv()}}function BL(t){return t.type!==2}function Yx(t,e){for(let n=lx(t);n!==null;n=ux(n))for(let i=In;i<n.length;i++){let r=n[i];Xx(r,e)}}function jL(t){for(let e=lx(t);e!==null;e=ux(e)){if(!(e[we]&Bv.HasTransplantedViews))continue;let n=e[Ic];for(let i=0;i<n.length;i++){let r=n[i],o=r[gn];z1(r)}}}function zL(t,e,n){let i=Fs(e,t);Xx(i,n)}function Xx(t,e){Uv(t)&&iv(t,e)}function iv(t,e){let i=t[Me],r=t[we],o=t[Ms],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&o_(o)),o&&(o.dirty=!1),t[we]&=-9217,a)VL(i,t,i.template,t[wn]);else if(r&8192){Yx(t,1);let c=i.components;c!==null&&Jx(t,c,1)}}function Jx(t,e,n){for(let i=0;i<e.length;i++)zL(t,e[i],n)}function uy(t){for(t[Oi].changeDetectionScheduler?.notify();t;){t[we]|=64;let e=zu(t);if(M1(t)&&!e)return t;t=e}return null}var Ns=class{get rootNodes(){let e=this._lView,n=e[Me];return op(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[wn]}set context(e){this._lView[wn]=e}get destroyed(){return(this._lView[we]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[gn];if($r(e)){let n=e[Yf],i=n?n.indexOf(this):-1;i>-1&&($u(e,i),Kf(n,i))}this._attachedToViewContainer=!1}xp(this._lView[Me],this._lView)}onDestroy(e){ND(this._lView,e)}markForCheck(){uy(this._cdRefInjectingView||this._lView)}detach(){this._lView[we]&=-129}reattach(){W_(this._lView),this._lView[we]|=128}detectChanges(){this._lView[we]|=1024,Qx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,yx(this._lView[Me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=e,W_(this._lView)}},Li=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HL;let t=e;return t})(),UL=Li,$L=class extends UL{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Mp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Ns(r)}};function HL(){return Pp(Fi(),Ge())}function Pp(t,e){return t.type&4?new $L(e,t,Tc(t,e)):null}var G9=new RegExp(`^(\\d+)*(${RO}|${MO})*(.*)`);var qL=()=>null;function qu(t,e){return qL(t,e)}var sp=class{},rv=class{},ap=class{};function GL(t){let e=Error(`No component factory found for ${Pn(t)}.`);return e[WL]=t,e}var WL="ngComponent";var ov=class{resolveComponentFactory(e){throw GL(e)}},To=(()=>{let e=class e{};e.NULL=new ov;let t=e;return t})(),Gu=class{};var ZL=(()=>{let e=class e{};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),R_={};var jC=new Set;function Ac(t){jC.has(t)||(jC.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function zC(...t){}function KL(){let t=typeof ku.requestAnimationFrame=="function",e=ku[t?"requestAnimationFrame":"setTimeout"],n=ku[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var pe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new it(!1),this.onMicrotaskEmpty=new it(!1),this.onStable=new it(!1),this.onError=new it(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=KL().nativeRequestAnimationFrame,XL(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new be(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,QL,zC,zC);try{return o.runTask(a,n,i)}finally{o.cancelTask(a)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},QL={};function dy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function YL(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ku,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,sv(t),t.isCheckStableRunning=!0,dy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),sv(t))}function XL(t){let e=()=>{YL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,a,c)=>{if(JL(c))return n.invokeTask(r,o,a,c);try{return UC(t),n.invokeTask(r,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),$C(t)}},onInvoke:(n,i,r,o,a,c,u)=>{try{return UC(t),n.invoke(r,o,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),$C(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,sv(t),dy(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function sv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function UC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $C(t){t._nesting--,dy(t)}function JL(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var xs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(xs||{}),eT={destroy(){}};function hy(t,e){!e&&CD(hy);let n=e?.injector??K(un);if(!_x(n))return eT;Ac("NgAfterRender");let i=n.get(kp),r=i.handler??=new lp,o=e?.phase??xs.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Cp).onDestroy(a),u=Ur(n,()=>new cp(o,t));return r.register(u),{destroy:a}}function id(t,e){!e&&CD(id);let n=e?.injector??K(un);if(!_x(n))return eT;Ac("NgAfterNextRender");let i=n.get(kp),r=i.handler??=new lp,o=e?.phase??xs.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Cp).onDestroy(a),u=Ur(n,()=>new cp(o,()=>{a(),t()}));return r.register(u),{destroy:a}}var cp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=K(pe),this.errorHandler=K(ur,{optional:!0}),K(sp,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},lp=class{constructor(){this.executingCallbacks=!1,this.buckets={[xs.EarlyRead]:new Set,[xs.Write]:new Set,[xs.MixedReadWrite]:new Set,[xs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},kp=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=X({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function av(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)r=F_(r,c);else if(o==2){let u=c,f=e[++a];i=F_(i,u+": "+f+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var up=class extends To{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=As(e);return new Wu(n,this.ngModule)}};function HC(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function eF(t){let e=t.toLowerCase();return e==="svg"?N1:e==="math"?O1:null}var cv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=_p(i);let r=this.injector.get(e,R_,i);return r!==R_||n===R_?r:this.parentInjector.get(e,n,i)}},Wu=class extends ap{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=HC(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return HC(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=p1(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Be(null);try{r=r||this.ngModule;let a=r instanceof $n?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new cv(e,a):e,u=c.get(Gu,null);if(u===null)throw new be(407,!1);let f=c.get(ZL,null),m=c.get(kp,null),v=c.get(sp,null),w={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,afterRenderEventManager:m,changeDetectionScheduler:v},E=u.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",k=i?sL(E,i,this.componentDef.encapsulation,c):vx(E,M,eF(M)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let q=null;k!==null&&(q=ey(k,c,!0));let te=ay(0,null,null,1,0,null,null,null,null,null,null),Z=Sp(null,te,null,F,null,null,w,E,c,null,q);Gv(Z);let oe,de;try{let ce=this.componentDef,S,C=null;ce.findHostDirectiveDefs?(S=[],C=new Map,ce.findHostDirectiveDefs(ce,S,C),S.push(ce)):S=[ce];let D=tF(Z,k),A=nF(D,k,ce,S,Z,w,E);de=zv(te,kn),k&&oF(E,ce,k,i),n!==void 0&&sF(de,this.ngContentSelectors,n),oe=rF(A,ce,S,C,Z,[aF]),ly(te,Z,null)}finally{Wv()}return new lv(this.componentType,oe,Tc(de,Z),Z,de)}finally{Be(o)}}},lv=class extends rv{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ns(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;cy(o[Me],o,r,e,n),this.previousInputValues.set(e,n);let a=Fs(this._tNode.index,o);uy(a)}}get injector(){return new Ts(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tF(t,e){let n=t[Me],i=kn;return t[i]=e,nd(n,i,2,"#host",null)}function nF(t,e,n,i,r,o,a){let c=r[Me];iF(i,t,e,a);let u=null;e!==null&&(u=ey(e,r[wc]));let f=o.rendererFactory.createRenderer(e,n),m=16;n.signals?m=4096:n.onPush&&(m=64);let v=Sp(r,Ox(n),null,m,r[t.index],t,o,f,null,null,u);return c.firstCreatePass&&tv(c,t,i.length-1),Ap(r,v),r[t.index]=v}function iF(t,e,n,i){for(let r of t)e.mergedAttrs=Lu(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(av(e,e.mergedAttrs,!0),n!==null&&Tx(i,n,e))}function rF(t,e,n,i,r,o){let a=Fi(),c=r[Me],u=mi(a,r);Vx(c,r,a,n,null,i);for(let m=0;m<n.length;m++){let v=a.directiveStart+m,w=Ec(r,c,v,a);ks(w,r)}Bx(c,r,a),u&&ks(u,r);let f=Ec(r,c,a.directiveStart+a.componentOffset,a);if(t[wn]=r[wn]=f,o!==null)for(let m of o)m(f,e);return Px(c,a,r),f}function oF(t,e,n,i){if(i)z_(t,n,["ng-version","17.3.10"]);else{let{attrs:r,classes:o}=m1(e.selectors[0]);r&&z_(t,n,r),o&&o.length>0&&xx(t,n,o.join(" "))}}function sF(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function aF(){let t=Fi();Yv(Ge()[Me],t)}var Vi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cF;let t=e;return t})();function cF(){let t=Fi();return nT(t,Ge())}var lF=Vi,tT=class extends lF{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Tc(this._hostTNode,this._hostLView)}get injector(){return new Ts(this._hostTNode,this._hostLView)}get parentInjector(){let e=Xv(this._hostTNode,this._hostLView);if(KD(e)){let n=ep(e,this._hostLView),i=Jf(e),r=n[Me].data[i+8];return new Ts(r,n)}else return new Ts(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=qC(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-In}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=qu(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(c,r,Hu(this._hostTNode,a)),c}createComponent(e,n,i,r,o){let a=e&&!A1(e),c;if(a)c=n;else{let M=n||{};c=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=a?e:new Wu(As(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let k=(a?f:this.parentInjector).get($n,null);k&&(o=k)}let m=As(u.componentType??{}),v=qu(this._lContainer,m?.id??null),w=v?.firstChild??null,E=u.create(f,r,w,o);return this.insertImpl(E.hostView,c,Hu(this._hostTNode,v)),E}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(j1(r)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=r[gn],f=new tT(u,u[ei],u[gn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return Rp(a,r,o,i),e.attachToViewContainerRef(),aD(P_(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=qC(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=$u(this._lContainer,n);i&&(Kf(P_(this._lContainer),n),xp(i[Me],i))}detach(e){let n=this._adjustIndex(e,-1),i=$u(this._lContainer,n);return i&&Kf(P_(this._lContainer),n)!=null?new Ns(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function qC(t){return t[Yf]}function P_(t){return t[Yf]||(t[Yf]=[])}function nT(t,e){let n,i=e[t.index];return $r(i)?n=i:(n=jx(i,e,null,t),e[t.index]=n,Ap(e,n)),dF(n,e,t,i),new tT(n,t,e)}function uF(t,e){let n=t[Yt],i=n.createComment(""),r=mi(e,t),o=iy(n,r);return rp(n,o,i,KO(n,r),!1),i}var dF=pF,hF=()=>!1;function fF(t,e,n){return hF(t,e,n)}function pF(t,e,n,i){if(t[Rs])return;let r;n.type&8?r=lr(i):r=uF(e,n),t[Rs]=r}var uv=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},dv=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let a=n.getByIndex(o),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)fy(e,n).matches!==null&&this.queries[n].setDirty()}},hv=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=IF(e):this.predicate=e}},fv=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},pv=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,mF(n,o)),this.matchTNodeWithReadOption(e,n,Hf(n,e,o,!1,!1))}else i===Li?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Hf(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Et||r===Vi||r===Li&&n.type&4)this.addMatch(n.index,-2);else{let o=Hf(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function mF(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function gF(t,e){return t.type&11?Tc(t,e):t.type&4?Pp(t,e):null}function _F(t,e,n,i){return n===-1?gF(e,t):n===-2?vF(t,e,i):Ec(t,t[Me],n,e)}function vF(t,e,n){if(n===Et)return Tc(e,t);if(n===Li)return Pp(e,t);if(n===Vi)return nT(e,t)}function iT(t,e,n,i){let r=e[Br].queries[i];if(r.matches===null){let o=t.data,a=n.matches,c=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)c.push(null);else{let m=o[f];c.push(_F(e,m,a[u+1],n.metadata.read))}}r.matches=c}return r.matches}function mv(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let a=iT(t,e,r,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)i.push(a[c/2]);else{let f=o[c+1],m=e[-u];for(let v=In;v<m.length;v++){let w=m[v];w[Xu]===w[gn]&&mv(w[Me],w,f,i)}if(m[Ic]!==null){let v=m[Ic];for(let w=0;w<v.length;w++){let E=v[w];mv(E[Me],E,f,i)}}}}}return i}function yF(t,e){return t[Br].queries[e].queryList}function bF(t,e,n){let i=new np((n&4)===4);return lL(t,e,i,i.destroy),(e[Br]??=new dv).queries.push(new uv(i))-1}function wF(t,e,n){let i=En();return i.firstCreatePass&&(EF(i,new hv(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),bF(i,Ge(),e)}function IF(t){return t.split(",").map(e=>e.trim())}function EF(t,e,n){t.queries===null&&(t.queries=new fv),t.queries.track(new pv(e,n))}function fy(t,e){return t.queries.getByIndex(e)}function CF(t,e){let n=t[Me],i=fy(n,e);return i.crossesNgTemplate?mv(n,t,e,[]):iT(n,t,i,e)}function DF(t){return Object.getPrototypeOf(t.prototype).constructor}function So(t){let e=DF(t.type),n=!0,i=[t];for(;e;){let r;if(Co(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new be(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let a=t;a.inputs=Bf(t.inputs),a.inputTransforms=Bf(t.inputTransforms),a.declaredInputs=Bf(t.declaredInputs),a.outputs=Bf(t.outputs);let c=r.hostBindings;c&&MF(t,c);let u=r.viewQuery,f=r.contentQueries;if(u&&SF(t,u),f&&AF(t,f),xF(t,r),RN(t.outputs,r.outputs),Co(r)&&r.data.animation){let m=t.data;m.animation=(m.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(t),c===So&&(n=!1)}}e=Object.getPrototypeOf(e)}TF(i)}function xF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function TF(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Lu(r.hostAttrs,n=Lu(n,r.hostAttrs))}}function Bf(t){return t===vc?{}:t===Un?[]:t}function SF(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function AF(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function MF(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function Ao(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var Do=class{},Zu=class{};var gv=class extends Do{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new up(this);let r=_D(e);this._bootstrapComponents=gx(r.bootstrap),this._r3Injector=ox(e,n,[{provide:Do,useValue:this},{provide:To,useValue:this.componentFactoryResolver},...i],Pn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_v=class extends Zu{constructor(e){super(),this.moduleType=e}create(e){return new gv(this.moduleType,e,[])}};var dp=class extends Do{constructor(e){super(),this.componentFactoryResolver=new up(this),this.instance=null;let n=new Fu([...e.providers,{provide:Do,useValue:this},{provide:To,useValue:this.componentFactoryResolver}],e.parent||Fv(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function py(t,e,n=null){return new dp({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Np=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function RF(t,e,n){return t[e]=n}function qr(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function PF(t){return(t.flags&32)===32}function kF(t,e,n,i,r,o,a,c,u){let f=e.consts,m=nd(e,t,4,a||null,Xf(f,c));Fx(e,n,m,Xf(f,u)),Yv(e,m);let v=m.tView=ay(2,m,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,m),v.queries=e.queries.embeddedTView(m)),m}function Xt(t,e,n,i,r,o,a,c){let u=Ge(),f=En(),m=t+kn,v=f.firstCreatePass?kF(m,f,u,e,n,i,r,o,a):f.data[m];Ju(v,!1);let w=NF(f,u,v,t);Kv()&&ry(f,u,w,v),ks(w,u);let E=jx(w,u,w,v);return u[m]=E,Ap(u,E),fF(E,v,u),jv(v)&&kx(f,u,v),a!=null&&Nx(u,v,c),Xt}var NF=OF;function OF(t,e,n,i){return Qv(!0),e[Yt].createComment("")}function Mo(t,e,n,i){let r=Ge(),o=xc();if(qr(r,o,e)){let a=En(),c=Zv();CL(c,r,t,e,n,i)}return Mo}function LF(t,e,n,i){return qr(t,xc(),n)?e+gp(n)+i:Hr}function jf(t,e){return t<<17|e<<2}function Os(t){return t>>17&32767}function FF(t){return(t&2)==2}function VF(t,e){return t&131071|e<<17}function vv(t){return t|2}function Cc(t){return(t&131068)>>2}function k_(t,e){return t&-131069|e<<2}function BF(t){return(t&1)===1}function yv(t){return t|1}function jF(t,e,n,i,r,o){let a=o?e.classBindings:e.styleBindings,c=Os(a),u=Cc(a);t[i]=n;let f=!1,m;if(Array.isArray(n)){let v=n;m=v[1],(m===null||Yu(v,m)>0)&&(f=!0)}else m=n;if(r)if(u!==0){let w=Os(t[c+1]);t[i+1]=jf(w,c),w!==0&&(t[w+1]=k_(t[w+1],i)),t[c+1]=VF(t[c+1],i)}else t[i+1]=jf(c,0),c!==0&&(t[c+1]=k_(t[c+1],i)),c=i;else t[i+1]=jf(u,0),c===0?c=i:t[u+1]=k_(t[u+1],i),u=i;f&&(t[i+1]=vv(t[i+1])),GC(t,m,i,!0),GC(t,m,i,!1),zF(e,m,t,i,o),a=jf(c,u),o?e.classBindings=a:e.styleBindings=a}function zF(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Yu(o,e)>=0&&(n[i+1]=yv(n[i+1]))}function GC(t,e,n,i){let r=t[n+1],o=e===null,a=i?Os(r):Cc(r),c=!1;for(;a!==0&&(c===!1||o);){let u=t[a],f=t[a+1];UF(u,e)&&(c=!0,t[a+1]=i?yv(f):vv(f)),a=i?Os(f):Cc(f)}c&&(t[n+1]=i?vv(r):yv(r))}function UF(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Yu(t,e)>=0:!1}var ki={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $F(t){return t.substring(ki.key,ki.keyEnd)}function HF(t){return qF(t),rT(t,oT(t,0,ki.textEnd))}function rT(t,e){let n=ki.textEnd;return n===e?-1:(e=ki.keyEnd=GF(t,ki.key=e,n),oT(t,e,n))}function qF(t){ki.key=0,ki.keyEnd=0,ki.value=0,ki.valueEnd=0,ki.textEnd=t.length}function oT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function GF(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Bi(t,e,n){let i=Ge(),r=xc();if(qr(i,r,e)){let o=En(),a=Zv();Lx(o,a,i,t,e,i[Yt],n,!1)}return Bi}function bv(t,e,n,i,r){let o=e.inputs,a=r?"class":"style";cy(t,n,o[a],a,i)}function Lt(t,e,n){return aT(t,e,n,!1),Lt}function Bs(t,e){return aT(t,e,null,!0),Bs}function sT(t){ZF(eV,WF,t,!0)}function WF(t,e){for(let n=HF(e);n>=0;n=rT(e,n))kv(t,$F(e),!0)}function aT(t,e,n,i){let r=Ge(),o=En(),a=jD(2);if(o.firstUpdatePass&&lT(o,t,a,i),e!==Hr&&qr(r,a,e)){let c=o.data[xo()];uT(o,c,r,r[Yt],t,r[a+1]=nV(e,n),i,a)}}function ZF(t,e,n,i){let r=En(),o=jD(2);r.firstUpdatePass&&lT(r,null,o,i);let a=Ge();if(n!==Hr&&qr(a,o,n)){let c=r.data[xo()];if(dT(c,i)&&!cT(r,o)){let u=i?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=F_(u,n||"")),bv(r,c,a,n,i)}else tV(r,c,a,a[Yt],a[o+1],a[o+1]=JF(t,e,n),i,o)}}function cT(t,e){return e>=t.expandoStartIndex}function lT(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[xo()],a=cT(t,n);dT(o,i)&&e===null&&!a&&(e=!1),e=KF(r,o,e,i),jF(r,o,e,n,a,i)}}function KF(t,e,n,i){let r=Hv(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=N_(null,t,e,n,i),n=Ku(n,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==r)if(n=N_(r,t,e,n,i),o===null){let u=QF(t,e,i);u!==void 0&&Array.isArray(u)&&(u=N_(null,t,e,u[1],i),u=Ku(u,e.attrs,i),YF(t,e,i,u))}else o=XF(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function QF(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Cc(i)!==0)return t[Os(i)]}function YF(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Os(r)]=i}function XF(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=t[o].hostAttrs;i=Ku(i,a,n)}return Ku(i,e.attrs,n)}function N_(t,e,n,i,r){let o=null,a=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<a&&(o=e[c],i=Ku(i,o.hostAttrs,r),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),i}function Ku(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),kv(t,a,n?!0:e[++o]))}return t===void 0?null:t}function JF(t,e,n){if(n==null||n==="")return Un;let i=[],r=td(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function eV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&kv(t,i,n)}function tV(t,e,n,i,r,o,a,c){r===Hr&&(r=Un);let u=0,f=0,m=0<r.length?r[0]:null,v=0<o.length?o[0]:null;for(;m!==null||v!==null;){let w=u<r.length?r[u+1]:void 0,E=f<o.length?o[f+1]:void 0,M=null,k;m===v?(u+=2,f+=2,w!==E&&(M=v,k=E)):v===null||m!==null&&m<v?(u+=2,M=m):(f+=2,M=v,k=E),M!==null&&uT(t,e,n,i,M,k,a,c),m=u<r.length?r[u]:null,v=f<o.length?o[f]:null}}function uT(t,e,n,i,r,o,a,c){if(!(e.type&3))return;let u=t.data,f=u[c+1],m=BF(f)?WC(u,e,n,r,Cc(f),a):void 0;if(!hp(m)){hp(o)||FF(f)&&(o=WC(u,null,n,r,c,a));let v=RD(xo(),n);tL(i,a,v,r,o)}}function WC(t,e,n,i,r,o){let a=e===null,c;for(;r>0;){let u=t[r],f=Array.isArray(u),m=f?u[1]:u,v=m===null,w=n[r+1];w===Hr&&(w=v?Un:void 0);let E=v?E_(w,i):m===i?w:void 0;if(f&&!hp(E)&&(E=E_(u,i)),hp(E)&&(c=E,a))return c;let M=t[r+1];r=a?Os(M):Cc(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=E_(u,i))}return c}function hp(t){return t!==void 0}function nV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Pn(td(t)))),t}function dT(t,e){return(t.flags&(e?8:16))!==0}var wv=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function O_(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function iV(t,e,n){let i,r,o=0,a=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=a&&o<=c;){let u=t.at(o),f=e[o],m=O_(o,u,o,f,n);if(m!==0){m<0&&t.updateValue(o,f),o++;continue}let v=t.at(a),w=e[c],E=O_(a,v,c,w,n);if(E!==0){E<0&&t.updateValue(a,w),a--,c--;continue}let M=n(o,u),k=n(a,v),F=n(o,f);if(Object.is(F,k)){let q=n(c,w);Object.is(q,M)?(t.swap(o,a),t.updateValue(a,w),c--,a--):t.move(a,o),t.updateValue(o,f),o++;continue}if(i??=new fp,r??=KC(t,o,a,n),Iv(t,i,o,F))t.updateValue(o,f),o++,a++;else if(r.has(F))i.set(M,t.detach(o)),a--;else{let q=t.create(o,e[o]);t.attach(o,q),o++,a++}}for(;o<=c;)ZC(t,i,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=a;){let f=t.at(o),m=u.value,v=O_(o,f,o,m,n);if(v!==0)v<0&&t.updateValue(o,m),o++,u=c.next();else{i??=new fp,r??=KC(t,o,a,n);let w=n(o,m);if(Iv(t,i,o,w))t.updateValue(o,m),o++,a++,u=c.next();else if(!r.has(w))t.attach(o,t.create(o,m)),o++,a++,u=c.next();else{let E=n(o,f);i.set(E,t.detach(o)),a--}}}for(;!u.done;)ZC(t,i,n,t.length,u.value),u=c.next()}for(;o<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function Iv(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function ZC(t,e,n,i,r){if(Iv(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function KC(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var fp=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Hn(t,e,n){Ac("NgControlFlow");let i=Ge(),r=xc(),o=xv(i,kn+t),a=0;if(qr(i,r,e)){let c=Be(null);try{if(Wx(o,a),e!==-1){let u=Tv(i[Me],kn+e),f=qu(o,u.tView.ssrId),m=Mp(i,u,n,{dehydratedView:f});Rp(o,m,a,Hu(u,f))}}finally{Be(c)}}else{let c=Gx(o,a);c!==void 0&&(c[wn]=n)}}var Ev=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-In}};function hT(t,e){return e}var Cv=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function fT(t,e,n,i,r,o,a,c,u,f,m,v,w){Ac("NgControlFlow");let E=u!==void 0,M=Ge(),k=c?a.bind(M[pi][wn]):a,F=new Cv(E,k);M[kn+t]=F,Xt(t+1,e,n,i,r,o),E&&Xt(t+2,u,f,m,v,w)}var Dv=class extends wv{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-In}at(e){return this.getLView(e)[wn].$implicit}attach(e,n){let i=n[bc];this.needsIndexUpdate||=e!==this.length,Rp(this.lContainer,n,e,Hu(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,rV(this.lContainer,e)}create(e,n){let i=qu(this.lContainer,this.templateTNode.tView.ssrId);return Mp(this.hostLView,this.templateTNode,new Ev(this.lContainer,n,e),{dehydratedView:i})}destroy(e){xp(e[Me],e)}updateValue(e,n){this.getLView(e)[wn].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[wn].$index=e}getLView(e){return oV(this.lContainer,e)}};function pT(t){let e=Be(null),n=xo();try{let i=Ge(),r=i[Me],o=i[n];if(o.liveCollection===void 0){let c=n+1,u=xv(i,c),f=Tv(r,c);o.liveCollection=new Dv(u,i,f)}else o.liveCollection.reset();let a=o.liveCollection;if(iV(a,t,o.trackByFn),a.updateIndexes(),o.hasEmptyBlock){let c=xc(),u=a.length===0;if(qr(i,c,u)){let f=n+2,m=xv(i,f);if(u){let v=Tv(r,f),w=qu(m,v.tView.ssrId),E=Mp(i,v,void 0,{dehydratedView:w});Rp(m,E,0,Hu(v,w))}else Wx(m,0)}}}finally{Be(e)}}function xv(t,e){return t[e]}function rV(t,e){return $u(t,e)}function oV(t,e){return Gx(t,e)}function Tv(t,e){return zv(t,e)}function sV(t,e,n,i,r,o){let a=e.consts,c=Xf(a,r),u=nd(e,t,2,i,c);return Fx(e,n,u,Xf(a,o)),u.attrs!==null&&av(u,u.attrs,!1),u.mergedAttrs!==null&&av(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function ve(t,e,n,i){let r=Ge(),o=En(),a=kn+t,c=r[Yt],u=o.firstCreatePass?sV(a,o,r,e,n,i):o.data[a],f=aV(o,r,u,c,e,t);r[a]=f;let m=jv(u);return Ju(u,!0),Tx(c,f,u),!PF(u)&&Kv()&&ry(o,r,f,u),H1()===0&&ks(f,r),q1(),m&&(kx(o,r,u),Px(o,u,r)),i!==null&&Nx(r,u),ve}function ye(){let t=Fi();VD()?BD():(t=t.parent,Ju(t,!1));let e=t;W1(e)&&Z1(),G1();let n=En();return n.firstCreatePass&&(Yv(n,t),xD(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&cO(e)&&bv(n,e,Ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&lO(e)&&bv(n,e,Ge(),e.stylesWithoutHost,!1),ye}function vt(t,e,n,i){return ve(t,e,n,i),ye(),vt}var aV=(t,e,n,i,r,o)=>(Qv(!0),vx(i,r,rO()));function hr(){return Ge()}function my(t,e,n){let i=Ge(),r=xc();if(qr(i,r,e)){let o=En(),a=Zv(),c=Hv(o.data),u=Hx(c,a,i);Lx(o,a,i,t,e,u,n,!0)}return my}var pp="en-US";var cV=pp;function lV(t){typeof t=="string"&&(cV=t.toLowerCase().replace(/_/g,"-"))}function en(t,e,n,i){let r=Ge(),o=En(),a=Fi();return mT(o,r,r[Yt],a,t,e,i),en}function gy(t,e){let n=Fi(),i=Ge(),r=En(),o=Hv(r.data),a=Hx(o,n,i);return mT(r,i,a,n,t,e),gy}function uV(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===n&&r[o+1]===i){let c=e[Vu],u=r[o+2];return c.length>u?c[u]:null}typeof a=="string"&&(o+=2)}return null}function mT(t,e,n,i,r,o,a){let c=jv(i),f=t.firstCreatePass&&$x(t),m=e[wn],v=Ux(e),w=!0;if(i.type&3||a){let k=mi(i,e),F=a?a(k):k,q=v.length,te=a?oe=>a(lr(oe[i.index])):i.index,Z=null;if(!a&&c&&(Z=uV(t,e,r,i.index)),Z!==null){let oe=Z.__ngLastListenerFn__||Z;oe.__ngNextListenerFn__=o,Z.__ngLastListenerFn__=o,w=!1}else{o=YC(i,e,m,o,!1);let oe=n.listen(F,r,o);v.push(o,oe),f&&f.push(r,te,q,q+1)}}else o=YC(i,e,m,o,!1);let E=i.outputs,M;if(w&&E!==null&&(M=E[r])){let k=M.length;if(k)for(let F=0;F<k;F+=2){let q=M[F],te=M[F+1],de=e[q][te].subscribe(o),ce=v.length;v.push(o,de),f&&f.push(r,i.index,ce,-(ce+1))}}}function QC(t,e,n,i){let r=Be(null);try{return sr(6,e,n),n(i)!==!1}catch(o){return qx(t,o),!1}finally{sr(7,e,n),Be(r)}}function YC(t,e,n,i,r){return function o(a){if(a===Function)return i;let c=t.componentOffset>-1?Fs(t.index,e):e;uy(c);let u=QC(e,n,i,a),f=o.__ngNextListenerFn__;for(;f;)u=QC(e,n,f,a)&&u,f=f.__ngNextListenerFn__;return r&&u===!1&&a.preventDefault(),u}}function yt(t=1){return iO(t)}function dV(t,e){let n=null,i=l1(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?hD(t,o,!0):h1(i,o))return r}return n}function Op(t){let e=Ge()[pi][ei];if(!e.projection){let n=t?t.length:1,i=e.projection=JN(n,null),r=i.slice(),o=e.child;for(;o!==null;){let a=t?dV(o,t):0;a!==null&&(r[a]?r[a].projectionNext=o:i[a]=o,r[a]=o),o=o.next}}}function Mc(t,e=0,n){let i=Ge(),r=En(),o=nd(r,kn+t,16,null,n||null);o.projection===null&&(o.projection=e),BD(),(!i[bc]||LD())&&(o.flags&32)!==32&&JO(r,i,o)}function rd(t,e,n){wF(t,e,n)}function Rc(t){let e=Ge(),n=En(),i=zD();qv(i+1);let r=fy(n,i);if(t.dirty&&B1(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=CF(e,i);t.reset(o,IO),t.notifyOnChanges()}return!0}return!1}function Pc(){return yF(Ge(),zD())}function hV(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function gT(t){let e=Q1();return PD(e,kn+t)}function Ye(t,e=""){let n=Ge(),i=En(),r=t+kn,o=i.firstCreatePass?nd(i,r,1,e,null):i.data[r],a=fV(i,n,o,e,t);n[r]=a,Kv()&&ry(i,n,a,o),Ju(o,!1)}var fV=(t,e,n,i,r)=>(Qv(!0),VO(e[Yt],i));function ji(t){return tn("",t,""),ji}function tn(t,e,n){let i=Ge(),r=LF(i,t,e,n);return r!==Hr&&SL(i,xo(),r),tn}var pV=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=bD(!1,i.type),o=r.length>0?py([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=X({token:e,providedIn:"environment",factory:()=>new e(V($n))});let t=e;return t})();function nn(t){Ac("NgStandalone"),t.getStandaloneInjector=e=>e.get(pV).getOrCreateStandaloneInjector(t)}function mV(t,e){let n=t[e];return n===Hr?void 0:n}function gV(t,e,n,i,r,o){let a=e+n;return qr(t,a,r)?RF(t,a+1,o?i.call(o,r):i(r)):mV(t,a+1)}function _T(t,e){let n=En(),i,r=t+kn;n.firstCreatePass?(i=_V(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=Ss(i.type,!0)),a,c=zn(ke);try{let u=tp(!1),f=o();return tp(u),hV(n,Ge(),r,f),f}finally{zn(c)}}function _V(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function vT(t,e,n){let i=t+kn,r=Ge(),o=PD(r,i);return vV(r,i)?gV(r,Y1(),e,o.transform,n,o):o.transform(n)}function vV(t,e){return t[Me].data[e].pure}function yT(t,e){return Pp(t,e)}var zr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},bT=new zr("17.3.10"),Lp=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var wT=new re("");function kc(t){return!!t&&typeof t.then=="function"}function _y(t){return!!t&&typeof t.subscribe=="function"}var IT=new re(""),ET=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=K(IT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let a=o();if(kc(a))i.push(a);else if(_y(a)){let c=new Promise((u,f)=>{a.subscribe({complete:u,error:f})});i.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vy=new re("");function yV(){GE(()=>{throw new be(600,!1)})}function bV(t){return t.isBoundToModule}function wV(t,e,n){try{let i=n();return kc(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var js=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=K(sx),this.afterRenderEffectManager=K(kp),this.externalTestViews=new Set,this.beforeRender=new xe,this.afterTick=new xe,this.componentTypes=[],this.components=[],this.isStable=K(Np).hasPendingTasks.pipe(fe(i=>!i)),this._injector=K($n)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof ap;if(!this._injector.get(ET).done){let E=!o&&gD(i),M=!1;throw new be(405,M)}let c;o?c=i:c=this._injector.get(To).resolveComponentFactory(i),this.componentTypes.push(c.componentType);let u=bV(c)?void 0:this._injector.get(Do),f=r||c.selector,m=c.create(un.NULL,[],f,u),v=m.location.nativeElement,w=m.injector.get(wT,null);return w?.registerApplication(v),m.onDestroy(()=>{this.detachView(m.hostView),L_(this.components,m),w?.unregisterApplication(v)}),this._loadComponent(m),m}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new be(101,!1);let r=Be(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Be(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===Kx)throw new be(103,!1);if(i){let a=r===0;this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)IV(c,a,u)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>Sv(a))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>Sv(a))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;L_(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(vy,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>L_(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new be(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function L_(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function IV(t,e,n){!e&&!Sv(t)||EV(t,n,e)}function Sv(t){return $v(t)}function EV(t,e,n){let i;n?(i=0,t[we]|=1024):t[we]&64?i=0:i=1,Qx(t,e,i)}var Av=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},yy=(()=>{let e=class e{compileModuleSync(i){return new _v(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=_D(i),a=gx(o.declarations).reduce((c,u)=>{let f=As(u);return f&&c.push(new Wu(f)),c},[]);return new Av(r,a)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var CV=(()=>{let e=class e{constructor(){this.zone=K(pe),this.applicationRef=K(js)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function DV(t){return[{provide:pe,useFactory:t},{provide:yc,multi:!0,useFactory:()=>{let e=K(CV,{optional:!0});return()=>e.initialize()}},{provide:yc,multi:!0,useFactory:()=>{let e=K(AV);return()=>{e.initialize()}}},{provide:sx,useFactory:xV}]}function xV(){let t=K(pe),e=K(ur);return n=>t.runOutsideAngular(()=>e.handleError(n))}function TV(t){let e=DV(()=>new pe(SV(t)));return yp([[],e])}function SV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var AV=(()=>{let e=class e{constructor(){this.subscription=new ft,this.initialized=!1,this.zone=K(pe),this.pendingTasks=K(Np)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MV(){return typeof $localize<"u"&&$localize.locale||pp}var Fp=new re("",{providedIn:"root",factory:()=>K(Fp,Ve.Optional|Ve.SkipSelf)||MV()});var CT=new re("");var Gf=null;function RV(t=[],e){return un.create({name:e,providers:[{provide:bp,useValue:"platform"},{provide:CT,useValue:new Set([()=>Gf=null])},...t]})}function PV(t=[]){if(Gf)return Gf;let e=RV(t);return Gf=e,yV(),kV(e),e}function kV(t){t.get(Jv,null)?.forEach(n=>n())}function by(){return!1}var fr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=NV;let t=e;return t})();function NV(t){return OV(Fi(),Ge(),(t&16)===16)}function OV(t,e,n){if(Ip(t)&&!n){let i=Fs(t.index,e);return new Ns(i,i)}else if(t.type&47){let i=e[pi];return new Ns(i,e)}return null}function DT(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=PV(i),o=[TV(),...n||[]],c=new dp({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(pe);return u.run(()=>{c.resolveInjectorInitializers();let f=c.get(ur,null),m;u.runOutsideAngular(()=>{m=u.onError.subscribe({next:E=>{f.handleError(E)}})});let v=()=>c.destroy(),w=r.get(CT);return w.add(v),c.onDestroy(()=>{m.unsubscribe(),w.delete(v)}),wV(f,u,()=>{let E=c.get(ET);return E.runInitializers(),E.donePromise.then(()=>{let M=c.get(Fp,pp);lV(M||pp);let k=c.get(js);return e!==void 0&&k.bootstrap(e),k})})})}catch(e){return Promise.reject(e)}}function pr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function od(t){let e=Be(null);try{return t()}finally{Be(e)}}var MT=null;function Nc(){return MT}function RT(t){MT??=t}var Vp=class{};var je=new re(""),PT=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>K(BV),providedIn:"platform"});let t=e;return t})();var BV=(()=>{let e=class e extends PT{constructor(){super(),this._doc=K(je),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nc().getBaseHref(this._doc)}onPopState(i){let r=Nc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Nc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function kT(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function xT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function zs(t){return t&&t[0]!=="?"?"?"+t:t}var jp=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>K(NT),providedIn:"root"});let t=e;return t})(),jV=new re(""),NT=(()=>{let e=class e extends jp{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??K(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return kT(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+zs(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,a){let c=this.prepareExternalUrl(o+zs(a));this._platformLocation.pushState(i,r,c)}replaceState(i,r,o,a){let c=this.prepareExternalUrl(o+zs(a));this._platformLocation.replaceState(i,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(V(PT),V(jV,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Us=(()=>{let e=class e{constructor(i){this._subject=new it,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=$V(xT(TT(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+zs(r))}normalize(i){return e.stripTrailingSlash(UV(this._basePath,TT(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+zs(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+zs(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=zs,e.joinWithSlash=kT,e.stripTrailingSlash=xT,e.\u0275fac=function(r){return new(r||e)(V(jp))},e.\u0275prov=X({token:e,factory:()=>zV(),providedIn:"root"});let t=e;return t})();function zV(){return new Us(V(jp))}function UV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function TT(t){return t.replace(/\/index.html$/,"")}function $V(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function OT(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var LT=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new wy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){ST("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){ST("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ke(Vi),ke(Li))},e.\u0275dir=ln({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),wy=class{constructor(){this.$implicit=null,this.ngIf=null}};function ST(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Pn(e)}'.`)}function HV(t,e){return new be(2100,!1)}var Iy=class{createSubscription(e,n){return od(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){od(()=>e.unsubscribe())}},Ey=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},qV=new Ey,GV=new Iy,FT=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(kc(i))return qV;if(_y(i))return GV;throw HV(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(ke(fr,16))},e.\u0275pipe=fD({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var Cy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({});let t=e;return t})(),Dy="browser",WV="server";function VT(t){return t===Dy}function $s(t){return t===WV}var Bp=class{};var Sy=class extends Vp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ay=class t extends Sy{static makeCurrent(){RT(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=ZV();return n==null?null:KV(n)}resetBaseElement(){sd=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return OT(document.cookie,e)}},sd=null;function ZV(){return sd=sd||document.querySelector("base"),sd?sd.getAttribute("href"):null}function KV(t){return new URL(t,document.baseURI).pathname}var QV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),My=new re(""),$T=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(a=>a.supports(i)),!r)throw new be(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(V(My),V(pe))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),zp=class{constructor(e){this._doc=e}},xy="ng-app-id",HT=(()=>{let e=class e{constructor(i,r,o,a={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=$s(a),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${xy}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let a=o.get(i);return a.usage+=r,a.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,a=o?.get(r);if(a?.parentNode===i)return o.delete(r),a.removeAttribute(xy),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(xy,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),a=this.styleRef,c=a.get(r)?.elements;c?c.push(o):a.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(V(je),V(Dp),V(ed,8),V(Nn))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),Ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Py=/%COMP%/g,qT="%COMP%",YV=`_nghost-${qT}`,XV=`_ngcontent-${qT}`,JV=!0,e2=new re("",{providedIn:"root",factory:()=>JV});function t2(t){return XV.replace(Py,t)}function n2(t){return YV.replace(Py,t)}function GT(t,e){return e.map(n=>n.replace(Py,t))}var jT=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=u,this.ngZone=f,this.nonce=m,this.rendererByCompId=new Map,this.platformIsServer=$s(u),this.defaultRenderer=new ad(i,c,f,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===cr.ShadowDom&&(r=ht(Y({},r),{encapsulation:cr.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof Up?o.applyToHost(i):o instanceof cd&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,a=o.get(r.id);if(!a){let c=this.doc,u=this.ngZone,f=this.eventManager,m=this.sharedStylesHost,v=this.removeStylesOnCompDestroy,w=this.platformIsServer;switch(r.encapsulation){case cr.Emulated:a=new Up(f,m,r,this.appId,v,c,u,w);break;case cr.ShadowDom:return new Ry(f,m,i,r,c,u,this.nonce,w);default:a=new cd(f,m,r,v,c,u,w);break}o.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(V($T),V(HT),V(Dp),V(e2),V(je),V(Nn),V(pe),V(ed))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),ad=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ty[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(zT(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(zT(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new be(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=Ty[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Ty[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(jr.DashCase|jr.Important)?e.style.setProperty(n,i,r&jr.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&jr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Nc().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function zT(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ry=class extends ad{constructor(e,n,i,r,o,a,c,u){super(e,o,a,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=GT(r.id,r.styles);for(let m of f){let v=document.createElement("style");c&&v.setAttribute("nonce",c),v.textContent=m,this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cd=class extends ad{constructor(e,n,i,r,o,a,c,u){super(e,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=u?GT(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Up=class extends cd{constructor(e,n,i,r,o,a,c,u){let f=r+"-"+i.id;super(e,n,i,o,a,c,u,f),this.contentAttr=t2(f),this.hostAttr=n2(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},i2=(()=>{let e=class e extends zp{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(V(je))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})(),UT=["alt","control","meta","shift"],r2={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},o2={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},s2=(()=>{let e=class e extends zp{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let a=e.parseEventName(r),c=e.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nc().onAndCancel(i,a.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let a=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),UT.forEach(m=>{let v=r.indexOf(m);v>-1&&(r.splice(v,1),c+=m+".")}),c+=a,r.length!=0||a.length===0)return null;let f={};return f.domEventName=o,f.fullKey=c,f}static matchEventFullKeyCode(i,r){let o=r2[i.key]||i.key,a="";return r.indexOf("code.")>-1&&(o=i.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),UT.forEach(c=>{if(c!==o){let u=o2[c];u(i)&&(a+=c+".")}}),a+=o,a===r)}static eventCallback(i,r,o){return a=>{e.matchEventFullKeyCode(a,i)&&o.runGuarded(()=>r(a))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(V(je))},e.\u0275prov=X({token:e,factory:e.\u0275fac});let t=e;return t})();function WT(t,e){return DT(Y({rootComponent:t},a2(e)))}function a2(t){return{appProviders:[...h2,...t?.providers??[]],platformProviders:d2}}function c2(){Ay.makeCurrent()}function l2(){return new ur}function u2(){return hx(document),document}var d2=[{provide:Nn,useValue:Dy},{provide:Jv,useValue:c2,multi:!0},{provide:je,useFactory:u2,deps:[]}];var h2=[{provide:bp,useValue:"root"},{provide:ur,useFactory:l2,deps:[]},{provide:My,useClass:i2,multi:!0,deps:[je,pe,Nn]},{provide:My,useClass:s2,multi:!0,deps:[je]},jT,HT,$T,{provide:Gu,useExisting:jT},{provide:Bp,useClass:QV,deps:[]},[]];var ZT=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(V(je))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ne="primary",Ed=Symbol("RouteTitle"),Fy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bc(t){return new Fy(t)}function p2(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],c=t[o];if(a.startsWith(":"))r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function m2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!mr(t[n],e[n]))return!1;return!0}function mr(t,e){let n=t?Vy(t):void 0,i=e?Vy(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!eS(t[r],e[r]))return!1;return!0}function Vy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function eS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function tS(t){return t.length>0?t[t.length-1]:null}function ko(t){return Rf(t)?t:kc(t)?tt(Promise.resolve(t)):le(t)}var g2={exact:iS,subset:rS},nS={exact:_2,subset:v2,ignored:()=>!0};function KT(t,e,n){return g2[n.paths](t.root,e.root,n.matrixParams)&&nS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function _2(t,e){return mr(t,e)}function iS(t,e,n){if(!qs(t.segments,e.segments)||!qp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!iS(t.children[i],e.children[i],n))return!1;return!0}function v2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>eS(t[n],e[n]))}function rS(t,e,n){return oS(t,e,e.segments,n)}function oS(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!qs(r,n)||e.hasChildren()||!qp(r,n,i))}else if(t.segments.length===n.length){if(!qs(t.segments,n)||!qp(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!rS(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!qs(t.segments,r)||!qp(t.segments,r,i)||!t.children[Ne]?!1:oS(t.children[Ne],e,o,i)}}function qp(t,e,n){return e.every((i,r)=>nS[n](t[r].parameters,i.parameters))}var Ro=class{constructor(e=new Xe([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Bc(this.queryParams),this._queryParamMap}toString(){return w2.serialize(this)}},Xe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gp(this)}},Hs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Bc(this.parameters),this._parameterMap}toString(){return aS(this)}};function y2(t,e){return qs(t,e)&&t.every((n,i)=>mr(n.parameters,e[i].parameters))}function qs(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function b2(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Ne&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Ne&&(n=n.concat(e(r,i)))}),n}var ub=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>new Zp,providedIn:"root"});let t=e;return t})(),Zp=class{parse(e){let n=new jy(e);return new Ro(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${ld(e.root,!0)}`,i=C2(e.queryParams),r=typeof e.fragment=="string"?`#${I2(e.fragment)}`:"";return`${n}${i}${r}`}},w2=new Zp;function Gp(t){return t.segments.map(e=>aS(e)).join("/")}function ld(t,e){if(!t.hasChildren())return Gp(t);if(e){let n=t.children[Ne]?ld(t.children[Ne],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Ne&&i.push(`${r}:${ld(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=b2(t,(i,r)=>r===Ne?[ld(t.children[Ne],!1)]:[`${r}:${ld(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ne]!=null?`${Gp(t)}/${n[0]}`:`${Gp(t)}/(${n.join("//")})`}}function sS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $p(t){return sS(t).replace(/%3B/gi,";")}function I2(t){return encodeURI(t)}function By(t){return sS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wp(t){return decodeURIComponent(t)}function QT(t){return Wp(t.replace(/\+/g,"%20"))}function aS(t){return`${By(t.path)}${E2(t.parameters)}`}function E2(t){return Object.entries(t).map(([e,n])=>`;${By(e)}=${By(n)}`).join("")}function C2(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${$p(n)}=${$p(r)}`).join("&"):`${$p(n)}=${$p(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var D2=/^[^\/()?;#]+/;function ky(t){let e=t.match(D2);return e?e[0]:""}var x2=/^[^\/()?;=#]+/;function T2(t){let e=t.match(x2);return e?e[0]:""}var S2=/^[^=?&#]+/;function A2(t){let e=t.match(S2);return e?e[0]:""}var M2=/^[^&#]+/;function R2(t){let e=t.match(M2);return e?e[0]:""}var jy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Ne]=new Xe(e,n)),i}parseSegment(){let e=ky(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new be(4009,!1);return this.capture(e),new Hs(Wp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=T2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=ky(this.remaining);r&&(i=r,this.capture(i))}e[Wp(n)]=Wp(i)}parseQueryParam(e){let n=A2(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let a=R2(this.remaining);a&&(i=a,this.capture(i))}let r=QT(n),o=QT(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=ky(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new be(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ne);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[Ne]:new Xe([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new be(4011,!1)}};function cS(t){return t.segments.length>0?new Xe([],{[Ne]:t}):t}function lS(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=lS(r);if(i===Ne&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new Xe(t.segments,e);return P2(n)}function P2(t){if(t.numberOfChildren===1&&t.children[Ne]){let e=t.children[Ne];return new Xe(t.segments.concat(e.segments),e.children)}return t}function jc(t){return t instanceof Ro}function k2(t,e,n=null,i=null){let r=uS(t);return dS(r,e,n,i)}function uS(t){let e;function n(o){let a={};for(let u of o.children){let f=n(u);a[u.outlet]=f}let c=new Xe(o.url,a);return o===t&&(e=c),c}let i=n(t.root),r=cS(i);return e??r}function dS(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Ny(r,r,r,n,i);let o=N2(e);if(o.toRoot())return Ny(r,r,new Xe([],{}),n,i);let a=O2(o,r,t),c=a.processChildren?hd(a.segmentGroup,a.index,o.commands):fS(a.segmentGroup,a.index,o.commands);return Ny(r,a.segmentGroup,c,n,i)}function Kp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function md(t){return typeof t=="object"&&t!=null&&t.outlets}function Ny(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(m=>`${m}`):`${f}`});let a;t===e?a=n:a=hS(t,e,n);let c=cS(lS(a));return new Ro(c,o,r)}function hS(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=hS(o,e,n)}),new Xe(t.segments,i)}var Qp=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Kp(i[0]))throw new be(4003,!1);let r=i.find(md);if(r&&r!==tS(i))throw new be(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function N2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Qp(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,f])=>{c[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new Qp(n,e,i)}var Fc=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function O2(t,e,n){if(t.isAbsolute)return new Fc(e,!0,0);if(!n)return new Fc(e,!1,NaN);if(n.parent===null)return new Fc(n,!0,0);let i=Kp(t.commands[0])?0:1,r=n.segments.length-1+i;return L2(n,r,t.numberOfDoubleDots)}function L2(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new be(4005,!1);r=i.segments.length}return new Fc(i,!1,r-o)}function F2(t){return md(t[0])?t[0].outlets:{[Ne]:t}}function fS(t,e,n){if(t??=new Xe([],{}),t.segments.length===0&&t.hasChildren())return hd(t,e,n);let i=V2(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new Xe(t.segments.slice(0,i.pathIndex),{});return o.children[Ne]=new Xe(t.segments.slice(i.pathIndex),t.children),hd(o,0,r)}else return i.match&&r.length===0?new Xe(t.segments,{}):i.match&&!t.hasChildren()?zy(t,e,n):i.match?hd(t,0,r):zy(t,e,n)}function hd(t,e,n){if(n.length===0)return new Xe(t.segments,{});{let i=F2(n),r={};if(Object.keys(i).some(o=>o!==Ne)&&t.children[Ne]&&t.numberOfChildren===1&&t.children[Ne].segments.length===0){let o=hd(t.children[Ne],e,n);return new Xe(t.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=fS(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new Xe(t.segments,r)}}function V2(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let a=t.segments[r],c=n[i];if(md(c))break;let u=`${c}`,f=i<n.length-1?n[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!XT(u,f,a))return o;i+=2}else{if(!XT(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function zy(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(md(o)){let u=B2(o.outlets);return new Xe(i,u)}if(r===0&&Kp(n[0])){let u=t.segments[e];i.push(new Hs(u.path,YT(n[0]))),r++;continue}let a=md(o)?o.outlets[Ne]:`${o}`,c=r<n.length-1?n[r+1]:null;a&&c&&Kp(c)?(i.push(new Hs(a,YT(c))),r+=2):(i.push(new Hs(a,{})),r++)}return new Xe(i,{})}function B2(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=zy(new Xe([],{}),0,i))}),e}function YT(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function XT(t,e,n){return t==n.path&&mr(e,n.parameters)}var fd="imperative",_n=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(_n||{}),vi=class{constructor(e,n){this.id=e,this.url=n}},gd=class extends vi{constructor(e,n,i="imperative",r=null){super(e,n),this.type=_n.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gs=class extends vi{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=_n.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ni=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(ni||{}),Uy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Uy||{}),Po=class extends vi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=_n.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ws=class extends vi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=_n.NavigationSkipped}},_d=class extends vi{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=_n.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yp=class extends vi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=_n.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class extends vi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=_n.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hy=class extends vi{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=_n.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},qy=class extends vi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=_n.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gy=class extends vi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=_n.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class{constructor(e){this.route=e,this.type=_n.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zy=class{constructor(e){this.route=e,this.type=_n.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ky=class{constructor(e){this.snapshot=e,this.type=_n.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qy=class{constructor(e){this.snapshot=e,this.type=_n.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yy=class{constructor(e){this.snapshot=e,this.type=_n.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=_n.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var vd=class{},yd=class{constructor(e){this.url=e}};var Jy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new im,this.attachRef=null}},im=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Jy,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=eb(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=eb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=tb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return tb(e,this._root).map(n=>n.value)}};function eb(t,e){if(t===e.value)return e;for(let n of e.children){let i=eb(t,n);if(i)return i}return null}function tb(t,e){if(t===e.value)return[e];for(let n of e.children){let i=tb(t,n);if(i.length)return i.unshift(e),i}return[]}var ti=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Lc(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Jp=class extends Xp{constructor(e,n){super(e),this.snapshot=n,hb(this,e)}toString(){return this.snapshot.toString()}};function pS(t){let e=j2(t),n=new Qt([new Hs("",{})]),i=new Qt({}),r=new Qt({}),o=new Qt({}),a=new Qt(""),c=new zc(n,i,o,a,r,Ne,t,e.root);return c.snapshot=e.root,new Jp(new ti(c,[]),e)}function j2(t){let e={},n={},i={},r="",o=new bd([],e,i,r,n,Ne,t,null,{});return new em("",new ti(o,[]))}var zc=class{constructor(e,n,i,r,o,a,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(fe(f=>f[Ed]))??le(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(e=>Bc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(e=>Bc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function db(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:Y(Y({},e.params),t.params),data:Y(Y({},e.data),t.data),resolve:Y(Y(Y(Y({},t.data),e.data),r?.data),t._resolvedData)}:i={params:Y({},t.params),data:Y({},t.data),resolve:Y(Y({},t.data),t._resolvedData??{})},r&&gS(r)&&(i.resolve[Ed]=r.title),i}var bd=class{get title(){return this.data?.[Ed]}constructor(e,n,i,r,o,a,c,u,f){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},em=class extends Xp{constructor(e,n){super(n),this.url=e,hb(this,n)}toString(){return mS(this._root)}};function hb(t,e){e.value._routerState=t,e.children.forEach(n=>hb(t,n))}function mS(t){let e=t.children.length>0?` { ${t.children.map(mS).join(", ")} } `:"";return`${t.value}${e}`}function Oy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,mr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),mr(e.params,n.params)||t.paramsSubject.next(n.params),m2(e.url,n.url)||t.urlSubject.next(n.url),mr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function nb(t,e){let n=mr(t.params,e.params)&&y2(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||nb(t.parent,e.parent))}function gS(t){return typeof t.title=="string"||t.title===null}var z2=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ne,this.activateEvents=new it,this.deactivateEvents=new it,this.attachEvents=new it,this.detachEvents=new it,this.parentContexts=K(im),this.location=K(Vi),this.changeDetector=K(fr),this.environmentInjector=K($n),this.inputBinder=K(fb,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new be(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new be(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new be(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new be(4013,!1);this._activatedRoute=i;let o=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,f=new ib(i,u,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ls]});let t=e;return t})(),ib=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===zc?this.route:e===im?this.childContexts:this.parent.get(e,n)}},fb=new re("");function U2(t,e,n){let i=wd(t,e._root,n?n._root:void 0);return new Jp(i,e)}function wd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=$2(t,e,n);return new ti(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>wd(t,c)),a}}let i=H2(e.value),r=e.children.map(o=>wd(t,o));return new ti(i,r)}}function $2(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return wd(t,i,r);return wd(t,i)})}function H2(t){return new zc(new Qt(t.url),new Qt(t.params),new Qt(t.queryParams),new Qt(t.fragment),new Qt(t.data),t.outlet,t.component,t)}var _S="ngNavigationCancelingError";function vS(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=jc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=yS(!1,ni.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function yS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[_S]=!0,n.cancellationCode=e,n}function q2(t){return bS(t)&&jc(t.url)}function bS(t){return!!t&&t[_S]}var G2=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Jt({type:e,selectors:[["ng-component"]],standalone:!0,features:[nn],decls:1,vars:0,template:function(r,o){r&1&&vt(0,"router-outlet")},dependencies:[z2],encapsulation:2});let t=e;return t})();function W2(t,e){return t.providers&&!t._injector&&(t._injector=py(t.providers,e,`Route: ${t.path}`)),t._injector??e}function pb(t){let e=t.children&&t.children.map(pb),n=e?ht(Y({},t),{children:e}):Y({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ne&&(n.component=G2),n}function gr(t){return t.outlet||Ne}function Z2(t,e){let n=t.filter(i=>gr(i)===e);return n.push(...t.filter(i=>gr(i)!==e)),n}function Cd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var K2=(t,e,n,i)=>fe(r=>(new rb(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),rb=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Oy(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Lc(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Lc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=Lc(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Lc(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new Xy(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Qy(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(Oy(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Oy(c.route.value),this.activateChildRoutes(e,null,a.children)}else{let c=Cd(r.snapshot);a.attachRef=null,a.route=r,a.injector=c,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}},tm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vc=class{constructor(e,n){this.component=e,this.route=n}};function Q2(t,e,n){let i=t._root,r=e?e._root:null;return ud(i,r,n,[i.value])}function Y2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function $c(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!tD(t)?t:e.get(t):i}function ud(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Lc(e);return t.children.forEach(a=>{X2(a,o[a.value.outlet],n,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>pd(c,n.getContext(a),r)),r}function X2(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=J2(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new tm(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?ud(t,e,c?c.children:null,i,r):ud(t,e,n,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new Vc(c.outlet.component,a))}else a&&pd(e,c,r),r.canActivateChecks.push(new tm(i)),o.component?ud(t,null,c?c.children:null,i,r):ud(t,null,n,i,r);return r}function J2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!qs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!qs(t.url,e.url)||!mr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nb(t,e)||!mr(t.queryParams,e.queryParams);case"paramsChange":default:return!nb(t,e)}}function pd(t,e,n){let i=Lc(t),r=t.value;Object.entries(i).forEach(([o,a])=>{r.component?e?pd(a,e.children.getContext(o),n):pd(a,null,n):pd(a,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vc(e.outlet.component,r)):n.canDeactivateChecks.push(new Vc(null,r)):n.canDeactivateChecks.push(new Vc(null,r))}function Dd(t){return typeof t=="function"}function eB(t){return typeof t=="boolean"}function tB(t){return t&&Dd(t.canLoad)}function nB(t){return t&&Dd(t.canActivate)}function iB(t){return t&&Dd(t.canActivateChild)}function rB(t){return t&&Dd(t.canDeactivate)}function oB(t){return t&&Dd(t.canMatch)}function wS(t){return t instanceof Vr||t?.name==="EmptyError"}var Hp=Symbol("INITIAL_VALUE");function Uc(){return _t(t=>ac(t.map(e=>e.pipe(ui(1),or(Hp)))).pipe(fe(e=>{for(let n of e)if(n!==!0){if(n===Hp)return Hp;if(n===!1||n instanceof Ro)return n}return!0}),Mt(e=>e!==Hp),ui(1)))}function sB(t,e){return Ot(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?le(ht(Y({},n),{guardsResult:!0})):aB(a,i,r,t).pipe(Ot(c=>c&&eB(c)?cB(i,o,t,e):le(c)),fe(c=>ht(Y({},n),{guardsResult:c})))})}function aB(t,e,n,i){return tt(t).pipe(Ot(r=>fB(r.component,r.route,n,e,i)),di(r=>r!==!0,!0))}function cB(t,e,n,i){return tt(e).pipe(cc(r=>yo(uB(r.route.parent,i),lB(r.route,i),hB(t,r.path,n),dB(t,r.route,n))),di(r=>r!==!0,!0))}function lB(t,e){return t!==null&&e&&e(new Yy(t)),le(!0)}function uB(t,e){return t!==null&&e&&e(new Ky(t)),le(!0)}function dB(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return le(!0);let r=i.map(o=>kf(()=>{let a=Cd(e)??n,c=$c(o,a),u=nB(c)?c.canActivate(e,t):Ur(a,()=>c(e,t));return ko(u).pipe(di())}));return le(r).pipe(Uc())}function hB(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Y2(a)).filter(a=>a!==null).map(a=>kf(()=>{let c=a.guards.map(u=>{let f=Cd(a.node)??n,m=$c(u,f),v=iB(m)?m.canActivateChild(i,t):Ur(f,()=>m(i,t));return ko(v).pipe(di())});return le(c).pipe(Uc())}));return le(o).pipe(Uc())}function fB(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return le(!0);let a=o.map(c=>{let u=Cd(e)??r,f=$c(c,u),m=rB(f)?f.canDeactivate(t,e,n,i):Ur(u,()=>f(t,e,n,i));return ko(m).pipe(di())});return le(a).pipe(Uc())}function pB(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return le(!0);let o=r.map(a=>{let c=$c(a,t),u=tB(c)?c.canLoad(e,n):Ur(t,()=>c(e,n));return ko(u)});return le(o).pipe(Uc(),IS(i))}function IS(t){return f_($t(e=>{if(jc(e))throw vS(t,e)}),fe(e=>e===!0))}function mB(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return le(!0);let o=r.map(a=>{let c=$c(a,t),u=oB(c)?c.canMatch(e,n):Ur(t,()=>c(e,n));return ko(u)});return le(o).pipe(Uc(),IS(i))}var Id=class{constructor(e){this.segmentGroup=e||null}},nm=class extends Error{constructor(e){super(),this.urlTree=e}};function Oc(t){return sc(new Id(t))}function gB(t){return sc(new be(4e3,!1))}function _B(t){return sc(yS(!1,ni.GuardRejected))}var ob=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return le(i);if(r.numberOfChildren>1||!r.children[Ne])return gB(e.redirectTo);r=r.children[Ne]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new nm(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new Ro(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);i[r]=n[c]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),a={};return Object.entries(n.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,i,r)}),new Xe(o,a)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new be(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},sb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vB(t,e,n,i,r){let o=mb(t,e,n);return o.matched?(i=W2(e,i),mB(i,e,n,r).pipe(fe(a=>a===!0?o:Y({},sb)))):le(o)}function mb(t,e,n){if(e.path==="**")return yB(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?Y({},sb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||p2)(n,t,e);if(!r)return Y({},sb);let o={};Object.entries(r.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let a=r.consumed.length>0?Y(Y({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function yB(t){return{matched:!0,parameters:t.length>0?tS(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function JT(t,e,n,i){return n.length>0&&IB(t,n,i)?{segmentGroup:new Xe(e,wB(i,new Xe(n,t.children))),slicedSegments:[]}:n.length===0&&EB(t,n,i)?{segmentGroup:new Xe(t.segments,bB(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Xe(t.segments,t.children),slicedSegments:n}}function bB(t,e,n,i){let r={};for(let o of n)if(rm(t,e,o)&&!i[gr(o)]){let a=new Xe([],{});r[gr(o)]=a}return Y(Y({},i),r)}function wB(t,e){let n={};n[Ne]=e;for(let i of t)if(i.path===""&&gr(i)!==Ne){let r=new Xe([],{});n[gr(i)]=r}return n}function IB(t,e,n){return n.some(i=>rm(t,e,i)&&gr(i)!==Ne)}function EB(t,e,n){return n.some(i=>rm(t,e,i))}function rm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function CB(t,e,n,i){return gr(t)!==i&&(i===Ne||!rm(e,n,t))?!1:mb(e,t,n).matched}function DB(t,e,n){return e.length===0&&!t.children[n]}var ab=class{};function xB(t,e,n,i,r,o,a="emptyOnly"){return new cb(t,e,n,i,r,a,o).recognize()}var TB=31,cb=class{constructor(e,n,i,r,o,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new ob(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new be(4002,`'${e.segmentGroup}'`)}recognize(){let e=JT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(fe(n=>{let i=new bd([],Object.freeze({}),Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ne,this.rootComponentType,null,{}),r=new ti(i,n),o=new em("",r),a=k2(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Ne).pipe(bo(i=>{if(i instanceof nm)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Id?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=db(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(fe(o=>o instanceof ti?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return tt(r).pipe(cc(o=>{let a=i.children[o],c=Z2(n,o);return this.processSegmentGroup(e,c,a,o)}),Ds((o,a)=>(o.push(...a),o)),wo(null),w_(),Ot(o=>{if(o===null)return Oc(i);let a=ES(o);return SB(a),le(a)}))}processSegment(e,n,i,r,o,a){return tt(n).pipe(cc(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,o,a).pipe(bo(u=>{if(u instanceof Id)return le(null);throw u}))),di(c=>!!c),bo(c=>{if(wS(c))return DB(i,r,o)?le(new ab):Oc(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,o,a,c){return CB(i,r,o,a)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,a):Oc(r):Oc(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,a){let{matched:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:m}=mb(n,r,o);if(!c)return Oc(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>TB&&(this.allowRedirects=!1));let v=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,f);return this.applyRedirects.lineralizeSegments(r,v).pipe(Ot(w=>this.processSegment(e,i,n,w.concat(m),a,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let a=vB(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(_t(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(_t(({routes:u})=>{let f=i._loadedInjector??e,{consumedSegments:m,remainingSegments:v,parameters:w}=c,E=new bd(m,w,Object.freeze(Y({},this.urlTree.queryParams)),this.urlTree.fragment,MB(i),gr(i),i.component??i._loadedComponent??null,i,RB(i)),{segmentGroup:M,slicedSegments:k}=JT(n,m,v,u);if(k.length===0&&M.hasChildren())return this.processChildren(f,u,M).pipe(fe(q=>q===null?null:new ti(E,q)));if(u.length===0&&k.length===0)return le(new ti(E,[]));let F=gr(i)===o;return this.processSegment(f,u,M,k,F?Ne:o,!0).pipe(fe(q=>new ti(E,q instanceof ti?[q]:[])))}))):Oc(n)))}getChildConfig(e,n,i){return n.children?le({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?le({routes:n._loadedRoutes,injector:n._loadedInjector}):pB(e,n,i,this.urlSerializer).pipe(Ot(r=>r?this.configLoader.loadChildren(e,n).pipe($t(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):_B(n))):le({routes:[],injector:e})}};function SB(t){t.sort((e,n)=>e.value.outlet===Ne?-1:n.value.outlet===Ne?1:e.value.outlet.localeCompare(n.value.outlet))}function AB(t){let e=t.value.routeConfig;return e&&e.path===""}function ES(t){let e=[],n=new Set;for(let i of t){if(!AB(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=ES(i.children);e.push(new ti(i.value,r))}return e.filter(i=>!n.has(i))}function MB(t){return t.data||{}}function RB(t){return t.resolve||{}}function PB(t,e,n,i,r,o){return Ot(a=>xB(t,e,n,i,a.extractedUrl,r,o).pipe(fe(({state:c,tree:u})=>ht(Y({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function kB(t,e){return Ot(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return le(n);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of CS(u))a.add(f);let c=0;return tt(a).pipe(cc(u=>o.has(u)?NB(u,i,t,e):(u.data=db(u,u.parent,t).resolve,le(void 0))),$t(()=>c++),uc(1),Ot(u=>c===a.size?le(n):Rn))})}function CS(t){let e=t.children.map(n=>CS(n)).flat();return[t,...e]}function NB(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!gS(r)&&(o[Ed]=r.title),OB(o,t,e,i).pipe(fe(a=>(t._resolvedData=a,t.data=db(t,t.parent,n).resolve,null)))}function OB(t,e,n,i){let r=Vy(t);if(r.length===0)return le({});let o={};return tt(r).pipe(Ot(a=>LB(t[a],e,n,i).pipe(di(),$t(c=>{o[a]=c}))),uc(1),b_(o),bo(a=>wS(a)?Rn:sc(a)))}function LB(t,e,n,i){let r=Cd(e)??i,o=$c(t,r),a=o.resolve?o.resolve(e,n):Ur(r,()=>o(e,n));return ko(a)}function Ly(t){return _t(e=>{let n=t(e);return n?tt(n).pipe(fe(()=>e)):le(e)})}var DS=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(a=>a.outlet===Ne);return r}getResolvedTitleForRoute(i){return i.data[Ed]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>K(FB),providedIn:"root"});let t=e;return t})(),FB=(()=>{let e=class e extends DS{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(V(ZT))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gb=new re("",{providedIn:"root",factory:()=>({})}),_b=new re(""),VB=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=K(yy)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return le(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=ko(i.loadComponent()).pipe(fe(xS),$t(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Mu(()=>{this.componentLoaders.delete(i)})),o=new tc(r,()=>new xe).pipe(ec());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return le({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=BB(r,this.compiler,i,this.onLoadEndListener).pipe(Mu(()=>{this.childrenLoaders.delete(r)})),c=new tc(a,()=>new xe).pipe(ec());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BB(t,e,n,i){return ko(t.loadChildren()).pipe(fe(xS),Ot(r=>r instanceof Zu||Array.isArray(r)?le(r):tt(e.compileModuleAsync(r))),fe(r=>{i&&i(t);let o,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(o=r.create(n).injector,a=o.get(_b,[],{optional:!0,self:!0}).flat()),{routes:a.map(pb),injector:o}}))}function jB(t){return t&&typeof t=="object"&&"default"in t}function xS(t){return jB(t)?t.default:t}var vb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>K(zB),providedIn:"root"});let t=e;return t})(),zB=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),UB=new re("");var $B=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xe,this.transitionAbortSubject=new xe,this.configLoader=K(VB),this.environmentInjector=K($n),this.urlSerializer=K(ub),this.rootContexts=K(im),this.location=K(Us),this.inputBindingEnabled=K(fb,{optional:!0})!==null,this.titleStrategy=K(DS),this.options=K(gb,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=K(vb),this.createViewTransition=K(UB,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>le(void 0),this.rootComponentType=null;let i=o=>this.events.next(new Wy(o)),r=o=>this.events.next(new Zy(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ht(Y(Y({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new Qt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:fd,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mt(a=>a.id!==0),fe(a=>ht(Y({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),_t(a=>{let c=!1,u=!1;return le(a).pipe(_t(f=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",ni.SupersededByNewNavigation),Rn;this.currentTransition=a,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?ht(Y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let m=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),v=f.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!m&&v!=="reload"){let w="";return this.events.next(new Ws(f.id,this.urlSerializer.serialize(f.rawUrl),w,Uy.IgnoredSameUrlNavigation)),f.resolve(null),Rn}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return le(f).pipe(_t(w=>{let E=this.transitions?.getValue();return this.events.next(new gd(w.id,this.urlSerializer.serialize(w.extractedUrl),w.source,w.restoredState)),E!==this.transitions?.getValue()?Rn:Promise.resolve(w)}),PB(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),$t(w=>{a.targetSnapshot=w.targetSnapshot,a.urlAfterRedirects=w.urlAfterRedirects,this.currentNavigation=ht(Y({},this.currentNavigation),{finalUrl:w.urlAfterRedirects});let E=new Yp(w.id,this.urlSerializer.serialize(w.extractedUrl),this.urlSerializer.serialize(w.urlAfterRedirects),w.targetSnapshot);this.events.next(E)}));if(m&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:w,extractedUrl:E,source:M,restoredState:k,extras:F}=f,q=new gd(w,this.urlSerializer.serialize(E),M,k);this.events.next(q);let te=pS(this.rootComponentType).snapshot;return this.currentTransition=a=ht(Y({},f),{targetSnapshot:te,urlAfterRedirects:E,extras:ht(Y({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=E,le(a)}else{let w="";return this.events.next(new Ws(f.id,this.urlSerializer.serialize(f.extractedUrl),w,Uy.IgnoredByUrlHandlingStrategy)),f.resolve(null),Rn}}),$t(f=>{let m=new $y(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}),fe(f=>(this.currentTransition=a=ht(Y({},f),{guards:Q2(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),a)),sB(this.environmentInjector,f=>this.events.next(f)),$t(f=>{if(a.guardsResult=f.guardsResult,jc(f.guardsResult))throw vS(this.urlSerializer,f.guardsResult);let m=new Hy(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(m)}),Mt(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",ni.GuardRejected),!1)),Ly(f=>{if(f.guards.canActivateChecks.length)return le(f).pipe($t(m=>{let v=new qy(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}),_t(m=>{let v=!1;return le(m).pipe(kB(this.paramsInheritanceStrategy,this.environmentInjector),$t({next:()=>v=!0,complete:()=>{v||this.cancelNavigationTransition(m,"",ni.NoDataFromResolver)}}))}),$t(m=>{let v=new Gy(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}))}),Ly(f=>{let m=v=>{let w=[];v.routeConfig?.loadComponent&&!v.routeConfig._loadedComponent&&w.push(this.configLoader.loadComponent(v.routeConfig).pipe($t(E=>{v.component=E}),fe(()=>{})));for(let E of v.children)w.push(...m(E));return w};return ac(m(f.targetSnapshot.root)).pipe(wo(null),ui(1))}),Ly(()=>this.afterPreactivation()),_t(()=>{let{currentSnapshot:f,targetSnapshot:m}=a,v=this.createViewTransition?.(this.environmentInjector,f.root,m.root);return v?tt(v).pipe(fe(()=>a)):le(a)}),fe(f=>{let m=U2(i.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=a=ht(Y({},f),{targetRouterState:m}),this.currentNavigation.targetRouterState=m,a}),$t(()=>{this.events.next(new vd)}),K2(this.rootContexts,i.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),ui(1),$t({next:f=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gs(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{c=!0}}),hi(this.transitionAbortSubject.pipe($t(f=>{throw f}))),Mu(()=>{!c&&!u&&this.cancelNavigationTransition(a,"",ni.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),bo(f=>{if(u=!0,bS(f))this.events.next(new Po(a.id,this.urlSerializer.serialize(a.extractedUrl),f.message,f.cancellationCode)),q2(f)?this.events.next(new yd(f.url)):a.resolve(!1);else{this.events.next(new _d(a.id,this.urlSerializer.serialize(a.extractedUrl),f,a.targetSnapshot??void 0));try{a.resolve(i.errorHandler(f))}catch(m){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(m)}}return Rn}))}))}cancelNavigationTransition(i,r,o){let a=new Po(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(a),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HB(t){return t!==fd}var qB=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>K(GB),providedIn:"root"});let t=e;return t})(),lb=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},GB=(()=>{let e=class e extends lb{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ep(e)))(o||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),TS=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:()=>K(WB),providedIn:"root"});let t=e;return t})(),WB=(()=>{let e=class e extends TS{constructor(){super(...arguments),this.location=K(Us),this.urlSerializer=K(ub),this.options=K(gb,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=K(vb),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ro,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=pS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof gd)this.stateMemento=this.createStateMemento();else if(i instanceof Ws)this.rawUrlTree=r.initialUrl;else if(i instanceof Yp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof vd?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Po&&(i.code===ni.GuardRejected||i.code===ni.NoDataFromResolver)?this.restoreHistory(r):i instanceof _d?this.restoreHistory(r,!0):i instanceof Gs&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let a=this.browserPageId,c=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,a));this.location.replaceState(o,"",c)}else{let a=Y(Y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===i.finalUrl&&a===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Ep(e)))(o||e)}})(),e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(dd||{});function ZB(t,e){t.events.pipe(Mt(n=>n instanceof Gs||n instanceof Po||n instanceof _d||n instanceof Ws),fe(n=>n instanceof Gs||n instanceof Ws?dd.COMPLETE:(n instanceof Po?n.code===ni.Redirect||n.code===ni.SupersededByNewNavigation:!1)?dd.REDIRECTING:dd.FAILED),Mt(n=>n!==dd.REDIRECTING),ui(1)).subscribe(()=>{e()})}function KB(t){throw t}var QB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},YB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},om=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=K(Lp),this.stateManager=K(TS),this.options=K(gb,{optional:!0})||{},this.pendingTasks=K(Np),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=K($B),this.urlSerializer=K(ub),this.location=K(Us),this.urlHandlingStrategy=K(vb),this._events=new xe,this.errorHandler=this.options.errorHandler||KB,this.navigated=!1,this.routeReuseStrategy=K(qB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=K(_b,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!K(fb,{optional:!0}),this.eventsSubscription=new ft,this.isNgZoneEnabled=K(pe)instanceof pe&&pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof Po&&r.code!==ni.Redirect&&r.code!==ni.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gs)this.navigated=!0;else if(r instanceof yd){let c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||HB(o.source)};this.scheduleNavigation(c,fd,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}JB(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let a={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let f=Y({},o);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(a.state=f)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(pb),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:a,fragment:c,queryParamsHandling:u,preserveFragment:f}=r,m=f?this.currentUrlTree.fragment:c,v=null;switch(u){case"merge":v=Y(Y({},this.currentUrlTree.queryParams),a);break;case"preserve":v=this.currentUrlTree.queryParams;break;default:v=a||null}v!==null&&(v=this.removeEmptyProps(v));let w;try{let E=o?o.snapshot:this.routerState.snapshot.root;w=uS(E)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),w=this.currentUrlTree.root}return dS(w,i,v,m??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=jc(i)?i:this.parseUrl(i),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,fd,null,r)}navigate(i,r={skipLocationChange:!1}){return XB(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=Y({},QB):r===!1?o=Y({},YB):o=r,jc(i))return KT(this.currentUrlTree,i,o);let a=this.parseUrl(i);return KT(this.currentUrlTree,a,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,a])=>(a!=null&&(r[o]=a),r),{})}scheduleNavigation(i,r,o,a,c){if(this.disposed)return Promise.resolve(!1);let u,f,m;c?(u=c.resolve,f=c.reject,m=c.promise):m=new Promise((w,E)=>{u=w,f=E});let v=this.pendingTasks.add();return ZB(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(v))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:a,resolve:u,reject:f,promise:m,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),m.catch(w=>Promise.reject(w))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function XB(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new be(4008,!1)}function JB(t){return!(t instanceof vd)&&!(t instanceof yd)}var ej=new re("");function SS(t,...e){return yp([{provide:_b,multi:!0,useValue:t},[],{provide:zc,useFactory:tj,deps:[om]},{provide:vy,multi:!0,useFactory:nj},e.map(n=>n.\u0275providers)])}function tj(t){return t.routerState.root}function nj(){let t=K(un);return e=>{let n=t.get(js);if(e!==n.components[0])return;let i=t.get(om),r=t.get(ij);t.get(rj)===1&&i.initialNavigation(),t.get(oj,null,Ve.Optional)?.setUpPreloading(),t.get(ej,null,Ve.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var ij=new re("",{factory:()=>new xe}),rj=new re("",{providedIn:"root",factory:()=>1});var oj=new re("");var AS=[];var aj="firebase",cj="10.12.2";vo(aj,cj,"app");var xd=new zr("ANGULARFIRE2_VERSION");var lj=(t,e)=>{let n=e?[e]:BE(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},Zs=class{constructor(){return lj(uj)}},uj="app-check";function yb(){}var sm=class{zone;delegate;constructor(e,n=v_){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,n,i)}},bb=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yb,{},yb,yb)),n.pipe($t({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},am=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new sm(Zone.current)),this.insideAngular=n.run(()=>new sm(Zone.current,ir)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(V(pe))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dj(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function qn(t){return hj(dj())(t)}function hj(t){return function(n){return n=n.lift(new bb(t.ngZone)),n.pipe(Ri(t.outsideAngular),li(t.insideAngular))}}var fj="firebase",pj="10.12.2";Jn.registerVersion(fj,pj,"app-compat");var mj=["ngOnDestroy"],PS=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(mj.indexOf(o)>-1)return()=>{};let a=e.toPromise().then(c=>{let u=c?.[o];return typeof u=="function"?u.bind(c):u?.then?u.then(f=>n.run(()=>f)):n.run(()=>u)});return new Proxy(()=>{},{get:(c,u)=>a[u],apply:(c,u,f)=>a.then(m=>{let v=m?.(...f);return i?.spy?.apply&&i.spy.apply(o,f,v),v})})})});var cm=class{constructor(e){return e}},Hc=new re("angularfire2.app.options"),qc=new re("angularfire2.app.name");function Td(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let a=Jn.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>Jn.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(a.options)){let c=!!module.hot;gj("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new cm(a)}var gj=(t,...e)=>{by()&&typeof console<"u"&&console[t](...e)},_j={provide:cm,useFactory:Td,deps:[Hc,pe,[new vp,qc]]},kS=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:Hc,useValue:n},{provide:qc,useValue:i}]}}constructor(n){Jn.registerVersion("angularfire",xd.full,"core"),Jn.registerVersion("angularfire",xd.full,"app-compat"),Jn.registerVersion("angular",bT.full,n.toString())}static \u0275fac=function(i){return new(i||t)(V(Nn))};static \u0275mod=ct({type:t});static \u0275inj=at({providers:[_j]})}return t})();function lm(t,e,n,i,r){let[,o,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===t)||[];if(o)return vj(r,a)||(RS("error",`${e} was already initialized on the ${n} Firebase App with different settings.${yj?" You may need to reload as Firebase is not HMR aware.":""}`),RS("warn",{is:r,was:a})),o;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([t,c,r]),c}}function vj(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var yj=typeof module<"u"&&!!module.hot,RS=(t,...e)=>{by()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var bj={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},NS={providers:[SS(AS),Ov(kS.initializeApp(bj))]};var zt=Qk(LS());var Ib;try{Ib=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ib=!1}var Pt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?VT(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ib)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(V(Nn))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Sd;function wj(){if(Sd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Sd=!0}))}finally{Sd=Sd||!1}return Sd}function Gc(t){return wj()?t:!!t.capture}var Ks;function FS(){if(Ks==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Ks=!1,Ks;if("scrollBehavior"in document.documentElement.style)Ks=!0;else{let t=Element.prototype.scrollTo;t?Ks=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Ks=!1}}return Ks}var wb;function Ij(){if(wb==null){let t=typeof document<"u"?document.head:null;wb=!!(t&&(t.createShadowRoot||t.attachShadow))}return wb}function VS(t){if(Ij()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function yi(t){return t.composedPath?t.composedPath()[0]:t.target}function Ad(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Wc(t){return Array.isArray(t)?t:[t]}function Ft(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Gr(t){return t instanceof Et?t.nativeElement:t}var BS=new Set,Ys,Ej=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Dj}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Cj(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(V(Pt),V(ed,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Cj(t,e){if(!BS.has(t))try{Ys||(Ys=document.createElement("style"),e&&Ys.setAttribute("nonce",e),Ys.setAttribute("type","text/css"),document.head.appendChild(Ys)),Ys.sheet&&(Ys.sheet.insertRule(`@media ${t} {body{ }}`,0),BS.add(t))}catch(n){console.error(n)}}function Dj(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var dm=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new xe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return jS(Wc(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=jS(Wc(i)).map(c=>this._registerQuery(c).observable),a=ac(o);return a=yo(a.pipe(ui(1)),a.pipe(Pu(1),Of(0))),a.pipe(fe(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:m})=>{u.matches=u.matches||f,u.breakpoints[m]=f}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),a={observable:new Se(c=>{let u=f=>this._zone.run(()=>c.next(f));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(or(r),fe(({matches:c})=>({query:i,matches:c})),hi(this._destroySubject)),mql:r};return this._queries.set(i,a),a}};e.\u0275fac=function(r){return new(r||e)(V(Ej),V(pe))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jS(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var zS={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function Cb(t){return t.buttons===0||t.detail===0}function Db(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Tj=new re("cdk-input-modality-detector-options"),Sj={ignoreKeys:[18,17,224,91,16]},HS=650,Zc=Gc({passive:!0,capture:!0}),Aj=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,a){this._platform=i,this._mostRecentTarget=null,this._modality=new Qt(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(u=>u===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=yi(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<HS||(this._modality.next(Cb(c)?"keyboard":"mouse"),this._mostRecentTarget=yi(c))},this._onTouchstart=c=>{if(Db(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=yi(c)},this._options=Y(Y({},Sj),a),this.modalityDetected=this._modality.pipe(Pu(1)),this.modalityChanged=this.modalityDetected.pipe(lc()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Zc),o.addEventListener("mousedown",this._onMousedown,Zc),o.addEventListener("touchstart",this._onTouchstart,Zc)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Zc),document.removeEventListener("mousedown",this._onMousedown,Zc),document.removeEventListener("touchstart",this._onTouchstart,Zc))}};e.\u0275fac=function(r){return new(r||e)(V(Pt),V(pe),V(je),V(Tj,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mj=new re("liveAnnouncerElement",{providedIn:"root",factory:Rj});function Rj(){return null}var Pj=new re("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),kj=0,qS=(()=>{let e=class e{constructor(i,r,o,a){this._ngZone=r,this._defaultOptions=a,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,a,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[a,c]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=o&&o.politeness?o.politeness:"polite"),c==null&&o&&(c=o.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(u=>this._currentResolve=u)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${kj++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}};e.\u0275fac=function(r){return new(r||e)(V(Mj,8),V(pe),V(je),V(Pj,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var fm=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(fm||{}),Nj=new re("cdk-focus-monitor-default-options"),hm=Gc({passive:!0,capture:!0}),GS=(()=>{let e=class e{constructor(i,r,o,a,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new xe,this._rootNodeFocusAndBlurListener=u=>{let f=yi(u);for(let m=f;m;m=m.parentElement)u.type==="focus"?this._onFocus(u,m):this._onBlur(u,m)},this._document=a,this._detectionMode=c?.detectionMode||fm.IMMEDIATE}monitor(i,r=!1){let o=Gr(i);if(!this._platform.isBrowser||o.nodeType!==1)return le();let a=VS(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;let u={checkChildren:r,subject:new xe,rootNode:a};return this._elementInfo.set(o,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(i){let r=Gr(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let a=Gr(i),c=this._getDocument().activeElement;a===c?this._getClosestElementsInfo(a).forEach(([u,f])=>this._originChanged(u,r,f)):(this._setOrigin(r),typeof a.focus=="function"&&a.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===fm.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===fm.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?HS:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),a=yi(i);!o||!o.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,hm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,hm)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(hi(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,a)=>{(a===i||o.checkChildren&&a.contains(i))&&r.push([a,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let a=i.labels;if(a){for(let c=0;c<a.length;c++)if(a[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(V(pe),V(Pt),V(Aj),V(je,8),V(Nj,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Xs=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(Xs||{}),US="cdk-high-contrast-black-on-white",$S="cdk-high-contrast-white-on-black",Eb="cdk-high-contrast-active",WS=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=K(dm).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Xs.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,a=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Xs.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Xs.BLACK_ON_WHITE}return Xs.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Eb,US,$S),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===Xs.BLACK_ON_WHITE?i.add(Eb,US):r===Xs.WHITE_ON_BLACK&&i.add(Eb,$S)}}};e.\u0275fac=function(r){return new(r||e)(V(Pt),V(je))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Oj=new re("cdk-dir-doc",{providedIn:"root",factory:Lj});function Lj(){return K(je)}var Fj=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function Vj(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Fj.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var KS=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new it,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=Vj(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(V(Oj,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var No=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({});let t=e;return t})();function zj(){return!0}var Uj=new re("mat-sanity-checks",{providedIn:"root",factory:zj}),Oo=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Ad()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(V(WS),V(Uj,8),V(je))},e.\u0275mod=ct({type:e}),e.\u0275inj=at({imports:[No,No]});let t=e;return t})();var bi=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(bi||{}),Ab=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=bi.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},QS=Gc({passive:!0,capture:!0}),Mb=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=yi(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let a=o.get(i);a?a.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,QS)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,QS)))}},YS={enterDuration:225,exitDuration:150},$j=800,XS=Gc({passive:!0,capture:!0}),JS=["mousedown","touchstart"],eA=["mouseup","mouseleave","touchend","touchcancel"],Md=class Md{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Gr(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=Y(Y({},YS),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let a=i.radius||Hj(e,n,r),c=e-r.left,u=n-r.top,f=o.enterDuration,m=document.createElement("div");m.classList.add("mat-ripple-element"),m.style.left=`${c-a}px`,m.style.top=`${u-a}px`,m.style.height=`${a*2}px`,m.style.width=`${a*2}px`,i.color!=null&&(m.style.backgroundColor=i.color),m.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(m);let v=window.getComputedStyle(m),w=v.transitionProperty,E=v.transitionDuration,M=w==="none"||E==="0s"||E==="0s, 0s"||r.width===0&&r.height===0,k=new Ab(this,m,i,M);m.style.transform="scale3d(1, 1, 1)",k.state=bi.FADING_IN,i.persistent||(this._mostRecentTransientRipple=k);let F=null;return!M&&(f||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let q=()=>this._finishRippleTransition(k),te=()=>this._destroyRipple(k);m.addEventListener("transitionend",q),m.addEventListener("transitioncancel",te),F={onTransitionEnd:q,onTransitionCancel:te}}),this._activeRipples.set(k,F),(M||!f)&&this._finishRippleTransition(k),k}fadeOutRipple(e){if(e.state===bi.FADING_OUT||e.state===bi.HIDDEN)return;let n=e.element,i=Y(Y({},YS),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=bi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Gr(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,JS.forEach(i=>{Md._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{eA.forEach(n=>{this._triggerElement.addEventListener(n,this,XS)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===bi.FADING_IN?this._startFadeOutTransition(e):e.state===bi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=bi.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=bi.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=Cb(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+$j;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Db(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===bi.VISIBLE||e.config.terminateOnPointerUp&&e.state===bi.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(JS.forEach(n=>Md._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(eA.forEach(n=>e.removeEventListener(n,this,XS)),this._pointerUpEventsRegistered=!1))}};Md._eventManager=new Mb;var Rb=Md;function Hj(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var rA=new re("mat-ripple-global-options"),qj=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,a,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new Rb(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Y(Y(Y({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,Y(Y({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,Y(Y({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(ke(Et),ke(pe),ke(Pt),ke(rA,8),ke(Vs,8))},e.\u0275dir=ln({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&Bs("mat-ripple-unbounded",o.unbounded)},inputs:{color:[pt.None,"matRippleColor","color"],unbounded:[pt.None,"matRippleUnbounded","unbounded"],centered:[pt.None,"matRippleCentered","centered"],radius:[pt.None,"matRippleRadius","radius"],animation:[pt.None,"matRippleAnimation","animation"],disabled:[pt.None,"matRippleDisabled","disabled"],trigger:[pt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),oA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({imports:[Oo,Oo]});let t=e;return t})();var tA={capture:!0},nA=["focus","mousedown","mouseenter","touchstart"],Tb="mat-ripple-loader-uninitialized",Sb="mat-ripple-loader-class-name",iA="mat-ripple-loader-centered",pm="mat-ripple-loader-disabled",sA=(()=>{let e=class e{constructor(){this._document=K(je,{optional:!0}),this._animationMode=K(Vs,{optional:!0}),this._globalRippleOptions=K(rA,{optional:!0}),this._platform=K(Pt),this._ngZone=K(pe),this._hosts=new Map,this._onInteraction=i=>{let r=yi(i);if(r instanceof HTMLElement){let o=r.closest(`[${Tb}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}},this._ngZone.runOutsideAngular(()=>{for(let i of nA)this._document?.addEventListener(i,this._onInteraction,tA)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of nA)this._document?.removeEventListener(r,this._onInteraction,tA)}configureRipple(i,r){i.setAttribute(Tb,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute(Sb))&&i.setAttribute(Sb,r.className||""),r.centered&&i.setAttribute(iA,""),r.disabled&&i.setAttribute(pm,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(pm,""):i.removeAttribute(pm)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(Sb)),i.append(o);let a=new qj(new Et(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=i,a.centered=i.hasAttribute(iA),a.disabled=i.hasAttribute(pm),this.attachRipple(i,a),a}attachRipple(i,r){i.removeAttribute(Tb),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Gj=["mat-button",""],Wj=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Zj=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Kj=new re("MAT_BUTTON_CONFIG");var Qj=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Yj=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,a){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=a,this._focusMonitor=K(GS),this._rippleLoader=K(sA),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=K(Kj,{optional:!0}),u=i.nativeElement,f=u.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:m,mdcClasses:v}of Qj)u.hasAttribute(m)&&f.add(...v)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){sy()},e.\u0275dir=ln({type:e,inputs:{color:"color",disableRipple:[pt.HasDecoratorInputTransform,"disableRipple","disableRipple",pr],disabled:[pt.HasDecoratorInputTransform,"disabled","disabled",pr],ariaDisabled:[pt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",pr],disabledInteractive:[pt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",pr]},features:[Ao]});let t=e;return t})();var aA=(()=>{let e=class e extends Yj{constructor(i,r,o,a){super(i,r,o,a)}};e.\u0275fac=function(r){return new(r||e)(ke(Et),ke(Pt),ke(pe),ke(Vs,8))},e.\u0275cmp=Jt({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Mo("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),sT(o.color?"mat-"+o.color:""),Bs("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[So,nn],attrs:Gj,ngContentSelectors:Zj,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(Op(Wj),vt(0,"span",0),Mc(1),ve(2,"span",1),Mc(3,1),ye(),Mc(4,2),vt(5,"span",2)(6,"span",3)),r&2&&Bs("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var cA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({imports:[Oo,oA,Oo]});let t=e;return t})();var Kc=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(Kc||{});function lA(t,e){return{type:Kc.Trigger,name:t,definitions:e,options:{}}}function Pb(t,e=null){return{type:Kc.Animate,styles:e,timings:t}}function mm(t){return{type:Kc.Style,styles:t,offset:null}}function kb(t,e,n){return{type:Kc.State,name:t,styles:e,options:n}}function Nb(t,e,n=null){return{type:Kc.Transition,expr:t,animation:e,options:n}}var Rd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Qc=class extends Rd{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Yc=class extends Rd{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Ob=class extends Rd{constructor(e){super(),this.element=e instanceof Et?e.nativeElement:e}},Xc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Qc)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Yc)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Ob)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var gm=class extends Xc{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");c.parentNode.insertBefore(u,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||un.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Lb=(()=>{let e=class e extends Xc{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new it,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");a.setAttachedHost(this),c.parentNode.insertBefore(u,c),this._getRootNode().appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,a=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(a,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(ke(To),ke(Vi),ke(je))},e.\u0275dir=ln({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[pt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[So]});let t=e;return t})();var _m=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({});let t=e;return t})();var Xj=20,dA=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new xe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=Xj){return this._platform.isBrowser?new Se(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(Nf(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):le()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Mt(a=>!a||o.indexOf(a)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,a)=>{this._scrollableContainsElement(a,i)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=Gr(r),a=i.getElementRef().nativeElement;do if(o==a)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Su(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(V(pe),V(Pt),V(je,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Jj=20,Fb=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new xe,this._changeListener=a=>{this._change.next(a)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,a=o.getBoundingClientRect(),c=-a.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,u=-a.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:c,left:u}}change(i=Jj){return i>0?this._change.pipe(Nf(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(V(Pt),V(pe),V(je,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({});let t=e;return t})(),Vb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({imports:[No,uA,No,uA]});let t=e;return t})();var hA=FS(),Bb=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Ft(-this._previousScrollPosition.left),e.style.top=Ft(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),hA&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),hA&&(i.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var jb=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Mt(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},vm=class{enable(){}disable(){}attach(){}};function zb(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,a=t.left>n.right;return i||r||o||a})}function fA(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,a=t.right>n.right;return i||r||o||a})}var Ub=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();zb(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},tz=(()=>{let e=class e{constructor(i,r,o,a){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new vm,this.close=c=>new jb(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Bb(this._viewportRuler,this._document),this.reposition=c=>new Ub(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}};e.\u0275fac=function(r){return new(r||e)(V(dA),V(Fb),V(pe),V(je))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pd=class{constructor(e){if(this.scrollStrategy=new vm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var $b=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var vA=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(V(je))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nz=(()=>{let e=class e extends vA{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){let u=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(V(je),V(pe,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),iz=(()=>{let e=class e extends vA{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=yi(a)},this._clickListener=a=>{let c=yi(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let f=this._attachedOverlays.slice();for(let m=f.length-1;m>-1;m--){let v=f[m];if(v._outsidePointerEvents.observers.length<1||!v.hasAttached())continue;if(v.overlayElement.contains(c)||v.overlayElement.contains(u))break;let w=v._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>w.next(a)):w.next(a)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(V(je),V(Pt),V(pe,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yA=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Ad()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let a=0;a<o.length;a++)o[a].remove()}let r=this._document.createElement("div");r.classList.add(i),Ad()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(V(je),V(Pt))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hb=class{constructor(e,n,i,r,o,a,c,u,f,m=!1,v){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=c,this._location=u,this._outsideClickDispatcher=f,this._animationsDisabled=m,this._injector=v,this._backdropElement=null,this._backdropClick=new xe,this._attachments=new xe,this._detachments=new xe,this._locationChanges=ft.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._backdropTransitionendHandler=w=>{this._disposeBackdrop(w.target)},this._keydownEvents=new xe,this._outsidePointerEvents=new xe,this._renders=new xe,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=od(()=>hy(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),id(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Y(Y({},this._config),e),this._updateElementSize()}setDirection(e){this._config=ht(Y({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Ft(this._config.width),e.height=Ft(this._config.height),e.minWidth=Ft(this._config.minWidth),e.minHeight=Ft(this._config.minHeight),e.maxWidth=Ft(this._config.maxWidth),e.maxHeight=Ft(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=Wc(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(hi(Au(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},pA="cdk-overlay-connected-position-bounding-box",rz=/([A-Za-z%]+)$/,qb=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new xe,this._resizeSubscription=ft.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(pA),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],a;for(let c of this._preferredPositions){let u=this._getOriginPoint(e,r,c),f=this._getOverlayPoint(u,n,c),m=this._getOverlayFit(f,n,i,c);if(m.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,u);return}if(this._canFitWithFlexibleDimensions(m,f,i)){o.push({position:c,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,c)});continue}(!a||a.overlayFit.visibleArea<m.visibleArea)&&(a={overlayFit:m,overlayPoint:f,originPoint:u,position:c,overlayRect:n})}if(o.length){let c=null,u=-1;for(let f of o){let m=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);m>u&&(u=m,c=f)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Js(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(pA),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let a=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?a:c}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=gA(n),{x:a,y:c}=e,u=this._getOffset(r,"x"),f=this._getOffset(r,"y");u&&(a+=u),f&&(c+=f);let m=0-a,v=a+o.width-i.width,w=0-c,E=c+o.height-i.height,M=this._subtractOverflows(o.width,m,v),k=this._subtractOverflows(o.height,w,E),F=M*k;return{visibleArea:F,isCompletelyWithinViewport:o.width*o.height===F,fitsInViewportVertically:k===o.height,fitsInViewportHorizontally:M==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,a=mA(this._overlayRef.getConfig().minHeight),c=mA(this._overlayRef.getConfig().minWidth),u=e.fitsInViewportVertically||a!=null&&a<=r,f=e.fitsInViewportHorizontally||c!=null&&c<=o;return u&&f}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=gA(n),o=this._viewportRect,a=Math.max(e.x+r.width-o.width,0),c=Math.max(e.y+r.height-o.height,0),u=Math.max(o.top-i.top-e.y,0),f=Math.max(o.left-i.left-e.x,0),m=0,v=0;return r.width<=o.width?m=f||-a:m=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?v=u||-c:v=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:m,y:v},{x:e.x+m,y:e.y+v}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!oz(this._lastScrollVisibility,i)){let r=new $b(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,a,c;if(n.overlayY==="top")a=e.y,o=i.height-a+this._viewportMargin;else if(n.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,o=i.height-c+this._viewportMargin;else{let E=Math.min(i.bottom-e.y+i.top,e.y),M=this._lastBoundingBoxSize.height;o=E*2,a=e.y-E,o>M&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-M/2)}let u=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,f=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,m,v,w;if(f)w=i.width-e.x+this._viewportMargin*2,m=e.x-this._viewportMargin;else if(u)v=e.x,m=i.right-e.x;else{let E=Math.min(i.right-e.x+i.left,e.x),M=this._lastBoundingBoxSize.width;m=E*2,v=e.x-E,m>M&&!this._isInitialRender&&!this._growAfterOpen&&(v=e.x-M/2)}return{top:a,left:v,bottom:c,right:w,width:m,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=Ft(i.height),r.top=Ft(i.top),r.bottom=Ft(i.bottom),r.width=Ft(i.width),r.left=Ft(i.left),r.right=Ft(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Ft(o)),a&&(r.maxWidth=Ft(a))}this._lastBoundingBoxSize=i,Js(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Js(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Js(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let m=this._viewportRuler.getViewportScrollPosition();Js(i,this._getExactOverlayY(n,e,m)),Js(i,this._getExactOverlayX(n,e,m))}else i.position="static";let c="",u=this._getOffset(n,"x"),f=this._getOffset(n,"y");u&&(c+=`translateX(${u}px) `),f&&(c+=`translateY(${f}px)`),i.transform=c.trim(),a.maxHeight&&(r?i.maxHeight=Ft(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=Ft(a.maxWidth):o&&(i.maxWidth="")),Js(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(o.y+this._overlayRect.height)}px`}else r.top=Ft(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let a;if(this._isRtl()?a=e.overlayX==="end"?"left":"right":a=e.overlayX==="end"?"right":"left",a==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(o.x+this._overlayRect.width)}px`}else r.left=Ft(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:fA(e,i),isOriginOutsideView:zb(e,i),isOverlayClipped:fA(n,i),isOverlayOutsideView:zb(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Wc(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Et)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function Js(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function mA(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(rz);return!n||n==="px"?parseFloat(e):null}return t||null}function gA(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function oz(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var _A="cdk-global-overlay-wrapper",Gb=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(_A),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:c}=i,u=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),f=(o==="100%"||o==="100vh")&&(!c||c==="100%"||c==="100vh"),m=this._xPosition,v=this._xOffset,w=this._overlayRef.getConfig().direction==="rtl",E="",M="",k="";u?k="flex-start":m==="center"?(k="center",w?M=v:E=v):w?m==="left"||m==="end"?(k="flex-end",E=v):(m==="right"||m==="start")&&(k="flex-start",M=v):m==="left"||m==="start"?(k="flex-start",E=v):(m==="right"||m==="end")&&(k="flex-end",M=v),e.position=this._cssPosition,e.marginLeft=u?"0":E,e.marginTop=f?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":M,n.justifyContent=k,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(_A),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},sz=(()=>{let e=class e{constructor(i,r,o,a){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=a}global(){return new Gb}flexibleConnectedTo(i){return new qb(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(V(Fb),V(je),V(Pt),V(yA))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),az=0,kd=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,m,v,w,E,M){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=u,this._ngZone=f,this._document=m,this._directionality=v,this._location=w,this._outsideClickDispatcher=E,this._animationsModuleType=M}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),a=this._createPortalOutlet(o),c=new Pd(i);return c.direction=c.direction||this._directionality.value,new Hb(a,r,o,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get($n))}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${az++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(js)),new gm(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(V(tz),V(yA),V(To),V(sz),V(nz),V(un),V(pe),V(je),V(KS),V(Us),V(iz),V(Vs,8))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var cz=new re("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=K(kd);return()=>t.scrollStrategies.reposition()}});function lz(t){return()=>t.scrollStrategies.reposition()}var uz={provide:cz,deps:[kd],useFactory:lz},bA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({providers:[kd,uz],imports:[No,_m,Vb,Vb]});let t=e;return t})();function hz(t,e){if(t&1){let n=hr();ve(0,"div",1)(1,"button",2),en("click",function(){gi(n);let r=yt();return _i(r.action())}),Ye(2),ye()()}if(t&2){let n=yt();_e(2),tn(" ",n.data.action," ")}}var fz=["label"];function pz(t,e){}var mz=Math.pow(2,31)-1,Nd=class{constructor(e,n){this._overlayRef=n,this._afterDismissed=new xe,this._afterOpened=new xe,this._onAction=new xe,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,mz))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},wA=new re("MatSnackBarData"),Jc=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},gz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let t=e;return t})(),_z=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let t=e;return t})(),vz=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ln({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let t=e;return t})(),IA=(()=>{let e=class e{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};e.\u0275fac=function(r){return new(r||e)(ke(Nd),ke(wA))},e.\u0275cmp=Jt({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[nn],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(ve(0,"div",0),Ye(1),ye(),Xt(2,hz,3,1,"div",1)),r&2&&(_e(),tn(" ",o.data.message,`
`),_e(),Hn(2,o.hasAction?2:-1))},dependencies:[aA,gz,_z,vz],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let t=e;return t})(),yz={snackBarState:lA("state",[kb("void, hidden",mm({transform:"scale(0.8)",opacity:0})),kb("visible",mm({transform:"scale(1)",opacity:1})),Nb("* => visible",Pb("150ms cubic-bezier(0, 0, 0.2, 1)")),Nb("* => void, * => hidden",Pb("75ms cubic-bezier(0.4, 0.0, 1, 1)",mm({opacity:0})))])},bz=0,wz=(()=>{let e=class e extends Xc{constructor(i,r,o,a,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=c,this._document=K(je),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new xe,this._onExit=new xe,this._onEnter=new xe,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${bz++}`,this.attachDomPortal=u=>{this._assertNotAttached();let f=this._portalOutlet.attachDomPortal(u);return this._afterPortalAttached(),f},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:o}=i;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,a="mdc-snackbar__label";o.classList.toggle(a,!o.querySelector(`.${a}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");this._trackedModals.add(a),c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?i.setAttribute("aria-owns",o):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};e.\u0275fac=function(r){return new(r||e)(ke(pe),ke(Et),ke(fr),ke(Pt),ke(Jc))},e.\u0275cmp=Jt({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(rd(Lb,7),rd(fz,7)),r&2){let a;Rc(a=Pc())&&(o._portalOutlet=a.first),Rc(a=Pc())&&(o._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&gy("@state.done",function(c){return o.onAnimationEnd(c)}),r&2&&my("@state",o._animationState)},standalone:!0,features:[So,nn],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(ve(0,"div",1)(1,"div",2,0)(3,"div",3),Xt(4,pz,0,0,"ng-template",4),ye(),vt(5,"div"),ye()()),r&2&&(_e(5),Mo("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[Lb],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[yz.snackBarState]}});let t=e;return t})();function Iz(){return new Jc}var Ez=new re("mat-snack-bar-default-options",{providedIn:"root",factory:Iz}),Cz=(()=>{let e=class e{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,o,a,c,u){this._overlay=i,this._live=r,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=c,this._defaultConfig=u,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=IA,this.snackBarContainerComponent=wz,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",o){let a=Y(Y({},this._defaultConfig),o);return a.data={message:i,action:r},a.announcementMessage===i&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,a=un.create({parent:o||this._injector,providers:[{provide:Jc,useValue:r}]}),c=new Qc(this.snackBarContainerComponent,r.viewContainerRef,a),u=i.attach(c);return u.instance.snackBarConfig=r,u.instance}_attach(i,r){let o=Y(Y(Y({},new Jc),this._defaultConfig),r),a=this._createOverlay(o),c=this._attachSnackBarContainer(a,o),u=new Nd(c,a);if(i instanceof Li){let f=new Yc(i,null,{$implicit:o.data,snackBarRef:u});u.instance=c.attachTemplatePortal(f)}else{let f=this._createInjector(o,u),m=new Qc(i,void 0,f),v=c.attachComponentPortal(m);u.instance=v.instance}return this._breakpointObserver.observe(zS.HandsetPortrait).pipe(hi(a.detachments())).subscribe(f=>{a.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),o.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(u,o),this._openedSnackBarRef=u,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new Pd;r.direction=i.direction;let o=this._overlay.position().global(),a=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!a||i.horizontalPosition==="end"&&a,u=!c&&i.horizontalPosition!=="center";return c?o.left("0"):u?o.right("0"):o.centerHorizontally(),i.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(i,r){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector;return un.create({parent:o||this._injector,providers:[{provide:Nd,useValue:r},{provide:wA,useValue:i.data}]})}};e.\u0275fac=function(r){return new(r||e)(V(kd),V(qS),V(un),V(dm),V(e,12),V(Ez))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var EA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ct({type:e}),e.\u0275inj=at({providers:[Cz],imports:[bA,_m,cA,Oo,IA,Oo]});let t=e;return t})();var Tz=new Map,Sz={activated:!1,tokenObservers:[]},Az={initialized:!1,enabled:!1};function zi(t){return Tz.get(t)||Object.assign({},Sz)}function SA(){return Az}var Mz="https://content-firebaseappcheck.googleapis.com/v1";var Rz="exchangeDebugToken",CA={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},XQ=24*60*60*1e3;var Zb=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return U(this,null,function*(){this.stop();try{this.pending=new e_,this.pending.promise.catch(n=>{}),yield Pz(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new e_,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function Pz(t){return new Promise(e=>{setTimeout(e,t)})}var kz={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Lo=new FE("appCheck","AppCheck",kz);function AA(t){if(!zi(t).activated)throw Lo.create("use-before-activation",{appName:t.name})}function MA(i,r){return U(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let E=yield a.getHeartbeatsHeader();E&&(o["X-Firebase-Client"]=E)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(E){throw Lo.create("fetch-network-error",{originalErrorMessage:E?.message})}if(u.status!==200)throw Lo.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(E){throw Lo.create("fetch-parse-error",{originalErrorMessage:E?.message})}let m=f.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Lo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let v=Number(m[1])*1e3,w=Date.now();return{token:f.token,expireTimeMillis:w+v,issuedAtTimeMillis:w}})}function RA(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${Mz}/projects/${n}/apps/${i}:${Rz}?key=${r}`,body:{debug_token:e}}}var Nz="firebase-app-check-database",Oz=1,Kb="firebase-app-check-store";var ym=null;function Lz(){return ym||(ym=new Promise((t,e)=>{try{let n=indexedDB.open(Nz,Oz);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Lo.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Kb,{keyPath:"compositeKey"})}}}catch(n){e(Lo.create("storage-open",{originalErrorMessage:n?.message}))}}),ym)}function Fz(t,e){return Vz(Bz(t),e)}function Vz(t,e){return U(this,null,function*(){let i=(yield Lz()).transaction(Kb,"readwrite"),o=i.objectStore(Kb).put({compositeKey:t,value:e});return new Promise((a,c)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;c(Lo.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function Bz(t){return`${t.options.appId}-${t.name}`}var Qb=new uf("@firebase/app-check");function Wb(t,e){return lf()?Fz(t,e).catch(n=>{Qb.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function PA(){return SA().enabled}function kA(){return U(this,null,function*(){let t=SA();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var jz={error:"UNKNOWN_ERROR"};function zz(t){return NE.encodeString(JSON.stringify(t),!1)}function Yb(t,e=!1){return U(this,null,function*(){let n=t.app;AA(n);let i=zi(n),r=i.token,o;if(r&&!Od(r)&&(i.token=void 0,r=void 0),!r){let u=yield i.cachedTokenPromise;u&&(Od(u)?r=u:yield Wb(n,void 0))}if(!e&&r&&Od(r))return{token:r.token};let a=!1;if(PA()){i.exchangeTokenPromise||(i.exchangeTokenPromise=MA(RA(n,yield kA()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield Wb(n,u),i.token=u,{token:u.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),r=yield zi(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Qb.warn(u.message):Qb.error(u),o=u}let c;return r?o?Od(r)?c={token:r.token,internalError:o}:c=xA(o):(c={token:r.token},i.token=r,yield Wb(n,r)):c=xA(o),a&&qz(n,c),c})}function Uz(t){return U(this,null,function*(){let e=t.app;AA(e);let{provider:n}=zi(e);if(PA()){let i=yield kA(),{token:r}=yield MA(RA(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function $z(t,e,n,i){let{app:r}=t,o=zi(r),a={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&Od(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),DA(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>DA(t))}function NA(t,e){let n=zi(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function DA(t){let{app:e}=t,n=zi(e),i=n.tokenRefresher;i||(i=Hz(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function Hz(t){let{app:e}=t;return new Zb(()=>U(this,null,function*(){let n=zi(e),i;if(n.token?i=yield Yb(t,!0):i=yield Yb(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=zi(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},CA.RETRIAL_MIN_WAIT,CA.RETRIAL_MAX_WAIT)}function qz(t,e){let n=zi(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Od(t){return t.expireTimeMillis-Date.now()>0}function xA(t){return{token:zz(jz),error:t}}var Xb=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=zi(this.app);for(let n of e)NA(this.app,n.next);return Promise.resolve()}};function Gz(t,e){return new Xb(t,e)}function Wz(t){return{getToken:e=>Yb(t,e),getLimitedUseToken:()=>Uz(t),addTokenListener:e=>$z(t,"INTERNAL",e),removeTokenListener:e=>NA(t.app,e)}}var Zz="@firebase/app-check",Kz="0.8.4";var Qz="app-check",TA="app-check-internal";function Yz(){Eu(new ws(Qz,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Gz(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(TA).initialize()})),Eu(new ws(TA,t=>{let e=t.getProvider("app-check").getImmediate();return Wz(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),vo(Zz,Kz)}Yz();var Xz=["localhost","0.0.0.0","127.0.0.1"],uY=typeof window<"u"&&Xz.includes(window.location.hostname);var Jb=new re("angularfire2.auth.use-emulator"),ew=new re("angularfire2.auth.settings"),tw=new re("angularfire2.auth.tenant-id"),nw=new re("angularfire2.auth.langugage-code"),iw=new re("angularfire2.auth.use-device-language"),rw=new re("angularfire.auth.persistence"),ow=(t,e,n,i,r,o,a,c)=>lm(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),i&&(u.tenantId=i),u.languageCode=r,o&&u.useDeviceLanguage(),a)for(let[f,m]of Object.entries(a))u.settings[f]=m;return c&&u.setPersistence(c),u},[n,i,r,o,a,c]),bm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,a,c,u,f,m,v,w,E){let M=new xe,k=le(void 0).pipe(li(a.outsideAngular),_t(()=>o.runOutsideAngular(()=>import("./chunk-PY5DTK2U.js"))),fe(()=>Td(n,o,i)),fe(F=>ow(F,o,c,f,m,v,u,w)),Ru({bufferSize:1,refCount:!1}));if($s(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=le(null);else{k.pipe(di()).subscribe();let F=k.pipe(_t(Z=>Z.getRedirectResult().then(oe=>oe,()=>null)),qn,Ru({bufferSize:1,refCount:!1})),q=k.pipe(_t(Z=>new Se(oe=>({unsubscribe:o.runOutsideAngular(()=>Z.onAuthStateChanged(de=>oe.next(de),de=>oe.error(de),()=>oe.complete()))})))),te=k.pipe(_t(Z=>new Se(oe=>({unsubscribe:o.runOutsideAngular(()=>Z.onIdTokenChanged(de=>oe.next(de),de=>oe.error(de),()=>oe.complete()))}))));this.authState=F.pipe(Ff(q),Ri(a.outsideAngular),li(a.insideAngular)),this.user=F.pipe(Ff(te),Ri(a.outsideAngular),li(a.insideAngular)),this.idToken=this.user.pipe(_t(Z=>Z?tt(Z.getIdToken()):le(null))),this.idTokenResult=this.user.pipe(_t(Z=>Z?tt(Z.getIdTokenResult()):le(null))),this.credential=Au(F,M,this.authState.pipe(Mt(Z=>!Z))).pipe(fe(Z=>Z?.user?Z:null),Ri(a.outsideAngular),li(a.insideAngular))}return PS(this,k,o,{spy:{apply:(F,q,te)=>{(F.startsWith("signIn")||F.startsWith("createUser"))&&te.then(Z=>M.next(Z))}}})}static \u0275fac=function(i){return new(i||t)(V(Hc),V(qc,8),V(Nn),V(pe),V(am),V(Jb,8),V(ew,8),V(tw,8),V(nw,8),V(iw,8),V(rw,8),V(Zs,8))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var FA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VA={};var Fo,sw;(function(){var t;function e(S,C){function D(){}D.prototype=C.prototype,S.D=C.prototype,S.prototype=new D,S.prototype.constructor=S,S.C=function(A,R,N){for(var T=Array(arguments.length-2),xt=2;xt<arguments.length;xt++)T[xt-2]=arguments[xt];return C.prototype[R].apply(A,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,C,D){D||(D=0);var A=Array(16);if(typeof C=="string")for(var R=0;16>R;++R)A[R]=C.charCodeAt(D++)|C.charCodeAt(D++)<<8|C.charCodeAt(D++)<<16|C.charCodeAt(D++)<<24;else for(R=0;16>R;++R)A[R]=C[D++]|C[D++]<<8|C[D++]<<16|C[D++]<<24;C=S.g[0],D=S.g[1],R=S.g[2];var N=S.g[3],T=C+(N^D&(R^N))+A[0]+3614090360&4294967295;C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[1]+3905402710&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[2]+606105819&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[3]+3250441966&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(N^D&(R^N))+A[4]+4118548399&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[5]+1200080426&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[6]+2821735955&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[7]+4249261313&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(N^D&(R^N))+A[8]+1770035416&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[9]+2336552879&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[10]+4294925233&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[11]+2304563134&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(N^D&(R^N))+A[12]+1804603682&4294967295,C=D+(T<<7&4294967295|T>>>25),T=N+(R^C&(D^R))+A[13]+4254626195&4294967295,N=C+(T<<12&4294967295|T>>>20),T=R+(D^N&(C^D))+A[14]+2792965006&4294967295,R=N+(T<<17&4294967295|T>>>15),T=D+(C^R&(N^C))+A[15]+1236535329&4294967295,D=R+(T<<22&4294967295|T>>>10),T=C+(R^N&(D^R))+A[1]+4129170786&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[6]+3225465664&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[11]+643717713&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[0]+3921069994&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(D^R))+A[5]+3593408605&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[10]+38016083&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[15]+3634488961&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[4]+3889429448&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(D^R))+A[9]+568446438&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[14]+3275163606&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[3]+4107603335&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[8]+1163531501&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(R^N&(D^R))+A[13]+2850285829&4294967295,C=D+(T<<5&4294967295|T>>>27),T=N+(D^R&(C^D))+A[2]+4243563512&4294967295,N=C+(T<<9&4294967295|T>>>23),T=R+(C^D&(N^C))+A[7]+1735328473&4294967295,R=N+(T<<14&4294967295|T>>>18),T=D+(N^C&(R^N))+A[12]+2368359562&4294967295,D=R+(T<<20&4294967295|T>>>12),T=C+(D^R^N)+A[5]+4294588738&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[8]+2272392833&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[11]+1839030562&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[14]+4259657740&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(D^R^N)+A[1]+2763975236&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[4]+1272893353&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[7]+4139469664&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[10]+3200236656&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(D^R^N)+A[13]+681279174&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[0]+3936430074&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[3]+3572445317&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[6]+76029189&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(D^R^N)+A[9]+3654602809&4294967295,C=D+(T<<4&4294967295|T>>>28),T=N+(C^D^R)+A[12]+3873151461&4294967295,N=C+(T<<11&4294967295|T>>>21),T=R+(N^C^D)+A[15]+530742520&4294967295,R=N+(T<<16&4294967295|T>>>16),T=D+(R^N^C)+A[2]+3299628645&4294967295,D=R+(T<<23&4294967295|T>>>9),T=C+(R^(D|~N))+A[0]+4096336452&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[7]+1126891415&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[14]+2878612391&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[5]+4237533241&4294967295,D=R+(T<<21&4294967295|T>>>11),T=C+(R^(D|~N))+A[12]+1700485571&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[3]+2399980690&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[10]+4293915773&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[1]+2240044497&4294967295,D=R+(T<<21&4294967295|T>>>11),T=C+(R^(D|~N))+A[8]+1873313359&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[15]+4264355552&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[6]+2734768916&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[13]+1309151649&4294967295,D=R+(T<<21&4294967295|T>>>11),T=C+(R^(D|~N))+A[4]+4149444226&4294967295,C=D+(T<<6&4294967295|T>>>26),T=N+(D^(C|~R))+A[11]+3174756917&4294967295,N=C+(T<<10&4294967295|T>>>22),T=R+(C^(N|~D))+A[2]+718787259&4294967295,R=N+(T<<15&4294967295|T>>>17),T=D+(N^(R|~C))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+R&4294967295,S.g[3]=S.g[3]+N&4294967295}i.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var D=C-this.blockSize,A=this.B,R=this.h,N=0;N<C;){if(R==0)for(;N<=D;)r(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<C;)if(A[R++]=S.charCodeAt(N++),R==this.blockSize){r(this,A),R=0;break}}else for(;N<C;)if(A[R++]=S[N++],R==this.blockSize){r(this,A),R=0;break}}this.h=R,this.o+=C},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var D=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=D&255,D/=256;for(this.u(S),S=Array(16),C=D=0;4>C;++C)for(var A=0;32>A;A+=8)S[D++]=this.g[C]>>>A&255;return S};function o(S,C){var D=c;return Object.prototype.hasOwnProperty.call(D,S)?D[S]:D[S]=C(S)}function a(S,C){this.h=C;for(var D=[],A=!0,R=S.length-1;0<=R;R--){var N=S[R]|0;A&&N==C||(D[R]=N,A=!1)}this.g=D}var c={};function u(S){return-128<=S&&128>S?o(S,function(C){return new a([C|0],0>C?-1:0)}):new a([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return v;if(0>S)return F(f(-S));for(var C=[],D=1,A=0;S>=D;A++)C[A]=S/D|0,D*=4294967296;return new a(C,0)}function m(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return F(m(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=f(Math.pow(C,8)),A=v,R=0;R<S.length;R+=8){var N=Math.min(8,S.length-R),T=parseInt(S.substring(R,R+N),C);8>N?(N=f(Math.pow(C,N)),A=A.j(N).add(f(T))):(A=A.j(D),A=A.add(f(T)))}return A}var v=u(0),w=u(1),E=u(16777216);t=a.prototype,t.m=function(){if(k(this))return-F(this).m();for(var S=0,C=1,D=0;D<this.g.length;D++){var A=this.i(D);S+=(0<=A?A:4294967296+A)*C,C*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(k(this))return"-"+F(this).toString(S);for(var C=f(Math.pow(S,6)),D=this,A="";;){var R=oe(D,C).g;D=q(D,R.j(C));var N=((0<D.g.length?D.g[0]:D.h)>>>0).toString(S);if(D=R,M(D))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function k(S){return S.h==-1}t.l=function(S){return S=q(this,S),k(S)?-1:M(S)?0:1};function F(S){for(var C=S.g.length,D=[],A=0;A<C;A++)D[A]=~S.g[A];return new a(D,~S.h).add(w)}t.abs=function(){return k(this)?F(this):this},t.add=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0,R=0;R<=C;R++){var N=A+(this.i(R)&65535)+(S.i(R)&65535),T=(N>>>16)+(this.i(R)>>>16)+(S.i(R)>>>16);A=T>>>16,N&=65535,T&=65535,D[R]=T<<16|N}return new a(D,D[D.length-1]&-2147483648?-1:0)};function q(S,C){return S.add(F(C))}t.j=function(S){if(M(this)||M(S))return v;if(k(this))return k(S)?F(this).j(F(S)):F(F(this).j(S));if(k(S))return F(this.j(F(S)));if(0>this.l(E)&&0>S.l(E))return f(this.m()*S.m());for(var C=this.g.length+S.g.length,D=[],A=0;A<2*C;A++)D[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<S.g.length;R++){var N=this.i(A)>>>16,T=this.i(A)&65535,xt=S.i(R)>>>16,Di=S.i(R)&65535;D[2*A+2*R]+=T*Di,te(D,2*A+2*R),D[2*A+2*R+1]+=N*Di,te(D,2*A+2*R+1),D[2*A+2*R+1]+=T*xt,te(D,2*A+2*R+1),D[2*A+2*R+2]+=N*xt,te(D,2*A+2*R+2)}for(A=0;A<C;A++)D[A]=D[2*A+1]<<16|D[2*A];for(A=C;A<2*C;A++)D[A]=0;return new a(D,0)};function te(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function Z(S,C){this.g=S,this.h=C}function oe(S,C){if(M(C))throw Error("division by zero");if(M(S))return new Z(v,v);if(k(S))return C=oe(F(S),C),new Z(F(C.g),F(C.h));if(k(C))return C=oe(S,F(C)),new Z(F(C.g),C.h);if(30<S.g.length){if(k(S)||k(C))throw Error("slowDivide_ only works with positive integers.");for(var D=w,A=C;0>=A.l(S);)D=de(D),A=de(A);var R=ce(D,1),N=ce(A,1);for(A=ce(A,2),D=ce(D,2);!M(A);){var T=N.add(A);0>=T.l(S)&&(R=R.add(D),N=T),A=ce(A,1),D=ce(D,1)}return C=q(S,R.j(C)),new Z(R,C)}for(R=v;0<=S.l(C);){for(D=Math.max(1,Math.floor(S.m()/C.m())),A=Math.ceil(Math.log(D)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=f(D),T=N.j(C);k(T)||0<T.l(S);)D-=A,N=f(D),T=N.j(C);M(N)&&(N=w),R=R.add(N),S=q(S,T)}return new Z(R,S)}t.A=function(S){return oe(this,S).h},t.and=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)&S.i(A);return new a(D,this.h&S.h)},t.or=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)|S.i(A);return new a(D,this.h|S.h)},t.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),D=[],A=0;A<C;A++)D[A]=this.i(A)^S.i(A);return new a(D,this.h^S.h)};function de(S){for(var C=S.g.length+1,D=[],A=0;A<C;A++)D[A]=S.i(A)<<1|S.i(A-1)>>>31;return new a(D,S.h)}function ce(S,C){var D=C>>5;C%=32;for(var A=S.g.length-D,R=[],N=0;N<A;N++)R[N]=0<C?S.i(N+D)>>>C|S.i(N+D+1)<<32-C:S.i(N+D);return new a(R,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,sw=VA.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Fo=VA.Integer=a}).apply(typeof FA<"u"?FA:typeof self<"u"?self:typeof window<"u"?window:{});var wm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wr={};var aw,cw,el,lw,Ld,Im,uw,dw,hw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof wm=="object"&&wm];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var I=0;I<d.length-1;I++){var P=d[I];if(!(P in y))break e;y=y[P]}d=d[d.length-1],I=y[d],g=g(I),g!=I&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,I=!1,P={next:function(){if(!I&&y<d.length){var z=y++;return{value:g(z,d[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},c=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function m(d,g,y){return d.call.apply(d.bind,arguments)}function v(d,g,y){if(!d)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,I),d.apply(g,P)}}return function(){return d.apply(g,arguments)}}function w(d,g,y){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,w.apply(null,arguments)}function E(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var I=y.slice();return I.push.apply(I,arguments),d.apply(this,I)}}function M(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(I,P,z){for(var Q=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)Q[Oe-2]=arguments[Oe];return g.prototype[P].apply(I,Q)}}function k(d){let g=d.length;if(0<g){let y=Array(g);for(let I=0;I<g;I++)y[I]=d[I];return y}return[]}function F(d,g){for(let y=1;y<arguments.length;y++){let I=arguments[y];if(u(I)){let P=d.length||0,z=I.length||0;d.length=P+z;for(let Q=0;Q<z;Q++)d[P+Q]=I[Q]}else d.push(I)}}class q{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function te(d){return/^[\s\xa0]*$/.test(d)}function Z(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function oe(d){return oe[" "](d),d}oe[" "]=function(){};var de=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function ce(d,g,y){for(let I in d)g.call(y,d[I],I,d)}function S(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function C(d){let g={};for(let y in d)g[y]=d[y];return g}let D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,g){let y,I;for(let P=1;P<arguments.length;P++){I=arguments[P];for(y in I)d[y]=I[y];for(let z=0;z<D.length;z++)y=D[z],Object.prototype.hasOwnProperty.call(I,y)&&(d[y]=I[y])}}function R(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function N(d){c.setTimeout(()=>{throw d},0)}function T(){var d=rt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class xt{constructor(){this.h=this.g=null}add(g,y){let I=Di.get();I.set(g,y),this.h?this.h.next=I:this.g=I,this.h=I}}var Di=new q(()=>new Ce,d=>d.reset());class Ce{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let io,me=!1,rt=new xt,fn=()=>{let d=c.Promise.resolve(void 0);io=()=>{d.then(yn)}};var yn=()=>{for(var d;d=T();){try{d.h.call(d.g)}catch(y){N(y)}var g=Di;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}me=!1};function Je(){this.s=this.s,this.C=this.C}Je.prototype.s=!1,Je.prototype.ma=function(){this.s||(this.s=!0,this.N())},Je.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return d}();function xn(d,g){if(Ie.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,I=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(de){e:{try{oe(g.nodeName);var P=!0;break e}catch{}P=!1}P||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Gi[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&xn.aa.h.call(this)}}M(xn,Ie);var Gi={2:"touch",3:"pen",4:"mouse"};xn.prototype.h=function(){xn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ro="closure_listenable_"+(1e6*Math.random()|0),Ul=0;function $l(d,g,y,I,P){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!I,this.ha=P,this.key=++Ul,this.da=this.fa=!1}function Wi(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function oo(d){this.src=d,this.g={},this.h=0}oo.prototype.add=function(d,g,y,I,P){var z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);var Q=xa(d,g,I,P);return-1<Q?(g=d[Q],y||(g.fa=!1)):(g=new $l(g,this.src,z,!!I,P),g.fa=y,d.push(g)),g};function Hl(d,g){var y=g.type;if(y in d.g){var I=d.g[y],P=Array.prototype.indexOf.call(I,g,void 0),z;(z=0<=P)&&Array.prototype.splice.call(I,P,1),z&&(Wi(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function xa(d,g,y,I){for(var P=0;P<d.length;++P){var z=d[P];if(!z.da&&z.listener==g&&z.capture==!!y&&z.ha==I)return P}return-1}var Ta="closure_lm_"+(1e6*Math.random()|0),is={};function rs(d,g,y,I,P){if(I&&I.once)return Sa(d,g,y,I,P);if(Array.isArray(g)){for(var z=0;z<g.length;z++)rs(d,g[z],y,I,P);return null}return y=Ra(y),d&&d[ro]?d.K(g,y,f(I)?!!I.capture:!!I,P):Ch(d,g,y,!1,I,P)}function Ch(d,g,y,I,P,z){if(!g)throw Error("Invalid event type");var Q=f(P)?!!P.capture:!!P,Oe=os(d);if(Oe||(d[Ta]=Oe=new oo(d)),y=Oe.add(g,y,I,Q,z),y.proxy)return y;if(I=Dh(),y.proxy=I,I.src=d,I.listener=y,d.addEventListener)ze||(P=Q),P===void 0&&(P=!1),d.addEventListener(g.toString(),I,P);else if(d.attachEvent)d.attachEvent(xh(g.toString()),I);else if(d.addListener&&d.removeListener)d.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Dh(){function d(y){return g.call(d.src,d.listener,y)}let g=Hg;return d}function Sa(d,g,y,I,P){if(Array.isArray(g)){for(var z=0;z<g.length;z++)Sa(d,g[z],y,I,P);return null}return y=Ra(y),d&&d[ro]?d.L(g,y,f(I)?!!I.capture:!!I,P):Ch(d,g,y,!0,I,P)}function ql(d,g,y,I,P){if(Array.isArray(g))for(var z=0;z<g.length;z++)ql(d,g[z],y,I,P);else I=f(I)?!!I.capture:!!I,y=Ra(y),d&&d[ro]?(d=d.i,g=String(g).toString(),g in d.g&&(z=d.g[g],y=xa(z,y,I,P),-1<y&&(Wi(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete d.g[g],d.h--)))):d&&(d=os(d))&&(g=d.g[g.toString()],d=-1,g&&(d=xa(g,y,I,P)),(y=-1<d?g[d]:null)&&Aa(y))}function Aa(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ro])Hl(g.i,d);else{var y=d.type,I=d.proxy;g.removeEventListener?g.removeEventListener(y,I,d.capture):g.detachEvent?g.detachEvent(xh(y),I):g.addListener&&g.removeListener&&g.removeListener(I),(y=os(g))?(Hl(y,d),y.h==0&&(y.src=null,g[Ta]=null)):Wi(d)}}}function xh(d){return d in is?is[d]:is[d]="on"+d}function Hg(d,g){if(d.da)d=!0;else{g=new xn(g,this);var y=d.listener,I=d.ha||d.src;d.fa&&Aa(d),d=y.call(I,g)}return d}function os(d){return d=d[Ta],d instanceof oo?d:null}var Ma="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ra(d){return typeof d=="function"?d:(d[Ma]||(d[Ma]=function(g){return d.handleEvent(g)}),d[Ma])}function on(){Je.call(this),this.i=new oo(this),this.M=this,this.F=null}M(on,Je),on.prototype[ro]=!0,on.prototype.removeEventListener=function(d,g,y,I){ql(this,d,g,y,I)};function sn(d,g){var y,I=d.F;if(I)for(y=[];I;I=I.F)y.push(I);if(d=d.M,I=g.type||g,typeof g=="string")g=new Ie(g,d);else if(g instanceof Ie)g.target=g.target||d;else{var P=g;g=new Ie(I,d),A(g,P)}if(P=!0,y)for(var z=y.length-1;0<=z;z--){var Q=g.g=y[z];P=ss(Q,I,!0,g)&&P}if(Q=g.g=d,P=ss(Q,I,!0,g)&&P,P=ss(Q,I,!1,g)&&P,y)for(z=0;z<y.length;z++)Q=g.g=y[z],P=ss(Q,I,!1,g)&&P}on.prototype.N=function(){if(on.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],I=0;I<y.length;I++)Wi(y[I]);delete d.g[g],d.h--}}this.F=null},on.prototype.K=function(d,g,y,I){return this.i.add(String(d),g,!1,y,I)},on.prototype.L=function(d,g,y,I){return this.i.add(String(d),g,!0,y,I)};function ss(d,g,y,I){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var P=!0,z=0;z<g.length;++z){var Q=g[z];if(Q&&!Q.da&&Q.capture==y){var Oe=Q.listener,It=Q.ha||Q.src;Q.fa&&Hl(d.i,Q),P=Oe.call(It,I)!==!1&&P}}return P&&!I.defaultPrevented}function Th(d,g,y){if(typeof d=="function")y&&(d=w(d,y));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function Gl(d){d.g=Th(()=>{d.g=null,d.i&&(d.i=!1,Gl(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class Wl extends Je{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Gl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function so(d){Je.call(this),this.h=d,this.g={}}M(so,Je);var Sh=[];function ao(d){ce(d.g,function(g,y){this.g.hasOwnProperty(y)&&Aa(g)},d),d.g={}}so.prototype.N=function(){so.aa.N.call(this),ao(this)},so.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Zl=c.JSON.stringify,qg=c.JSON.parse,Ah=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function Pa(){}Pa.prototype.h=null;function Kl(d){return d.h||(d.h=d.i())}function Mh(){}var as={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ql(){Ie.call(this,"d")}M(Ql,Ie);function Yl(){Ie.call(this,"c")}M(Yl,Ie);var Tr={},Rh=null;function co(){return Rh=Rh||new on}Tr.La="serverreachability";function Ph(d){Ie.call(this,Tr.La,d)}M(Ph,Ie);function cs(d){let g=co();sn(g,new Ph(g))}Tr.STAT_EVENT="statevent";function kh(d,g){Ie.call(this,Tr.STAT_EVENT,d),this.stat=g}M(kh,Ie);function pn(d){let g=co();sn(g,new kh(g,d))}Tr.Ma="timingevent";function Wn(d,g){Ie.call(this,Tr.Ma,d),this.size=g}M(Wn,Ie);function se(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function lo(){this.g=!0}lo.prototype.xa=function(){this.g=!1};function Nh(d,g,y,I,P,z){d.info(function(){if(d.g)if(z)for(var Q="",Oe=z.split("&"),It=0;It<Oe.length;It++){var qe=Oe[It].split("=");if(1<qe.length){var dt=qe[0];qe=qe[1];var an=dt.split("_");Q=2<=an.length&&an[1]=="type"?Q+(dt+"="+qe+"&"):Q+(dt+"=redacted&")}}else Q=null;else Q=z;return"XMLHTTP REQ ("+I+") [attempt "+P+"]: "+g+`
`+y+`
`+Q})}function Oh(d,g,y,I,P,z,Q){d.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+P+"]: "+g+`
`+y+`
`+z+" "+Q})}function Sr(d,g,y,I){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Lh(d,y)+(I?" "+I:"")})}function Xl(d,g){d.info(function(){return"TIMEOUT: "+g})}lo.prototype.info=function(){};function Lh(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var I=y[d];if(!(2>I.length)){var P=I[1];if(Array.isArray(P)&&!(1>P.length)){var z=P[0];if(z!="noop"&&z!="stop"&&z!="close")for(var Q=1;Q<P.length;Q++)P[Q]=""}}}}return Zl(y)}catch{return g}}var xi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},eu;function ka(){}M(ka,Pa),ka.prototype.g=function(){return new XMLHttpRequest},ka.prototype.i=function(){return{}},eu=new ka;function Zi(d,g,y,I){this.j=d,this.i=g,this.l=y,this.R=I||1,this.U=new so(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fh}function Fh(){this.i=null,this.g="",this.h=!1}var tu={},nu={};function uo(d,g,y){d.L=1,d.v=fo(mn(g)),d.m=y,d.P=!0,Vh(d,null)}function Vh(d,g){d.F=Date.now(),Na(d),d.A=mn(d.v);var y=d.A,I=d.R;Array.isArray(I)||(I=[String(I)]),et(y.i,"t",I),d.C=0,y=d.j.J,d.h=new Fh,d.g=bs(d.j,y?g:null,!d.m),0<d.O&&(d.M=new Wl(w(d.Y,d,d.g),d.O)),g=d.U,y=d.g,I=d.ca;var P="readystatechange";Array.isArray(P)||(P&&(Sh[0]=P.toString()),P=Sh);for(var z=0;z<P.length;z++){var Q=rs(y,P[z],I||g.handleEvent,!1,g.h||g);if(!Q)break;g.g[Q.key]=Q}g=d.H?C(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),cs(),Nh(d.i,d.u,d.A,d.l,d.R,d.m)}Zi.prototype.ca=function(d){d=d.target;let g=this.M;g&&Kn(d)==3?g.j():this.Y(d)},Zi.prototype.Y=function(d){try{if(d==this.g)e:{let an=Kn(this.g);var g=this.g.Ba();let Yn=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||qh(this.g)))){this.J||an!=4||g==7||(g==8||0>=Yn?cs(3):cs(2)),ls(this);var y=this.g.Z();this.X=y;t:if(Bh(this)){var I=qh(this.g);d="";var P=I.length,z=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ki(this),Ti(this);var Q="";break t}this.h.i=new c.TextDecoder}for(g=0;g<P;g++)this.h.h=!0,d+=this.h.i.decode(I[g],{stream:!(z&&g==P-1)});I.length=0,this.h.g+=d,this.C=0,Q=this.h.g}else Q=this.g.oa();if(this.o=y==200,Oh(this.i,this.u,this.A,this.l,this.R,an,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Oe,It=this.g;if((Oe=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!te(Oe)){var qe=Oe;break t}}qe=null}if(y=qe)Sr(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Oa(this,y);else{this.o=!1,this.s=3,pn(12),Ki(this),Ti(this);break e}}if(this.P){y=!0;let Xn;for(;!this.J&&this.C<Q.length;)if(Xn=Gg(this,Q),Xn==nu){an==4&&(this.s=4,pn(14),y=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Xn==tu){this.s=4,pn(15),Sr(this.i,this.l,Q,"[Invalid Chunk]"),y=!1;break}else Sr(this.i,this.l,Xn,null),Oa(this,Xn);if(Bh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||Q.length!=0||this.h.h||(this.s=1,pn(16),y=!1),this.o=this.o&&y,!y)Sr(this.i,this.l,Q,"[Invalid Chunked Response]"),Ki(this),Ti(this);else if(0<Q.length&&!this.W){this.W=!0;var dt=this.j;dt.g==this&&dt.ba&&!dt.M&&(dt.j.info("Great, no buffering proxy detected. Bytes received: "+Q.length),za(dt),dt.M=!0,pn(11))}}else Sr(this.i,this.l,Q,null),Oa(this,Q);an==4&&Ki(this),this.o&&!this.J&&(an==4?Kh(this.j,this):(this.o=!1,Na(this)))}else Gh(this.g),y==400&&0<Q.indexOf("Unknown SID")?(this.s=3,pn(12)):(this.s=0,pn(13)),Ki(this),Ti(this)}}}catch{}finally{}};function Bh(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Gg(d,g){var y=d.C,I=g.indexOf(`
`,y);return I==-1?nu:(y=Number(g.substring(y,I)),isNaN(y)?tu:(I+=1,I+y>g.length?nu:(g=g.slice(I,I+y),d.C=I+y,g)))}Zi.prototype.cancel=function(){this.J=!0,Ki(this)};function Na(d){d.S=Date.now()+d.I,jh(d,d.I)}function jh(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=se(w(d.ba,d),g)}function ls(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Zi.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Xl(this.i,this.A),this.L!=2&&(cs(),pn(17)),Ki(this),this.s=2,Ti(this)):jh(this,this.S-d)};function Ti(d){d.j.G==0||d.J||Kh(d.j,d)}function Ki(d){ls(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,ao(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Oa(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||Qi(y.h,d))){if(!d.K&&Qi(y.h,d)&&y.G==3){try{var I=y.Da.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var P=I;if(P[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)Ua(y),Va(y);else break e;pu(y),pn(18)}}else y.za=P[1],0<y.za-y.T&&37500>P[2]&&y.F&&y.v==0&&!y.C&&(y.C=se(w(y.Za,y),6e3));if(1>=ds(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Pr(y,11)}else if((d.K||y.g==d)&&Ua(y),!te(g))for(P=y.Da.g.parse(g),g=0;g<P.length;g++){let qe=P[g];if(y.T=qe[0],qe=qe[1],y.G==2)if(qe[0]=="c"){y.K=qe[1],y.ia=qe[2];let dt=qe[3];dt!=null&&(y.la=dt,y.j.info("VER="+y.la));let an=qe[4];an!=null&&(y.Aa=an,y.j.info("SVER="+y.Aa));let Yn=qe[5];Yn!=null&&typeof Yn=="number"&&0<Yn&&(I=1.5*Yn,y.L=I,y.j.info("backChannelRequestTimeoutMs_="+I)),I=y;let Xn=d.g;if(Xn){let er=Xn.g?Xn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(er){var z=I.h;z.g||er.indexOf("spdy")==-1&&er.indexOf("quic")==-1&&er.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Yi(z,z.h),z.h=null))}if(I.D){let qa=Xn.g?Xn.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(I.ya=qa,Qe(I.I,I.D,qa))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),I=y;var Q=d;if(I.qa=_u(I,I.J?I.ia:null,I.W),Q.K){La(I.h,Q);var Oe=Q,It=I.L;It&&(Oe.I=It),Oe.B&&(ls(Oe),Na(Oe)),I.g=Q}else ja(I);0<y.i.length&&Ba(y)}else qe[0]!="stop"&&qe[0]!="close"||Pr(y,7);else y.G==3&&(qe[0]=="stop"||qe[0]=="close"?qe[0]=="stop"?Pr(y,7):ys(y):qe[0]!="noop"&&y.l&&y.l.ta(qe),y.v=0)}}cs(4)}catch{}}var us=class{constructor(d,g){this.g=d,this.map=g}};function He(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ut(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function ds(d){return d.h?1:d.g?d.g.size:0}function Qi(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function Yi(d,g){d.g?d.g.add(g):d.h=g}function La(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}He.prototype.cancel=function(){if(this.i=Te(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Te(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return k(d.i)}function Tt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,I=0;I<y;I++)g.push(d[I]);return g}g=[],y=0;for(I in d)g[y++]=d[I];return g}function iu(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let I in d)g[y++]=I;return g}}}function hs(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=iu(d),I=Tt(d),P=I.length,z=0;z<P;z++)g.call(void 0,I[z],y&&y[z],d)}var Tn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wg(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var I=d[y].indexOf("="),P=null;if(0<=I){var z=d[y].substring(0,I);P=d[y].substring(I+1)}else z=d[y];g(z,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function oi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof oi){this.h=d.h,gt(this,d.j),this.o=d.o,this.g=d.g,si(this,d.s),this.l=d.l;var g=d.i,y=new Mr;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),ho(this,y),this.m=d.m}else d&&(g=String(d).match(Tn))?(this.h=!1,gt(this,g[1]||"",!0),this.o=Si(g[2]||""),this.g=Si(g[3]||"",!0),si(this,g[4]),this.l=Si(g[5]||"",!0),ho(this,g[6]||"",!0),this.m=Si(g[7]||"")):(this.h=!1,this.i=new Mr(null,this.h))}oi.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Ar(g,fs,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Ar(g,fs,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Ar(y,y.charAt(0)=="/"?su:ou,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Ar(y,zh)),d.join("")};function mn(d){return new oi(d)}function gt(d,g,y){d.j=y?Si(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function si(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function ho(d,g,y){g instanceof Mr?(d.i=g,au(d.i,d.h)):(y||(g=Ar(g,Fa)),d.i=new Mr(g,d.h))}function Qe(d,g,y){d.i.set(g,y)}function fo(d){return Qe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Si(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ar(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,ru),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ru(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var fs=/[#\/\?@]/g,ou=/[#\?:]/g,su=/[#\?]/g,Fa=/[#\?@]/g,zh=/#/g;function Mr(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Xi(d){d.g||(d.g=new Map,d.h=0,d.i&&Wg(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Mr.prototype,t.add=function(d,g){Xi(this),this.i=null,d=Rr(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Ee(d,g){Xi(d),g=Rr(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Zn(d,g){return Xi(d),g=Rr(d,g),d.g.has(g)}t.forEach=function(d,g){Xi(this),this.g.forEach(function(y,I){y.forEach(function(P){d.call(g,P,I,this)},this)},this)},t.na=function(){Xi(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let I=0;I<g.length;I++){let P=d[I];for(let z=0;z<P.length;z++)y.push(g[I])}return y},t.V=function(d){Xi(this);let g=[];if(typeof d=="string")Zn(this,d)&&(g=g.concat(this.g.get(Rr(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return Xi(this),this.i=null,d=Rr(this,d),Zn(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function et(d,g,y){Ee(d,g),0<y.length&&(d.i=null,d.g.set(Rr(d,g),k(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var I=g[y];let z=encodeURIComponent(String(I)),Q=this.V(I);for(I=0;I<Q.length;I++){var P=z;Q[I]!==""&&(P+="="+encodeURIComponent(String(Q[I]))),d.push(P)}}return this.i=d.join("&")};function Rr(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function au(d,g){g&&!d.j&&(Xi(d),d.i=null,d.g.forEach(function(y,I){var P=I.toLowerCase();I!=P&&(Ee(this,I),et(this,P,y))},d)),d.j=g}function cu(d,g){let y=new lo;if(c.Image){let I=new Image;I.onload=E(bn,y,"TestLoadImage: loaded",!0,g,I),I.onerror=E(bn,y,"TestLoadImage: error",!1,g,I),I.onabort=E(bn,y,"TestLoadImage: abort",!1,g,I),I.ontimeout=E(bn,y,"TestLoadImage: timeout",!1,g,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=d}else g(!1)}function lu(d,g){let y=new lo,I=new AbortController,P=setTimeout(()=>{I.abort(),bn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:I.signal}).then(z=>{clearTimeout(P),z.ok?bn(y,"TestPingServer: ok",!0,g):bn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(P),bn(y,"TestPingServer: error",!1,g)})}function bn(d,g,y,I,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),I(y)}catch{}}function uu(){this.g=new Ah}function ps(d,g,y){let I=y||"";try{hs(d,function(P,z){let Q=P;f(P)&&(Q=Zl(P)),g.push(I+z+"="+encodeURIComponent(Q))})}catch(P){throw g.push(I+"type="+encodeURIComponent("_badmap")),P}}function St(d){this.l=d.Ub||null,this.j=d.eb||!1}M(St,Pa),St.prototype.g=function(){return new ai(this.l,this.j)},St.prototype.i=function(d){return function(){return d}}({});function ai(d,g){on.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ai,on),t=ai.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ms(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,po(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;du(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function du(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?po(this):ms(this),this.readyState==3&&du(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,po(this))},t.Qa=function(d){this.g&&(this.response=d,po(this))},t.ga=function(){this.g&&po(this)};function po(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ms(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function ms(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function hu(d){let g="";return ce(d,function(y,I){g+=I,g+=":",g+=y,g+=`\r
`}),g}function gs(d,g,y){e:{for(I in y){var I=!1;break e}I=!0}I||(y=hu(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):Qe(d,g,y))}function wt(d){on.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(wt,on);var Uh=/^https?$/i,Ue=["POST","PUT"];t=wt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():eu.g(),this.v=this.o?Kl(this.o):Kl(eu),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(z){$h(this,z);return}if(d=y||"",y=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var P in I)y.set(P,I[P]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let z of I.keys())y.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),P=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Ue,g,void 0))||I||P||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[z,Q]of y)this.g.setRequestHeader(z,Q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hh(this),this.u=!0,this.g.send(d),this.u=!1}catch(z){$h(this,z)}};function $h(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Vn(d),_s(d)}function Vn(d){d.A||(d.A=!0,sn(d,"complete"),sn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,sn(this,"complete"),sn(this,"abort"),_s(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_s(this,!0)),wt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?mo(this):this.bb())},t.bb=function(){mo(this)};function mo(d){if(d.h&&typeof a<"u"&&(!d.v[1]||Kn(d)!=4||d.Z()!=2)){if(d.u&&Kn(d)==4)Th(d.Ea,0,d);else if(sn(d,"readystatechange"),Kn(d)==4){d.h=!1;try{let Q=d.Z();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var I;if(I=Q===0){var P=String(d.D).match(Tn)[1]||null;!P&&c.self&&c.self.location&&(P=c.self.location.protocol.slice(0,-1)),I=!Uh.test(P?P.toLowerCase():"")}y=I}if(y)sn(d,"complete"),sn(d,"success");else{d.m=6;try{var z=2<Kn(d)?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.Z()+"]",Vn(d)}}finally{_s(d)}}}}function _s(d,g){if(d.g){Hh(d);let y=d.g,I=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||sn(d,"ready");try{y.onreadystatechange=I}catch{}}}function Hh(d){d.I&&(c.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Kn(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),qg(g)}};function qh(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function Gh(d){let g={};d=(d.g&&2<=Kn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<d.length;I++){if(te(d[I]))continue;var y=R(d[I]);let P=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let z=g[P]||[];g[P]=z,z.push(y)}S(g,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function Wh(d){this.Aa=0,this.i=[],this.j=new lo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vs("baseRetryDelayMs",5e3,d),this.cb=vs("retryDelaySeedMs",1e4,d),this.Wa=vs("forwardChannelMaxRetries",2,d),this.wa=vs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new He(d&&d.concurrentRequestLimit),this.Da=new uu,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wh.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,I){pn(0),this.W=d,this.H=g||{},y&&I!==void 0&&(this.H.OSID=y,this.H.OAID=I),this.F=this.X,this.I=_u(this,null,this.W),Ba(this)};function ys(d){if(Qn(d),d.G==3){var g=d.U++,y=mn(d.I);if(Qe(y,"SID",d.K),Qe(y,"RID",g),Qe(y,"TYPE","terminate"),go(d,y),g=new Zi(d,d.j,g),g.L=2,g.v=fo(mn(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=bs(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Na(g)}gu(d)}function Va(d){d.g&&(za(d),d.g.cancel(),d.g=null)}function Qn(d){Va(d),d.u&&(c.clearTimeout(d.u),d.u=null),Ua(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function Ba(d){if(!ut(d.h)&&!d.s){d.s=!0;var g=d.Ga;io||fn(),me||(io(),me=!0),rt.add(g,d),d.B=0}}function Zh(d,g){return ds(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=se(w(d.Ga,d,g),$a(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let P=new Zi(this,this.j,d),z=this.o;if(this.S&&(z?(z=C(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(P.H=z,z=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var I=this.i[y];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=fu(this,P,g),y=mn(this.I),Qe(y,"RID",d),Qe(y,"CVER",22),this.D&&Qe(y,"X-HTTP-Session-Id",this.D),go(this,y),z&&(this.O?g="headers="+encodeURIComponent(String(hu(z)))+"&"+g:this.m&&gs(y,this.m,z)),Yi(this.h,P),this.Ua&&Qe(y,"TYPE","init"),this.P?(Qe(y,"$req",g),Qe(y,"SID","null"),P.T=!0,uo(P,y,null)):uo(P,y,g),this.G=2}}else this.G==3&&(d?Ai(this,d):this.i.length==0||ut(this.h)||Ai(this))};function Ai(d,g){var y;g?y=g.l:y=d.U++;let I=mn(d.I);Qe(I,"SID",d.K),Qe(I,"RID",y),Qe(I,"AID",d.T),go(d,I),d.m&&d.o&&gs(I,d.m,d.o),y=new Zi(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=fu(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Yi(d.h,y),uo(y,I,g)}function go(d,g){d.H&&ce(d.H,function(y,I){Qe(g,I,y)}),d.l&&hs({},function(y,I){Qe(g,I,y)})}function fu(d,g,y){y=Math.min(d.i.length,y);var I=d.l?w(d.l.Na,d.l,d):null;e:{var P=d.i;let z=-1;for(;;){let Q=["count="+y];z==-1?0<y?(z=P[0].g,Q.push("ofs="+z)):z=0:Q.push("ofs="+z);let Oe=!0;for(let It=0;It<y;It++){let qe=P[It].g,dt=P[It].map;if(qe-=z,0>qe)z=Math.max(0,P[It].g-100),Oe=!1;else try{ps(dt,Q,"req"+qe+"_")}catch{I&&I(dt)}}if(Oe){I=Q.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,I}function ja(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;io||fn(),me||(io(),me=!0),rt.add(g,d),d.v=0}}function pu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=se(w(d.Fa,d),$a(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,mu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=se(w(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pn(10),Va(this),mu(this))};function za(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function mu(d){d.g=new Zi(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=mn(d.qa);Qe(g,"RID","rpc"),Qe(g,"SID",d.K),Qe(g,"AID",d.T),Qe(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Qe(g,"TO",d.ja),Qe(g,"TYPE","xmlhttp"),go(d,g),d.m&&d.o&&gs(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=fo(mn(g)),y.m=null,y.P=!0,Vh(y,d)}t.Za=function(){this.C!=null&&(this.C=null,Va(this),pu(this),pn(19))};function Ua(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function Kh(d,g){var y=null;if(d.g==g){Ua(d),za(d),d.g=null;var I=2}else if(Qi(d.h,g))y=g.D,La(d.h,g),I=1;else return;if(d.G!=0){if(g.o)if(I==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var P=d.B;I=co(),sn(I,new Wn(I,y)),Ba(d)}else ja(d);else if(P=g.s,P==3||P==0&&0<g.X||!(I==1&&Zh(d,g)||I==2&&pu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),P){case 1:Pr(d,5);break;case 4:Pr(d,10);break;case 3:Pr(d,6);break;default:Pr(d,2)}}}function $a(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function Pr(d,g){if(d.j.info("Error code "+g),g==2){var y=w(d.fb,d),I=d.Xa;let P=!I;I=new oi(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||gt(I,"https"),fo(I),P?cu(I.toString(),y):lu(I.toString(),y)}else pn(2);d.G=0,d.l&&d.l.sa(g),gu(d),Qn(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),pn(2)):(this.j.info("Failed to ping google.com"),pn(1))};function gu(d){if(d.G=0,d.ka=[],d.l){let g=Te(d.h);(g.length!=0||d.i.length!=0)&&(F(d.ka,g),F(d.ka,d.i),d.h.i.length=0,k(d.i),d.i.length=0),d.l.ra()}}function _u(d,g,y){var I=y instanceof oi?mn(y):new oi(y);if(I.g!="")g&&(I.g=g+"."+I.g),si(I,I.s);else{var P=c.location;I=P.protocol,g=g?g+"."+P.hostname:P.hostname,P=+P.port;var z=new oi(null);I&&gt(z,I),g&&(z.g=g),P&&si(z,P),y&&(z.l=y),I=z}return y=d.D,g=d.ya,y&&g&&Qe(I,y,g),Qe(I,"VER",d.la),go(d,I),I}function bs(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new wt(new St({eb:y})):new wt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ji(){}t=Ji.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ha(){}Ha.prototype.g=function(d,g){return new Kt(d,g)};function Kt(d,g){on.call(this),this.g=new Wh(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!te(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!te(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new kr(this)}M(Kt,on),Kt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){ys(this.g)},Kt.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=Zl(d),d=y);g.i.push(new us(g.Ya++,d)),g.G==3&&Ba(g)},Kt.prototype.N=function(){this.g.l=null,delete this.j,ys(this.g),delete this.g,Kt.aa.N.call(this)};function Sn(d){Ql.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}M(Sn,Ql);function vu(){Yl.call(this),this.status=1}M(vu,Yl);function kr(d){this.g=d}M(kr,Ji),kr.prototype.ua=function(){sn(this.g,"a")},kr.prototype.ta=function(d){sn(this.g,new Sn(d))},kr.prototype.sa=function(d){sn(this.g,new vu)},kr.prototype.ra=function(){sn(this.g,"b")},Ha.prototype.createWebChannel=Ha.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,hw=Wr.createWebChannelTransport=function(){return new Ha},dw=Wr.getStatEventTarget=function(){return co()},uw=Wr.Event=Tr,Im=Wr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xi.NO_ERROR=0,xi.TIMEOUT=8,xi.HTTP_ERROR=6,Ld=Wr.ErrorCode=xi,Jl.COMPLETE="complete",lw=Wr.EventType=Jl,Mh.EventType=as,as.OPEN="a",as.CLOSE="b",as.ERROR="c",as.MESSAGE="d",on.prototype.listen=on.prototype.K,el=Wr.WebChannel=Mh,cw=Wr.FetchXmlHttpFactory=St,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,aw=Wr.XhrIo=wt}).apply(typeof wm<"u"?wm:typeof self<"u"?self:typeof window<"u"?window:{});var BA="@firebase/firestore";var Gt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");var Rl="10.12.1";var Ho=new uf("@firebase/firestore");function ol(){return Ho.logLevel}function BM(t){Ho.setLogLevel(t)}function W(t,...e){if(Ho.logLevel<=nr.DEBUG){let n=e.map(mI);Ho.debug(`Firestore (${Rl}): ${t}`,...n)}}function Vt(t,...e){if(Ho.logLevel<=nr.ERROR){let n=e.map(mI);Ho.error(`Firestore (${Rl}): ${t}`,...n)}}function Ii(t,...e){if(Ho.logLevel<=nr.WARN){let n=e.map(mI);Ho.warn(`Firestore (${Rl}): ${t}`,...n)}}function mI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ie(t="Unexpected state"){let e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+t;throw Vt(e),new Error(e)}function ae(t,e){t||ie()}function jM(t,e){t||ie()}function ee(t,e){return t}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},H=class extends LE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wt=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var km=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_w=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Gt.UNAUTHENTICATED))}shutdown(){}},vw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},yw=class{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve(),o=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Wt,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>U(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Wt)}},0),a()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ae(typeof i.accessToken=="string"),new km(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new Gt(e)}},bw=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ww=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new bw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Gt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Iw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Ew=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,W("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string"),this.R=n.token,new Iw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Jz(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Nm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=Jz(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function Re(t,e){return t<e?-1:t>e?1:0}function pl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function zM(t){return t+"\0"}var Rt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new H($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Rt(0,0))}static max(){return new t(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Om=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&ie(),i===void 0?i=e.length-n:i>e.length-n&&ie(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Ze=class t extends Om{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new H($.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},eU=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bt=class t extends Om{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return eU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new H($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},a=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new H($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new H($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new H($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var J=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ze.fromString(e))}static fromName(e){return new t(Ze.fromString(e).popFirst(5))}static empty(){return new t(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ze.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ze(e.slice()))}};var ml=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function Cw(t){return t.fields.find(e=>e.kind===2)}function ta(t){return t.fields.filter(e=>e.kind!==2)}ml.UNKNOWN_ID=-1;var dl=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Zd=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Ei.min())}};function UM(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ue.fromTimestamp(i===1e9?new Rt(n+1,0):new Rt(n,i));return new Ei(r,J.empty(),e)}function $M(t){return new Ei(t.readTime,t.key,-1)}var Ei=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(ue.min(),J.empty(),-1)}static max(){return new t(ue.max(),J.empty(),-1)}};function gI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=J.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}var HM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Lm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function es(t){return U(this,null,function*(){if(t.code!==$.FAILED_PRECONDITION||t.message!==HM)throw t;W("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},u=>i(u))}),a=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,a=new Array(o),c=0;for(let u=0;u<o;u++){let f=u;n(e[f]).next(m=>{a[f]=m,++c,c===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var Fm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new Wt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new aa(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=_I(i.target.error);this.V.reject(new aa(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new aa(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new xw(n)}},qo=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Iu())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),na(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!lf())return!1;if(t.C())return!0;let e=Iu(),n=t.S(e),i=0<n&&n<10,r=qM(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return U(this,null,function*(){return this.db||(W("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let a=o.target.result;n(a)},r.onblocked=()=>{i(new aa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let a=o.target.error;a.name==="VersionError"?i(new H($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new H($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new aa(e,a))},r.onupgradeneeded=o=>{W("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let a=o.target.result;this.p.O(a,r.transaction,o.oldVersion,this.version).next(()=>{W("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return U(this,null,function*(){let o=n==="readonly",a=0;for(;;){++a;try{this.db=yield this.M(e);let c=Fm.open(this.db,e,o?"readonly":"readwrite",i),u=r(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),B.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){let u=c,f=u.name!=="FirebaseError"&&a<3;if(W("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),this.close(),!f)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function qM(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var Dw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return na(this.B.delete())}},aa=class extends H{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ts(t){return t.name==="IndexedDbTransactionError"}var xw=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(W("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),na(i)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),na(this.store.add(e))}get(e){return na(this.store.get(e)).next(n=>(n===void 0&&(n=null),W("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),na(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),na(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new B((a,c)=>{o.onerror=u=>{c(u.target.error)},o.onsuccess=u=>{a(u.target.result)}})}{let o=this.cursor(i),a=[];return this.W(o,(c,u)=>{a.push(u)}).next(()=>a)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new B((r,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}j(e,n){W("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,a,c)=>c.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new B((i,r)=>{n.onerror=o=>{let a=_I(o.target.error);r(a)},n.onsuccess=o=>{let a=o.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():i()}):i()}})}W(e,n){let i=[];return new B((r,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{let c=a.target.result;if(!c)return void r();let u=new Dw(c),f=n(c.primaryKey,c.value,u);if(f instanceof B){let m=f.catch(v=>(u.done(),B.reject(v)));i.push(m)}u.isDone?r():u.K===null?c.continue():c.continue(u.K)}}).next(()=>B.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function na(t){return new B((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=_I(i.target.error);n(r)}})}var jA=!1;function _I(t){let e=qo.S(Iu());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new H("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jA||(jA=!0,setTimeout(()=>{throw i},0)),i}}return t}var Tw=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){W("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>U(this,null,function*(){this.task=null;try{W("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ts(n)?W("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield es(n)}yield this.X(6e4)}))}},Sw=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return U(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return B.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return W("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,r).next(c=>{r-=c,i.add(a)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(r,o)).next(c=>(W("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>a.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let a=$M(o);gI(a,i)>0&&(i=a)}),new Ei(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var ii=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function gh(t){return t==null}function Kd(t){return t===0&&1/t==-1/0}function GM(t){return typeof t=="number"&&Number.isInteger(t)&&!Kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function On(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zA(e)),e=tU(t.get(n),e);return zA(e)}function tU(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function zA(t){return t+""}function _r(t){let e=t.length;if(ae(e>=2),e===2)return ae(t.charAt(0)===""&&t.charAt(1)===""),Ze.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let a=t.indexOf("",o);switch((a<0||a>n)&&ie(),t.charAt(a+1)){case"":let c=t.substring(o,a),u;r.length===0?u=c:(r+=c,u=r,r=""),i.push(u);break;case"":r+=t.substring(o,a),r+="\0";break;case"":r+=t.substring(o,a+1);break;default:ie()}o=a+2}return new Ze(i)}var UA=["userId","batchId"];function Tm(t,e){return[t,On(e)]}function WM(t,e,n){return[t,On(e),n]}var nU={},iU=["prefixPath","collectionGroup","readTime","documentId"],rU=["prefixPath","collectionGroup","documentId"],oU=["collectionGroup","readTime","prefixPath","documentId"],sU=["canonicalId","targetId"],aU=["targetId","path"],cU=["path","targetId"],lU=["collectionId","parent"],uU=["indexId","uid"],dU=["uid","sequenceNumber"],hU=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],fU=["indexId","uid","orderedDocumentKey"],pU=["userId","collectionPath","documentId"],mU=["userId","collectionPath","largestBatchId"],gU=["userId","collectionGroup","largestBatchId"],ZM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_U=[...ZM,"documentOverlays"],KM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QM=KM,YM=[...QM,"indexConfiguration","indexState","indexEntries"],vU=YM;var Qd=class extends Lm{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function hn(t,e){let n=ee(t);return qo.F(n._e,e)}function $A(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ya(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function XM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var bt=class t{constructor(e,n){this.comparator=e,this.root=n||yr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ul(this.root,e,this.comparator,!0)}},ul=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},yr=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};yr.EMPTY=null,yr.RED=!0,yr.BLACK=!1;yr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,n,i,r,o){return this}insert(e,n,i){return new yr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var lt=class t{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Vm(this.data.getIterator())}getIteratorFrom(e){return new Vm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Vm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function tl(t){return t.hasNext()?t.getNext():void 0}var ri=class t{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new t([])}unionWith(e){let n=new lt(Bt.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return pl(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Bm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function JM(){return typeof atob<"u"}var dn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Bm("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dn.EMPTY_BYTE_STRING=new dn("");var yU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(ae(!!t),typeof t=="string"){let e=0,n=yU.exec(t);if(ae(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:kt(t.seconds),nanos:kt(t.nanos)}}function kt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Go(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}function Ag(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function vI(t){let e=t.mapValue.fields.__previous_value__;return Ag(e)?vI(e):e}function Yd(t){let e=Qr(t.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}var Aw=class{constructor(e,n,i,r,o,a,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f}},Wo=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Uo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Sm={nullValue:"NULL_VALUE"};function ca(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ag(t)?4:eR(t)?9007199254740991:10:ie()}function Ir(t,e){if(t===e)return!0;let n=ca(t);if(n!==ca(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yd(t).isEqual(Yd(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=Qr(r.timestampValue),c=Qr(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Go(r.bytesValue).isEqual(Go(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return kt(r.geoPointValue.latitude)===kt(o.geoPointValue.latitude)&&kt(r.geoPointValue.longitude)===kt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return kt(r.integerValue)===kt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=kt(r.doubleValue),c=kt(o.doubleValue);return a===c?Kd(a)===Kd(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return pl(t.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:return function(r,o){let a=r.mapValue.fields||{},c=o.mapValue.fields||{};if($A(a)!==$A(c))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Ir(a[u],c[u])))return!1;return!0}(t,e);default:return ie()}}function Xd(t,e){return(t.values||[]).find(n=>Ir(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;let n=ca(t),i=ca(e);if(n!==i)return Re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,a){let c=kt(o.integerValue||o.doubleValue),u=kt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return HA(t.timestampValue,e.timestampValue);case 4:return HA(Yd(t),Yd(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(o,a){let c=Go(o),u=Go(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){let c=o.split("/"),u=a.split("/");for(let f=0;f<c.length&&f<u.length;f++){let m=Re(c[f],u[f]);if(m!==0)return m}return Re(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){let c=Re(kt(o.latitude),kt(a.latitude));return c!==0?c:Re(kt(o.longitude),kt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,a){let c=o.values||[],u=a.values||[];for(let f=0;f<c.length&&f<u.length;++f){let m=Zo(c[f],u[f]);if(m)return m}return Re(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,a){if(o===Uo.mapValue&&a===Uo.mapValue)return 0;if(o===Uo.mapValue)return 1;if(a===Uo.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),f=a.fields||{},m=Object.keys(f);u.sort(),m.sort();for(let v=0;v<u.length&&v<m.length;++v){let w=Re(u[v],m[v]);if(w!==0)return w;let E=Zo(c[u[v]],f[m[v]]);if(E!==0)return E}return Re(u.length,m.length)}(t.mapValue,e.mapValue);default:throw ie()}}function HA(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);let n=Qr(t),i=Qr(e),r=Re(n.seconds,i.seconds);return r!==0?r:Re(n.nanos,i.nanos)}function gl(t){return Mw(t)}function Mw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Qr(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Go(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return J.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=Mw(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${Mw(n.fields[a])}`;return r+"}"}(t.mapValue):ie()}function la(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rw(t){return!!t&&"integerValue"in t}function Jd(t){return!!t&&"arrayValue"in t}function qA(t){return!!t&&"nullValue"in t}function GA(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Am(t){return!!t&&"mapValue"in t}function $d(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ya(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=$d(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$d(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function bU(t){return"nullValue"in t?Sm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?la(Wo.empty(),J.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ie()}function wU(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?la(Wo.empty(),J.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Uo:ie()}function WA(t,e){let n=Zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function ZA(t,e){let n=Zo(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Dn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Am(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$d(n)}setAll(e){let n=Bt.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=$d(a):r.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());Am(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Am(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){ya(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t($d(this.value))}};function tR(t){let e=[];return ya(t.fields,(n,i)=>{let r=new Bt([n]);if(Am(i)){let o=tR(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new ri(e)}var Zt=class t{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new t(e,0,ue.min(),ue.min(),ue.min(),Dn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,ue.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,ue.min(),ue.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ue.min(),ue.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Er=class{constructor(e,n){this.position=e,this.inclusive=n}};function KA(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],a=t.position[r];if(o.field.isKeyField()?i=J.comparator(J.fromName(a.referenceValue),n.key):i=Zo(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function QA(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ir(t.position[n],e.position[n]))return!1;return!0}var ua=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function IU(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var jm=class{},$e=class t extends jm{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Nw(e,n,i):n==="array-contains"?new Fw(e,i):n==="in"?new zm(e,i):n==="not-in"?new Vw(e,i):n==="array-contains-any"?new Bw(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Ow(e,i):new Lw(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zo(n,this.value)):n!==null&&ca(this.value)===ca(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},nt=class t extends jm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return _l(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function _l(t){return t.op==="and"}function Pw(t){return t.op==="or"}function yI(t){return nR(t)&&_l(t)}function nR(t){for(let e of t.filters)if(e instanceof nt)return!1;return!0}function kw(t){if(t instanceof $e)return t.field.canonicalString()+t.op.toString()+gl(t.value);if(yI(t))return t.filters.map(e=>kw(e)).join(",");{let e=t.filters.map(n=>kw(n)).join(",");return`${t.op}(${e})`}}function iR(t,e){return t instanceof $e?function(i,r){return r instanceof $e&&i.op===r.op&&i.field.isEqual(r.field)&&Ir(i.value,r.value)}(t,e):t instanceof nt?function(i,r){return r instanceof nt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,c)=>o&&iR(a,r.filters[c]),!0):!1}(t,e):void ie()}function rR(t,e){let n=t.filters.concat(e);return nt.create(n,t.op)}function oR(t){return t instanceof $e?function(n){return`${n.field.canonicalString()} ${n.op} ${gl(n.value)}`}(t):t instanceof nt?function(n){return n.op.toString()+" {"+n.getFilters().map(oR).join(" ,")+"}"}(t):"Filter"}var Nw=class extends $e{constructor(e,n,i){super(e,n,i),this.key=J.fromName(i.referenceValue)}matches(e){let n=J.comparator(e.key,this.key);return this.matchesComparison(n)}},Ow=class extends $e{constructor(e,n){super(e,"in",n),this.keys=sR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Lw=class extends $e{constructor(e,n){super(e,"not-in",n),this.keys=sR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function sR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>J.fromName(i.referenceValue))}var Fw=class extends $e{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Jd(n)&&Xd(n.arrayValue,this.value)}},zm=class extends $e{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Xd(this.value.arrayValue,n)}},Vw=class extends $e{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Xd(this.value.arrayValue,n)}},Bw=class extends $e{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Jd(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Xd(this.value.arrayValue,i))}};var jw=class{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function zw(t,e=null,n=[],i=[],r=null,o=null,a=null){return new jw(t,e,n,i,r,o,a)}function da(t){let e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>kw(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),gh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>gl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>gl(i)).join(",")),e.ue=n}return e.ue}function _h(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!IU(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QA(t.startAt,e.startAt)&&QA(t.endAt,e.endAt)}function Um(t){return J.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function $m(t,e){return t.filters.filter(n=>n instanceof $e&&n.field.isEqual(e))}function YA(t,e,n){let i=Sm,r=!0;for(let o of $m(t,e)){let a=Sm,c=!0;switch(o.op){case"<":case"<=":a=bU(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,c=!1;break;case"!=":case"not-in":a=Sm}WA({value:i,inclusive:r},{value:a,inclusive:c})<0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];WA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function XA(t,e,n){let i=Uo,r=!0;for(let o of $m(t,e)){let a=Uo,c=!0;switch(o.op){case">=":case">":a=wU(o.value),c=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,c=!1;break;case"!=":case"not-in":a=Uo}ZA({value:i,inclusive:r},{value:a,inclusive:c})>0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];ZA({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}var Ui=class{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function aR(t,e,n,i,r,o,a,c){return new Ui(t,e,n,i,r,o,a,c)}function Pl(t){return new Ui(t)}function JA(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bI(t){return t.collectionGroup!==null}function hl(t){let e=ee(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new lt(Bt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new ua(o,i))}),n.has(Bt.keyField().canonicalString())||e.ce.push(new ua(Bt.keyField(),i))}return e.ce}function Ln(t){let e=ee(t);return e.le||(e.le=EU(e,hl(t))),e.le}function EU(t,e){if(t.limitType==="F")return zw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new ua(r.field,o)});let n=t.endAt?new Er(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Er(t.startAt.position,t.startAt.inclusive):null;return zw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Uw(t,e){let n=t.filters.concat([e]);return new Ui(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Hm(t,e,n){return new Ui(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vh(t,e){return _h(Ln(t),Ln(e))&&t.limitType===e.limitType}function cR(t){return`${da(Ln(t))}|lt:${t.limitType}`}function sl(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>oR(r)).join(", ")}]`),gh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>gl(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>gl(r)).join(",")),`Target(${i})`}(Ln(t))}; limitType=${t.limitType})`}function yh(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):J.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of hl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,c,u){let f=KA(a,c,u);return a.inclusive?f<=0:f<0}(i.startAt,hl(i),r)||i.endAt&&!function(a,c,u){let f=KA(a,c,u);return a.inclusive?f>=0:f>0}(i.endAt,hl(i),r))}(t,e)}function lR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uR(t){return(e,n)=>{let i=!1;for(let r of hl(t)){let o=CU(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function CU(t,e,n){let i=t.field.isKeyField()?J.comparator(e.key,n.key):function(o,a,c){let u=a.data.field(o),f=c.data.field(o);return u!==null&&f!==null?Zo(u,f):ie()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ie()}}var Cr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ya(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return XM(this.inner)}size(){return this.innerSize}};var DU=new bt(J.comparator);function Gn(){return DU}var dR=new bt(J.comparator);function zd(...t){let e=dR;for(let n of t)e=e.insert(n.key,n);return e}function hR(t){let e=dR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function vr(){return Hd()}function fR(){return Hd()}function Hd(){return new Cr(t=>t.toString(),(t,e)=>t.isEqual(e))}var xU=new bt(J.comparator),TU=new lt(J.comparator);function Pe(...t){let e=TU;for(let n of t)e=e.add(n);return e}var SU=new lt(Re);function wI(){return SU}function pR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Kd(e)?"-0":e}}function mR(t){return{integerValue:""+t}}function gR(t,e){return GM(e)?mR(e):pR(t,e)}var vl=class{constructor(){this._=void 0}};function AU(t,e,n){return t instanceof Ko?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&Ag(o)&&(o=vI(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Yr?vR(t,e):t instanceof Xr?yR(t,e):function(r,o){let a=_R(r,o),c=eM(a)+eM(r.Pe);return Rw(a)&&Rw(r.Pe)?mR(c):pR(r.serializer,c)}(t,e)}function MU(t,e,n){return t instanceof Yr?vR(t,e):t instanceof Xr?yR(t,e):n}function _R(t,e){return t instanceof Qo?function(i){return Rw(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Ko=class extends vl{},Yr=class extends vl{constructor(e){super(),this.elements=e}};function vR(t,e){let n=bR(e);for(let i of t.elements)n.some(r=>Ir(r,i))||n.push(i);return{arrayValue:{values:n}}}var Xr=class extends vl{constructor(e){super(),this.elements=e}};function yR(t,e){let n=bR(e);for(let i of t.elements)n=n.filter(r=>!Ir(r,i));return{arrayValue:{values:n}}}var Qo=class extends vl{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function eM(t){return kt(t.integerValue||t.doubleValue)}function bR(t){return Jd(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ha=class{constructor(e,n){this.field=e,this.transform=n}};function RU(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Yr&&r instanceof Yr||i instanceof Xr&&r instanceof Xr?pl(i.elements,r.elements,Ir):i instanceof Qo&&r instanceof Qo?Ir(i.Pe,r.Pe):i instanceof Ko&&r instanceof Ko}(t.transform,e.transform)}var $w=class{constructor(e,n){this.version=e,this.transformResults=n}},Nt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Mm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var yl=class{};function wR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xo(t.key,Nt.none()):new Yo(t.key,t.data,Nt.none());{let n=t.data,i=Dn.empty(),r=new lt(Bt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new $i(t.key,i,new ri(r.toArray()),Nt.none())}}function PU(t,e,n){t instanceof Yo?function(r,o,a){let c=r.value.clone(),u=nM(r.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof $i?function(r,o,a){if(!Mm(r.precondition,o))return void o.convertToUnknownDocument(a.version);let c=nM(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(IR(r)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function qd(t,e,n,i){return t instanceof Yo?function(o,a,c,u){if(!Mm(o.precondition,a))return c;let f=o.value.clone(),m=iM(o.fieldTransforms,u,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof $i?function(o,a,c,u){if(!Mm(o.precondition,a))return c;let f=iM(o.fieldTransforms,u,a),m=a.data;return m.setAll(IR(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,i):function(o,a,c){return Mm(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function kU(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=_R(i.transform,r||null);o!=null&&(n===null&&(n=Dn.empty()),n.set(i.field,o))}return n||null}function tM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&pl(i,r,(o,a)=>RU(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Yo=class extends yl{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},$i=class extends yl{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function IR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function nM(t,e,n){let i=new Map;ae(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,MU(a,c,n[r]))}return i}function iM(t,e,n){let i=new Map;for(let r of t){let o=r.transform,a=n.data.field(r.field);i.set(r.field,AU(o,a,e))}return i}var Xo=class extends yl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},eh=class extends yl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var th=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&PU(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=qd(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=qd(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=fR();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;let u=wR(a,c);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(ue.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&pl(this.mutations,e.mutations,(n,i)=>tM(n,i))&&pl(this.baseMutations,e.baseMutations,(n,i)=>tM(n,i))}},Hw=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ae(e.mutations.length===i.length);let r=function(){return xU}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new t(e,n,i,r)}};var nh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var qw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ht,We;function ER(t){switch(t){default:return ie();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function CR(t){if(t===void 0)return Vt("GRPC error has no .code"),$.UNKNOWN;switch(t){case Ht.OK:return $.OK;case Ht.CANCELLED:return $.CANCELLED;case Ht.UNKNOWN:return $.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return $.INTERNAL;case Ht.UNAVAILABLE:return $.UNAVAILABLE;case Ht.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ht.NOT_FOUND:return $.NOT_FOUND;case Ht.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ht.ABORTED:return $.ABORTED;case Ht.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ht.DATA_LOSS:return $.DATA_LOSS;default:return ie()}}(We=Ht||(Ht={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";var rM=null;function DR(){return new TextEncoder}var NU=new Fo([4294967295,4294967295],0);function oM(t){let e=DR().encode(t),n=new sw;return n.update(e),new Uint8Array(n.digest())}function sM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Fo([n,i],0),new Fo([r,o],0)]}var Gw=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new sa(`Invalid padding: ${n}`);if(i<0)throw new sa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new sa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new sa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fo.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Fo.fromNumber(i)));return r.compare(NU)===1&&(r=new Fo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=oM(e),[i,r]=sM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let n=oM(e),[i,r]=sM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},sa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ih=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,rh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(ue.min(),r,new bt(Re),Gn(),Pe())}},rh=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Pe(),Pe(),Pe())}};var fl=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},qm=class{constructor(e,n){this.targetId=e,this.me=n}},Gm=class{constructor(e,n,i=dn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},Wm=class{constructor(){this.fe=0,this.ge=cM(),this.pe=dn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Pe(),n=Pe(),i=Pe();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ie()}}),new rh(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=cM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ww=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gn(),this.qe=aM(),this.Qe=new bt(Re)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(Um(o))if(i===0){let a=new J(o.path);this.Ue(n,a,Zt.newNoDocument(a,ue.min()))}else ae(i===1);else{let a=this.Ye(n);if(a!==i){let c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}rM?.et(function(m,v,w,E,M){var k,F,q,te,Z,oe;let de={localCacheCount:m,existenceFilterCount:v.count,databaseId:w.database,projectId:w.projectId},ce=v.unchangedNames;return ce&&(de.bloomFilter={applied:M===0,hashCount:(k=ce?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(te=(q=(F=ce?.bits)===null||F===void 0?void 0:F.bitmap)===null||q===void 0?void 0:q.length)!==null&&te!==void 0?te:0,padding:(oe=(Z=ce?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&oe!==void 0?oe:0,mightContain:S=>{var C;return(C=E?.mightContain(S))!==null&&C!==void 0&&C}}),de}(a,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,a,c;try{a=Go(i).toUint8Array()}catch(u){if(u instanceof Bm)return Ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Gw(a,r,o)}catch(u){return Ii(u instanceof sa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,a)=>{let c=this.Je(a);if(c){if(o.current&&Um(c.target)){let u=new J(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Zt.newNoDocument(u,e))}o.be&&(n.set(a,o.Ce()),o.ve())}});let i=Pe();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new ih(e,n,this.Qe,this.ke,i);return this.ke=Gn(),this.qe=aM(),this.Qe=new bt(Re),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Wm,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(Re),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Wm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function aM(){return new bt(J.comparator)}function cM(){return new bt(J.comparator)}var OU={asc:"ASCENDING",desc:"DESCENDING"},LU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FU={and:"AND",or:"OR"},Zw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Kw(t,e){return t.useProto3Json||gh(e)?e:{value:e}}function bl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function VU(t,e){return bl(t,e.toTimestamp())}function jt(t){return ae(!!t),ue.fromTimestamp(function(n){let i=Qr(n);return new Rt(i.seconds,i.nanos)}(t))}function II(t,e){return Qw(t,e).canonicalString()}function Qw(t,e){let n=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TR(t){let e=Ze.fromString(t);return ae(FR(e)),e}function oh(t,e){return II(t.databaseId,e.path)}function br(t,e){let n=TR(e);if(n.get(1)!==t.databaseId.projectId)throw new H($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new J(MR(n))}function SR(t,e){return II(t.databaseId,e)}function AR(t){let e=TR(t);return e.length===4?Ze.emptyPath():MR(e)}function Yw(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MR(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function lM(t,e,n){return{name:oh(t,e),fields:n.value.mapValue.fields}}function RR(t,e,n){let i=br(t,e.name),r=jt(e.updateTime),o=e.createTime?jt(e.createTime):ue.min(),a=new Dn({mapValue:{fields:e.fields}}),c=Zt.newFoundDocument(i,r,o,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function BU(t,e){return"found"in e?function(i,r){ae(!!r.found),r.found.name,r.found.updateTime;let o=br(i,r.found.name),a=jt(r.found.updateTime),c=r.found.createTime?jt(r.found.createTime):ue.min(),u=new Dn({mapValue:{fields:r.found.fields}});return Zt.newFoundDocument(o,a,c,u)}(t,e):"missing"in e?function(i,r){ae(!!r.missing),ae(!!r.readTime);let o=br(i,r.missing),a=jt(r.readTime);return Zt.newNoDocument(o,a)}(t,e):ie()}function jU(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(ae(m===void 0||typeof m=="string"),dn.fromBase64String(m||"")):(ae(m===void 0||m instanceof Buffer||m instanceof Uint8Array),dn.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let m=f.code===void 0?$.UNKNOWN:CR(f.code);return new H(m,f.message||"")}(a);n=new Gm(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=br(t,i.document.name),o=jt(i.document.updateTime),a=i.document.createTime?jt(i.document.createTime):ue.min(),c=new Dn({mapValue:{fields:i.document.fields}}),u=Zt.newFoundDocument(r,o,a,c),f=i.targetIds||[],m=i.removedTargetIds||[];n=new fl(f,m,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=br(t,i.document),o=i.readTime?jt(i.readTime):ue.min(),a=Zt.newNoDocument(r,o),c=i.removedTargetIds||[];n=new fl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=br(t,i.document),o=i.removedTargetIds||[];n=new fl([],o,r,null)}else{if(!("filter"in e))return ie();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new qw(r,o),c=i.targetId;n=new qm(c,a)}}return n}function sh(t,e){let n;if(e instanceof Yo)n={update:lM(t,e.key,e.value)};else if(e instanceof Xo)n={delete:oh(t,e.key)};else if(e instanceof $i)n={update:lM(t,e.key,e.data),updateMask:GU(e.fieldMask)};else{if(!(e instanceof eh))return ie();n={verify:oh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let c=a.transform;if(c instanceof Ko)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Yr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Qo)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ie()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:VU(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ie()}(t,e.precondition)),n}function Xw(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Nt.updateTime(jt(o.updateTime)):o.exists!==void 0?Nt.exists(o.exists):Nt.none()}(e.currentDocument):Nt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,c){let u=null;if("setToServerValue"in c)ae(c.setToServerValue==="REQUEST_TIME"),u=new Ko;else if("appendMissingElements"in c){let m=c.appendMissingElements.values||[];u=new Yr(m)}else if("removeAllFromArray"in c){let m=c.removeAllFromArray.values||[];u=new Xr(m)}else"increment"in c?u=new Qo(a,c.increment):ie();let f=Bt.fromServerFormat(c.fieldPath);return new ha(f,u)}(t,r)):[];if(e.update){e.update.name;let r=br(t,e.update.name),o=new Dn({mapValue:{fields:e.update.fields}});if(e.updateMask){let a=function(u){let f=u.fieldPaths||[];return new ri(f.map(m=>Bt.fromServerFormat(m)))}(e.updateMask);return new $i(r,o,a,n,i)}return new Yo(r,o,n,i)}if(e.delete){let r=br(t,e.delete);return new Xo(r,n)}if(e.verify){let r=br(t,e.verify);return new eh(r,n)}return ie()}function zU(t,e){return t&&t.length>0?(ae(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?jt(r.updateTime):jt(o);return a.isEqual(ue.min())&&(a=jt(o)),new $w(a,r.transformResults||[])}(n,e))):[]}function PR(t,e){return{documents:[SR(t,e.path)]}}function kR(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=SR(t,r);let o=function(f){if(f.length!==0)return LR(nt.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(m=>function(w){return{field:al(w.field),direction:$U(w.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);let c=Kw(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function NR(t){let e=AR(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ae(i===1);let m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(v){let w=OR(v);return w instanceof nt&&yI(w)?w.getFilters():[w]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(w=>function(M){return new ua(cl(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(w))}(n.orderBy));let c=null;n.limit&&(c=function(v){let w;return w=typeof v=="object"?v.value:v,gh(w)?null:w}(n.limit));let u=null;n.startAt&&(u=function(v){let w=!!v.before,E=v.values||[];return new Er(E,w)}(n.startAt));let f=null;return n.endAt&&(f=function(v){let w=!v.before,E=v.values||[];return new Er(E,w)}(n.endAt)),aR(e,r,a,o,c,"F",u,f)}function UU(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=cl(n.unaryFilter.field);return $e.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=cl(n.unaryFilter.field);return $e.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=cl(n.unaryFilter.field);return $e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=cl(n.unaryFilter.field);return $e.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(t):t.fieldFilter!==void 0?function(n){return $e.create(cl(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nt.create(n.compositeFilter.filters.map(i=>OR(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ie()}}(n.compositeFilter.op))}(t):ie()}function $U(t){return OU[t]}function HU(t){return LU[t]}function qU(t){return FU[t]}function al(t){return{fieldPath:t.canonicalString()}}function cl(t){return Bt.fromServerFormat(t.fieldPath)}function LR(t){return t instanceof $e?function(n){if(n.op==="=="){if(GA(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NAN"}};if(qA(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(GA(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NAN"}};if(qA(n.value))return{unaryFilter:{field:al(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(n.field),op:HU(n.op),value:n.value}}}(t):t instanceof nt?function(n){let i=n.getFilters().map(r=>LR(r));return i.length===1?i[0]:{compositeFilter:{op:qU(n.op),filters:i}}}(t):ie()}function GU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function FR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var wl=class t{constructor(e,n,i,r,o=ue.min(),a=ue.min(),c=dn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Zm=class{constructor(e){this.ct=e}};function WU(t,e){let n;if(e.document)n=RR(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=J.fromSegments(e.noDocument.path),r=pa(e.noDocument.readTime);n=Zt.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{let i=J.fromSegments(e.unknownDocument.path),r=pa(e.unknownDocument.version);n=Zt.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Rt(r[0],r[1]);return ue.fromTimestamp(o)}(e.readTime)),n}function uM(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Km(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,a){return{name:oh(o,a.key),fields:a.data.value.mapValue.fields,updateTime:bl(o,a.version.toTimestamp()),createTime:bl(o,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:fa(e.version)};else{if(!e.isUnknownDocument())return ie();i.unknownDocument={path:n.path.toArray(),version:fa(e.version)}}return i}function Km(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function fa(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pa(t){let e=new Rt(t.seconds,t.nanoseconds);return ue.fromTimestamp(e)}function ia(t,e){let n=(e.baseMutations||[]).map(o=>Xw(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let c=e.mutations[o+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>Xw(t.ct,o)),r=Rt.fromMillis(e.localWriteTimeMs);return new th(e.batchId,r,n,i)}function Ud(t){let e=pa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?pa(t.lastLimboFreeSnapshotVersion):ue.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return ae(o.documents.length===1),Ln(Pl(AR(o.documents[0])))}(t.query):function(o){return Ln(NR(o))}(t.query),new wl(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,dn.fromBase64String(t.resumeToken))}function VR(t,e){let n=fa(e.snapshotVersion),i=fa(e.lastLimboFreeSnapshotVersion),r;r=Um(e.target)?PR(t.ct,e.target):kR(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:da(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function EI(t){let e=NR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hm(e,e.limit,"L"):e}function fw(t,e){return new nh(e.largestBatchId,Xw(t.ct,e.overlayMutation))}function dM(t,e){let n=e.path.lastSegment();return[t,On(e.path.popLast()),n]}function hM(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:fa(i.readTime),documentKey:On(i.documentKey.path),largestBatchId:i.largestBatchId}}var Jw=class{getBundleMetadata(e,n){return fM(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:pa(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return fM(e).put(function(r){return{bundleId:r.id,createTime:fa(jt(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return pM(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:EI(o.bundledQuery),readTime:pa(o.readTime)}}(i)})}saveNamedQuery(e,n){return pM(e).put(function(r){return{name:r.name,readTime:fa(jt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function fM(t){return hn(t,"bundles")}function pM(t){return hn(t,"namedQueries")}var Qm=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Fd(e).get(dM(this.userId,n)).next(i=>i?fw(this.serializer,i):null)}getOverlays(e,n){let i=vr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,a)=>{let c=new nh(n,a);r.push(this.ht(e,c))}),B.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(a=>r.add(On(a.getCollectionPath())));let o=[];return r.forEach(a=>{let c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);o.push(Fd(e).j("collectionPathOverlayIndex",c))}),B.waitFor(o)}getOverlaysForCollection(e,n,i){let r=vr(),o=On(n),a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fd(e).U("collectionPathOverlayIndex",a).next(c=>{for(let u of c){let f=fw(this.serializer,u);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=vr(),a,c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fd(e).J({index:"collectionGroupOverlayIndex",range:c},(u,f,m)=>{let v=fw(this.serializer,f);o.size()<r||v.largestBatchId===a?(o.set(v.getKey(),v),a=v.largestBatchId):m.done()}).next(()=>o)}ht(e,n){return Fd(e).put(function(r,o,a){let[c,u,f]=dM(o,a.mutation.key);return{userId:o,collectionPath:u,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:sh(r.ct,a.mutation)}}(this.serializer,this.userId,n))}};function Fd(t){return hn(t,"documentOverlays")}var Zr=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(kt(e.integerValue));else if("doubleValue"in e){let i=kt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Kd(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Qr(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Go(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?eR(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ie()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),J.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Zr.bt=new Zr;function ZU(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function mM(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let a=ZU(255&i[o]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}var e0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=mM(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=mM(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},t0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},n0=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},ra=class{constructor(){this.Gt=new e0,this.zt=new t0(this.Gt),this.jt=new n0(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var oa=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Vo(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=gM(t.arrayValue,e.arrayValue),n!==0?n:(n=gM(t.directionalValue,e.directionalValue),n!==0?n:J.comparator(t.documentKey,e.documentKey)))}function gM(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Ym=class{constructor(e){this.Yt=new lt((n,i)=>Bt.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(ae(e.collectionGroup===this.collectionId),this.en)return!1;let n=Cw(e);if(n!==void 0&&!this.nn(n))return!1;let i=ta(e),r=new Set,o=0,a=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let c=this.Yt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let u=i[o];if(!this.rn(c,u)||!this.sn(this.Zt[a++],u))return!1}++o}for(;o<i.length;++o){let c=i[o];if(a>=this.Zt.length||!this.sn(this.Zt[a++],c))return!1}return!0}on(){if(this.en)return null;let e=new lt(Bt.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new dl(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new dl(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new dl(i.field,i.dir==="asc"?0:1)));return new ml(ml.UNKNOWN_ID,this.collectionId,n,Zd.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function BR(t){var e,n;if(ae(t instanceof $e||t instanceof nt),t instanceof $e){if(t instanceof zm){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>$e.create(t.field,"==",o)))||[];return nt.create(r,"or")}return t}let i=t.filters.map(r=>BR(r));return nt.create(i,t.op)}function KU(t){if(t.getFilters().length===0)return[];let e=o0(BR(t));return ae(jR(e)),i0(e)||r0(e)?[e]:e.getFilters()}function i0(t){return t instanceof $e}function r0(t){return t instanceof nt&&yI(t)}function jR(t){return i0(t)||r0(t)||function(n){if(n instanceof nt&&Pw(n)){for(let i of n.getFilters())if(!i0(i)&&!r0(i))return!1;return!0}return!1}(t)}function o0(t){if(ae(t instanceof $e||t instanceof nt),t instanceof $e)return t;if(t.filters.length===1)return o0(t.filters[0]);let e=t.filters.map(i=>o0(i)),n=nt.create(e,t.op);return n=Xm(n),jR(n)?n:(ae(n instanceof nt),ae(_l(n)),ae(n.filters.length>1),n.filters.reduce((i,r)=>CI(i,r)))}function CI(t,e){let n;return ae(t instanceof $e||t instanceof nt),ae(e instanceof $e||e instanceof nt),n=t instanceof $e?e instanceof $e?function(r,o){return nt.create([r,o],"and")}(t,e):_M(t,e):e instanceof $e?_M(e,t):function(r,o){if(ae(r.filters.length>0&&o.filters.length>0),_l(r)&&_l(o))return rR(r,o.getFilters());let a=Pw(r)?r:o,c=Pw(r)?o:r,u=a.filters.map(f=>CI(f,c));return nt.create(u,"or")}(t,e),Xm(n)}function _M(t,e){if(_l(e))return rR(e,t.getFilters());{let n=e.filters.map(i=>CI(t,i));return nt.create(n,"or")}}function Xm(t){if(ae(t instanceof $e||t instanceof nt),t instanceof $e)return t;let e=t.getFilters();if(e.length===1)return Xm(e[0]);if(nR(t))return t;let n=e.map(r=>Xm(r)),i=[];return n.forEach(r=>{r instanceof $e?i.push(r):r instanceof nt&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:nt.create(i,t.op)}var s0=class{constructor(){this._n=new ah}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Ei.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},ah=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new lt(Ze.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new lt(Ze.comparator)).toArray()}};var Em=new Uint8Array(0),a0=class{constructor(e,n){this.databaseId=n,this.an=new ah,this.un=new Cr(i=>da(i),(i,r)=>_h(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:On(r)};return vM(e).put(o)}return B.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[zM(n),""],!1,!0);return vM(e).U(r).next(o=>{for(let a of o){if(a.collectionId!==n)break;i.push(_r(a.parent))}return i})}addFieldIndex(e,n){let i=Vd(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let a=il(e);return o.next(c=>{a.put(hM(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=Vd(e),r=il(e),o=nl(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Vd(e),i=nl(e),r=il(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return B.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new Ym(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=nl(e),r=!0,o=new Map;return B.forEach(this.cn(n),a=>this.ln(e,a).next(c=>{r&&(r=!!c),o.set(a,c)})).next(()=>{if(r){let a=Pe(),c=[];return B.forEach(o,(u,f)=>{W("IndexedDbIndexManager",`Using index ${function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map(oe=>`${oe.fieldPath}:${oe.kind}`).join(",")}`}(u)} to execute ${da(n)}`);let m=function(Z,oe){let de=Cw(oe);if(de===void 0)return null;for(let ce of $m(Z,de.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null}(f,u),v=function(Z,oe){let de=new Map;for(let ce of ta(oe))for(let S of $m(Z,ce.fieldPath))switch(S.op){case"==":case"in":de.set(ce.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return de.set(ce.fieldPath.canonicalString(),S.value),Array.from(de.values())}return null}(f,u),w=function(Z,oe){let de=[],ce=!0;for(let S of ta(oe)){let C=S.kind===0?YA(Z,S.fieldPath,Z.startAt):XA(Z,S.fieldPath,Z.startAt);de.push(C.value),ce&&(ce=C.inclusive)}return new Er(de,ce)}(f,u),E=function(Z,oe){let de=[],ce=!0;for(let S of ta(oe)){let C=S.kind===0?XA(Z,S.fieldPath,Z.endAt):YA(Z,S.fieldPath,Z.endAt);de.push(C.value),ce&&(ce=C.inclusive)}return new Er(de,ce)}(f,u),M=this.hn(u,f,w),k=this.hn(u,f,E),F=this.Pn(u,f,v),q=this.In(u.indexId,m,M,w.inclusive,k,E.inclusive,F);return B.forEach(q,te=>i.G(te,n.limit).next(Z=>{Z.forEach(oe=>{let de=J.fromSegments(oe.documentKey);a.has(de)||(a=a.add(de),c.push(de))})}))}).next(()=>c)}return B.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=KU(nt.create(e.filters,"and")).map(i=>zw(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,a,c){let u=(n!=null?n.length:1)*Math.max(i.length,o.length),f=u/(n!=null?n.length:1),m=[];for(let v=0;v<u;++v){let w=n?this.Tn(n[v/f]):Em,E=this.En(e,w,i[v%f],r),M=this.dn(e,w,o[v%f],a),k=c.map(F=>this.En(e,w,F,!0));m.push(...this.createRange(E,M,k))}return m}En(e,n,i,r){let o=new oa(e,J.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new oa(e,J.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new Ym(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let a=null;for(let c of o)i.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,n){let i=2,r=this.cn(n);return B.forEach(r,o=>this.ln(e,o).next(a=>{a?i!==0&&a.fields.length<function(u){let f=new lt(Bt.comparator),m=!1;for(let v of u.filters)for(let w of v.getFlattenedFilters())w.field.isKeyField()||(w.op==="array-contains"||w.op==="array-contains-any"?m=!0:f=f.add(w.field));for(let v of u.orderBy)v.field.isKeyField()||(f=f.add(v.field));return f.size+(m?1:0)}(o)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new ra;for(let r of ta(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let a=i.Ht(r.kind);Zr.bt.Pt(o,a)}return i.Wt()}Tn(e){let n=new ra;return Zr.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new ra;return Zr.bt.Pt(la(this.databaseId,n),i.Ht(function(o){let a=ta(o);return a.length===0?0:a[a.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new ra);let o=0;for(let a of ta(e)){let c=i[o++];for(let u of r)if(this.Vn(n,a.fieldPath)&&Jd(c))r=this.mn(r,a,c);else{let f=u.Ht(a.kind);Zr.bt.Pt(c,f)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let a of i.arrayValue.values||[])for(let c of r){let u=new ra;u.seed(c.Wt()),Zr.bt.Pt(a,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof $e&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Vd(e),r=il(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let a=[];return B.forEach(o,c=>r.get([c.indexId,this.uid]).next(u=>{a.push(function(m,v){let w=v?new Zd(v.sequenceNumber,new Ei(pa(v.readTime),new J(_r(v.documentKey)),v.largestBatchId)):Zd.empty(),E=m.fields.map(([M,k])=>new dl(Bt.fromServerFormat(M),k));return new ml(m.indexId,m.collectionGroup,E,w)}(c,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Re(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Vd(e),o=il(e);return this.gn(e).next(a=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>B.forEach(c,u=>o.put(hM(u.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){let i=new Map;return B.forEach(n,(r,o)=>{let a=i.get(r.collectionGroup);return(a?B.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),B.forEach(c,u=>this.pn(e,r,u).next(f=>{let m=this.yn(o,u);return f.isEqual(m)?B.resolve():this.wn(e,o,u,f,m)}))))})}Sn(e,n,i,r){return nl(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return nl(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=nl(e),o=new lt(Vo);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(a,c)=>{o=o.add(new oa(i.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>o)}yn(e,n){let i=new lt(Vo),r=this.An(n,e);if(r==null)return i;let o=Cw(n);if(o!=null){let a=e.data.field(o.fieldPath);if(Jd(a))for(let c of a.arrayValue.values||[])i=i.add(new oa(n.indexId,e.key,this.Tn(c),r))}else i=i.add(new oa(n.indexId,e.key,Em,r));return i}wn(e,n,i,r,o){W("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let a=[];return function(u,f,m,v,w){let E=u.getIterator(),M=f.getIterator(),k=tl(E),F=tl(M);for(;k||F;){let q=!1,te=!1;if(k&&F){let Z=m(k,F);Z<0?te=!0:Z>0&&(q=!0)}else k!=null?te=!0:q=!0;q?(v(F),F=tl(M)):te?(w(k),k=tl(E)):(k=tl(E),F=tl(M))}}(r,o,Vo,c=>{a.push(this.Sn(e,n,i,c))},c=>{a.push(this.bn(e,n,i,c))}),B.waitFor(a)}gn(e){let n=1;return il(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,c)=>Vo(a,c)).filter((a,c,u)=>!c||Vo(a,u[c-1])!==0);let r=[];r.push(e);for(let a of i){let c=Vo(a,e),u=Vo(a,n);if(c===0)r[0]=e.Jt();else if(c>0&&u<0)r.push(a),r.push(a.Jt());else if(u>0)break}r.push(n);let o=[];for(let a=0;a<r.length;a+=2){if(this.Dn(r[a],r[a+1]))return[];let c=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,Em,[]],u=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,Em,[]];o.push(IDBKeyRange.bound(c,u))}return o}Dn(e,n){return Vo(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(yM)}getMinOffset(e,n){return B.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||ie())).next(yM)}};function vM(t){return hn(t,"collectionParents")}function nl(t){return hn(t,"indexEntries")}function Vd(t){return hn(t,"indexConfiguration")}function il(t){return hn(t,"indexState")}function yM(t){ae(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;gI(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Ei(e.readTime,e.documentKey,n)}var bM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wi=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function zR(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId),c=0,u=i.J({range:a},(m,v,w)=>(c++,w.delete()));o.push(u.next(()=>{ae(c===1)}));let f=[];for(let m of n.mutations){let v=WM(e,m.key.path,n.batchId);o.push(r.delete(v)),f.push(m.key)}return B.waitFor(o).next(()=>f)}function Jm(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ie();e=t.noDocument}return JSON.stringify(e).length}wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(41943040,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);var eg=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){ae(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bo(e).J({index:"userMutationsIndex",range:i},(r,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=ll(e),a=Bo(e);return a.add({}).next(c=>{ae(typeof c=="number");let u=new th(c,n,i,r),f=function(E,M,k){let F=k.baseMutations.map(te=>sh(E.ct,te)),q=k.mutations.map(te=>sh(E.ct,te));return{userId:M,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:F,mutations:q}}(this.serializer,this.userId,u),m=[],v=new lt((w,E)=>Re(w.canonicalString(),E.canonicalString()));for(let w of r){let E=WM(this.userId,w.key.path,c);v=v.add(w.key.path.popLast()),m.push(a.put(f)),m.push(o.put(E,nU))}return v.forEach(w=>{m.push(this.indexManager.addToCollectionParentIndex(e,w))}),e.addOnCommittedListener(()=>{this.Cn[c]=u.keys()}),B.waitFor(m).next(()=>u)})}lookupMutationBatch(e,n){return Bo(e).get(n).next(i=>i?(ae(i.userId===this.userId),ia(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?B.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Bo(e).J({index:"userMutationsIndex",range:r},(a,c,u)=>{c.userId===this.userId&&(ae(c.batchId>=i),o=ia(this.serializer,c)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Bo(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,a)=>{i=o.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bo(e).U("userMutationsIndex",n).next(i=>i.map(r=>ia(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=Tm(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return ll(e).J({range:r},(a,c,u)=>{let[f,m,v]=a,w=_r(m);if(f===this.userId&&n.path.isEqual(w))return Bo(e).get(v).next(E=>{if(!E)throw ie();ae(E.userId===this.userId),o.push(ia(this.serializer,E))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new lt(Re),r=[];return n.forEach(o=>{let a=Tm(this.userId,o.path),c=IDBKeyRange.lowerBound(a),u=ll(e).J({range:c},(f,m,v)=>{let[w,E,M]=f,k=_r(E);w===this.userId&&o.path.isEqual(k)?i=i.add(M):v.done()});r.push(u)}),B.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=Tm(this.userId,i),a=IDBKeyRange.lowerBound(o),c=new lt(Re);return ll(e).J({range:a},(u,f,m)=>{let[v,w,E]=u,M=_r(w);v===this.userId&&i.isPrefixOf(M)?M.length===r&&(c=c.add(E)):m.done()}).next(()=>this.Fn(e,c))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Bo(e).get(o).next(a=>{if(a===null)throw ie();ae(a.userId===this.userId),i.push(ia(this.serializer,a))}))}),B.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return zR(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),B.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();let i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return ll(e).J({range:i},(o,a,c)=>{if(o[0]===this.userId){let u=_r(o[1]);r.push(u)}else c.done()}).next(()=>{ae(r.length===0)})})}containsKey(e,n){return UR(e,this.userId,n)}xn(e){return $R(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function UR(t,e,n){let i=Tm(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),a=!1;return ll(t).J({range:o,H:!0},(c,u,f)=>{let[m,v,w]=c;m===e&&v===r&&(a=!0),f.done()}).next(()=>a)}function Bo(t){return hn(t,"mutations")}function ll(t){return hn(t,"documentMutations")}function $R(t){return hn(t,"mutationQueues")}var Il=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var c0=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new Il(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ue.fromTimestamp(new Rt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>rl(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(ae(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return rl(e).J((a,c)=>{let u=Ud(c);u.sequenceNumber<=n&&i.get(u.targetId)===null&&(r++,o.push(this.removeTargetData(e,u)))}).next(()=>B.waitFor(o)).next(()=>r)}forEachTarget(e,n){return rl(e).J((i,r)=>{let o=Ud(r);n(o)})}Bn(e){return wM(e).get("targetGlobalKey").next(n=>(ae(n!==null),n))}kn(e,n){return wM(e).put("targetGlobalKey",n)}qn(e,n){return rl(e).put(VR(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=da(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return rl(e).J({range:r,index:"queryTargetsIndex"},(a,c,u)=>{let f=Ud(c);_h(n,f.target)&&(o=f,u.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=jo(e);return n.forEach(a=>{let c=On(a.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,a))}),B.waitFor(r)}removeMatchingKeys(e,n,i){let r=jo(e);return B.forEach(n,o=>{let a=On(o.path);return B.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=jo(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=jo(e),o=Pe();return r.J({range:i,H:!0},(a,c,u)=>{let f=_r(a[1]),m=new J(f);o=o.add(m)}).next(()=>o)}containsKey(e,n){let i=On(n.path),r=IDBKeyRange.bound([i],[zM(i)],!1,!0),o=0;return jo(e).J({index:"documentTargetsIndex",H:!0,range:r},([a,c],u,f)=>{a!==0&&(o++,f.done())}).next(()=>o>0)}ot(e,n){return rl(e).get(n).next(i=>i?Ud(i):null)}};function rl(t){return hn(t,"targets")}function wM(t){return hn(t,"targetGlobal")}function jo(t){return hn(t,"targetDocuments")}function IM([t,e],[n,i]){let r=Re(t,n);return r===0?Re(e,i):r}var l0=class{constructor(e){this.Kn=e,this.buffer=new lt(IM),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();IM(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},u0=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){W("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>U(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ts(n)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield es(n)}yield this.zn(3e5)}))}},d0=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(ii.oe);let i=new l0(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(bM)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bM):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,a,c,u,f,m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),r=this.params.maximumSequenceNumbersToCollect):r=v,a=Date.now(),this.nthSequenceNumber(e,r))).next(v=>(i=v,c=Date.now(),this.removeTargets(e,i,n))).next(v=>(o=v,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(v=>(f=Date.now(),ol()<=nr.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${v} documents in `+(f-u)+`ms
Total Duration: ${f-m}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:v})))}};function QU(t,e){return new d0(t,e)}var h0=class{constructor(e,n){this.db=e,this.garbageCollector=QU(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return Cm(e,i)}removeReference(e,n,i){return Cm(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Cm(e,n)}er(e,n){return function(r,o){let a=!1;return $R(r).Y(c=>UR(r,c,o).next(u=>(u&&(a=!0),B.resolve(!u)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(a,c)=>{if(c<=n){let u=this.er(e,a).next(f=>{if(!f)return o++,i.getEntry(e,a).next(()=>(i.removeEntry(a,ue.min()),jo(e).delete(function(v){return[0,On(v.path)]}(a))))});r.push(u)}}).next(()=>B.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Cm(e,n)}Xn(e,n){let i=jo(e),r,o=ii.oe;return i.J({index:"documentTargetsIndex"},([a,c],{path:u,sequenceNumber:f})=>{a===0?(o!==ii.oe&&n(new J(_r(r)),o),o=f,r=u):o=ii.oe}).next(()=>{o!==ii.oe&&n(new J(_r(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Cm(t,e){return jo(t).put(function(i,r){return{targetId:0,path:On(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var tg=class{constructor(){this.changes=new Cr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Zt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var f0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return ea(e).put(i)}removeEntry(e,n,i){return ea(e).delete(function(o,a){let c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Km(a),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=Zt.newInvalidDocument(n);return ea(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:Zt.newInvalidDocument(n)};return ea(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Bd(n))},(r,o)=>{i={document:this.nr(n,o),size:Jm(o)}}).next(()=>i)}getEntries(e,n){let i=Gn();return this.ir(e,n,(r,o)=>{let a=this.nr(r,o);i=i.insert(r,a)}).next(()=>i)}sr(e,n){let i=Gn(),r=new bt(J.comparator);return this.ir(e,n,(o,a)=>{let c=this.nr(o,a);i=i.insert(o,c),r=r.insert(o,Jm(a))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return B.resolve();let r=new lt(DM);n.forEach(u=>r=r.add(u));let o=IDBKeyRange.bound(Bd(r.first()),Bd(r.last())),a=r.getIterator(),c=a.getNext();return ea(e).J({index:"documentKeyIndex",range:o},(u,f,m)=>{let v=J.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&DM(c,v)<0;)i(c,null),c=a.getNext();c&&c.isEqual(v)&&(i(c,f),c=a.hasNext()?a.getNext():null),c?m.$(Bd(c)):m.done()}).next(()=>{for(;c;)i(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let a=n.path,c=[a.popLast().toArray(),a.lastSegment(),Km(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ea(e).U(IDBKeyRange.bound(c,u,!0)).next(f=>{o?.incrementDocumentReadCount(f.length);let m=Gn();for(let v of f){let w=this.nr(J.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);w.isFoundDocument()&&(yh(n,w)||r.has(w.key))&&(m=m.insert(w.key,w))}return m})}getAllFromCollectionGroup(e,n,i,r){let o=Gn(),a=CM(n,i),c=CM(n,Ei.max());return ea(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(u,f,m)=>{let v=this.nr(J.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(v.key,v),o.size===r&&m.done()}).next(()=>o)}newChangeBuffer(e){return new p0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return EM(e).get("remoteDocumentGlobalKey").next(n=>(ae(!!n),n))}tr(e,n){return EM(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=WU(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(ue.min())))return i}return Zt.newInvalidDocument(e)}};function HR(t){return new f0(t)}var p0=class extends tg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Cr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new lt((o,a)=>Re(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{let c=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,c.readTime)),a.isValidDocument()){let u=uM(this.ar.serializer,a);r=r.add(o.path.popLast());let f=Jm(u);i+=f-c.size,n.push(this.ar.addEntry(e,o,u))}else if(i-=c.size,this.trackRemovals){let u=uM(this.ar.serializer,a.convertToNoDocument(ue.min()));n.push(this.ar.addEntry(e,o,u))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),B.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,a)=>{this.ur.set(o,{size:a,readTime:i.get(o).readTime})}),i))}};function EM(t){return hn(t,"remoteDocumentGlobal")}function ea(t){return hn(t,"remoteDocumentsV14")}function Bd(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function CM(t,e){let n=e.documentKey.path.toArray();return[t,Km(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function DM(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Re(n[o],i[o]),r)return r;return r=Re(n.length,i.length),r||(r=Re(n[n.length-2],i[i.length-2]),r||Re(n[n.length-1],i[i.length-1]))}var m0=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var ng=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&qd(i.mutation,r,ri.empty(),Rt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Pe()){let r=vr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=zd();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){let i=vr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Pe()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=Gn(),a=Hd(),c=function(){return Hd()}();return n.forEach((u,f)=>{let m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof $i)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),qd(m.mutation,f,m.mutation.getFieldMask(),Rt.now())):a.set(f.key,ri.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>{var v;return c.set(f,new m0(m,(v=a.get(f))!==null&&v!==void 0?v:null))}),c))}recalculateAndSaveOverlays(e,n){let i=Hd(),r=new bt((a,c)=>a-c),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(let c of a)c.keys().forEach(u=>{let f=n.get(u);if(f===null)return;let m=i.get(u)||ri.empty();m=c.applyToLocalView(f,m),i.set(u,m);let v=(r.get(c.batchId)||Pe()).add(u);r=r.insert(c.batchId,v)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),f=u.key,m=u.value,v=fR();m.forEach(w=>{if(!o.has(w)){let E=wR(n.get(w),i.get(w));E!==null&&v.set(w,E),o=o.add(w)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,v))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return J.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):B.resolve(vr()),c=-1,u=o;return a.next(f=>B.forEach(f,(m,v)=>(c<v.largestBatchId&&(c=v.largestBatchId),o.get(m)?B.resolve():this.remoteDocumentCache.getEntry(e,m).next(w=>{u=u.insert(m,w)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,Pe())).next(m=>({batchId:c,changes:hR(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new J(n)).next(i=>{let r=zd();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,a=zd();return this.indexManager.getCollectionParents(e,o).next(c=>B.forEach(c,u=>{let f=function(v,w){return new Ui(w,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((v,w)=>{a=a.insert(v,w)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((u,f)=>{let m=f.getKey();a.get(m)===null&&(a=a.insert(m,Zt.newInvalidDocument(m)))});let c=zd();return a.forEach((u,f)=>{let m=o.get(u);m!==void 0&&qd(m.mutation,f,ri.empty(),Rt.now()),yh(n,f)&&(c=c.insert(u,f))}),c})}};var g0=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:jt(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:EI(r.bundledQuery),readTime:jt(r.readTime)}}(n)),B.resolve()}};var _0=class{constructor(){this.overlays=new bt(J.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let i=vr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){let r=vr(),o=n.length+1,a=new J(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new bt((f,m)=>f-m),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=vr(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}let c=vr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,m)=>c.set(f,m)),!(c.size()>=r)););return B.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new nh(n,i));let o=this.hr.get(n);o===void 0&&(o=Pe(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var ch=class{constructor(){this.Pr=new lt(qt.Ir),this.Tr=new lt(qt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new qt(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new qt(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new J(new Ze([])),i=new qt(n,e),r=new qt(n,e+1),o=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new J(new Ze([])),i=new qt(n,e),r=new qt(n,e+1),o=Pe();return this.Tr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let n=new qt(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},qt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return J.comparator(e.key,n.key)||Re(e.pr,n.pr)}static Er(e,n){return Re(e.pr,n.pr)||J.comparator(e.key,n.key)}};var v0=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new lt(qt.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new th(o,n,i,r);this.mutationQueue.push(a);for(let c of r)this.wr=this.wr.add(new qt(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new qt(n,0),r=new qt(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],a=>{let c=this.Sr(a.pr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new lt(Re);return n.forEach(r=>{let o=new qt(r,0),a=new qt(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],c=>{i=i.add(c.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;J.isDocumentKey(o)||(o=o.child(""));let a=new qt(new J(o),0),c=new lt(Re);return this.wr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(u.pr)),!0)},a),B.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ae(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(n.mutations,r=>{let o=new qt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new qt(n,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var y0=class{constructor(e){this.vr=e,this.docs=function(){return new bt(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():Zt.newInvalidDocument(n))}getEntries(e,n){let i=Gn();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Zt.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=Gn(),a=n.path,c=new J(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:f,value:{document:m}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||gI($M(m),i)<=0||(r.has(m.key)||yh(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ie()}Fr(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new b0(this)}getSize(e){return B.resolve(this.size)}},b0=class extends tg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var w0=class{constructor(e){this.persistence=e,this.Mr=new Cr(n=>da(n),_h),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Or=0,this.Nr=new ch,this.targetCount=0,this.Lr=Il.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Il(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),B.waitFor(o).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}};var ig=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new ii(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new w0(this),this.indexManager=new s0,this.remoteDocumentCache=function(r){return new y0(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Zm(n),this.$r=new g0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _0,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new v0(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){W("MemoryPersistence","Starting transaction:",e);let r=new I0(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},I0=class extends Lm{constructor(e){super(),this.currentSequenceNumber=e}},rg=class t{constructor(e){this.persistence=e,this.zr=new ch,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ie()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{let r=J.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,ue.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var E0=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new Fm("createOrUpgrade",n);i<1&&r>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0}),u.createObjectStore("documentMutations")}(e),xM(e),function(u){u.createObjectStore("remoteDocuments")}(e));let a=B.resolve();return i<3&&r>=3&&(i!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),xM(e)),a=a.next(()=>function(u){let f=u.store("targetGlobal"),m={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",m)}(o))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(u,f){return f.store("mutations").U().next(m=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",UA,{unique:!0});let v=f.store("mutations"),w=m.map(E=>v.put(E));return B.waitFor(w)})}(e,o))),a=a.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Xr(o))),i<6&&r>=6&&(a=a.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(a=a.next(()=>this.ti(o))),i<8&&r>=8&&(a=a.next(()=>this.ni(e,o))),i<9&&r>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ri(o))),i<11&&r>=11&&(a=a.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(u){let f=u.createObjectStore("documentOverlays",{keyPath:pU});f.createIndex("collectionPathOverlayIndex",mU,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",gU,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(u){let f=u.createObjectStore("remoteDocumentsV14",{keyPath:iU});f.createIndex("documentKeyIndex",rU),f.createIndex("collectionGroupIndex",oU)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,o))),i<15&&r>=15&&(a=a.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:uU}).createIndex("sequenceNumberIndex",dU,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:hU}).createIndex("documentKeyIndex",fU,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),a}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=Jm(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>B.forEach(r,o=>{let a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",a).next(c=>B.forEach(c,u=>{ae(u.userId===o.userId);let f=ia(this.serializer,u);return zR(e,o.userId,f).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((a,c)=>{let u=new Ze(a),f=function(v){return[0,On(v)]}(u);o.push(n.get(f).next(m=>m?B.resolve():(v=>n.put({targetId:0,path:On(v),sequenceNumber:r.highestListenSequenceNumber}))(u)))}).next(()=>B.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:lU});let i=n.store("collectionParents"),r=new ah,o=a=>{if(r.add(a)){let c=a.lastSegment(),u=a.popLast();return i.put({collectionId:c,parent:On(u)})}};return n.store("remoteDocuments").J({H:!0},(a,c)=>{let u=new Ze(a);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,c,u],f)=>{let m=_r(c);return o(m.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=Ud(r),a=VR(this.serializer,o);return n.put(a)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,a)=>{let c=n.store("remoteDocumentsV14"),u=function(v){return v.document?new J(Ze.fromString(v.document.name).popFirst(5)):v.noDocument?J.fromSegments(v.noDocument.path):v.unknownDocument?J.fromSegments(v.unknownDocument.path):ie()}(a).path.toArray(),f={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(c.put(f))}).next(()=>B.waitFor(r))}si(e,n){let i=n.store("mutations"),r=HR(this.serializer),o=new ig(rg.Hr,this.serializer.ct);return i.U().next(a=>{let c=new Map;return a.forEach(u=>{var f;let m=(f=c.get(u.userId))!==null&&f!==void 0?f:Pe();ia(this.serializer,u).keys().forEach(v=>m=m.add(v)),c.set(u.userId,m)}),B.forEach(c,(u,f)=>{let m=new Gt(f),v=Qm.lt(this.serializer,m),w=o.getIndexManager(m),E=eg.lt(m,this.serializer,w,o.referenceDelegate);return new ng(r,E,v,w).recalculateAndSaveOverlaysForDocumentKeys(new Qd(n,ii.oe),u).next()})})}};function xM(t){t.createObjectStore("targetDocuments",{keyPath:aU}).createIndex("documentTargetsIndex",cU,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sU,{unique:!0}),t.createObjectStore("targetGlobal")}var pw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",C0=class t{constructor(e,n,i,r,o,a,c,u,f,m,v=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=a,this.document=c,this._i=f,this.ai=m,this.ui=v,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=w=>Promise.resolve(),!t.D())throw new H($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new h0(this,r),this.Ti=n+"main",this.serializer=new Zm(u),this.Ei=new qo(this.Ti,this.ui,new E0(this.serializer)),this.Qr=new c0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=HR(this.serializer),this.$r=new Jw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,m===!1&&Vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new H($.FAILED_PRECONDITION,pw);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new ii(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>U(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>U(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>U(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Dm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ts(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return jd(e).get("owner").next(n=>B.resolve(this.Si(n)))}bi(e){return Dm(e).delete(this.clientId)}Di(){return U(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=hn(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),a=r.filter(c=>o.indexOf(c)===-1);return B.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):jd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new H($.FAILED_PRECONDITION,pw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Dm(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&W("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return U(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Qd(e,ii.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Dm(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return eg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new a0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Qm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){W("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?vU:u===15?YM:u===14?QM:u===13?KM:u===12?_U:u===11?ZM:void ie()}(this.ui),a;return this.Ei.runTransaction(e,r,o,c=>(a=new Qd(c,this.kr?this.kr.next():ii.oe),n==="readwrite-primary"?this.gi(a).next(u=>!!u||this.pi(a)).next(u=>{if(!u)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new H($.FAILED_PRECONDITION,HM);return i(a)}).next(u=>this.wi(a).next(()=>u)):this.ki(a).next(()=>i(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}ki(e){return jd(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new H($.FAILED_PRECONDITION,pw)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return jd(e).put("owner",n)}static D(){return qo.D()}yi(e){let n=jd(e);return n.get("owner").next(i=>this.Si(i)?(W("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Vt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;t_()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return W("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Vt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function jd(t){return hn(t,"owner")}function Dm(t){return hn(t,"clientMetadata")}function DI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var D0=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Pe(),r=Pe();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var x0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var og=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return t_()?8:qM(Iu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new x0;return this.Ji(e,n,a).next(c=>{if(o.result=c,this.Ui)return this.Yi(e,n,a,c.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(ol()<=nr.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",sl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(ol()<=nr.DEBUG&&W("QueryEngine","Query:",sl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(ol()<=nr.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",sl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):B.resolve())}ji(e,n){if(JA(n))return B.resolve(null);let i=Ln(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Hm(n,null,"F"),i=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=Pe(...o);return this.zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.Zi(n,c);return this.Xi(n,f,a,u.readTime)?this.ji(e,Hm(n,null,"F")):this.es(e,f,n,u)}))})))}Hi(e,n,i,r){return JA(n)||r.isEqual(ue.min())?B.resolve(null):this.zi.getDocuments(e,i).next(o=>{let a=this.Zi(n,o);return this.Xi(n,a,i,r)?B.resolve(null):(ol()<=nr.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),sl(n)),this.es(e,a,n,UM(r,-1)).next(c=>c))})}Zi(e,n){let i=new lt(uR(e));return n.forEach((r,o)=>{yh(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return ol()<=nr.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",sl(n)),this.zi.getDocumentsMatchingQuery(e,n,Ei.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}};var T0=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new bt(Re),this.rs=new Cr(o=>da(o),_h),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ng(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function qR(t,e,n,i){return new T0(t,e,n,i)}function GR(t,e){return U(this,null,function*(){let n=ee(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],u=Pe();for(let f of r){a.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}for(let f of o){c.push(f.batchId);for(let m of f.mutations)u=u.add(m.key)}return n.localDocuments.getDocuments(i,u).next(f=>({us:f,removedBatchIds:a,addedBatchIds:c}))})})})}function YU(t,e){let n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,f,m){let v=f.batch,w=v.keys(),E=B.resolve();return w.forEach(M=>{E=E.next(()=>m.getEntry(u,M)).next(k=>{let F=f.docVersions.get(M);ae(F!==null),k.version.compareTo(F)<0&&(v.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),m.addEntry(k)))})}),E.next(()=>c.mutationQueue.removeMutationBatch(u,v))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=Pe();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function WR(t){let e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function XU(t,e){let n=ee(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((m,v)=>{let w=r.get(v);if(!w)return;c.push(n.Qr.removeMatchingKeys(o,m.removedDocuments,v).next(()=>n.Qr.addMatchingKeys(o,m.addedDocuments,v)));let E=w.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?E=E.withResumeToken(dn.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):m.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(m.resumeToken,i)),r=r.insert(v,E),function(k,F,q){return k.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(w,E,m)&&c.push(n.Qr.updateTargetData(o,E))});let u=Gn(),f=Pe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),c.push(ZR(o,a,e.documentUpdates).next(m=>{u=m.cs,f=m.ls})),!i.isEqual(ue.min())){let m=n.Qr.getLastRemoteSnapshotVersion(o).next(v=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(m)}return B.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.ns=r,o))}function ZR(t,e,n){let i=Pe(),r=Pe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Gn();return n.forEach((c,u)=>{let f=o.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):W("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)}),{cs:a,ls:r}})}function JU(t,e){let n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function El(t,e){let n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,B.resolve(r)):n.Qr.allocateTargetId(i).next(a=>(r=new wl(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Cl(t,e,n){return U(this,null,function*(){let i=ee(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!ts(a))throw a;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function sg(t,e,n){let i=ee(t),r=ue.min(),o=Pe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,m){let v=ee(u),w=v.rs.get(m);return w!==void 0?B.resolve(v.ns.get(w)):v.Qr.getTargetData(f,m)}(i,a,Ln(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,n?r:ue.min(),n?o:Pe())).next(c=>(YR(i,lR(e),c),{documents:c,hs:o})))}function KR(t,e){let n=ee(t),i=ee(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(a=>a?a.target:null))}function QR(t,e){let n=ee(t),i=n.ss.get(e)||ue.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,UM(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(YR(n,e,r),r))}function YR(t,e,n){let i=t.ss.get(e)||ue.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function e$(t,e,n,i){return U(this,null,function*(){let r=ee(t),o=Pe(),a=Gn();for(let f of n){let m=e.Ps(f.metadata.name);f.document&&(o=o.add(m));let v=e.Is(f);v.setReadTime(e.Ts(f.metadata.readTime)),a=a.insert(m,v)}let c=r.os.newChangeBuffer({trackRemovals:!0}),u=yield El(r,function(m){return Ln(Pl(Ze.fromString(`__bundle__/docs/${m}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>ZR(f,c,a).next(m=>(c.apply(f),m)).next(m=>r.Qr.removeMatchingKeysForTargetId(f,u.targetId).next(()=>r.Qr.addMatchingKeys(f,o,u.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,m.cs,m.ls)).next(()=>m.cs)))})}function t$(i,r){return U(this,arguments,function*(t,e,n=Pe()){let o=yield El(t,Ln(EI(e.bundledQuery))),a=ee(t);return a.persistence.runTransaction("Save named query","readwrite",c=>{let u=jt(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return a.$r.saveNamedQuery(c,e);let f=o.withResumeToken(dn.EMPTY_BYTE_STRING,u);return a.ns=a.ns.insert(f.targetId,f),a.Qr.updateTargetData(c,f).next(()=>a.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>a.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>a.$r.saveNamedQuery(c,e))})})}function TM(t,e){return`firestore_clients_${t}_${e}`}function SM(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function mw(t,e){return`firestore_targets_${t}_${e}`}var ag=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new H(r.error.code,r.error.message))),a?new t(e,n,r.state,o):(Vt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Gd=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new H(i.error.code,i.error.message))),o?new t(e,i.state,r):(Vt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},cg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=wI();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=GM(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new t(e,o):(Vt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},S0=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Vt("SharedClientState",`Failed to parse online state: ${e}`),null)}},lh=class{constructor(){this.activeTargetIds=wI()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Wd=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new bt(Re),this.started=!1,this.ys=[];let a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=TM(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new lh),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return U(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(TM(this.persistenceKey,i));if(r){let o=cg.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(mw(this.persistenceKey,e));if(i){let r=Gd.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mw(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return W("SharedClientState","READ",e,n),n}setItem(e,n){W("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(W("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>U(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let a=ii.oe;if(o!=null)try{let c=JSON.parse(o);ae(typeof c=="number"),a=c}catch(c){Vt("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(n.newValue);i!==ii.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new ag(this.currentUser,e,n,i),o=SM(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=SM(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=mw(this.persistenceKey,e),o=new Gd(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return cg.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return ag.Es(new Gt(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return Gd.Es(r,n)}xs(e){return S0.Es(e)}Js(e){return JSON.parse(e)}zs(e){return U(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),a=[],c=[];return o.forEach(u=>{r.has(u)||a.push(u)}),r.forEach(u=>{o.has(u)||c.push(u)}),this.syncEngine.eo(a,c).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=wI();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},lg=class{constructor(){this.no=new lh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new lh,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var A0=class{io(e){}shutdown(){}};var ug=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var xm=null;function gw(){return xm===null?xm=function(){return 268435456+Math.round(2147483648*Math.random())}():xm++,"0x"+xm.toString(16)}var n$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var M0=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Cn="WebChannelConnection",R0=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,a){let c=gw(),u=this.vo(n,i.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${c}:`,u,r);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,a),this.Mo(n,u,f,r).then(m=>(W("RestConnection",`Received RPC '${n}' ${c}: `,m),m),m=>{throw Ii("RestConnection",`RPC '${n}' ${c} failed with error: `,m,"url: ",u,"request:",r),m})}xo(n,i,r,o,a,c){return this.Co(n,i,r,o,a)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}vo(n,i){let r=n$[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=gw();return new Promise((a,c)=>{let u=new aw;u.setWithCredentials(!0),u.listenOnce(lw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ld.NO_ERROR:let m=u.getResponseJson();W(Cn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case Ld.TIMEOUT:W(Cn,`RPC '${e}' ${o} timed out`),c(new H($.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:let v=u.getStatus();if(W(Cn,`RPC '${e}' ${o} failed with status:`,v,"response text:",u.getResponseText()),v>0){let w=u.getResponseJson();Array.isArray(w)&&(w=w[0]);let E=w?.error;if(E&&E.status&&E.message){let M=function(F){let q=F.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(q)>=0?q:$.UNKNOWN}(E.status);c(new H(M,E.message))}else c(new H($.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new H($.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{W(Cn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);W(Cn,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,i,15)})}Oo(e,n,i){let r=gw(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hw(),c=dw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.xmlHttpFactory=new cw({})),this.Fo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;let m=o.join("");W(Cn,`Creating RPC '${e}' stream ${r}: ${m}`,u);let v=a.createWebChannel(m,u),w=!1,E=!1,M=new M0({lo:F=>{E?W(Cn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(w||(W(Cn,`Opening RPC '${e}' stream ${r} transport.`),v.open(),w=!0),W(Cn,`RPC '${e}' stream ${r} sending:`,F),v.send(F))},ho:()=>v.close()}),k=(F,q,te)=>{F.listen(q,Z=>{try{te(Z)}catch(oe){setTimeout(()=>{throw oe},0)}})};return k(v,el.EventType.OPEN,()=>{E||(W(Cn,`RPC '${e}' stream ${r} transport opened.`),M.mo())}),k(v,el.EventType.CLOSE,()=>{E||(E=!0,W(Cn,`RPC '${e}' stream ${r} transport closed`),M.po())}),k(v,el.EventType.ERROR,F=>{E||(E=!0,Ii(Cn,`RPC '${e}' stream ${r} transport errored:`,F),M.po(new H($.UNAVAILABLE,"The operation could not be completed")))}),k(v,el.EventType.MESSAGE,F=>{var q;if(!E){let te=F.data[0];ae(!!te);let Z=te,oe=Z.error||((q=Z[0])===null||q===void 0?void 0:q.error);if(oe){W(Cn,`RPC '${e}' stream ${r} received error:`,oe);let de=oe.status,ce=function(D){let A=Ht[D];if(A!==void 0)return CR(A)}(de),S=oe.message;ce===void 0&&(ce=$.INTERNAL,S="Unknown error status: "+de+" with message "+oe.message),E=!0,M.po(new H(ce,S)),v.close()}else W(Cn,`RPC '${e}' stream ${r} received:`,te),M.yo(te)}}),k(c,uw.STAT_EVENT,F=>{F.stat===Im.PROXY?W(Cn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Im.NOPROXY&&W(Cn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}};function XR(){return typeof window<"u"?window:null}function Rm(){return typeof document<"u"?document:null}function bh(t){return new Zw(t,!0)}var uh=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var dg=class{constructor(e,n,i,r,o,a,c,u){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new uh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return U(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return U(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return U(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Vt(n.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new H($.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>U(this,null,function*(){this.state=0,this.start()}))}c_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},P0=class extends dg{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=jU(this.serializer,e),i=function(o){if(!("targetChange"in o))return ue.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?ue.min():a.readTime?jt(a.readTime):ue.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=Yw(this.serializer),n.addTarget=function(o,a){let c,u=a.target;if(c=Um(u)?{documents:PR(o,u)}:{query:kR(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=xR(o,a.resumeToken);let f=Kw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(ue.min())>0){c.readTime=bl(o,a.snapshotVersion.toTimestamp());let f=Kw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=UU(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=Yw(this.serializer),n.removeTarget=e,this.i_(n)}},k0=class extends dg{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=zU(e.writeResults,e.commitTime),i=jt(e.commitTime);return this.listener.A_(i,n)}return ae(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Yw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>sh(this.serializer,i))};this.i_(n)}};var N0=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new H($.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Qw(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H($.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(e,Qw(n,i),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new H($.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},O0=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Vt(n),this.y_=!1):W("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var L0=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{i.enqueueAndForget(()=>U(this,null,function*(){ns(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(u){return U(this,null,function*(){let f=ee(u);f.M_.add(4),yield kl(f),f.N_.set("Unknown"),f.M_.delete(4),yield wh(f)})}(this))}))}),this.N_=new O0(i,r)}};function wh(t){return U(this,null,function*(){if(ns(t))for(let e of t.x_)yield e(!0)})}function kl(t){return U(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Mg(t,e){let n=ee(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),SI(n)?TI(n):Ol(n).Xo()&&xI(n,e))}function Dl(t,e){let n=ee(t),i=Ol(n);n.F_.delete(e),i.Xo()&&JR(n,e),n.F_.size===0&&(i.Xo()?i.n_():ns(n)&&n.N_.set("Unknown"))}function xI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ol(t).P_(e)}function JR(t,e){t.L_.xe(e),Ol(t).I_(e)}function TI(t){t.L_=new Ww({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ol(t).start(),t.N_.w_()}function SI(t){return ns(t)&&!Ol(t).Zo()&&t.F_.size>0}function ns(t){return ee(t).M_.size===0}function eP(t){t.L_=void 0}function i$(t){return U(this,null,function*(){t.N_.set("Online")})}function r$(t){return U(this,null,function*(){t.F_.forEach((e,n)=>{xI(t,e)})})}function o$(t,e){return U(this,null,function*(){eP(t),SI(t)?(t.N_.D_(e),TI(t)):t.N_.set("Unknown")})}function s$(t,e,n){return U(this,null,function*(){if(t.N_.set("Online"),e instanceof Gm&&e.state===2&&e.cause)try{yield function(r,o){return U(this,null,function*(){let a=o.cause;for(let c of o.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield hg(t,i)}else if(e instanceof fl?t.L_.Ke(e):e instanceof qm?t.L_.He(e):t.L_.We(e),!n.isEqual(ue.min()))try{let i=yield WR(t.localStore);n.compareTo(i)>=0&&(yield function(o,a){let c=o.L_.rt(a);return c.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let m=o.F_.get(f);m&&o.F_.set(f,m.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,f)=>{let m=o.F_.get(u);if(!m)return;o.F_.set(u,m.withResumeToken(dn.EMPTY_BYTE_STRING,m.snapshotVersion)),JR(o,u);let v=new wl(m.target,u,f,m.sequenceNumber);xI(o,v)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield hg(t,i)}})}function hg(t,e,n){return U(this,null,function*(){if(!ts(e))throw e;t.M_.add(1),yield kl(t),t.N_.set("Offline"),n||(n=()=>WR(t.localStore)),t.asyncQueue.enqueueRetryable(()=>U(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield wh(t)}))})}function tP(t,e){return e().catch(n=>hg(t,n,e))}function Nl(t){return U(this,null,function*(){let e=ee(t),n=Jo(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;a$(e);)try{let r=yield JU(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,c$(e,r)}catch(r){yield hg(e,r)}nP(e)&&iP(e)})}function a$(t){return ns(t)&&t.v_.length<10}function c$(t,e){t.v_.push(e);let n=Jo(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function nP(t){return ns(t)&&!Jo(t).Zo()&&t.v_.length>0}function iP(t){Jo(t).start()}function l$(t){return U(this,null,function*(){Jo(t).V_()})}function u$(t){return U(this,null,function*(){let e=Jo(t);for(let n of t.v_)e.d_(n.mutations)})}function d$(t,e,n){return U(this,null,function*(){let i=t.v_.shift(),r=Hw.from(i,e,n);yield tP(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Nl(t)})}function h$(t,e){return U(this,null,function*(){e&&Jo(t).E_&&(yield function(i,r){return U(this,null,function*(){if(function(a){return ER(a)&&a!==$.ABORTED}(r.code)){let o=i.v_.shift();Jo(i).t_(),yield tP(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Nl(i)}})}(t,e)),nP(t)&&iP(t)})}function AM(t,e){return U(this,null,function*(){let n=ee(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=ns(n);n.M_.add(3),yield kl(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield wh(n)})}function F0(t,e){return U(this,null,function*(){let n=ee(t);e?(n.M_.delete(2),yield wh(n)):e||(n.M_.add(2),yield kl(n),n.N_.set("Unknown"))})}function Ol(t){return t.B_||(t.B_=function(n,i,r){let o=ee(n);return o.f_(),new P0(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:i$.bind(null,t),To:r$.bind(null,t),Ao:o$.bind(null,t),h_:s$.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.B_.t_(),SI(t)?TI(t):t.N_.set("Unknown")):(yield t.B_.stop(),eP(t))}))),t.B_}function Jo(t){return t.k_||(t.k_=function(n,i,r){let o=ee(n);return o.f_(),new k0(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:l$.bind(null,t),Ao:h$.bind(null,t),R_:u$.bind(null,t),A_:d$.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.k_.t_(),yield Nl(t)):(yield t.k_.stop(),t.v_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var V0=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let a=Date.now()+i,c=new t(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Ll(t,e){if(Vt("AsyncQueue",`${e}: ${t}`),ts(t))return new H($.UNAVAILABLE,`${e}: ${t}`);throw t}var fg=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||J.comparator(n.key,i.key):(n,i)=>J.comparator(n.key,i.key),this.keyedMap=zd(),this.sortedSet=new bt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var pg=class{constructor(){this.q_=new bt(J.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ie():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},xl=class t{constructor(e,n,i,r,o,a,c,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){let a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new t(e,n,fg.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var B0=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},j0=class{constructor(){this.queries=new Cr(e=>cR(e),vh),this.onlineState="Unknown",this.z_=new Set}};function AI(t,e){return U(this,null,function*(){let n=ee(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new B0,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(a){let c=Ll(a,`Initialization of query '${sl(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&RI(n)})}function MI(t,e){return U(this,null,function*(){let n=ee(t),i=e.query,r=3,o=n.queries.get(i);if(o){let a=o.U_.indexOf(e);a>=0&&(o.U_.splice(a,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function f$(t,e){let n=ee(t),i=!1;for(let r of e){let o=r.query,a=n.queries.get(o);if(a){for(let c of a.U_)c.H_(r)&&(i=!0);a.K_=r}}i&&RI(n)}function p$(t,e,n){let i=ee(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function RI(t){t.z_.forEach(e=>{e.next()})}var z0,MM;(MM=z0||(z0={})).J_="default",MM.Cache="cache";var dh=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new xl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==z0.Cache}};var U0=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var mg=class{constructor(e){this.serializer=e}Ps(e){return br(this.serializer,e)}Is(e){return e.metadata.exists?RR(this.serializer,e.document,!1):Zt.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return jt(e)}},$0=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=rP(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=Ze.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new mg(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let a of r.metadata.queries){let c=(n.get(a)||Pe()).add(o);n.set(a,c)}}return n}complete(){return U(this,null,function*(){let e=yield e$(this.localStore,new mg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield t$(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function rP(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var gg=class{constructor(e){this.key=e}},_g=class{constructor(e){this.key=e}},vg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Pe(),this.mutatedKeys=Pe(),this.Ia=uR(e),this.Ta=new fg(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new pg,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,v)=>{let w=r.get(m),E=yh(this.query,v)?v:null,M=!!w&&this.mutatedKeys.has(w.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations),F=!1;w&&E?w.data.isEqual(E.data)?M!==k&&(i.track({type:3,doc:E}),F=!0):this.Ra(w,E)||(i.track({type:2,doc:E}),F=!0,(u&&this.Ia(E,u)>0||f&&this.Ia(E,f)<0)&&(c=!0)):!w&&E?(i.track({type:0,doc:E}),F=!0):w&&!E&&(i.track({type:1,doc:w}),F=!0,(u||f)&&(c=!0)),F&&(E?(a=a.add(E),o=k?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{Ta:a,Aa:i,Xi:c,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((m,v)=>function(E,M){let k=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return k(E)-k(M)}(m.type,v.type)||this.Ia(m.doc,v.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,f=u!==this.ha;return this.ha=u,a.length!==0||f?{snapshot:new xl(this.query,e.Ta,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new pg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Pe(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new _g(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new gg(i))}),n}pa(e){this.la=e.hs,this.Pa=Pe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return xl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},H0=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},q0=class{constructor(e){this.key=e,this.wa=!1}},G0=class{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Cr(c=>cR(c),vh),this.Da=new Map,this.Ca=new Set,this.va=new bt(J.comparator),this.Fa=new Map,this.Ma=new ch,this.xa={},this.Oa=new Map,this.Na=Il.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function m$(t,e,n=!0){return U(this,null,function*(){let i=Rg(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield oP(i,e,n,!0),r})}function g$(t,e){return U(this,null,function*(){let n=Rg(t);yield oP(n,e,!0,!1)})}function oP(t,e,n,i){return U(this,null,function*(){let r=yield El(t.localStore,Ln(e)),o=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",c;return i&&(c=yield PI(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Mg(t.remoteStore,r),c})}function PI(t,e,n,i,r){return U(this,null,function*(){t.Ba=(v,w,E)=>function(k,F,q,te){return U(this,null,function*(){let Z=F.view.da(q);Z.Xi&&(Z=yield sg(k.localStore,F.query,!1).then(({documents:S})=>F.view.da(S,Z)));let oe=te&&te.targetChanges.get(F.targetId),de=te&&te.targetMismatches.get(F.targetId)!=null,ce=F.view.applyChanges(Z,k.isPrimaryClient,oe,de);return W0(k,F.targetId,ce.fa),ce.snapshot})}(t,v,w,E);let o=yield sg(t.localStore,e,!0),a=new vg(e,o.hs),c=a.da(o.documents),u=rh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(c,t.isPrimaryClient,u);W0(t,n,f.fa);let m=new H0(e,n,a);return t.ba.set(e,m),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),f.snapshot})}function _$(t,e,n){return U(this,null,function*(){let i=ee(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(a=>!vh(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Cl(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Dl(i.remoteStore,r.targetId),Tl(i,r.targetId)}).catch(es))):(Tl(i,r.targetId),yield Cl(i.localStore,r.targetId,!0))})}function v$(t,e){return U(this,null,function*(){let n=ee(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Dl(n.remoteStore,i.targetId))})}function y$(t,e,n){return U(this,null,function*(){let i=LI(t);try{let r=yield function(a,c){let u=ee(a),f=Rt.now(),m=c.reduce((E,M)=>E.add(M.key),Pe()),v,w;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let M=Gn(),k=Pe();return u.os.getEntries(E,m).next(F=>{M=F,M.forEach((q,te)=>{te.isValidDocument()||(k=k.add(q))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,M)).next(F=>{v=F;let q=[];for(let te of c){let Z=kU(te,v.get(te.key).overlayedDocument);Z!=null&&q.push(new $i(te.key,Z,tR(Z.value.mapValue),Nt.exists(!0)))}return u.mutationQueue.addMutationBatch(E,f,q,c)}).next(F=>{w=F;let q=F.applyToLocalDocumentSet(v,k);return u.documentOverlayCache.saveOverlays(E,F.batchId,q)})}).then(()=>({batchId:w.batchId,changes:hR(v)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,u){let f=a.xa[a.currentUser.toKey()];f||(f=new bt(Re)),f=f.insert(c,u),a.xa[a.currentUser.toKey()]=f}(i,r.batchId,n),yield to(i,r.changes),yield Nl(i.remoteStore)}catch(r){let o=Ll(r,"Failed to persist write");n.reject(o)}})}function sP(t,e){return U(this,null,function*(){let n=ee(t);try{let i=yield XU(n.localStore,e);e.targetChanges.forEach((r,o)=>{let a=n.Fa.get(o);a&&(ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?ae(a.wa):r.removedDocuments.size>0&&(ae(a.wa),a.wa=!1))}),yield to(n,i,e)}catch(i){yield es(i)}})}function RM(t,e,n){let i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,a)=>{let c=a.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){let u=ee(a);u.onlineState=c;let f=!1;u.queries.forEach((m,v)=>{for(let w of v.U_)w.j_(c)&&(f=!0)}),f&&RI(u)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function b$(t,e,n){return U(this,null,function*(){let i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let a=new bt(J.comparator);a=a.insert(o,Zt.newNoDocument(o,ue.min()));let c=Pe().add(o),u=new ih(ue.min(),new Map,new bt(Re),a,c);yield sP(i,u),i.va=i.va.remove(o),i.Fa.delete(e),OI(i)}else yield Cl(i.localStore,e,!1).then(()=>Tl(i,e,n)).catch(es)})}function w$(t,e){return U(this,null,function*(){let n=ee(t),i=e.batch.batchId;try{let r=yield YU(n.localStore,e);NI(n,i,null),kI(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield to(n,r)}catch(r){yield es(r)}})}function I$(t,e,n){return U(this,null,function*(){let i=ee(t);try{let r=yield function(a,c){let u=ee(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return u.mutationQueue.lookupMutationBatch(f,c).next(v=>(ae(v!==null),m=v.keys(),u.mutationQueue.removeMutationBatch(f,v))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,m,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>u.localDocuments.getDocuments(f,m))})}(i.localStore,e);NI(i,e,n),kI(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield to(i,r)}catch(r){yield es(r)}})}function E$(t,e){return U(this,null,function*(){let n=ee(t);ns(n.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(a){let c=ee(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=Ll(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function kI(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function NI(t,e,n){let i=ee(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Tl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||aP(t,i)})}function aP(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Dl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),OI(t))}function W0(t,e,n){for(let i of n)i instanceof gg?(t.Ma.addReference(i.key,e),C$(t,i)):i instanceof _g?(W("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||aP(t,i.key)):ie()}function C$(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(W("SyncEngine","New document in limbo: "+n),t.Ca.add(i),OI(t))}function OI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new J(Ze.fromString(e)),i=t.Na.next();t.Fa.set(i,new q0(n)),t.va=t.va.insert(n,i),Mg(t.remoteStore,new wl(Ln(Pl(n.path)),i,"TargetPurposeLimboResolution",ii.oe))}}function to(t,e,n){return U(this,null,function*(){let i=ee(t),r=[],o=[],a=[];i.ba.isEmpty()||(i.ba.forEach((c,u)=>{a.push(i.Ba(u,e,n).then(f=>{if((f||n)&&i.isPrimaryClient){let m=f&&!f.fromCache;i.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){r.push(f);let m=D0.Ki(u.targetId,f);o.push(m)}}))}),yield Promise.all(a),i.Sa.h_(r),yield function(u,f){return U(this,null,function*(){let m=ee(u);try{yield m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>B.forEach(f,w=>B.forEach(w.qi,E=>m.persistence.referenceDelegate.addReference(v,w.targetId,E)).next(()=>B.forEach(w.Qi,E=>m.persistence.referenceDelegate.removeReference(v,w.targetId,E)))))}catch(v){if(!ts(v))throw v;W("LocalStore","Failed to update sequence numbers: "+v)}for(let v of f){let w=v.targetId;if(!v.fromCache){let E=m.ns.get(w),M=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(M);m.ns=m.ns.insert(w,k)}}})}(i.localStore,o))})}function D$(t,e){return U(this,null,function*(){let n=ee(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let i=yield GR(n.localStore,e);n.currentUser=e,function(o,a){o.Oa.forEach(c=>{c.forEach(u=>{u.reject(new H($.CANCELLED,a))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield to(n,i.us)}})}function x$(t,e){let n=ee(t),i=n.Fa.get(e);if(i&&i.wa)return Pe().add(i.key);{let r=Pe(),o=n.Da.get(e);if(!o)return r;for(let a of o){let c=n.ba.get(a);r=r.unionWith(c.view.Ea)}return r}}function T$(t,e){return U(this,null,function*(){let n=ee(t),i=yield sg(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&W0(n,e.targetId,r.fa),r})}function S$(t,e){return U(this,null,function*(){let n=ee(t);return QR(n.localStore,e).then(i=>to(n,i))})}function A$(t,e,n,i){return U(this,null,function*(){let r=ee(t),o=yield function(c,u){let f=ee(c),m=ee(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",v=>m.vn(v,u).next(w=>w?f.localDocuments.getDocuments(v,w):B.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Nl(r.remoteStore):n==="acknowledged"||n==="rejected"?(NI(r,e,i||null),kI(r,e),function(c,u){ee(ee(c).mutationQueue).Mn(u)}(r.localStore,e)):ie(),yield to(r,o)):W("SyncEngine","Cannot apply mutation batch with id: "+e)})}function M$(t,e){return U(this,null,function*(){let n=ee(t);if(Rg(n),LI(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield PM(n,i.toArray());n.La=!0,yield F0(n.remoteStore,!0);for(let o of r)Mg(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Tl(n,a),Cl(n.localStore,a,!0))),Dl(n.remoteStore,a)}),yield r,yield PM(n,i),function(a){let c=ee(a);c.Fa.forEach((u,f)=>{Dl(c.remoteStore,f)}),c.Ma.mr(),c.Fa=new Map,c.va=new bt(J.comparator)}(n),n.La=!1,yield F0(n.remoteStore,!1)}})}function PM(t,e,n){return U(this,null,function*(){let i=ee(t),r=[],o=[];for(let a of e){let c,u=i.Da.get(a);if(u&&u.length!==0){c=yield El(i.localStore,Ln(u[0]));for(let f of u){let m=i.ba.get(f),v=yield T$(i,m);v.snapshot&&o.push(v.snapshot)}}else{let f=yield KR(i.localStore,a);c=yield El(i.localStore,f),yield PI(i,cP(f),a,!1,c.resumeToken)}r.push(c)}return i.Sa.h_(o),r})}function cP(t){return aR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function R$(t){return function(n){return ee(ee(n).persistence).Bi()}(ee(t).localStore)}function P$(t,e,n,i){return U(this,null,function*(){let r=ee(t);if(r.La)return void W("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let a=yield QR(r.localStore,lR(o[0])),c=ih.createSynthesizedRemoteEventForCurrentChange(e,n==="current",dn.EMPTY_BYTE_STRING);yield to(r,a,c);break}case"rejected":yield Cl(r.localStore,e,!0),Tl(r,e,i);break;default:ie()}})}function k$(t,e,n){return U(this,null,function*(){let i=Rg(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){W("SyncEngine","Adding an already active target "+r);continue}let o=yield KR(i.localStore,r),a=yield El(i.localStore,o);yield PI(i,cP(o),a.targetId,!1,a.resumeToken),Mg(i.remoteStore,a)}for(let r of n)i.Da.has(r)&&(yield Cl(i.localStore,r,!1).then(()=>{Dl(i.remoteStore,r),Tl(i,r)}).catch(es))}})}function Rg(t){let e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=sP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=b$.bind(null,e),e.Sa.h_=f$.bind(null,e.eventManager),e.Sa.ka=p$.bind(null,e.eventManager),e}function LI(t){let e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=w$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I$.bind(null,e),e}function N$(t,e,n){let i=ee(t);(function(o,a,c){return U(this,null,function*(){try{let u=yield a.getMetadata();if(yield function(E,M){let k=ee(E),F=jt(M.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",q=>k.$r.getBundleMetadata(q,M.id)).then(q=>!!q&&q.createTime.compareTo(F)>=0)}(o.localStore,u))return yield a.close(),c._completeWith(function(E){return{taskState:"Success",documentsLoaded:E.totalDocuments,bytesLoaded:E.totalBytes,totalDocuments:E.totalDocuments,totalBytes:E.totalBytes}}(u)),Promise.resolve(new Set);c._updateProgress(rP(u));let f=new $0(u,o.localStore,a.serializer),m=yield a.qa();for(;m;){let w=yield f._a(m);w&&c._updateProgress(w),m=yield a.qa()}let v=yield f.complete();return yield to(o,v.ca,void 0),yield function(E,M){let k=ee(E);return k.persistence.runTransaction("Save bundle","readwrite",F=>k.$r.saveBundleMetadata(F,M))}(o.localStore,u),c._completeWith(v.progress),Promise.resolve(v.ua)}catch(u){return Ii("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var hh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){this.serializer=bh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qR(this.persistence,new og,e.initialUser,this.serializer)}createPersistence(e){return new ig(rg.Hr,this.serializer)}createSharedClientState(e){return new lg}terminate(){return U(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var yg=class t extends hh{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){yield Jg(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield LI(this.Qa.syncEngine),yield Nl(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return qR(this.persistence,new og,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new u0(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new Sw(n,this.persistence);return new Tw(e.asyncQueue,i)}createPersistence(e){let n=DI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new C0(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,XR(),Rm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new lg}},Z0=class t extends yg{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return U(this,null,function*(){yield Jg(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Wd&&(this.sharedClientState.syncEngine={Zs:A$.bind(null,n),Xs:P$.bind(null,n),eo:k$.bind(null,n),Bi:R$.bind(null,n),Ys:S$.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>U(this,null,function*(){yield M$(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=XR();if(!Wd.D(n))throw new H($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=DI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Wd(n,e.asyncQueue,i,e.clientId,e.initialUser)}},fh=class{initialize(e,n){return U(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>RM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D$.bind(null,this.syncEngine),yield F0(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new j0}()}createDatastore(e){let n=bh(e.databaseInfo.databaseId),i=function(o){return new R0(o)}(e.databaseInfo);return function(o,a,c,u){return new N0(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,c){return new L0(i,r,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>RM(this.syncEngine,n,0),function(){return ug.D()?new ug:new A0}())}createSyncEngine(e,n){return function(r,o,a,c,u,f,m){let v=new G0(r,o,a,c,u,f);return m&&(v.La=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return U(this,null,function*(){var e;yield function(i){return U(this,null,function*(){let r=ee(i);W("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield kl(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function kM(t,e=10240){let n=0;return{read(){return U(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return U(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Sl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var K0=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new Wt,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return U(this,null,function*(){return this.metadata.promise})}qa(){return U(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return U(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new U0(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return U(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return U(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return U(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var Q0=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new H($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return U(this,null,function*(){let a=ee(r),c={documents:o.map(v=>oh(a.serializer,v))},u=yield a.xo("BatchGetDocuments",a.serializer.databaseId,Ze.emptyPath(),c,o.length),f=new Map;u.forEach(v=>{let w=BU(a.serializer,v);f.set(w.key.toString(),w)});let m=[];return o.forEach(v=>{let w=f.get(v.toString());ae(!!w),m.push(w)}),m})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Xo(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=J.fromPath(i);this.mutations.push(new eh(r,this.precondition(r)))}),yield function(i,r){return U(this,null,function*(){let o=ee(i),a={writes:r.map(c=>sh(o.serializer,c))};yield o.Co("Commit",o.serializer.databaseId,Ze.emptyPath(),a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ie();n=ue.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new H($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ue.min())?Nt.exists(!1):Nt.updateTime(n):Nt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ue.min()))throw new H($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nt.updateTime(n)}return Nt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var Y0=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new uh(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>U(this,null,function*(){let e=new Q0(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!gh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!ER(n)}return!1}};var X0=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Gt.UNAUTHENTICATED,this.clientId=Nm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>U(this,null,function*(){W("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new H($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=Ll(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Pm(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>U(this,null,function*(){i.isEqual(r)||(yield GR(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function J0(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield FI(t);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>AM(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>AM(e.remoteStore,r)),t._onlineComponents=e})}function lP(t){return t.name==="FirebaseError"?t.code===$.FAILED_PRECONDITION||t.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function FI(t){return U(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!lP(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),yield Pm(t,new hh)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Pm(t,new hh);return t._offlineComponents})}function Pg(t){return U(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield J0(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield J0(t,new fh))),t._onlineComponents})}function uP(t){return FI(t).then(e=>e.persistence)}function VI(t){return FI(t).then(e=>e.localStore)}function dP(t){return Pg(t).then(e=>e.remoteStore)}function BI(t){return Pg(t).then(e=>e.syncEngine)}function O$(t){return Pg(t).then(e=>e.datastore)}function Al(t){return U(this,null,function*(){let e=yield Pg(t),n=e.eventManager;return n.onListen=m$.bind(null,e.syncEngine),n.onUnlisten=_$.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=g$.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=v$.bind(null,e.syncEngine),n})}function L$(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield uP(t),n=yield dP(t);return e.setNetworkEnabled(!0),function(r){let o=ee(r);return o.M_.delete(0),wh(o)}(n)}))}function F$(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield uP(t),n=yield dP(t);return e.setNetworkEnabled(!1),function(r){return U(this,null,function*(){let o=ee(r);o.M_.add(0),yield kl(o),o.N_.set("Offline")})}(n)}))}function V$(t,e){let n=new Wt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield function(f,m){let v=ee(f);return v.persistence.runTransaction("read document","readonly",w=>v.localDocuments.getDocument(w,m))}(r,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new H($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let u=Ll(c,`Failed to get document '${o} from cache`);a.reject(u)}})}(yield VI(t),e,n)})),n.promise}function hP(t,e,n={}){let i=new Wt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Sl({next:w=>{a.enqueueAndForget(()=>MI(o,v));let E=w.docs.has(c);!E&&w.fromCache?f.reject(new H($.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&w.fromCache&&u&&u.source==="server"?f.reject(new H($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new dh(Pl(c.path),m,{includeMetadataChanges:!0,ra:!0});return AI(o,v)}(yield Al(t),t.asyncQueue,e,n,i)})),i.promise}function B$(t,e){let n=new Wt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield sg(r,o,!0),u=new vg(o,c.hs),f=u.da(c.documents),m=u.applyChanges(f,!1);a.resolve(m.snapshot)}catch(c){let u=Ll(c,`Failed to execute query '${o} against cache`);a.reject(u)}})}(yield VI(t),e,n)})),n.promise}function fP(t,e,n={}){let i=new Wt;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let m=new Sl({next:w=>{a.enqueueAndForget(()=>MI(o,v)),w.fromCache&&u.source==="server"?f.reject(new H($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(w)},error:w=>f.reject(w)}),v=new dh(c,m,{includeMetadataChanges:!0,ra:!0});return AI(o,v)}(yield Al(t),t.asyncQueue,e,n,i)})),i.promise}function j$(t,e){let n=new Sl(e);return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){ee(r).z_.add(o),o.next()}(yield Al(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){ee(r).z_.delete(o)}(yield Al(t),n)}))}}function z$(t,e,n,i){let r=function(a,c){let u;return u=typeof a=="string"?DR().encode(a):a,function(m,v){return new K0(m,v)}(function(m,v){if(m instanceof Uint8Array)return kM(m,v);if(m instanceof ArrayBuffer)return kM(new Uint8Array(m),v);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),c)}(n,bh(e));t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){N$(yield BI(t),r,i)}))}function U$(t,e){return t.asyncQueue.enqueue(()=>U(this,null,function*(){return function(i,r){let o=ee(i);return o.persistence.runTransaction("Get named query","readonly",a=>o.$r.getNamedQuery(a,r))}(yield VI(t),e)}))}function pP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NM=new Map;function jI(t,e,n){if(!n)throw new H($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zI(t,e,n,i){if(e===!0&&i===!0)throw new H($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function OM(t){if(!J.isDocumentKey(t))throw new H($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function LM(t){if(J.isDocumentKey(t))throw new H($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ie()}function Ke(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=kg(t);throw new H($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function mP(t,e){if(e<=0)throw new H($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var bg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new H($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new H($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pP((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new H($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ma=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new H($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new H($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new _w;switch(i.type){case"firstParty":return new ww(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new H($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=NM.get(n);i&&(W("ComponentProvider","Removing Datastore"),NM.delete(n),i.terminate())}(this),Promise.resolve()}};function gP(t,e,n,i={}){var r;let o=(t=Ke(t,ma))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=Gt.MOCK_USER;else{c=OE(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new H($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Gt(f)}t._authCredentials=new vw(new km(c,u))}}var vn=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},mt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},wr=class t extends vn{constructor(e,n,i){super(e,n,Pl(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new J(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function UI(t,e,...n){if(t=At(t),jI("collection","path",e),t instanceof ma){let i=Ze.fromString(e,...n);return LM(i),new wr(t,null,i)}{if(!(t instanceof mt||t instanceof wr))throw new H($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ze.fromString(e,...n));return LM(i),new wr(t.firestore,null,i)}}function _P(t,e){if(t=Ke(t,ma),jI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new H($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new vn(t,null,function(i){return new Ui(Ze.emptyPath(),i)}(e))}function Ih(t,e,...n){if(t=At(t),arguments.length===1&&(e=Nm.newId()),jI("doc","path",e),t instanceof ma){let i=Ze.fromString(e,...n);return OM(i),new mt(t,null,new J(i))}{if(!(t instanceof mt||t instanceof wr))throw new H($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(Ze.fromString(e,...n));return OM(i),new mt(t.firestore,t instanceof wr?t.converter:null,new J(i))}}function $I(t,e){return t=At(t),e=At(e),(t instanceof mt||t instanceof wr)&&(e instanceof mt||e instanceof wr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function HI(t,e){return t=At(t),e=At(e),t instanceof vn&&e instanceof vn&&t.firestore===e.firestore&&vh(t._query,e._query)&&t.converter===e.converter}var eI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new uh(this,"async_queue_retry"),this.hu=()=>{let n=Rm();n&&W("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Rm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Wt;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return U(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ts(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw Vt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=V0.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&ie()}verifyOperationInProgress(){}du(){return U(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function tI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var nI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var vP=-1,Dt=class extends ma{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new eI}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||yP(this),this._firestoreClient.terminate()}};function rn(t){return t._firestoreClient||yP(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function yP(t){var e,n,i;let r=t._freezeSettings(),o=function(c,u,f,m){return new Aw(c,u,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,pP(m.experimentalLongPollingOptions),m.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new X0(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function bP(t,e){AP(t=Ke(t,Dt));let n=rn(t);if(n._uninitializedComponentsProvider)throw new H($.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new fh;return IP(n,r,new yg(r,i.cacheSizeBytes,e?.forceOwnership))}function wP(t){AP(t=Ke(t,Dt));let e=rn(t);if(e._uninitializedComponentsProvider)throw new H($.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new fh;return IP(e,i,new Z0(i,n.cacheSizeBytes))}function IP(t,e,n){let i=new Wt;return t.asyncQueue.enqueue(()=>U(this,null,function*(){try{yield Pm(t,n),yield J0(t,e),i.resolve()}catch(r){let o=r;if(!lP(o))throw o;Ii("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function EP(t){if(t._initialized&&!t._terminated)throw new H($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Wt;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{yield function(i){return U(this,null,function*(){if(!qo.D())return Promise.resolve();let r=i+"main";yield qo.delete(r)})}(DI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function CP(t){return function(n){let i=new Wt;return n.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return E$(yield BI(n),i)})),i.promise}(rn(t=Ke(t,Dt)))}function DP(t){return L$(rn(t=Ke(t,Dt)))}function xP(t){return F$(rn(t=Ke(t,Dt)))}function TP(t,e){let n=rn(t=Ke(t,Dt)),i=new nI;return z$(n,t._databaseId,e,i),i}function SP(t,e){return U$(rn(t=Ke(t,Dt)),e).then(n=>n?new vn(t,null,n.query):null)}function AP(t){if(t._initialized||t._terminated)throw new H($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Dr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(dn.fromBase64String(e))}catch(n){throw new H($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Hi=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Jr=class{constructor(e){this._methodName=e}};var ga=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}};var $$=/^__.*__$/,iI=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yo(e,this.data,n,this.fieldTransforms)}},wg=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new $i(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function MP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var Ig=class t{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Eg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(MP(this.fu)&&$$.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},rI=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||bh(e)}Fu(e,n,i,r=!1){return new Ig({fu:e,methodName:n,vu:i,path:Bt.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ba(t){let e=t._freezeSettings(),n=bh(t._databaseId);return new rI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ng(t,e,n,i,r,o={}){let a=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);WI("Data must be an object, but it was:",a,i);let c=kP(i,a),u,f;if(o.merge)u=new ri(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let m=[];for(let v of o.mergeFields){let w=lI(e,v,n);if(!a.contains(w))throw new H($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);OP(m,w)||m.push(w)}u=new ri(m),f=a.fieldTransforms.filter(v=>u.covers(v.field))}else u=null,f=a.fieldTransforms;return new iI(new Dn(c),u,f)}var ph=class t extends Jr{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function RP(t,e,n){return new Ig({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var oI=class t extends Jr{_toFieldTransform(e){return new ha(e.path,new Ko)}isEqual(e){return e instanceof t}},sI=class t extends Jr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=RP(this,e,!0),i=this.Mu.map(o=>wa(o,n)),r=new Yr(i);return new ha(e.path,r)}isEqual(e){return e instanceof t&&n_(this.Mu,e.Mu)}},aI=class t extends Jr{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=RP(this,e,!0),i=this.Mu.map(o=>wa(o,n)),r=new Xr(i);return new ha(e.path,r)}isEqual(e){return e instanceof t&&n_(this.Mu,e.Mu)}},cI=class t extends Jr{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new Qo(e.serializer,gR(e.serializer,this.xu));return new ha(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function qI(t,e,n,i){let r=t.Fu(1,e,n);WI("Data must be an object, but it was:",r,i);let o=[],a=Dn.empty();ya(i,(u,f)=>{let m=ZI(e,u,n);f=At(f);let v=r.Su(m);if(f instanceof ph)o.push(m);else{let w=wa(f,v);w!=null&&(o.push(m),a.set(m,w))}});let c=new ri(o);return new wg(a,c,r.fieldTransforms)}function GI(t,e,n,i,r,o){let a=t.Fu(1,e,n),c=[lI(e,i,n)],u=[r];if(o.length%2!=0)throw new H($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<o.length;w+=2)c.push(lI(e,o[w])),u.push(o[w+1]);let f=[],m=Dn.empty();for(let w=c.length-1;w>=0;--w)if(!OP(f,c[w])){let E=c[w],M=u[w];M=At(M);let k=a.Su(E);if(M instanceof ph)f.push(E);else{let F=wa(M,k);F!=null&&(f.push(E),m.set(E,F))}}let v=new ri(f);return new wg(m,v,a.fieldTransforms)}function PP(t,e,n,i=!1){return wa(n,t.Fu(i?4:3,e))}function wa(t,e){if(NP(t=At(t)))return WI("Unsupported field value:",e,t),kP(t,e);if(t instanceof Jr)return function(i,r){if(!MP(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let c of i){let u=wa(c,r.bu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=At(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Rt.fromDate(i);return{timestampValue:bl(r.serializer,o)}}if(i instanceof Rt){let o=new Rt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:bl(r.serializer,o)}}if(i instanceof ga)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Dr)return{bytesValue:xR(r.serializer,i._byteString)};if(i instanceof mt){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:II(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${kg(i)}`)}(t,e)}function kP(t,e){let n={};return XM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ya(t,(i,r)=>{let o=wa(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function NP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Rt||t instanceof ga||t instanceof Dr||t instanceof mt||t instanceof Jr)}function WI(t,e,n){if(!NP(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=kg(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function lI(t,e,n){if((e=At(e))instanceof Hi)return e._internalPath;if(typeof e=="string")return ZI(t,e);throw Eg("Field path arguments must be of type string or ",t,!1,void 0,n)}var H$=new RegExp("[~\\*/\\[\\]]");function ZI(t,e,n){if(e.search(H$)>=0)throw Eg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Hi(...e.split("."))._internalPath}catch{throw Eg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eg(t,e,n,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new H($.INVALID_ARGUMENT,c+t+u)}function OP(t,e){return t.some(n=>n.isEqual(e))}var _a=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new uI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Og("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},uI=class extends _a{data(){return super.data()}};function Og(t,e){return typeof e=="string"?ZI(t,e):e instanceof Hi?e._internalPath:e._delegate._internalPath}function LP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mh=class{},va=class extends mh{};function no(t,e,...n){let i=[];e instanceof mh&&i.push(e),i=i.concat(n),function(o){let a=o.filter(u=>u instanceof dI).length,c=o.filter(u=>u instanceof Cg).length;if(a>1||a>0&&c>0)throw new H($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var Cg=class t extends va{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return GP(e._query,n),new vn(e.firestore,e.converter,Uw(e._query,n))}_parse(e){let n=ba(e.firestore);return function(o,a,c,u,f,m,v){let w;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new H($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){VM(v,m);let E=[];for(let M of v)E.push(FM(u,o,M));w={arrayValue:{values:E}}}else w=FM(u,o,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||VM(v,m),w=PP(c,a,v,m==="in"||m==="not-in");return $e.create(f,m,w)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function FP(t,e,n){let i=e,r=Og("where",t);return Cg._create(r,i,n)}var dI=class t extends mh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:nt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r,c=o.getFlattenedFilters();for(let u of c)GP(a,u),a=Uw(a,u)}(e._query,n),new vn(e.firestore,e.converter,Uw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var hI=class t extends va{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,a){if(r.startAt!==null)throw new H($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new H($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ua(o,a)}(e._query,this._field,this._direction);return new vn(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new Ui(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function VP(t,e="asc"){let n=e,i=Og("orderBy",t);return hI._create(i,n)}var Dg=class t extends va{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new vn(e.firestore,e.converter,Hm(e._query,this._limit,this._limitType))}};function BP(t){return mP("limit",t),Dg._create("limit",t,"F")}function jP(t){return mP("limitToLast",t),Dg._create("limitToLast",t,"L")}var xg=class t extends va{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=qP(e,this.type,this._docOrFields,this._inclusive);return new vn(e.firestore,e.converter,function(r,o){return new Ui(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function zP(...t){return xg._create("startAt",t,!0)}function UP(...t){return xg._create("startAfter",t,!1)}var Tg=class t extends va{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=qP(e,this.type,this._docOrFields,this._inclusive);return new vn(e.firestore,e.converter,function(r,o){return new Ui(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function $P(...t){return Tg._create("endBefore",t,!1)}function HP(...t){return Tg._create("endAt",t,!0)}function qP(t,e,n,i){if(n[0]=At(n[0]),n[0]instanceof _a)return function(o,a,c,u,f){if(!u)throw new H($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let m=[];for(let v of hl(o))if(v.field.isKeyField())m.push(la(a,u.key));else{let w=u.data.field(v.field);if(Ag(w))throw new H($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(w===null){let E=v.field.canonicalString();throw new H($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}m.push(w)}return new Er(m,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=ba(t.firestore);return function(a,c,u,f,m,v){let w=a.explicitOrderBy;if(m.length>w.length)throw new H($.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let E=[];for(let M=0;M<m.length;M++){let k=m[M];if(w[M].field.isKeyField()){if(typeof k!="string")throw new H($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof k}`);if(!bI(a)&&k.indexOf("/")!==-1)throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${k}' contains a slash.`);let F=a.path.child(Ze.fromString(k));if(!J.isDocumentKey(F))throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);let q=new J(F);E.push(la(c,q))}else{let F=PP(u,f,k);E.push(F)}}return new Er(E,v)}(t._query,t.firestore._databaseId,r,e,n,i)}}function FM(t,e,n){if(typeof(n=At(n))=="string"){if(n==="")throw new H($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bI(e)&&n.indexOf("/")!==-1)throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(Ze.fromString(n));if(!J.isDocumentKey(i))throw new H($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return la(t,new J(i))}if(n instanceof mt)return la(t,n._key);throw new H($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kg(n)}.`)}function VM(t,e){if(!Array.isArray(t)||t.length===0)throw new H($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GP(t,e){let n=function(r,o){for(let a of r)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Ml=class{convertValue(e,n="none"){switch(ca(e)){case 0:return null;case 1:return e.booleanValue;case 2:return kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Go(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ie()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return ya(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new ga(kt(e.latitude),kt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=vI(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yd(e));default:return null}}convertTimestamp(e){let n=Qr(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=Ze.fromString(e);ae(FR(i));let r=new Wo(i.get(1),i.get(3)),o=new J(i.popFirst(5));return r.isEqual(n)||Vt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Lg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var fI=class extends Ml{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}};var Kr=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Ci=class extends _a{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new $o(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(Og("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},$o=class extends Ci{data(e={}){return super.data(e)}},qi=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Kr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new $o(this._firestore,this._userDataWriter,i.key,i,new Kr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let u=new $o(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Kr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new $o(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Kr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,m=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),m=a.indexOf(c.doc.key)),{type:q$(c.type),doc:u,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function q$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function KI(t,e){return t instanceof Ci&&e instanceof Ci?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof qi&&e instanceof qi&&t._firestore===e._firestore&&HI(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function WP(t){t=Ke(t,mt);let e=Ke(t.firestore,Dt);return hP(rn(e),t._key).then(n=>JI(e,t,n))}var eo=class extends Ml{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}};function ZP(t){t=Ke(t,mt);let e=Ke(t.firestore,Dt),n=rn(e),i=new eo(e);return V$(n,t._key).then(r=>new Ci(e,i,t._key,r,new Kr(r!==null&&r.hasLocalMutations,!0),t.converter))}function KP(t){t=Ke(t,mt);let e=Ke(t.firestore,Dt);return hP(rn(e),t._key,{source:"server"}).then(n=>JI(e,t,n))}function QP(t){t=Ke(t,vn);let e=Ke(t.firestore,Dt),n=rn(e),i=new eo(e);return LP(t._query),fP(n,t._query).then(r=>new qi(e,i,t,r))}function YP(t){t=Ke(t,vn);let e=Ke(t.firestore,Dt),n=rn(e),i=new eo(e);return B$(n,t._query).then(r=>new qi(e,i,t,r))}function XP(t){t=Ke(t,vn);let e=Ke(t.firestore,Dt),n=rn(e),i=new eo(e);return fP(n,t._query,{source:"server"}).then(r=>new qi(e,i,t,r))}function QI(t,e,n){t=Ke(t,mt);let i=Ke(t.firestore,Dt),r=Lg(t.converter,e,n);return Fl(i,[Ng(ba(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Nt.none())])}function YI(t,e,n,...i){t=Ke(t,mt);let r=Ke(t.firestore,Dt),o=ba(r),a;return a=typeof(e=At(e))=="string"||e instanceof Hi?GI(o,"updateDoc",t._key,e,n,i):qI(o,"updateDoc",t._key,e),Fl(r,[a.toMutation(t._key,Nt.exists(!0))])}function JP(t){return Fl(Ke(t.firestore,Dt),[new Xo(t._key,Nt.none())])}function ek(t,e){let n=Ke(t.firestore,Dt),i=Ih(t),r=Lg(t.converter,e);return Fl(n,[Ng(ba(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Nt.exists(!1))]).then(()=>i)}function XI(t,...e){var n,i,r;t=At(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||tI(e[a])||(o=e[a],a++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(tI(e[a])){let v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(i=v.error)===null||i===void 0?void 0:i.bind(v),e[a+2]=(r=v.complete)===null||r===void 0?void 0:r.bind(v)}let u,f,m;if(t instanceof mt)f=Ke(t.firestore,Dt),m=Pl(t._key.path),u={next:v=>{e[a]&&e[a](JI(f,t,v))},error:e[a+1],complete:e[a+2]};else{let v=Ke(t,vn);f=Ke(v.firestore,Dt),m=v._query;let w=new eo(f);u={next:E=>{e[a]&&e[a](new qi(f,w,v,E))},error:e[a+1],complete:e[a+2]},LP(t._query)}return function(w,E,M,k){let F=new Sl(k),q=new dh(E,F,M);return w.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return AI(yield Al(w),q)})),()=>{F.$a(),w.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return MI(yield Al(w),q)}))}}(rn(f),m,c,u)}function tk(t,e){return j$(rn(t=Ke(t,Dt)),tI(e)?e:{next:e})}function Fl(t,e){return function(i,r){let o=new Wt;return i.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return y$(yield BI(i),r,o)})),o.promise}(rn(t),e)}function JI(t,e,n){let i=n.docs.get(e._key),r=new eo(t);return new Ci(t,r,e._key,i,new Kr(n.hasPendingWrites,n.fromCache),e.converter)}var G$={maxAttempts:5};var Sg=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ba(e)}set(e,n,i){this._verifyNotCommitted();let r=zo(e,this._firestore),o=Lg(r.converter,n,i),a=Ng(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Nt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=zo(e,this._firestore),a;return a=typeof(n=At(n))=="string"||n instanceof Hi?GI(this._dataReader,"WriteBatch.update",o._key,n,i,r):qI(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Nt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=zo(e,this._firestore);return this._mutations=this._mutations.concat(new Xo(n._key,Nt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function zo(t,e){if((t=At(t)).firestore!==e)throw new H($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var pI=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=ba(n)}get(n){let i=zo(n,this._firestore),r=new fI(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return ie();let a=o[0];if(a.isFoundDocument())return new _a(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new _a(this._firestore,r,i._key,null,i.converter);throw ie()})}set(n,i,r){let o=zo(n,this._firestore),a=Lg(o.converter,i,r),c=Ng(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(n,i,r,...o){let a=zo(n,this._firestore),c;return c=typeof(i=At(i))=="string"||i instanceof Hi?GI(this._dataReader,"Transaction.update",a._key,i,r,o):qI(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,c),this}delete(n){let i=zo(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=zo(e,this._firestore),i=new eo(this._firestore);return super.get(e).then(r=>new Ci(this._firestore,i,n._key,r._document,new Kr(!1,!1),n.converter))}};function nk(t,e,n){t=Ke(t,Dt);let i=Object.assign(Object.assign({},G$),n);return function(o){if(o.maxAttempts<1)throw new H($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,a,c){let u=new Wt;return o.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){let f=yield O$(o);new Y0(o.asyncQueue,f,c,a,u).Xa()})),u.promise}(rn(t),r=>e(new pI(t,r)),i)}function ik(){return new ph("deleteField")}function rk(){return new oI("serverTimestamp")}function ok(...t){return new sI("arrayUnion",t)}function sk(...t){return new aI("arrayRemove",t)}function ak(t){return new cI("increment",t)}(function(e,n=!0){(function(r){Rl=r})(VE),Eu(new ws("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),c=new Dt(new yw(i.getProvider("auth-internal")),new Ew(i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new H($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wo(f.options.projectId,m)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),vo(BA,"4.6.3",e),vo(BA,"4.6.3","esm2017")})();var W$="@firebase/firestore-compat",Z$="0.3.32";function oE(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new H("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function ck(){if(typeof Uint8Array>"u")throw new H("unimplemented","Uint8Arrays are not available in this environment.")}function lk(){if(!JM())throw new H("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Fg=class t{constructor(e){this._delegate=e}static fromBase64String(e){return lk(),new t(Dr.fromBase64String(e))}static fromUint8Array(e){return ck(),new t(Dr.fromUint8Array(e))}toBase64(){return lk(),this._delegate.toBase64()}toUint8Array(){return ck(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function eE(t){return K$(t,["next","error","complete"])}function K$(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var tE=class{enableIndexedDbPersistence(e,n){return bP(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return wP(e._delegate)}clearIndexedDbPersistence(e){return EP(e._delegate)}},Vg=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Wo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){gP(this._delegate,e,n,i)}enableNetwork(){return DP(this._delegate)}disableNetwork(){return xP(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,zI("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return CP(this._delegate)}onSnapshotsInSync(e){return tk(this._delegate,e)}get app(){if(!this._appCompat)throw new H("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new jl(this,UI(this._delegate,e))}catch(n){throw Fn(n,"collection()","Firestore.collection()")}}doc(e){try{return new xr(this,Ih(this._delegate,e))}catch(n){throw Fn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Da(this,_P(this._delegate,e))}catch(n){throw Fn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return nk(this._delegate,n=>e(new Bg(this,n)))}batch(){return rn(this._delegate),new jg(new Sg(this._delegate,e=>Fl(this._delegate,e)))}loadBundle(e){return TP(this._delegate,e)}namedQuery(e){return SP(this._delegate,e).then(n=>n?new Da(this,n):null)}},Vl=class extends Ml{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fg(new Dr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return xr.forKey(n,this.firestore,null)}};function Q$(t){BM(t)}var Bg=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Vl(e)}get(e){let n=Ia(e);return this._delegate.get(n).then(i=>new Ea(this._firestore,new Ci(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=Ia(e);return i?(oE("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Ia(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Ia(e);return this._delegate.delete(n),this}},jg=class{constructor(e){this._delegate=e}set(e,n,i){let r=Ia(e);return i?(oE("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=Ia(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=Ia(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Bl=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new $o(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ca(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new Vl(e),n),r.set(n,o)),o}};Bl.INSTANCES=new WeakMap;var xr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vl(e)}static forPath(e,n,i){if(e.length%2!==0)throw new H("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new mt(n._delegate,i,new J(e)))}static forKey(e,n,i){return new t(n,new mt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new jl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new jl(this.firestore,UI(this._delegate,e))}catch(n){throw Fn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=At(e),e instanceof mt?$I(this._delegate,e):!1}set(e,n){n=oE("DocumentReference.set",n);try{return n?QI(this._delegate,e,n):QI(this._delegate,e)}catch(i){throw Fn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?YI(this._delegate,e):YI(this._delegate,e,n,...i)}catch(r){throw Fn(r,"updateDoc()","DocumentReference.update()")}}delete(){return JP(this._delegate)}onSnapshot(...e){let n=uk(e),i=dk(e,r=>new Ea(this.firestore,new Ci(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return XI(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=ZP(this._delegate):e?.source==="server"?n=KP(this._delegate):n=WP(this._delegate),n.then(i=>new Ea(this.firestore,new Ci(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Bl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Fn(t,e,n){return t.message=t.message.replace(e,n),t}function uk(t){for(let e of t)if(typeof e=="object"&&!eE(e))return e;return{}}function dk(t,e){var n,i;let r;return eE(t[0])?r=t[0]:eE(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Ea=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new xr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return KI(this._delegate,e._delegate)}},Ca=class extends Ea{data(e){let n=this._delegate.data(e);return this._delegate._converter||jM(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Da=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Vl(e)}where(e,n,i){try{return new t(this.firestore,no(this._delegate,FP(e,n,i)))}catch(r){throw Fn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,no(this._delegate,VP(e,n)))}catch(i){throw Fn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,no(this._delegate,BP(e)))}catch(n){throw Fn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,no(this._delegate,jP(e)))}catch(n){throw Fn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,no(this._delegate,zP(...e)))}catch(n){throw Fn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,no(this._delegate,UP(...e)))}catch(n){throw Fn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,no(this._delegate,$P(...e)))}catch(n){throw Fn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,no(this._delegate,HP(...e)))}catch(n){throw Fn(n,"endAt()","Query.endAt()")}}isEqual(e){return HI(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=YP(this._delegate):e?.source==="server"?n=XP(this._delegate):n=QP(this._delegate),n.then(i=>new Eh(this.firestore,new qi(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=uk(e),i=dk(e,r=>new Eh(this.firestore,new qi(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return XI(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Bl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},nE=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ca(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Eh=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Da(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ca(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new nE(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Ca(this._firestore,i))})}isEqual(e){return KI(this._delegate,e._delegate)}},jl=class t extends Da{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new xr(this.firestore,e):null}doc(e){try{return e===void 0?new xr(this.firestore,Ih(this._delegate)):new xr(this.firestore,Ih(this._delegate,e))}catch(n){throw Fn(n,"doc()","CollectionReference.doc()")}}add(e){return ek(this._delegate,e).then(n=>new xr(this.firestore,n))}isEqual(e){return $I(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Bl.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Ia(t){return Ke(t,mt)}var iE=class t{constructor(...e){this._delegate=new Hi(...e)}static documentId(){return new t(Bt.keyField().canonicalString())}isEqual(e){return e=At(e),e instanceof Hi?this._delegate._internalPath.isEqual(e._internalPath):!1}};var rE=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=rk();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=ik();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=ok(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=sk(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=ak(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var Y$={Firestore:Vg,GeoPoint:ga,Timestamp:Rt,Blob:Fg,Transaction:Bg,WriteBatch:jg,DocumentReference:xr,DocumentSnapshot:Ea,Query:Da,QueryDocumentSnapshot:Ca,QuerySnapshot:Eh,CollectionReference:jl,FieldPath:iE,FieldValue:rE,setLogLevel:Q$,CACHE_SIZE_UNLIMITED:vP};function X$(t,e){t.INTERNAL.registerComponent(new ws("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},Y$)))}function J$(t){X$(t,(e,n)=>new Vg(e,n,new tE)),t.registerVersion(W$,Z$)}J$(Jn);function eH(t,e=ir){return new Se(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function hk(t,e){return eH(t,e)}function tH(t,e){return hk(t,e).pipe(or(void 0),dc(),fe(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function cE(t,e){return hk(t,e).pipe(fe(n=>({payload:n,type:"query"})))}var zg=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=mk(i,n);return new $g(r,o,this.afs)}snapshotChanges(){return tH(this.ref,this.afs.schedulers.outsideAngular).pipe(qn)}valueChanges(e={}){return this.snapshotChanges().pipe(fe(({payload:n})=>e.idField?ht(Y({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return tt(this.ref.get(e)).pipe(qn)}};function Ug(t,e){return cE(t,e).pipe(or(void 0),dc(),fe(n=>{let[i,r]=n,o=r.payload.docChanges(),a=o.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,u)=>{let f=o.find(v=>v.doc.ref.isEqual(c.ref)),m=i?.payload.docs.find(v=>v.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&m&&JSON.stringify(m.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:c}})}),a}))}function fk(t,e,n){return Ug(t,n).pipe(Ds((i,r)=>nH(i,r.map(o=>o.payload),e),[]),lc(),fe(i=>i.map(r=>({type:r.type,payload:r}))))}function nH(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=iH(t,i))}),t}function sE(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function iH(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return sE(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return sE(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return sE(t,e.oldIndex,1);break}return t}function pk(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var $g=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=Ug(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(fe(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(or(void 0),dc(),Mt(([i,r])=>r.length>0||!i),fe(([,i])=>i),qn)}auditTrail(e){return this.stateChanges(e).pipe(Ds((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=pk(e);return fk(this.query,n,this.afs.schedulers.outsideAngular).pipe(qn)}valueChanges(e={}){return cE(this.query,this.afs.schedulers.outsideAngular).pipe(fe(n=>n.payload.docs.map(i=>e.idField?ht(Y({},i.data()),{[e.idField]:i.id}):i.data())),qn)}get(e){return tt(this.query.get(e)).pipe(qn)}add(e){return this.ref.add(e)}doc(e){return new zg(this.ref.doc(e),this.afs)}},aE=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?Ug(this.query,this.afs.schedulers.outsideAngular).pipe(qn):Ug(this.query,this.afs.schedulers.outsideAngular).pipe(fe(n=>n.filter(i=>e.indexOf(i.type)>-1)),Mt(n=>n.length>0),qn)}auditTrail(e){return this.stateChanges(e).pipe(Ds((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=pk(e);return fk(this.query,n,this.afs.schedulers.outsideAngular).pipe(qn)}valueChanges(e={}){return cE(this.query,this.afs.schedulers.outsideAngular).pipe(fe(i=>i.payload.docs.map(r=>e.idField?Y({[e.idField]:r.id},r.data()):r.data())),qn)}get(e){return tt(this.query.get(e)).pipe(qn)}},rH=new re("angularfire2.enableFirestorePersistence"),oH=new re("angularfire2.firestore.persistenceSettings"),sH=new re("angularfire2.firestore.settings"),aH=new re("angularfire2.firestore.use-emulator");function mk(t,e=n=>n){return{query:e(t),ref:t}}var gk=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,a,c,u,f,m,v,w,E,M,k,F,q,te){this.schedulers=u;let Z=Td(n,c,i),oe=m;v&&ow(Z,c,w,M,k,F,E,q),[this.firestore,this.persistenceEnabled$]=lm(`${Z.name}.firestore`,"AngularFirestore",Z.name,()=>{let de=c.runOutsideAngular(()=>Z.firestore());if(o&&de.settings(o),oe&&de.useEmulator(...oe),r&&!$s(a)){let ce=()=>{try{return tt(de.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(S){return typeof console<"u"&&console.warn(S),le(!1)}};return[de,c.runOutsideAngular(ce)]}else return[de,le(!1)]},[o,oe,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:a}=mk(r,i),c=this.schedulers.ngZone.run(()=>o);return new $g(c,a,this)}collectionGroup(n,i){let r=i||(a=>a),o=this.firestore.collectionGroup(n);return new aE(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new zg(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(V(Hc),V(qc,8),V(rH,8),V(sH,8),V(Nn),V(pe),V(am),V(oH,8),V(aH,8),V(bm,8),V(Jb,8),V(ew,8),V(tw,8),V(nw,8),V(iw,8),V(rw,8),V(Zs,8))};static \u0275prov=X({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var zl=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.afs=r,this.router=o,this.user$=this.afAuth.authState.pipe(_t(a=>a?this.afs.doc(`users/${a.uid}`).valueChanges():le(null)))}googleSignin(){return U(this,null,function*(){let i=new i_,r=yield this.afAuth.signInWithPopup(i);return this.currentUser=r.user,console.log(r),localStorage.setItem("key",r.user.uid),this.updateUserData(r.user)})}signOut(){return U(this,null,function*(){return yield this.afAuth.signOut(),this.router.navigate(["/"])})}updateUserData(i){console.log("update User Data");let r={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},o=this.afs.doc(`users/${i.uid}`);console.log(i.uid);let a={uid:i.uid,email:i.email,displayName:i.displayName,photoUrl:i.photoURL};return o.set(a,{merge:!0})}addDataToUser(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}/data/data`).set(i,{merge:!0})}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}/data/data`).set(i,{merge:!0})):null}};e.\u0275fac=function(r){return new(r||e)(V(bm),V(gk),V(om))},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lH(t,e){if(t&1&&(ve(0,"div",4)(1,"p"),Ye(2),ye()()),t&2){let n=yt();_e(2),ji(n.coins)}}function uH(t,e){if(t&1&&(ve(0,"div",4)(1,"p"),Ye(2),ye()()),t&2){let n=yt();_e(2),tn("",(n.coins/1e3).toFixed(2),"k")}}function dH(t,e){if(t&1&&(ve(0,"div",4)(1,"p"),Ye(2),ye()()),t&2){let n=yt();_e(2),tn("",(n.coins/1e6).toFixed(2),"m")}}function hH(t,e){if(t&1&&(ve(0,"div",4)(1,"p"),Ye(2),ye()()),t&2){let n=yt();_e(2),tn("",(n.coins/1e9).toFixed(2),"b")}}function fH(t,e){if(t&1){let n=hr();ve(0,"div",15)(1,"button",16),en("click",function(){gi(n);let r=yt();return _i(r.onCloseClick())}),Ye(2,"X"),ye(),ve(3,"h1"),Ye(4,"Car"),ye(),ve(5,"p"),Ye(6),ye(),ve(7,"p"),Ye(8),ye()()}if(t&2){let n=yt();Lt("z-index",n.z)("display","block"),_e(6),ji(n.randomCar.car),_e(2),ji(n.randomCar.hp)}}var _k=(()=>{let e=class e{initMap(){navigator.geolocation.getCurrentPosition(r=>{console.log(r.coords),this.moveMap([r.coords.latitude,r.coords.longitude])}),this.map=zt.map("map",{center:[0,0],zoom:18,attributionControl:!0}),this.moveMap([49,12]);let i=zt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});navigator.geolocation.watchPosition(r=>{let o=r.coords.latitude,a=r.coords.longitude,c=r.coords.accuracy;setTimeout(()=>{zt.marker([49.3,10.5833333],{icon:this.repairShop}).addTo(this.map).on("click",this.onRepairShopClick)},5e3),setTimeout(()=>{this.currentPos=null},5e3)}),i.addTo(this.map),this.path(),this.generateRandomCars()}onRepairShopClick(){console.log("jetzt")}constructor(i){this.auth=i,this.hideMap=new it,this.coins=0,this.iconHome=zt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='https://fab-io.xyz/world-clicker/assets/home.png'>",iconSize:[86,105],iconAnchor:[43,105]}),this.iconCar=zt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img id='car' src='https://fab-io.xyz/world-clicker/assets/Car.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.manCar=zt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='https://fab-io.xyz/world-clicker/assets/Man.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.repairShop=zt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='https://fab-io.xyz/world-clicker/assets/Repair.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.carLayer=new zt.FeatureGroup,this.cars=+localStorage.getItem("carcount"),this.gems=0,this.distance=.005,this.allCities=[],this.cityMarkers=[],this.isoCountries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},this.randomCars=[],this.generiertePositionen=[],this.randomCar={car:"Car12",hp:1},this.visible=!0,this.z=0,this.user=i.user$.subscribe(r=>{console.log(r),this.user=r})}onUserClick(){this.hideMap.emit("garage")}hideMapNow(i){this.hideMap.emit(i)}ngAfterViewInit(){navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,console.log(this.lng,this.lat)}),console.log(this.lat,this.lng),this.initMap(),setTimeout(()=>{},5e3),navigator.geolocation.watchPosition(i=>{console.log(i),this.marker!=null&&this.map.removeLayer(this.marker),this.marker=zt.marker([i.coords.latitude,i.coords.longitude],{icon:this.manCar}).addTo(this.map),this.moveMap([i.coords.latitude,i.coords.longitude]),console.log(this.marker,this.carLayer),setTimeout(()=>{console.log("jetzt")},5e3);let r=!0;console.log(this.generiertePositionen),this.generiertePositionen.forEach(o=>{let a=this.getDistance([o[0],o[1]],[this.lat,this.lng]);console.log("Distance:",a,this.generiertePositionen),a<1600&&(r=!1)}),r==!0&&this.genNewCars(),this.allCities.forEach(o=>{let a=o.latitude,c=o.longitude,u=this.lng-c,f=this.lat-a;u>-.005&&u<.005&&(console.log(o),console.log(this.lat,this.lng),console.log(f,u))})}),this.getAllCities()}moveMap(i){this.map.flyTo(i,18)}path(){console.log("Start"),navigator.geolocation.watchPosition(i=>{let r=i.coords.latitude,o=i.coords.longitude,a=i.coords.accuracy;this.lat=r,this.lng=o;var c=[[r,o],[r,o+this.distance]]})}getCountryName(i){return this.isoCountries.hasOwnProperty(i)?this.isoCountries[i]:i}generateRandomCars(){console.log("generateRandomCarsStart",this.lat,this.lng),navigator.geolocation.getCurrentPosition(i=>{this.generiertePositionen.push([i.coords.latitude,i.coords.longitude]);for(let r=0;r<25;r++){let o=i.coords.latitude+(Math.random()-.5)/100,a=i.coords.longitude+(Math.random()-.5)/100;console.log(o,a);let c=zt.circle([o,a],50).addTo(this.map);this.randomCars.push({Lat:o,Lng:a});let u=zt.marker([o,a],{icon:this.iconCar}).addTo(this.map);u.on("click",()=>{this.getDistance([o,a],[this.lat,this.lng])<=50&&(console.log(o,a,this.getDistance([o,a],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c))}),console.log(this.randomCars),this.map.removeLayer(this.map)}}),console.log("fertig Random")}genNewCars(){console.log("generateRandomCarsStart",this.lat,this.lng),this.generiertePositionen.push([this.lat,this.lng]),console.log("hier");for(let i=0;i<25;i++){console.log("hier");let r=this.lat+(Math.random()-.5)/100,o=this.lng+(Math.random()-.5)/100;console.log(r,o);let a=zt.circle([r,o],50).addTo(this.map);this.randomCars.push({Lat:r,Lng:o});let c=zt.marker([r,o],{icon:this.iconCar}).addTo(this.map);c.on("click",()=>{this.getDistance([r,o],[this.lat,this.lng])<=50&&(console.log(r,o,this.getDistance([r,o],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a))}),console.log(this.randomCars),this.map.removeLayer(this.map)}console.log("fertig Random")}getAllCities(){return U(this,null,function*(){let i={method:"GET",redirect:"follow"},r;yield fetch("https://api.country.is/",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{r=this.getCountryName(o.country)}).catch(o=>{console.log(o)}),yield fetch("https://countriesnow.space/api/v0.1/countries/population/cities",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{console.log(o.data),o.data.forEach(a=>{setTimeout(()=>{a.populationCounts[0].value>1e4&&a.country==r&&fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${a.city}`,{method:"GET",redirect:"follow"}).then(c=>c.json()).then(c=>{setTimeout(()=>{c.results&&(zt.marker([c.results[0].latitude,c.results[0].longitude],{icon:this.repairShop}).addTo(this.map),this.allCities.push(c.results[0]),zt.circle([c.results[0].latitude,c.results[0].longitude],550).addTo(this.map).setStyle({color:"red"}))},1e3)}).catch(c=>console.log(c))})},100)}).catch(o=>console.log(o))})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,m=c-o,v=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(m/2),2),w=2*Math.asin(Math.sqrt(v)),E=6371;return console.log(w,E),w*E*1e3}onCloseClick(){this.visible=!0,console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ke(zl))},e.\u0275cmp=Jt({type:e,selectors:[["app-leaflat-map"]],inputs:{coins:"coins"},outputs:{hideMap:"hideMap"},standalone:!0,features:[nn],decls:26,vars:11,consts:[[1,"items"],["id","coins"],["id","icon"],["src","https://fab-io.xyz/world-clicker/assets/icon%20(2).png"],["id","text"],["id","cars"],["src","https://fab-io.xyz/world-clicker/assets/icon%20(3).png"],["id","gems"],["src","https://fab-io.xyz/world-clicker/assets/icon%20(1).png"],[1,"map-container"],[1,"map-frame"],["id","map"],["id","carCard",3,"z-Index","display"],["id","user"],["width","50px","height","50px",3,"click","src"],["id","carCard"],["id","closeBtn",3,"click"]],template:function(r,o){r&1&&(ve(0,"div",0)(1,"div",1)(2,"div",2),vt(3,"img",3),ye(),Xt(4,lH,3,1,"div",4)(5,uH,3,1)(6,dH,3,1)(7,hH,3,1),ye(),ve(8,"div",5)(9,"div",2),vt(10,"img",6),ye(),ve(11,"div",4)(12,"p"),Ye(13),ye()()(),ve(14,"div",7)(15,"div",2),vt(16,"img",8),ye(),ve(17,"div",4)(18,"p"),Ye(19),ye()()()(),ve(20,"div",9)(21,"div",10),vt(22,"div",11),ye()(),Xt(23,fH,9,6,"div",12),ve(24,"div",13)(25,"img",14),en("click",function(){return o.hideMap.emit("garage")}),ye()()),r&2&&(_e(4),Hn(4,o.coins<1e3?4:o.coins>=1e3&&o.coins<=999999?5:o.coins>=1e6&&o.coins<=999999999?6:o.coins>=1e9&&o.coins<=999999999999?7:-1),_e(9),ji(o.cars),_e(6),ji(o.gems),_e(),Lt("display",o.visible?"block":"none"),_e(),Lt("display",o.visible?"block":"none"),_e(),Lt("display",o.visible?"block":"none"),_e(),Hn(23,o.visible==!1?23:-1),_e(2),Bi("src",o.user.photoUrl,Sc))},dependencies:[EA],styles:['.map-container[_ngcontent-%COMP%]{position:absolute;inset:0;height:calc(100vh + -0px)}.items[_ngcontent-%COMP%]{position:absolute;top:25px;left:0;display:flex;z-index:50000;justify-content:space-around;width:100%}#user[_ngcontent-%COMP%]{z-index:50000;position:absolute;bottom:35px;left:15px}#user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.items[_ngcontent-%COMP%]   #cars[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #gems[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #coins[_ngcontent-%COMP%]{width:100px;height:25px;background-color:#fff;border:1px black solid;border-radius:2px}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map[_ngcontent-%COMP%]{height:100%}.marker-pin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:500}.marker-pin[_ngcontent-%COMP%]:after{content:"";width:1px;height:1px;margin:3px 0 0 3px;background:#fff;position:absolute;border-radius:50%}.custom-div-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:5px;font-size:5px;left:0;right:0;margin:10px auto;text-align:center}img[_ngcontent-%COMP%]{width:50px;height:55px}#car[_ngcontent-%COMP%]{width:3px;height:3px}#carCard[_ngcontent-%COMP%]{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:5000;background-color:#fff;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}#icon[_ngcontent-%COMP%]{width:30%;height:100%}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:75%}#text[_ngcontent-%COMP%]{width:70%}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-37.5px;left:25px}']});let t=e;return t})();var vk=(()=>{let e=class e{constructor(){fetch("../../assets/cars.json",{method:"GET",redirect:"follow"}).then(i=>i.json()).then(i=>{console.log(i),this.cars=i,console.log(this.cars)}).catch(i=>console.error(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=X({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mH(t,e){if(t&1&&(vt(0,"br"),ve(1,"h1"),Ye(2),ye(),vt(3,"img",2),ve(4,"div",3)(5,"div",4),Ye(6),ye(),ve(7,"div",5),Ye(8),ye(),ve(9,"div",6),Ye(10),ye(),ve(11,"div",7),Ye(12),ye(),ve(13,"div",8),Ye(14),ye(),ve(15,"div",9),Ye(16),ye()(),vt(17,"br")),t&2){let n=yt();_e(),Lt("color",n.randomCar.textColor),_e(),ji(n.randomCar.Name.toUpperCase()),_e(),Bi("src",n.randomCar.Path,Sc),_e(2),Lt("background",n.randomCar.Color)("color",n.randomCar.textColor),_e(),tn("",n.randomCar.Horsepower," hp"),_e(),Lt("background",n.randomCar.Color)("color",n.randomCar.textColor),_e(),tn("",n.randomCar.Miles_per_Gallon," Miles per Gallon"),_e(),Lt("background",n.randomCar.Color)("color",n.randomCar.textColor),_e(),tn("",n.randomCar.Cylinders," Cylinders"),_e(),Lt("background",n.randomCar.Color)("color",n.randomCar.textColor),_e(),tn(" ",n.randomCar.Acceleration,"s 0 - 60 mp/h"),_e(),Lt("background",n.randomCar.Color)("color",n.randomCar.textColor),_e(),tn(" ",n.randomCar.CPS," coins per second"),_e(),Lt("background",n.randomCar.Color)("color",n.randomCar.textColor),_e(),tn(" Year: ",n.randomCar.Year," ")}}var yk=(()=>{let e=class e{addCoin(i){console.log(i),this.addCoins.emit(Math.floor(i))}onCloseClick(){this.hideMap.emit("a")}ngOnInit(){if(setTimeout(()=>{this.getRandomCar()},500),localStorage.getItem("mycars")){let i=JSON.parse(localStorage.getItem("mycars"));console.log(localStorage.getItem("mycars"),JSON.parse(localStorage.getItem("mycars"))),console.log("allcars"),console.log(i),this.myCars.push(...i),console.log(this.myCars)}}constructor(i){this.car=i,this.hideMap=new it,this.addCoins=new it,this.CPS=0,this.randomCar={car:"Car12",hp:1,topSpeed:152},this.myCars=[],this.allCars=[],this.allCars=this.car.cars}getAllCars(){this.allCars=this.car.cars}getRandomCar(){if(console.log(this.car.cars),this.car.cars){let i=this.car.cars[Math.floor(Math.random()*this.car.cars.length)];console.log(i),this.randomCar=i,this.randomCar.CPS=this.randomCar.Horsepower*this.randomCar.Acceleration*this.randomCar.Cylinders/1e3,this.myCars.push(i),console.log(this.CPS),this.CPS=this.CPS+i.CPS,console.log(this.CPS),this.getCPS(),localStorage.setItem("mycars",JSON.stringify(this.myCars))}}getCPS(){this.addCoin(this.CPS),console.log(this.CPS)}};e.\u0275fac=function(r){return new(r||e)(ke(vk))},e.\u0275cmp=Jt({type:e,selectors:[["app-car-found"]],outputs:{hideMap:"hideMap",addCoins:"addCoins"},standalone:!0,features:[nn],decls:6,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&(ve(0,"body")(1,"div",0)(2,"button",1),en("click",function(){return o.onCloseClick()}),Ye(3,"X"),ye(),vt(4,"br"),Xt(5,mH,18,34),ye()()),r&2&&(_e(),Lt("display","block")("background",o.randomCar.Color),_e(4),Hn(5,o.randomCar.Color?5:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;height:30px;padding-top:7.5px}"]});let t=e;return t})();var bk=(()=>{let e=class e{ngOnInit(){}onImageClick(){console.log("click"),this.switchVisible.emit({a:"a",currentVisible:"garage"})}constructor(i){this.auth=i,this.switchVisible=new it,this.user=i.currentUser,console.log(i,i.user$),i.user$.subscribe(r=>{console.log(r),this.user=r.displayName,this.image=r.photoUrl,console.log(this.image),console.log(r.displayName),console.log(this.user)})}};e.\u0275fac=function(r){return new(r||e)(ke(zl))},e.\u0275cmp=Jt({type:e,selectors:[["app-navigation"]],outputs:{switchVisible:"switchVisible"},standalone:!0,features:[nn],decls:0,vars:0,template:function(r,o){},styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:20%;height:50px;background-color:#2b2c2f;border:1px black solid}*[_ngcontent-%COMP%]{z-index:5000001287451233000000000}img[_ngcontent-%COMP%]{border-radius:50%}div[_ngcontent-%COMP%]{height:50px;margin-left:5px}p[_ngcontent-%COMP%]{margin-top:-5px}"]});let t=e;return t})();function gH(t,e){if(t&1&&(ve(0,"div",3),vt(1,"br")(2,"img",4)(3,"br"),ve(4,"p"),Ye(5),ye()()),t&2){let n=e.$implicit;Lt("background",n.Color),_e(2),Bi("src",n.Path,Sc),_e(3),ji(n.Name)}}function _H(t,e){if(t&1&&fT(0,gH,6,4,"div",2,hT),t&2){let n=yt();pT(n.myCars)}}var wk=(()=>{let e=class e{constructor(){this.hideMap=new it}onCloseClick(){this.hideMap.emit("garage")}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Jt({type:e,selectors:[["app-my-cars"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[nn],decls:5,vars:1,consts:[[1,"closeBtn",3,"click"],[1,"container"],["id","car",3,"background"],["id","car"],["width","50%","height","auto",3,"src"]],template:function(r,o){r&1&&(ve(0,"div",0),en("click",function(){return o.onCloseClick()}),ve(1,"p"),Ye(2,"X"),ye()(),ve(3,"div",1),Xt(4,_H,2,0),ye()),r&2&&(_e(4),Hn(4,o.myCars?4:-1))},styles:[".closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;border:1px black solid;top:0;position:sticky;left:calc(100% - 50px);background-color:#fff}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}"]});let t=e;return t})();function vH(t,e){if(t&1){let n=hr();ve(0,"app-car-found",5),en("hideMap",function(){gi(n);let r=yt(2);return _i(r.switchVisibile("carFound"))})("addCoins",function(r){gi(n);let o=yt(2);return _i(o.addCoins(r))}),ye()}}function yH(t,e){if(t&1){let n=hr();ve(0,"app-my-cars",6),en("hideMap",function(r){gi(n);let o=yt(2);return _i(o.switchVisibile(r))}),ye()}}function bH(t,e){if(t&1){let n=hr();ve(0,"div",1)(1,"app-leaflat-map",2),en("hideMap",function(r){gi(n);let o=yt();return _i(o.switchVisibile(r))}),ye(),Xt(2,vH,1,0,"app-car-found")(3,yH,1,0,"app-my-cars"),vt(4,"div",3),ve(5,"app-navigation",4),en("switchVisible",function(r){gi(n);let o=yt();return _i(o.switchVisibile(r))}),ye()()}if(t&2){let n=yt();_e(),Lt("display",n.visible?"block":"none"),Bi("coins",n.coins),_e(),Hn(2,!n.visible&&n.currentVisible=="carFound"?2:-1),_e(),Hn(3,!n.visible&&n.currentVisible=="garage"?3:-1)}}function wH(t,e){if(t&1){let n=hr();ve(0,"div"),Ye(1),vt(2,"hr"),ve(3,"button",8),en("click",function(){gi(n);let r=yt(2);return _i(r.auth.signOut())}),Ye(4,"Sign Out"),ye()()}if(t&2){let n=e.ngIf;_e(),tn(" ",n.jsonData,`
`)}}function IH(t,e){if(t&1){let n=hr();ve(0,"button",8),en("click",function(){gi(n);let r=yt(2);return _i(r.signIn())}),Ye(1,"Login"),ye()}}function EH(t,e){if(t&1&&(Xt(0,wH,5,1,"div",7),_T(1,"async"),Xt(2,IH,2,0,"ng-template",null,0,yT)),t&2){let n=gT(3),i=yt();Bi("ngIf",vT(1,2,i.auth.user$))("ngIfElse",n)}}var Ik=(()=>{let e=class e{constructor(i){this.auth=i,this.key=localStorage.getItem("key"),this.title="world-clicker",this.cps=0,this.coins=0,this.visible=!0}signIn(){this.auth.googleSignin(),setInterval(()=>{localStorage.getItem("key")&&window.location.reload()},500)}addCoins(i){console.log("coin:",i),this.cps=this.cps+i,localStorage.setItem("cps",this.cps.toString())}ngOnInit(){console.log(this.auth.user$,this.auth.currentUser),localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins"))),setInterval(()=>{Math.floor(this.coins=this.coins+this.cps),localStorage.setItem("coins",this.coins.toString())},1e3),this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps")}),setInterval(()=>{this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps"),update:new Date})},25e3)}updateUserDat(i){this.auth.addDataToUser(i)}switchVisibile(i){console.log(i),console.log(this.visible),this.visible=!this.visible,this.visible==!1&&(this.currentVisible=i),console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ke(zl))},e.\u0275cmp=Jt({type:e,selectors:[["app-root"]],standalone:!0,features:[nn],decls:2,vars:1,consts:[["login",""],[1,"App"],[3,"hideMap","coins"],[1,"push"],[3,"switchVisible"],[3,"hideMap","addCoins"],[3,"hideMap"],[4,"ngIf","ngIfElse"],[1,"button",3,"click"]],template:function(r,o){r&1&&Xt(0,bH,6,5,"div",1)(1,EH,4,4),r&2&&Hn(0,o.key?0:1)},dependencies:[_k,yk,bk,wk,Cy,LT,FT],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.App[_ngcontent-%COMP%]{text-align:center}app-leaflet-map[_ngcontent-%COMP%]{height:100vh}.push[_ngcontent-%COMP%]{height:calc(100vh - 150px)}app-navigation[_ngcontent-%COMP%]{width:100%;height:100px;left:0;z-index:545}"]});let t=e;return t})();WT(Ik,NS).catch(t=>console.error(t));
