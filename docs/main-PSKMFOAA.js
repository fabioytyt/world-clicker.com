import{A as Mr,B as Jc,C as BD,D as er,E as go,F as jD,G as UD,H as rs,I as wp,J as Nt,K as Kv,L as Ip,M as Yv,N as tr,a as te,b as It,c as HF,d as qF,e as $v,f as k,g as kD,h as yp,i as ND,j as OD,k as FD,l as LD,m as Hv,n as VD,o as Sd,p as qv,q as Gv,r as ma,s as Wv,t as Zv,u as Qc,v as Xc,w as Ad,x as bp,y as Tt,z as gi}from"./chunk-VDSRAR5F.js";var yN=HF((fv,vN)=>{(function(t,e){typeof fv=="object"&&typeof vN<"u"?e(fv):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.leaflet={}))})(fv,function(t){"use strict";var e="1.9.4";function n(a){var l,h,m,v;for(h=1,m=arguments.length;h<m;h++){v=arguments[h];for(l in v)a[l]=v[l]}return a}var i=Object.create||function(){function a(){}return function(l){return a.prototype=l,new a}}();function r(a,l){var h=Array.prototype.slice;if(a.bind)return a.bind.apply(a,h.call(arguments,1));var m=h.call(arguments,2);return function(){return a.apply(l,m.length?m.concat(h.call(arguments)):arguments)}}var o=0;function s(a){return"_leaflet_id"in a||(a._leaflet_id=++o),a._leaflet_id}function c(a,l,h){var m,v,w,D;return D=function(){m=!1,v&&(w.apply(h,v),v=!1)},w=function(){m?v=arguments:(a.apply(h,arguments),setTimeout(D,l),m=!0)},w}function u(a,l,h){var m=l[1],v=l[0],w=m-v;return a===m&&h?a:((a-v)%w+w)%w+v}function f(){return!1}function p(a,l){if(l===!1)return a;var h=Math.pow(10,l===void 0?6:l);return Math.round(a*h)/h}function _(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function b(a){return _(a).split(/\s+/)}function I(a,l){Object.prototype.hasOwnProperty.call(a,"options")||(a.options=a.options?i(a.options):{});for(var h in l)a.options[h]=l[h];return a.options}function S(a,l,h){var m=[];for(var v in a)m.push(encodeURIComponent(h?v.toUpperCase():v)+"="+encodeURIComponent(a[v]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function O(a,l){return a.replace(P,function(h,m){var v=l[m];if(v===void 0)throw new Error("No value provided for variable "+h);return typeof v=="function"&&(v=v(l)),v})}var W=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};function X(a,l){for(var h=0;h<a.length;h++)if(a[h]===l)return h;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ae(a){return window["webkit"+a]||window["moz"+a]||window["ms"+a]}var _e=0;function me(a){var l=+new Date,h=Math.max(0,16-(l-_e));return _e=l+h,window.setTimeout(a,h)}var A=window.requestAnimationFrame||ae("RequestAnimationFrame")||me,E=window.cancelAnimationFrame||ae("CancelAnimationFrame")||ae("CancelRequestAnimationFrame")||function(a){window.clearTimeout(a)};function x(a,l,h){if(h&&A===me)a.call(l);else return A.call(window,r(a,l))}function M(a){a&&E.call(window,a)}var R={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:s,throttle:c,wrapNum:u,falseFn:f,formatNum:p,trim:_,splitWords:b,setOptions:I,getParamString:S,template:O,isArray:W,indexOf:X,emptyImageUrl:Z,requestFn:A,cancelFn:E,requestAnimFrame:x,cancelAnimFrame:M};function F(){}F.extend=function(a){var l=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,m=i(h);m.constructor=l,l.prototype=m;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return a.statics&&n(l,a.statics),a.includes&&(T(a.includes),n.apply(null,[m].concat(a.includes))),n(m,a),delete m.statics,delete m.includes,m.options&&(m.options=h.options?i(h.options):{},n(m.options,a.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,D=m._initHooks.length;w<D;w++)m._initHooks[w].call(this)}},l},F.include=function(a){var l=this.prototype.options;return n(this.prototype,a),a.options&&(this.prototype.options=l,this.mergeOptions(a.options)),this},F.mergeOptions=function(a){return n(this.prototype.options,a),this},F.addInitHook=function(a){var l=Array.prototype.slice.call(arguments,1),h=typeof a=="function"?a:function(){this[a].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function T(a){if(!(typeof L>"u"||!L||!L.Mixin)){a=W(a)?a:[a];for(var l=0;l<a.length;l++)a[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Gt={on:function(a,l,h){if(typeof a=="object")for(var m in a)this._on(m,a[m],l);else{a=b(a);for(var v=0,w=a.length;v<w;v++)this._on(a[v],l,h)}return this},off:function(a,l,h){if(!arguments.length)delete this._events;else if(typeof a=="object")for(var m in a)this._off(m,a[m],l);else{a=b(a);for(var v=arguments.length===1,w=0,D=a.length;w<D;w++)v?this._off(a[w]):this._off(a[w],l,h)}return this},_on:function(a,l,h,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(a,l,h)===!1){h===this&&(h=void 0);var v={fn:l,ctx:h};m&&(v.once=!0),this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(v)}},_off:function(a,l,h){var m,v,w;if(this._events&&(m=this._events[a],!!m)){if(arguments.length===1){if(this._firingCount)for(v=0,w=m.length;v<w;v++)m[v].fn=f;delete this._events[a];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var D=this._listens(a,l,h);if(D!==!1){var B=m[D];this._firingCount&&(B.fn=f,this._events[a]=m=m.slice()),m.splice(D,1)}}},fire:function(a,l,h){if(!this.listens(a,h))return this;var m=n({},l,{type:a,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[a];if(v){this._firingCount=this._firingCount+1||1;for(var w=0,D=v.length;w<D;w++){var B=v[w],z=B.fn;B.once&&this.off(a,z,B.ctx),z.call(B.ctx||this,m)}this._firingCount--}}return h&&this._propagateEvent(m),this},listens:function(a,l,h,m){typeof a!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(m=!!l,v=void 0,h=void 0);var w=this._events&&this._events[a];if(w&&w.length&&this._listens(a,v,h)!==!1)return!0;if(m){for(var D in this._eventParents)if(this._eventParents[D].listens(a,l,h,m))return!0}return!1},_listens:function(a,l,h){if(!this._events)return!1;var m=this._events[a]||[];if(!l)return!!m.length;h===this&&(h=void 0);for(var v=0,w=m.length;v<w;v++)if(m[v].fn===l&&m[v].ctx===h)return v;return!1},once:function(a,l,h){if(typeof a=="object")for(var m in a)this._on(m,a[m],l,!0);else{a=b(a);for(var v=0,w=a.length;v<w;v++)this._on(a[v],l,h,!0)}return this},addEventParent:function(a){return this._eventParents=this._eventParents||{},this._eventParents[s(a)]=a,this},removeEventParent:function(a){return this._eventParents&&delete this._eventParents[s(a)],this},_propagateEvent:function(a){for(var l in this._eventParents)this._eventParents[l].fire(a.type,n({layer:a.target,propagatedFrom:a.target},a),!0)}};Gt.addEventListener=Gt.on,Gt.removeEventListener=Gt.clearAllEventListeners=Gt.off,Gt.addOneTimeEventListener=Gt.once,Gt.fireEvent=Gt.fire,Gt.hasEventListeners=Gt.listens;var Ki=F.extend(Gt);function Oe(a,l,h){this.x=h?Math.round(a):a,this.y=h?Math.round(l):l}var Ho=Math.trunc||function(a){return a>0?Math.floor(a):Math.ceil(a)};Oe.prototype={clone:function(){return new Oe(this.x,this.y)},add:function(a){return this.clone()._add(Ee(a))},_add:function(a){return this.x+=a.x,this.y+=a.y,this},subtract:function(a){return this.clone()._subtract(Ee(a))},_subtract:function(a){return this.x-=a.x,this.y-=a.y,this},divideBy:function(a){return this.clone()._divideBy(a)},_divideBy:function(a){return this.x/=a,this.y/=a,this},multiplyBy:function(a){return this.clone()._multiplyBy(a)},_multiplyBy:function(a){return this.x*=a,this.y*=a,this},scaleBy:function(a){return new Oe(this.x*a.x,this.y*a.y)},unscaleBy:function(a){return new Oe(this.x/a.x,this.y/a.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Ho(this.x),this.y=Ho(this.y),this},distanceTo:function(a){a=Ee(a);var l=a.x-this.x,h=a.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(a){return a=Ee(a),a.x===this.x&&a.y===this.y},contains:function(a){return a=Ee(a),Math.abs(a.x)<=Math.abs(this.x)&&Math.abs(a.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function Ee(a,l,h){return a instanceof Oe?a:W(a)?new Oe(a[0],a[1]):a==null?a:typeof a=="object"&&"x"in a&&"y"in a?new Oe(a.x,a.y):new Oe(a,l,h)}function Dt(a,l){if(a)for(var h=l?[a,l]:a,m=0,v=h.length;m<v;m++)this.extend(h[m])}Dt.prototype={extend:function(a){var l,h;if(!a)return this;if(a instanceof Oe||typeof a[0]=="number"||"x"in a)l=h=Ee(a);else if(a=xn(a),l=a.min,h=a.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(a){return Ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,a)},getBottomLeft:function(){return Ee(this.min.x,this.max.y)},getTopRight:function(){return Ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(a){var l,h;return typeof a[0]=="number"||a instanceof Oe?a=Ee(a):a=xn(a),a instanceof Dt?(l=a.min,h=a.max):l=h=a,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(a){a=xn(a);var l=this.min,h=this.max,m=a.min,v=a.max,w=v.x>=l.x&&m.x<=h.x,D=v.y>=l.y&&m.y<=h.y;return w&&D},overlaps:function(a){a=xn(a);var l=this.min,h=this.max,m=a.min,v=a.max,w=v.x>l.x&&m.x<h.x,D=v.y>l.y&&m.y<h.y;return w&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(a){var l=this.min,h=this.max,m=Math.abs(l.x-h.x)*a,v=Math.abs(l.y-h.y)*a;return xn(Ee(l.x-m,l.y-v),Ee(h.x+m,h.y+v))},equals:function(a){return a?(a=xn(a),this.min.equals(a.getTopLeft())&&this.max.equals(a.getBottomRight())):!1}};function xn(a,l){return!a||a instanceof Dt?a:new Dt(a,l)}function kn(a,l){if(a)for(var h=l?[a,l]:a,m=0,v=h.length;m<v;m++)this.extend(h[m])}kn.prototype={extend:function(a){var l=this._southWest,h=this._northEast,m,v;if(a instanceof Re)m=a,v=a;else if(a instanceof kn){if(m=a._southWest,v=a._northEast,!m||!v)return this}else return a?this.extend(Xe(a)||bt(a)):this;return!l&&!h?(this._southWest=new Re(m.lat,m.lng),this._northEast=new Re(v.lat,v.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),h.lat=Math.max(v.lat,h.lat),h.lng=Math.max(v.lng,h.lng)),this},pad:function(a){var l=this._southWest,h=this._northEast,m=Math.abs(l.lat-h.lat)*a,v=Math.abs(l.lng-h.lng)*a;return new kn(new Re(l.lat-m,l.lng-v),new Re(h.lat+m,h.lng+v))},getCenter:function(){return new Re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Re(this.getNorth(),this.getWest())},getSouthEast:function(){return new Re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(a){typeof a[0]=="number"||a instanceof Re||"lat"in a?a=Xe(a):a=bt(a);var l=this._southWest,h=this._northEast,m,v;return a instanceof kn?(m=a.getSouthWest(),v=a.getNorthEast()):m=v=a,m.lat>=l.lat&&v.lat<=h.lat&&m.lng>=l.lng&&v.lng<=h.lng},intersects:function(a){a=bt(a);var l=this._southWest,h=this._northEast,m=a.getSouthWest(),v=a.getNorthEast(),w=v.lat>=l.lat&&m.lat<=h.lat,D=v.lng>=l.lng&&m.lng<=h.lng;return w&&D},overlaps:function(a){a=bt(a);var l=this._southWest,h=this._northEast,m=a.getSouthWest(),v=a.getNorthEast(),w=v.lat>l.lat&&m.lat<h.lat,D=v.lng>l.lng&&m.lng<h.lng;return w&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(a,l){return a?(a=bt(a),this._southWest.equals(a.getSouthWest(),l)&&this._northEast.equals(a.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function bt(a,l){return a instanceof kn?a:new kn(a,l)}function Re(a,l,h){if(isNaN(a)||isNaN(l))throw new Error("Invalid LatLng object: ("+a+", "+l+")");this.lat=+a,this.lng=+l,h!==void 0&&(this.alt=+h)}Re.prototype={equals:function(a,l){if(!a)return!1;a=Xe(a);var h=Math.max(Math.abs(this.lat-a.lat),Math.abs(this.lng-a.lng));return h<=(l===void 0?1e-9:l)},toString:function(a){return"LatLng("+p(this.lat,a)+", "+p(this.lng,a)+")"},distanceTo:function(a){return br.distance(this,Xe(a))},wrap:function(){return br.wrapLatLng(this)},toBounds:function(a){var l=180*a/40075017,h=l/Math.cos(Math.PI/180*this.lat);return bt([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Re(this.lat,this.lng,this.alt)}};function Xe(a,l,h){return a instanceof Re?a:W(a)&&typeof a[0]!="object"?a.length===3?new Re(a[0],a[1],a[2]):a.length===2?new Re(a[0],a[1]):null:a==null?a:typeof a=="object"&&"lat"in a?new Re(a.lat,"lng"in a?a.lng:a.lon,a.alt):l===void 0?null:new Re(a,l,h)}var jn={latLngToPoint:function(a,l){var h=this.projection.project(a),m=this.scale(l);return this.transformation._transform(h,m)},pointToLatLng:function(a,l){var h=this.scale(l),m=this.transformation.untransform(a,h);return this.projection.unproject(m)},project:function(a){return this.projection.project(a)},unproject:function(a){return this.projection.unproject(a)},scale:function(a){return 256*Math.pow(2,a)},zoom:function(a){return Math.log(a/256)/Math.LN2},getProjectedBounds:function(a){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(a),m=this.transformation.transform(l.min,h),v=this.transformation.transform(l.max,h);return new Dt(m,v)},infinite:!1,wrapLatLng:function(a){var l=this.wrapLng?u(a.lng,this.wrapLng,!0):a.lng,h=this.wrapLat?u(a.lat,this.wrapLat,!0):a.lat,m=a.alt;return new Re(h,l,m)},wrapLatLngBounds:function(a){var l=a.getCenter(),h=this.wrapLatLng(l),m=l.lat-h.lat,v=l.lng-h.lng;if(m===0&&v===0)return a;var w=a.getSouthWest(),D=a.getNorthEast(),B=new Re(w.lat-m,w.lng-v),z=new Re(D.lat-m,D.lng-v);return new kn(B,z)}},br=n({},jn,{wrapLng:[-180,180],R:6371e3,distance:function(a,l){var h=Math.PI/180,m=a.lat*h,v=l.lat*h,w=Math.sin((l.lat-a.lat)*h/2),D=Math.sin((l.lng-a.lng)*h/2),B=w*w+Math.cos(m)*Math.cos(v)*D*D,z=2*Math.atan2(Math.sqrt(B),Math.sqrt(1-B));return this.R*z}}),qo=6378137,Zu={R:qo,MAX_LATITUDE:85.0511287798,project:function(a){var l=Math.PI/180,h=this.MAX_LATITUDE,m=Math.max(Math.min(h,a.lat),-h),v=Math.sin(m*l);return new Oe(this.R*a.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(a){var l=180/Math.PI;return new Re((2*Math.atan(Math.exp(a.y/this.R))-Math.PI/2)*l,a.x*l/this.R)},bounds:function(){var a=qo*Math.PI;return new Dt([-a,-a],[a,a])}()};function Ku(a,l,h,m){if(W(a)){this._a=a[0],this._b=a[1],this._c=a[2],this._d=a[3];return}this._a=a,this._b=l,this._c=h,this._d=m}Ku.prototype={transform:function(a,l){return this._transform(a.clone(),l)},_transform:function(a,l){return l=l||1,a.x=l*(this._a*a.x+this._b),a.y=l*(this._c*a.y+this._d),a},untransform:function(a,l){return l=l||1,new Oe((a.x/l-this._b)/this._a,(a.y/l-this._d)/this._c)}};function wr(a,l,h,m){return new Ku(a,l,h,m)}var Go=n({},br,{code:"EPSG:3857",projection:Zu,transformation:function(){var a=.5/(Math.PI*Zu.R);return wr(a,.5,-a,.5)}()}),Yu=n({},Go,{code:"EPSG:900913"});function Tc(a){return document.createElementNS("http://www.w3.org/2000/svg",a)}function Sc(a,l){var h="",m,v,w,D,B,z;for(m=0,w=a.length;m<w;m++){for(B=a[m],v=0,D=B.length;v<D;v++)z=B[v],h+=(v?"L":"M")+z.x+" "+z.y;h+=l?ge.svg?"z":"x":""}return h||"M0 0"}var Qs=document.documentElement.style,Xs="ActiveXObject"in window,Ff=Xs&&!document.addEventListener,Lf="msLaunchUri"in navigator&&!("documentMode"in document),Ac=ui("webkit"),Qu=ui("android"),Mc=ui("android 2")||ui("android 3"),Vf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Nv=Qu&&ui("Google")&&Vf<537&&!("AudioNode"in window),Js=!!window.opera,Pc=!Lf&&ui("chrome"),Rc=ui("gecko")&&!Ac&&!Js&&!Xs,vn=!Pc&&ui("safari"),yn=ui("phantom"),ea="OTransition"in Qs,Bf=navigator.platform.indexOf("Win")===0,Xu=Xs&&"transition"in Qs,Ju="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Mc,Wo="MozPerspective"in Qs,jf=!window.L_DISABLE_3D&&(Xu||Ju||Wo)&&!ea&&!yn,Zo=typeof orientation<"u"||ui("mobile"),ed=Zo&&Ac,Ov=Zo&&Ju,Uf=!window.PointerEvent&&window.MSPointerEvent,kc=!!(window.PointerEvent||Uf),td="ontouchstart"in window||!!window.TouchEvent,zf=!window.L_NO_TOUCH&&(td||kc),ta=Zo&&Js,nd=Zo&&Rc,id=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,oo=function(){var a=!1;try{var l=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("testPassiveEventSupport",f,l),window.removeEventListener("testPassiveEventSupport",f,l)}catch{}return a}(),$f=function(){return!!document.createElement("canvas").getContext}(),Ko=!!(document.createElementNS&&Tc("svg").createSVGRect),Hf=!!Ko&&function(){var a=document.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),na=!Ko&&function(){try{var a=document.createElement("div");a.innerHTML='<v:shape adj="1"/>';var l=a.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),qf=navigator.platform.indexOf("Mac")===0,Dn=navigator.platform.indexOf("Linux")===0;function ui(a){return navigator.userAgent.toLowerCase().indexOf(a)>=0}var ge={ie:Xs,ielt9:Ff,edge:Lf,webkit:Ac,android:Qu,android23:Mc,androidStock:Nv,opera:Js,chrome:Pc,gecko:Rc,safari:vn,phantom:yn,opera12:ea,win:Bf,ie3d:Xu,webkit3d:Ju,gecko3d:Wo,any3d:jf,mobile:Zo,mobileWebkit:ed,mobileWebkit3d:Ov,msPointer:Uf,pointer:kc,touch:zf,touchNative:td,mobileOpera:ta,mobileGecko:nd,retina:id,passiveEvents:oo,canvas:$f,svg:Ko,vml:na,inlineSvg:Hf,mac:qf,linux:Dn},Yo=ge.msPointer?"MSPointerDown":"pointerdown",Gf=ge.msPointer?"MSPointerMove":"pointermove",Wf=ge.msPointer?"MSPointerUp":"pointerup",so=ge.msPointer?"MSPointerCancel":"pointercancel",rd={touchstart:Yo,touchmove:Gf,touchend:Wf,touchcancel:so},Zf={touchstart:Yf,touchmove:Qo,touchend:Qo,touchcancel:Qo},Yi={},od=!1;function sd(a,l,h){return l==="touchstart"&&cd(),Zf[l]?(h=Zf[l].bind(this,h),a.addEventListener(rd[l],h,!1),h):(console.warn("wrong event specified:",l),f)}function Nc(a,l,h){if(!rd[l]){console.warn("wrong event specified:",l);return}a.removeEventListener(rd[l],h,!1)}function Ir(a){Yi[a.pointerId]=a}function Kf(a){Yi[a.pointerId]&&(Yi[a.pointerId]=a)}function ad(a){delete Yi[a.pointerId]}function cd(){od||(document.addEventListener(Yo,Ir,!0),document.addEventListener(Gf,Kf,!0),document.addEventListener(Wf,ad,!0),document.addEventListener(so,ad,!0),od=!0)}function Qo(a,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in Yi)l.touches.push(Yi[h]);l.changedTouches=[l],a(l)}}function Yf(a,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Zt(l),Qo(a,l)}function Qf(a){var l={},h,m;for(m in a)h=a[m],l[m]=h&&h.bind?h.bind(a):h;return a=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Fv=200;function Oc(a,l){a.addEventListener("dblclick",l);var h=0,m;function v(w){if(w.detail!==1){m=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var D=_d(w);if(!(D.some(function(z){return z instanceof HTMLLabelElement&&z.attributes.for})&&!D.some(function(z){return z instanceof HTMLInputElement||z instanceof HTMLSelectElement}))){var B=Date.now();B-h<=Fv?(m++,m===2&&l(Qf(w))):m=1,h=B}}}return a.addEventListener("click",v),{dblclick:l,simDblclick:v}}function Xf(a,l){a.removeEventListener("dblclick",l.dblclick),a.removeEventListener("click",l.simDblclick)}var ia=Ei(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Qi=Ei(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Cr=Qi==="webkitTransition"||Qi==="OTransition"?Qi+"End":"transitionend";function Fc(a){return typeof a=="string"?document.getElementById(a):a}function ra(a,l){var h=a.style[l]||a.currentStyle&&a.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(a,null);h=m?m[l]:null}return h==="auto"?null:h}function tt(a,l,h){var m=document.createElement(a);return m.className=l||"",h&&h.appendChild(m),m}function Rt(a){var l=a.parentNode;l&&l.removeChild(a)}function oa(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function Er(a){var l=a.parentNode;l&&l.lastChild!==a&&l.appendChild(a)}function xr(a){var l=a.parentNode;l&&l.firstChild!==a&&l.insertBefore(a,l.firstChild)}function Lc(a,l){if(a.classList!==void 0)return a.classList.contains(l);var h=sa(a);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Fe(a,l){if(a.classList!==void 0)for(var h=b(l),m=0,v=h.length;m<v;m++)a.classList.add(h[m]);else if(!Lc(a,l)){var w=sa(a);ld(a,(w?w+" ":"")+l)}}function Wt(a,l){a.classList!==void 0?a.classList.remove(l):ld(a,_((" "+sa(a)+" ").replace(" "+l+" "," ")))}function ld(a,l){a.className.baseVal===void 0?a.className=l:a.className.baseVal=l}function sa(a){return a.correspondingElement&&(a=a.correspondingElement),a.className.baseVal===void 0?a.className:a.className.baseVal}function Un(a,l){"opacity"in a.style?a.style.opacity=l:"filter"in a.style&&Lv(a,l)}function Lv(a,l){var h=!1,m="DXImageTransform.Microsoft.Alpha";try{h=a.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):a.style.filter+=" progid:"+m+"(opacity="+l+")"}function Ei(a){for(var l=document.documentElement.style,h=0;h<a.length;h++)if(a[h]in l)return a[h];return!1}function Tn(a,l,h){var m=l||new Oe(0,0);a.style[ia]=(ge.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(h?" scale("+h+")":"")}function Vt(a,l){a._leaflet_pos=l,ge.any3d?Tn(a,l):(a.style.left=l.x+"px",a.style.top=l.y+"px")}function xi(a){return a._leaflet_pos||new Oe(0,0)}var Xo,ht,Jo;if("onselectstart"in document)Xo=function(){ke(window,"selectstart",Zt)},ht=function(){wt(window,"selectstart",Zt)};else{var Xi=Ei(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Xo=function(){if(Xi){var a=document.documentElement.style;Jo=a[Xi],a[Xi]="none"}},ht=function(){Xi&&(document.documentElement.style[Xi]=Jo,Jo=void 0)}}function ao(){ke(window,"dragstart",Zt)}function ud(){wt(window,"dragstart",Zt)}var aa,dd;function hd(a){for(;a.tabIndex===-1;)a=a.parentNode;a.style&&(Vc(),aa=a,dd=a.style.outlineStyle,a.style.outlineStyle="none",ke(window,"keydown",Vc))}function Vc(){aa&&(aa.style.outlineStyle=dd,aa=void 0,dd=void 0,wt(window,"keydown",Vc))}function Jf(a){do a=a.parentNode;while((!a.offsetWidth||!a.offsetHeight)&&a!==document.body);return a}function co(a){var l=a.getBoundingClientRect();return{x:l.width/a.offsetWidth||1,y:l.height/a.offsetHeight||1,boundingClientRect:l}}var Dr={__proto__:null,TRANSFORM:ia,TRANSITION:Qi,TRANSITION_END:Cr,get:Fc,getStyle:ra,create:tt,remove:Rt,empty:oa,toFront:Er,toBack:xr,hasClass:Lc,addClass:Fe,removeClass:Wt,setClass:ld,getClass:sa,setOpacity:Un,testProp:Ei,setTransform:Tn,setPosition:Vt,getPosition:xi,get disableTextSelection(){return Xo},get enableTextSelection(){return ht},disableImageDrag:ao,enableImageDrag:ud,preventOutline:hd,restoreOutline:Vc,getSizedParentNode:Jf,getScale:co};function ke(a,l,h,m){if(l&&typeof l=="object")for(var v in l)pd(a,v,l[v],h);else{l=b(l);for(var w=0,D=l.length;w<D;w++)pd(a,l[w],h,m)}return this}var di="_leaflet_events";function wt(a,l,h,m){if(arguments.length===1)lo(a),delete a[di];else if(l&&typeof l=="object")for(var v in l)md(a,v,l[v],h);else if(l=b(l),arguments.length===2)lo(a,function(B){return X(l,B)!==-1});else for(var w=0,D=l.length;w<D;w++)md(a,l[w],h,m);return this}function lo(a,l){for(var h in a[di]){var m=h.split(/\d/)[0];(!l||l(m))&&md(a,m,null,null,h)}}var fd={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function pd(a,l,h,m){var v=l+s(h)+(m?"_"+s(m):"");if(a[di]&&a[di][v])return this;var w=function(B){return h.call(m||a,B||window.event)},D=w;!ge.touchNative&&ge.pointer&&l.indexOf("touch")===0?w=sd(a,l,w):ge.touch&&l==="dblclick"?w=Oc(a,w):"addEventListener"in a?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?a.addEventListener(fd[l]||l,w,ge.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(B){B=B||window.event,ua(a,B)&&D(B)},a.addEventListener(fd[l],w,!1)):a.addEventListener(l,D,!1):a.attachEvent("on"+l,w),a[di]=a[di]||{},a[di][v]=w}function md(a,l,h,m,v){v=v||l+s(h)+(m?"_"+s(m):"");var w=a[di]&&a[di][v];if(!w)return this;!ge.touchNative&&ge.pointer&&l.indexOf("touch")===0?Nc(a,l,w):ge.touch&&l==="dblclick"?Xf(a,w):"removeEventListener"in a?a.removeEventListener(fd[l]||l,w,!1):a.detachEvent("on"+l,w),a[di][v]=null}function Nn(a){return a.stopPropagation?a.stopPropagation():a.originalEvent?a.originalEvent._stopped=!0:a.cancelBubble=!0,this}function gd(a){return pd(a,"wheel",Nn),this}function ca(a){return ke(a,"mousedown touchstart dblclick contextmenu",Nn),a._leaflet_disable_click=!0,this}function Zt(a){return a.preventDefault?a.preventDefault():a.returnValue=!1,this}function Di(a){return Zt(a),Nn(a),this}function _d(a){if(a.composedPath)return a.composedPath();for(var l=[],h=a.target;h;)l.push(h),h=h.parentNode;return l}function es(a,l){if(!l)return new Oe(a.clientX,a.clientY);var h=co(l),m=h.boundingClientRect;return new Oe((a.clientX-m.left)/h.x-l.clientLeft,(a.clientY-m.top)/h.y-l.clientTop)}var la=ge.linux&&ge.chrome?window.devicePixelRatio:ge.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function vd(a){return ge.edge?a.wheelDeltaY/2:a.deltaY&&a.deltaMode===0?-a.deltaY/la:a.deltaY&&a.deltaMode===1?-a.deltaY*20:a.deltaY&&a.deltaMode===2?-a.deltaY*60:a.deltaX||a.deltaZ?0:a.wheelDelta?(a.wheelDeltaY||a.wheelDelta)/2:a.detail&&Math.abs(a.detail)<32765?-a.detail*20:a.detail?a.detail/-32765*60:0}function ua(a,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==a;)h=h.parentNode}catch{return!1}return h!==a}var zt={__proto__:null,on:ke,off:wt,stopPropagation:Nn,disableScrollPropagation:gd,disableClickPropagation:ca,preventDefault:Zt,stop:Di,getPropagationPath:_d,getMousePosition:es,getWheelDelta:vd,isExternalTarget:ua,addListener:ke,removeListener:wt},ep=Ki.extend({run:function(a,l,h,m){this.stop(),this._el=a,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=xi(a),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(a){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),a):(this._runFrame(1),this._complete())},_runFrame:function(a,l){var h=this._startPos.add(this._offset.multiplyBy(a));l&&h._round(),Vt(this._el,h),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(a){return 1-Math.pow(1-a,this._easeOutPower)}}),Je=Ki.extend({options:{crs:Go,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(a,l){l=I(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(a),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Xe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Qi&&ge.any3d&&!ge.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),ke(this._proxy,Cr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(a,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),a=this._limitCenter(Xe(a),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=n({animate:h.animate},h.zoom),h.pan=n({animate:h.animate,duration:h.duration},h.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(a,l,h.zoom):this._tryAnimatedPan(a,h.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(a,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(a,l){return this._loaded?this.setView(this.getCenter(),a,{zoom:l}):(this._zoom=a,this)},zoomIn:function(a,l){return a=a||(ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+a,l)},zoomOut:function(a,l){return a=a||(ge.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-a,l)},setZoomAround:function(a,l,h){var m=this.getZoomScale(l),v=this.getSize().divideBy(2),w=a instanceof Oe?a:this.latLngToContainerPoint(a),D=w.subtract(v).multiplyBy(1-1/m),B=this.containerPointToLatLng(v.add(D));return this.setView(B,l,{zoom:h})},_getBoundsCenterZoom:function(a,l){l=l||{},a=a.getBounds?a.getBounds():bt(a);var h=Ee(l.paddingTopLeft||l.padding||[0,0]),m=Ee(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(a,!1,h.add(m));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:a.getCenter(),zoom:v};var w=m.subtract(h).divideBy(2),D=this.project(a.getSouthWest(),v),B=this.project(a.getNorthEast(),v),z=this.unproject(D.add(B).divideBy(2).add(w),v);return{center:z,zoom:v}},fitBounds:function(a,l){if(a=bt(a),!a.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(a,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(a){return this.fitBounds([[-90,-180],[90,180]],a)},panTo:function(a,l){return this.setView(a,this._zoom,{pan:l})},panBy:function(a,l){if(a=Ee(a).round(),l=l||{},!a.x&&!a.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(a))return this._resetView(this.unproject(this.project(this.getCenter()).add(a)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new ep,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Fe(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(a).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(a),this.fire("move").fire("moveend");return this},flyTo:function(a,l,h){if(h=h||{},h.animate===!1||!ge.any3d)return this.setView(a,l,h);this._stop();var m=this.project(this.getCenter()),v=this.project(a),w=this.getSize(),D=this._zoom;a=Xe(a),l=l===void 0?D:l;var B=Math.max(w.x,w.y),z=B*this.getZoomScale(D,l),Y=v.distanceTo(m)||1,le=1.42,xe=le*le;function We(sn){var vp=sn?-1:1,jF=sn?z:B,UF=z*z-B*B+vp*xe*xe*Y*Y,zF=2*jF*xe*Y,zv=UF/zF,RD=Math.sqrt(zv*zv+1)-zv,$F=RD<1e-9?-18:Math.log(RD);return $F}function $n(sn){return(Math.exp(sn)-Math.exp(-sn))/2}function wn(sn){return(Math.exp(sn)+Math.exp(-sn))/2}function Ti(sn){return $n(sn)/wn(sn)}var ei=We(0);function Yc(sn){return B*(wn(ei)/wn(ei+le*sn))}function FF(sn){return B*(wn(ei)*Ti(ei+le*sn)-$n(ei))/xe}function LF(sn){return 1-Math.pow(1-sn,1.5)}var VF=Date.now(),MD=(We(1)-ei)/le,BF=h.duration?1e3*h.duration:1e3*MD*.8;function PD(){var sn=(Date.now()-VF)/BF,vp=LF(sn)*MD;sn<=1?(this._flyToFrame=x(PD,this),this._move(this.unproject(m.add(v.subtract(m).multiplyBy(FF(vp)/Y)),D),this.getScaleZoom(B/Yc(vp),D),{flyTo:!0})):this._move(a,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),PD.call(this),this},flyToBounds:function(a,l){var h=this._getBoundsCenterZoom(a,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(a){return a=bt(a),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),a.isValid()?(this.options.maxBounds=a,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(a){var l=this.options.minZoom;return this.options.minZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(a):this},setMaxZoom:function(a){var l=this.options.maxZoom;return this.options.maxZoom=a,this._loaded&&l!==a&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(a):this},panInsideBounds:function(a,l){this._enforcingBounds=!0;var h=this.getCenter(),m=this._limitCenter(h,this._zoom,bt(a));return h.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(a,l){l=l||{};var h=Ee(l.paddingTopLeft||l.padding||[0,0]),m=Ee(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),w=this.project(a),D=this.getPixelBounds(),B=xn([D.min.add(h),D.max.subtract(m)]),z=B.getSize();if(!B.contains(w)){this._enforcingBounds=!0;var Y=w.subtract(B.getCenter()),le=B.extend(w).getSize().subtract(z);v.x+=Y.x<0?-le.x:le.x,v.y+=Y.y<0?-le.y:le.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(a){if(!this._loaded)return this;a=n({animate:!1,pan:!0},a===!0?{animate:!0}:a);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),m=l.divideBy(2).round(),v=h.divideBy(2).round(),w=m.subtract(v);return!w.x&&!w.y?this:(a.animate&&a.pan?this.panBy(w):(a.pan&&this._rawPanBy(w),this.fire("move"),a.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(a){if(a=this._locateOptions=n({timeout:1e4,watch:!1},a),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return a.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,a):navigator.geolocation.getCurrentPosition(l,h,a),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(a){if(this._container._leaflet_id){var l=a.code,h=a.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(a){if(this._container._leaflet_id){var l=a.coords.latitude,h=a.coords.longitude,m=new Re(l,h),v=m.toBounds(a.coords.accuracy*2),w=this._locateOptions;if(w.setView){var D=this.getBoundsZoom(v);this.setView(m,w.maxZoom?Math.min(D,w.maxZoom):D)}var B={latlng:m,bounds:v,timestamp:a.timestamp};for(var z in a.coords)typeof a.coords[z]=="number"&&(B[z]=a.coords[z]);this.fire("locationfound",B)}},addHandler:function(a,l){if(!l)return this;var h=this[a]=new l(this);return this._handlers.push(h),this.options[a]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Rt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var a;for(a in this._layers)this._layers[a].remove();for(a in this._panes)Rt(this._panes[a]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(a,l){var h="leaflet-pane"+(a?" leaflet-"+a.replace("Pane","")+"-pane":""),m=tt("div",h,l||this._mapPane);return a&&(this._panes[a]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var a=this.getPixelBounds(),l=this.unproject(a.getBottomLeft()),h=this.unproject(a.getTopRight());return new kn(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(a,l,h){a=bt(a),h=Ee(h||[0,0]);var m=this.getZoom()||0,v=this.getMinZoom(),w=this.getMaxZoom(),D=a.getNorthWest(),B=a.getSouthEast(),z=this.getSize().subtract(h),Y=xn(this.project(B,m),this.project(D,m)).getSize(),le=ge.any3d?this.options.zoomSnap:1,xe=z.x/Y.x,We=z.y/Y.y,$n=l?Math.max(xe,We):Math.min(xe,We);return m=this.getScaleZoom($n,m),le&&(m=Math.round(m/(le/100))*(le/100),m=l?Math.ceil(m/le)*le:Math.floor(m/le)*le),Math.max(v,Math.min(w,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Oe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(a,l){var h=this._getTopLeftPoint(a,l);return new Dt(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(a){return this.options.crs.getProjectedBounds(a===void 0?this.getZoom():a)},getPane:function(a){return typeof a=="string"?this._panes[a]:a},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(a,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(a)/h.scale(l)},getScaleZoom:function(a,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var m=h.zoom(a*h.scale(l));return isNaN(m)?1/0:m},project:function(a,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Xe(a),l)},unproject:function(a,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Ee(a),l)},layerPointToLatLng:function(a){var l=Ee(a).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(a){var l=this.project(Xe(a))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(a){return this.options.crs.wrapLatLng(Xe(a))},wrapLatLngBounds:function(a){return this.options.crs.wrapLatLngBounds(bt(a))},distance:function(a,l){return this.options.crs.distance(Xe(a),Xe(l))},containerPointToLayerPoint:function(a){return Ee(a).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(a){return Ee(a).add(this._getMapPanePos())},containerPointToLatLng:function(a){var l=this.containerPointToLayerPoint(Ee(a));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(a){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Xe(a)))},mouseEventToContainerPoint:function(a){return es(a,this._container)},mouseEventToLayerPoint:function(a){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(a))},mouseEventToLatLng:function(a){return this.layerPointToLatLng(this.mouseEventToLayerPoint(a))},_initContainer:function(a){var l=this._container=Fc(a);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");ke(l,"scroll",this._onScroll,this),this._containerId=s(l)},_initLayout:function(){var a=this._container;this._fadeAnimated=this.options.fadeAnimation&&ge.any3d,Fe(a,"leaflet-container"+(ge.touch?" leaflet-touch":"")+(ge.retina?" leaflet-retina":"")+(ge.ielt9?" leaflet-oldie":"")+(ge.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=ra(a,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(a.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var a=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Vt(this._mapPane,new Oe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fe(a.markerPane,"leaflet-zoom-hide"),Fe(a.shadowPane,"leaflet-zoom-hide"))},_resetView:function(a,l,h){Vt(this._mapPane,new Oe(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,h)._move(a,l)._moveEnd(v),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(a,l){return a&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(a,l,h,m){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=a,this._pixelOrigin=this._getNewPixelOrigin(a),m?h&&h.pinch&&this.fire("zoom",h):((v||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(a){return a&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(a){Vt(this._mapPane,this._getMapPanePos().subtract(a))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(a){this._targets={},this._targets[s(this._container)]=this;var l=a?wt:ke;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ge.any3d&&this.options.transform3DLimit&&(a?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var a=this._getMapPanePos();Math.max(Math.abs(a.x),Math.abs(a.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(a,l){for(var h=[],m,v=l==="mouseout"||l==="mouseover",w=a.target||a.srcElement,D=!1;w;){if(m=this._targets[s(w)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){D=!0;break}if(m&&m.listens(l,!0)&&(v&&!ua(w,a)||(h.push(m),v))||w===this._container)break;w=w.parentNode}return!h.length&&!D&&!v&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(a){for(;a&&a!==this._container;){if(a._leaflet_disable_click)return!0;a=a.parentNode}},_handleDOMEvent:function(a){var l=a.target||a.srcElement;if(!(!this._loaded||l._leaflet_disable_events||a.type==="click"&&this._isClickDisabled(l))){var h=a.type;h==="mousedown"&&hd(l),this._fireDOMEvent(a,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(a,l,h){if(a.type==="click"){var m=n({},a);m.type="preclick",this._fireDOMEvent(m,m.type,h)}var v=this._findEventTargets(a,l);if(h){for(var w=[],D=0;D<h.length;D++)h[D].listens(l,!0)&&w.push(h[D]);v=w.concat(v)}if(v.length){l==="contextmenu"&&Zt(a);var B=v[0],z={originalEvent:a};if(a.type!=="keypress"&&a.type!=="keydown"&&a.type!=="keyup"){var Y=B.getLatLng&&(!B._radius||B._radius<=10);z.containerPoint=Y?this.latLngToContainerPoint(B.getLatLng()):this.mouseEventToContainerPoint(a),z.layerPoint=this.containerPointToLayerPoint(z.containerPoint),z.latlng=Y?B.getLatLng():this.layerPointToLatLng(z.layerPoint)}for(D=0;D<v.length;D++)if(v[D].fire(l,z,!0),z.originalEvent._stopped||v[D].options.bubblingMouseEvents===!1&&X(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(a){return a=a.dragging&&a.dragging.enabled()?a:this,a.dragging&&a.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var a=0,l=this._handlers.length;a<l;a++)this._handlers[a].disable()},whenReady:function(a,l){return this._loaded?a.call(l||this,{target:this}):this.on("load",a,l),this},_getMapPanePos:function(){return xi(this._mapPane)||new Oe(0,0)},_moved:function(){var a=this._getMapPanePos();return a&&!a.equals([0,0])},_getTopLeftPoint:function(a,l){var h=a&&l!==void 0?this._getNewPixelOrigin(a,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(a,l){var h=this.getSize()._divideBy(2);return this.project(a,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(a,l,h){var m=this._getNewPixelOrigin(h,l);return this.project(a,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(a,l,h){var m=this._getNewPixelOrigin(h,l);return xn([this.project(a.getSouthWest(),l)._subtract(m),this.project(a.getNorthWest(),l)._subtract(m),this.project(a.getSouthEast(),l)._subtract(m),this.project(a.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(a){return this.latLngToLayerPoint(a).subtract(this._getCenterLayerPoint())},_limitCenter:function(a,l,h){if(!h)return a;var m=this.project(a,l),v=this.getSize().divideBy(2),w=new Dt(m.subtract(v),m.add(v)),D=this._getBoundsOffset(w,h,l);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?a:this.unproject(m.add(D),l)},_limitOffset:function(a,l){if(!l)return a;var h=this.getPixelBounds(),m=new Dt(h.min.add(a),h.max.add(a));return a.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(a,l,h){var m=xn(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),v=m.min.subtract(a.min),w=m.max.subtract(a.max),D=this._rebound(v.x,-w.x),B=this._rebound(v.y,-w.y);return new Oe(D,B)},_rebound:function(a,l){return a+l>0?Math.round(a-l)/2:Math.max(0,Math.ceil(a))-Math.max(0,Math.floor(l))},_limitZoom:function(a){var l=this.getMinZoom(),h=this.getMaxZoom(),m=ge.any3d?this.options.zoomSnap:1;return m&&(a=Math.round(a/m)*m),Math.max(l,Math.min(h,a))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Wt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(a,l){var h=this._getCenterOffset(a)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var a=this._proxy=tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(a),this.on("zoomanim",function(l){var h=ia,m=this._proxy.style[h];Tn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Rt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var a=this.getCenter(),l=this.getZoom();Tn(this._proxy,this.project(a,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(a){this._animatingZoom&&a.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(a,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),v=this._getCenterOffset(a)._divideBy(1-1/m);return h.animate!==!0&&!this.getSize().contains(v)?!1:(x(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(a,l,!0)},this),!0)},_animateZoom:function(a,l,h,m){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=a,this._animateToZoom=l,Fe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:a,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Wt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function tp(a,l){return new Je(a,l)}var Jn=F.extend({options:{position:"topright"},initialize:function(a){I(this,a)},getPosition:function(){return this.options.position},setPosition:function(a){var l=this._map;return l&&l.removeControl(this),this.options.position=a,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(a){this.remove(),this._map=a;var l=this._container=this.onAdd(a),h=this.getPosition(),m=a._controlCorners[h];return Fe(l,"leaflet-control"),h.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Rt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(a){this._map&&a&&a.screenX>0&&a.screenY>0&&this._map.getContainer().focus()}}),ts=function(a){return new Jn(a)};Je.include({addControl:function(a){return a.addTo(this),this},removeControl:function(a){return a.remove(),this},_initControlPos:function(){var a=this._controlCorners={},l="leaflet-",h=this._controlContainer=tt("div",l+"control-container",this._container);function m(v,w){var D=l+v+" "+l+w;a[v+w]=tt("div",D,h)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var a in this._controlCorners)Rt(this._controlCorners[a]);Rt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var da=Jn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(a,l,h,m){return h<m?-1:m<h?1:0}},initialize:function(a,l,h){I(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in a)this._addLayer(a[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(a){this._initLayout(),this._update(),this._map=a,a.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(a){return Jn.prototype.addTo.call(this,a),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(a,l){return this._addLayer(a,l),this._map?this._update():this},addOverlay:function(a,l){return this._addLayer(a,l,!0),this._map?this._update():this},removeLayer:function(a){a.off("add remove",this._onLayerChange,this);var l=this._getLayer(s(a));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Fe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var a=this._map.getSize().y-(this._container.offsetTop+50);return a<this._section.clientHeight?(Fe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=a+"px"):Wt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Wt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var a="leaflet-control-layers",l=this._container=tt("div",a),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),ca(l),gd(l);var m=this._section=tt("section",a+"-list");h&&(this._map.on("click",this.collapse,this),ke(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=tt("a",a+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),ke(v,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Zt(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=tt("div",a+"-base",m),this._separator=tt("div",a+"-separator",m),this._overlaysList=tt("div",a+"-overlays",m),l.appendChild(m)},_getLayer:function(a){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&s(this._layers[l].layer)===a)return this._layers[l]},_addLayer:function(a,l,h){this._map&&a.on("add remove",this._onLayerChange,this),this._layers.push({layer:a,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(m,v){return this.options.sortFunction(m.layer,v.layer,m.name,v.name)},this)),this.options.autoZIndex&&a.setZIndex&&(this._lastZIndex++,a.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;oa(this._baseLayersList),oa(this._overlaysList),this._layerControlInputs=[];var a,l,h,m,v=0;for(h=0;h<this._layers.length;h++)m=this._layers[h],this._addItem(m),l=l||m.overlay,a=a||!m.overlay,v+=m.overlay?0:1;return this.options.hideSingleBase&&(a=a&&v>1,this._baseLayersList.style.display=a?"":"none"),this._separator.style.display=l&&a?"":"none",this},_onLayerChange:function(a){this._handlingClick||this._update();var l=this._getLayer(s(a.target)),h=l.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(a,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+a+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=h,m.firstChild},_addItem:function(a){var l=document.createElement("label"),h=this._map.hasLayer(a.layer),m;a.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=h):m=this._createRadioElement("leaflet-base-layers_"+s(this),h),this._layerControlInputs.push(m),m.layerId=s(a.layer),ke(m,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+a.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(m),w.appendChild(v);var D=a.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var a=this._layerControlInputs,l,h,m=[],v=[];this._handlingClick=!0;for(var w=a.length-1;w>=0;w--)l=a[w],h=this._getLayer(l.layerId).layer,l.checked?m.push(h):l.checked||v.push(h);for(w=0;w<v.length;w++)this._map.hasLayer(v[w])&&this._map.removeLayer(v[w]);for(w=0;w<m.length;w++)this._map.hasLayer(m[w])||this._map.addLayer(m[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var a=this._layerControlInputs,l,h,m=this._map.getZoom(),v=a.length-1;v>=0;v--)l=a[v],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&m<h.options.minZoom||h.options.maxZoom!==void 0&&m>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var a=this._section;this._preventClick=!0,ke(a,"click",Zt),this.expand();var l=this;setTimeout(function(){wt(a,"click",Zt),l._preventClick=!1})}}),np=function(a,l,h){return new da(a,l,h)},hi=Jn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(a){var l="leaflet-control-zoom",h=tt("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),a.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(a){a.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(a){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(a.shiftKey?3:1))},_zoomOut:function(a){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(a.shiftKey?3:1))},_createButton:function(a,l,h,m,v){var w=tt("a",h,m);return w.innerHTML=a,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),ca(w),ke(w,"click",Di),ke(w,"click",v,this),ke(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var a=this._map,l="leaflet-disabled";Wt(this._zoomInButton,l),Wt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||a._zoom===a.getMinZoom())&&(Fe(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||a._zoom===a.getMaxZoom())&&(Fe(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Je.mergeOptions({zoomControl:!0}),Je.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hi,this.addControl(this.zoomControl))});var ip=function(a){return new hi(a)},rp=Jn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(a){var l="leaflet-control-scale",h=tt("div",l),m=this.options;return this._addScales(m,l+"-line",h),a.on(m.updateWhenIdle?"moveend":"move",this._update,this),a.whenReady(this._update,this),h},onRemove:function(a){a.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(a,l,h){a.metric&&(this._mScale=tt("div",l,h)),a.imperial&&(this._iScale=tt("div",l,h))},_update:function(){var a=this._map,l=a.getSize().y/2,h=a.distance(a.containerPointToLatLng([0,l]),a.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(a){this.options.metric&&a&&this._updateMetric(a),this.options.imperial&&a&&this._updateImperial(a)},_updateMetric:function(a){var l=this._getRoundNum(a),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/a)},_updateImperial:function(a){var l=a*3.2808399,h,m,v;l>5280?(h=l/5280,m=this._getRoundNum(h),this._updateScale(this._iScale,m+" mi",m/h)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(a,l,h){a.style.width=Math.round(this.options.maxWidth*h)+"px",a.innerHTML=l},_getRoundNum:function(a){var l=Math.pow(10,(Math.floor(a)+"").length-1),h=a/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),ha=function(a){return new rp(a)},op='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',fa=Jn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ge.inlineSvg?op+" ":"")+"Leaflet</a>"},initialize:function(a){I(this,a),this._attributions={}},onAdd:function(a){a.attributionControl=this,this._container=tt("div","leaflet-control-attribution"),ca(this._container);for(var l in a._layers)a._layers[l].getAttribution&&this.addAttribution(a._layers[l].getAttribution());return this._update(),a.on("layeradd",this._addAttribution,this),this._container},onRemove:function(a){a.off("layeradd",this._addAttribution,this)},_addAttribution:function(a){a.layer.getAttribution&&(this.addAttribution(a.layer.getAttribution()),a.layer.once("remove",function(){this.removeAttribution(a.layer.getAttribution())},this))},setPrefix:function(a){return this.options.prefix=a,this._update(),this},addAttribution:function(a){return a?(this._attributions[a]||(this._attributions[a]=0),this._attributions[a]++,this._update(),this):this},removeAttribution:function(a){return a?(this._attributions[a]&&(this._attributions[a]--,this._update()),this):this},_update:function(){if(this._map){var a=[];for(var l in this._attributions)this._attributions[l]&&a.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),a.length&&h.push(a.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Je.mergeOptions({attributionControl:!0}),Je.addInitHook(function(){this.options.attributionControl&&new fa().addTo(this)});var Bc=function(a){return new fa(a)};Jn.Layers=da,Jn.Zoom=hi,Jn.Scale=rp,Jn.Attribution=fa,ts.layers=np,ts.zoom=ip,ts.scale=ha,ts.attribution=Bc;var fi=F.extend({initialize:function(a){this._map=a},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fi.addTo=function(a,l){return a.addHandler(l,this),this};var jc={Events:Gt},sp=ge.touch?"touchstart mousedown":"mousedown",Ji=Ki.extend({options:{clickTolerance:3},initialize:function(a,l,h,m){I(this,m),this._element=a,this._dragStartTarget=l||a,this._preventOutline=h},enable:function(){this._enabled||(ke(this._dragStartTarget,sp,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ji._dragging===this&&this.finishDrag(!0),wt(this._dragStartTarget,sp,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(a){if(this._enabled&&(this._moved=!1,!Lc(this._element,"leaflet-zoom-anim"))){if(a.touches&&a.touches.length!==1){Ji._dragging===this&&this.finishDrag();return}if(!(Ji._dragging||a.shiftKey||a.which!==1&&a.button!==1&&!a.touches)&&(Ji._dragging=this,this._preventOutline&&hd(this._element),ao(),Xo(),!this._moving)){this.fire("down");var l=a.touches?a.touches[0]:a,h=Jf(this._element);this._startPoint=new Oe(l.clientX,l.clientY),this._startPos=xi(this._element),this._parentScale=co(h);var m=a.type==="mousedown";ke(document,m?"mousemove":"touchmove",this._onMove,this),ke(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(a){if(this._enabled){if(a.touches&&a.touches.length>1){this._moved=!0;return}var l=a.touches&&a.touches.length===1?a.touches[0]:a,h=new Oe(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Zt(a),this._moved||(this.fire("dragstart"),this._moved=!0,Fe(document.body,"leaflet-dragging"),this._lastTarget=a.target||a.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=a,this._updatePosition())}},_updatePosition:function(){var a={originalEvent:this._lastEvent};this.fire("predrag",a),Vt(this._element,this._newPos),this.fire("drag",a)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(a){Wt(document.body,"leaflet-dragging"),this._lastTarget&&(Wt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),wt(document,"mousemove touchmove",this._onMove,this),wt(document,"mouseup touchend touchcancel",this._onUp,this),ud(),ht();var l=this._moved&&this._moving;this._moving=!1,Ji._dragging=!1,l&&this.fire("dragend",{noInertia:a,distance:this._newPos.distanceTo(this._startPos)})}});function ns(a,l,h){var m,v=[1,4,2,8],w,D,B,z,Y,le,xe,We;for(w=0,le=a.length;w<le;w++)a[w]._code=Tr(a[w],l);for(B=0;B<4;B++){for(xe=v[B],m=[],w=0,le=a.length,D=le-1;w<le;D=w++)z=a[w],Y=a[D],z._code&xe?Y._code&xe||(We=pa(Y,z,xe,l,h),We._code=Tr(We,l),m.push(We)):(Y._code&xe&&(We=pa(Y,z,xe,l,h),We._code=Tr(We,l),m.push(We)),m.push(z));a=m}return a}function yd(a,l){var h,m,v,w,D,B,z,Y,le;if(!a||a.length===0)throw new Error("latlngs not passed");zn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var xe=Xe([0,0]),We=bt(a),$n=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());$n<1700&&(xe=Uc(a));var wn=a.length,Ti=[];for(h=0;h<wn;h++){var ei=Xe(a[h]);Ti.push(l.project(Xe([ei.lat-xe.lat,ei.lng-xe.lng])))}for(B=z=Y=0,h=0,m=wn-1;h<wn;m=h++)v=Ti[h],w=Ti[m],D=v.y*w.x-w.y*v.x,z+=(v.x+w.x)*D,Y+=(v.y+w.y)*D,B+=D*3;B===0?le=Ti[0]:le=[z/B,Y/B];var Yc=l.unproject(Ee(le));return Xe([Yc.lat+xe.lat,Yc.lng+xe.lng])}function Uc(a){for(var l=0,h=0,m=0,v=0;v<a.length;v++){var w=Xe(a[v]);l+=w.lat,h+=w.lng,m++}return Xe([l/m,h/m])}var bd={__proto__:null,clipPolygon:ns,polygonCenter:yd,centroid:Uc};function zc(a,l){if(!l||!a.length)return a.slice();var h=l*l;return a=uo(a,h),a=ap(a,h),a}function wd(a,l,h){return Math.sqrt(fn(a,l,h,!0))}function $c(a,l,h){return fn(a,l,h)}function ap(a,l){var h=a.length,m=typeof Uint8Array<"u"?Uint8Array:Array,v=new m(h);v[0]=v[h-1]=1,Hc(a,v,l,0,h-1);var w,D=[];for(w=0;w<h;w++)v[w]&&D.push(a[w]);return D}function Hc(a,l,h,m,v){var w=0,D,B,z;for(B=m+1;B<=v-1;B++)z=fn(a[B],a[m],a[v],!0),z>w&&(D=B,w=z);w>h&&(l[D]=1,Hc(a,l,h,m,D),Hc(a,l,h,D,v))}function uo(a,l){for(var h=[a[0]],m=1,v=0,w=a.length;m<w;m++)qc(a[m],a[v])>l&&(h.push(a[m]),v=m);return v<w-1&&h.push(a[w-1]),h}var Id;function Cd(a,l,h,m,v){var w=m?Id:Tr(a,h),D=Tr(l,h),B,z,Y;for(Id=D;;){if(!(w|D))return[a,l];if(w&D)return!1;B=w||D,z=pa(a,l,B,h,v),Y=Tr(z,h),B===w?(a=z,w=Y):(l=z,D=Y)}}function pa(a,l,h,m,v){var w=l.x-a.x,D=l.y-a.y,B=m.min,z=m.max,Y,le;return h&8?(Y=a.x+w*(z.y-a.y)/D,le=z.y):h&4?(Y=a.x+w*(B.y-a.y)/D,le=B.y):h&2?(Y=z.x,le=a.y+D*(z.x-a.x)/w):h&1&&(Y=B.x,le=a.y+D*(B.x-a.x)/w),new Oe(Y,le,v)}function Tr(a,l){var h=0;return a.x<l.min.x?h|=1:a.x>l.max.x&&(h|=2),a.y<l.min.y?h|=4:a.y>l.max.y&&(h|=8),h}function qc(a,l){var h=l.x-a.x,m=l.y-a.y;return h*h+m*m}function fn(a,l,h,m){var v=l.x,w=l.y,D=h.x-v,B=h.y-w,z=D*D+B*B,Y;return z>0&&(Y=((a.x-v)*D+(a.y-w)*B)/z,Y>1?(v=h.x,w=h.y):Y>0&&(v+=D*Y,w+=B*Y)),D=a.x-v,B=a.y-w,m?D*D+B*B:new Oe(v,w)}function zn(a){return!W(a[0])||typeof a[0][0]!="object"&&typeof a[0][0]<"u"}function Ed(a){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),zn(a)}function ho(a,l){var h,m,v,w,D,B,z,Y;if(!a||a.length===0)throw new Error("latlngs not passed");zn(a)||(console.warn("latlngs are not flat! Only the first ring will be used"),a=a[0]);var le=Xe([0,0]),xe=bt(a),We=xe.getNorthWest().distanceTo(xe.getSouthWest())*xe.getNorthEast().distanceTo(xe.getNorthWest());We<1700&&(le=Uc(a));var $n=a.length,wn=[];for(h=0;h<$n;h++){var Ti=Xe(a[h]);wn.push(l.project(Xe([Ti.lat-le.lat,Ti.lng-le.lng])))}for(h=0,m=0;h<$n-1;h++)m+=wn[h].distanceTo(wn[h+1])/2;if(m===0)Y=wn[0];else for(h=0,w=0;h<$n-1;h++)if(D=wn[h],B=wn[h+1],v=D.distanceTo(B),w+=v,w>m){z=(w-m)/v,Y=[B.x-z*(B.x-D.x),B.y-z*(B.y-D.y)];break}var ei=l.unproject(Ee(Y));return Xe([ei.lat+le.lat,ei.lng+le.lng])}var d={__proto__:null,simplify:zc,pointToSegmentDistance:wd,closestPointOnSegment:$c,clipSegment:Cd,_getEdgeIntersection:pa,_getBitCode:Tr,_sqClosestPointOnSegment:fn,isFlat:zn,_flat:Ed,polylineCenter:ho},g={project:function(a){return new Oe(a.lng,a.lat)},unproject:function(a){return new Re(a.y,a.x)},bounds:new Dt([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Dt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(a){var l=Math.PI/180,h=this.R,m=a.lat*l,v=this.R_MINOR/h,w=Math.sqrt(1-v*v),D=w*Math.sin(m),B=Math.tan(Math.PI/4-m/2)/Math.pow((1-D)/(1+D),w/2);return m=-h*Math.log(Math.max(B,1e-10)),new Oe(a.lng*l*h,m)},unproject:function(a){for(var l=180/Math.PI,h=this.R,m=this.R_MINOR/h,v=Math.sqrt(1-m*m),w=Math.exp(-a.y/h),D=Math.PI/2-2*Math.atan(w),B=0,z=.1,Y;B<15&&Math.abs(z)>1e-7;B++)Y=v*Math.sin(D),Y=Math.pow((1-Y)/(1+Y),v/2),z=Math.PI/2-2*Math.atan(w*Y)-D,D+=z;return new Re(D*l,a.x*l/h)}},C={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:Zu},N=n({},br,{code:"EPSG:3395",projection:y,transformation:function(){var a=.5/(Math.PI*y.R);return wr(a,.5,-a,.5)}()}),$=n({},br,{code:"EPSG:4326",projection:g,transformation:wr(1/180,1,-1/180,.5)}),ie=n({},jn,{projection:g,transformation:wr(1,0,-1,0),scale:function(a){return Math.pow(2,a)},zoom:function(a){return Math.log(a)/Math.LN2},distance:function(a,l){var h=l.lng-a.lng,m=l.lat-a.lat;return Math.sqrt(h*h+m*m)},infinite:!0});jn.Earth=br,jn.EPSG3395=N,jn.EPSG3857=Go,jn.EPSG900913=Yu,jn.EPSG4326=$,jn.Simple=ie;var He=Ki.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(a){return a.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(a){return a&&a.removeLayer(this),this},getPane:function(a){return this._map.getPane(a?this.options[a]||a:this.options.pane)},addInteractiveTarget:function(a){return this._map._targets[s(a)]=this,this},removeInteractiveTarget:function(a){return delete this._map._targets[s(a)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(a){var l=a.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Je.include({addLayer:function(a){if(!a._layerAdd)throw new Error("The provided object is not a Layer.");var l=s(a);return this._layers[l]?this:(this._layers[l]=a,a._mapToAdd=this,a.beforeAdd&&a.beforeAdd(this),this.whenReady(a._layerAdd,a),this)},removeLayer:function(a){var l=s(a);return this._layers[l]?(this._loaded&&a.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:a}),a.fire("remove")),a._map=a._mapToAdd=null,this):this},hasLayer:function(a){return s(a)in this._layers},eachLayer:function(a,l){for(var h in this._layers)a.call(l,this._layers[h]);return this},_addLayers:function(a){a=a?W(a)?a:[a]:[];for(var l=0,h=a.length;l<h;l++)this.addLayer(a[l])},_addZoomLimit:function(a){(!isNaN(a.options.maxZoom)||!isNaN(a.options.minZoom))&&(this._zoomBoundLayers[s(a)]=a,this._updateZoomLevels())},_removeZoomLimit:function(a){var l=s(a);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var a=1/0,l=-1/0,h=this._getZoomSpan();for(var m in this._zoomBoundLayers){var v=this._zoomBoundLayers[m].options;a=v.minZoom===void 0?a:Math.min(a,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=a===1/0?void 0:a,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $t=He.extend({initialize:function(a,l){I(this,l),this._layers={};var h,m;if(a)for(h=0,m=a.length;h<m;h++)this.addLayer(a[h])},addLayer:function(a){var l=this.getLayerId(a);return this._layers[l]=a,this._map&&this._map.addLayer(a),this},removeLayer:function(a){var l=a in this._layers?a:this.getLayerId(a);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(a){var l=typeof a=="number"?a:this.getLayerId(a);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(a){var l=Array.prototype.slice.call(arguments,1),h,m;for(h in this._layers)m=this._layers[h],m[a]&&m[a].apply(m,l);return this},onAdd:function(a){this.eachLayer(a.addLayer,a)},onRemove:function(a){this.eachLayer(a.removeLayer,a)},eachLayer:function(a,l){for(var h in this._layers)a.call(l,this._layers[h]);return this},getLayer:function(a){return this._layers[a]},getLayers:function(){var a=[];return this.eachLayer(a.push,a),a},setZIndex:function(a){return this.invoke("setZIndex",a)},getLayerId:function(a){return s(a)}}),nt=function(a,l){return new $t(a,l)},kt=$t.extend({addLayer:function(a){return this.hasLayer(a)?this:(a.addEventParent(this),$t.prototype.addLayer.call(this,a),this.fire("layeradd",{layer:a}))},removeLayer:function(a){return this.hasLayer(a)?(a in this._layers&&(a=this._layers[a]),a.removeEventParent(this),$t.prototype.removeLayer.call(this,a),this.fire("layerremove",{layer:a})):this},setStyle:function(a){return this.invoke("setStyle",a)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var a=new kn;for(var l in this._layers){var h=this._layers[l];a.extend(h.getBounds?h.getBounds():h.getLatLng())}return a}}),bn=function(a,l){return new kt(a,l)},pi=F.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(a){I(this,a)},createIcon:function(a){return this._createIcon("icon",a)},createShadow:function(a){return this._createIcon("shadow",a)},_createIcon:function(a,l){var h=this._getIconUrl(a);if(!h){if(a==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,a),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(a,l){var h=this.options,m=h[l+"Size"];typeof m=="number"&&(m=[m,m]);var v=Ee(m),w=Ee(l==="shadow"&&h.shadowAnchor||h.iconAnchor||v&&v.divideBy(2,!0));a.className="leaflet-marker-"+l+" "+(h.className||""),w&&(a.style.marginLeft=-w.x+"px",a.style.marginTop=-w.y+"px"),v&&(a.style.width=v.x+"px",a.style.height=v.y+"px")},_createImg:function(a,l){return l=l||document.createElement("img"),l.src=a,l},_getIconUrl:function(a){return ge.retina&&this.options[a+"RetinaUrl"]||this.options[a+"Url"]}});function mi(a){return new pi(a)}var Sr=pi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(a){return typeof Sr.imagePath!="string"&&(Sr.imagePath=this._detectIconPath()),(this.options.imagePath||Sr.imagePath)+pi.prototype._getIconUrl.call(this,a)},_stripUrl:function(a){var l=function(h,m,v){var w=m.exec(h);return w&&w[v]};return a=l(a,/^url\((['"])?(.+)\1\)$/,2),a&&l(a,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var a=tt("div","leaflet-default-icon-path",document.body),l=ra(a,"background-image")||ra(a,"backgroundImage");if(document.body.removeChild(a),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),Gc=fi.extend({initialize:function(a){this._marker=a},addHooks:function(){var a=this._marker._icon;this._draggable||(this._draggable=new Ji(a,a,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fe(a,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Wt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(a){var l=this._marker,h=l._map,m=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,w=xi(l._icon),D=h.getPixelBounds(),B=h.getPixelOrigin(),z=xn(D.min._subtract(B).add(v),D.max._subtract(B).subtract(v));if(!z.contains(w)){var Y=Ee((Math.max(z.max.x,w.x)-z.max.x)/(D.max.x-z.max.x)-(Math.min(z.min.x,w.x)-z.min.x)/(D.min.x-z.min.x),(Math.max(z.max.y,w.y)-z.max.y)/(D.max.y-z.max.y)-(Math.min(z.min.y,w.y)-z.min.y)/(D.min.y-z.min.y)).multiplyBy(m);h.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),Vt(l._icon,this._draggable._newPos),this._onDrag(a),this._panRequest=x(this._adjustPan.bind(this,a))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(a){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,a)))},_onDrag:function(a){var l=this._marker,h=l._shadow,m=xi(l._icon),v=l._map.layerPointToLatLng(m);h&&Vt(h,m),l._latlng=v,a.latlng=v,a.oldLatLng=this._oldLatLng,l.fire("move",a).fire("drag",a)},_onDragEnd:function(a){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",a)}}),cp=He.extend({options:{icon:new Sr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(a,l){I(this,l),this._latlng=Xe(a)},onAdd:function(a){this._zoomAnimated=this._zoomAnimated&&a.options.markerZoomAnimation,this._zoomAnimated&&a.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(a){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&a.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(a){var l=this._latlng;return this._latlng=Xe(a),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(a){return this.options.zIndexOffset=a,this.update()},getIcon:function(){return this.options.icon},setIcon:function(a){return this.options.icon=a,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var a=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(a)}return this},_initIcon:function(){var a=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=a.icon.createIcon(this._icon),m=!1;h!==this._icon&&(this._icon&&this._removeIcon(),m=!0,a.title&&(h.title=a.title),h.tagName==="IMG"&&(h.alt=a.alt||"")),Fe(h,l),a.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,a.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ke(h,"focus",this._panOnFocus,this);var v=a.icon.createShadow(this._shadow),w=!1;v!==this._shadow&&(this._removeShadow(),w=!0),v&&(Fe(v,l),v.alt=""),this._shadow=v,a.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&w&&this.getPane(a.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wt(this._icon,"focus",this._panOnFocus,this),Rt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Rt(this._shadow),this._shadow=null},_setPos:function(a){this._icon&&Vt(this._icon,a),this._shadow&&Vt(this._shadow,a),this._zIndex=a.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(a){this._icon&&(this._icon.style.zIndex=this._zIndex+a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Fe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Gc)){var a=this.options.draggable;this.dragging&&(a=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Gc(this),a&&this.dragging.enable()}},setOpacity:function(a){return this.options.opacity=a,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var a=this.options.opacity;this._icon&&Un(this._icon,a),this._shadow&&Un(this._shadow,a)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var a=this._map;if(a){var l=this.options.icon.options,h=l.iconSize?Ee(l.iconSize):Ee(0,0),m=l.iconAnchor?Ee(l.iconAnchor):Ee(0,0);a.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:h.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vF(a,l){return new cp(a,l)}var is=He.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(a){this._renderer=a.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(a){return I(this,a),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&a&&Object.prototype.hasOwnProperty.call(a,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),lp=is.extend({options:{fill:!0,radius:10},initialize:function(a,l){I(this,l),this._latlng=Xe(a),this._radius=this.options.radius},setLatLng:function(a){var l=this._latlng;return this._latlng=Xe(a),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(a){return this.options.radius=this._radius=a,this.redraw()},getRadius:function(){return this._radius},setStyle:function(a){var l=a&&a.radius||this._radius;return is.prototype.setStyle.call(this,a),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var a=this._radius,l=this._radiusY||a,h=this._clickTolerance(),m=[a+h,l+h];this._pxBounds=new Dt(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(a){return a.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function yF(a,l){return new lp(a,l)}var Vv=lp.extend({initialize:function(a,l,h){if(typeof l=="number"&&(l=n({},h,{radius:l})),I(this,l),this._latlng=Xe(a),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(a){return this._mRadius=a,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var a=[this._radius,this._radiusY||this._radius];return new kn(this._map.layerPointToLatLng(this._point.subtract(a)),this._map.layerPointToLatLng(this._point.add(a)))},setStyle:is.prototype.setStyle,_project:function(){var a=this._latlng.lng,l=this._latlng.lat,h=this._map,m=h.options.crs;if(m.distance===br.distance){var v=Math.PI/180,w=this._mRadius/br.R/v,D=h.project([l+w,a]),B=h.project([l-w,a]),z=D.add(B).divideBy(2),Y=h.unproject(z).lat,le=Math.acos((Math.cos(w*v)-Math.sin(l*v)*Math.sin(Y*v))/(Math.cos(l*v)*Math.cos(Y*v)))/v;(isNaN(le)||le===0)&&(le=w/Math.cos(Math.PI/180*l)),this._point=z.subtract(h.getPixelOrigin()),this._radius=isNaN(le)?0:z.x-h.project([Y,a-le]).x,this._radiusY=z.y-D.y}else{var xe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(xe).x}this._updateBounds()}});function bF(a,l,h){return new Vv(a,l,h)}var fo=is.extend({options:{smoothFactor:1,noClip:!1},initialize:function(a,l){I(this,l),this._setLatLngs(a)},getLatLngs:function(){return this._latlngs},setLatLngs:function(a){return this._setLatLngs(a),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(a){for(var l=1/0,h=null,m=fn,v,w,D=0,B=this._parts.length;D<B;D++)for(var z=this._parts[D],Y=1,le=z.length;Y<le;Y++){v=z[Y-1],w=z[Y];var xe=m(a,v,w,!0);xe<l&&(l=xe,h=m(a,v,w))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ho(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(a,l){return l=l||this._defaultShape(),a=Xe(a),l.push(a),this._bounds.extend(a),this.redraw()},_setLatLngs:function(a){this._bounds=new kn,this._latlngs=this._convertLatLngs(a)},_defaultShape:function(){return zn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(a){for(var l=[],h=zn(a),m=0,v=a.length;m<v;m++)h?(l[m]=Xe(a[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(a[m]);return l},_project:function(){var a=new Dt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,a),this._bounds.isValid()&&a.isValid()&&(this._rawPxBounds=a,this._updateBounds())},_updateBounds:function(){var a=this._clickTolerance(),l=new Oe(a,a);this._rawPxBounds&&(this._pxBounds=new Dt([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(a,l,h){var m=a[0]instanceof Re,v=a.length,w,D;if(m){for(D=[],w=0;w<v;w++)D[w]=this._map.latLngToLayerPoint(a[w]),h.extend(D[w]);l.push(D)}else for(w=0;w<v;w++)this._projectLatlngs(a[w],l,h)},_clipPoints:function(){var a=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,m,v,w,D,B,z;for(h=0,v=0,w=this._rings.length;h<w;h++)for(z=this._rings[h],m=0,D=z.length;m<D-1;m++)B=Cd(z[m],z[m+1],a,m,!0),B&&(l[v]=l[v]||[],l[v].push(B[0]),(B[1]!==z[m+1]||m===D-2)&&(l[v].push(B[1]),v++))}},_simplifyPoints:function(){for(var a=this._parts,l=this.options.smoothFactor,h=0,m=a.length;h<m;h++)a[h]=zc(a[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(a,l){var h,m,v,w,D,B,z=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(h=0,w=this._parts.length;h<w;h++)for(B=this._parts[h],m=0,D=B.length,v=D-1;m<D;v=m++)if(!(!l&&m===0)&&wd(a,B[v],B[m])<=z)return!0;return!1}});function wF(a,l){return new fo(a,l)}fo._flat=Ed;var Wc=fo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return yd(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(a){var l=fo.prototype._convertLatLngs.call(this,a),h=l.length;return h>=2&&l[0]instanceof Re&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(a){fo.prototype._setLatLngs.call(this,a),zn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var a=this._renderer._bounds,l=this.options.weight,h=new Oe(l,l);if(a=new Dt(a.min.subtract(h),a.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(a))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,v=this._rings.length,w;m<v;m++)w=ns(this._rings[m],a,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(a){var l=!1,h,m,v,w,D,B,z,Y;if(!this._pxBounds||!this._pxBounds.contains(a))return!1;for(w=0,z=this._parts.length;w<z;w++)for(h=this._parts[w],D=0,Y=h.length,B=Y-1;D<Y;B=D++)m=h[D],v=h[B],m.y>a.y!=v.y>a.y&&a.x<(v.x-m.x)*(a.y-m.y)/(v.y-m.y)+m.x&&(l=!l);return l||fo.prototype._containsPoint.call(this,a,!0)}});function IF(a,l){return new Wc(a,l)}var po=kt.extend({initialize:function(a,l){I(this,l),this._layers={},a&&this.addData(a)},addData:function(a){var l=W(a)?a:a.features,h,m,v;if(l){for(h=0,m=l.length;h<m;h++)v=l[h],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var w=this.options;if(w.filter&&!w.filter(a))return this;var D=up(a,w);return D?(D.feature=fp(a),D.defaultOptions=D.options,this.resetStyle(D),w.onEachFeature&&w.onEachFeature(a,D),this.addLayer(D)):this},resetStyle:function(a){return a===void 0?this.eachLayer(this.resetStyle,this):(a.options=n({},a.defaultOptions),this._setLayerStyle(a,this.options.style),this)},setStyle:function(a){return this.eachLayer(function(l){this._setLayerStyle(l,a)},this)},_setLayerStyle:function(a,l){a.setStyle&&(typeof l=="function"&&(l=l(a.feature)),a.setStyle(l))}});function up(a,l){var h=a.type==="Feature"?a.geometry:a,m=h?h.coordinates:null,v=[],w=l&&l.pointToLayer,D=l&&l.coordsToLatLng||Bv,B,z,Y,le;if(!m&&!h)return null;switch(h.type){case"Point":return B=D(m),hD(w,a,B,l);case"MultiPoint":for(Y=0,le=m.length;Y<le;Y++)B=D(m[Y]),v.push(hD(w,a,B,l));return new kt(v);case"LineString":case"MultiLineString":return z=dp(m,h.type==="LineString"?0:1,D),new fo(z,l);case"Polygon":case"MultiPolygon":return z=dp(m,h.type==="Polygon"?1:2,D),new Wc(z,l);case"GeometryCollection":for(Y=0,le=h.geometries.length;Y<le;Y++){var xe=up({geometry:h.geometries[Y],type:"Feature",properties:a.properties},l);xe&&v.push(xe)}return new kt(v);case"FeatureCollection":for(Y=0,le=h.features.length;Y<le;Y++){var We=up(h.features[Y],l);We&&v.push(We)}return new kt(v);default:throw new Error("Invalid GeoJSON object.")}}function hD(a,l,h,m){return a?a(l,h):new cp(h,m&&m.markersInheritOptions&&m)}function Bv(a){return new Re(a[1],a[0],a[2])}function dp(a,l,h){for(var m=[],v=0,w=a.length,D;v<w;v++)D=l?dp(a[v],l-1,h):(h||Bv)(a[v]),m.push(D);return m}function jv(a,l){return a=Xe(a),a.alt!==void 0?[p(a.lng,l),p(a.lat,l),p(a.alt,l)]:[p(a.lng,l),p(a.lat,l)]}function hp(a,l,h,m){for(var v=[],w=0,D=a.length;w<D;w++)v.push(l?hp(a[w],zn(a[w])?0:l-1,h,m):jv(a[w],m));return!l&&h&&v.length>0&&v.push(v[0].slice()),v}function Zc(a,l){return a.feature?n({},a.feature,{geometry:l}):fp(l)}function fp(a){return a.type==="Feature"||a.type==="FeatureCollection"?a:{type:"Feature",properties:{},geometry:a}}var Uv={toGeoJSON:function(a){return Zc(this,{type:"Point",coordinates:jv(this.getLatLng(),a)})}};cp.include(Uv),Vv.include(Uv),lp.include(Uv),fo.include({toGeoJSON:function(a){var l=!zn(this._latlngs),h=hp(this._latlngs,l?1:0,!1,a);return Zc(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),Wc.include({toGeoJSON:function(a){var l=!zn(this._latlngs),h=l&&!zn(this._latlngs[0]),m=hp(this._latlngs,h?2:l?1:0,!0,a);return l||(m=[m]),Zc(this,{type:(h?"Multi":"")+"Polygon",coordinates:m})}}),$t.include({toMultiPoint:function(a){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(a).geometry.coordinates)}),Zc(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(a){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(a);var h=l==="GeometryCollection",m=[];return this.eachLayer(function(v){if(v.toGeoJSON){var w=v.toGeoJSON(a);if(h)m.push(w.geometry);else{var D=fp(w);D.type==="FeatureCollection"?m.push.apply(m,D.features):m.push(D)}}}),h?Zc(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function fD(a,l){return new po(a,l)}var CF=fD,pp=He.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(a,l,h){this._url=a,this._bounds=bt(l),I(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Rt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(a){return this.options.opacity=a,this._image&&this._updateOpacity(),this},setStyle:function(a){return a.opacity&&this.setOpacity(a.opacity),this},bringToFront:function(){return this._map&&Er(this._image),this},bringToBack:function(){return this._map&&xr(this._image),this},setUrl:function(a){return this._url=a,this._image&&(this._image.src=a),this},setBounds:function(a){return this._bounds=bt(a),this._map&&this._reset(),this},getEvents:function(){var a={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var a=this._url.tagName==="IMG",l=this._image=a?this._url:tt("img");if(Fe(l,"leaflet-image-layer"),this._zoomAnimated&&Fe(l,"leaflet-zoom-animated"),this.options.className&&Fe(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),a){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(a){var l=this._map.getZoomScale(a.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,a.zoom,a.center).min;Tn(this._image,h,l)},_reset:function(){var a=this._image,l=new Dt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();Vt(a,l.min),a.style.width=h.x+"px",a.style.height=h.y+"px"},_updateOpacity:function(){Un(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var a=this.options.errorOverlayUrl;a&&this._url!==a&&(this._url=a,this._image.src=a)},getCenter:function(){return this._bounds.getCenter()}}),EF=function(a,l,h){return new pp(a,l,h)},pD=pp.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var a=this._url.tagName==="VIDEO",l=this._image=a?this._url:tt("video");if(Fe(l,"leaflet-image-layer"),this._zoomAnimated&&Fe(l,"leaflet-zoom-animated"),this.options.className&&Fe(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onloadeddata=r(this.fire,this,"load"),a){for(var h=l.getElementsByTagName("source"),m=[],v=0;v<h.length;v++)m.push(h[v].src);this._url=h.length>0?m:[l.src];return}W(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var D=tt("source");D.src=this._url[w],l.appendChild(D)}}});function xF(a,l,h){return new pD(a,l,h)}var mD=pp.extend({_initImage:function(){var a=this._image=this._url;Fe(a,"leaflet-image-layer"),this._zoomAnimated&&Fe(a,"leaflet-zoom-animated"),this.options.className&&Fe(a,this.options.className),a.onselectstart=f,a.onmousemove=f}});function DF(a,l,h){return new mD(a,l,h)}var Ar=He.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(a,l){a&&(a instanceof Re||W(a))?(this._latlng=Xe(a),I(this,l)):(I(this,a),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(a){return a=arguments.length?a:this._source._map,a.hasLayer(this)||a.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(a){return this._map?this.close():(arguments.length?this._source=a:a=this._source,this._prepareOpen(),this.openOn(a._map)),this},onAdd:function(a){this._zoomAnimated=a._zoomAnimated,this._container||this._initLayout(),a._fadeAnimated&&Un(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),a._fadeAnimated&&Un(this._container,1),this.bringToFront(),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(a){a._fadeAnimated?(Un(this._container,0),this._removeTimeout=setTimeout(r(Rt,void 0,this._container),200)):Rt(this._container),this.options.interactive&&(Wt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(a){return this._latlng=Xe(a),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(a){return this._content=a,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var a={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Er(this._container),this},bringToBack:function(){return this._map&&xr(this._container),this},_prepareOpen:function(a){var l=this._source;if(!l._map)return!1;if(l instanceof kt){l=null;var h=this._source._layers;for(var m in h)if(h[m]._map){l=h[m];break}if(!l)return!1;this._source=l}if(!a)if(l.getCenter)a=l.getCenter();else if(l.getLatLng)a=l.getLatLng();else if(l.getBounds)a=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(a),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var a=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")a.innerHTML=l;else{for(;a.hasChildNodes();)a.removeChild(a.firstChild);a.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var a=this._map.latLngToLayerPoint(this._latlng),l=Ee(this.options.offset),h=this._getAnchor();this._zoomAnimated?Vt(this._container,a.add(h)):l=l.add(a).add(h);var m=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Je.include({_initOverlay:function(a,l,h,m){var v=l;return v instanceof a||(v=new a(m).setContent(l)),h&&v.setLatLng(h),v}}),He.include({_initOverlay:function(a,l,h,m){var v=h;return v instanceof a?(I(v,m),v._source=this):(v=l&&!m?l:new a(m,this),v.setContent(h)),v}});var mp=Ar.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(a){return a=arguments.length?a:this._source._map,!a.hasLayer(this)&&a._popup&&a._popup.options.autoClose&&a.removeLayer(a._popup),a._popup=this,Ar.prototype.openOn.call(this,a)},onAdd:function(a){Ar.prototype.onAdd.call(this,a),a.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof is||this._source.on("preclick",Nn))},onRemove:function(a){Ar.prototype.onRemove.call(this,a),a.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof is||this._source.off("preclick",Nn))},getEvents:function(){var a=Ar.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(a.preclick=this.close),this.options.keepInView&&(a.moveend=this._adjustPan),a},_initLayout:function(){var a="leaflet-popup",l=this._container=tt("div",a+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=tt("div",a+"-content-wrapper",l);if(this._contentNode=tt("div",a+"-content",h),ca(l),gd(this._contentNode),ke(l,"contextmenu",Nn),this._tipContainer=tt("div",a+"-tip-container",l),this._tip=tt("div",a+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=tt("a",a+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',ke(m,"click",function(v){Zt(v),this.close()},this)}},_updateLayout:function(){var a=this._contentNode,l=a.style;l.width="",l.whiteSpace="nowrap";var h=a.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var m=a.offsetHeight,v=this.options.maxHeight,w="leaflet-popup-scrolled";v&&m>v?(l.height=v+"px",Fe(a,w)):Wt(a,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center),h=this._getAnchor();Vt(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var a=this._map,l=parseInt(ra(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,m=this._containerWidth,v=new Oe(this._containerLeft,-h-this._containerBottom);v._add(xi(this._container));var w=a.layerPointToContainerPoint(v),D=Ee(this.options.autoPanPadding),B=Ee(this.options.autoPanPaddingTopLeft||D),z=Ee(this.options.autoPanPaddingBottomRight||D),Y=a.getSize(),le=0,xe=0;w.x+m+z.x>Y.x&&(le=w.x+m-Y.x+z.x),w.x-le-B.x<0&&(le=w.x-B.x),w.y+h+z.y>Y.y&&(xe=w.y+h-Y.y+z.y),w.y-xe-B.y<0&&(xe=w.y-B.y),(le||xe)&&(this.options.keepInView&&(this._autopanning=!0),a.fire("autopanstart").panBy([le,xe]))}},_getAnchor:function(){return Ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),TF=function(a,l){return new mp(a,l)};Je.mergeOptions({closePopupOnClick:!0}),Je.include({openPopup:function(a,l,h){return this._initOverlay(mp,a,l,h).openOn(this),this},closePopup:function(a){return a=arguments.length?a:this._popup,a&&a.close(),this}}),He.include({bindPopup:function(a,l){return this._popup=this._initOverlay(mp,this._popup,a,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(a){return this._popup&&(this instanceof kt||(this._popup._source=this),this._popup._prepareOpen(a||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(a){return this._popup&&this._popup.setContent(a),this},getPopup:function(){return this._popup},_openPopup:function(a){if(!(!this._popup||!this._map)){Di(a);var l=a.layer||a.target;if(this._popup._source===l&&!(l instanceof is)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(a.latlng);return}this._popup._source=l,this.openPopup(a.latlng)}},_movePopup:function(a){this._popup.setLatLng(a.latlng)},_onKeyPress:function(a){a.originalEvent.keyCode===13&&this._openPopup(a)}});var gp=Ar.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(a){Ar.prototype.onAdd.call(this,a),this.setOpacity(this.options.opacity),a.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(a){Ar.prototype.onRemove.call(this,a),a.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var a=Ar.prototype.getEvents.call(this);return this.options.permanent||(a.preclick=this.close),a},_initLayout:function(){var a="leaflet-tooltip",l=a+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=tt("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+s(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(a){var l,h,m=this._map,v=this._container,w=m.latLngToContainerPoint(m.getCenter()),D=m.layerPointToContainerPoint(a),B=this.options.direction,z=v.offsetWidth,Y=v.offsetHeight,le=Ee(this.options.offset),xe=this._getAnchor();B==="top"?(l=z/2,h=Y):B==="bottom"?(l=z/2,h=0):B==="center"?(l=z/2,h=Y/2):B==="right"?(l=0,h=Y/2):B==="left"?(l=z,h=Y/2):D.x<w.x?(B="right",l=0,h=Y/2):(B="left",l=z+(le.x+xe.x)*2,h=Y/2),a=a.subtract(Ee(l,h,!0)).add(le).add(xe),Wt(v,"leaflet-tooltip-right"),Wt(v,"leaflet-tooltip-left"),Wt(v,"leaflet-tooltip-top"),Wt(v,"leaflet-tooltip-bottom"),Fe(v,"leaflet-tooltip-"+B),Vt(v,a)},_updatePosition:function(){var a=this._map.latLngToLayerPoint(this._latlng);this._setPosition(a)},setOpacity:function(a){this.options.opacity=a,this._container&&Un(this._container,a)},_animateZoom:function(a){var l=this._map._latLngToNewLayerPoint(this._latlng,a.zoom,a.center);this._setPosition(l)},_getAnchor:function(){return Ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),SF=function(a,l){return new gp(a,l)};Je.include({openTooltip:function(a,l,h){return this._initOverlay(gp,a,l,h).openOn(this),this},closeTooltip:function(a){return a.close(),this}}),He.include({bindTooltip:function(a,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(gp,this._tooltip,a,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(a){if(!(!a&&this._tooltipHandlersAdded)){var l=a?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!a}},openTooltip:function(a){return this._tooltip&&(this instanceof kt||(this._tooltip._source=this),this._tooltip._prepareOpen(a)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(a){return this._tooltip&&this._tooltip.setContent(a),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(a){var l=typeof a.getElement=="function"&&a.getElement();l&&(ke(l,"focus",function(){this._tooltip._source=a,this.openTooltip()},this),ke(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(a){var l=typeof a.getElement=="function"&&a.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(a){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(a)});return}this._tooltip._source=a.layer||a.target,this.openTooltip(this._tooltip.options.sticky?a.latlng:void 0)}},_moveTooltip:function(a){var l=a.latlng,h,m;this._tooltip.options.sticky&&a.originalEvent&&(h=this._map.mouseEventToContainerPoint(a.originalEvent),m=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var gD=pi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(a){var l=a&&a.tagName==="DIV"?a:document.createElement("div"),h=this.options;if(h.html instanceof Element?(oa(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var m=Ee(h.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function AF(a){return new gD(a)}pi.Default=Sr;var xd=He.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ge.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(a){I(this,a)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(a){a._addZoomLimit(this)},onRemove:function(a){this._removeAllTiles(),Rt(this._container),a._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Er(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(xr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(a){return this.options.opacity=a,this._updateOpacity(),this},setZIndex:function(a){return this.options.zIndex=a,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var a=this._clampZoom(this._map.getZoom());a!==this._tileZoom&&(this._tileZoom=a,this._updateLevels()),this._update()}return this},getEvents:function(){var a={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),a.move=this._onMove),this._zoomAnimated&&(a.zoomanim=this._animateZoom),a},createTile:function(){return document.createElement("div")},getTileSize:function(){var a=this.options.tileSize;return a instanceof Oe?a:new Oe(a,a)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(a){for(var l=this.getPane().children,h=-a(-1/0,1/0),m=0,v=l.length,w;m<v;m++)w=l[m].style.zIndex,l[m]!==this._container&&w&&(h=a(h,+w));isFinite(h)&&(this.options.zIndex=h+a(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ge.ielt9){Un(this._container,this.options.opacity);var a=+new Date,l=!1,h=!1;for(var m in this._tiles){var v=this._tiles[m];if(!(!v.current||!v.loaded)){var w=Math.min(1,(a-v.loaded)/200);Un(v.el,w),w<1?l=!0:(v.active?h=!0:this._onOpaqueTile(v),v.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(M(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var a=this._tileZoom,l=this.options.maxZoom;if(a!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===a?(this._levels[h].el.style.zIndex=l-Math.abs(a-h),this._onUpdateLevel(h)):(Rt(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var m=this._levels[a],v=this._map;return m||(m=this._levels[a]={},m.el=tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=v.project(v.unproject(v.getPixelOrigin()),a).round(),m.zoom=a,this._setZoomTransform(m,v.getCenter(),v.getZoom()),f(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var a,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(a in this._tiles)l=this._tiles[a],l.retain=l.current;for(a in this._tiles)if(l=this._tiles[a],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(a in this._tiles)this._tiles[a].retain||this._removeTile(a)}},_removeTilesAtZoom:function(a){for(var l in this._tiles)this._tiles[l].coords.z===a&&this._removeTile(l)},_removeAllTiles:function(){for(var a in this._tiles)this._removeTile(a)},_invalidateAll:function(){for(var a in this._levels)Rt(this._levels[a].el),this._onRemoveLevel(Number(a)),delete this._levels[a];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(a,l,h,m){var v=Math.floor(a/2),w=Math.floor(l/2),D=h-1,B=new Oe(+v,+w);B.z=+D;var z=this._tileCoordsToKey(B),Y=this._tiles[z];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),D>m?this._retainParent(v,w,D,m):!1)},_retainChildren:function(a,l,h,m){for(var v=2*a;v<2*a+2;v++)for(var w=2*l;w<2*l+2;w++){var D=new Oe(v,w);D.z=h+1;var B=this._tileCoordsToKey(D),z=this._tiles[B];if(z&&z.active){z.retain=!0;continue}else z&&z.loaded&&(z.retain=!0);h+1<m&&this._retainChildren(v,w,h+1,m)}},_resetView:function(a){var l=a&&(a.pinch||a.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(a){this._setView(a.center,a.zoom,!0,a.noUpdate)},_clampZoom:function(a){var l=this.options;return l.minNativeZoom!==void 0&&a<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<a?l.maxNativeZoom:a},_setView:function(a,l,h,m){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var w=this.options.updateWhenZooming&&v!==this._tileZoom;(!m||w)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(a),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(a,l)},_setZoomTransforms:function(a,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],a,l)},_setZoomTransform:function(a,l,h){var m=this._map.getZoomScale(h,a.zoom),v=a.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,h)).round();ge.any3d?Tn(a.el,v,m):Vt(a.el,v)},_resetGrid:function(){var a=this._map,l=a.options.crs,h=this._tileSize=this.getTileSize(),m=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(a.project([0,l.wrapLng[0]],m).x/h.x),Math.ceil(a.project([0,l.wrapLng[1]],m).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(a.project([l.wrapLat[0],0],m).y/h.x),Math.ceil(a.project([l.wrapLat[1],0],m).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(a){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(h,this._tileZoom),v=l.project(a,this._tileZoom).floor(),w=l.getSize().divideBy(m*2);return new Dt(v.subtract(w),v.add(w))},_update:function(a){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(a===void 0&&(a=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(a),v=this._pxBoundsToTileRange(m),w=v.getCenter(),D=[],B=this.options.keepBuffer,z=new Dt(v.getBottomLeft().subtract([B,-B]),v.getTopRight().add([B,-B]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var le=this._tiles[Y].coords;(le.z!==this._tileZoom||!z.contains(new Oe(le.x,le.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(a,h);return}for(var xe=v.min.y;xe<=v.max.y;xe++)for(var We=v.min.x;We<=v.max.x;We++){var $n=new Oe(We,xe);if($n.z=this._tileZoom,!!this._isValidTile($n)){var wn=this._tiles[this._tileCoordsToKey($n)];wn?wn.current=!0:D.push($n)}}if(D.sort(function(ei,Yc){return ei.distanceTo(w)-Yc.distanceTo(w)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ti=document.createDocumentFragment();for(We=0;We<D.length;We++)this._addTile(D[We],Ti);this._level.el.appendChild(Ti)}}}},_isValidTile:function(a){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(a.x<h.min.x||a.x>h.max.x)||!l.wrapLat&&(a.y<h.min.y||a.y>h.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(a);return bt(this.options.bounds).overlaps(m)},_keyToBounds:function(a){return this._tileCoordsToBounds(this._keyToTileCoords(a))},_tileCoordsToNwSe:function(a){var l=this._map,h=this.getTileSize(),m=a.scaleBy(h),v=m.add(h),w=l.unproject(m,a.z),D=l.unproject(v,a.z);return[w,D]},_tileCoordsToBounds:function(a){var l=this._tileCoordsToNwSe(a),h=new kn(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(a){return a.x+":"+a.y+":"+a.z},_keyToTileCoords:function(a){var l=a.split(":"),h=new Oe(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(a){var l=this._tiles[a];l&&(Rt(l.el),delete this._tiles[a],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(a)}))},_initTile:function(a){Fe(a,"leaflet-tile");var l=this.getTileSize();a.style.width=l.x+"px",a.style.height=l.y+"px",a.onselectstart=f,a.onmousemove=f,ge.ielt9&&this.options.opacity<1&&Un(a,this.options.opacity)},_addTile:function(a,l){var h=this._getTilePos(a),m=this._tileCoordsToKey(a),v=this.createTile(this._wrapCoords(a),r(this._tileReady,this,a));this._initTile(v),this.createTile.length<2&&x(r(this._tileReady,this,a,null,v)),Vt(v,h),this._tiles[m]={el:v,coords:a,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:a})},_tileReady:function(a,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:a});var m=this._tileCoordsToKey(a);h=this._tiles[m],h&&(h.loaded=+new Date,this._map._fadeAnimated?(Un(h.el,0),M(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Fe(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:a})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ge.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(a){return a.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(a){var l=new Oe(this._wrapX?u(a.x,this._wrapX):a.x,this._wrapY?u(a.y,this._wrapY):a.y);return l.z=a.z,l},_pxBoundsToTileRange:function(a){var l=this.getTileSize();return new Dt(a.min.unscaleBy(l).floor(),a.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var a in this._tiles)if(!this._tiles[a].loaded)return!1;return!0}});function MF(a){return new xd(a)}var Kc=xd.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(a,l){this._url=a,l=I(this,l),l.detectRetina&&ge.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(a,l){return this._url===a&&l===void 0&&(l=!0),this._url=a,l||this.redraw(),this},createTile:function(a,l){var h=document.createElement("img");return ke(h,"load",r(this._tileOnLoad,this,l,h)),ke(h,"error",r(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(a),h},getTileUrl:function(a){var l={r:ge.retina?"@2x":"",s:this._getSubdomain(a),x:a.x,y:a.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-a.y;this.options.tms&&(l.y=h),l["-y"]=h}return O(this._url,n(l,this.options))},_tileOnLoad:function(a,l){ge.ielt9?setTimeout(r(a,this,null,l),0):a(null,l)},_tileOnError:function(a,l,h){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),a(h,l)},_onTileRemove:function(a){a.tile.onload=null},_getZoomForUrl:function(){var a=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,m=this.options.zoomOffset;return h&&(a=l-a),a+m},_getSubdomain:function(a){var l=Math.abs(a.x+a.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var a,l;for(a in this._tiles)if(this._tiles[a].coords.z!==this._tileZoom&&(l=this._tiles[a].el,l.onload=f,l.onerror=f,!l.complete)){l.src=Z;var h=this._tiles[a].coords;Rt(l),delete this._tiles[a],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(a){var l=this._tiles[a];if(l)return l.el.setAttribute("src",Z),xd.prototype._removeTile.call(this,a)},_tileReady:function(a,l,h){if(!(!this._map||h&&h.getAttribute("src")===Z))return xd.prototype._tileReady.call(this,a,l,h)}});function _D(a,l){return new Kc(a,l)}var vD=Kc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(a,l){this._url=a;var h=n({},this.defaultWmsParams);for(var m in l)m in this.options||(h[m]=l[m]);l=I(this,l);var v=l.detectRetina&&ge.retina?2:1,w=this.getTileSize();h.width=w.x*v,h.height=w.y*v,this.wmsParams=h},onAdd:function(a){this._crs=this.options.crs||a.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Kc.prototype.onAdd.call(this,a)},getTileUrl:function(a){var l=this._tileCoordsToNwSe(a),h=this._crs,m=xn(h.project(l[0]),h.project(l[1])),v=m.min,w=m.max,D=(this._wmsVersion>=1.3&&this._crs===$?[v.y,v.x,w.y,w.x]:[v.x,v.y,w.x,w.y]).join(","),B=Kc.prototype.getTileUrl.call(this,a);return B+S(this.wmsParams,B,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(a,l){return n(this.wmsParams,a),l||this.redraw(),this}});function PF(a,l){return new vD(a,l)}Kc.WMS=vD,_D.wms=PF;var mo=He.extend({options:{padding:.1},initialize:function(a){I(this,a),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var a={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(a.zoomanim=this._onAnimZoom),a},_onAnimZoom:function(a){this._updateTransform(a.center,a.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(a,l){var h=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),w=m.multiplyBy(-h).add(v).subtract(this._map._getNewPixelOrigin(a,l));ge.any3d?Tn(this._container,w,h):Vt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var a in this._layers)this._layers[a]._reset()},_onZoomEnd:function(){for(var a in this._layers)this._layers[a]._project()},_updatePaths:function(){for(var a in this._layers)this._layers[a]._update()},_update:function(){var a=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-a)).round();this._bounds=new Dt(h,h.add(l.multiplyBy(1+a*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yD=mo.extend({options:{tolerance:0},getEvents:function(){var a=mo.prototype.getEvents.call(this);return a.viewprereset=this._onViewPreReset,a},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var a=this._container=document.createElement("canvas");ke(a,"mousemove",this._onMouseMove,this),ke(a,"click dblclick mousedown mouseup contextmenu",this._onClick,this),ke(a,"mouseout",this._handleMouseOut,this),a._leaflet_disable_events=!0,this._ctx=a.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,Rt(this._container),wt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var a;this._redrawBounds=null;for(var l in this._layers)a=this._layers[l],a._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mo.prototype._update.call(this);var a=this._bounds,l=this._container,h=a.getSize(),m=ge.retina?2:1;Vt(l,a.min),l.width=m*h.x,l.height=m*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",ge.retina&&this._ctx.scale(2,2),this._ctx.translate(-a.min.x,-a.min.y),this.fire("update")}},_reset:function(){mo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(a){this._updateDashArray(a),this._layers[s(a)]=a;var l=a._order={layer:a,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(a){this._requestRedraw(a)},_removePath:function(a){var l=a._order,h=l.next,m=l.prev;h?h.prev=m:this._drawLast=m,m?m.next=h:this._drawFirst=h,delete a._order,delete this._layers[s(a)],this._requestRedraw(a)},_updatePath:function(a){this._extendRedrawBounds(a),a._project(),a._update(),this._requestRedraw(a)},_updateStyle:function(a){this._updateDashArray(a),this._requestRedraw(a)},_updateDashArray:function(a){if(typeof a.options.dashArray=="string"){var l=a.options.dashArray.split(/[, ]+/),h=[],m,v;for(v=0;v<l.length;v++){if(m=Number(l[v]),isNaN(m))return;h.push(m)}a.options._dashArray=h}else a.options._dashArray=a.options.dashArray},_requestRedraw:function(a){this._map&&(this._extendRedrawBounds(a),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(a){if(a._pxBounds){var l=(a.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Dt,this._redrawBounds.extend(a._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(a._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var a=this._redrawBounds;if(a){var l=a.getSize();this._ctx.clearRect(a.min.x,a.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var a,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)a=m.layer,(!l||a._pxBounds&&a._pxBounds.intersects(l))&&a._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(a,l){if(this._drawing){var h,m,v,w,D=a._parts,B=D.length,z=this._ctx;if(B){for(z.beginPath(),h=0;h<B;h++){for(m=0,v=D[h].length;m<v;m++)w=D[h][m],z[m?"lineTo":"moveTo"](w.x,w.y);l&&z.closePath()}this._fillStroke(z,a)}}},_updateCircle:function(a){if(!(!this._drawing||a._empty())){var l=a._point,h=this._ctx,m=Math.max(Math.round(a._radius),1),v=(Math.max(Math.round(a._radiusY),1)||m)/m;v!==1&&(h.save(),h.scale(1,v)),h.beginPath(),h.arc(l.x,l.y/v,m,0,Math.PI*2,!1),v!==1&&h.restore(),this._fillStroke(h,a)}},_fillStroke:function(a,l){var h=l.options;h.fill&&(a.globalAlpha=h.fillOpacity,a.fillStyle=h.fillColor||h.color,a.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(a.setLineDash&&a.setLineDash(l.options&&l.options._dashArray||[]),a.globalAlpha=h.opacity,a.lineWidth=h.weight,a.strokeStyle=h.color,a.lineCap=h.lineCap,a.lineJoin=h.lineJoin,a.stroke())},_onClick:function(a){for(var l=this._map.mouseEventToLayerPoint(a),h,m,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(!(a.type==="click"||a.type==="preclick")||!this._map._draggableMoved(h))&&(m=h);this._fireEvent(m?[m]:!1,a)},_onMouseMove:function(a){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(a);this._handleMouseHover(a,l)}},_handleMouseOut:function(a){var l=this._hoveredLayer;l&&(Wt(this._container,"leaflet-interactive"),this._fireEvent([l],a,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(a,l){if(!this._mouseHoverThrottled){for(var h,m,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(m=h);m!==this._hoveredLayer&&(this._handleMouseOut(a),m&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([m],a,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,a),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(a,l,h){this._map._fireDOMEvent(l,h||l.type,a)},_bringToFront:function(a){var l=a._order;if(l){var h=l.next,m=l.prev;if(h)h.prev=m;else return;m?m.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(a)}},_bringToBack:function(a){var l=a._order;if(l){var h=l.next,m=l.prev;if(m)m.next=h;else return;h?h.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(a)}}});function bD(a){return ge.canvas?new yD(a):null}var Dd=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(a){return document.createElement("<lvml:"+a+' class="lvml">')}}catch{}return function(a){return document.createElement("<"+a+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),RF={_initContainer:function(){this._container=tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mo.prototype._update.call(this),this.fire("update"))},_initPath:function(a){var l=a._container=Dd("shape");Fe(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",a._path=Dd("path"),l.appendChild(a._path),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){var l=a._container;this._container.appendChild(l),a.options.interactive&&a.addInteractiveTarget(l)},_removePath:function(a){var l=a._container;Rt(l),a.removeInteractiveTarget(l),delete this._layers[s(a)]},_updateStyle:function(a){var l=a._stroke,h=a._fill,m=a.options,v=a._container;v.stroked=!!m.stroke,v.filled=!!m.fill,m.stroke?(l||(l=a._stroke=Dd("stroke")),v.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=W(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(v.removeChild(l),a._stroke=null),m.fill?(h||(h=a._fill=Dd("fill")),v.appendChild(h),h.color=m.fillColor||m.color,h.opacity=m.fillOpacity):h&&(v.removeChild(h),a._fill=null)},_updateCircle:function(a){var l=a._point.round(),h=Math.round(a._radius),m=Math.round(a._radiusY||h);this._setPath(a,a._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+m+" 0,"+65535*360)},_setPath:function(a,l){a._path.v=l},_bringToFront:function(a){Er(a._container)},_bringToBack:function(a){xr(a._container)}},_p=ge.vml?Dd:Tc,Td=mo.extend({_initContainer:function(){this._container=_p("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=_p("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Rt(this._container),wt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mo.prototype._update.call(this);var a=this._bounds,l=a.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),Vt(h,a.min),h.setAttribute("viewBox",[a.min.x,a.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(a){var l=a._path=_p("path");a.options.className&&Fe(l,a.options.className),a.options.interactive&&Fe(l,"leaflet-interactive"),this._updateStyle(a),this._layers[s(a)]=a},_addPath:function(a){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(a._path),a.addInteractiveTarget(a._path)},_removePath:function(a){Rt(a._path),a.removeInteractiveTarget(a._path),delete this._layers[s(a)]},_updatePath:function(a){a._project(),a._update()},_updateStyle:function(a){var l=a._path,h=a.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(a,l){this._setPath(a,Sc(a._parts,l))},_updateCircle:function(a){var l=a._point,h=Math.max(Math.round(a._radius),1),m=Math.max(Math.round(a._radiusY),1)||h,v="a"+h+","+m+" 0 1,0 ",w=a._empty()?"M0 0":"M"+(l.x-h)+","+l.y+v+h*2+",0 "+v+-h*2+",0 ";this._setPath(a,w)},_setPath:function(a,l){a._path.setAttribute("d",l)},_bringToFront:function(a){Er(a._path)},_bringToBack:function(a){xr(a._path)}});ge.vml&&Td.include(RF);function wD(a){return ge.svg||ge.vml?new Td(a):null}Je.include({getRenderer:function(a){var l=a.options.renderer||this._getPaneRenderer(a.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(a){if(a==="overlayPane"||a===void 0)return!1;var l=this._paneRenderers[a];return l===void 0&&(l=this._createRenderer({pane:a}),this._paneRenderers[a]=l),l},_createRenderer:function(a){return this.options.preferCanvas&&bD(a)||wD(a)}});var ID=Wc.extend({initialize:function(a,l){Wc.prototype.initialize.call(this,this._boundsToLatLngs(a),l)},setBounds:function(a){return this.setLatLngs(this._boundsToLatLngs(a))},_boundsToLatLngs:function(a){return a=bt(a),[a.getSouthWest(),a.getNorthWest(),a.getNorthEast(),a.getSouthEast()]}});function kF(a,l){return new ID(a,l)}Td.create=_p,Td.pointsToPath=Sc,po.geometryToLayer=up,po.coordsToLatLng=Bv,po.coordsToLatLngs=dp,po.latLngToCoords=jv,po.latLngsToCoords=hp,po.getFeature=Zc,po.asFeature=fp,Je.mergeOptions({boxZoom:!0});var CD=fi.extend({initialize:function(a){this._map=a,this._container=a._container,this._pane=a._panes.overlayPane,this._resetStateTimeout=0,a.on("unload",this._destroy,this)},addHooks:function(){ke(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){wt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Rt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(a){if(!a.shiftKey||a.which!==1&&a.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Xo(),ao(),this._startPoint=this._map.mouseEventToContainerPoint(a),ke(document,{contextmenu:Di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(a){this._moved||(this._moved=!0,this._box=tt("div","leaflet-zoom-box",this._container),Fe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(a);var l=new Dt(this._point,this._startPoint),h=l.getSize();Vt(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(Rt(this._box),Wt(this._container,"leaflet-crosshair")),ht(),ud(),wt(document,{contextmenu:Di,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(a){if(!(a.which!==1&&a.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new kn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(a){a.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Je.addInitHook("addHandler","boxZoom",CD),Je.mergeOptions({doubleClickZoom:!0});var ED=fi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(a){var l=this._map,h=l.getZoom(),m=l.options.zoomDelta,v=a.originalEvent.shiftKey?h-m:h+m;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(a.containerPoint,v)}});Je.addInitHook("addHandler","doubleClickZoom",ED),Je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xD=fi.extend({addHooks:function(){if(!this._draggable){var a=this._map;this._draggable=new Ji(a._mapPane,a._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),a.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),a.on("zoomend",this._onZoomEnd,this),a.whenReady(this._onZoomEnd,this))}Fe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Wt(this._map._container,"leaflet-grab"),Wt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var a=this._map;if(a._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=bt(this._map.options.maxBounds);this._offsetLimit=xn(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;a.fire("movestart").fire("dragstart"),a.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(a){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",a).fire("drag",a)},_prunePositions:function(a){for(;this._positions.length>1&&a-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var a=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(a).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(a,l){return a-(a-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var a=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;a.x<l.min.x&&(a.x=this._viscousLimit(a.x,l.min.x)),a.y<l.min.y&&(a.y=this._viscousLimit(a.y,l.min.y)),a.x>l.max.x&&(a.x=this._viscousLimit(a.x,l.max.x)),a.y>l.max.y&&(a.y=this._viscousLimit(a.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(a)}},_onPreDragWrap:function(){var a=this._worldWidth,l=Math.round(a/2),h=this._initialWorldOffset,m=this._draggable._newPos.x,v=(m-l+h)%a+l-h,w=(m+l+h)%a-l-h,D=Math.abs(v+h)<Math.abs(w+h)?v:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(a){var l=this._map,h=l.options,m=!h.inertia||a.noInertia||this._times.length<2;if(l.fire("dragend",a),m)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,D=h.easeLinearity,B=v.multiplyBy(D/w),z=B.distanceTo([0,0]),Y=Math.min(h.inertiaMaxSpeed,z),le=B.multiplyBy(Y/z),xe=Y/(h.inertiaDeceleration*D),We=le.multiplyBy(-xe/2).round();!We.x&&!We.y?l.fire("moveend"):(We=l._limitOffset(We,l.options.maxBounds),x(function(){l.panBy(We,{duration:xe,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});Je.addInitHook("addHandler","dragging",xD),Je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var DD=fi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(a){this._map=a,this._setPanDelta(a.options.keyboardPanDelta),this._setZoomDelta(a.options.zoomDelta)},addHooks:function(){var a=this._map._container;a.tabIndex<=0&&(a.tabIndex="0"),ke(a,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),wt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var a=document.body,l=document.documentElement,h=a.scrollTop||l.scrollTop,m=a.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(a){var l=this._panKeys={},h=this.keyCodes,m,v;for(m=0,v=h.left.length;m<v;m++)l[h.left[m]]=[-1*a,0];for(m=0,v=h.right.length;m<v;m++)l[h.right[m]]=[a,0];for(m=0,v=h.down.length;m<v;m++)l[h.down[m]]=[0,a];for(m=0,v=h.up.length;m<v;m++)l[h.up[m]]=[0,-1*a]},_setZoomDelta:function(a){var l=this._zoomKeys={},h=this.keyCodes,m,v;for(m=0,v=h.zoomIn.length;m<v;m++)l[h.zoomIn[m]]=a;for(m=0,v=h.zoomOut.length;m<v;m++)l[h.zoomOut[m]]=-a},_addHooks:function(){ke(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){wt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(a){if(!(a.altKey||a.ctrlKey||a.metaKey)){var l=a.keyCode,h=this._map,m;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(m=this._panKeys[l],a.shiftKey&&(m=Ee(m).multiplyBy(3)),h.options.maxBounds&&(m=h._limitOffset(Ee(m),h.options.maxBounds)),h.options.worldCopyJump){var v=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(m)));h.panTo(v)}else h.panBy(m)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(a.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;Di(a)}}});Je.addInitHook("addHandler","keyboard",DD),Je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var TD=fi.extend({addHooks:function(){ke(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){wt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(a){var l=vd(a),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(a),this._startTime||(this._startTime=+new Date);var m=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),m),Di(a)},_performZoom:function(){var a=this._map,l=a.getZoom(),h=this._map.options.zoomSnap||0;a._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,w=h?Math.ceil(v/h)*h:v,D=a._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,D&&(a.options.scrollWheelZoom==="center"?a.setZoom(l+D):a.setZoomAround(this._lastMousePos,l+D))}});Je.addInitHook("addHandler","scrollWheelZoom",TD);var NF=600;Je.mergeOptions({tapHold:ge.touchNative&&ge.safari&&ge.mobile,tapTolerance:15});var SD=fi.extend({addHooks:function(){ke(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){wt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(a){if(clearTimeout(this._holdTimeout),a.touches.length===1){var l=a.touches[0];this._startPos=this._newPos=new Oe(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(ke(document,"touchend",Zt),ke(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),NF),ke(document,"touchend touchcancel contextmenu",this._cancel,this),ke(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function a(){wt(document,"touchend",Zt),wt(document,"touchend touchcancel",a)},_cancel:function(){clearTimeout(this._holdTimeout),wt(document,"touchend touchcancel contextmenu",this._cancel,this),wt(document,"touchmove",this._onMove,this)},_onMove:function(a){var l=a.touches[0];this._newPos=new Oe(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(a,l){var h=new MouseEvent(a,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});Je.addInitHook("addHandler","tapHold",SD),Je.mergeOptions({touchZoom:ge.touch,bounceAtZoomLimits:!0});var AD=fi.extend({addHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),ke(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Wt(this._map._container,"leaflet-touch-zoom"),wt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(a){var l=this._map;if(!(!a.touches||a.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(a.touches[0]),m=l.mouseEventToContainerPoint(a.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(m)._divideBy(2))),this._startDist=h.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),ke(document,"touchmove",this._onTouchMove,this),ke(document,"touchend touchcancel",this._onTouchEnd,this),Zt(a)}},_onTouchMove:function(a){if(!(!a.touches||a.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(a.touches[0]),m=l.mouseEventToContainerPoint(a.touches[1]),v=h.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var w=h._add(m)._divideBy(2)._subtract(this._centerPoint);if(v===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var D=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x(D,this,!0),Zt(a)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),wt(document,"touchmove",this._onTouchMove,this),wt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Je.addInitHook("addHandler","touchZoom",AD),Je.BoxZoom=CD,Je.DoubleClickZoom=ED,Je.Drag=xD,Je.Keyboard=DD,Je.ScrollWheelZoom=TD,Je.TapHold=SD,Je.TouchZoom=AD,t.Bounds=Dt,t.Browser=ge,t.CRS=jn,t.Canvas=yD,t.Circle=Vv,t.CircleMarker=lp,t.Class=F,t.Control=Jn,t.DivIcon=gD,t.DivOverlay=Ar,t.DomEvent=zt,t.DomUtil=Dr,t.Draggable=Ji,t.Evented=Ki,t.FeatureGroup=kt,t.GeoJSON=po,t.GridLayer=xd,t.Handler=fi,t.Icon=pi,t.ImageOverlay=pp,t.LatLng=Re,t.LatLngBounds=kn,t.Layer=He,t.LayerGroup=$t,t.LineUtil=d,t.Map=Je,t.Marker=cp,t.Mixin=jc,t.Path=is,t.Point=Oe,t.PolyUtil=bd,t.Polygon=Wc,t.Polyline=fo,t.Popup=mp,t.PosAnimation=ep,t.Projection=C,t.Rectangle=ID,t.Renderer=mo,t.SVG=Td,t.SVGOverlay=mD,t.TileLayer=Kc,t.Tooltip=gp,t.Transformation=Ku,t.Util=R,t.VideoOverlay=pD,t.bind=r,t.bounds=xn,t.canvas=bD,t.circle=bF,t.circleMarker=yF,t.control=ts,t.divIcon=AF,t.extend=n,t.featureGroup=bn,t.geoJSON=fD,t.geoJson=CF,t.gridLayer=MF,t.icon=mi,t.imageOverlay=EF,t.latLng=Xe,t.latLngBounds=bt,t.layerGroup=nt,t.map=tp,t.marker=vF,t.point=Ee,t.polygon=IF,t.polyline=wF,t.popup=TF,t.rectangle=kF,t.setOptions=I,t.stamp=s,t.svg=wD,t.svgOverlay=DF,t.tileLayer=_D,t.tooltip=SF,t.transformation=wr,t.version=e,t.videoOverlay=xF;var OF=window.L;t.noConflict=function(){return window.L=OF,this},window.L=t})});var zD=null;var Qv=1,$D=Symbol("SIGNAL");function Ye(t){let e=zD;return zD=t,e}var HD={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function GF(t){if(!(ey(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Qv)){if(!t.producerMustRecompute(t)&&!Xv(t)){t.dirty=!1,t.lastCleanEpoch=Qv;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Qv}}function qD(t){return t&&(t.nextProducerIndex=0),Ye(t)}function GD(t,e){if(Ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(ey(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Jv(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Xv(t){Cp(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(GF(n),i!==n.version))return!0}return!1}function WD(t){if(Cp(t),ey(t))for(let e=0;e<t.producerNode.length;e++)Jv(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Jv(t,e){if(WF(t),Cp(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)Jv(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Cp(r),r.producerIndexOfThis[i]=e}}function ey(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cp(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function WF(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ZF(){throw new Error}var KF=ZF;function ZD(t){KF=t}function we(t){return typeof t=="function"}function el(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ep=el(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ga(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ot=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(we(i))try{i()}catch(o){e=o instanceof Ep?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{KD(o)}catch(s){e=e??[],s instanceof Ep?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Ep(e)}}add(e){var n;if(e&&e!==this)if(this.closed)KD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ga(n,e)}remove(e){let{_finalizers:n}=this;n&&ga(n,e),e instanceof t&&e._removeParent(this)}};Ot.EMPTY=(()=>{let t=new Ot;return t.closed=!0,t})();var ty=Ot.EMPTY;function xp(t){return t instanceof Ot||t&&"closed"in t&&we(t.remove)&&we(t.add)&&we(t.unsubscribe)}function KD(t){we(t)?t():t.unsubscribe()}var nr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var tl={setTimeout(t,e,...n){let{delegate:i}=tl;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=tl;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Dp(t){tl.setTimeout(()=>{let{onUnhandledError:e}=nr;if(e)e(t);else throw t})}function Md(){}var YD=ny("C",void 0,void 0);function QD(t){return ny("E",void 0,t)}function XD(t){return ny("N",t,void 0)}function ny(t,e,n){return{kind:t,value:e,error:n}}var _a=null;function nl(t){if(nr.useDeprecatedSynchronousErrorHandling){let e=!_a;if(e&&(_a={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=_a;if(_a=null,n)throw i}}else t()}function JD(t){nr.useDeprecatedSynchronousErrorHandling&&_a&&(_a.errorThrown=!0,_a.error=t)}var va=class extends Ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,xp(e)&&e.add(this)):this.destination=XF}static create(e,n,i){return new _o(e,n,i)}next(e){this.isStopped?ry(XD(e),this):this._next(e)}error(e){this.isStopped?ry(QD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ry(YD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YF=Function.prototype.bind;function iy(t,e){return YF.call(t,e)}var oy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Tp(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Tp(i)}else Tp(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Tp(n)}}},_o=class extends va{constructor(e,n,i){super();let r;if(we(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&nr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&iy(e.next,o),error:e.error&&iy(e.error,o),complete:e.complete&&iy(e.complete,o)}):r=e}this.destination=new oy(r)}};function Tp(t){nr.useDeprecatedSynchronousErrorHandling?JD(t):Dp(t)}function QF(t){throw t}function ry(t,e){let{onStoppedNotification:n}=nr;n&&tl.setTimeout(()=>n(t,e))}var XF={closed:!0,next:Md,error:QF,complete:Md};var il=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Hn(t){return t}function sy(...t){return ay(t)}function ay(t){return t.length===0?Hn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var De=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=eL(n)?n:new _o(n,i,r);return nl(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=eT(i),new i((r,o)=>{let s=new _o({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[il](){return this}pipe(...n){return ay(n)(this)}toPromise(n){return n=eT(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function eT(t){var e;return(e=t??nr.Promise)!==null&&e!==void 0?e:Promise}function JF(t){return t&&we(t.next)&&we(t.error)&&we(t.complete)}function eL(t){return t&&t instanceof va||JF(t)&&xp(t)}function cy(t){return we(t?.lift)}function Ae(t){return e=>{if(cy(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(t,e,n,i,r){return new Pd(t,e,n,i,r)}var Pd=class extends va{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function rl(){return Ae((t,e)=>{let n=null;t._refCount++;let i=Ne(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var ol=class extends De{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,cy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ot;let n=this.getSubject();e.add(this.source.subscribe(Ne(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ot.EMPTY)}return e}refCount(){return rl()(this)}};var tT=el(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Me=(()=>{class t extends De{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new Sp(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new tT}next(n){nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?ty:(this.currentObservers=null,o.push(n),new Ot(()=>{this.currentObservers=null,ga(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new De;return n.source=this,n}}return t.create=(e,n)=>new Sp(e,n),t})(),Sp=class extends Me{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:ty}};var pn=class extends Me{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Rd={now(){return(Rd.delegate||Date).now()},delegate:void 0};var Ap=class extends Me{constructor(e=1/0,n=1/0,i=Rd){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;n||(i.push(e),!r&&i.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!e.closed;s+=i?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let s=n.now(),c=0;for(let u=1;u<i.length&&i[u]<=s;u+=2)c=u;c&&i.splice(0,c+1)}}};var Mp=class extends Ot{constructor(e,n){super()}schedule(e,n=0){return this}};var kd={setInterval(t,e,...n){let{delegate:i}=kd;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=kd;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var sl=class extends Mp{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return kd.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&kd.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ga(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var al=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};al.now=Rd.now;var cl=class extends al{constructor(e,n=al.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var Pr=new cl(sl),ly=Pr;var Pp=class extends sl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var Rp=class extends cl{};var uy=new Rp(Pp);var qn=new De(t=>t.complete());function kp(t){return t&&we(t.schedule)}function dy(t){return t[t.length-1]}function nT(t){return we(dy(t))?t.pop():void 0}function Rr(t){return kp(dy(t))?t.pop():void 0}function iT(t,e){return typeof dy(t)=="number"?t.pop():e}var ll=t=>t&&typeof t.length=="number"&&typeof t!="function";function Np(t){return we(t?.then)}function Op(t){return we(t[il])}function Fp(t){return Symbol.asyncIterator&&we(t?.[Symbol.asyncIterator])}function Lp(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function tL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vp=tL();function Bp(t){return we(t?.[Vp])}function jp(t){return ND(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield yp(n.read());if(r)return yield yp(void 0);yield yield yp(i)}}finally{n.releaseLock()}})}function Up(t){return we(t?.getReader)}function Ct(t){if(t instanceof De)return t;if(t!=null){if(Op(t))return nL(t);if(ll(t))return iL(t);if(Np(t))return rL(t);if(Fp(t))return rT(t);if(Bp(t))return oL(t);if(Up(t))return sL(t)}throw Lp(t)}function nL(t){return new De(e=>{let n=t[il]();if(we(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iL(t){return new De(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function rL(t){return new De(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Dp)})}function oL(t){return new De(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function rT(t){return new De(e=>{aL(t,e).catch(n=>e.error(n))})}function sL(t){return rT(jp(t))}function aL(t,e){var n,i,r,o;return kD(this,void 0,void 0,function*(){try{for(n=OD(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function ti(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function _i(t,e=0){return Ae((n,i)=>{n.subscribe(Ne(i,r=>ti(i,t,()=>i.next(r),e),()=>ti(i,t,()=>i.complete(),e),r=>ti(i,t,()=>i.error(r),e)))})}function Si(t,e=0){return Ae((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function oT(t,e){return Ct(t).pipe(Si(e),_i(e))}function sT(t,e){return Ct(t).pipe(Si(e),_i(e))}function aT(t,e){return new De(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function cT(t,e){return new De(n=>{let i;return ti(n,e,()=>{i=t[Vp](),ti(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>we(i?.return)&&i.return()})}function zp(t,e){if(!t)throw new Error("Iterable cannot be null");return new De(n=>{ti(n,e,()=>{let i=t[Symbol.asyncIterator]();ti(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function lT(t,e){return zp(jp(t),e)}function uT(t,e){if(t!=null){if(Op(t))return oT(t,e);if(ll(t))return aT(t,e);if(Np(t))return sT(t,e);if(Fp(t))return zp(t,e);if(Bp(t))return cT(t,e);if(Up(t))return lT(t,e)}throw Lp(t)}function at(t,e){return e?uT(t,e):Ct(t)}function fe(...t){let e=Rr(t);return at(t,e)}function ul(t,e){let n=we(t)?t:()=>t,i=r=>r.error(n());return new De(e?r=>e.schedule(i,0,r):i)}function $p(t){return!!t&&(t instanceof De||we(t.lift)&&we(t.subscribe))}var vo=el(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function dT(t){return t instanceof Date&&!isNaN(t)}function ye(t,e){return Ae((n,i)=>{let r=0;n.subscribe(Ne(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:cL}=Array;function lL(t,e){return cL(e)?t(...e):t(e)}function Hp(t){return ye(e=>lL(t,e))}var{isArray:uL}=Array,{getPrototypeOf:dL,prototype:hL,keys:fL}=Object;function hT(t){if(t.length===1){let e=t[0];if(uL(e))return{args:e,keys:null};if(pL(e)){let n=fL(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function pL(t){return t&&typeof t=="object"&&dL(t)===hL}function fT(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function ya(...t){let e=Rr(t),n=nT(t),{args:i,keys:r}=hT(t);if(i.length===0)return at([],e);let o=new De(mL(i,e,r?s=>fT(r,s):Hn));return n?o.pipe(Hp(n)):o}function mL(t,e,n=Hn){return i=>{pT(e,()=>{let{length:r}=t,o=new Array(r),s=r,c=r;for(let u=0;u<r;u++)pT(e,()=>{let f=at(t[u],e),p=!1;f.subscribe(Ne(i,_=>{o[u]=_,p||(p=!0,c--),c||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function pT(t,e,n){t?ti(n,t,e):e()}function mT(t,e,n,i,r,o,s,c){let u=[],f=0,p=0,_=!1,b=()=>{_&&!u.length&&!f&&e.complete()},I=P=>f<i?S(P):u.push(P),S=P=>{o&&e.next(P),f++;let O=!1;Ct(n(P,p++)).subscribe(Ne(e,W=>{r?.(W),o?I(W):e.next(W)},()=>{O=!0},void 0,()=>{if(O)try{for(f--;u.length&&f<i;){let W=u.shift();s?ti(e,s,()=>S(W)):S(W)}b()}catch(W){e.error(W)}}))};return t.subscribe(Ne(e,I,()=>{_=!0,b()})),()=>{c?.()}}function Ht(t,e,n=1/0){return we(e)?Ht((i,r)=>ye((o,s)=>e(i,o,r,s))(Ct(t(i,r))),n):(typeof e=="number"&&(n=e),Ae((i,r)=>mT(i,r,t,n)))}function os(t=1/0){return Ht(Hn,t)}function gT(){return os(1)}function ss(...t){return gT()(at(t,Rr(t)))}function qp(t){return new De(e=>{Ct(t()).subscribe(e)})}var gL=["addListener","removeListener"],_L=["addEventListener","removeEventListener"],vL=["on","off"];function Nd(t,e,n,i){if(we(n)&&(i=n,n=void 0),i)return Nd(t,e,n).pipe(Hp(i));let[r,o]=wL(t)?_L.map(s=>c=>t[s](e,c,n)):yL(t)?gL.map(_T(t,e)):bL(t)?vL.map(_T(t,e)):[];if(!r&&ll(t))return Ht(s=>Nd(s,e,n))(Ct(t));if(!r)throw new TypeError("Invalid event target");return new De(s=>{let c=(...u)=>s.next(1<u.length?u:u[0]);return r(c),()=>o(c)})}function _T(t,e){return n=>i=>t[n](e,i)}function yL(t){return we(t.addListener)&&we(t.removeListener)}function bL(t){return we(t.on)&&we(t.off)}function wL(t){return we(t.addEventListener)&&we(t.removeEventListener)}function hy(t=0,e,n=ly){let i=-1;return e!=null&&(kp(e)?n=e:i=e),new De(r=>{let o=dT(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Od(...t){let e=Rr(t),n=iT(t,1/0),i=t;return i.length?i.length===1?Ct(i[0]):os(n)(at(i,e)):qn}function St(t,e){return Ae((n,i)=>{let r=0;n.subscribe(Ne(i,o=>t.call(e,o,r++)&&i.next(o)))})}function vT(t){return Ae((e,n)=>{let i=!1,r=null,o=null,s=!1,c=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let f=r;r=null,n.next(f)}s&&n.complete()},u=()=>{o=null,s&&n.complete()};e.subscribe(Ne(n,f=>{i=!0,r=f,o||Ct(t(f)).subscribe(o=Ne(n,c,u))},()=>{s=!0,(!i||!o||o.closed)&&n.complete()}))})}function Gp(t,e=Pr){return vT(()=>hy(t,e))}function as(t){return Ae((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Ne(n,void 0,void 0,s=>{o=Ct(t(s,as(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function yT(t,e,n,i,r){return(o,s)=>{let c=n,u=e,f=0;o.subscribe(Ne(s,p=>{let _=f++;u=c?t(u,p,_):(c=!0,p),i&&s.next(u)},r&&(()=>{c&&s.next(u),s.complete()})))}}function cs(t,e){return we(e)?Ht(t,e,1):Ht(t,1)}function Wp(t,e=Pr){return Ae((n,i)=>{let r=null,o=null,s=null,c=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=s+t,p=e.now();if(p<f){r=this.schedule(void 0,f-p),i.add(r);return}c()}n.subscribe(Ne(i,f=>{o=f,s=e.now(),r||(r=e.schedule(u,t),i.add(r))},()=>{c(),i.complete()},void 0,()=>{o=r=null}))})}function ls(t){return Ae((e,n)=>{let i=!1;e.subscribe(Ne(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function Gn(t){return t<=0?()=>qn:Ae((e,n)=>{let i=0;e.subscribe(Ne(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function fy(t){return ye(()=>t)}function us(t,e=Hn){return t=t??IL,Ae((n,i)=>{let r,o=!0;n.subscribe(Ne(i,s=>{let c=e(s);(o||!t(r,c))&&(o=!1,r=c,i.next(s))}))})}function IL(t,e){return t===e}function Zp(t=CL){return Ae((e,n)=>{let i=!1;e.subscribe(Ne(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function CL(){return new vo}function Fd(t){return Ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ai(t,e){let n=arguments.length>=2;return i=>i.pipe(t?St((r,o)=>t(r,o,i)):Hn,Gn(1),n?ls(e):Zp(()=>new vo))}function py(t,e,n,i){return Ae((r,o)=>{let s;!e||typeof e=="function"?s=e:{duration:n,element:s,connector:i}=e;let c=new Map,u=S=>{c.forEach(S),S(o)},f=S=>u(P=>P.error(S)),p=0,_=!1,b=new Pd(o,S=>{try{let P=t(S),O=c.get(P);if(!O){c.set(P,O=i?i():new Me);let W=I(P,O);if(o.next(W),n){let X=Ne(O,()=>{O.complete(),X?.unsubscribe()},void 0,void 0,()=>c.delete(P));b.add(Ct(n(W)).subscribe(X))}}O.next(s?s(S):S)}catch(P){f(P)}},()=>u(S=>S.complete()),f,()=>c.clear(),()=>(_=!0,p===0));r.subscribe(b);function I(S,P){let O=new De(W=>{p++;let X=P.subscribe(W);return()=>{X.unsubscribe(),--p===0&&_&&b.unsubscribe()}});return O.key=S,O}})}function dl(t){return t<=0?()=>qn:Ae((e,n)=>{let i=[];e.subscribe(Ne(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function my(t,e){let n=arguments.length>=2;return i=>i.pipe(t?St((r,o)=>t(r,o,i)):Hn,dl(1),n?ls(e):Zp(()=>new vo))}function ds(){return Ae((t,e)=>{let n,i=!1;t.subscribe(Ne(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function ba(t,e){return Ae(yT(t,e,arguments.length>=2,!0))}function bT(t={}){let{connector:e=()=>new Me,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let s,c,u,f=0,p=!1,_=!1,b=()=>{c?.unsubscribe(),c=void 0},I=()=>{b(),s=u=void 0,p=_=!1},S=()=>{let P=s;I(),P?.unsubscribe()};return Ae((P,O)=>{f++,!_&&!p&&b();let W=u=u??e();O.add(()=>{f--,f===0&&!_&&!p&&(c=gy(S,r))}),W.subscribe(O),!s&&f>0&&(s=new _o({next:X=>W.next(X),error:X=>{_=!0,b(),c=gy(I,n,X),W.error(X)},complete:()=>{p=!0,b(),c=gy(I,i),W.complete()}}),Ct(P).subscribe(s))})(o)}}function gy(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new _o({next:()=>{i.unsubscribe(),t()}});return Ct(e(...n)).subscribe(i)}function Ld(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,bT({connector:()=>new Ap(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function Vd(t){return St((e,n)=>t<=n)}function Mi(...t){let e=Rr(t);return Ae((n,i)=>{(e?ss(t,n,e):ss(t,n)).subscribe(i)})}function ct(t,e){return Ae((n,i)=>{let r=null,o=0,s=!1,c=()=>s&&!r&&i.complete();n.subscribe(Ne(i,u=>{r?.unsubscribe();let f=0,p=o++;Ct(t(u,p)).subscribe(r=Ne(i,_=>i.next(e?e(u,_,p,f++):_),()=>{r=null,c()}))},()=>{s=!0,c()}))})}function Kp(t,e){return we(e)?ct(()=>t,e):ct(()=>t)}function Pi(t){return Ae((e,n)=>{Ct(t).subscribe(Ne(n,()=>n.complete(),Md)),!n.closed&&e.subscribe(n)})}function an(t,e,n){let i=we(t)||e||n?{next:t,error:e,complete:n}:t;return i?Ae((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let c=!0;r.subscribe(Ne(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;c=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;c=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;c&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Hn}var eS="https://g.co/ng/security#xss",Te=class extends Error{constructor(e,n){super(Cb(e,n)),this.code=e}};function Cb(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function eh(t){return{toString:t}.toString()}var Yp="__parameters__";function EL(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function tS(t,e,n){return eh(()=>{let i=EL(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return c.annotation=s,c;function c(u,f,p){let _=u.hasOwnProperty(Yp)?u[Yp]:Object.defineProperty(u,Yp,{value:[]})[Yp];for(;_.length<=p;)_.push(null);return(_[p]=_[p]||[]).push(s),u}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var yo=globalThis;function At(t){for(let e in t)if(t[e]===At)return e;throw Error("Could not find renamed property on target object.")}function xL(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Wn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Wn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Ry(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var DL=At({__forward_ref__:At});function nS(t){return t.__forward_ref__=nS,t.toString=function(){return Wn(this())},t}function Ri(t){return iS(t)?t():t}function iS(t){return typeof t=="function"&&t.hasOwnProperty(DL)&&t.__forward_ref__===nS}function ne(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function lt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Sm(t){return wT(t,oS)||wT(t,sS)}function rS(t){return Sm(t)!==null}function wT(t,e){return t.hasOwnProperty(e)?t[e]:null}function TL(t){let e=t&&(t[oS]||t[sS]);return e||null}function IT(t){return t&&(t.hasOwnProperty(CT)||t.hasOwnProperty(SL))?t[CT]:null}var oS=At({\u0275prov:At}),CT=At({\u0275inj:At}),sS=At({ngInjectableDef:At}),SL=At({ngInjectorDef:At}),re=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ne({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function aS(t){return t&&!!t.\u0275providers}var AL=At({\u0275cmp:At}),ML=At({\u0275dir:At}),PL=At({\u0275pipe:At}),RL=At({\u0275mod:At}),om=At({\u0275fac:At}),Bd=At({__NG_ELEMENT_ID__:At}),ET=At({__NG_ENV_ID__:At});function _l(t){return typeof t=="string"?t:t==null?"":String(t)}function kL(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():_l(t)}function NL(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Te(-200,t)}function Eb(t,e){throw new Te(-201,!1)}var Ze=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ze||{}),ky;function cS(){return ky}function ni(t){let e=ky;return ky=t,e}function lS(t,e,n){let i=Sm(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&Ze.Optional)return null;if(e!==void 0)return e;Eb(t,"Injector")}var OL={},jd=OL,Ny="__NG_DI_FLAG__",sm="ngTempTokenPath",FL="ngTokenPath",LL=/\n/gm,VL="\u0275",xT="__source",ml;function BL(){return ml}function hs(t){let e=ml;return ml=t,e}function jL(t,e=Ze.Default){if(ml===void 0)throw new Te(-203,!1);return ml===null?lS(t,void 0,e):ml.get(t,e&Ze.Optional?null:void 0,e)}function V(t,e=Ze.Default){return(cS()||jL)(Ri(t),e)}function ee(t,e=Ze.Default){return V(t,Am(e))}function Am(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Oy(t){let e=[];for(let n=0;n<t.length;n++){let i=Ri(t[n]);if(Array.isArray(i)){if(i.length===0)throw new Te(900,!1);let r,o=Ze.Default;for(let s=0;s<i.length;s++){let c=i[s],u=UL(c);typeof u=="number"?u===-1?r=c.token:o|=u:r=c}e.push(V(r,o))}else e.push(V(i))}return e}function uS(t,e){return t[Ny]=e,t.prototype[Ny]=e,t}function UL(t){return t[Ny]}function zL(t,e,n,i){let r=t[sm];throw e[xT]&&r.unshift(e[xT]),t.message=$L(`
`+t.message,r,n,i),t[FL]=r,t[sm]=null,t}function $L(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==VL?t.slice(2):t;let r=Wn(e);if(Array.isArray(e))r=e.map(Wn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let c=e[s];o.push(s+":"+(typeof c=="string"?JSON.stringify(c):Wn(c)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(LL,`
  `)}`}var mn=uS(tS("Optional"),8);var dS=uS(tS("SkipSelf"),4);function xa(t,e){let n=t.hasOwnProperty(om);return n?t[om]:null}function HL(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function qL(t){return t.flat(Number.POSITIVE_INFINITY)}function xb(t,e){t.forEach(n=>Array.isArray(n)?xb(n,e):e(n))}function hS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function am(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function GL(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function WL(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function Db(t,e,n){let i=th(t,e);return i>=0?t[i|1]=n:(i=~i,WL(t,i,e,n)),i}function _y(t,e){let n=th(t,e);if(n>=0)return t[n|1]}function th(t,e){return ZL(t,e,1)}function ZL(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var vl={},ii=[],yl=new re(""),fS=new re("",-1),pS=new re(""),cm=class{get(e,n=jd){if(n===jd){let i=new Error(`NullInjectorError: No provider for ${Wn(e)}!`);throw i.name="NullInjectorError",i}return n}},mS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(mS||{}),Or=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Or||{}),gt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(gt||{});function KL(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Fy(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],c=n[i++];t.setAttribute(e,s,c,o)}else{let o=r,s=n[++i];QL(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function YL(t){return t===3||t===4||t===6}function QL(t){return t.charCodeAt(0)===64}function Ud(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?DT(t,n,r,null,e[++i]):DT(t,n,r,null,null))}}return t}function DT(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var gS="ng-template";function XL(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&KL(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(Tb(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Tb(t){return t.type===4&&t.value!==gS}function JL(t,e,n){let i=t.type===4&&!n?gS:t.value;return e===i}function e2(t,e,n){let i=4,r=t.attrs,o=r!==null?i2(r):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!ir(i)&&!ir(u))return!1;if(s&&ir(u))continue;s=!1,i=u|i&1;continue}if(!s)if(i&4){if(i=2|i&1,u!==""&&!JL(t,u,n)||u===""&&e.length===1){if(ir(i))return!1;s=!0}}else if(i&8){if(r===null||!XL(t,r,u,n)){if(ir(i))return!1;s=!0}}else{let f=e[++c],p=t2(u,r,Tb(t),n);if(p===-1){if(ir(i))return!1;s=!0;continue}if(f!==""){let _;if(p>o?_="":_=r[p+1].toLowerCase(),i&2&&f!==_){if(ir(i))return!1;s=!0}}}}return ir(i)||s}function ir(t){return(t&1)===0}function t2(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++r];for(;typeof c=="string";)c=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return r2(e,t)}function _S(t,e,n=!1){for(let i=0;i<e.length;i++)if(e2(t,e[i],n))return!0;return!1}function n2(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function i2(t){for(let e=0;e<t.length;e++){let n=t[e];if(YL(n))return e}return t.length}function r2(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function o2(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function TT(t,e){return t?":not("+e.trim()+")":e}function s2(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let c=t[++n];r+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!ir(s)&&(e+=TT(o,r),r=""),i=s,o=o||!ir(i);n++}return r!==""&&(e+=TT(o,r)),e}function a2(t){return t.map(s2).join(",")}function c2(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!ir(r))break;r=o}i++}return{attrs:e,classes:n}}function it(t){return eh(()=>{let e=IS(t),n=It(te({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===mS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Or.Emulated,styles:t.styles||ii,_:null,schemas:t.schemas||null,tView:null,id:""});CS(n);let i=t.dependencies;return n.directiveDefs=AT(i,!1),n.pipeDefs=AT(i,!0),n.id=d2(n),n})}function l2(t){return ps(t)||vS(t)}function u2(t){return t!==null}function ut(t){return eh(()=>({type:t.type,bootstrap:t.bootstrap||ii,declarations:t.declarations||ii,imports:t.imports||ii,exports:t.exports||ii,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function ST(t,e){if(t==null)return vl;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,c=gt.None;Array.isArray(r)?(c=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=c!==gt.None?[i,c]:i,e[o]=s):n[o]=i}return n}function jt(t){return eh(()=>{let e=IS(t);return CS(e),e})}function Vr(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ps(t){return t[AL]||null}function vS(t){return t[ML]||null}function yS(t){return t[PL]||null}function bS(t){let e=ps(t)||vS(t)||yS(t);return e!==null?e.standalone:!1}function wS(t,e){let n=t[RL]||null;if(!n&&e===!0)throw new Error(`Type ${Wn(t)} does not have '\u0275mod' property.`);return n}function IS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vl,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||ii,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ST(t.inputs,e),outputs:ST(t.outputs),debugInfo:null}}function CS(t){t.features?.forEach(e=>e(t))}function AT(t,e){if(!t)return null;let n=e?yS:l2;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(u2)}function d2(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Fi(t){return{\u0275providers:t}}function h2(...t){return{\u0275providers:ES(!0,t),\u0275fromNgModule:!0}}function ES(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return xb(e,s=>{let c=s;Ly(c,o,[],i)&&(r||=[],r.push(c))}),r!==void 0&&xS(r,o),n}function xS(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Sb(r,o=>{e(o,i)})}}function Ly(t,e,n,i){if(t=Ri(t),!t)return!1;let r=null,o=IT(t),s=!o&&ps(t);if(!o&&!s){let u=t.ngModule;if(o=IT(u),o)r=u;else return!1}else{if(s&&!s.standalone)return!1;r=t}let c=i.has(r);if(s){if(c)return!1;if(i.add(r),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let f of u)Ly(f,e,n,i)}}else if(o){if(o.imports!=null&&!c){i.add(r);let f;try{xb(o.imports,p=>{Ly(p,e,n,i)&&(f||=[],f.push(p))})}finally{}f!==void 0&&xS(f,e)}if(!c){let f=xa(r)||(()=>new r);e({provide:r,useFactory:f,deps:ii},r),e({provide:pS,useValue:r,multi:!0},r),e({provide:yl,useValue:()=>V(r),multi:!0},r)}let u=o.providers;if(u!=null&&!c){let f=t;Sb(u,p=>{e(p,f)})}}else return!1;return r!==t&&t.providers!==void 0}function Sb(t,e){for(let n of t)aS(n)&&(n=n.\u0275providers),Array.isArray(n)?Sb(n,e):e(n)}var f2=At({provide:String,useValue:At});function DS(t){return t!==null&&typeof t=="object"&&f2 in t}function p2(t){return!!(t&&t.useExisting)}function m2(t){return!!(t&&t.useFactory)}function Vy(t){return typeof t=="function"}var Mm=new re(""),Jp={},g2={},vy;function Ab(){return vy===void 0&&(vy=new cm),vy}var Ln=class{},zd=class extends Ln{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,jy(e,s=>this.processProvider(s)),this.records.set(fS,hl(void 0,this)),r.has("environment")&&this.records.set(Ln,hl(void 0,this));let o=this.records.get(Mm);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(pS,ii,Ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ye(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=hs(this),i=ni(void 0),r;try{return e()}finally{hs(n),ni(i)}}get(e,n=jd,i=Ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ET))return e[ET](this);i=Am(i);let r,o=hs(this),s=ni(void 0);try{if(!(i&Ze.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=I2(e)&&Sm(e);f&&this.injectableDefInScope(f)?u=hl(By(e),Jp):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=i&Ze.Self?Ab():this.parent;return n=i&Ze.Optional&&n===jd?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[sm]=c[sm]||[]).unshift(Wn(e)),o)throw c;return zL(c,e,"R3InjectorError",this.source)}else throw c}finally{ni(s),hs(o)}}resolveInjectorInitializers(){let e=Ye(null),n=hs(this),i=ni(void 0),r;try{let o=this.get(yl,ii,Ze.Self);for(let s of o)s()}finally{hs(n),ni(i),Ye(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Wn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(e){e=Ri(e);let n=Vy(e)?e:Ri(e&&e.provide),i=v2(e);if(!Vy(e)&&e.multi===!0){let r=this.records.get(n);r||(r=hl(void 0,Jp,!0),r.factory=()=>Oy(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Ye(null);try{return n.value===Jp&&(n.value=g2,n.value=n.factory()),typeof n.value=="object"&&n.value&&w2(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ye(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ri(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function By(t){let e=Sm(t),n=e!==null?e.factory:xa(t);if(n!==null)return n;if(t instanceof re)throw new Te(204,!1);if(t instanceof Function)return _2(t);throw new Te(204,!1)}function _2(t){if(t.length>0)throw new Te(204,!1);let n=TL(t);return n!==null?()=>n.factory(t):()=>new t}function v2(t){if(DS(t))return hl(void 0,t.useValue);{let e=y2(t);return hl(e,Jp)}}function y2(t,e,n){let i;if(Vy(t)){let r=Ri(t);return xa(r)||By(r)}else if(DS(t))i=()=>Ri(t.useValue);else if(m2(t))i=()=>t.useFactory(...Oy(t.deps||[]));else if(p2(t))i=()=>V(Ri(t.useExisting));else{let r=Ri(t&&(t.useClass||t.provide));if(b2(t))i=()=>new r(...Oy(t.deps));else return xa(r)||By(r)}return i}function hl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function b2(t){return!!t.deps}function w2(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function I2(t){return typeof t=="function"||typeof t=="object"&&t instanceof re}function jy(t,e){for(let n of t)Array.isArray(n)?jy(n,e):n&&aS(n)?jy(n.\u0275providers,e):e(n)}function Br(t,e){t instanceof zd&&t.assertNotDestroyed();let n,i=hs(t),r=ni(void 0);try{return e()}finally{hs(i),ni(r)}}function TS(){return cS()!==void 0||BL()!=null}function SS(t){if(!TS())throw new Te(-203,!1)}function C2(t){return typeof t=="function"}var jr=0,Le=1,Se=2,Sn=3,or=4,vi=5,bl=6,$d=7,On=8,wl=9,sr=10,Jt=11,Hd=12,MT=13,Tl=14,ki=15,nh=16,fl=17,bo=18,Pm=19,AS=20,fs=21,yy=22,Da=23,An=25,Mb=1;var Ta=7,lm=8,Il=9,Fn=10,Pb=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pb||{});function Ca(t){return Array.isArray(t)&&typeof t[Mb]=="object"}function Co(t){return Array.isArray(t)&&t[Mb]===!0}function Rb(t){return(t.flags&4)!==0}function Rm(t){return t.componentOffset>-1}function km(t){return(t.flags&1)===1}function ms(t){return!!t.template}function E2(t){return(t[Se]&512)!==0}var Uy=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function MS(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function ar(){return PS}function PS(t){return t.type.prototype.ngOnChanges&&(t.setInput=D2),x2}ar.ngInherit=!0;function x2(){let t=kS(this),e=t?.current;if(e){let n=t.previous;if(n===vl)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function D2(t,e,n,i,r){let o=this.declaredInputs[i],s=kS(t)||T2(t,{previous:vl,current:null}),c=s.current||(s.current={}),u=s.previous,f=u[o];c[o]=new Uy(f&&f.currentValue,n,u===vl),MS(t,e,r,n)}var RS="__ngSimpleChanges__";function kS(t){return t[RS]||null}function T2(t,e){return t[RS]=e}var PT=null;var kr=function(t,e,n){PT?.(t,e,n)},S2="svg",A2="math",M2=!1;function P2(){return M2}function Fr(t){for(;Array.isArray(t);)t=t[jr];return t}function R2(t){for(;Array.isArray(t);){if(typeof t[Mb]=="object")return t;t=t[jr]}return null}function NS(t,e){return Fr(e[t])}function Li(t,e){return Fr(e[t.index])}function kb(t,e){return t.data[e]}function Nb(t,e){return t[e]}function vs(t,e){let n=e[t];return Ca(n)?n:n[jr]}function k2(t){return(t[Se]&4)===4}function Ob(t){return(t[Se]&128)===128}function N2(t){return Co(t[Sn])}function Cl(t,e){return e==null?null:t[e]}function OS(t){t[fl]=0}function O2(t){t[Se]&1024||(t[Se]|=1024,Ob(t)&&qd(t))}function F2(t,e){for(;t>0;)e=e[Tl],t--;return e}function Fb(t){return!!(t[Se]&9216||t[Da]?.dirty)}function zy(t){t[sr].changeDetectionScheduler?.notify(1),Fb(t)?qd(t):t[Se]&64&&(P2()?(t[Se]|=1024,qd(t)):t[sr].changeDetectionScheduler?.notify())}function qd(t){t[sr].changeDetectionScheduler?.notify();let e=Gd(t);for(;e!==null&&!(e[Se]&8192||(e[Se]|=8192,!Ob(e)));)e=Gd(e)}function FS(t,e){if((t[Se]&256)===256)throw new Te(911,!1);t[fs]===null&&(t[fs]=[]),t[fs].push(e)}function L2(t,e){if(t[fs]===null)return;let n=t[fs].indexOf(e);n!==-1&&t[fs].splice(n,1)}function Gd(t){let e=t[Sn];return Co(e)?e[Sn]:e}var ze={lFrame:HS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function V2(){return ze.lFrame.elementDepthCount}function B2(){ze.lFrame.elementDepthCount++}function j2(){ze.lFrame.elementDepthCount--}function LS(){return ze.bindingsEnabled}function VS(){return ze.skipHydrationRootTNode!==null}function U2(t){return ze.skipHydrationRootTNode===t}function z2(){ze.skipHydrationRootTNode=null}function qe(){return ze.lFrame.lView}function gn(){return ze.lFrame.tView}function ft(t){return ze.lFrame.contextLView=t,t[On]}function pt(t){return ze.lFrame.contextLView=null,t}function ri(){let t=BS();for(;t!==null&&t.type===64;)t=t.parent;return t}function BS(){return ze.lFrame.currentTNode}function $2(){let t=ze.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Pa(t,e){let n=ze.lFrame;n.currentTNode=t,n.isParent=e}function Lb(){return ze.lFrame.isParent}function Vb(){ze.lFrame.isParent=!1}function H2(){return ze.lFrame.contextLView}function jS(){let t=ze.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function q2(){return ze.lFrame.bindingIndex}function G2(t){return ze.lFrame.bindingIndex=t}function Sl(){return ze.lFrame.bindingIndex++}function Bb(t){let e=ze.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function W2(){return ze.lFrame.inI18n}function Z2(t,e){let n=ze.lFrame;n.bindingIndex=n.bindingRootIndex=t,$y(e)}function K2(){return ze.lFrame.currentDirectiveIndex}function $y(t){ze.lFrame.currentDirectiveIndex=t}function jb(t){let e=ze.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function US(){return ze.lFrame.currentQueryIndex}function Ub(t){ze.lFrame.currentQueryIndex=t}function Y2(t){let e=t[Le];return e.type===2?e.declTNode:e.type===1?t[vi]:null}function zS(t,e,n){if(n&Ze.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&Ze.Host);)if(r=Y2(o),r===null||(o=o[Tl],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=ze.lFrame=$S();return i.currentTNode=e,i.lView=t,!0}function zb(t){let e=$S(),n=t[Le];ze.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function $S(){let t=ze.lFrame,e=t===null?null:t.child;return e===null?HS(t):e}function HS(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function qS(){let t=ze.lFrame;return ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var GS=qS;function $b(){let t=qS();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Q2(t){return(ze.lFrame.contextLView=F2(t,ze.lFrame.contextLView))[On]}function Eo(){return ze.lFrame.selectedIndex}function Sa(t){ze.lFrame.selectedIndex=t}function Hb(){let t=ze.lFrame;return kb(t.tView,t.selectedIndex)}function X2(){return ze.lFrame.currentNamespace}var WS=!0;function Nm(){return WS}function Om(t){WS=t}function J2(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=PS(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Fm(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:p}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),f&&((t.viewHooks??=[]).push(n,f),(t.viewCheckHooks??=[]).push(n,f)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function em(t,e,n){ZS(t,e,3,n)}function tm(t,e,n,i){(t[Se]&3)===n&&ZS(t,e,n,i)}function by(t,e){let n=t[Se];(n&3)===e&&(n&=16383,n+=1,t[Se]=n)}function ZS(t,e,n,i){let r=i!==void 0?t[fl]&65535:0,o=i??-1,s=e.length-1,c=0;for(let u=r;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],i!=null&&c>=i)break}else e[u]<0&&(t[fl]+=65536),(c<o||o==-1)&&(eV(t,n,e,u),t[fl]=(t[fl]&4294901760)+u+2),u++}function RT(t,e){kr(4,t,e);let n=Ye(null);try{e.call(t)}finally{Ye(n),kr(5,t,e)}}function eV(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],c=t[s];r?t[Se]>>14<t[fl]>>16&&(t[Se]&3)===e&&(t[Se]+=16384,RT(c,o)):RT(c,o)}var gl=-1,Wd=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function tV(t){return t instanceof Wd}function nV(t){return(t.flags&8)!==0}function iV(t){return(t.flags&16)!==0}function KS(t){return t!==gl}function um(t){return t&32767}function rV(t){return t>>16}function dm(t,e){let n=rV(t),i=e;for(;n>0;)i=i[Tl],n--;return i}var Hy=!0;function hm(t){let e=Hy;return Hy=t,e}var oV=256,YS=oV-1,QS=5,sV=0,Nr={};function aV(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Bd)&&(i=n[Bd]),i==null&&(i=n[Bd]=sV++);let r=i&YS,o=1<<r;e.data[t+(r>>QS)]|=o}function XS(t,e){let n=JS(t,e);if(n!==-1)return n;let i=e[Le];i.firstCreatePass&&(t.injectorIndex=e.length,wy(i.data,t),wy(e,null),wy(i.blueprint,null));let r=qb(t,e),o=t.injectorIndex;if(KS(r)){let s=um(r),c=dm(r,e),u=c[Le].data;for(let f=0;f<8;f++)e[o+f]=c[s+f]|u[s+f]}return e[o+8]=r,o}function wy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function JS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function qb(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=rA(r),i===null)return gl;if(n++,r=r[Tl],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return gl}function cV(t,e,n){aV(t,e,n)}function eA(t,e,n){if(n&Ze.Optional||t!==void 0)return t;Eb(e,"NodeInjector")}function tA(t,e,n,i){if(n&Ze.Optional&&i===void 0&&(i=null),!(n&(Ze.Self|Ze.Host))){let r=t[wl],o=ni(void 0);try{return r?r.get(e,i,n&Ze.Optional):lS(e,i,n&Ze.Optional)}finally{ni(o)}}return eA(i,e,n)}function nA(t,e,n,i=Ze.Default,r){if(t!==null){if(e[Se]&2048&&!(i&Ze.Self)){let s=hV(t,e,n,i,Nr);if(s!==Nr)return s}let o=iA(t,e,n,i,Nr);if(o!==Nr)return o}return tA(e,n,i,r)}function iA(t,e,n,i,r){let o=uV(n);if(typeof o=="function"){if(!zS(e,t,i))return i&Ze.Host?eA(r,n,i):tA(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&Ze.Optional))Eb(n);else return s}finally{GS()}}else if(typeof o=="number"){let s=null,c=JS(t,e),u=gl,f=i&Ze.Host?e[ki][vi]:null;for((c===-1||i&Ze.SkipSelf)&&(u=c===-1?qb(t,e):e[c+8],u===gl||!NT(i,!1)?c=-1:(s=e[Le],c=um(u),e=dm(u,e)));c!==-1;){let p=e[Le];if(kT(o,c,p.data)){let _=lV(c,e,n,s,i,f);if(_!==Nr)return _}u=e[c+8],u!==gl&&NT(i,e[Le].data[c+8]===f)&&kT(o,c,e)?(s=p,c=um(u),e=dm(u,e)):c=-1}}return r}function lV(t,e,n,i,r,o){let s=e[Le],c=s.data[t+8],u=i==null?Rm(c)&&Hy:i!=s&&(c.type&3)!==0,f=r&Ze.Host&&o===c,p=nm(c,s,n,u,f);return p!==null?El(e,s,p,c):Nr}function nm(t,e,n,i,r){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,f=t.directiveEnd,p=o>>20,_=i?c:c+p,b=r?c+p:f;for(let I=_;I<b;I++){let S=s[I];if(I<u&&n===S||I>=u&&S.type===n)return I}if(r){let I=s[u];if(I&&ms(I)&&I.type===n)return u}return null}function El(t,e,n,i){let r=t[n],o=e.data;if(tV(r)){let s=r;s.resolving&&NL(kL(o[n]));let c=hm(s.canSeeViewProviders);s.resolving=!0;let u,f=s.injectImpl?ni(s.injectImpl):null,p=zS(t,i,Ze.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&J2(n,o[n],e)}finally{f!==null&&ni(f),hm(c),s.resolving=!1,GS()}}return r}function uV(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Bd)?t[Bd]:void 0;return typeof e=="number"?e>=0?e&YS:dV:e}function kT(t,e,n){let i=1<<t;return!!(n[e+(t>>QS)]&i)}function NT(t,e){return!(t&Ze.Self)&&!(t&Ze.Host&&e)}var Ea=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return nA(this._tNode,this._lView,e,Am(i),n)}};function dV(){return new Ea(ri(),qe())}function Lm(t){return eh(()=>{let e=t.prototype.constructor,n=e[om]||qy(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[om]||qy(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function qy(t){return iS(t)?()=>{let e=qy(Ri(t));return e&&e()}:xa(t)}function hV(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[Se]&2048&&!(s[Se]&512);){let c=iA(o,s,n,i|Ze.Self,Nr);if(c!==Nr)return c;let u=o.parent;if(!u){let f=s[AS];if(f){let p=f.get(n,Nr,i);if(p!==Nr)return p}u=rA(s),s=s[Tl]}o=u}return r}function rA(t){let e=t[Le],n=e.type;return n===2?e.declTNode:n===1?t[vi]:null}function OT(t,e=null,n=null,i){let r=oA(t,e,n,i);return r.resolveInjectorInitializers(),r}function oA(t,e=null,n=null,i,r=new Set){let o=[n||ii,h2(t)];return i=i||(typeof t=="object"?void 0:Wn(t)),new zd(o,e||Ab(),i||null,r)}var _t=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return OT({name:""},r,i,"");{let o=i.name??"";return OT({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=jd,e.NULL=new cm,e.\u0275prov=ne({token:e,providedIn:"any",factory:()=>V(fS)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var fV="ngOriginalError";function Iy(t){return t[fV]}var Lr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Iy(e);for(;n&&Iy(n);)n=Iy(n);return n||null}},sA=new re("",{providedIn:"root",factory:()=>ee(Lr).handleError.bind(void 0)}),Vm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=pV,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Gy=class extends Vm{constructor(e){super(),this._lView=e}onDestroy(e){return FS(this._lView,e),()=>L2(this._lView,e)}};function pV(){return new Gy(qe())}function mV(){return Al(ri(),qe())}function Al(t,e){return new Mt(Li(t,e))}var Mt=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=mV;let t=e;return t})();function gV(t){return t instanceof Mt?t.nativeElement:t}var Wy=class extends Me{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,TS()&&(this.destroyRef=ee(Vm,{optional:!0})??void 0)}emit(e){let n=Ye(null);try{super.next(e)}finally{Ye(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=Cy(o),r&&(r=Cy(r)),s&&(s=Cy(s)));let c=super.subscribe({next:r,error:o,complete:s});return e instanceof Ot&&e.add(c),c}};function Cy(t){return e=>{setTimeout(t,void 0,e)}}var Bt=Wy;function _V(){return this._results[Symbol.iterator]()}var fm=class t{get changes(){return this._changes??=new Bt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=_V)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=qL(e);(this._changesDetected=!HL(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function aA(t){return(t.flags&128)===128}var cA=new Map,vV=0;function yV(){return vV++}function bV(t){cA.set(t[Pm],t)}function wV(t){cA.delete(t[Pm])}var FT="__ngContext__";function gs(t,e){Ca(e)?(t[FT]=e[Pm],bV(e)):t[FT]=e}function lA(t){return dA(t[Hd])}function uA(t){return dA(t[or])}function dA(t){for(;t!==null&&!Co(t);)t=t[or];return t}var Zy;function hA(t){Zy=t}function IV(){if(Zy!==void 0)return Zy;if(typeof document<"u")return document;throw new Te(210,!1)}var Bm=new re("",{providedIn:"root",factory:()=>CV}),CV="ng",Gb=new re(""),Mn=new re("",{providedIn:"platform",factory:()=>"unknown"});var Ra=new re(""),ih=new re("",{providedIn:"root",factory:()=>IV().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var EV="h",xV="b";var DV=()=>null;function Wb(t,e,n=!1){return DV(t,e,n)}var fA=!1,TV=new re("",{providedIn:"root",factory:()=>fA});var pm=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${eS})`}};function rh(t){return t instanceof pm?t.changingThisBreaksApplicationSecurity:t}function pA(t,e){let n=SV(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${eS})`)}return n===e}function SV(t){return t instanceof pm&&t.getTypeName()||null}var AV=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function mA(t){return t=String(t),t.match(AV)?t:"unsafe:"+t}var Zb=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Zb||{});function en(t){let e=MV();return e?e.sanitize(Zb.URL,t)||"":pA(t,"URL")?rh(t):mA(_l(t))}function MV(){let t=qe();return t&&t[sr].sanitizer}var PV=/^>|^->|<!--|-->|--!>|<!-$/g,RV=/(<|>)/g,kV="\u200B$1\u200B";function NV(t){return t.replace(PV,e=>e.replace(RV,kV))}function gA(t){return t instanceof Function?t():t}function _A(t){return(t??ee(_t)).get(Mn)==="browser"}var wo=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(wo||{}),OV;function Kb(t,e){return OV(t,e)}function pl(t,e,n,i,r){if(i!=null){let o,s=!1;Co(i)?o=i:Ca(i)&&(s=!0,i=i[jr]);let c=Fr(i);t===0&&n!==null?r==null?IA(e,n,c):mm(e,n,c,r||null,!0):t===1&&n!==null?mm(e,n,c,r||null,!0):t===2?QV(e,c,s):t===3&&e.destroyNode(c),o!=null&&JV(e,t,o,n,r)}}function FV(t,e){return t.createText(e)}function LV(t,e,n){t.setValue(e,n)}function VV(t,e){return t.createComment(NV(e))}function vA(t,e,n){return t.createElement(e,n)}function BV(t,e){yA(t,e),e[jr]=null,e[vi]=null}function jV(t,e,n,i,r,o){i[jr]=r,i[vi]=e,zm(t,i,n,1,r,o)}function yA(t,e){e[sr].changeDetectionScheduler?.notify(1),zm(t,e,e[Jt],2,null,null)}function UV(t){let e=t[Hd];if(!e)return Ey(t[Le],t);for(;e;){let n=null;if(Ca(e))n=e[Hd];else{let i=e[Fn];i&&(n=i)}if(!n){for(;e&&!e[or]&&e!==t;)Ca(e)&&Ey(e[Le],e),e=e[Sn];e===null&&(e=t),Ca(e)&&Ey(e[Le],e),n=e&&e[or]}e=n}}function zV(t,e,n,i){let r=Fn+i,o=n.length;i>0&&(n[r-1][or]=e),i<o-Fn?(e[or]=n[r],hS(n,Fn+i,e)):(n.push(e),e[or]=null),e[Sn]=n;let s=e[nh];s!==null&&n!==s&&$V(s,e);let c=e[bo];c!==null&&c.insertView(t),zy(e),e[Se]|=128}function $V(t,e){let n=t[Il],r=e[Sn][Sn][ki];e[ki]!==r&&(t[Se]|=Pb.HasTransplantedViews),n===null?t[Il]=[e]:n.push(e)}function bA(t,e){let n=t[Il],i=n.indexOf(e);n.splice(i,1)}function Zd(t,e){if(t.length<=Fn)return;let n=Fn+e,i=t[n];if(i){let r=i[nh];r!==null&&r!==t&&bA(r,i),e>0&&(t[n-1][or]=i[or]);let o=am(t,Fn+e);BV(i[Le],i);let s=o[bo];s!==null&&s.detachView(o[Le]),i[Sn]=null,i[or]=null,i[Se]&=-129}return i}function jm(t,e){if(!(e[Se]&256)){let n=e[Jt];n.destroyNode&&zm(t,e,n,3,null,null),UV(e)}}function Ey(t,e){if(e[Se]&256)return;let n=Ye(null);try{e[Se]&=-129,e[Se]|=256,e[Da]&&WD(e[Da]),qV(t,e),HV(t,e),e[Le].type===1&&e[Jt].destroy();let i=e[nh];if(i!==null&&Co(e[Sn])){i!==e[Sn]&&bA(i,e);let r=e[bo];r!==null&&r.detachView(t)}wV(e)}finally{Ye(n)}}function HV(t,e){let n=t.cleanup,i=e[$d];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[$d]=null);let r=e[fs];if(r!==null){e[fs]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function qV(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Wd)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=r[o[s]],u=o[s+1];kr(4,c,u);try{u.call(c)}finally{kr(5,c,u)}}else{kr(4,r,o);try{o.call(r)}finally{kr(5,r,o)}}}}}function wA(t,e,n){return GV(t,e.parent,n)}function GV(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[jr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===Or.None||o===Or.Emulated)return null}return Li(i,n)}}function mm(t,e,n,i,r){t.insertBefore(e,n,i,r)}function IA(t,e,n){t.appendChild(e,n)}function LT(t,e,n,i,r){i!==null?mm(t,e,n,i,r):IA(t,e,n)}function WV(t,e,n,i){t.removeChild(e,n,i)}function Yb(t,e){return t.parentNode(e)}function ZV(t,e){return t.nextSibling(e)}function CA(t,e,n){return YV(t,e,n)}function KV(t,e,n){return t.type&40?Li(t,n):null}var YV=KV,VT;function Um(t,e,n,i){let r=wA(t,i,e),o=e[Jt],s=i.parent||e[vi],c=CA(s,i,e);if(r!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)LT(o,r,n[u],c,!1);else LT(o,r,n,c,!1);VT!==void 0&&VT(o,i,e,n,r)}function im(t,e){if(e!==null){let n=e.type;if(n&3)return Li(e,t);if(n&4)return Ky(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return im(t,i);{let r=t[e.index];return Co(r)?Ky(-1,r):Fr(r)}}else{if(n&32)return Kb(e,t)()||Fr(t[e.index]);{let i=EA(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Gd(t[ki]);return im(r,i)}else return im(t,e.next)}}}return null}function EA(t,e){if(e!==null){let i=t[ki][vi],r=e.projection;return i.projection[r]}return null}function Ky(t,e){let n=Fn+t+1;if(n<e.length){let i=e[n],r=i[Le].firstChild;if(r!==null)return im(i,r)}return e[Ta]}function QV(t,e,n){let i=Yb(t,e);i&&WV(t,i,e,n)}function Qb(t,e,n,i,r,o,s){for(;n!=null;){let c=i[n.index],u=n.type;if(s&&e===0&&(c&&gs(Fr(c),i),n.flags|=2),(n.flags&32)!==32)if(u&8)Qb(t,e,n.child,i,r,o,!1),pl(e,t,r,c,o);else if(u&32){let f=Kb(n,i),p;for(;p=f();)pl(e,t,r,p,o);pl(e,t,r,c,o)}else u&16?xA(t,e,i,n,r,o):pl(e,t,r,c,o);n=s?n.projectionNext:n.next}}function zm(t,e,n,i,r,o){Qb(n,i,t.firstChild,e,r,o,!1)}function XV(t,e,n){let i=e[Jt],r=wA(t,n,e),o=n.parent||e[vi],s=CA(o,n,e);xA(i,0,e,n,r,s)}function xA(t,e,n,i,r,o){let s=n[ki],u=s[vi].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let p=u[f];pl(e,t,r,p,o)}else{let f=u,p=s[Sn];aA(i)&&(f.flags|=128),Qb(t,e,f,p,r,o,!0)}}function JV(t,e,n,i,r){let o=n[Ta],s=Fr(n);o!==s&&pl(e,t,i,o,r);for(let c=Fn;c<n.length;c++){let u=n[c];zm(u[Le],u,t,e,i,o)}}function eB(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:wo.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=wo.Important),t.setStyle(n,i,r,o))}}function tB(t,e,n){t.setAttribute(e,"style",n)}function DA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function TA(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&Fy(t,e,i),r!==null&&DA(t,e,r),o!==null&&tB(t,e,o)}var cr={};function H(t=1){SA(gn(),qe(),Eo()+t,!1)}function SA(t,e,n,i){if(!i)if((e[Se]&3)===3){let o=t.preOrderCheckHooks;o!==null&&em(e,o,n)}else{let o=t.preOrderHooks;o!==null&&tm(e,o,0,n)}Sa(n)}function ce(t,e=Ze.Default){let n=qe();if(n===null)return V(t,e);let i=ri();return nA(i,n,Ri(t),e)}function $m(){let t="invalid";throw new Error(t)}function AA(t,e,n,i,r,o){let s=Ye(null);try{let c=null;r&gt.SignalBased&&(c=e[i][$D]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),r&gt.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):MS(e,c,i,o)}finally{Ye(s)}}function nB(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Sa(~r);else{let o=r,s=n[++i],c=n[++i];Z2(s,o);let u=e[o];c(2,u)}}}finally{Sa(-1)}}function Hm(t,e,n,i,r,o,s,c,u,f,p){let _=e.blueprint.slice();return _[jr]=r,_[Se]=i|4|128|8|64,(f!==null||t&&t[Se]&2048)&&(_[Se]|=2048),OS(_),_[Sn]=_[Tl]=t,_[On]=n,_[sr]=s||t&&t[sr],_[Jt]=c||t&&t[Jt],_[wl]=u||t&&t[wl]||null,_[vi]=o,_[Pm]=yV(),_[bl]=p,_[AS]=f,_[ki]=e.type==2?t[ki]:_,_}function Ml(t,e,n,i,r){let o=t.data[e];if(o===null)o=iB(t,e,n,i,r),W2()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=$2();o.injectorIndex=s===null?-1:s.injectorIndex}return Pa(o,!0),o}function iB(t,e,n,i,r){let o=BS(),s=Lb(),c=s?o:o&&o.parent,u=t.data[e]=lB(t,c,n,e,i,r);return t.firstChild===null&&(t.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function MA(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function PA(t,e,n,i,r){let o=Eo(),s=i&2;try{Sa(-1),s&&e.length>An&&SA(t,e,An,!1),kr(s?2:0,r),n(i,r)}finally{Sa(o),kr(s?3:1,r)}}function Xb(t,e,n){if(Rb(e)){let i=Ye(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{Ye(i)}}}function Jb(t,e,n){LS()&&(mB(t,e,n,Li(n,e)),(n.flags&64)===64&&OA(t,e,n))}function e0(t,e,n=Li){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],c=s===-1?n(e,t):t[s];t[r++]=c}}}function RA(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=t0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function t0(t,e,n,i,r,o,s,c,u,f,p){let _=An+i,b=_+r,I=rB(_,b),S=typeof f=="function"?f():f;return I[Le]={type:t,blueprint:I,template:n,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:p}}function rB(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:cr);return n}function oB(t,e,n,i){let o=i.get(TV,fA)||n===Or.ShadowDom,s=t.selectRootElement(e,o);return sB(s),s}function sB(t){aB(t)}var aB=()=>null;function cB(t,e,n,i){let r=VA(e);r.push(n),t.firstCreatePass&&BA(t).push(i,r.length-1)}function lB(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,c=0;return VS()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function BT(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let c,u=gt.None;Array.isArray(s)?(c=s[0],u=s[1]):c=s;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}t===0?jT(i,n,f,c,u):jT(i,n,f,c)}return i}function jT(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function uB(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,c=[],u=null,f=null;for(let p=i;p<r;p++){let _=o[p],b=n?n.get(_):null,I=b?b.inputs:null,S=b?b.outputs:null;u=BT(0,_.inputs,p,u,I),f=BT(1,_.outputs,p,f,S);let P=u!==null&&s!==null&&!Tb(e)?DB(u,p,s):null;c.push(P)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=f}function dB(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function kA(t,e,n,i,r,o,s,c){let u=Li(e,n),f=e.inputs,p;!c&&f!=null&&(p=f[i])?(i0(t,n,p,i,r),Rm(e)&&hB(n,e.index)):e.type&3?(i=dB(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function hB(t,e){let n=vs(e,t);n[Se]&16||(n[Se]|=64)}function n0(t,e,n,i){if(LS()){let r=i===null?null:{"":-1},o=_B(t,n),s,c;o===null?s=c=null:[s,c]=o,s!==null&&NA(t,e,n,s,r,c),r&&vB(n,i,r)}n.mergedAttrs=Ud(n.mergedAttrs,n.attrs)}function NA(t,e,n,i,r,o){for(let f=0;f<i.length;f++)cV(XS(n,e),t,i[f].type);bB(n,t.data.length,i.length);for(let f=0;f<i.length;f++){let p=i[f];p.providersResolver&&p.providersResolver(p)}let s=!1,c=!1,u=MA(t,e,i.length,null);for(let f=0;f<i.length;f++){let p=i[f];n.mergedAttrs=Ud(n.mergedAttrs,p.hostAttrs),wB(t,n,e,u,p),yB(u,p,r),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let _=p.type.prototype;!s&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!c&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}uB(t,n,o)}function fB(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;pB(s)!=c&&s.push(c),s.push(n,i,o)}}function pB(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function mB(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Rm(n)&&IB(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||XS(n,e),gs(i,e);let s=n.initialInputs;for(let c=r;c<o;c++){let u=t.data[c],f=El(e,t,c,n);if(gs(f,e),s!==null&&xB(e,c-r,f,u,n,s),ms(u)){let p=vs(n.index,e);p[On]=El(e,t,c,n)}}}function OA(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=K2();try{Sa(o);for(let c=i;c<r;c++){let u=t.data[c],f=e[c];$y(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&gB(u,f)}}finally{Sa(-1),$y(s)}}function gB(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function _B(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(_S(e,s.selectors,!1))if(i||(i=[]),ms(s))if(s.findHostDirectiveDefs!==null){let c=[];r=r||new Map,s.findHostDirectiveDefs(s,c,r),i.unshift(...c,s);let u=c.length;Yy(t,e,u)}else i.unshift(s),Yy(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function Yy(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function vB(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new Te(-301,!1);i.push(e[r],o)}}}function yB(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;ms(e)&&(n[""]=t)}}function bB(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function wB(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=xa(r.type,!0)),s=new Wd(o,ms(r),ce);t.blueprint[i]=s,n[i]=s,fB(t,e,i,MA(t,n,r.hostVars,cr),r)}function IB(t,e,n){let i=Li(e,t),r=RA(n),o=t[sr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let c=qm(t,Hm(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=c}function CB(t,e,n,i,r,o){let s=Li(t,e);EB(e[Jt],s,o,t.value,n,i,r)}function EB(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let c=s==null?_l(o):s(o,i||"",r);t.setAttribute(e,r,c,n)}}function xB(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;){let u=s[c++],f=s[c++],p=s[c++],_=s[c++];AA(i,n,u,f,p,_)}}function DB(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let c=0;c<s.length;c+=3)if(s[c]===e){i.push(o,s[c+1],s[c+2],n[r+1]);break}}r+=2}return i}function FA(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function LA(t,e){let n=t.contentQueries;if(n!==null){let i=Ye(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let c=t.data[s];Ub(o),c.contentQueries(2,e[s],s)}}}finally{Ye(i)}}}function qm(t,e){return t[Hd]?t[MT][or]=e:t[Hd]=e,t[MT]=e,e}function Qy(t,e,n){Ub(0);let i=Ye(null);try{e(t,n)}finally{Ye(i)}}function VA(t){return t[$d]||(t[$d]=[])}function BA(t){return t.cleanup||(t.cleanup=[])}function jA(t,e,n){return(t===null||ms(t))&&(n=R2(n[e.index])),n[Jt]}function UA(t,e){let n=t[wl],i=n?n.get(Lr,null):null;i&&i.handleError(e)}function i0(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],c=n[o++],u=n[o++],f=e[s],p=t.data[s];AA(p,f,i,c,u,r)}}function zA(t,e,n){let i=NS(e,t);LV(t[Jt],i,n)}function TB(t,e){let n=vs(e,t),i=n[Le];SB(i,n);let r=n[jr];r!==null&&n[bl]===null&&(n[bl]=Wb(r,n[wl])),r0(i,n,n[On])}function SB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function r0(t,e,n){zb(e);try{let i=t.viewQuery;i!==null&&Qy(1,i,n);let r=t.template;r!==null&&PA(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[bo]?.finishViewCreation(t),t.staticContentQueries&&LA(t,e),t.staticViewQueries&&Qy(2,t.viewQuery,n);let o=t.components;o!==null&&AB(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[Se]&=-5,$b()}}function AB(t,e){for(let n=0;n<e.length;n++)TB(t,e[n])}function Gm(t,e,n,i){let r=Ye(null);try{let o=e.tView,c=t[Se]&4096?4096:16,u=Hm(t,o,n,c,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=t[e.index];u[nh]=f;let p=t[bo];return p!==null&&(u[bo]=p.createEmbeddedView(o)),r0(o,u,n),u}finally{Ye(r)}}function $A(t,e){let n=Fn+e;if(n<t.length)return t[n]}function Kd(t,e){return!e||e.firstChild===null||aA(t)}function Wm(t,e,n,i=!0){let r=e[Le];if(zV(r,e,t,n),i){let s=Ky(n,t),c=e[Jt],u=Yb(c,t[Ta]);u!==null&&jV(r,t[vi],c,e,u,s)}let o=e[bl];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function HA(t,e){let n=Zd(t,e);return n!==void 0&&jm(n[Le],n),n}function gm(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(Fr(o)),Co(o)&&MB(o,i);let s=n.type;if(s&8)gm(t,e,n.child,i);else if(s&32){let c=Kb(n,e),u;for(;u=c();)i.push(u)}else if(s&16){let c=EA(e,n);if(Array.isArray(c))i.push(...c);else{let u=Gd(e[ki]);gm(u[Le],u,c,i,!0)}}n=r?n.projectionNext:n.next}return i}function MB(t,e){for(let n=Fn;n<t.length;n++){let i=t[n],r=i[Le].firstChild;r!==null&&gm(i[Le],i,r,e)}t[Ta]!==t[jr]&&e.push(t[Ta])}var qA=[];function PB(t){return t[Da]??RB(t)}function RB(t){let e=qA.pop()??Object.create(NB);return e.lView=t,e}function kB(t){t.lView[Da]!==t&&(t.lView=null,qA.push(t))}var NB=It(te({},HD),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{qd(t.lView)},consumerOnSignalRead(){this.lView[Da]=this}}),GA=100;function WA(t,e=!0,n=0){let i=t[sr],r=i.rendererFactory,o=!1;o||r.begin?.();try{OB(t,n)}catch(s){throw e&&UA(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function OB(t,e){Xy(t,e);let n=0;for(;Fb(t);){if(n===GA)throw new Te(103,!1);n++,Xy(t,1)}}function FB(t,e,n,i){let r=e[Se];if((r&256)===256)return;let o=!1;!o&&e[sr].inlineEffectRunner?.flush(),zb(e);let s=null,c=null;!o&&LB(t)&&(c=PB(e),s=qD(c));try{OS(e),G2(t.bindingStartIndex),n!==null&&PA(t,e,n,2,i);let u=(r&3)===3;if(!o)if(u){let _=t.preOrderCheckHooks;_!==null&&em(e,_,null)}else{let _=t.preOrderHooks;_!==null&&tm(e,_,0,null),by(e,0)}if(VB(e),ZA(e,0),t.contentQueries!==null&&LA(t,e),!o)if(u){let _=t.contentCheckHooks;_!==null&&em(e,_)}else{let _=t.contentHooks;_!==null&&tm(e,_,1),by(e,1)}nB(t,e);let f=t.components;f!==null&&YA(e,f,0);let p=t.viewQuery;if(p!==null&&Qy(2,p,i),!o)if(u){let _=t.viewCheckHooks;_!==null&&em(e,_)}else{let _=t.viewHooks;_!==null&&tm(e,_,2),by(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[yy]){for(let _ of e[yy])_();e[yy]=null}o||(e[Se]&=-73)}catch(u){throw qd(e),u}finally{c!==null&&(GD(c,s),kB(c)),$b()}}function LB(t){return t.type!==2}function ZA(t,e){for(let n=lA(t);n!==null;n=uA(n))for(let i=Fn;i<n.length;i++){let r=n[i];KA(r,e)}}function VB(t){for(let e=lA(t);e!==null;e=uA(e)){if(!(e[Se]&Pb.HasTransplantedViews))continue;let n=e[Il];for(let i=0;i<n.length;i++){let r=n[i],o=r[Sn];O2(r)}}}function BB(t,e,n){let i=vs(e,t);KA(i,n)}function KA(t,e){Ob(t)&&Xy(t,e)}function Xy(t,e){let i=t[Le],r=t[Se],o=t[Da],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&Xv(o)),o&&(o.dirty=!1),t[Se]&=-9217,s)FB(i,t,i.template,t[On]);else if(r&8192){ZA(t,1);let c=i.components;c!==null&&YA(t,c,1)}}function YA(t,e,n){for(let i=0;i<e.length;i++)BB(t,e[i],n)}function o0(t){for(t[sr].changeDetectionScheduler?.notify();t;){t[Se]|=64;let e=Gd(t);if(E2(t)&&!e)return t;t=e}return null}var Aa=class{get rootNodes(){let e=this._lView,n=e[Le];return gm(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(e){this._lView[On]=e}get destroyed(){return(this._lView[Se]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Sn];if(Co(e)){let n=e[lm],i=n?n.indexOf(this):-1;i>-1&&(Zd(e,i),am(n,i))}this._attachedToViewContainer=!1}jm(this._lView[Le],this._lView)}onDestroy(e){FS(this._lView,e)}markForCheck(){o0(this._cdRefInjectingView||this._lView)}detach(){this._lView[Se]&=-129}reattach(){zy(this._lView),this._lView[Se]|=128}detectChanges(){this._lView[Se]|=1024,WA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,yA(this._lView[Le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=e,zy(this._lView)}},Ni=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=zB;let t=e;return t})(),jB=Ni,UB=class extends jB{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Gm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new Aa(r)}};function zB(){return Zm(ri(),qe())}function Zm(t,e){return t.type&4?new UB(e,t,Al(t,e)):null}var eJ=new RegExp(`^(\\d+)*(${xV}|${EV})*(.*)`);var $B=()=>null;function Yd(t,e){return $B(t,e)}var _m=class{},Jy=class{},vm=class{};function HB(t){let e=Error(`No component factory found for ${Wn(t)}.`);return e[qB]=t,e}var qB="ngComponent";var eb=class{resolveComponentFactory(e){throw HB(e)}},Ur=(()=>{let e=class e{};e.NULL=new eb;let t=e;return t})(),Qd=class{},oh=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>GB();let t=e;return t})();function GB(){let t=qe(),e=ri(),n=vs(e.index,t);return(Ca(n)?n:t)[Jt]}var WB=(()=>{let e=class e{};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),xy={};var UT=new Set;function Pl(t){UT.has(t)||(UT.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function zT(...t){}function ZB(){let t=typeof yo.requestAnimationFrame=="function",e=yo[t?"requestAnimationFrame":"setTimeout"],n=yo[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var pe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Bt(!1),this.onMicrotaskEmpty=new Bt(!1),this.onStable=new Bt(!1),this.onError=new Bt(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=ZB().nativeRequestAnimationFrame,QB(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new Te(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,KB,zT,zT);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},KB={};function s0(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function YB(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(yo,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,tb(t),t.isCheckStableRunning=!0,s0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),tb(t))}function QB(t){let e=()=>{YB(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,c)=>{if(XB(c))return n.invokeTask(r,o,s,c);try{return $T(t),n.invokeTask(r,o,s,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),HT(t)}},onInvoke:(n,i,r,o,s,c,u)=>{try{return $T(t),n.invoke(r,o,s,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),HT(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,tb(t),s0(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function tb(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function $T(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function HT(t){t._nesting--,s0(t)}function XB(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Ia=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ia||{}),QA={destroy(){}};function a0(t,e){!e&&SS(a0);let n=e?.injector??ee(_t);if(!_A(n))return QA;Pl("NgAfterRender");let i=n.get(Km),r=i.handler??=new bm,o=e?.phase??Ia.MixedReadWrite,s=()=>{r.unregister(u),c()},c=n.get(Vm).onDestroy(s),u=Br(n,()=>new ym(o,t));return r.register(u),{destroy:s}}function ka(t,e){!e&&SS(ka);let n=e?.injector??ee(_t);if(!_A(n))return QA;Pl("NgAfterNextRender");let i=n.get(Km),r=i.handler??=new bm,o=e?.phase??Ia.MixedReadWrite,s=()=>{r.unregister(u),c()},c=n.get(Vm).onDestroy(s),u=Br(n,()=>new ym(o,()=>{s(),t()}));return r.register(u),{destroy:s}}var ym=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=ee(pe),this.errorHandler=ee(Lr,{optional:!0}),ee(_m,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},bm=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ia.EarlyRead]:new Set,[Ia.Write]:new Set,[Ia.MixedReadWrite]:new Set,[Ia.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Km=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function wm(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)r=Ry(r,c);else if(o==2){let u=c,f=e[++s];i=Ry(i,u+": "+f+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Im=class extends Ur{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ps(e);return new xl(n,this.ngModule)}};function qT(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function JB(t){let e=t.toLowerCase();return e==="svg"?S2:e==="math"?A2:null}var nb=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Am(i);let r=this.injector.get(e,xy,i);return r!==xy||n===xy?r:this.parentInjector.get(e,n,i)}},xl=class extends vm{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=qT(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return qT(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=a2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Ye(null);try{r=r||this.ngModule;let s=r instanceof Ln?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let c=s?new nb(e,s):e,u=c.get(Qd,null);if(u===null)throw new Te(407,!1);let f=c.get(WB,null),p=c.get(Km,null),_=c.get(_m,null),b={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:_},I=u.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",P=i?oB(I,i,this.componentDef.encapsulation,c):vA(I,S,JB(S)),O=512;this.componentDef.signals?O|=4096:this.componentDef.onPush||(O|=16);let W=null;P!==null&&(W=Wb(P,c,!0));let X=t0(0,null,null,1,0,null,null,null,null,null,null),Z=Hm(null,X,null,O,null,null,b,I,c,null,W);zb(Z);let ae,_e;try{let me=this.componentDef,A,E=null;me.findHostDirectiveDefs?(A=[],E=new Map,me.findHostDirectiveDefs(me,A,E),A.push(me)):A=[me];let x=ej(Z,P),M=tj(x,P,me,A,Z,b,I);_e=kb(X,An),P&&rj(I,me,P,i),n!==void 0&&oj(_e,this.ngContentSelectors,n),ae=ij(M,me,A,E,Z,[sj]),r0(X,Z,null)}finally{$b()}return new ib(this.componentType,ae,Al(_e,Z),Z,_e)}finally{Ye(o)}}},ib=class extends Jy{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Aa(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;i0(o[Le],o,r,e,n),this.previousInputValues.set(e,n);let s=vs(this._tNode.index,o);o0(s)}}get injector(){return new Ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ej(t,e){let n=t[Le],i=An;return t[i]=e,Ml(n,i,2,"#host",null)}function tj(t,e,n,i,r,o,s){let c=r[Le];nj(i,t,e,s);let u=null;e!==null&&(u=Wb(e,r[wl]));let f=o.rendererFactory.createRenderer(e,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let _=Hm(r,RA(n),null,p,r[t.index],t,o,f,null,null,u);return c.firstCreatePass&&Yy(c,t,i.length-1),qm(r,_),r[t.index]=_}function nj(t,e,n,i){for(let r of t)e.mergedAttrs=Ud(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(wm(e,e.mergedAttrs,!0),n!==null&&TA(i,n,e))}function ij(t,e,n,i,r,o){let s=ri(),c=r[Le],u=Li(s,r);NA(c,r,s,n,null,i);for(let p=0;p<n.length;p++){let _=s.directiveStart+p,b=El(r,c,_,s);gs(b,r)}OA(c,r,s),u&&gs(u,r);let f=El(r,c,s.directiveStart+s.componentOffset,s);if(t[On]=r[On]=f,o!==null)for(let p of o)p(f,e);return Xb(c,s,r),f}function rj(t,e,n,i){if(i)Fy(t,n,["ng-version","17.3.11"]);else{let{attrs:r,classes:o}=c2(e.selectors[0]);r&&Fy(t,n,r),o&&o.length>0&&DA(t,n,o.join(" "))}}function oj(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function sj(){let t=ri();Fm(qe()[Le],t)}var Vi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=aj;let t=e;return t})();function aj(){let t=ri();return JA(t,qe())}var cj=Vi,XA=class extends cj{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new Ea(this._hostTNode,this._hostLView)}get parentInjector(){let e=qb(this._hostTNode,this._hostLView);if(KS(e)){let n=dm(e,this._hostLView),i=um(e),r=n[Le].data[i+8];return new Ea(r,n)}else return new Ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=GT(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Fn}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Yd(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,r,Kd(this._hostTNode,s)),c}createComponent(e,n,i,r,o){let s=e&&!C2(e),c;if(s)c=n;else{let S=n||{};c=S.index,i=S.injector,r=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef}let u=s?e:new xl(ps(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let P=(s?f:this.parentInjector).get(Ln,null);P&&(o=P)}let p=ps(u.componentType??{}),_=Yd(this._lContainer,p?.id??null),b=_?.firstChild??null,I=u.create(f,r,b,o);return this.insertImpl(I.hostView,c,Kd(this._hostTNode,_)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(N2(r)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=r[Sn],f=new XA(u,u[vi],u[Sn]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Wm(s,r,o,i),e.attachToViewContainerRef(),hS(Dy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=GT(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Zd(this._lContainer,n);i&&(am(Dy(this._lContainer),n),jm(i[Le],i))}detach(e){let n=this._adjustIndex(e,-1),i=Zd(this._lContainer,n);return i&&am(Dy(this._lContainer),n)!=null?new Aa(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function GT(t){return t[lm]}function Dy(t){return t[lm]||(t[lm]=[])}function JA(t,e){let n,i=e[t.index];return Co(i)?n=i:(n=FA(i,e,null,t),e[t.index]=n,qm(e,n)),uj(n,e,t,i),new XA(n,t,e)}function lj(t,e){let n=t[Jt],i=n.createComment(""),r=Li(e,t),o=Yb(n,r);return mm(n,o,i,ZV(n,r),!1),i}var uj=fj,dj=()=>!1;function hj(t,e,n){return dj(t,e,n)}function fj(t,e,n,i){if(t[Ta])return;let r;n.type&8?r=Fr(i):r=lj(e,n),t[Ta]=r}var rb=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},ob=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),c=this.queries[s.indexInDeclarationView];r.push(c.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)c0(e,n).matches!==null&&this.queries[n].setDirty()}},Cm=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=wj(e):this.predicate=e}},sb=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ab=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,pj(n,o)),this.matchTNodeWithReadOption(e,n,nm(n,e,o,!1,!1))}else i===Ni?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,nm(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Mt||r===Vi||r===Ni&&n.type&4)this.addMatch(n.index,-2);else{let o=nm(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function pj(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function mj(t,e){return t.type&11?Al(t,e):t.type&4?Zm(t,e):null}function gj(t,e,n,i){return n===-1?mj(e,t):n===-2?_j(t,e,i):El(t,t[Le],n,e)}function _j(t,e,n){if(n===Mt)return Al(e,t);if(n===Ni)return Zm(e,t);if(n===Vi)return JA(e,t)}function eM(t,e,n,i){let r=e[bo].queries[i];if(r.matches===null){let o=t.data,s=n.matches,c=[];for(let u=0;s!==null&&u<s.length;u+=2){let f=s[u];if(f<0)c.push(null);else{let p=o[f];c.push(gj(e,p,s[u+1],n.metadata.read))}}r.matches=c}return r.matches}function cb(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=eM(t,e,r,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)i.push(s[c/2]);else{let f=o[c+1],p=e[-u];for(let _=Fn;_<p.length;_++){let b=p[_];b[nh]===b[Sn]&&cb(b[Le],b,f,i)}if(p[Il]!==null){let _=p[Il];for(let b=0;b<_.length;b++){let I=_[b];cb(I[Le],I,f,i)}}}}}return i}function vj(t,e){return t[bo].queries[e].queryList}function tM(t,e,n){let i=new fm((n&4)===4);return cB(t,e,i,i.destroy),(e[bo]??=new ob).queries.push(new rb(i))-1}function yj(t,e,n){let i=gn();return i.firstCreatePass&&(nM(i,new Cm(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),tM(i,qe(),e)}function bj(t,e,n,i){let r=gn();if(r.firstCreatePass){let o=ri();nM(r,new Cm(e,n,i),o.index),Ij(r,t),(n&2)===2&&(r.staticContentQueries=!0)}return tM(r,qe(),n)}function wj(t){return t.split(",").map(e=>e.trim())}function nM(t,e,n){t.queries===null&&(t.queries=new sb),t.queries.track(new ab(e,n))}function Ij(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function c0(t,e){return t.queries.getByIndex(e)}function Cj(t,e){let n=t[Le],i=c0(n,e);return i.crossesNgTemplate?cb(n,t,e,[]):eM(n,t,i,e)}function Ej(t){return Object.getPrototypeOf(t.prototype).constructor}function ys(t){let e=Ej(t.type),n=!0,i=[t];for(;e;){let r;if(ms(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Te(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=Qp(t.inputs),s.inputTransforms=Qp(t.inputTransforms),s.declaredInputs=Qp(t.declaredInputs),s.outputs=Qp(t.outputs);let c=r.hostBindings;c&&Aj(t,c);let u=r.viewQuery,f=r.contentQueries;if(u&&Tj(t,u),f&&Sj(t,f),xj(t,r),xL(t.outputs,r.outputs),ms(r)&&r.data.animation){let p=t.data;p.animation=(p.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let c=o[s];c&&c.ngInherit&&c(t),c===ys&&(n=!1)}}e=Object.getPrototypeOf(e)}Dj(i)}function xj(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function Dj(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Ud(r.hostAttrs,n=Ud(n,r.hostAttrs))}}function Qp(t){return t===vl?{}:t===ii?[]:t}function Tj(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function Sj(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function Aj(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function xo(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var _s=class{},Xd=class{};var lb=class extends _s{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Im(this);let r=wS(e);this._bootstrapComponents=gA(r.bootstrap),this._r3Injector=oA(e,n,[{provide:_s,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver},...i],Wn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ub=class extends Xd{constructor(e){super(),this.moduleType=e}create(e){return new lb(this.moduleType,e,[])}};var Em=class extends _s{constructor(e){super(),this.componentFactoryResolver=new Im(this),this.instance=null;let n=new zd([...e.providers,{provide:_s,useValue:this},{provide:Ur,useValue:this.componentFactoryResolver}],e.parent||Ab(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ym(t,e,n=null){return new Em({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Qm=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new pn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function iM(t,e,n){return t[e]=n}function Oi(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function rM(t,e,n,i){let r=Oi(t,e,n);return Oi(t,e+1,i)||r}function Mj(t,e,n,i,r){let o=rM(t,e,n,i);return Oi(t,e+2,r)||o}function Pj(t){return(t.flags&32)===32}function Rj(t,e,n,i,r,o,s,c,u){let f=e.consts,p=Ml(e,t,4,s||null,Cl(f,c));n0(e,n,p,Cl(f,u)),Fm(e,p);let _=p.tView=t0(2,p,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,p),_.queries=e.queries.embeddedTView(p)),p}function Pe(t,e,n,i,r,o,s,c){let u=qe(),f=gn(),p=t+An,_=f.firstCreatePass?Rj(p,f,u,e,n,i,r,o,s):f.data[p];Pa(_,!1);let b=kj(f,u,_,t);Nm()&&Um(f,u,b,_),gs(b,u);let I=FA(b,u,b,_);return u[p]=I,qm(u,I),hj(I,_,u),km(_)&&Jb(f,u,_),s!=null&&e0(u,_,c),Pe}var kj=Nj;function Nj(t,e,n,i){return Om(!0),e[Jt].createComment("")}function lr(t,e,n,i){let r=qe(),o=Sl();if(Oi(r,o,e)){let s=gn(),c=Hb();CB(c,r,t,e,n,i)}return lr}function Oj(t,e,n,i){return Oi(t,Sl(),n)?e+_l(n)+i:cr}function Fj(t,e,n,i,r,o){let s=q2(),c=rM(t,s,n,r);return Bb(2),c?e+_l(n)+i+_l(r)+o:cr}function Xp(t,e){return t<<17|e<<2}function Ma(t){return t>>17&32767}function Lj(t){return(t&2)==2}function Vj(t,e){return t&131071|e<<17}function db(t){return t|2}function Dl(t){return(t&131068)>>2}function Ty(t,e){return t&-131069|e<<2}function Bj(t){return(t&1)===1}function hb(t){return t|1}function jj(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,c=Ma(s),u=Dl(s);t[i]=n;let f=!1,p;if(Array.isArray(n)){let _=n;p=_[1],(p===null||th(_,p)>0)&&(f=!0)}else p=n;if(r)if(u!==0){let b=Ma(t[c+1]);t[i+1]=Xp(b,c),b!==0&&(t[b+1]=Ty(t[b+1],i)),t[c+1]=Vj(t[c+1],i)}else t[i+1]=Xp(c,0),c!==0&&(t[c+1]=Ty(t[c+1],i)),c=i;else t[i+1]=Xp(u,0),c===0?c=i:t[u+1]=Ty(t[u+1],i),u=i;f&&(t[i+1]=db(t[i+1])),WT(t,p,i,!0),WT(t,p,i,!1),Uj(e,p,t,i,o),s=Xp(c,u),o?e.classBindings=s:e.styleBindings=s}function Uj(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&th(o,e)>=0&&(n[i+1]=hb(n[i+1]))}function WT(t,e,n,i){let r=t[n+1],o=e===null,s=i?Ma(r):Dl(r),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],f=t[s+1];zj(u,e)&&(c=!0,t[s+1]=i?hb(f):db(f)),s=i?Ma(f):Dl(f)}c&&(t[n+1]=i?db(r):hb(r))}function zj(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?th(t,e)>=0:!1}var rr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function $j(t){return t.substring(rr.key,rr.keyEnd)}function Hj(t){return qj(t),oM(t,sM(t,0,rr.textEnd))}function oM(t,e){let n=rr.textEnd;return n===e?-1:(e=rr.keyEnd=Gj(t,rr.key=e,n),sM(t,e,n))}function qj(t){rr.key=0,rr.keyEnd=0,rr.value=0,rr.valueEnd=0,rr.textEnd=t.length}function sM(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Gj(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function je(t,e,n){let i=qe(),r=Sl();if(Oi(i,r,e)){let o=gn(),s=Hb();kA(o,s,i,t,e,i[Jt],n,!1)}return je}function fb(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";i0(t,n,o[s],s,i)}function Ce(t,e,n){return aM(t,e,n,!1),Ce}function zr(t,e){return aM(t,e,null,!0),zr}function l0(t){Zj(eU,Wj,t,!0)}function Wj(t,e){for(let n=Hj(e);n>=0;n=oM(e,n))Db(t,$j(e),!0)}function aM(t,e,n,i){let r=qe(),o=gn(),s=Bb(2);if(o.firstUpdatePass&&lM(o,t,s,i),e!==cr&&Oi(r,s,e)){let c=o.data[Eo()];uM(o,c,r,r[Jt],t,r[s+1]=nU(e,n),i,s)}}function Zj(t,e,n,i){let r=gn(),o=Bb(2);r.firstUpdatePass&&lM(r,null,o,i);let s=qe();if(n!==cr&&Oi(s,o,n)){let c=r.data[Eo()];if(dM(c,i)&&!cM(r,o)){let u=i?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=Ry(u,n||"")),fb(r,c,s,n,i)}else tU(r,c,s,s[Jt],s[o+1],s[o+1]=Jj(t,e,n),i,o)}}function cM(t,e){return e>=t.expandoStartIndex}function lM(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[Eo()],s=cM(t,n);dM(o,i)&&e===null&&!s&&(e=!1),e=Kj(r,o,e,i),jj(r,o,e,n,s,i)}}function Kj(t,e,n,i){let r=jb(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Sy(null,t,e,n,i),n=Jd(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=Sy(r,t,e,n,i),o===null){let u=Yj(t,e,i);u!==void 0&&Array.isArray(u)&&(u=Sy(null,t,e,u[1],i),u=Jd(u,e.attrs,i),Qj(t,e,i,u))}else o=Xj(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function Yj(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Dl(i)!==0)return t[Ma(i)]}function Qj(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Ma(r)]=i}function Xj(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=Jd(i,s,n)}return Jd(i,e.attrs,n)}function Sy(t,e,n,i,r){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],i=Jd(i,o.hostAttrs,r),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),i}function Jd(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Db(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Jj(t,e,n){if(n==null||n==="")return ii;let i=[],r=rh(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function eU(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&Db(t,i,n)}function tU(t,e,n,i,r,o,s,c){r===cr&&(r=ii);let u=0,f=0,p=0<r.length?r[0]:null,_=0<o.length?o[0]:null;for(;p!==null||_!==null;){let b=u<r.length?r[u+1]:void 0,I=f<o.length?o[f+1]:void 0,S=null,P;p===_?(u+=2,f+=2,b!==I&&(S=_,P=I)):_===null||p!==null&&p<_?(u+=2,S=p):(f+=2,S=_,P=I),S!==null&&uM(t,e,n,i,S,P,s,c),p=u<r.length?r[u]:null,_=f<o.length?o[f]:null}}function uM(t,e,n,i,r,o,s,c){if(!(e.type&3))return;let u=t.data,f=u[c+1],p=Bj(f)?ZT(u,e,n,r,Dl(f),s):void 0;if(!xm(p)){xm(o)||Lj(f)&&(o=ZT(u,null,n,r,c,s));let _=NS(Eo(),n);eB(i,s,_,r,o)}}function ZT(t,e,n,i,r,o){let s=e===null,c;for(;r>0;){let u=t[r],f=Array.isArray(u),p=f?u[1]:u,_=p===null,b=n[r+1];b===cr&&(b=_?ii:void 0);let I=_?_y(b,i):p===i?b:void 0;if(f&&!xm(I)&&(I=_y(u,i)),xm(I)&&(c=I,s))return c;let S=t[r+1];r=s?Ma(S):Dl(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=_y(u,i))}return c}function xm(t){return t!==void 0}function nU(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Wn(rh(t)))),t}function dM(t,e){return(t.flags&(e?8:16))!==0}var pb=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function Ay(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function iU(t,e,n){let i,r,o=0,s=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=t.at(o),f=e[o],p=Ay(o,u,o,f,n);if(p!==0){p<0&&t.updateValue(o,f),o++;continue}let _=t.at(s),b=e[c],I=Ay(s,_,c,b,n);if(I!==0){I<0&&t.updateValue(s,b),s--,c--;continue}let S=n(o,u),P=n(s,_),O=n(o,f);if(Object.is(O,P)){let W=n(c,b);Object.is(W,S)?(t.swap(o,s),t.updateValue(s,b),c--,s--):t.move(s,o),t.updateValue(o,f),o++;continue}if(i??=new Dm,r??=YT(t,o,s,n),mb(t,i,o,O))t.updateValue(o,f),o++,s++;else if(r.has(O))i.set(S,t.detach(o)),s--;else{let W=t.create(o,e[o]);t.attach(o,W),o++,s++}}for(;o<=c;)KT(t,i,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let f=t.at(o),p=u.value,_=Ay(o,f,o,p,n);if(_!==0)_<0&&t.updateValue(o,p),o++,u=c.next();else{i??=new Dm,r??=YT(t,o,s,n);let b=n(o,p);if(mb(t,i,o,b))t.updateValue(o,p),o++,s++,u=c.next();else if(!r.has(b))t.attach(o,t.create(o,p)),o++,s++,u=c.next();else{let I=n(o,f);i.set(I,t.detach(o)),s--}}}for(;!u.done;)KT(t,i,n,t.length,u.value),u=c.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(c=>{t.destroy(c)})}function mb(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function KT(t,e,n,i,r){if(mb(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function YT(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var Dm=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function $e(t,e,n){Pl("NgControlFlow");let i=qe(),r=Sl(),o=yb(i,An+t),s=0;if(Oi(i,r,e)){let c=Ye(null);try{if(HA(o,s),e!==-1){let u=bb(i[Le],An+e),f=Yd(o,u.tView.ssrId),p=Gm(i,u,n,{dehydratedView:f});Wm(o,p,s,Kd(u,f))}}finally{Ye(c)}}else{let c=$A(o,s);c!==void 0&&(c[On]=n)}}var gb=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Fn}};function bs(t,e){return e}var _b=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function ws(t,e,n,i,r,o,s,c,u,f,p,_,b){Pl("NgControlFlow");let I=u!==void 0,S=qe(),P=c?s.bind(S[ki][On]):s,O=new _b(I,P);S[An+t]=O,Pe(t+1,e,n,i,r,o),I&&Pe(t+2,u,f,p,_,b)}var vb=class extends pb{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Fn}at(e){return this.getLView(e)[On].$implicit}attach(e,n){let i=n[bl];this.needsIndexUpdate||=e!==this.length,Wm(this.lContainer,n,e,Kd(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,rU(this.lContainer,e)}create(e,n){let i=Yd(this.lContainer,this.templateTNode.tView.ssrId);return Gm(this.hostLView,this.templateTNode,new gb(this.lContainer,n,e),{dehydratedView:i})}destroy(e){jm(e[Le],e)}updateValue(e,n){this.getLView(e)[On].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[On].$index=e}getLView(e){return oU(this.lContainer,e)}};function Is(t){let e=Ye(null),n=Eo();try{let i=qe(),r=i[Le],o=i[n];if(o.liveCollection===void 0){let c=n+1,u=yb(i,c),f=bb(r,c);o.liveCollection=new vb(u,i,f)}else o.liveCollection.reset();let s=o.liveCollection;if(iU(s,t,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let c=Sl(),u=s.length===0;if(Oi(i,c,u)){let f=n+2,p=yb(i,f);if(u){let _=bb(r,f),b=Yd(p,_.tView.ssrId),I=Gm(i,_,void 0,{dehydratedView:b});Wm(p,I,0,Kd(_,b))}else HA(p,0)}}}finally{Ye(e)}}function yb(t,e){return t[e]}function rU(t,e){return Zd(t,e)}function oU(t,e){return $A(t,e)}function bb(t,e){return kb(t,e)}function sU(t,e,n,i,r,o){let s=e.consts,c=Cl(s,r),u=Ml(e,t,2,i,c);return n0(e,n,u,Cl(s,o)),u.attrs!==null&&wm(u,u.attrs,!1),u.mergedAttrs!==null&&wm(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function j(t,e,n,i){let r=qe(),o=gn(),s=An+t,c=r[Jt],u=o.firstCreatePass?sU(s,o,r,e,n,i):o.data[s],f=aU(o,r,u,c,e,t);r[s]=f;let p=km(u);return Pa(u,!0),TA(c,f,u),!Pj(u)&&Nm()&&Um(o,r,f,u),V2()===0&&gs(f,r),B2(),p&&(Jb(o,r,u),Xb(o,u,r)),i!==null&&e0(r,u),j}function G(){let t=ri();Lb()?Vb():(t=t.parent,Pa(t,!1));let e=t;U2(e)&&z2(),j2();let n=gn();return n.firstCreatePass&&(Fm(n,t),Rb(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&nV(e)&&fb(n,e,qe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&iV(e)&&fb(n,e,qe(),e.stylesWithoutHost,!1),G}function de(t,e,n,i){return j(t,e,n,i),G(),de}var aU=(t,e,n,i,r,o)=>(Om(!0),vA(i,r,X2()));function cU(t,e,n,i,r){let o=e.consts,s=Cl(o,i),c=Ml(e,t,8,"ng-container",s);s!==null&&wm(c,s,!0);let u=Cl(o,r);return n0(e,n,c,u),e.queries!==null&&e.queries.elementStart(e,c),c}function Na(t,e,n){let i=qe(),r=gn(),o=t+An,s=r.firstCreatePass?cU(o,r,i,e,n):r.data[o];Pa(s,!0);let c=lU(r,i,s,t);return i[o]=c,Nm()&&Um(r,i,c,s),gs(c,i),km(s)&&(Jb(r,i,s),Xb(r,s,i)),n!=null&&e0(i,s),Na}function Oa(){let t=ri(),e=gn();return Lb()?Vb():(t=t.parent,Pa(t,!1)),e.firstCreatePass&&(Fm(e,t),Rb(t)&&e.queries.elementEnd(t)),Oa}var lU=(t,e,n,i)=>(Om(!0),VV(e[Jt],""));function Et(){return qe()}function u0(t,e,n){let i=qe(),r=Sl();if(Oi(i,r,e)){let o=gn(),s=Hb(),c=jb(o.data),u=jA(c,s,i);kA(o,s,i,t,e,u,n,!0)}return u0}var wa=void 0;function uU(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var dU=["en",[["a","p"],["AM","PM"],wa],[["AM","PM"],wa,wa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wa,"{1} 'at' {0}",wa],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",uU],My={};function Xm(t){let e=hU(t),n=QT(e);if(n)return n;let i=e.split("-")[0];if(n=QT(i),n)return n;if(i==="en")return dU;throw new Te(701,!1)}function QT(t){return t in My||(My[t]=yo.ng&&yo.ng.common&&yo.ng.common.locales&&yo.ng.common.locales[t]),My[t]}var Fa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(Fa||{});function hU(t){return t.toLowerCase().replace(/_/g,"-")}var Tm="en-US",fU="USD";var pU=Tm;function mU(t){typeof t=="string"&&(pU=t.toLowerCase().replace(/_/g,"-"))}function Ie(t,e,n,i){let r=qe(),o=gn(),s=ri();return hM(o,r,r[Jt],s,t,e,i),Ie}function d0(t,e){let n=ri(),i=qe(),r=gn(),o=jb(r.data),s=jA(o,n,i);return hM(r,i,s,n,t,e),d0}function gU(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let c=e[$d],u=r[o+2];return c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function hM(t,e,n,i,r,o,s){let c=km(i),f=t.firstCreatePass&&BA(t),p=e[On],_=VA(e),b=!0;if(i.type&3||s){let P=Li(i,e),O=s?s(P):P,W=_.length,X=s?ae=>s(Fr(ae[i.index])):i.index,Z=null;if(!s&&c&&(Z=gU(t,e,r,i.index)),Z!==null){let ae=Z.__ngLastListenerFn__||Z;ae.__ngNextListenerFn__=o,Z.__ngLastListenerFn__=o,b=!1}else{o=JT(i,e,p,o,!1);let ae=n.listen(O,r,o);_.push(o,ae),f&&f.push(r,X,W,W+1)}}else o=JT(i,e,p,o,!1);let I=i.outputs,S;if(b&&I!==null&&(S=I[r])){let P=S.length;if(P)for(let O=0;O<P;O+=2){let W=S[O],X=S[O+1],_e=e[W][X].subscribe(o),me=_.length;_.push(o,_e),f&&f.push(r,i.index,me,-(me+1))}}}function XT(t,e,n,i){let r=Ye(null);try{return kr(6,e,n),n(i)!==!1}catch(o){return UA(t,o),!1}finally{kr(7,e,n),Ye(r)}}function JT(t,e,n,i,r){return function o(s){if(s===Function)return i;let c=t.componentOffset>-1?vs(t.index,e):e;o0(c);let u=XT(e,n,i,s),f=o.__ngNextListenerFn__;for(;f;)u=XT(e,n,f,s)&&u,f=f.__ngNextListenerFn__;return r&&u===!1&&s.preventDefault(),u}}function ue(t=1){return Q2(t)}function _U(t,e){let n=null,i=n2(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?_S(t,o,!0):o2(i,o))return r}return n}function Rl(t){let e=qe()[ki][vi];if(!e.projection){let n=t?t.length:1,i=e.projection=GL(n,null),r=i.slice(),o=e.child;for(;o!==null;){let s=t?_U(o,t):0;s!==null&&(r[s]?r[s].projectionNext=o:i[s]=o,r[s]=o),o=o.next}}}function ur(t,e=0,n){let i=qe(),r=gn(),o=Ml(r,An+t,16,null,n||null);o.projection===null&&(o.projection=e),Vb(),(!i[bl]||VS())&&(o.flags&32)!==32&&XV(r,i,o)}function kl(t,e,n,i){bj(t,e,n,i)}function Do(t,e,n){yj(t,e,n)}function oi(t){let e=qe(),n=gn(),i=US();Ub(i+1);let r=c0(n,i);if(t.dirty&&k2(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=Cj(e,i);t.reset(o,gV),t.notifyOnChanges()}return!0}return!1}function si(){return vj(qe(),US())}function vU(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function Jm(t){let e=H2();return Nb(e,An+t)}function J(t,e=""){let n=qe(),i=gn(),r=t+An,o=i.firstCreatePass?Ml(i,r,1,e,null):i.data[r],s=yU(i,n,o,e,t);n[r]=s,Nm()&&Um(i,n,s,o),Pa(o,!1)}var yU=(t,e,n,i,r)=>(Om(!0),FV(e[Jt],i));function mt(t){return Ke("",t,""),mt}function Ke(t,e,n){let i=qe(),r=Oj(i,t,e,n);return r!==cr&&zA(i,Eo(),r),Ke}function La(t,e,n,i,r){let o=qe(),s=Fj(o,t,e,n,i,r);return s!==cr&&zA(o,Eo(),s),La}var bU=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=ES(!1,i.type),o=r.length>0?Ym([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ne({token:e,providedIn:"environment",factory:()=>new e(V(Ln))});let t=e;return t})();function dt(t){Pl("NgStandalone"),t.getStandaloneInjector=e=>e.get(bU).getOrCreateStandaloneInjector(t)}function fM(t,e){let n=t[e];return n===cr?void 0:n}function wU(t,e,n,i,r,o){let s=e+n;return Oi(t,s,r)?iM(t,s+1,o?i.call(o,r):i(r)):fM(t,s+1)}function IU(t,e,n,i,r,o,s,c){let u=e+n;return Mj(t,u,r,o,s)?iM(t,u+3,c?i.call(c,r,o,s):i(r,o,s)):fM(t,u+3)}function ai(t,e){let n=gn(),i,r=t+An;n.firstCreatePass?(i=CU(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=xa(i.type,!0)),s,c=ni(ce);try{let u=hm(!1),f=o();return hm(u),vU(n,qe(),r,f),f}finally{ni(c)}}function CU(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Bi(t,e,n){let i=t+An,r=qe(),o=Nb(r,i);return pM(r,i)?wU(r,jS(),e,o.transform,n,o):o.transform(n)}function h0(t,e,n,i,r){let o=t+An,s=qe(),c=Nb(s,o);return pM(s,o)?IU(s,jS(),e,c.transform,n,i,r,c):c.transform(n,i,r)}function pM(t,e){return t[Le].data[e].pure}function mM(t,e){return Zm(t,e)}var Io=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},f0=new Io("17.3.11"),eg=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var gM=new re("");function Nl(t){return!!t&&typeof t.then=="function"}function p0(t){return!!t&&typeof t.subscribe=="function"}var Ol=new re(""),_M=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=ee(Ol,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(Nl(s))i.push(s);else if(p0(s)){let c=new Promise((u,f)=>{s.subscribe({complete:u,error:f})});i.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tg=new re("");function EU(){ZD(()=>{throw new Te(600,!1)})}function xU(t){return t.isBoundToModule}function DU(t,e,n){try{let i=n();return Nl(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var Va=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ee(sA),this.afterRenderEffectManager=ee(Km),this.externalTestViews=new Set,this.beforeRender=new Me,this.afterTick=new Me,this.componentTypes=[],this.components=[],this.isStable=ee(Qm).hasPendingTasks.pipe(ye(i=>!i)),this._injector=ee(Ln)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof vm;if(!this._injector.get(_M).done){let I=!o&&bS(i),S=!1;throw new Te(405,S)}let c;o?c=i:c=this._injector.get(Ur).resolveComponentFactory(i),this.componentTypes.push(c.componentType);let u=xU(c)?void 0:this._injector.get(_s),f=r||c.selector,p=c.create(_t.NULL,[],f,u),_=p.location.nativeElement,b=p.injector.get(gM,null);return b?.registerApplication(_),p.onDestroy(()=>{this.detachView(p.hostView),Py(this.components,p),b?.unregisterApplication(_)}),this._loadComponent(p),p}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new Te(101,!1);let r=Ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ye(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===GA)throw new Te(103,!1);if(i){let s=r===0;this.beforeRender.next(s);for(let{_lView:c,notifyErrorHandler:u}of this._views)TU(c,s,u)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>wb(s))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:s})=>wb(s))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Py(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(tg,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Py(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new Te(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Py(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function TU(t,e,n){!e&&!wb(t)||SU(t,n,e)}function wb(t){return Fb(t)}function SU(t,e,n){let i;n?(i=0,t[Se]|=1024):t[Se]&64?i=0:i=1,WA(t,e,i)}var Ib=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ng=(()=>{let e=class e{compileModuleSync(i){return new ub(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=wS(i),s=gA(o.declarations).reduce((c,u)=>{let f=ps(u);return f&&c.push(new xl(f)),c},[]);return new Ib(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var AU=(()=>{let e=class e{constructor(){this.zone=ee(pe),this.applicationRef=ee(Va)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function MU(t){return[{provide:pe,useFactory:t},{provide:yl,multi:!0,useFactory:()=>{let e=ee(AU,{optional:!0});return()=>e.initialize()}},{provide:yl,multi:!0,useFactory:()=>{let e=ee(NU);return()=>{e.initialize()}}},{provide:sA,useFactory:PU}]}function PU(){let t=ee(pe),e=ee(Lr);return n=>t.runOutsideAngular(()=>e.handleError(n))}function RU(t){let e=MU(()=>new pe(kU(t)));return Fi([[],e])}function kU(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var NU=(()=>{let e=class e{constructor(){this.subscription=new Ot,this.initialized=!1,this.zone=ee(pe),this.pendingTasks=ee(Qm)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OU(){return typeof $localize<"u"&&$localize.locale||Tm}var Fl=new re("",{providedIn:"root",factory:()=>ee(Fl,Ze.Optional|Ze.SkipSelf)||OU()}),vM=new re("",{providedIn:"root",factory:()=>fU});var yM=new re("");var rm=null;function FU(t=[],e){return _t.create({name:e,providers:[{provide:Mm,useValue:"platform"},{provide:yM,useValue:new Set([()=>rm=null])},...t]})}function LU(t=[]){if(rm)return rm;let e=FU(t);return rm=e,EU(),VU(e),e}function VU(t){t.get(Gb,null)?.forEach(n=>n())}function m0(){return!1}var dr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=BU;let t=e;return t})();function BU(t){return jU(ri(),qe(),(t&16)===16)}function jU(t,e,n){if(Rm(t)&&!n){let i=vs(t.index,e);return new Aa(i,i)}else if(t.type&47){let i=e[ki];return new Aa(i,e)}return null}function bM(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=LU(i),o=[RU(),...n||[]],c=new Em({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(pe);return u.run(()=>{c.resolveInjectorInitializers();let f=c.get(Lr,null),p;u.runOutsideAngular(()=>{p=u.onError.subscribe({next:I=>{f.handleError(I)}})});let _=()=>c.destroy(),b=r.get(yM);return b.add(_),c.onDestroy(()=>{p.unsubscribe(),b.delete(_)}),DU(f,u,()=>{let I=c.get(_M);return I.runInitializers(),I.donePromise.then(()=>{let S=c.get(Fl,Tm);mU(S||Tm);let P=c.get(Va);return e!==void 0&&P.bootstrap(e),P})})})}catch(e){return Promise.reject(e)}}function $r(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function sh(t){let e=Ye(null);try{return t()}finally{Ye(e)}}function wM(t){let e=ps(t);if(!e)return null;let n=new xl(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var TM=null;function Vl(){return TM}function SM(t){TM??=t}var ig=class{};var Ge=new re(""),E0=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>ee(HU),providedIn:"platform"});let t=e;return t})(),AM=new re(""),HU=(()=>{let e=class e extends E0{constructor(){super(),this._doc=ee(Ge),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vl().getBaseHref(this._doc)}onPopState(i){let r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Vl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function x0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function IM(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function To(t){return t&&t[0]!=="?"?"?"+t:t}var Ba=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>ee(D0),providedIn:"root"});let t=e;return t})(),MM=new re(""),D0=(()=>{let e=class e extends Ba{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ee(Ge).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return x0(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+To(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let c=this.prepareExternalUrl(o+To(s));this._platformLocation.pushState(i,r,c)}replaceState(i,r,o,s){let c=this.prepareExternalUrl(o+To(s));this._platformLocation.replaceState(i,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(V(E0),V(MM,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),PM=(()=>{let e=class e extends Ba{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=x0(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,o,s){let c=this.prepareExternalUrl(o+To(s));c.length==0&&(c=this._platformLocation.pathname),this._platformLocation.pushState(i,r,c)}replaceState(i,r,o,s){let c=this.prepareExternalUrl(o+To(s));c.length==0&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(V(E0),V(MM,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),Cs=(()=>{let e=class e{constructor(i){this._subject=new Bt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=WU(IM(CM(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+To(r))}normalize(i){return e.stripTrailingSlash(GU(this._basePath,CM(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+To(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+To(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=To,e.joinWithSlash=x0,e.stripTrailingSlash=IM,e.\u0275fac=function(r){return new(r||e)(V(Ba))},e.\u0275prov=ne({token:e,factory:()=>qU(),providedIn:"root"});let t=e;return t})();function qU(){return new Cs(V(Ba))}function GU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function CM(t){return t.replace(/\/index.html$/,"")}function WU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var RM={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},T0=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(T0||{});var ji={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ll(t,e){let n=Xm(t),i=n[Fa.NumberSymbols][e];if(typeof i>"u"){if(e===ji.CurrencyDecimal)return n[Fa.NumberSymbols][ji.Decimal];if(e===ji.CurrencyGroup)return n[Fa.NumberSymbols][ji.Group]}return i}function kM(t,e){return Xm(t)[Fa.NumberFormats][e]}function ZU(t){return Xm(t)[Fa.Currencies]}function KU(t,e,n="en"){let i=ZU(n)[t]||RM[t]||[],r=i[1];return e==="narrow"&&typeof r=="string"?r:i[0]||t}var YU=2;function QU(t){let e,n=RM[t];return n&&(e=n[2]),typeof e=="number"?e:YU}var XU=/^(\d+)?\.((\d+)(-(\d+))?)?$/,EM=22,rg=".",ah="0",JU=";",ez=",",g0="#",xM="\xA4";function NM(t,e,n,i,r,o,s=!1){let c="",u=!1;if(!isFinite(t))c=Ll(n,ji.Infinity);else{let f=rz(t);s&&(f=iz(f));let p=e.minInt,_=e.minFrac,b=e.maxFrac;if(o){let X=o.match(XU);if(X===null)throw new Error(`${o} is not a valid digit info`);let Z=X[1],ae=X[3],_e=X[5];Z!=null&&(p=_0(Z)),ae!=null&&(_=_0(ae)),_e!=null?b=_0(_e):ae!=null&&_>b&&(b=_)}oz(f,_,b);let I=f.digits,S=f.integerLen,P=f.exponent,O=[];for(u=I.every(X=>!X);S<p;S++)I.unshift(0);for(;S<0;S++)I.unshift(0);S>0?O=I.splice(S,I.length):(O=I,I=[0]);let W=[];for(I.length>=e.lgSize&&W.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)W.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&W.unshift(I.join("")),c=W.join(Ll(n,i)),O.length&&(c+=Ll(n,r)+O.join("")),P&&(c+=Ll(n,ji.Exponential)+"+"+P)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function tz(t,e,n,i,r){let o=kM(e,T0.Currency),s=OM(o,Ll(e,ji.MinusSign));return s.minFrac=QU(i),s.maxFrac=s.minFrac,NM(t,s,e,ji.CurrencyGroup,ji.CurrencyDecimal,r).replace(xM,n).replace(xM,"").trim()}function nz(t,e,n){let i=kM(e,T0.Decimal),r=OM(i,Ll(e,ji.MinusSign));return NM(t,r,e,ji.Group,ji.Decimal,n)}function OM(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(JU),r=i[0],o=i[1],s=r.indexOf(rg)!==-1?r.split(rg):[r.substring(0,r.lastIndexOf(ah)+1),r.substring(r.lastIndexOf(ah)+1)],c=s[0],u=s[1]||"";n.posPre=c.substring(0,c.indexOf(g0));for(let p=0;p<u.length;p++){let _=u.charAt(p);_===ah?n.minFrac=n.maxFrac=p+1:_===g0?n.maxFrac=p+1:n.posSuf+=_}let f=c.split(ez);if(n.gSize=f[1]?f[1].length:0,n.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let p=r.length-n.posPre.length-n.posSuf.length,_=o.indexOf(g0);n.negPre=o.substring(0,_).replace(/'/g,""),n.negSuf=o.slice(_+p).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function iz(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function rz(t){let e=Math.abs(t)+"",n=0,i,r,o,s,c;for((r=e.indexOf(rg))>-1&&(e=e.replace(rg,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===ah;o++);if(o===(c=e.length))i=[0],r=1;else{for(c--;e.charAt(c)===ah;)c--;for(r-=o,i=[],s=0;o<=c;o++,s++)i[s]=Number(e.charAt(o))}return r>EM&&(i=i.splice(0,EM-1),n=r-1,r=1),{digits:i,exponent:n,integerLen:r}}function oz(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let i=t.digits,r=i.length-t.integerLen,o=Math.min(Math.max(e,r),n),s=o+t.integerLen,c=i[s];if(s>0){i.splice(Math.max(t.integerLen,s));for(let _=s;_<i.length;_++)i[_]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,s=o+1),i[0]=0;for(let _=1;_<s;_++)i[_]=0}if(c>=5)if(s-1<0){for(let _=0;_>s;_--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[s-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+t.integerLen,p=i.reduceRight(function(_,b,I,S){return b=b+_,S[I]=b<10?b:b-10,u&&(S[I]===0&&I>=f?S.pop():u=!1),b>=10?1:0},0);p&&(i.unshift(p),t.integerLen++)}function _0(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function FM(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var LM=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new v0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){DM("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){DM("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(ce(Vi),ce(Ni))},e.\u0275dir=jt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),v0=class{constructor(){this.$implicit=null,this.ngIf=null}};function DM(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Wn(e)}'.`)}var sz=!0,y0=class{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},S0=(()=>{let e=class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(i){this._ngSwitch=i,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(i){this._defaultViews.push(i)}_matchCase(i){let r=sz?i===this._ngSwitch:i==this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(i){if(this._defaultViews.length>0&&i!==this._defaultUsed){this._defaultUsed=i;for(let r of this._defaultViews)r.enforceState(i)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});let t=e;return t})(),VM=(()=>{let e=class e{constructor(i,r,o){this.ngSwitch=o,o._addCase(),this._view=new y0(i,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};e.\u0275fac=function(r){return new(r||e)(ce(Vi),ce(Ni),ce(S0,9))},e.\u0275dir=jt({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});let t=e;return t})();function A0(t,e){return new Te(2100,!1)}var b0=class{createSubscription(e,n){return sh(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){sh(()=>e.unsubscribe())}},w0=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},az=new w0,cz=new b0,BM=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(Nl(i))return az;if(p0(i))return cz;throw A0(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(ce(dr,16))},e.\u0275pipe=Vr({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var jM=(()=>{let e=class e{constructor(i){this._locale=i}transform(i,r,o){if(!zM(i))return null;o||=this._locale;try{let s=$M(i);return nz(s,o,r)}catch(s){throw A0(e,s.message)}}};e.\u0275fac=function(r){return new(r||e)(ce(Fl,16))},e.\u0275pipe=Vr({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();var UM=(()=>{let e=class e{constructor(i,r="USD"){this._locale=i,this._defaultCurrencyCode=r}transform(i,r=this._defaultCurrencyCode,o="symbol",s,c){if(!zM(i))return null;c||=this._locale,typeof o=="boolean"&&(o=o?"symbol":"code");let u=r||this._defaultCurrencyCode;o!=="code"&&(o==="symbol"||o==="symbol-narrow"?u=KU(u,o==="symbol"?"wide":"narrow",c):u=o);try{let f=$M(i);return tz(f,c,u,r,s)}catch(f){throw A0(e,f.message)}}};e.\u0275fac=function(r){return new(r||e)(ce(Fl,16),ce(vM,16))},e.\u0275pipe=Vr({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function zM(t){return!(t==null||t===""||t!==t)}function $M(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var So=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({});let t=e;return t})(),M0="browser",lz="server";function P0(t){return t===M0}function ja(t){return t===lz}var HM=(()=>{let e=class e{};e.\u0275prov=ne({token:e,providedIn:"root",factory:()=>P0(ee(Mn))?new I0(ee(Ge),window):new C0});let t=e;return t})(),I0=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=uz(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function uz(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var C0=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},og=class{};var N0=class extends ig{constructor(){super(...arguments),this.supportsDOMEvents=!0}},O0=class t extends N0{static makeCurrent(){SM(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=dz();return n==null?null:hz(n)}resetBaseElement(){ch=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return FM(document.cookie,e)}},ch=null;function dz(){return ch=ch||document.querySelector("base"),ch?ch.getAttribute("href"):null}function hz(t){return new URL(t,document.baseURI).pathname}var fz=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),F0=new re(""),ZM=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new Te(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(V(F0),V(pe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),ag=class{constructor(e){this._doc=e}},R0="ng-app-id",KM=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ja(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${R0}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(R0),s;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(R0,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,c=s.get(r)?.elements;c?c.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(V(Ge),V(Bm),V(ih,8),V(Mn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),k0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},V0=/%COMP%/g,YM="%COMP%",pz=`_nghost-${YM}`,mz=`_ngcontent-${YM}`,gz=!0,_z=new re("",{providedIn:"root",factory:()=>gz});function vz(t){return mz.replace(V0,t)}function yz(t){return pz.replace(V0,t)}function QM(t,e){return e.map(n=>n.replace(V0,t))}var qM=(()=>{let e=class e{constructor(i,r,o,s,c,u,f,p=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=c,this.platformId=u,this.ngZone=f,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=ja(u),this.defaultRenderer=new lh(i,c,f,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Or.ShadowDom&&(r=It(te({},r),{encapsulation:Or.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof cg?o.applyToHost(i):o instanceof uh&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let c=this.doc,u=this.ngZone,f=this.eventManager,p=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case Or.Emulated:s=new cg(f,p,r,this.appId,_,c,u,b);break;case Or.ShadowDom:return new L0(f,p,i,r,c,u,this.nonce,b);default:s=new uh(f,p,r,_,c,u,b);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(V(ZM),V(KM),V(Bm),V(_z),V(Ge),V(Mn),V(pe),V(ih))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),lh=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(k0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(GM(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(GM(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Te(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=k0[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=k0[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(wo.DashCase|wo.Important)?e.style.setProperty(n,i,r&wo.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&wo.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Vl().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function GM(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var L0=class extends lh{constructor(e,n,i,r,o,s,c,u){super(e,o,s,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=QM(r.id,r.styles);for(let p of f){let _=document.createElement("style");c&&_.setAttribute("nonce",c),_.textContent=p,this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},uh=class extends lh{constructor(e,n,i,r,o,s,c,u){super(e,o,s,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=u?QM(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cg=class extends uh{constructor(e,n,i,r,o,s,c,u){let f=r+"-"+i.id;super(e,n,i,o,s,c,u,f),this.contentAttr=vz(f),this.hostAttr=yz(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},bz=(()=>{let e=class e extends ag{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(V(Ge))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})(),WM=["alt","control","meta","shift"],wz={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Iz={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Cz=(()=>{let e=class e extends ag{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),c=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vl().onAndCancel(i,s.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),WM.forEach(p=>{let _=r.indexOf(p);_>-1&&(r.splice(_,1),c+=p+".")}),c+=s,r.length!=0||s.length===0)return null;let f={};return f.domEventName=o,f.fullKey=c,f}static matchEventFullKeyCode(i,r){let o=wz[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),WM.forEach(c=>{if(c!==o){let u=Iz[c];u(i)&&(s+=c+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(V(Ge))},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function XM(t,e){return bM(te({rootComponent:t},Ez(e)))}function Ez(t){return{appProviders:[...Az,...t?.providers??[]],platformProviders:Sz}}function xz(){O0.makeCurrent()}function Dz(){return new Lr}function Tz(){return hA(document),document}var Sz=[{provide:Mn,useValue:M0},{provide:Gb,useValue:xz,multi:!0},{provide:Ge,useFactory:Tz,deps:[]}];var Az=[{provide:Mm,useValue:"root"},{provide:Lr,useFactory:Dz,deps:[]},{provide:F0,useClass:bz,multi:!0,deps:[Ge,pe,Mn]},{provide:F0,useClass:Cz,multi:!0,deps:[Ge]},qM,KM,ZM,{provide:Qd,useExisting:qM},{provide:og,useClass:fz,deps:[]},[]];var lg=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(V(Ge))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ue="primary",Th=Symbol("RouteTitle"),$0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function $l(t){return new $0(t)}function Mz(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],c=t[o];if(s.startsWith(":"))r[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Pz(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hr(t[n],e[n]))return!1;return!0}function Hr(t,e){let n=t?H0(t):void 0,i=e?H0(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!cP(t[r],e[r]))return!1;return!0}function H0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function cP(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function lP(t){return t.length>0?t[t.length-1]:null}function Ts(t){return $p(t)?t:Nl(t)?at(Promise.resolve(t)):fe(t)}var Rz={exact:dP,subset:hP},uP={exact:kz,subset:Nz,ignored:()=>!0};function eP(t,e,n){return Rz[n.paths](t.root,e.root,n.matrixParams)&&uP[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function kz(t,e){return Hr(t,e)}function dP(t,e,n){if(!za(t.segments,e.segments)||!hg(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!dP(t.children[i],e.children[i],n))return!1;return!0}function Nz(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>cP(t[n],e[n]))}function hP(t,e,n){return fP(t,e,e.segments,n)}function fP(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!za(r,n)||e.hasChildren()||!hg(r,n,i))}else if(t.segments.length===n.length){if(!za(t.segments,n)||!hg(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!hP(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!za(t.segments,r)||!hg(t.segments,r,i)||!t.children[Ue]?!1:fP(t.children[Ue],e,o,i)}}function hg(t,e,n){return e.every((i,r)=>uP[n](t[r].parameters,i.parameters))}var Es=class{constructor(e=new vt([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=$l(this.queryParams),this._queryParamMap}toString(){return Lz.serialize(this)}},vt=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fg(this)}},Ua=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=$l(this.parameters),this._parameterMap}toString(){return mP(this)}};function Oz(t,e){return za(t,e)&&t.every((n,i)=>Hr(n.parameters,e[i].parameters))}function za(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function Fz(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===Ue&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==Ue&&(n=n.concat(e(r,i)))}),n}var Sh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>new _h,providedIn:"root"});let t=e;return t})(),_h=class{parse(e){let n=new G0(e);return new Es(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${dh(e.root,!0)}`,i=jz(e.queryParams),r=typeof e.fragment=="string"?`#${Vz(e.fragment)}`:"";return`${n}${i}${r}`}},Lz=new _h;function fg(t){return t.segments.map(e=>mP(e)).join("/")}function dh(t,e){if(!t.hasChildren())return fg(t);if(e){let n=t.children[Ue]?dh(t.children[Ue],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==Ue&&i.push(`${r}:${dh(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=Fz(t,(i,r)=>r===Ue?[dh(t.children[Ue],!1)]:[`${r}:${dh(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[Ue]!=null?`${fg(t)}/${n[0]}`:`${fg(t)}/(${n.join("//")})`}}function pP(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ug(t){return pP(t).replace(/%3B/gi,";")}function Vz(t){return encodeURI(t)}function q0(t){return pP(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pg(t){return decodeURIComponent(t)}function tP(t){return pg(t.replace(/\+/g,"%20"))}function mP(t){return`${q0(t.path)}${Bz(t.parameters)}`}function Bz(t){return Object.entries(t).map(([e,n])=>`;${q0(e)}=${q0(n)}`).join("")}function jz(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${ug(n)}=${ug(r)}`).join("&"):`${ug(n)}=${ug(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Uz=/^[^\/()?;#]+/;function B0(t){let e=t.match(Uz);return e?e[0]:""}var zz=/^[^\/()?;=#]+/;function $z(t){let e=t.match(zz);return e?e[0]:""}var Hz=/^[^=?&#]+/;function qz(t){let e=t.match(Hz);return e?e[0]:""}var Gz=/^[^&#]+/;function Wz(t){let e=t.match(Gz);return e?e[0]:""}var G0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new vt([],{}):new vt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[Ue]=new vt(e,n)),i}parseSegment(){let e=B0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Te(4009,!1);return this.capture(e),new Ua(pg(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=$z(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=B0(this.remaining);r&&(i=r,this.capture(i))}e[pg(n)]=pg(i)}parseQueryParam(e){let n=qz(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=Wz(this.remaining);s&&(i=s,this.capture(i))}let r=tP(n),o=tP(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=B0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Te(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ue);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[Ue]:new vt([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Te(4011,!1)}};function gP(t){return t.segments.length>0?new vt([],{[Ue]:t}):t}function _P(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=_P(r);if(i===Ue&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new vt(t.segments,e);return Zz(n)}function Zz(t){if(t.numberOfChildren===1&&t.children[Ue]){let e=t.children[Ue];return new vt(t.segments.concat(e.segments),e.children)}return t}function Hl(t){return t instanceof Es}function Kz(t,e,n=null,i=null){let r=vP(t);return yP(r,e,n,i)}function vP(t){let e;function n(o){let s={};for(let u of o.children){let f=n(u);s[u.outlet]=f}let c=new vt(o.url,s);return o===t&&(e=c),c}let i=n(t.root),r=gP(i);return e??r}function yP(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return j0(r,r,r,n,i);let o=Yz(e);if(o.toRoot())return j0(r,r,new vt([],{}),n,i);let s=Qz(o,r,t),c=s.processChildren?ph(s.segmentGroup,s.index,o.commands):wP(s.segmentGroup,s.index,o.commands);return j0(r,s.segmentGroup,c,n,i)}function mg(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function vh(t){return typeof t=="object"&&t!=null&&t.outlets}function j0(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(p=>`${p}`):`${f}`});let s;t===e?s=n:s=bP(t,e,n);let c=gP(_P(s));return new Es(c,o,r)}function bP(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=bP(o,e,n)}),new vt(t.segments,i)}var gg=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&mg(i[0]))throw new Te(4003,!1);let r=i.find(vh);if(r&&r!==lP(i))throw new Te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Yz(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new gg(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,f])=>{c[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new gg(n,e,i)}var Ul=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function Qz(t,e,n){if(t.isAbsolute)return new Ul(e,!0,0);if(!n)return new Ul(e,!1,NaN);if(n.parent===null)return new Ul(n,!0,0);let i=mg(t.commands[0])?0:1,r=n.segments.length-1+i;return Xz(n,r,t.numberOfDoubleDots)}function Xz(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new Te(4005,!1);r=i.segments.length}return new Ul(i,!1,r-o)}function Jz(t){return vh(t[0])?t[0].outlets:{[Ue]:t}}function wP(t,e,n){if(t??=new vt([],{}),t.segments.length===0&&t.hasChildren())return ph(t,e,n);let i=e$(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new vt(t.segments.slice(0,i.pathIndex),{});return o.children[Ue]=new vt(t.segments.slice(i.pathIndex),t.children),ph(o,0,r)}else return i.match&&r.length===0?new vt(t.segments,{}):i.match&&!t.hasChildren()?W0(t,e,n):i.match?ph(t,0,r):W0(t,e,n)}function ph(t,e,n){if(n.length===0)return new vt(t.segments,{});{let i=Jz(n),r={};if(Object.keys(i).some(o=>o!==Ue)&&t.children[Ue]&&t.numberOfChildren===1&&t.children[Ue].segments.length===0){let o=ph(t.children[Ue],e,n);return new vt(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=wP(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new vt(t.segments,r)}}function e$(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],c=n[i];if(vh(c))break;let u=`${c}`,f=i<n.length-1?n[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!iP(u,f,s))return o;i+=2}else{if(!iP(u,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function W0(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(vh(o)){let u=t$(o.outlets);return new vt(i,u)}if(r===0&&mg(n[0])){let u=t.segments[e];i.push(new Ua(u.path,nP(n[0]))),r++;continue}let s=vh(o)?o.outlets[Ue]:`${o}`,c=r<n.length-1?n[r+1]:null;s&&c&&mg(c)?(i.push(new Ua(s,nP(c))),r+=2):(i.push(new Ua(s,{})),r++)}return new vt(i,{})}function t$(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=W0(new vt([],{}),0,i))}),e}function nP(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function iP(t,e,n){return t==n.path&&Hr(e,n.parameters)}var mh="imperative",In=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(In||{}),Ui=class{constructor(e,n){this.id=e,this.url=n}},ql=class extends Ui{constructor(e,n,i="imperative",r=null){super(e,n),this.type=In.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ao=class extends Ui{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=In.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},bi=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(bi||{}),_g=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(_g||{}),xs=class extends Ui{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=In.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ds=class extends Ui{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=In.NavigationSkipped}},yh=class extends Ui{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=In.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vg=class extends Ui{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Z0=class extends Ui{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},K0=class extends Ui{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=In.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Y0=class extends Ui{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Q0=class extends Ui{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=In.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},X0=class{constructor(e){this.route=e,this.type=In.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},J0=class{constructor(e){this.route=e,this.type=In.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ew=class{constructor(e){this.snapshot=e,this.type=In.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tw=class{constructor(e){this.snapshot=e,this.type=In.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nw=class{constructor(e){this.snapshot=e,this.type=In.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bh=class{constructor(e){this.snapshot=e,this.type=In.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yg=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=In.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},wh=class{},Ih=class{constructor(e){this.url=e}};var iw=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Ah,this.attachRef=null}},Ah=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new iw,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bg=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=rw(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=rw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ow(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ow(e,this._root).map(n=>n.value)}};function rw(t,e){if(t===e.value)return e;for(let n of e.children){let i=rw(t,n);if(i)return i}return null}function ow(t,e){if(t===e.value)return[e];for(let n of e.children){let i=ow(t,n);if(i.length)return i.unshift(e),i}return[]}var yi=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function jl(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var wg=class extends bg{constructor(e,n){super(e),this.snapshot=n,mw(this,e)}toString(){return this.snapshot.toString()}};function IP(t){let e=n$(t),n=new pn([new Ua("",{})]),i=new pn({}),r=new pn({}),o=new pn({}),s=new pn(""),c=new Mo(n,i,o,s,r,Ue,t,e.root);return c.snapshot=e.root,new wg(new yi(c,[]),e)}function n$(t){let e={},n={},i={},r="",o=new Ch([],e,i,r,n,Ue,t,null,{});return new Ig("",new yi(o,[]))}var Mo=class{constructor(e,n,i,r,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(ye(f=>f[Th]))??fe(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ye(e=>$l(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ye(e=>$l(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pw(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:te(te({},e.params),t.params),data:te(te({},e.data),t.data),resolve:te(te(te(te({},t.data),e.data),r?.data),t._resolvedData)}:i={params:te({},t.params),data:te({},t.data),resolve:te(te({},t.data),t._resolvedData??{})},r&&EP(r)&&(i.resolve[Th]=r.title),i}var Ch=class{get title(){return this.data?.[Th]}constructor(e,n,i,r,o,s,c,u,f){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=$l(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=$l(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ig=class extends bg{constructor(e,n){super(n),this.url=e,mw(this,n)}toString(){return CP(this._root)}};function mw(t,e){e.value._routerState=t,e.children.forEach(n=>mw(t,n))}function CP(t){let e=t.children.length>0?` { ${t.children.map(CP).join(", ")} } `:"";return`${t.value}${e}`}function U0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Hr(e.params,n.params)||t.paramsSubject.next(n.params),Pz(e.url,n.url)||t.urlSubject.next(n.url),Hr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sw(t,e){let n=Hr(t.params,e.params)&&Oz(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||sw(t.parent,e.parent))}function EP(t){return typeof t.title=="string"||t.title===null}var gw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ue,this.activateEvents=new Bt,this.deactivateEvents=new Bt,this.attachEvents=new Bt,this.detachEvents=new Bt,this.parentContexts=ee(Ah),this.location=ee(Vi),this.changeDetector=ee(dr),this.environmentInjector=ee(Ln),this.inputBinder=ee(Dg,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Te(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Te(4013,!1);this._activatedRoute=i;let o=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,f=new aw(i,u,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ar]});let t=e;return t})(),aw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Mo?this.route:e===Ah?this.childContexts:this.parent.get(e,n)}},Dg=new re(""),rP=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=ya([r.queryParams,r.params,r.data]).pipe(ct(([s,c,u],f)=>(u=te(te(te({},s),c),u),f===0?fe(u):Promise.resolve(u)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let c=wM(r.component);if(!c){this.unsubscribeFromRouteData(i);return}for(let{templateName:u}of c.inputs)i.activatedComponentRef.setInput(u,s[u])});this.outletDataSubscriptions.set(i,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function i$(t,e,n){let i=Eh(t,e._root,n?n._root:void 0);return new wg(i,e)}function Eh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=r$(t,e,n);return new yi(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>Eh(t,c)),s}}let i=o$(e.value),r=e.children.map(o=>Eh(t,o));return new yi(i,r)}}function r$(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Eh(t,i,r);return Eh(t,i)})}function o$(t){return new Mo(new pn(t.url),new pn(t.params),new pn(t.queryParams),new pn(t.fragment),new pn(t.data),t.outlet,t.component,t)}var xP="ngNavigationCancelingError";function DP(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Hl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=TP(!1,bi.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function TP(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[xP]=!0,n.cancellationCode=e,n}function s$(t){return SP(t)&&Hl(t.url)}function SP(t){return!!t&&t[xP]}var _w=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["ng-component"]],standalone:!0,features:[dt],decls:1,vars:0,template:function(r,o){r&1&&de(0,"router-outlet")},dependencies:[gw],encapsulation:2});let t=e;return t})();function a$(t,e){return t.providers&&!t._injector&&(t._injector=Ym(t.providers,e,`Route: ${t.path}`)),t._injector??e}function vw(t){let e=t.children&&t.children.map(vw),n=e?It(te({},t),{children:e}):te({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Ue&&(n.component=_w),n}function qr(t){return t.outlet||Ue}function c$(t,e){let n=t.filter(i=>qr(i)===e);return n.push(...t.filter(i=>qr(i)!==e)),n}function Mh(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var l$=(t,e,n,i)=>ye(r=>(new cw(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),cw=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),U0(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=jl(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=jl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=jl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=jl(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new bh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new tw(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(U0(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),U0(c.route.value),this.activateChildRoutes(e,null,s.children)}else{let c=Mh(r.snapshot);s.attachRef=null,s.route=r,s.injector=c,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},Cg=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zl=class{constructor(e,n){this.component=e,this.route=n}};function u$(t,e,n){let i=t._root,r=e?e._root:null;return hh(i,r,n,[i.value])}function d$(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Wl(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!rS(t)?t:e.get(t):i}function hh(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=jl(e);return t.children.forEach(s=>{h$(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>gh(c,n.getContext(s),r)),r}function h$(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=f$(s,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new Cg(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?hh(t,e,c?c.children:null,i,r):hh(t,e,n,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new zl(c.outlet.component,s))}else s&&gh(e,c,r),r.canActivateChecks.push(new Cg(i)),o.component?hh(t,null,c?c.children:null,i,r):hh(t,null,n,i,r);return r}function f$(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!za(t.url,e.url);case"pathParamsOrQueryParamsChange":return!za(t.url,e.url)||!Hr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sw(t,e)||!Hr(t.queryParams,e.queryParams);case"paramsChange":default:return!sw(t,e)}}function gh(t,e,n){let i=jl(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?gh(s,e.children.getContext(o),n):gh(s,null,n):gh(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new zl(e.outlet.component,r)):n.canDeactivateChecks.push(new zl(null,r)):n.canDeactivateChecks.push(new zl(null,r))}function Ph(t){return typeof t=="function"}function p$(t){return typeof t=="boolean"}function m$(t){return t&&Ph(t.canLoad)}function g$(t){return t&&Ph(t.canActivate)}function _$(t){return t&&Ph(t.canActivateChild)}function v$(t){return t&&Ph(t.canDeactivate)}function y$(t){return t&&Ph(t.canMatch)}function AP(t){return t instanceof vo||t?.name==="EmptyError"}var dg=Symbol("INITIAL_VALUE");function Gl(){return ct(t=>ya(t.map(e=>e.pipe(Gn(1),Mi(dg)))).pipe(ye(e=>{for(let n of e)if(n!==!0){if(n===dg)return dg;if(n===!1||n instanceof Es)return n}return!0}),St(e=>e!==dg),Gn(1)))}function b$(t,e){return Ht(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?fe(It(te({},n),{guardsResult:!0})):w$(s,i,r,t).pipe(Ht(c=>c&&p$(c)?I$(i,o,t,e):fe(c)),ye(c=>It(te({},n),{guardsResult:c})))})}function w$(t,e,n,i){return at(t).pipe(Ht(r=>T$(r.component,r.route,n,e,i)),Ai(r=>r!==!0,!0))}function I$(t,e,n,i){return at(e).pipe(cs(r=>ss(E$(r.route.parent,i),C$(r.route,i),D$(t,r.path,n),x$(t,r.route,n))),Ai(r=>r!==!0,!0))}function C$(t,e){return t!==null&&e&&e(new nw(t)),fe(!0)}function E$(t,e){return t!==null&&e&&e(new ew(t)),fe(!0)}function x$(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return fe(!0);let r=i.map(o=>qp(()=>{let s=Mh(e)??n,c=Wl(o,s),u=g$(c)?c.canActivate(e,t):Br(s,()=>c(e,t));return Ts(u).pipe(Ai())}));return fe(r).pipe(Gl())}function D$(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>d$(s)).filter(s=>s!==null).map(s=>qp(()=>{let c=s.guards.map(u=>{let f=Mh(s.node)??n,p=Wl(u,f),_=_$(p)?p.canActivateChild(i,t):Br(f,()=>p(i,t));return Ts(_).pipe(Ai())});return fe(c).pipe(Gl())}));return fe(o).pipe(Gl())}function T$(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return fe(!0);let s=o.map(c=>{let u=Mh(e)??r,f=Wl(c,u),p=v$(f)?f.canDeactivate(t,e,n,i):Br(u,()=>f(t,e,n,i));return Ts(p).pipe(Ai())});return fe(s).pipe(Gl())}function S$(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return fe(!0);let o=r.map(s=>{let c=Wl(s,t),u=m$(c)?c.canLoad(e,n):Br(t,()=>c(e,n));return Ts(u)});return fe(o).pipe(Gl(),MP(i))}function MP(t){return sy(an(e=>{if(Hl(e))throw DP(t,e)}),ye(e=>e===!0))}function A$(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return fe(!0);let o=r.map(s=>{let c=Wl(s,t),u=y$(c)?c.canMatch(e,n):Br(t,()=>c(e,n));return Ts(u)});return fe(o).pipe(Gl(),MP(i))}var xh=class{constructor(e){this.segmentGroup=e||null}},Eg=class extends Error{constructor(e){super(),this.urlTree=e}};function Bl(t){return ul(new xh(t))}function M$(t){return ul(new Te(4e3,!1))}function P$(t){return ul(TP(!1,bi.GuardRejected))}var lw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return fe(i);if(r.numberOfChildren>1||!r.children[Ue])return M$(e.redirectTo);r=r.children[Ue]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Eg(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new Es(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);i[r]=n[c]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,i,r)}),new vt(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new Te(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},uw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R$(t,e,n,i,r){let o=yw(t,e,n);return o.matched?(i=a$(e,i),A$(i,e,n,r).pipe(ye(s=>s===!0?o:te({},uw)))):fe(o)}function yw(t,e,n){if(e.path==="**")return k$(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?te({},uw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Mz)(n,t,e);if(!r)return te({},uw);let o={};Object.entries(r.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=r.consumed.length>0?te(te({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function k$(t){return{matched:!0,parameters:t.length>0?lP(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function oP(t,e,n,i){return n.length>0&&F$(t,n,i)?{segmentGroup:new vt(e,O$(i,new vt(n,t.children))),slicedSegments:[]}:n.length===0&&L$(t,n,i)?{segmentGroup:new vt(t.segments,N$(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new vt(t.segments,t.children),slicedSegments:n}}function N$(t,e,n,i){let r={};for(let o of n)if(Tg(t,e,o)&&!i[qr(o)]){let s=new vt([],{});r[qr(o)]=s}return te(te({},i),r)}function O$(t,e){let n={};n[Ue]=e;for(let i of t)if(i.path===""&&qr(i)!==Ue){let r=new vt([],{});n[qr(i)]=r}return n}function F$(t,e,n){return n.some(i=>Tg(t,e,i)&&qr(i)!==Ue)}function L$(t,e,n){return n.some(i=>Tg(t,e,i))}function Tg(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function V$(t,e,n,i){return qr(t)!==i&&(i===Ue||!Tg(e,n,t))?!1:yw(e,t,n).matched}function B$(t,e,n){return e.length===0&&!t.children[n]}var dw=class{};function j$(t,e,n,i,r,o,s="emptyOnly"){return new hw(t,e,n,i,r,s,o).recognize()}var U$=31,hw=class{constructor(e,n,i,r,o,s,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.applyRedirects=new lw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Te(4002,`'${e.segmentGroup}'`)}recognize(){let e=oP(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ye(n=>{let i=new Ch([],Object.freeze({}),Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ue,this.rootComponentType,null,{}),r=new yi(i,n),o=new Ig("",r),s=Kz(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,Ue).pipe(as(i=>{if(i instanceof Eg)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof xh?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=pw(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(ye(o=>o instanceof yi?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return at(r).pipe(cs(o=>{let s=i.children[o],c=c$(n,o);return this.processSegmentGroup(e,c,s,o)}),ba((o,s)=>(o.push(...s),o)),ls(null),my(),Ht(o=>{if(o===null)return Bl(i);let s=PP(o);return z$(s),fe(s)}))}processSegment(e,n,i,r,o,s){return at(n).pipe(cs(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,o,s).pipe(as(u=>{if(u instanceof xh)return fe(null);throw u}))),Ai(c=>!!c),as(c=>{if(AP(c))return B$(i,r,o)?fe(new dw):Bl(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,o,s,c){return V$(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s):Bl(r):Bl(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s){let{matched:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=yw(n,r,o);if(!c)return Bl(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>U$&&(this.allowRedirects=!1));let _=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,f);return this.applyRedirects.lineralizeSegments(r,_).pipe(Ht(b=>this.processSegment(e,i,n,b.concat(p),s,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let s=R$(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(ct(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(ct(({routes:u})=>{let f=i._loadedInjector??e,{consumedSegments:p,remainingSegments:_,parameters:b}=c,I=new Ch(p,b,Object.freeze(te({},this.urlTree.queryParams)),this.urlTree.fragment,H$(i),qr(i),i.component??i._loadedComponent??null,i,q$(i)),{segmentGroup:S,slicedSegments:P}=oP(n,p,_,u);if(P.length===0&&S.hasChildren())return this.processChildren(f,u,S).pipe(ye(W=>W===null?null:new yi(I,W)));if(u.length===0&&P.length===0)return fe(new yi(I,[]));let O=qr(i)===o;return this.processSegment(f,u,S,P,O?Ue:o,!0).pipe(ye(W=>new yi(I,W instanceof yi?[W]:[])))}))):Bl(n)))}getChildConfig(e,n,i){return n.children?fe({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?fe({routes:n._loadedRoutes,injector:n._loadedInjector}):S$(e,n,i,this.urlSerializer).pipe(Ht(r=>r?this.configLoader.loadChildren(e,n).pipe(an(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):P$(n))):fe({routes:[],injector:e})}};function z$(t){t.sort((e,n)=>e.value.outlet===Ue?-1:n.value.outlet===Ue?1:e.value.outlet.localeCompare(n.value.outlet))}function $$(t){let e=t.value.routeConfig;return e&&e.path===""}function PP(t){let e=[],n=new Set;for(let i of t){if(!$$(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=PP(i.children);e.push(new yi(i.value,r))}return e.filter(i=>!n.has(i))}function H$(t){return t.data||{}}function q$(t){return t.resolve||{}}function G$(t,e,n,i,r,o){return Ht(s=>j$(t,e,n,i,s.extractedUrl,r,o).pipe(ye(({state:c,tree:u})=>It(te({},s),{targetSnapshot:c,urlAfterRedirects:u}))))}function W$(t,e){return Ht(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return fe(n);let o=new Set(r.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let f of RP(u))s.add(f);let c=0;return at(s).pipe(cs(u=>o.has(u)?Z$(u,i,t,e):(u.data=pw(u,u.parent,t).resolve,fe(void 0))),an(()=>c++),dl(1),Ht(u=>c===s.size?fe(n):qn))})}function RP(t){let e=t.children.map(n=>RP(n)).flat();return[t,...e]}function Z$(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!EP(r)&&(o[Th]=r.title),K$(o,t,e,i).pipe(ye(s=>(t._resolvedData=s,t.data=pw(t,t.parent,n).resolve,null)))}function K$(t,e,n,i){let r=H0(t);if(r.length===0)return fe({});let o={};return at(r).pipe(Ht(s=>Y$(t[s],e,n,i).pipe(Ai(),an(c=>{o[s]=c}))),dl(1),fy(o),as(s=>AP(s)?qn:ul(s)))}function Y$(t,e,n,i){let r=Mh(e)??i,o=Wl(t,r),s=o.resolve?o.resolve(e,n):Br(r,()=>o(e,n));return Ts(s)}function z0(t){return ct(e=>{let n=t(e);return n?at(n).pipe(ye(()=>e)):fe(e)})}var kP=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===Ue);return r}getResolvedTitleForRoute(i){return i.data[Th]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>ee(Q$),providedIn:"root"});let t=e;return t})(),Q$=(()=>{let e=class e extends kP{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(V(lg))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rh=new re("",{providedIn:"root",factory:()=>({})}),Dh=new re(""),bw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ee(ng)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return fe(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ts(i.loadComponent()).pipe(ye(NP),an(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Fd(()=>{this.componentLoaders.delete(i)})),o=new ol(r,()=>new Me).pipe(rl());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=X$(r,this.compiler,i,this.onLoadEndListener).pipe(Fd(()=>{this.childrenLoaders.delete(r)})),c=new ol(s,()=>new Me).pipe(rl());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function X$(t,e,n,i){return Ts(t.loadChildren()).pipe(ye(NP),Ht(r=>r instanceof Xd||Array.isArray(r)?fe(r):at(e.compileModuleAsync(r))),ye(r=>{i&&i(t);let o,s,c=!1;return Array.isArray(r)?(s=r,c=!0):(o=r.create(n).injector,s=o.get(Dh,[],{optional:!0,self:!0}).flat()),{routes:s.map(vw),injector:o}}))}function J$(t){return t&&typeof t=="object"&&"default"in t}function NP(t){return J$(t)?t.default:t}var ww=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>ee(e5),providedIn:"root"});let t=e;return t})(),e5=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),OP=new re(""),FP=new re("");function t5(t,e,n){let i=t.get(FP),r=t.get(Ge);return t.get(pe).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(f=>setTimeout(f));let o,s=new Promise(f=>{o=f}),c=r.startViewTransition(()=>(o(),n5(t))),{onViewTransitionCreated:u}=i;return u&&Br(t,()=>u({transition:c,from:e,to:n})),s})}function n5(t){return new Promise(e=>{ka(e,{injector:t})})}var Iw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Me,this.transitionAbortSubject=new Me,this.configLoader=ee(bw),this.environmentInjector=ee(Ln),this.urlSerializer=ee(Sh),this.rootContexts=ee(Ah),this.location=ee(Cs),this.inputBindingEnabled=ee(Dg,{optional:!0})!==null,this.titleStrategy=ee(kP),this.options=ee(Rh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ee(ww),this.createViewTransition=ee(OP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>fe(void 0),this.rootComponentType=null;let i=o=>this.events.next(new X0(o)),r=o=>this.events.next(new J0(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(It(te(te({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new pn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:mh,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(St(s=>s.id!==0),ye(s=>It(te({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ct(s=>{let c=!1,u=!1;return fe(s).pipe(ct(f=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",bi.SupersededByNewNavigation),qn;this.currentTransition=s,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?It(te({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),_=f.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!p&&_!=="reload"){let b="";return this.events.next(new Ds(f.id,this.urlSerializer.serialize(f.rawUrl),b,_g.IgnoredSameUrlNavigation)),f.resolve(null),qn}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return fe(f).pipe(ct(b=>{let I=this.transitions?.getValue();return this.events.next(new ql(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),I!==this.transitions?.getValue()?qn:Promise.resolve(b)}),G$(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),an(b=>{s.targetSnapshot=b.targetSnapshot,s.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=It(te({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let I=new vg(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:b,extractedUrl:I,source:S,restoredState:P,extras:O}=f,W=new ql(b,this.urlSerializer.serialize(I),S,P);this.events.next(W);let X=IP(this.rootComponentType).snapshot;return this.currentTransition=s=It(te({},f),{targetSnapshot:X,urlAfterRedirects:I,extras:It(te({},O),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,fe(s)}else{let b="";return this.events.next(new Ds(f.id,this.urlSerializer.serialize(f.extractedUrl),b,_g.IgnoredByUrlHandlingStrategy)),f.resolve(null),qn}}),an(f=>{let p=new Z0(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),ye(f=>(this.currentTransition=s=It(te({},f),{guards:u$(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),s)),b$(this.environmentInjector,f=>this.events.next(f)),an(f=>{if(s.guardsResult=f.guardsResult,Hl(f.guardsResult))throw DP(this.urlSerializer,f.guardsResult);let p=new K0(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(p)}),St(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",bi.GuardRejected),!1)),z0(f=>{if(f.guards.canActivateChecks.length)return fe(f).pipe(an(p=>{let _=new Y0(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}),ct(p=>{let _=!1;return fe(p).pipe(W$(this.paramsInheritanceStrategy,this.environmentInjector),an({next:()=>_=!0,complete:()=>{_||this.cancelNavigationTransition(p,"",bi.NoDataFromResolver)}}))}),an(p=>{let _=new Q0(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}))}),z0(f=>{let p=_=>{let b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe(an(I=>{_.component=I}),ye(()=>{})));for(let I of _.children)b.push(...p(I));return b};return ya(p(f.targetSnapshot.root)).pipe(ls(null),Gn(1))}),z0(()=>this.afterPreactivation()),ct(()=>{let{currentSnapshot:f,targetSnapshot:p}=s,_=this.createViewTransition?.(this.environmentInjector,f.root,p.root);return _?at(_).pipe(ye(()=>s)):fe(s)}),ye(f=>{let p=i$(i.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=s=It(te({},f),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,s}),an(()=>{this.events.next(new wh)}),l$(this.rootContexts,i.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),Gn(1),an({next:f=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ao(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{c=!0}}),Pi(this.transitionAbortSubject.pipe(an(f=>{throw f}))),Fd(()=>{!c&&!u&&this.cancelNavigationTransition(s,"",bi.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),as(f=>{if(u=!0,SP(f))this.events.next(new xs(s.id,this.urlSerializer.serialize(s.extractedUrl),f.message,f.cancellationCode)),s$(f)?this.events.next(new Ih(f.url)):s.resolve(!1);else{this.events.next(new yh(s.id,this.urlSerializer.serialize(s.extractedUrl),f,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(f))}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return qn}))}))}cancelNavigationTransition(i,r,o){let s=new xs(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function i5(t){return t!==mh}var r5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>ee(o5),providedIn:"root"});let t=e;return t})(),fw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},o5=(()=>{let e=class e extends fw{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Lm(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),LP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:()=>ee(s5),providedIn:"root"});let t=e;return t})(),s5=(()=>{let e=class e extends LP{constructor(){super(...arguments),this.location=ee(Cs),this.urlSerializer=ee(Sh),this.options=ee(Rh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ee(ww),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Es,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=IP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof ql)this.stateMemento=this.createStateMemento();else if(i instanceof Ds)this.rawUrlTree=r.initialUrl;else if(i instanceof vg){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof wh?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof xs&&(i.code===bi.GuardRejected||i.code===bi.NoDataFromResolver)?this.restoreHistory(r):i instanceof yh?this.restoreHistory(r,!0):i instanceof Ao&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,c=te(te({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",c)}else{let s=te(te({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Lm(e)))(o||e)}})(),e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fh=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(fh||{});function VP(t,e){t.events.pipe(St(n=>n instanceof Ao||n instanceof xs||n instanceof yh||n instanceof Ds),ye(n=>n instanceof Ao||n instanceof Ds?fh.COMPLETE:(n instanceof xs?n.code===bi.Redirect||n.code===bi.SupersededByNewNavigation:!1)?fh.REDIRECTING:fh.FAILED),St(n=>n!==fh.REDIRECTING),Gn(1)).subscribe(()=>{e()})}function a5(t){throw t}var c5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},l5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ft=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ee(eg),this.stateManager=ee(LP),this.options=ee(Rh,{optional:!0})||{},this.pendingTasks=ee(Qm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ee(Iw),this.urlSerializer=ee(Sh),this.location=ee(Cs),this.urlHandlingStrategy=ee(ww),this._events=new Me,this.errorHandler=this.options.errorHandler||a5,this.navigated=!1,this.routeReuseStrategy=ee(r5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ee(Dh,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ee(Dg,{optional:!0}),this.eventsSubscription=new Ot,this.isNgZoneEnabled=ee(pe)instanceof pe&&pe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof xs&&r.code!==bi.Redirect&&r.code!==bi.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ao)this.navigated=!0;else if(r instanceof Ih){let c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||i5(o.source)};this.scheduleNavigation(c,mh,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}d5(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),mh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let f=te({},o);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(s.state=f)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(vw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:c,queryParamsHandling:u,preserveFragment:f}=r,p=f?this.currentUrlTree.fragment:c,_=null;switch(u){case"merge":_=te(te({},this.currentUrlTree.queryParams),s);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=s||null}_!==null&&(_=this.removeEmptyProps(_));let b;try{let I=o?o.snapshot:this.routerState.snapshot.root;b=vP(I)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),b=this.currentUrlTree.root}return yP(b,i,_,p??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=Hl(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,mh,null,r)}navigate(i,r={skipLocationChange:!1}){return u5(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=te({},c5):r===!1?o=te({},l5):o=r,Hl(i))return eP(this.currentUrlTree,i,o);let s=this.parseUrl(i);return eP(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,c){if(this.disposed)return Promise.resolve(!1);let u,f,p;c?(u=c.resolve,f=c.reject,p=c.promise):p=new Promise((b,I)=>{u=b,f=I});let _=this.pendingTasks.add();return VP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:u,reject:f,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(b=>Promise.reject(b))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function u5(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Te(4008,!1)}function d5(t){return!(t instanceof wh)&&!(t instanceof Ih)}var xg=class{};var h5=(()=>{let e=class e{constructor(i,r,o,s,c){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(St(i=>i instanceof Ao),cs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Ym(s.providers,i,`Route: ${s.path}`));let c=s._injector??i,u=s._loadedInjector??c;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(c,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(u,s.children??s._loadedRoutes))}return at(o).pipe(os())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=fe(null);let s=o.pipe(Ht(c=>c===null?fe(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??i,c.routes))));if(r.loadComponent&&!r._loadedComponent){let c=this.loader.loadComponent(r);return at([s,c]).pipe(os())}else return s})}};e.\u0275fac=function(r){return new(r||e)(V(Ft),V(ng),V(Ln),V(xg),V(bw))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),BP=new re(""),f5=(()=>{let e=class e{constructor(i,r,o,s,c={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=c,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=ee(Ln),c.scrollPositionRestoration||="disabled",c.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof ql?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Ao?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Ds&&i.code===_g.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof yg&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>k(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),ka(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new yg(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){$m()},e.\u0275prov=ne({token:e,factory:e.\u0275fac});let t=e;return t})();function jP(t,...e){return Fi([{provide:Dh,multi:!0,useValue:t},[],{provide:Mo,useFactory:UP,deps:[Ft]},{provide:tg,multi:!0,useFactory:zP},e.map(n=>n.\u0275providers)])}function UP(t){return t.routerState.root}function kh(t,e){return{\u0275kind:t,\u0275providers:e}}function zP(){let t=ee(_t);return e=>{let n=t.get(Va);if(e!==n.components[0])return;let i=t.get(Ft),r=t.get($P);t.get(Cw)===1&&i.initialNavigation(),t.get(HP,null,Ze.Optional)?.setUpPreloading(),t.get(BP,null,Ze.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var $P=new re("",{factory:()=>new Me}),Cw=new re("",{providedIn:"root",factory:()=>1});function p5(){return kh(2,[{provide:Cw,useValue:0},{provide:Ol,multi:!0,deps:[_t],useFactory:e=>{let n=e.get(AM,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Ft),o=e.get($P);VP(r,()=>{i(!0)}),e.get(Iw).afterPreactivation=()=>(i(!0),o.closed?fe(void 0):o),r.initialNavigation()}))}}])}function m5(){return kh(3,[{provide:Ol,multi:!0,useFactory:()=>{let e=ee(Ft);return()=>{e.setUpLocationChangeListener()}}},{provide:Cw,useValue:2}])}var HP=new re("");function g5(t){return kh(0,[{provide:HP,useExisting:h5},{provide:xg,useExisting:t}])}function _5(){return kh(8,[rP,{provide:Dg,useExisting:rP}])}function v5(t){let e=[{provide:OP,useValue:t5},{provide:FP,useValue:te({skipNextTransition:!!t?.skipInitialTransition},t)}];return kh(9,e)}var sP=new re("ROUTER_FORROOT_GUARD"),y5=[Cs,{provide:Sh,useClass:_h},Ft,Ah,{provide:Mo,useFactory:UP,deps:[Ft]},bw,[]],qP=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[y5,[],{provide:Dh,multi:!0,useValue:i},{provide:sP,useFactory:C5,deps:[[Ft,new mn,new dS]]},{provide:Rh,useValue:r||{}},r?.useHash?w5():I5(),b5(),r?.preloadingStrategy?g5(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?E5(r):[],r?.bindToComponentInputs?_5().\u0275providers:[],r?.enableViewTransitions?v5().\u0275providers:[],x5()]}}static forChild(i){return{ngModule:e,providers:[{provide:Dh,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(V(sP,8))},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({});let t=e;return t})();function b5(){return{provide:BP,useFactory:()=>{let t=ee(HM),e=ee(pe),n=ee(Rh),i=ee(Iw),r=ee(Sh);return n.scrollOffset&&t.setOffset(n.scrollOffset),new f5(r,i,t,e,n)}}}function w5(){return{provide:Ba,useClass:PM}}function I5(){return{provide:Ba,useClass:D0}}function C5(t){return"guarded"}function E5(t){return[t.initialNavigation==="disabled"?m5().\u0275providers:[],t.initialNavigation==="enabledBlocking"?p5().\u0275providers:[]]}var aP=new re("");function x5(){return[{provide:aP,useFactory:zP},{provide:tg,multi:!0,useExisting:aP}]}var I4="firebase",C4="10.12.2";Nt(I4,C4,"app");var ci=new Io("ANGULARFIRE2_VERSION"),ZP=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function Kl(t,e,n){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===n);if(o.length===1)return o[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ha=(t,e)=>{let n=e?[e]:wp(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(s=>{i.includes(s)||i.push(s)})}),i},hr=class{constructor(){return Ha(E4)}},E4="app-check";function Zl(){}var Sg=class{zone;delegate;constructor(e,n=uy){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(s){r.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,n,i)}},Ew=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zl,{},Zl,Zl)),n.pipe(an({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},zi=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Sg(Zone.current)),this.insideAngular=n.run(()=>new Sg(Zone.current,Pr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(V(pe))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ag(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function x4(t){return Ag().ngZone.runOutsideAngular(()=>t())}function $a(t){return Ag().ngZone.run(()=>t())}function Zn(t){return D4(Ag())(t)}function D4(t){return function(n){return n=n.lift(new Ew(t.ngZone)),n.pipe(Si(t.outsideAngular),_i(t.insideAngular))}}var T4=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),$a(()=>t.apply(void 0,i))},fr=(t,e)=>function(){let n,i=arguments;for(let o=0;o<arguments.length;o++)typeof i[o]=="function"&&(e&&(n||=$a(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zl,{},Zl,Zl))),i[o]=T4(i[o],n));let r=x4(()=>t.apply(this,i));if(!e)if(r instanceof De){let o=Ag();return r.pipe(Si(o.outsideAngular),_i(o.insideAngular))}else return $a(()=>r);return r instanceof De?r.pipe(Zn):r instanceof Promise?$a(()=>new Promise((o,s)=>r.then(c=>$a(()=>o(c)),c=>$a(()=>s(c))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:$a(()=>r)};var pr=class{constructor(e){return e}},Ro=class{constructor(){return wp()}};function S4(t){return t&&t.length===1?t[0]:new pr(rs())}var xw=new re("angularfire2._apps"),A4={provide:pr,useFactory:S4,deps:[[new mn,xw]]},M4={provide:Ro,deps:[[new mn,xw]]};function P4(t){return(e,n)=>{let i=n.get(Mn);Nt("angularfire",ci.full,"core"),Nt("angularfire",ci.full,"app"),Nt("angular",f0.full,i.toString());let r=e.runOutsideAngular(()=>t(n));return new pr(r)}}function YP(t,...e){return Fi([A4,M4,{provide:xw,useFactory:P4(t),multi:!0,deps:[pe,_t,zi,...e]}])}var QP=fr(UD,!0);var R4=new Map,k4={activated:!1,tokenObservers:[]},N4={initialized:!1,enabled:!1};function mr(t){return R4.get(t)||Object.assign({},k4)}function n1(){return N4}var O4="https://content-firebaseappcheck.googleapis.com/v1";var F4="exchangeDebugToken",XP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},yte=24*60*60*1e3;var Tw=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return k(this,null,function*(){this.stop();try{this.pending=new Hv,this.pending.promise.catch(n=>{}),yield L4(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Hv,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function L4(t){return new Promise(e=>{setTimeout(e,t)})}var V4={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ss=new Xc("appCheck","AppCheck",V4);function i1(t){if(!mr(t).activated)throw Ss.create("use-before-activation",{appName:t.name})}function r1(i,r){return k(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},s=n.getImmediate({optional:!0});if(s){let I=yield s.getHeartbeatsHeader();I&&(o["X-Firebase-Client"]=I)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(I){throw Ss.create("fetch-network-error",{originalErrorMessage:I?.message})}if(u.status!==200)throw Ss.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(I){throw Ss.create("fetch-parse-error",{originalErrorMessage:I?.message})}let p=f.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Ss.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let _=Number(p[1])*1e3,b=Date.now();return{token:f.token,expireTimeMillis:b+_,issuedAtTimeMillis:b}})}function o1(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${O4}/projects/${n}/apps/${i}:${F4}?key=${r}`,body:{debug_token:e}}}var B4="firebase-app-check-database",j4=1,Sw="firebase-app-check-store";var Mg=null;function U4(){return Mg||(Mg=new Promise((t,e)=>{try{let n=indexedDB.open(B4,j4);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(Ss.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(Sw,{keyPath:"compositeKey"})}}}catch(n){e(Ss.create("storage-open",{originalErrorMessage:n?.message}))}}),Mg)}function z4(t,e){return $4(H4(t),e)}function $4(t,e){return k(this,null,function*(){let i=(yield U4()).transaction(Sw,"readwrite"),o=i.objectStore(Sw).put({compositeKey:t,value:e});return new Promise((s,c)=>{o.onsuccess=u=>{s()},i.onerror=u=>{var f;c(Ss.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function H4(t){return`${t.options.appId}-${t.name}`}var Aw=new Jc("@firebase/app-check");function Dw(t,e){return ma()?z4(t,e).catch(n=>{Aw.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function s1(){return n1().enabled}function a1(){return k(this,null,function*(){let t=n1();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var q4={error:"UNKNOWN_ERROR"};function G4(t){return FD.encodeString(JSON.stringify(t),!1)}function Mw(t,e=!1){return k(this,null,function*(){let n=t.app;i1(n);let i=mr(n),r=i.token,o;if(r&&!Nh(r)&&(i.token=void 0,r=void 0),!r){let u=yield i.cachedTokenPromise;u&&(Nh(u)?r=u:yield Dw(n,void 0))}if(!e&&r&&Nh(r))return{token:r.token};let s=!1;if(s1()){i.exchangeTokenPromise||(i.exchangeTokenPromise=r1(o1(n,yield a1()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),s=!0);let u=yield i.exchangeTokenPromise;return yield Dw(n,u),i.token=u,{token:u.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),s=!0),r=yield mr(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Aw.warn(u.message):Aw.error(u),o=u}let c;return r?o?Nh(r)?c={token:r.token,internalError:o}:c=e1(o):(c={token:r.token},i.token=r,yield Dw(n,r)):c=e1(o),s&&Y4(n,c),c})}function W4(t){return k(this,null,function*(){let e=t.app;i1(e);let{provider:n}=mr(e);if(s1()){let i=yield a1(),{token:r}=yield r1(o1(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function Z4(t,e,n,i){let{app:r}=t,o=mr(r),s={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Nh(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),JP(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>JP(t))}function c1(t,e){let n=mr(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function JP(t){let{app:e}=t,n=mr(e),i=n.tokenRefresher;i||(i=K4(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function K4(t){let{app:e}=t;return new Tw(()=>k(this,null,function*(){let n=mr(e),i;if(n.token?i=yield Mw(t,!0):i=yield Mw(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=mr(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},XP.RETRIAL_MIN_WAIT,XP.RETRIAL_MAX_WAIT)}function Y4(t,e){let n=mr(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function Nh(t){return t.expireTimeMillis-Date.now()>0}function e1(t){return{token:G4(q4),error:t}}var Pw=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=mr(this.app);for(let n of e)c1(this.app,n.next);return Promise.resolve()}};function Q4(t,e){return new Pw(t,e)}function X4(t){return{getToken:e=>Mw(t,e),getLimitedUseToken:()=>W4(t),addTokenListener:e=>Z4(t,"INTERNAL",e),removeTokenListener:e=>c1(t.app,e)}}var J4="@firebase/app-check",eH="0.8.4";var tH="app-check",t1="app-check-internal";function nH(){er(new gi(tH,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return Q4(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(t1).initialize()})),er(new gi(t1,t=>{let e=t.getProvider("app-check").getImmediate();return X4(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Nt(J4,eH)}nH();var iH=["localhost","0.0.0.0","127.0.0.1"],Pte=typeof window<"u"&&iH.includes(window.location.hostname);var rH="firebase",oH="10.12.2";tr.registerVersion(rH,oH,"app-compat");var sH=["ngOnDestroy"],d1=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(sH.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(c=>{let u=c?.[o];return typeof u=="function"?u.bind(c):u?.then?u.then(f=>n.run(()=>f)):n.run(()=>u)});return new Proxy(()=>{},{get:(c,u)=>s[u],apply:(c,u,f)=>s.then(p=>{let _=p?.(...f);return i?.spy?.apply&&i.spy.apply(o,f,_),_})})})});var Rw=class{constructor(e){return e}},Yl=new re("angularfire2.app.options"),Pg=new re("angularfire2.app.name");function Rg(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let s=tr.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>tr.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(s.options)){let c=!!module.hot;aH("error",`${s.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Rw(s)}var aH=(t,...e)=>{m0()&&typeof console<"u"&&console[t](...e)};function kg(t,e,n,i,r){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===t)||[];if(o)return cH(r,s)||(u1("error",`${e} was already initialized on the ${n} Firebase App with different settings.${lH?" You may need to reload as Firebase is not HMR aware.":""}`),u1("warn",{is:r,was:s})),o;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([t,c,r]),c}}function cH(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var lH=typeof module<"u"&&!!module.hot,u1=(t,...e)=>{m0()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var kw=new re("angularfire2.auth.use-emulator"),Nw=new re("angularfire2.auth.settings"),Ow=new re("angularfire2.auth.tenant-id"),Fw=new re("angularfire2.auth.langugage-code"),Lw=new re("angularfire2.auth.use-device-language"),Vw=new re("angularfire.auth.persistence"),Bw=(t,e,n,i,r,o,s,c)=>kg(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),i&&(u.tenantId=i),u.languageCode=r,o&&u.useDeviceLanguage(),s)for(let[f,p]of Object.entries(s))u.settings[f]=p;return c&&u.setPersistence(c),u},[n,i,r,o,s,c]),Ng=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,s,c,u,f,p,_,b,I){let S=new Me,P=fe(void 0).pipe(_i(s.outsideAngular),ct(()=>o.runOutsideAngular(()=>import("./chunk-KT75KFYW.js"))),ye(()=>Rg(n,o,i)),ye(O=>Bw(O,o,c,f,p,_,u,b)),Ld({bufferSize:1,refCount:!1}));if(ja(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=fe(null);else{P.pipe(Ai()).subscribe();let O=P.pipe(ct(Z=>Z.getRedirectResult().then(ae=>ae,()=>null)),Zn,Ld({bufferSize:1,refCount:!1})),W=P.pipe(ct(Z=>new De(ae=>({unsubscribe:o.runOutsideAngular(()=>Z.onAuthStateChanged(_e=>ae.next(_e),_e=>ae.error(_e),()=>ae.complete()))})))),X=P.pipe(ct(Z=>new De(ae=>({unsubscribe:o.runOutsideAngular(()=>Z.onIdTokenChanged(_e=>ae.next(_e),_e=>ae.error(_e),()=>ae.complete()))}))));this.authState=O.pipe(Kp(W),Si(s.outsideAngular),_i(s.insideAngular)),this.user=O.pipe(Kp(X),Si(s.outsideAngular),_i(s.insideAngular)),this.idToken=this.user.pipe(ct(Z=>Z?at(Z.getIdToken()):fe(null))),this.idTokenResult=this.user.pipe(ct(Z=>Z?at(Z.getIdTokenResult()):fe(null))),this.credential=Od(O,S,this.authState.pipe(St(Z=>!Z))).pipe(ye(Z=>Z?.user?Z:null),Si(s.outsideAngular),_i(s.insideAngular))}return d1(this,P,o,{spy:{apply:(O,W,X)=>{(O.startsWith("signIn")||O.startsWith("createUser"))&&X.then(Z=>S.next(Z))}}})}static \u0275fac=function(i){return new(i||t)(V(Yl),V(Pg,8),V(Mn),V(pe),V(zi),V(kw,8),V(Nw,8),V(Ow,8),V(Fw,8),V(Lw,8),V(Vw,8),V(hr,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var f1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p1={};var As,jw;(function(){var t;function e(A,E){function x(){}x.prototype=E.prototype,A.D=E.prototype,A.prototype=new x,A.prototype.constructor=A,A.C=function(M,R,F){for(var T=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)T[Gt-2]=arguments[Gt];return E.prototype[R].apply(M,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(A,E,x){x||(x=0);var M=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)M[R]=E.charCodeAt(x++)|E.charCodeAt(x++)<<8|E.charCodeAt(x++)<<16|E.charCodeAt(x++)<<24;else for(R=0;16>R;++R)M[R]=E[x++]|E[x++]<<8|E[x++]<<16|E[x++]<<24;E=A.g[0],x=A.g[1],R=A.g[2];var F=A.g[3],T=E+(F^x&(R^F))+M[0]+3614090360&4294967295;E=x+(T<<7&4294967295|T>>>25),T=F+(R^E&(x^R))+M[1]+3905402710&4294967295,F=E+(T<<12&4294967295|T>>>20),T=R+(x^F&(E^x))+M[2]+606105819&4294967295,R=F+(T<<17&4294967295|T>>>15),T=x+(E^R&(F^E))+M[3]+3250441966&4294967295,x=R+(T<<22&4294967295|T>>>10),T=E+(F^x&(R^F))+M[4]+4118548399&4294967295,E=x+(T<<7&4294967295|T>>>25),T=F+(R^E&(x^R))+M[5]+1200080426&4294967295,F=E+(T<<12&4294967295|T>>>20),T=R+(x^F&(E^x))+M[6]+2821735955&4294967295,R=F+(T<<17&4294967295|T>>>15),T=x+(E^R&(F^E))+M[7]+4249261313&4294967295,x=R+(T<<22&4294967295|T>>>10),T=E+(F^x&(R^F))+M[8]+1770035416&4294967295,E=x+(T<<7&4294967295|T>>>25),T=F+(R^E&(x^R))+M[9]+2336552879&4294967295,F=E+(T<<12&4294967295|T>>>20),T=R+(x^F&(E^x))+M[10]+4294925233&4294967295,R=F+(T<<17&4294967295|T>>>15),T=x+(E^R&(F^E))+M[11]+2304563134&4294967295,x=R+(T<<22&4294967295|T>>>10),T=E+(F^x&(R^F))+M[12]+1804603682&4294967295,E=x+(T<<7&4294967295|T>>>25),T=F+(R^E&(x^R))+M[13]+4254626195&4294967295,F=E+(T<<12&4294967295|T>>>20),T=R+(x^F&(E^x))+M[14]+2792965006&4294967295,R=F+(T<<17&4294967295|T>>>15),T=x+(E^R&(F^E))+M[15]+1236535329&4294967295,x=R+(T<<22&4294967295|T>>>10),T=E+(R^F&(x^R))+M[1]+4129170786&4294967295,E=x+(T<<5&4294967295|T>>>27),T=F+(x^R&(E^x))+M[6]+3225465664&4294967295,F=E+(T<<9&4294967295|T>>>23),T=R+(E^x&(F^E))+M[11]+643717713&4294967295,R=F+(T<<14&4294967295|T>>>18),T=x+(F^E&(R^F))+M[0]+3921069994&4294967295,x=R+(T<<20&4294967295|T>>>12),T=E+(R^F&(x^R))+M[5]+3593408605&4294967295,E=x+(T<<5&4294967295|T>>>27),T=F+(x^R&(E^x))+M[10]+38016083&4294967295,F=E+(T<<9&4294967295|T>>>23),T=R+(E^x&(F^E))+M[15]+3634488961&4294967295,R=F+(T<<14&4294967295|T>>>18),T=x+(F^E&(R^F))+M[4]+3889429448&4294967295,x=R+(T<<20&4294967295|T>>>12),T=E+(R^F&(x^R))+M[9]+568446438&4294967295,E=x+(T<<5&4294967295|T>>>27),T=F+(x^R&(E^x))+M[14]+3275163606&4294967295,F=E+(T<<9&4294967295|T>>>23),T=R+(E^x&(F^E))+M[3]+4107603335&4294967295,R=F+(T<<14&4294967295|T>>>18),T=x+(F^E&(R^F))+M[8]+1163531501&4294967295,x=R+(T<<20&4294967295|T>>>12),T=E+(R^F&(x^R))+M[13]+2850285829&4294967295,E=x+(T<<5&4294967295|T>>>27),T=F+(x^R&(E^x))+M[2]+4243563512&4294967295,F=E+(T<<9&4294967295|T>>>23),T=R+(E^x&(F^E))+M[7]+1735328473&4294967295,R=F+(T<<14&4294967295|T>>>18),T=x+(F^E&(R^F))+M[12]+2368359562&4294967295,x=R+(T<<20&4294967295|T>>>12),T=E+(x^R^F)+M[5]+4294588738&4294967295,E=x+(T<<4&4294967295|T>>>28),T=F+(E^x^R)+M[8]+2272392833&4294967295,F=E+(T<<11&4294967295|T>>>21),T=R+(F^E^x)+M[11]+1839030562&4294967295,R=F+(T<<16&4294967295|T>>>16),T=x+(R^F^E)+M[14]+4259657740&4294967295,x=R+(T<<23&4294967295|T>>>9),T=E+(x^R^F)+M[1]+2763975236&4294967295,E=x+(T<<4&4294967295|T>>>28),T=F+(E^x^R)+M[4]+1272893353&4294967295,F=E+(T<<11&4294967295|T>>>21),T=R+(F^E^x)+M[7]+4139469664&4294967295,R=F+(T<<16&4294967295|T>>>16),T=x+(R^F^E)+M[10]+3200236656&4294967295,x=R+(T<<23&4294967295|T>>>9),T=E+(x^R^F)+M[13]+681279174&4294967295,E=x+(T<<4&4294967295|T>>>28),T=F+(E^x^R)+M[0]+3936430074&4294967295,F=E+(T<<11&4294967295|T>>>21),T=R+(F^E^x)+M[3]+3572445317&4294967295,R=F+(T<<16&4294967295|T>>>16),T=x+(R^F^E)+M[6]+76029189&4294967295,x=R+(T<<23&4294967295|T>>>9),T=E+(x^R^F)+M[9]+3654602809&4294967295,E=x+(T<<4&4294967295|T>>>28),T=F+(E^x^R)+M[12]+3873151461&4294967295,F=E+(T<<11&4294967295|T>>>21),T=R+(F^E^x)+M[15]+530742520&4294967295,R=F+(T<<16&4294967295|T>>>16),T=x+(R^F^E)+M[2]+3299628645&4294967295,x=R+(T<<23&4294967295|T>>>9),T=E+(R^(x|~F))+M[0]+4096336452&4294967295,E=x+(T<<6&4294967295|T>>>26),T=F+(x^(E|~R))+M[7]+1126891415&4294967295,F=E+(T<<10&4294967295|T>>>22),T=R+(E^(F|~x))+M[14]+2878612391&4294967295,R=F+(T<<15&4294967295|T>>>17),T=x+(F^(R|~E))+M[5]+4237533241&4294967295,x=R+(T<<21&4294967295|T>>>11),T=E+(R^(x|~F))+M[12]+1700485571&4294967295,E=x+(T<<6&4294967295|T>>>26),T=F+(x^(E|~R))+M[3]+2399980690&4294967295,F=E+(T<<10&4294967295|T>>>22),T=R+(E^(F|~x))+M[10]+4293915773&4294967295,R=F+(T<<15&4294967295|T>>>17),T=x+(F^(R|~E))+M[1]+2240044497&4294967295,x=R+(T<<21&4294967295|T>>>11),T=E+(R^(x|~F))+M[8]+1873313359&4294967295,E=x+(T<<6&4294967295|T>>>26),T=F+(x^(E|~R))+M[15]+4264355552&4294967295,F=E+(T<<10&4294967295|T>>>22),T=R+(E^(F|~x))+M[6]+2734768916&4294967295,R=F+(T<<15&4294967295|T>>>17),T=x+(F^(R|~E))+M[13]+1309151649&4294967295,x=R+(T<<21&4294967295|T>>>11),T=E+(R^(x|~F))+M[4]+4149444226&4294967295,E=x+(T<<6&4294967295|T>>>26),T=F+(x^(E|~R))+M[11]+3174756917&4294967295,F=E+(T<<10&4294967295|T>>>22),T=R+(E^(F|~x))+M[2]+718787259&4294967295,R=F+(T<<15&4294967295|T>>>17),T=x+(F^(R|~E))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+E&4294967295,A.g[1]=A.g[1]+(R+(T<<21&4294967295|T>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+F&4294967295}i.prototype.u=function(A,E){E===void 0&&(E=A.length);for(var x=E-this.blockSize,M=this.B,R=this.h,F=0;F<E;){if(R==0)for(;F<=x;)r(this,A,F),F+=this.blockSize;if(typeof A=="string"){for(;F<E;)if(M[R++]=A.charCodeAt(F++),R==this.blockSize){r(this,M),R=0;break}}else for(;F<E;)if(M[R++]=A[F++],R==this.blockSize){r(this,M),R=0;break}}this.h=R,this.o+=E},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var E=1;E<A.length-8;++E)A[E]=0;var x=8*this.o;for(E=A.length-8;E<A.length;++E)A[E]=x&255,x/=256;for(this.u(A),A=Array(16),E=x=0;4>E;++E)for(var M=0;32>M;M+=8)A[x++]=this.g[E]>>>M&255;return A};function o(A,E){var x=c;return Object.prototype.hasOwnProperty.call(x,A)?x[A]:x[A]=E(A)}function s(A,E){this.h=E;for(var x=[],M=!0,R=A.length-1;0<=R;R--){var F=A[R]|0;M&&F==E||(x[R]=F,M=!1)}this.g=x}var c={};function u(A){return-128<=A&&128>A?o(A,function(E){return new s([E|0],0>E?-1:0)}):new s([A|0],0>A?-1:0)}function f(A){if(isNaN(A)||!isFinite(A))return _;if(0>A)return O(f(-A));for(var E=[],x=1,M=0;A>=x;M++)E[M]=A/x|0,x*=4294967296;return new s(E,0)}function p(A,E){if(A.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(A.charAt(0)=="-")return O(p(A.substring(1),E));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(E,8)),M=_,R=0;R<A.length;R+=8){var F=Math.min(8,A.length-R),T=parseInt(A.substring(R,R+F),E);8>F?(F=f(Math.pow(E,F)),M=M.j(F).add(f(T))):(M=M.j(x),M=M.add(f(T)))}return M}var _=u(0),b=u(1),I=u(16777216);t=s.prototype,t.m=function(){if(P(this))return-O(this).m();for(var A=0,E=1,x=0;x<this.g.length;x++){var M=this.i(x);A+=(0<=M?M:4294967296+M)*E,E*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(P(this))return"-"+O(this).toString(A);for(var E=f(Math.pow(A,6)),x=this,M="";;){var R=ae(x,E).g;x=W(x,R.j(E));var F=((0<x.g.length?x.g[0]:x.h)>>>0).toString(A);if(x=R,S(x))return F+M;for(;6>F.length;)F="0"+F;M=F+M}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var E=0;E<A.g.length;E++)if(A.g[E]!=0)return!1;return!0}function P(A){return A.h==-1}t.l=function(A){return A=W(this,A),P(A)?-1:S(A)?0:1};function O(A){for(var E=A.g.length,x=[],M=0;M<E;M++)x[M]=~A.g[M];return new s(x,~A.h).add(b)}t.abs=function(){return P(this)?O(this):this},t.add=function(A){for(var E=Math.max(this.g.length,A.g.length),x=[],M=0,R=0;R<=E;R++){var F=M+(this.i(R)&65535)+(A.i(R)&65535),T=(F>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);M=T>>>16,F&=65535,T&=65535,x[R]=T<<16|F}return new s(x,x[x.length-1]&-2147483648?-1:0)};function W(A,E){return A.add(O(E))}t.j=function(A){if(S(this)||S(A))return _;if(P(this))return P(A)?O(this).j(O(A)):O(O(this).j(A));if(P(A))return O(this.j(O(A)));if(0>this.l(I)&&0>A.l(I))return f(this.m()*A.m());for(var E=this.g.length+A.g.length,x=[],M=0;M<2*E;M++)x[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<A.g.length;R++){var F=this.i(M)>>>16,T=this.i(M)&65535,Gt=A.i(R)>>>16,Ki=A.i(R)&65535;x[2*M+2*R]+=T*Ki,X(x,2*M+2*R),x[2*M+2*R+1]+=F*Ki,X(x,2*M+2*R+1),x[2*M+2*R+1]+=T*Gt,X(x,2*M+2*R+1),x[2*M+2*R+2]+=F*Gt,X(x,2*M+2*R+2)}for(M=0;M<E;M++)x[M]=x[2*M+1]<<16|x[2*M];for(M=E;M<2*E;M++)x[M]=0;return new s(x,0)};function X(A,E){for(;(A[E]&65535)!=A[E];)A[E+1]+=A[E]>>>16,A[E]&=65535,E++}function Z(A,E){this.g=A,this.h=E}function ae(A,E){if(S(E))throw Error("division by zero");if(S(A))return new Z(_,_);if(P(A))return E=ae(O(A),E),new Z(O(E.g),O(E.h));if(P(E))return E=ae(A,O(E)),new Z(O(E.g),E.h);if(30<A.g.length){if(P(A)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var x=b,M=E;0>=M.l(A);)x=_e(x),M=_e(M);var R=me(x,1),F=me(M,1);for(M=me(M,2),x=me(x,2);!S(M);){var T=F.add(M);0>=T.l(A)&&(R=R.add(x),F=T),M=me(M,1),x=me(x,1)}return E=W(A,R.j(E)),new Z(R,E)}for(R=_;0<=A.l(E);){for(x=Math.max(1,Math.floor(A.m()/E.m())),M=Math.ceil(Math.log(x)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),F=f(x),T=F.j(E);P(T)||0<T.l(A);)x-=M,F=f(x),T=F.j(E);S(F)&&(F=b),R=R.add(F),A=W(A,T)}return new Z(R,A)}t.A=function(A){return ae(this,A).h},t.and=function(A){for(var E=Math.max(this.g.length,A.g.length),x=[],M=0;M<E;M++)x[M]=this.i(M)&A.i(M);return new s(x,this.h&A.h)},t.or=function(A){for(var E=Math.max(this.g.length,A.g.length),x=[],M=0;M<E;M++)x[M]=this.i(M)|A.i(M);return new s(x,this.h|A.h)},t.xor=function(A){for(var E=Math.max(this.g.length,A.g.length),x=[],M=0;M<E;M++)x[M]=this.i(M)^A.i(M);return new s(x,this.h^A.h)};function _e(A){for(var E=A.g.length+1,x=[],M=0;M<E;M++)x[M]=A.i(M)<<1|A.i(M-1)>>>31;return new s(x,A.h)}function me(A,E){var x=E>>5;E%=32;for(var M=A.g.length-x,R=[],F=0;F<M;F++)R[F]=0<E?A.i(F+x)>>>E|A.i(F+x+1)<<32-E:A.i(F+x);return new s(R,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,jw=p1.Md5=i,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=f,s.fromString=p,As=p1.Integer=s}).apply(typeof f1<"u"?f1:typeof self<"u"?self:typeof window<"u"?window:{});var Og=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ko={};var Uw,zw,Ql,$w,Oh,Fg,Hw,qw,Gw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Og=="object"&&Og];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var N=d[C];if(!(N in y))break e;y=y[N]}d=d[d.length-1],C=y[d],g=g(C),g!=C&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,C=!1,N={next:function(){if(!C&&y<d.length){var $=y++;return{value:g($,d[$]),done:!1}}return C=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var s=s||{},c=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,y){return d.call.apply(d.bind,arguments)}function _(d,g,y){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,C),d.apply(g,N)}}return function(){return d.apply(g,arguments)}}function b(d,g,y){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,b.apply(null,arguments)}function I(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function S(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(C,N,$){for(var ie=Array(arguments.length-2),He=2;He<arguments.length;He++)ie[He-2]=arguments[He];return g.prototype[N].apply(C,ie)}}function P(d){let g=d.length;if(0<g){let y=Array(g);for(let C=0;C<g;C++)y[C]=d[C];return y}return[]}function O(d,g){for(let y=1;y<arguments.length;y++){let C=arguments[y];if(u(C)){let N=d.length||0,$=C.length||0;d.length=N+$;for(let ie=0;ie<$;ie++)d[N+ie]=C[ie]}else d.push(C)}}class W{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function X(d){return/^[\s\xa0]*$/.test(d)}function Z(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function ae(d){return ae[" "](d),d}ae[" "]=function(){};var _e=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function me(d,g,y){for(let C in d)g.call(y,d[C],C,d)}function A(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function E(d){let g={};for(let y in d)g[y]=d[y];return g}let x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(d,g){let y,C;for(let N=1;N<arguments.length;N++){C=arguments[N];for(y in C)d[y]=C[y];for(let $=0;$<x.length;$++)y=x[$],Object.prototype.hasOwnProperty.call(C,y)&&(d[y]=C[y])}}function R(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function F(d){c.setTimeout(()=>{throw d},0)}function T(){var d=Dt;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class Gt{constructor(){this.h=this.g=null}add(g,y){let C=Ki.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var Ki=new W(()=>new Oe,d=>d.reset());class Oe{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Ho,Ee=!1,Dt=new Gt,xn=()=>{let d=c.Promise.resolve(void 0);Ho=()=>{d.then(kn)}};var kn=()=>{for(var d;d=T();){try{d.h.call(d.g)}catch(y){F(y)}var g=Ki;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Ee=!1};function bt(){this.s=this.s,this.C=this.C}bt.prototype.s=!1,bt.prototype.ma=function(){this.s||(this.s=!0,this.N())},bt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Xe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return d}();function jn(d,g){if(Re.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(_e){e:{try{ae(g.nodeName);var N=!0;break e}catch{}N=!1}N||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:br[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&jn.aa.h.call(this)}}S(jn,Re);var br={2:"touch",3:"pen",4:"mouse"};jn.prototype.h=function(){jn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var qo="closure_listenable_"+(1e6*Math.random()|0),Zu=0;function Ku(d,g,y,C,N){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=N,this.key=++Zu,this.da=this.fa=!1}function wr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Go(d){this.src=d,this.g={},this.h=0}Go.prototype.add=function(d,g,y,C,N){var $=d.toString();d=this.g[$],d||(d=this.g[$]=[],this.h++);var ie=Tc(d,g,C,N);return-1<ie?(g=d[ie],y||(g.fa=!1)):(g=new Ku(g,this.src,$,!!C,N),g.fa=y,d.push(g)),g};function Yu(d,g){var y=g.type;if(y in d.g){var C=d.g[y],N=Array.prototype.indexOf.call(C,g,void 0),$;($=0<=N)&&Array.prototype.splice.call(C,N,1),$&&(wr(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function Tc(d,g,y,C){for(var N=0;N<d.length;++N){var $=d[N];if(!$.da&&$.listener==g&&$.capture==!!y&&$.ha==C)return N}return-1}var Sc="closure_lm_"+(1e6*Math.random()|0),Qs={};function Xs(d,g,y,C,N){if(C&&C.once)return Ac(d,g,y,C,N);if(Array.isArray(g)){for(var $=0;$<g.length;$++)Xs(d,g[$],y,C,N);return null}return y=Rc(y),d&&d[qo]?d.K(g,y,f(C)?!!C.capture:!!C,N):Ff(d,g,y,!1,C,N)}function Ff(d,g,y,C,N,$){if(!g)throw Error("Invalid event type");var ie=f(N)?!!N.capture:!!N,He=Js(d);if(He||(d[Sc]=He=new Go(d)),y=He.add(g,y,C,ie,$),y.proxy)return y;if(C=Lf(),y.proxy=C,C.src=d,C.listener=y,d.addEventListener)Xe||(N=ie),N===void 0&&(N=!1),d.addEventListener(g.toString(),C,N);else if(d.attachEvent)d.attachEvent(Vf(g.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Lf(){function d(y){return g.call(d.src,d.listener,y)}let g=Nv;return d}function Ac(d,g,y,C,N){if(Array.isArray(g)){for(var $=0;$<g.length;$++)Ac(d,g[$],y,C,N);return null}return y=Rc(y),d&&d[qo]?d.L(g,y,f(C)?!!C.capture:!!C,N):Ff(d,g,y,!0,C,N)}function Qu(d,g,y,C,N){if(Array.isArray(g))for(var $=0;$<g.length;$++)Qu(d,g[$],y,C,N);else C=f(C)?!!C.capture:!!C,y=Rc(y),d&&d[qo]?(d=d.i,g=String(g).toString(),g in d.g&&($=d.g[g],y=Tc($,y,C,N),-1<y&&(wr($[y]),Array.prototype.splice.call($,y,1),$.length==0&&(delete d.g[g],d.h--)))):d&&(d=Js(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Tc(g,y,C,N)),(y=-1<d?g[d]:null)&&Mc(y))}function Mc(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[qo])Yu(g.i,d);else{var y=d.type,C=d.proxy;g.removeEventListener?g.removeEventListener(y,C,d.capture):g.detachEvent?g.detachEvent(Vf(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=Js(g))?(Yu(y,d),y.h==0&&(y.src=null,g[Sc]=null)):wr(d)}}}function Vf(d){return d in Qs?Qs[d]:Qs[d]="on"+d}function Nv(d,g){if(d.da)d=!0;else{g=new jn(g,this);var y=d.listener,C=d.ha||d.src;d.fa&&Mc(d),d=y.call(C,g)}return d}function Js(d){return d=d[Sc],d instanceof Go?d:null}var Pc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rc(d){return typeof d=="function"?d:(d[Pc]||(d[Pc]=function(g){return d.handleEvent(g)}),d[Pc])}function vn(){bt.call(this),this.i=new Go(this),this.M=this,this.F=null}S(vn,bt),vn.prototype[qo]=!0,vn.prototype.removeEventListener=function(d,g,y,C){Qu(this,d,g,y,C)};function yn(d,g){var y,C=d.F;if(C)for(y=[];C;C=C.F)y.push(C);if(d=d.M,C=g.type||g,typeof g=="string")g=new Re(g,d);else if(g instanceof Re)g.target=g.target||d;else{var N=g;g=new Re(C,d),M(g,N)}if(N=!0,y)for(var $=y.length-1;0<=$;$--){var ie=g.g=y[$];N=ea(ie,C,!0,g)&&N}if(ie=g.g=d,N=ea(ie,C,!0,g)&&N,N=ea(ie,C,!1,g)&&N,y)for($=0;$<y.length;$++)ie=g.g=y[$],N=ea(ie,C,!1,g)&&N}vn.prototype.N=function(){if(vn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],C=0;C<y.length;C++)wr(y[C]);delete d.g[g],d.h--}}this.F=null},vn.prototype.K=function(d,g,y,C){return this.i.add(String(d),g,!1,y,C)},vn.prototype.L=function(d,g,y,C){return this.i.add(String(d),g,!0,y,C)};function ea(d,g,y,C){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var N=!0,$=0;$<g.length;++$){var ie=g[$];if(ie&&!ie.da&&ie.capture==y){var He=ie.listener,$t=ie.ha||ie.src;ie.fa&&Yu(d.i,ie),N=He.call($t,C)!==!1&&N}}return N&&!C.defaultPrevented}function Bf(d,g,y){if(typeof d=="function")y&&(d=b(d,y));else if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function Xu(d){d.g=Bf(()=>{d.g=null,d.i&&(d.i=!1,Xu(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class Ju extends bt{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Xu(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wo(d){bt.call(this),this.h=d,this.g={}}S(Wo,bt);var jf=[];function Zo(d){me(d.g,function(g,y){this.g.hasOwnProperty(y)&&Mc(g)},d),d.g={}}Wo.prototype.N=function(){Wo.aa.N.call(this),Zo(this)},Wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ed=c.JSON.stringify,Ov=c.JSON.parse,Uf=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function kc(){}kc.prototype.h=null;function td(d){return d.h||(d.h=d.i())}function zf(){}var ta={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function nd(){Re.call(this,"d")}S(nd,Re);function id(){Re.call(this,"c")}S(id,Re);var oo={},$f=null;function Ko(){return $f=$f||new vn}oo.La="serverreachability";function Hf(d){Re.call(this,oo.La,d)}S(Hf,Re);function na(d){let g=Ko();yn(g,new Hf(g))}oo.STAT_EVENT="statevent";function qf(d,g){Re.call(this,oo.STAT_EVENT,d),this.stat=g}S(qf,Re);function Dn(d){let g=Ko();yn(g,new qf(g,d))}oo.Ma="timingevent";function ui(d,g){Re.call(this,oo.Ma,d),this.size=g}S(ui,Re);function ge(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function Yo(){this.g=!0}Yo.prototype.xa=function(){this.g=!1};function Gf(d,g,y,C,N,$){d.info(function(){if(d.g)if($)for(var ie="",He=$.split("&"),$t=0;$t<He.length;$t++){var nt=He[$t].split("=");if(1<nt.length){var kt=nt[0];nt=nt[1];var bn=kt.split("_");ie=2<=bn.length&&bn[1]=="type"?ie+(kt+"="+nt+"&"):ie+(kt+"=redacted&")}}else ie=null;else ie=$;return"XMLHTTP REQ ("+C+") [attempt "+N+"]: "+g+`
`+y+`
`+ie})}function Wf(d,g,y,C,N,$,ie){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+N+"]: "+g+`
`+y+`
`+$+" "+ie})}function so(d,g,y,C){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+Zf(d,y)+(C?" "+C:"")})}function rd(d,g){d.info(function(){return"TIMEOUT: "+g})}Yo.prototype.info=function(){};function Zf(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var C=y[d];if(!(2>C.length)){var N=C[1];if(Array.isArray(N)&&!(1>N.length)){var $=N[0];if($!="noop"&&$!="stop"&&$!="close")for(var ie=1;ie<N.length;ie++)N[ie]=""}}}}return ed(y)}catch{return g}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},od={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},sd;function Nc(){}S(Nc,kc),Nc.prototype.g=function(){return new XMLHttpRequest},Nc.prototype.i=function(){return{}},sd=new Nc;function Ir(d,g,y,C){this.j=d,this.i=g,this.l=y,this.R=C||1,this.U=new Wo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Kf}function Kf(){this.i=null,this.g="",this.h=!1}var ad={},cd={};function Qo(d,g,y){d.L=1,d.v=Jo(Tn(g)),d.m=y,d.P=!0,Yf(d,null)}function Yf(d,g){d.F=Date.now(),Oc(d),d.A=Tn(d.v);var y=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),wt(y.i,"t",C),d.C=0,y=d.j.J,d.h=new Kf,d.g=pa(d.j,y?g:null,!d.m),0<d.O&&(d.M=new Ju(b(d.Y,d,d.g),d.O)),g=d.U,y=d.g,C=d.ca;var N="readystatechange";Array.isArray(N)||(N&&(jf[0]=N.toString()),N=jf);for(var $=0;$<N.length;$++){var ie=Xs(y,N[$],C||g.handleEvent,!1,g.h||g);if(!ie)break;g.g[ie.key]=ie}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),na(),Gf(d.i,d.u,d.A,d.l,d.R,d.m)}Ir.prototype.ca=function(d){d=d.target;let g=this.M;g&&hi(d)==3?g.j():this.Y(d)},Ir.prototype.Y=function(d){try{if(d==this.g)e:{let bn=hi(this.g);var g=this.g.Ba();let pi=this.g.Z();if(!(3>bn)&&(bn!=3||this.g&&(this.h.h||this.g.oa()||ip(this.g)))){this.J||bn!=4||g==7||(g==8||0>=pi?na(3):na(2)),ia(this);var y=this.g.Z();this.X=y;t:if(Qf(this)){var C=ip(this.g);d="";var N=C.length,$=hi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),Qi(this);var ie="";break t}this.h.i=new c.TextDecoder}for(g=0;g<N;g++)this.h.h=!0,d+=this.h.i.decode(C[g],{stream:!($&&g==N-1)});C.length=0,this.h.g+=d,this.C=0,ie=this.h.g}else ie=this.g.oa();if(this.o=y==200,Wf(this.i,this.u,this.A,this.l,this.R,bn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var He,$t=this.g;if((He=$t.g?$t.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(He)){var nt=He;break t}}nt=null}if(y=nt)so(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fc(this,y);else{this.o=!1,this.s=3,Dn(12),Cr(this),Qi(this);break e}}if(this.P){y=!0;let mi;for(;!this.J&&this.C<ie.length;)if(mi=Fv(this,ie),mi==cd){bn==4&&(this.s=4,Dn(14),y=!1),so(this.i,this.l,null,"[Incomplete Response]");break}else if(mi==ad){this.s=4,Dn(15),so(this.i,this.l,ie,"[Invalid Chunk]"),y=!1;break}else so(this.i,this.l,mi,null),Fc(this,mi);if(Qf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),bn!=4||ie.length!=0||this.h.h||(this.s=1,Dn(16),y=!1),this.o=this.o&&y,!y)so(this.i,this.l,ie,"[Invalid Chunked Response]"),Cr(this),Qi(this);else if(0<ie.length&&!this.W){this.W=!0;var kt=this.j;kt.g==this&&kt.ba&&!kt.M&&(kt.j.info("Great, no buffering proxy detected. Bytes received: "+ie.length),zc(kt),kt.M=!0,Dn(11))}}else so(this.i,this.l,ie,null),Fc(this,ie);bn==4&&Cr(this),this.o&&!this.J&&(bn==4?ap(this.j,this):(this.o=!1,Oc(this)))}else rp(this.g),y==400&&0<ie.indexOf("Unknown SID")?(this.s=3,Dn(12)):(this.s=0,Dn(13)),Cr(this),Qi(this)}}}catch{}finally{}};function Qf(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Fv(d,g){var y=d.C,C=g.indexOf(`
`,y);return C==-1?cd:(y=Number(g.substring(y,C)),isNaN(y)?ad:(C+=1,C+y>g.length?cd:(g=g.slice(C,C+y),d.C=C+y,g)))}Ir.prototype.cancel=function(){this.J=!0,Cr(this)};function Oc(d){d.S=Date.now()+d.I,Xf(d,d.I)}function Xf(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ge(b(d.ba,d),g)}function ia(d){d.B&&(c.clearTimeout(d.B),d.B=null)}Ir.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(rd(this.i,this.A),this.L!=2&&(na(),Dn(17)),Cr(this),this.s=2,Qi(this)):Xf(this,this.S-d)};function Qi(d){d.j.G==0||d.J||ap(d.j,d)}function Cr(d){ia(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,Zo(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Fc(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||Er(y.h,d))){if(!d.K&&Er(y.h,d)&&y.G==3){try{var C=y.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var N=C;if(N[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)$c(y),Bc(y);else break e;bd(y),Dn(18)}}else y.za=N[1],0<y.za-y.T&&37500>N[2]&&y.F&&y.v==0&&!y.C&&(y.C=ge(b(y.Za,y),6e3));if(1>=oa(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else uo(y,11)}else if((d.K||y.g==d)&&$c(y),!X(g))for(N=y.Da.g.parse(g),g=0;g<N.length;g++){let nt=N[g];if(y.T=nt[0],nt=nt[1],y.G==2)if(nt[0]=="c"){y.K=nt[1],y.ia=nt[2];let kt=nt[3];kt!=null&&(y.la=kt,y.j.info("VER="+y.la));let bn=nt[4];bn!=null&&(y.Aa=bn,y.j.info("SVER="+y.Aa));let pi=nt[5];pi!=null&&typeof pi=="number"&&0<pi&&(C=1.5*pi,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;let mi=d.g;if(mi){let Sr=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sr){var $=C.h;$.g||Sr.indexOf("spdy")==-1&&Sr.indexOf("quic")==-1&&Sr.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(xr($,$.h),$.h=null))}if(C.D){let Gc=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;Gc&&(C.ya=Gc,ht(C.I,C.D,Gc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var ie=d;if(C.qa=Cd(C,C.J?C.ia:null,C.W),ie.K){Lc(C.h,ie);var He=ie,$t=C.L;$t&&(He.I=$t),He.B&&(ia(He),Oc(He)),C.g=ie}else Uc(C);0<y.i.length&&jc(y)}else nt[0]!="stop"&&nt[0]!="close"||uo(y,7);else y.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?uo(y,7):fa(y):nt[0]!="noop"&&y.l&&y.l.ta(nt),y.v=0)}}na(4)}catch{}}var ra=class{constructor(d,g){this.g=d,this.map=g}};function tt(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Rt(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function oa(d){return d.h?1:d.g?d.g.size:0}function Er(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function xr(d,g){d.g?d.g.add(g):d.h=g}function Lc(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}tt.prototype.cancel=function(){if(this.i=Fe(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Fe(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return P(d.i)}function Wt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,C=0;C<y;C++)g.push(d[C]);return g}g=[],y=0;for(C in d)g[y++]=d[C];return g}function ld(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let C in d)g[y++]=C;return g}}}function sa(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=ld(d),C=Wt(d),N=C.length,$=0;$<N;$++)g.call(void 0,C[$],y&&y[$],d)}var Un=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lv(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var C=d[y].indexOf("="),N=null;if(0<=C){var $=d[y].substring(0,C);N=d[y].substring(C+1)}else $=d[y];g($,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Ei(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ei){this.h=d.h,Vt(this,d.j),this.o=d.o,this.g=d.g,xi(this,d.s),this.l=d.l;var g=d.i,y=new co;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Xo(this,y),this.m=d.m}else d&&(g=String(d).match(Un))?(this.h=!1,Vt(this,g[1]||"",!0),this.o=Xi(g[2]||""),this.g=Xi(g[3]||"",!0),xi(this,g[4]),this.l=Xi(g[5]||"",!0),Xo(this,g[6]||"",!0),this.m=Xi(g[7]||"")):(this.h=!1,this.i=new co(null,this.h))}Ei.prototype.toString=function(){var d=[],g=this.j;g&&d.push(ao(g,aa,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(ao(g,aa,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(ao(y,y.charAt(0)=="/"?hd:dd,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",ao(y,Jf)),d.join("")};function Tn(d){return new Ei(d)}function Vt(d,g,y){d.j=y?Xi(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function xi(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Xo(d,g,y){g instanceof co?(d.i=g,fd(d.i,d.h)):(y||(g=ao(g,Vc)),d.i=new co(g,d.h))}function ht(d,g,y){d.i.set(g,y)}function Jo(d){return ht(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Xi(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ao(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,ud),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function ud(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var aa=/[#\/\?@]/g,dd=/[#\?:]/g,hd=/[#\?]/g,Vc=/[#\?@]/g,Jf=/#/g;function co(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Dr(d){d.g||(d.g=new Map,d.h=0,d.i&&Lv(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=co.prototype,t.add=function(d,g){Dr(this),this.i=null,d=lo(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function ke(d,g){Dr(d),g=lo(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function di(d,g){return Dr(d),g=lo(d,g),d.g.has(g)}t.forEach=function(d,g){Dr(this),this.g.forEach(function(y,C){y.forEach(function(N){d.call(g,N,C,this)},this)},this)},t.na=function(){Dr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let C=0;C<g.length;C++){let N=d[C];for(let $=0;$<N.length;$++)y.push(g[C])}return y},t.V=function(d){Dr(this);let g=[];if(typeof d=="string")di(this,d)&&(g=g.concat(this.g.get(lo(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return Dr(this),this.i=null,d=lo(this,d),di(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function wt(d,g,y){ke(d,g),0<y.length&&(d.i=null,d.g.set(lo(d,g),P(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var C=g[y];let $=encodeURIComponent(String(C)),ie=this.V(C);for(C=0;C<ie.length;C++){var N=$;ie[C]!==""&&(N+="="+encodeURIComponent(String(ie[C]))),d.push(N)}}return this.i=d.join("&")};function lo(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function fd(d,g){g&&!d.j&&(Dr(d),d.i=null,d.g.forEach(function(y,C){var N=C.toLowerCase();C!=N&&(ke(this,C),wt(this,N,y))},d)),d.j=g}function pd(d,g){let y=new Yo;if(c.Image){let C=new Image;C.onload=I(Nn,y,"TestLoadImage: loaded",!0,g,C),C.onerror=I(Nn,y,"TestLoadImage: error",!1,g,C),C.onabort=I(Nn,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=I(Nn,y,"TestLoadImage: timeout",!1,g,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else g(!1)}function md(d,g){let y=new Yo,C=new AbortController,N=setTimeout(()=>{C.abort(),Nn(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:C.signal}).then($=>{clearTimeout(N),$.ok?Nn(y,"TestPingServer: ok",!0,g):Nn(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(N),Nn(y,"TestPingServer: error",!1,g)})}function Nn(d,g,y,C,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),C(y)}catch{}}function gd(){this.g=new Uf}function ca(d,g,y){let C=y||"";try{sa(d,function(N,$){let ie=N;f(N)&&(ie=ed(N)),g.push(C+$+"="+encodeURIComponent(ie))})}catch(N){throw g.push(C+"type="+encodeURIComponent("_badmap")),N}}function Zt(d){this.l=d.Ub||null,this.j=d.eb||!1}S(Zt,kc),Zt.prototype.g=function(){return new Di(this.l,this.j)},Zt.prototype.i=function(d){return function(){return d}}({});function Di(d,g){vn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Di,vn),t=Di.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,la(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,es(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,la(this)),this.g&&(this.readyState=3,la(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_d(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function _d(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?es(this):la(this),this.readyState==3&&_d(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,es(this))},t.Qa=function(d){this.g&&(this.response=d,es(this))},t.ga=function(){this.g&&es(this)};function es(d){d.readyState=4,d.l=null,d.j=null,d.v=null,la(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function la(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function vd(d){let g="";return me(d,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function ua(d,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=vd(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):ht(d,g,y))}function zt(d){vn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(zt,vn);var ep=/^https?$/i,Je=["POST","PUT"];t=zt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():sd.g(),this.v=this.o?td(this.o):td(sd),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch($){tp(this,$);return}if(d=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var N in C)y.set(N,C[N]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(let $ of C.keys())y.set($,C.get($));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find($=>$.toLowerCase()=="content-type"),N=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Je,g,void 0))||C||N||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[$,ie]of y)this.g.setRequestHeader($,ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{np(this),this.u=!0,this.g.send(d),this.u=!1}catch($){tp(this,$)}};function tp(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,Jn(d),da(d)}function Jn(d){d.A||(d.A=!0,yn(d,"complete"),yn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,yn(this,"complete"),yn(this,"abort"),da(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),zt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ts(this):this.bb())},t.bb=function(){ts(this)};function ts(d){if(d.h&&typeof s<"u"&&(!d.v[1]||hi(d)!=4||d.Z()!=2)){if(d.u&&hi(d)==4)Bf(d.Ea,0,d);else if(yn(d,"readystatechange"),hi(d)==4){d.h=!1;try{let ie=d.Z();e:switch(ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=ie===0){var N=String(d.D).match(Un)[1]||null;!N&&c.self&&c.self.location&&(N=c.self.location.protocol.slice(0,-1)),C=!ep.test(N?N.toLowerCase():"")}y=C}if(y)yn(d,"complete"),yn(d,"success");else{d.m=6;try{var $=2<hi(d)?d.g.statusText:""}catch{$=""}d.l=$+" ["+d.Z()+"]",Jn(d)}}finally{da(d)}}}}function da(d,g){if(d.g){np(d);let y=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||yn(d,"ready");try{y.onreadystatechange=C}catch{}}}function np(d){d.I&&(c.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function hi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<hi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Ov(g)}};function ip(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function rp(d){let g={};d=(d.g&&2<=hi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(X(d[C]))continue;var y=R(d[C]);let N=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let $=g[N]||[];g[N]=$,$.push(y)}A(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ha(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function op(d){this.Aa=0,this.i=[],this.j=new Yo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ha("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ha("baseRetryDelayMs",5e3,d),this.cb=ha("retryDelaySeedMs",1e4,d),this.Wa=ha("forwardChannelMaxRetries",2,d),this.wa=ha("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new tt(d&&d.concurrentRequestLimit),this.Da=new gd,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=op.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,C){Dn(0),this.W=d,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=Cd(this,null,this.W),jc(this)};function fa(d){if(fi(d),d.G==3){var g=d.U++,y=Tn(d.I);if(ht(y,"SID",d.K),ht(y,"RID",g),ht(y,"TYPE","terminate"),ns(d,y),g=new Ir(d,d.j,g),g.L=2,g.v=Jo(Tn(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=pa(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Oc(g)}Id(d)}function Bc(d){d.g&&(zc(d),d.g.cancel(),d.g=null)}function fi(d){Bc(d),d.u&&(c.clearTimeout(d.u),d.u=null),$c(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function jc(d){if(!Rt(d.h)&&!d.s){d.s=!0;var g=d.Ga;Ho||xn(),Ee||(Ho(),Ee=!0),Dt.add(g,d),d.B=0}}function sp(d,g){return oa(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ge(b(d.Ga,d,g),Hc(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let N=new Ir(this,this.j,d),$=this.o;if(this.S&&($?($=E($),M($,this.S)):$=this.S),this.m!==null||this.O||(N.H=$,$=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=yd(this,N,g),y=Tn(this.I),ht(y,"RID",d),ht(y,"CVER",22),this.D&&ht(y,"X-HTTP-Session-Id",this.D),ns(this,y),$&&(this.O?g="headers="+encodeURIComponent(String(vd($)))+"&"+g:this.m&&ua(y,this.m,$)),xr(this.h,N),this.Ua&&ht(y,"TYPE","init"),this.P?(ht(y,"$req",g),ht(y,"SID","null"),N.T=!0,Qo(N,y,null)):Qo(N,y,g),this.G=2}}else this.G==3&&(d?Ji(this,d):this.i.length==0||Rt(this.h)||Ji(this))};function Ji(d,g){var y;g?y=g.l:y=d.U++;let C=Tn(d.I);ht(C,"SID",d.K),ht(C,"RID",y),ht(C,"AID",d.T),ns(d,C),d.m&&d.o&&ua(C,d.m,d.o),y=new Ir(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=yd(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),xr(d.h,y),Qo(y,C,g)}function ns(d,g){d.H&&me(d.H,function(y,C){ht(g,C,y)}),d.l&&sa({},function(y,C){ht(g,C,y)})}function yd(d,g,y){y=Math.min(d.i.length,y);var C=d.l?b(d.l.Na,d.l,d):null;e:{var N=d.i;let $=-1;for(;;){let ie=["count="+y];$==-1?0<y?($=N[0].g,ie.push("ofs="+$)):$=0:ie.push("ofs="+$);let He=!0;for(let $t=0;$t<y;$t++){let nt=N[$t].g,kt=N[$t].map;if(nt-=$,0>nt)$=Math.max(0,N[$t].g-100),He=!1;else try{ca(kt,ie,"req"+nt+"_")}catch{C&&C(kt)}}if(He){C=ie.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,C}function Uc(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Ho||xn(),Ee||(Ho(),Ee=!0),Dt.add(g,d),d.v=0}}function bd(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ge(b(d.Fa,d),Hc(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,wd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ge(b(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Dn(10),Bc(this),wd(this))};function zc(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function wd(d){d.g=new Ir(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Tn(d.qa);ht(g,"RID","rpc"),ht(g,"SID",d.K),ht(g,"AID",d.T),ht(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&ht(g,"TO",d.ja),ht(g,"TYPE","xmlhttp"),ns(d,g),d.m&&d.o&&ua(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=Jo(Tn(g)),y.m=null,y.P=!0,Yf(y,d)}t.Za=function(){this.C!=null&&(this.C=null,Bc(this),bd(this),Dn(19))};function $c(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function ap(d,g){var y=null;if(d.g==g){$c(d),zc(d),d.g=null;var C=2}else if(Er(d.h,g))y=g.D,Lc(d.h,g),C=1;else return;if(d.G!=0){if(g.o)if(C==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var N=d.B;C=Ko(),yn(C,new ui(C,y)),jc(d)}else Uc(d);else if(N=g.s,N==3||N==0&&0<g.X||!(C==1&&sp(d,g)||C==2&&bd(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),N){case 1:uo(d,5);break;case 4:uo(d,10);break;case 3:uo(d,6);break;default:uo(d,2)}}}function Hc(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function uo(d,g){if(d.j.info("Error code "+g),g==2){var y=b(d.fb,d),C=d.Xa;let N=!C;C=new Ei(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Vt(C,"https"),Jo(C),N?pd(C.toString(),y):md(C.toString(),y)}else Dn(2);d.G=0,d.l&&d.l.sa(g),Id(d),fi(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Dn(2)):(this.j.info("Failed to ping google.com"),Dn(1))};function Id(d){if(d.G=0,d.ka=[],d.l){let g=Fe(d.h);(g.length!=0||d.i.length!=0)&&(O(d.ka,g),O(d.ka,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.ra()}}function Cd(d,g,y){var C=y instanceof Ei?Tn(y):new Ei(y);if(C.g!="")g&&(C.g=g+"."+C.g),xi(C,C.s);else{var N=c.location;C=N.protocol,g=g?g+"."+N.hostname:N.hostname,N=+N.port;var $=new Ei(null);C&&Vt($,C),g&&($.g=g),N&&xi($,N),y&&($.l=y),C=$}return y=d.D,g=d.ya,y&&g&&ht(C,y,g),ht(C,"VER",d.la),ns(d,C),C}function pa(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new zt(new Zt({eb:y})):new zt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tr(){}t=Tr.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function qc(){}qc.prototype.g=function(d,g){return new fn(d,g)};function fn(d,g){vn.call(this),this.g=new op(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!X(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!X(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ho(this)}S(fn,vn),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){fa(this.g)},fn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=ed(d),d=y);g.i.push(new ra(g.Ya++,d)),g.G==3&&jc(g)},fn.prototype.N=function(){this.g.l=null,delete this.j,fa(this.g),delete this.g,fn.aa.N.call(this)};function zn(d){nd.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}S(zn,nd);function Ed(){id.call(this),this.status=1}S(Ed,id);function ho(d){this.g=d}S(ho,Tr),ho.prototype.ua=function(){yn(this.g,"a")},ho.prototype.ta=function(d){yn(this.g,new zn(d))},ho.prototype.sa=function(d){yn(this.g,new Ed)},ho.prototype.ra=function(){yn(this.g,"b")},qc.prototype.createWebChannel=qc.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,Gw=ko.createWebChannelTransport=function(){return new qc},qw=ko.getStatEventTarget=function(){return Ko()},Hw=ko.Event=oo,Fg=ko.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Oh=ko.ErrorCode=Yi,od.COMPLETE="complete",$w=ko.EventType=od,zf.EventType=ta,ta.OPEN="a",ta.CLOSE="b",ta.ERROR="c",ta.MESSAGE="d",vn.prototype.listen=vn.prototype.K,Ql=ko.WebChannel=zf,zw=ko.FetchXmlHttpFactory=Zt,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,Uw=ko.XhrIo=zt}).apply(typeof Og<"u"?Og:typeof self<"u"?self:typeof window<"u"?window:{});var m1="@firebase/firestore";var un=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");var Su="10.12.1";var Fs=new Jc("@firebase/firestore");function nu(){return Fs.logLevel}function KC(t){Fs.setLogLevel(t)}function Q(t,...e){if(Fs.logLevel<=Mr.DEBUG){let n=e.map(YC);Fs.debug(`Firestore (${Su}): ${t}`,...n)}}function tn(t,...e){if(Fs.logLevel<=Mr.ERROR){let n=e.map(YC);Fs.error(`Firestore (${Su}): ${t}`,...n)}}function Hi(t,...e){if(Fs.logLevel<=Mr.WARN){let n=e.map(YC);Fs.warn(`Firestore (${Su}): ${t}`,...n)}}function YC(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function he(t="Unexpected state"){let e=`FIRESTORE (${Su}) INTERNAL ASSERTION FAILED: `+t;throw tn(e),new Error(e)}function ve(t,e){t||he()}function mR(t,e){t||he()}function se(t,e){return t}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Qc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Wg=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Qw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}},Xw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Jw=class{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve(),o=new dn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dn,e.enqueueRetryable(()=>r(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>k(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string"),new Wg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string"),new un(e)}},eI=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},tI=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new eI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},iI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ve(typeof n.token=="string"),this.R=n.token,new nI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function uH(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var Zg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=uH(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function Ve(t,e){return t<e?-1:t>e?1:0}function du(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function gR(t){return t+"\0"}var Kt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var be=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Kt(0,0))}static max(){return new t(new Kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Kg=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&he(),i===void 0?i=e.length-n:i>e.length-n&&he(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),s=n.get(r);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ot=class t extends Kg{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new K(q.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},dH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nn=class t extends Kg{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return dH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new K(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},s=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new K(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(s=!s,r++):c!=="."||s?(i+=c,r++):(o(),r++)}if(o(),s)throw new K(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var oe=class t{constructor(e){this.path=e}static fromPath(e){return new t(ot.fromString(e))}static fromName(e){return new t(ot.fromString(e).popFirst(5))}static empty(){return new t(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ot(e.slice()))}};var hu=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function rI(t){return t.fields.find(e=>e.kind===2)}function Ga(t){return t.fields.filter(e=>e.kind!==2)}hu.UNKNOWN_ID=-1;var cu=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var Wh=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,qi.min())}};function _R(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=be.fromTimestamp(i===1e9?new Kt(n+1,0):new Kt(n,i));return new qi(r,oe.empty(),e)}function vR(t){return new qi(t.readTime,t.key,-1)}var qi=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(be.min(),oe.empty(),-1)}static max(){return new t(be.max(),oe.empty(),-1)}};function QC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}var yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Gs(t){return k(this,null,function*(){if(t.code!==q.FAILED_PRECONDITION||t.message!==yR)throw t;Q("LocalStore","Unexpectedly lost primary lease")})}var U=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,s=!1;e.forEach(c=>{++r,c.next(()=>{++o,s&&o===r&&n()},u=>i(u))}),s=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let f=u;n(e[f]).next(p=>{s[f]=p,++c,c===o&&i(s)},p=>r(p))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var Qg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new dn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Xa(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=XC(i.target.error);this.V.reject(new Xa(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new Xa(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new sI(n)}},Ls=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Sd())===12.2&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Q("SimpleDb","Removing database:",e),Wa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ma())return!1;if(t.C())return!0;let e=Sd(),n=t.S(e),i=0<n&&n<10,r=bR(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return k(this,null,function*(){return this.db||(Q("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let s=o.target.result;n(s)},r.onblocked=()=>{i(new Xa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let s=o.target.error;s.name==="VersionError"?i(new K(q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?i(new K(q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):i(new Xa(e,s))},r.onupgradeneeded=o=>{Q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,r.transaction,o.oldVersion,this.version).next(()=>{Q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return k(this,null,function*(){let o=n==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let c=Qg.open(this.db,e,o?"readonly":"readwrite",i),u=r(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),U.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){let u=c,f=u.name!=="FirebaseError"&&s<3;if(Q("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),this.close(),!f)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function bR(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var oI=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Wa(this.B.delete())}},Xa=class extends K{constructor(e,n){super(q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function Ws(t){return t.name==="IndexedDbTransactionError"}var sI=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(Q("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(Q("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Wa(i)}add(e){return Q("SimpleDb","ADD",this.store.name,e,e),Wa(this.store.add(e))}get(e){return Wa(this.store.get(e)).next(n=>(n===void 0&&(n=null),Q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Q("SimpleDb","DELETE",this.store.name,e),Wa(this.store.delete(e))}count(){return Q("SimpleDb","COUNT",this.store.name),Wa(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new U((s,c)=>{o.onerror=u=>{c(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(i),s=[];return this.W(o,(c,u)=>{s.push(u)}).next(()=>s)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new U((r,o)=>{i.onerror=s=>{o(s.target.error)},i.onsuccess=s=>{r(s.target.result)}})}j(e,n){Q("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,s,c)=>c.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new U((i,r)=>{n.onerror=o=>{let s=XC(o.target.error);r(s)},n.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(c=>{c?s.continue():i()}):i()}})}W(e,n){let i=[];return new U((r,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let c=s.target.result;if(!c)return void r();let u=new oI(c),f=n(c.primaryKey,c.value,u);if(f instanceof U){let p=f.catch(_=>(u.done(),U.reject(_)));i.push(p)}u.isDone?r():u.K===null?c.continue():c.continue(u.K)}}).next(()=>U.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function Wa(t){return new U((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=XC(i.target.error);n(r)}})}var g1=!1;function XC(t){let e=Ls.S(Sd());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return g1||(g1=!0,setTimeout(()=>{throw i},0)),i}}return t}var aI=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>k(this,null,function*(){this.task=null;try{Q("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){Ws(n)?Q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield Gs(n)}yield this.X(6e4)}))}},cI=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return k(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return U.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!i.has(s))return Q("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,r).next(c=>{r-=c,i.add(s)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(r,o)).next(c=>(Q("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>s.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let s=vR(o);QC(s,i)>0&&(i=s)}),new qi(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var wi=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function gf(t){return t==null}function Zh(t){return t===0&&1/t==-1/0}function wR(t){return typeof t=="number"&&Number.isInteger(t)&&!Zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Kn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=_1(e)),e=hH(t.get(n),e);return _1(e)}function hH(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function _1(t){return t+""}function Gr(t){let e=t.length;if(ve(e>=2),e===2)return ve(t.charAt(0)===""&&t.charAt(1)===""),ot.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let s=t.indexOf("",o);switch((s<0||s>n)&&he(),t.charAt(s+1)){case"":let c=t.substring(o,s),u;r.length===0?u=c:(r+=c,u=r,r=""),i.push(u);break;case"":r+=t.substring(o,s),r+="\0";break;case"":r+=t.substring(o,s+1);break;default:he()}o=s+2}return new ot(i)}var v1=["userId","batchId"];function Ug(t,e){return[t,Kn(e)]}function IR(t,e,n){return[t,Kn(e),n]}var fH={},pH=["prefixPath","collectionGroup","readTime","documentId"],mH=["prefixPath","collectionGroup","documentId"],gH=["collectionGroup","readTime","prefixPath","documentId"],_H=["canonicalId","targetId"],vH=["targetId","path"],yH=["path","targetId"],bH=["collectionId","parent"],wH=["indexId","uid"],IH=["uid","sequenceNumber"],CH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EH=["indexId","uid","orderedDocumentKey"],xH=["userId","collectionPath","documentId"],DH=["userId","collectionPath","largestBatchId"],TH=["userId","collectionGroup","largestBatchId"],CR=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],SH=[...CR,"documentOverlays"],ER=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xR=ER,DR=[...xR,"indexConfiguration","indexState","indexEntries"],AH=DR;var Kh=class extends Yg{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function En(t,e){let n=se(t);return Ls.F(n._e,e)}function y1(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function uc(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ut=class t{constructor(e,n){this.comparator=e,this.root=n||Zr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new au(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new au(this.root,e,this.comparator,!1)}getReverseIterator(){return new au(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new au(this.root,e,this.comparator,!0)}},au=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Zr=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();let e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}};Zr.EMPTY=null,Zr.RED=!0,Zr.BLACK=!1;Zr.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Zr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pt=class t{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xg(this.data.getIterator())}getIteratorFrom(e){return new Xg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Xg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Xl(t){return t.hasNext()?t.getNext():void 0}var Ii=class t{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Pt(nn.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return du(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var Jg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function SR(){return typeof atob<"u"}var Cn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Jg("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let s=0;s<r.length;++s)o+=String.fromCharCode(r[s]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Cn.EMPTY_BYTE_STRING=new Cn("");var MH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fo(t){if(ve(!!t),typeof t=="string"){let e=0,n=MH.exec(t);if(ve(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vs(t){return typeof t=="string"?Cn.fromBase64String(t):Cn.fromUint8Array(t)}function $_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function JC(t){let e=t.mapValue.fields.__previous_value__;return $_(e)?JC(e):e}function Yh(t){let e=Fo(t.mapValue.fields.__local_write_time__.timestampValue);return new Kt(e.seconds,e.nanos)}var lI=class{constructor(e,n,i,r,o,s,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f}},Bs=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ns={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zg={nullValue:"NULL_VALUE"};function Ja(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$_(t)?4:AR(t)?9007199254740991:10:he()}function Qr(t,e){if(t===e)return!0;let n=Ja(t);if(n!==Ja(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yh(t).isEqual(Yh(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let s=Fo(r.timestampValue),c=Fo(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return Vs(r.bytesValue).isEqual(Vs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Yt(r.geoPointValue.latitude)===Yt(o.geoPointValue.latitude)&&Yt(r.geoPointValue.longitude)===Yt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Yt(r.integerValue)===Yt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let s=Yt(r.doubleValue),c=Yt(o.doubleValue);return s===c?Zh(s)===Zh(c):isNaN(s)&&isNaN(c)}return!1}(t,e);case 9:return du(t.arrayValue.values||[],e.arrayValue.values||[],Qr);case 10:return function(r,o){let s=r.mapValue.fields||{},c=o.mapValue.fields||{};if(y1(s)!==y1(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!Qr(s[u],c[u])))return!1;return!0}(t,e);default:return he()}}function Qh(t,e){return(t.values||[]).find(n=>Qr(n,e))!==void 0}function js(t,e){if(t===e)return 0;let n=Ja(t),i=Ja(e);if(n!==i)return Ve(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,s){let c=Yt(o.integerValue||o.doubleValue),u=Yt(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return b1(t.timestampValue,e.timestampValue);case 4:return b1(Yh(t),Yh(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(o,s){let c=Vs(o),u=Vs(s);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){let c=o.split("/"),u=s.split("/");for(let f=0;f<c.length&&f<u.length;f++){let p=Ve(c[f],u[f]);if(p!==0)return p}return Ve(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){let c=Ve(Yt(o.latitude),Yt(s.latitude));return c!==0?c:Ve(Yt(o.longitude),Yt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){let c=o.values||[],u=s.values||[];for(let f=0;f<c.length&&f<u.length;++f){let p=js(c[f],u[f]);if(p)return p}return Ve(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===Ns.mapValue&&s===Ns.mapValue)return 0;if(o===Ns.mapValue)return 1;if(s===Ns.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),f=s.fields||{},p=Object.keys(f);u.sort(),p.sort();for(let _=0;_<u.length&&_<p.length;++_){let b=Ve(u[_],p[_]);if(b!==0)return b;let I=js(c[u[_]],f[p[_]]);if(I!==0)return I}return Ve(u.length,p.length)}(t.mapValue,e.mapValue);default:throw he()}}function b1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);let n=Fo(t),i=Fo(e),r=Ve(n.seconds,i.seconds);return r!==0?r:Ve(n.nanos,i.nanos)}function fu(t){return uI(t)}function uI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=Fo(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=uI(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let s of i)o?o=!1:r+=",",r+=`${s}:${uI(n.fields[s])}`;return r+"}"}(t.mapValue):he()}function ec(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function dI(t){return!!t&&"integerValue"in t}function Xh(t){return!!t&&"arrayValue"in t}function w1(t){return!!t&&"nullValue"in t}function I1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $g(t){return!!t&&"mapValue"in t}function zh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return uc(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=zh(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=zh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function PH(t){return"nullValue"in t?zg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ec(Bs.empty(),oe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:he()}function RH(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ec(Bs.empty(),oe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?Ns:he()}function C1(t,e){let n=js(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function E1(t,e){let n=js(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Bn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!$g(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=zh(n)}setAll(e){let n=nn.emptyPath(),i={},r=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=c.popLast()}s?i[c.lastSegment()]=zh(s):r.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());$g(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];$g(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){uc(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(zh(this.value))}};function MR(t){let e=[];return uc(t.fields,(n,i)=>{let r=new nn([n]);if($g(i)){let o=MR(i.mapValue).fields;if(o.length===0)e.push(r);else for(let s of o)e.push(r.child(s))}else e.push(r)}),new Ii(e)}var hn=class t{constructor(e,n,i,r,o,s,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,be.min(),be.min(),be.min(),Bn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,be.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,be.min(),be.min(),Bn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,be.min(),be.min(),Bn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xr=class{constructor(e,n){this.position=e,this.inclusive=n}};function x1(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],s=t.position[r];if(o.field.isKeyField()?i=oe.comparator(oe.fromName(s.referenceValue),n.key):i=js(s,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function D1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qr(t.position[n],e.position[n]))return!1;return!0}var tc=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function kH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var e_=class{},et=class t extends e_{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new pI(e,n,i):n==="array-contains"?new _I(e,i):n==="in"?new t_(e,i):n==="not-in"?new vI(e,i):n==="array-contains-any"?new yI(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new mI(e,i):new gI(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(js(n,this.value)):n!==null&&Ja(this.value)===Ja(n)&&this.matchesComparison(js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xt=class t extends e_{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return pu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pu(t){return t.op==="and"}function hI(t){return t.op==="or"}function eE(t){return PR(t)&&pu(t)}function PR(t){for(let e of t.filters)if(e instanceof xt)return!1;return!0}function fI(t){if(t instanceof et)return t.field.canonicalString()+t.op.toString()+fu(t.value);if(eE(t))return t.filters.map(e=>fI(e)).join(",");{let e=t.filters.map(n=>fI(n)).join(",");return`${t.op}(${e})`}}function RR(t,e){return t instanceof et?function(i,r){return r instanceof et&&i.op===r.op&&i.field.isEqual(r.field)&&Qr(i.value,r.value)}(t,e):t instanceof xt?function(i,r){return r instanceof xt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,s,c)=>o&&RR(s,r.filters[c]),!0):!1}(t,e):void he()}function kR(t,e){let n=t.filters.concat(e);return xt.create(n,t.op)}function NR(t){return t instanceof et?function(n){return`${n.field.canonicalString()} ${n.op} ${fu(n.value)}`}(t):t instanceof xt?function(n){return n.op.toString()+" {"+n.getFilters().map(NR).join(" ,")+"}"}(t):"Filter"}var pI=class extends et{constructor(e,n,i){super(e,n,i),this.key=oe.fromName(i.referenceValue)}matches(e){let n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}},mI=class extends et{constructor(e,n){super(e,"in",n),this.keys=OR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},gI=class extends et{constructor(e,n){super(e,"not-in",n),this.keys=OR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function OR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>oe.fromName(i.referenceValue))}var _I=class extends et{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Xh(n)&&Qh(n.arrayValue,this.value)}},t_=class extends et{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Qh(this.value.arrayValue,n)}},vI=class extends et{constructor(e,n){super(e,"not-in",n)}matches(e){if(Qh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Qh(this.value.arrayValue,n)}},yI=class extends et{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Xh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Qh(this.value.arrayValue,i))}};var bI=class{constructor(e,n=null,i=[],r=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=s,this.endAt=c,this.ue=null}};function wI(t,e=null,n=[],i=[],r=null,o=null,s=null){return new bI(t,e,n,i,r,o,s)}function nc(t){let e=se(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>fI(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),gf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>fu(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>fu(i)).join(",")),e.ue=n}return e.ue}function _f(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!D1(t.startAt,e.startAt)&&D1(t.endAt,e.endAt)}function n_(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function i_(t,e){return t.filters.filter(n=>n instanceof et&&n.field.isEqual(e))}function T1(t,e,n){let i=zg,r=!0;for(let o of i_(t,e)){let s=zg,c=!0;switch(o.op){case"<":case"<=":s=PH(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,c=!1;break;case"!=":case"not-in":s=zg}C1({value:i,inclusive:r},{value:s,inclusive:c})<0&&(i=s,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];C1({value:i,inclusive:r},{value:s,inclusive:n.inclusive})<0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}function S1(t,e,n){let i=Ns,r=!0;for(let o of i_(t,e)){let s=Ns,c=!0;switch(o.op){case">=":case">":s=RH(o.value),c=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,c=!1;break;case"!=":case"not-in":s=Ns}E1({value:i,inclusive:r},{value:s,inclusive:c})>0&&(i=s,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let s=n.position[o];E1({value:i,inclusive:r},{value:s,inclusive:n.inclusive})>0&&(i=s,r=n.inclusive);break}}return{value:i,inclusive:r}}var gr=class{constructor(e,n=null,i=[],r=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function FR(t,e,n,i,r,o,s,c){return new gr(t,e,n,i,r,o,s,c)}function Au(t){return new gr(t)}function A1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tE(t){return t.collectionGroup!==null}function lu(t){let e=se(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new Pt(nn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new tc(o,i))}),n.has(nn.keyField().canonicalString())||e.ce.push(new tc(nn.keyField(),i))}return e.ce}function Yn(t){let e=se(t);return e.le||(e.le=NH(e,lu(t))),e.le}function NH(t,e){if(t.limitType==="F")return wI(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new tc(r.field,o)});let n=t.endAt?new Xr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Xr(t.startAt.position,t.startAt.inclusive):null;return wI(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function II(t,e){let n=t.filters.concat([e]);return new gr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function r_(t,e,n){return new gr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vf(t,e){return _f(Yn(t),Yn(e))&&t.limitType===e.limitType}function LR(t){return`${nc(Yn(t))}|lt:${t.limitType}`}function iu(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>NR(r)).join(", ")}]`),gf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>fu(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>fu(r)).join(",")),`Target(${i})`}(Yn(t))}; limitType=${t.limitType})`}function yf(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):oe.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of lu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(s,c,u){let f=x1(s,c,u);return s.inclusive?f<=0:f<0}(i.startAt,lu(i),r)||i.endAt&&!function(s,c,u){let f=x1(s,c,u);return s.inclusive?f>=0:f>0}(i.endAt,lu(i),r))}(t,e)}function VR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BR(t){return(e,n)=>{let i=!1;for(let r of lu(t)){let o=OH(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function OH(t,e,n){let i=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,s,c){let u=s.data.field(o),f=c.data.field(o);return u!==null&&f!==null?js(u,f):he()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return he()}}var Jr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){uc(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return TR(this.inner)}size(){return this.innerSize}};var FH=new Ut(oe.comparator);function li(){return FH}var jR=new Ut(oe.comparator);function jh(...t){let e=jR;for(let n of t)e=e.insert(n.key,n);return e}function UR(t){let e=jR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Wr(){return $h()}function zR(){return $h()}function $h(){return new Jr(t=>t.toString(),(t,e)=>t.isEqual(e))}var LH=new Ut(oe.comparator),VH=new Pt(oe.comparator);function Be(...t){let e=VH;for(let n of t)e=e.add(n);return e}var BH=new Pt(Ve);function nE(){return BH}function $R(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(e)?"-0":e}}function HR(t){return{integerValue:""+t}}function qR(t,e){return wR(e)?HR(e):$R(t,e)}var mu=class{constructor(){this._=void 0}};function jH(t,e,n){return t instanceof Us?function(r,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&$_(o)&&(o=JC(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof Lo?WR(t,e):t instanceof Vo?ZR(t,e):function(r,o){let s=GR(r,o),c=M1(s)+M1(r.Pe);return dI(s)&&dI(r.Pe)?HR(c):$R(r.serializer,c)}(t,e)}function UH(t,e,n){return t instanceof Lo?WR(t,e):t instanceof Vo?ZR(t,e):n}function GR(t,e){return t instanceof zs?function(i){return dI(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var Us=class extends mu{},Lo=class extends mu{constructor(e){super(),this.elements=e}};function WR(t,e){let n=KR(e);for(let i of t.elements)n.some(r=>Qr(r,i))||n.push(i);return{arrayValue:{values:n}}}var Vo=class extends mu{constructor(e){super(),this.elements=e}};function ZR(t,e){let n=KR(e);for(let i of t.elements)n=n.filter(r=>!Qr(r,i));return{arrayValue:{values:n}}}var zs=class extends mu{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function M1(t){return Yt(t.integerValue||t.doubleValue)}function KR(t){return Xh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ic=class{constructor(e,n){this.field=e,this.transform=n}};function zH(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Lo&&r instanceof Lo||i instanceof Vo&&r instanceof Vo?du(i.elements,r.elements,Qr):i instanceof zs&&r instanceof zs?Qr(i.Pe,r.Pe):i instanceof Us&&r instanceof Us}(t.transform,e.transform)}var CI=class{constructor(e,n){this.version=e,this.transformResults=n}},Qt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var gu=class{};function YR(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hs(t.key,Qt.none()):new $s(t.key,t.data,Qt.none());{let n=t.data,i=Bn.empty(),r=new Pt(nn.comparator);for(let o of e.fields)if(!r.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?i.delete(o):i.set(o,s),r=r.add(o)}return new _r(t.key,i,new Ii(r.toArray()),Qt.none())}}function $H(t,e,n){t instanceof $s?function(r,o,s){let c=r.value.clone(),u=R1(r.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(t,e,n):t instanceof _r?function(r,o,s){if(!Hg(r.precondition,o))return void o.convertToUnknownDocument(s.version);let c=R1(r.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(QR(r)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(r,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Hh(t,e,n,i){return t instanceof $s?function(o,s,c,u){if(!Hg(o.precondition,s))return c;let f=o.value.clone(),p=k1(o.fieldTransforms,u,s);return f.setAll(p),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof _r?function(o,s,c,u){if(!Hg(o.precondition,s))return c;let f=k1(o.fieldTransforms,u,s),p=s.data;return p.setAll(QR(o)),p.setAll(f),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(o,s,c){return Hg(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c}(t,e,n)}function HH(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=GR(i.transform,r||null);o!=null&&(n===null&&(n=Bn.empty()),n.set(i.field,o))}return n||null}function P1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&du(i,r,(o,s)=>zH(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var $s=class extends gu{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},_r=class extends gu{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function QR(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function R1(t,e,n){let i=new Map;ve(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],s=o.transform,c=e.data.field(o.field);i.set(o.field,UH(s,c,n[r]))}return i}function k1(t,e,n){let i=new Map;for(let r of t){let o=r.transform,s=n.data.field(r.field);i.set(r.field,jH(o,s,e))}return i}var Hs=class extends gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Jh=class extends gu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ef=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&$H(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=Hh(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=Hh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=zR();return this.mutations.forEach(r=>{let o=e.get(r.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(r.key)?null:c;let u=YR(s,c);u!==null&&i.set(r.key,u),s.isValidDocument()||s.convertToNoDocument(be.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Be())}isEqual(e){return this.batchId===e.batchId&&du(this.mutations,e.mutations,(n,i)=>P1(n,i))&&du(this.baseMutations,e.baseMutations,(n,i)=>P1(n,i))}},EI=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){ve(e.mutations.length===i.length);let r=function(){return LH}(),o=e.mutations;for(let s=0;s<o.length;s++)r=r.insert(o[s].key,i[s].version);return new t(e,n,i,r)}};var tf=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var xI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var cn,rt;function XR(t){switch(t){default:return he();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function JR(t){if(t===void 0)return tn("GRPC error has no .code"),q.UNKNOWN;switch(t){case cn.OK:return q.OK;case cn.CANCELLED:return q.CANCELLED;case cn.UNKNOWN:return q.UNKNOWN;case cn.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case cn.INTERNAL:return q.INTERNAL;case cn.UNAVAILABLE:return q.UNAVAILABLE;case cn.UNAUTHENTICATED:return q.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case cn.NOT_FOUND:return q.NOT_FOUND;case cn.ALREADY_EXISTS:return q.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return q.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case cn.ABORTED:return q.ABORTED;case cn.OUT_OF_RANGE:return q.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return q.UNIMPLEMENTED;case cn.DATA_LOSS:return q.DATA_LOSS;default:return he()}}(rt=cn||(cn={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";var N1=null;function ek(){return new TextEncoder}var qH=new As([4294967295,4294967295],0);function O1(t){let e=ek().encode(t),n=new jw;return n.update(e),new Uint8Array(n.digest())}function F1(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new As([n,i],0),new As([r,o],0)]}var DI=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=As.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(As.fromNumber(i)));return r.compare(qH)===1&&(r=new As([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=O1(e),[i,r]=F1(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);if(!this.de(s))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,r,n);return i.forEach(c=>s.insert(c)),s}insert(e){if(this.Ie===0)return;let n=O1(e),[i,r]=F1(n);for(let o=0;o<this.hashCount;o++){let s=this.Ee(i,r,o);this.Ae(s)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Qa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nf=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,rf.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(be.min(),r,new Ut(Ve),li(),Be())}},rf=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,Be(),Be(),Be())}};var uu=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},o_=class{constructor(e,n){this.targetId=e,this.me=n}},s_=class{constructor(e,n,i=Cn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},a_=class{constructor(){this.fe=0,this.ge=V1(),this.pe=Cn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Be(),n=Be(),i=Be();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:he()}}),new rf(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=V1()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ve(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},TI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=li(),this.qe=L1(),this.Qe=new Ut(Ve)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:he()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(n_(o))if(i===0){let s=new oe(o.path);this.Ue(n,s,hn.newNoDocument(s,be.min()))}else ve(i===1);else{let s=this.Ye(n);if(s!==i){let c=this.Ze(e),u=c?this.Xe(c,e,s):1;if(u!==0){this.je(n);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}N1?.et(function(p,_,b,I,S){var P,O,W,X,Z,ae;let _e={localCacheCount:p,existenceFilterCount:_.count,databaseId:b.database,projectId:b.projectId},me=_.unchangedNames;return me&&(_e.bloomFilter={applied:S===0,hashCount:(P=me?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(X=(W=(O=me?.bits)===null||O===void 0?void 0:O.bitmap)===null||W===void 0?void 0:W.length)!==null&&X!==void 0?X:0,padding:(ae=(Z=me?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ae!==void 0?ae:0,mightContain:A=>{var E;return(E=I?.mightContain(A))!==null&&E!==void 0&&E}}),_e}(s,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,s,c;try{s=Vs(i).toUint8Array()}catch(u){if(u instanceof Jg)return Hi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new DI(s,r,o)}catch(u){return Hi(u instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let s=this.Le.tt(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,s)=>{let c=this.Je(s);if(c){if(o.current&&n_(c.target)){let u=new oe(c.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,hn.newNoDocument(u,e))}o.be&&(n.set(s,o.Ce()),o.ve())}});let i=Be();this.qe.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let r=new nf(e,n,this.Qe,this.ke,i);return this.ke=li(),this.qe=L1(),this.Qe=new Ut(Ve),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new a_,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Pt(Ve),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||Q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new a_),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function L1(){return new Ut(oe.comparator)}function V1(){return new Ut(oe.comparator)}var GH={asc:"ASCENDING",desc:"DESCENDING"},WH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZH={and:"AND",or:"OR"},SI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function AI(t,e){return t.useProto3Json||gf(e)?e:{value:e}}function _u(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KH(t,e){return _u(t,e.toTimestamp())}function rn(t){return ve(!!t),be.fromTimestamp(function(n){let i=Fo(n);return new Kt(i.seconds,i.nanos)}(t))}function iE(t,e){return MI(t,e).canonicalString()}function MI(t,e){let n=function(r){return new ot(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nk(t){let e=ot.fromString(t);return ve(hk(e)),e}function of(t,e){return iE(t.databaseId,e.path)}function Kr(t,e){let n=nk(e);if(n.get(1)!==t.databaseId.projectId)throw new K(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(ok(n))}function ik(t,e){return iE(t.databaseId,e)}function rk(t){let e=nk(t);return e.length===4?ot.emptyPath():ok(e)}function PI(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ok(t){return ve(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function B1(t,e,n){return{name:of(t,e),fields:n.value.mapValue.fields}}function sk(t,e,n){let i=Kr(t,e.name),r=rn(e.updateTime),o=e.createTime?rn(e.createTime):be.min(),s=new Bn({mapValue:{fields:e.fields}}),c=hn.newFoundDocument(i,r,o,s);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function YH(t,e){return"found"in e?function(i,r){ve(!!r.found),r.found.name,r.found.updateTime;let o=Kr(i,r.found.name),s=rn(r.found.updateTime),c=r.found.createTime?rn(r.found.createTime):be.min(),u=new Bn({mapValue:{fields:r.found.fields}});return hn.newFoundDocument(o,s,c,u)}(t,e):"missing"in e?function(i,r){ve(!!r.missing),ve(!!r.readTime);let o=Kr(i,r.missing),s=rn(r.readTime);return hn.newNoDocument(o,s)}(t,e):he()}function QH(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(ve(p===void 0||typeof p=="string"),Cn.fromBase64String(p||"")):(ve(p===void 0||p instanceof Buffer||p instanceof Uint8Array),Cn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&function(f){let p=f.code===void 0?q.UNKNOWN:JR(f.code);return new K(p,f.message||"")}(s);n=new s_(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Kr(t,i.document.name),o=rn(i.document.updateTime),s=i.document.createTime?rn(i.document.createTime):be.min(),c=new Bn({mapValue:{fields:i.document.fields}}),u=hn.newFoundDocument(r,o,s,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new uu(f,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Kr(t,i.document),o=i.readTime?rn(i.readTime):be.min(),s=hn.newNoDocument(r,o),c=i.removedTargetIds||[];n=new uu([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Kr(t,i.document),o=i.removedTargetIds||[];n=new uu([],o,r,null)}else{if(!("filter"in e))return he();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,s=new xI(r,o),c=i.targetId;n=new o_(c,s)}}return n}function sf(t,e){let n;if(e instanceof $s)n={update:B1(t,e.key,e.value)};else if(e instanceof Hs)n={delete:of(t,e.key)};else if(e instanceof _r)n={update:B1(t,e.key,e.data),updateMask:i3(e.fieldMask)};else{if(!(e instanceof Jh))return he();n={verify:of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,s){let c=s.transform;if(c instanceof Us)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Lo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Vo)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof zs)return{fieldPath:s.field.canonicalString(),increment:c.Pe};throw he()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:KH(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he()}(t,e.precondition)),n}function RI(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Qt.updateTime(rn(o.updateTime)):o.exists!==void 0?Qt.exists(o.exists):Qt.none()}(e.currentDocument):Qt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,c){let u=null;if("setToServerValue"in c)ve(c.setToServerValue==="REQUEST_TIME"),u=new Us;else if("appendMissingElements"in c){let p=c.appendMissingElements.values||[];u=new Lo(p)}else if("removeAllFromArray"in c){let p=c.removeAllFromArray.values||[];u=new Vo(p)}else"increment"in c?u=new zs(s,c.increment):he();let f=nn.fromServerFormat(c.fieldPath);return new ic(f,u)}(t,r)):[];if(e.update){e.update.name;let r=Kr(t,e.update.name),o=new Bn({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let f=u.fieldPaths||[];return new Ii(f.map(p=>nn.fromServerFormat(p)))}(e.updateMask);return new _r(r,o,s,n,i)}return new $s(r,o,n,i)}if(e.delete){let r=Kr(t,e.delete);return new Hs(r,n)}if(e.verify){let r=Kr(t,e.verify);return new Jh(r,n)}return he()}function XH(t,e){return t&&t.length>0?(ve(e!==void 0),t.map(n=>function(r,o){let s=r.updateTime?rn(r.updateTime):rn(o);return s.isEqual(be.min())&&(s=rn(o)),new CI(s,r.transformResults||[])}(n,e))):[]}function ak(t,e){return{documents:[ik(t,e.path)]}}function ck(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ik(t,r);let o=function(f){if(f.length!==0)return dk(xt.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let s=function(f){if(f.length!==0)return f.map(p=>function(b){return{field:ru(b.field),direction:e3(b.dir)}}(p))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=AI(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function lk(t){let e=rk(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){ve(i===1);let p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(_){let b=uk(_);return b instanceof xt&&eE(b)?b.getFilters():[b]}(n.where));let s=[];n.orderBy&&(s=function(_){return _.map(b=>function(S){return new tc(ou(S.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(_){let b;return b=typeof _=="object"?_.value:_,gf(b)?null:b}(n.limit));let u=null;n.startAt&&(u=function(_){let b=!!_.before,I=_.values||[];return new Xr(I,b)}(n.startAt));let f=null;return n.endAt&&(f=function(_){let b=!_.before,I=_.values||[];return new Xr(I,b)}(n.endAt)),FR(e,r,s,o,c,"F",u,f)}function JH(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function uk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=ou(n.unaryFilter.field);return et.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=ou(n.unaryFilter.field);return et.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ou(n.unaryFilter.field);return et.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ou(n.unaryFilter.field);return et.create(s,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(t):t.fieldFilter!==void 0?function(n){return et.create(ou(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xt.create(n.compositeFilter.filters.map(i=>uk(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return he()}}(n.compositeFilter.op))}(t):he()}function e3(t){return GH[t]}function t3(t){return WH[t]}function n3(t){return ZH[t]}function ru(t){return{fieldPath:t.canonicalString()}}function ou(t){return nn.fromServerFormat(t.fieldPath)}function dk(t){return t instanceof et?function(n){if(n.op==="=="){if(I1(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NAN"}};if(w1(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(I1(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NOT_NAN"}};if(w1(n.value))return{unaryFilter:{field:ru(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ru(n.field),op:t3(n.op),value:n.value}}}(t):t instanceof xt?function(n){let i=n.getFilters().map(r=>dk(r));return i.length===1?i[0]:{compositeFilter:{op:n3(n.op),filters:i}}}(t):he()}function i3(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var vu=class t{constructor(e,n,i,r,o=be.min(),s=be.min(),c=Cn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var c_=class{constructor(e){this.ct=e}};function r3(t,e){let n;if(e.document)n=sk(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=oe.fromSegments(e.noDocument.path),r=oc(e.noDocument.readTime);n=hn.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return he();{let i=oe.fromSegments(e.unknownDocument.path),r=oc(e.unknownDocument.version);n=hn.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new Kt(r[0],r[1]);return be.fromTimestamp(o)}(e.readTime)),n}function j1(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:l_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,s){return{name:of(o,s.key),fields:s.data.value.mapValue.fields,updateTime:_u(o,s.version.toTimestamp()),createTime:_u(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:rc(e.version)};else{if(!e.isUnknownDocument())return he();i.unknownDocument={path:n.path.toArray(),version:rc(e.version)}}return i}function l_(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rc(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function oc(t){let e=new Kt(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function Za(t,e){let n=(e.baseMutations||[]).map(o=>RI(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let c=e.mutations[o+1];s.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>RI(t.ct,o)),r=Kt.fromMillis(e.localWriteTimeMs);return new ef(e.batchId,r,n,i)}function Uh(t){let e=oc(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?oc(t.lastLimboFreeSnapshotVersion):be.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return ve(o.documents.length===1),Yn(Au(rk(o.documents[0])))}(t.query):function(o){return Yn(lk(o))}(t.query),new vu(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Cn.fromBase64String(t.resumeToken))}function fk(t,e){let n=rc(e.snapshotVersion),i=rc(e.lastLimboFreeSnapshotVersion),r;r=n_(e.target)?ak(t.ct,e.target):ck(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nc(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function rE(t){let e=lk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?r_(e,e.limit,"L"):e}function Ww(t,e){return new tf(e.largestBatchId,RI(t.ct,e.overlayMutation))}function U1(t,e){let n=e.path.lastSegment();return[t,Kn(e.path.popLast()),n]}function z1(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:rc(i.readTime),documentKey:Kn(i.documentKey.path),largestBatchId:i.largestBatchId}}var kI=class{getBundleMetadata(e,n){return $1(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:oc(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return $1(e).put(function(r){return{bundleId:r.id,createTime:rc(rn(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return H1(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:rE(o.bundledQuery),readTime:oc(o.readTime)}}(i)})}saveNamedQuery(e,n){return H1(e).put(function(r){return{name:r.name,readTime:rc(rn(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function $1(t){return En(t,"bundles")}function H1(t){return En(t,"namedQueries")}var u_=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return Fh(e).get(U1(this.userId,n)).next(i=>i?Ww(this.serializer,i):null)}getOverlays(e,n){let i=Wr();return U.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,s)=>{let c=new tf(n,s);r.push(this.ht(e,c))}),U.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(s=>r.add(Kn(s.getCollectionPath())));let o=[];return r.forEach(s=>{let c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,i+1],!1,!0);o.push(Fh(e).j("collectionPathOverlayIndex",c))}),U.waitFor(o)}getOverlaysForCollection(e,n,i){let r=Wr(),o=Kn(n),s=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return Fh(e).U("collectionPathOverlayIndex",s).next(c=>{for(let u of c){let f=Ww(this.serializer,u);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=Wr(),s,c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Fh(e).J({index:"collectionGroupOverlayIndex",range:c},(u,f,p)=>{let _=Ww(this.serializer,f);o.size()<r||_.largestBatchId===s?(o.set(_.getKey(),_),s=_.largestBatchId):p.done()}).next(()=>o)}ht(e,n){return Fh(e).put(function(r,o,s){let[c,u,f]=U1(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:sf(r.ct,s.mutation)}}(this.serializer,this.userId,n))}};function Fh(t){return En(t,"documentOverlays")}var No=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Yt(e.integerValue));else if("doubleValue"in e){let i=Yt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),Zh(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=Fo(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(Vs(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?AR(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):he()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),oe.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};No.bt=new No;function o3(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function q1(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let s=o3(255&i[o]);if(r+=s,s!==8)break}return r}(t);return Math.ceil(e/8)}var NI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=q1(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=q1(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},OI=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},FI=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Ka=class{constructor(){this.Gt=new NI,this.zt=new OI(this.Gt),this.jt=new FI(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Ya=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function Ms(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=G1(t.arrayValue,e.arrayValue),n!==0?n:(n=G1(t.directionalValue,e.directionalValue),n!==0?n:oe.comparator(t.documentKey,e.documentKey)))}function G1(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var d_=class{constructor(e){this.Yt=new Pt((n,i)=>nn.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(ve(e.collectionGroup===this.collectionId),this.en)return!1;let n=rI(e);if(n!==void 0&&!this.nn(n))return!1;let i=Ga(e),r=new Set,o=0,s=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let c=this.Yt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let u=i[o];if(!this.rn(c,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<i.length;++o){let c=i[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],c))return!1}return!0}on(){if(this.en)return null;let e=new Pt(nn.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new cu(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new cu(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new cu(i.field,i.dir==="asc"?0:1)));return new hu(hu.UNKNOWN_ID,this.collectionId,n,Wh.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function pk(t){var e,n;if(ve(t instanceof et||t instanceof xt),t instanceof et){if(t instanceof t_){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>et.create(t.field,"==",o)))||[];return xt.create(r,"or")}return t}let i=t.filters.map(r=>pk(r));return xt.create(i,t.op)}function s3(t){if(t.getFilters().length===0)return[];let e=BI(pk(t));return ve(mk(e)),LI(e)||VI(e)?[e]:e.getFilters()}function LI(t){return t instanceof et}function VI(t){return t instanceof xt&&eE(t)}function mk(t){return LI(t)||VI(t)||function(n){if(n instanceof xt&&hI(n)){for(let i of n.getFilters())if(!LI(i)&&!VI(i))return!1;return!0}return!1}(t)}function BI(t){if(ve(t instanceof et||t instanceof xt),t instanceof et)return t;if(t.filters.length===1)return BI(t.filters[0]);let e=t.filters.map(i=>BI(i)),n=xt.create(e,t.op);return n=h_(n),mk(n)?n:(ve(n instanceof xt),ve(pu(n)),ve(n.filters.length>1),n.filters.reduce((i,r)=>oE(i,r)))}function oE(t,e){let n;return ve(t instanceof et||t instanceof xt),ve(e instanceof et||e instanceof xt),n=t instanceof et?e instanceof et?function(r,o){return xt.create([r,o],"and")}(t,e):W1(t,e):e instanceof et?W1(e,t):function(r,o){if(ve(r.filters.length>0&&o.filters.length>0),pu(r)&&pu(o))return kR(r,o.getFilters());let s=hI(r)?r:o,c=hI(r)?o:r,u=s.filters.map(f=>oE(f,c));return xt.create(u,"or")}(t,e),h_(n)}function W1(t,e){if(pu(e))return kR(e,t.getFilters());{let n=e.filters.map(i=>oE(t,i));return xt.create(n,"or")}}function h_(t){if(ve(t instanceof et||t instanceof xt),t instanceof et)return t;let e=t.getFilters();if(e.length===1)return h_(e[0]);if(PR(t))return t;let n=e.map(r=>h_(r)),i=[];return n.forEach(r=>{r instanceof et?i.push(r):r instanceof xt&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:xt.create(i,t.op)}var jI=class{constructor(){this._n=new af}addToCollectionParentIndex(e,n){return this._n.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(qi.min())}updateCollectionGroup(e,n,i){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}},af=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Pt(ot.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Pt(ot.comparator)).toArray()}};var Lg=new Uint8Array(0),UI=class{constructor(e,n){this.databaseId=n,this.an=new af,this.un=new Jr(i=>nc(i),(i,r)=>_f(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:Kn(r)};return Z1(e).put(o)}return U.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[gR(n),""],!1,!0);return Z1(e).U(r).next(o=>{for(let s of o){if(s.collectionId!==n)break;i.push(Gr(s.parent))}return i})}addFieldIndex(e,n){let i=Lh(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let s=eu(e);return o.next(c=>{s.put(z1(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=Lh(e),r=eu(e),o=Jl(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=Lh(e),i=Jl(e),r=eu(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return U.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new d_(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=Jl(e),r=!0,o=new Map;return U.forEach(this.cn(n),s=>this.ln(e,s).next(c=>{r&&(r=!!c),o.set(s,c)})).next(()=>{if(r){let s=Be(),c=[];return U.forEach(o,(u,f)=>{Q("IndexedDbIndexManager",`Using index ${function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map(ae=>`${ae.fieldPath}:${ae.kind}`).join(",")}`}(u)} to execute ${nc(n)}`);let p=function(Z,ae){let _e=rI(ae);if(_e===void 0)return null;for(let me of i_(Z,_e.fieldPath))switch(me.op){case"array-contains-any":return me.value.arrayValue.values||[];case"array-contains":return[me.value]}return null}(f,u),_=function(Z,ae){let _e=new Map;for(let me of Ga(ae))for(let A of i_(Z,me.fieldPath))switch(A.op){case"==":case"in":_e.set(me.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return _e.set(me.fieldPath.canonicalString(),A.value),Array.from(_e.values())}return null}(f,u),b=function(Z,ae){let _e=[],me=!0;for(let A of Ga(ae)){let E=A.kind===0?T1(Z,A.fieldPath,Z.startAt):S1(Z,A.fieldPath,Z.startAt);_e.push(E.value),me&&(me=E.inclusive)}return new Xr(_e,me)}(f,u),I=function(Z,ae){let _e=[],me=!0;for(let A of Ga(ae)){let E=A.kind===0?S1(Z,A.fieldPath,Z.endAt):T1(Z,A.fieldPath,Z.endAt);_e.push(E.value),me&&(me=E.inclusive)}return new Xr(_e,me)}(f,u),S=this.hn(u,f,b),P=this.hn(u,f,I),O=this.Pn(u,f,_),W=this.In(u.indexId,p,S,b.inclusive,P,I.inclusive,O);return U.forEach(W,X=>i.G(X,n.limit).next(Z=>{Z.forEach(ae=>{let _e=oe.fromSegments(ae.documentKey);s.has(_e)||(s=s.add(_e),c.push(_e))})}))}).next(()=>c)}return U.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=s3(xt.create(e.filters,"and")).map(i=>wI(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,s,c){let u=(n!=null?n.length:1)*Math.max(i.length,o.length),f=u/(n!=null?n.length:1),p=[];for(let _=0;_<u;++_){let b=n?this.Tn(n[_/f]):Lg,I=this.En(e,b,i[_%f],r),S=this.dn(e,b,o[_%f],s),P=c.map(O=>this.En(e,b,O,!0));p.push(...this.createRange(I,S,P))}return p}En(e,n,i,r){let o=new Ya(e,oe.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new Ya(e,oe.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new d_(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let s=null;for(let c of o)i.tn(c)&&(!s||c.fields.length>s.fields.length)&&(s=c);return s})}getIndexType(e,n){let i=2,r=this.cn(n);return U.forEach(r,o=>this.ln(e,o).next(s=>{s?i!==0&&s.fields.length<function(u){let f=new Pt(nn.comparator),p=!1;for(let _ of u.filters)for(let b of _.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?p=!0:f=f.add(b.field));for(let _ of u.orderBy)_.field.isKeyField()||(f=f.add(_.field));return f.size+(p?1:0)}(o)&&(i=1):i=0})).next(()=>function(s){return s.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new Ka;for(let r of Ga(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let s=i.Ht(r.kind);No.bt.Pt(o,s)}return i.Wt()}Tn(e){let n=new Ka;return No.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new Ka;return No.bt.Pt(ec(this.databaseId,n),i.Ht(function(o){let s=Ga(o);return s.length===0?0:s[s.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new Ka);let o=0;for(let s of Ga(e)){let c=i[o++];for(let u of r)if(this.Vn(n,s.fieldPath)&&Xh(c))r=this.mn(r,s,c);else{let f=u.Ht(s.kind);No.bt.Pt(c,f)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let s of i.arrayValue.values||[])for(let c of r){let u=new Ka;u.seed(c.Wt()),No.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof et&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=Lh(e),r=eu(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let s=[];return U.forEach(o,c=>r.get([c.indexId,this.uid]).next(u=>{s.push(function(p,_){let b=_?new Wh(_.sequenceNumber,new qi(oc(_.readTime),new oe(Gr(_.documentKey)),_.largestBatchId)):Wh.empty(),I=p.fields.map(([S,P])=>new cu(nn.fromServerFormat(S),P));return new hu(p.indexId,p.collectionGroup,I,b)}(c,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Ve(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=Lh(e),o=eu(e);return this.gn(e).next(s=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>U.forEach(c,u=>o.put(z1(u.indexId,this.uid,s,i)))))}updateIndexEntries(e,n){let i=new Map;return U.forEach(n,(r,o)=>{let s=i.get(r.collectionGroup);return(s?U.resolve(s):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),U.forEach(c,u=>this.pn(e,r,u).next(f=>{let p=this.yn(o,u);return f.isEqual(p)?U.resolve():this.wn(e,o,u,f,p)}))))})}Sn(e,n,i,r){return Jl(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return Jl(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=Jl(e),o=new Pt(Ms);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(s,c)=>{o=o.add(new Ya(i.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>o)}yn(e,n){let i=new Pt(Ms),r=this.An(n,e);if(r==null)return i;let o=rI(n);if(o!=null){let s=e.data.field(o.fieldPath);if(Xh(s))for(let c of s.arrayValue.values||[])i=i.add(new Ya(n.indexId,e.key,this.Tn(c),r))}else i=i.add(new Ya(n.indexId,e.key,Lg,r));return i}wn(e,n,i,r,o){Q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let s=[];return function(u,f,p,_,b){let I=u.getIterator(),S=f.getIterator(),P=Xl(I),O=Xl(S);for(;P||O;){let W=!1,X=!1;if(P&&O){let Z=p(P,O);Z<0?X=!0:Z>0&&(W=!0)}else P!=null?X=!0:W=!0;W?(_(O),O=Xl(S)):X?(b(P),P=Xl(I)):(P=Xl(I),O=Xl(S))}}(r,o,Ms,c=>{s.push(this.Sn(e,n,i,c))},c=>{s.push(this.bn(e,n,i,c))}),U.waitFor(s)}gn(e){let n=1;return eu(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((s,c)=>Ms(s,c)).filter((s,c,u)=>!c||Ms(s,u[c-1])!==0);let r=[];r.push(e);for(let s of i){let c=Ms(s,e),u=Ms(s,n);if(c===0)r[0]=e.Jt();else if(c>0&&u<0)r.push(s),r.push(s.Jt());else if(u>0)break}r.push(n);let o=[];for(let s=0;s<r.length;s+=2){if(this.Dn(r[s],r[s+1]))return[];let c=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Lg,[]],u=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Lg,[]];o.push(IDBKeyRange.bound(c,u))}return o}Dn(e,n){return Ms(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(K1)}getMinOffset(e,n){return U.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||he())).next(K1)}};function Z1(t){return En(t,"collectionParents")}function Jl(t){return En(t,"indexEntries")}function Lh(t){return En(t,"indexConfiguration")}function eu(t){return En(t,"indexState")}function K1(t){ve(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;QC(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new qi(e.readTime,e.documentKey,n)}var Y1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$i=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function gk(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId),c=0,u=i.J({range:s},(p,_,b)=>(c++,b.delete()));o.push(u.next(()=>{ve(c===1)}));let f=[];for(let p of n.mutations){let _=IR(e,p.key.path,n.batchId);o.push(r.delete(_)),f.push(p.key)}return U.waitFor(o).next(()=>f)}function f_(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw he();e=t.noDocument}return JSON.stringify(e).length}$i.DEFAULT_COLLECTION_PERCENTILE=10,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$i.DEFAULT=new $i(41943040,$i.DEFAULT_COLLECTION_PERCENTILE,$i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$i.DISABLED=new $i(-1,0,0);var p_=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){ve(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ps(e).J({index:"userMutationsIndex",range:i},(r,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=su(e),s=Ps(e);return s.add({}).next(c=>{ve(typeof c=="number");let u=new ef(c,n,i,r),f=function(I,S,P){let O=P.baseMutations.map(X=>sf(I.ct,X)),W=P.mutations.map(X=>sf(I.ct,X));return{userId:S,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:O,mutations:W}}(this.serializer,this.userId,u),p=[],_=new Pt((b,I)=>Ve(b.canonicalString(),I.canonicalString()));for(let b of r){let I=IR(this.userId,b.key.path,c);_=_.add(b.key.path.popLast()),p.push(s.put(f)),p.push(o.put(I,fH))}return _.forEach(b=>{p.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Cn[c]=u.keys()}),U.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return Ps(e).get(n).next(i=>i?(ve(i.userId===this.userId),Za(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?U.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Ps(e).J({index:"userMutationsIndex",range:r},(s,c,u)=>{c.userId===this.userId&&(ve(c.batchId>=i),o=Za(this.serializer,c)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return Ps(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,s)=>{i=o.batchId,s.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ps(e).U("userMutationsIndex",n).next(i=>i.map(r=>Za(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=Ug(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return su(e).J({range:r},(s,c,u)=>{let[f,p,_]=s,b=Gr(p);if(f===this.userId&&n.path.isEqual(b))return Ps(e).get(_).next(I=>{if(!I)throw he();ve(I.userId===this.userId),o.push(Za(this.serializer,I))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pt(Ve),r=[];return n.forEach(o=>{let s=Ug(this.userId,o.path),c=IDBKeyRange.lowerBound(s),u=su(e).J({range:c},(f,p,_)=>{let[b,I,S]=f,P=Gr(I);b===this.userId&&o.path.isEqual(P)?i=i.add(S):_.done()});r.push(u)}),U.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=Ug(this.userId,i),s=IDBKeyRange.lowerBound(o),c=new Pt(Ve);return su(e).J({range:s},(u,f,p)=>{let[_,b,I]=u,S=Gr(b);_===this.userId&&i.isPrefixOf(S)?S.length===r&&(c=c.add(I)):p.done()}).next(()=>this.Fn(e,c))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(Ps(e).get(o).next(s=>{if(s===null)throw he();ve(s.userId===this.userId),i.push(Za(this.serializer,s))}))}),U.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return gk(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),U.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return U.resolve();let i=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),r=[];return su(e).J({range:i},(o,s,c)=>{if(o[0]===this.userId){let u=Gr(o[1]);r.push(u)}else c.done()}).next(()=>{ve(r.length===0)})})}containsKey(e,n){return _k(e,this.userId,n)}xn(e){return vk(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function _k(t,e,n){let i=Ug(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),s=!1;return su(t).J({range:o,H:!0},(c,u,f)=>{let[p,_,b]=c;p===e&&_===r&&(s=!0),f.done()}).next(()=>s)}function Ps(t){return En(t,"mutations")}function su(t){return En(t,"documentMutations")}function vk(t){return En(t,"mutationQueues")}var yu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var zI=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new yu(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>be.fromTimestamp(new Kt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>tu(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(ve(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return tu(e).J((s,c)=>{let u=Uh(c);u.sequenceNumber<=n&&i.get(u.targetId)===null&&(r++,o.push(this.removeTargetData(e,u)))}).next(()=>U.waitFor(o)).next(()=>r)}forEachTarget(e,n){return tu(e).J((i,r)=>{let o=Uh(r);n(o)})}Bn(e){return Q1(e).get("targetGlobalKey").next(n=>(ve(n!==null),n))}kn(e,n){return Q1(e).put("targetGlobalKey",n)}qn(e,n){return tu(e).put(fk(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=nc(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return tu(e).J({range:r,index:"queryTargetsIndex"},(s,c,u)=>{let f=Uh(c);_f(n,f.target)&&(o=f,u.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=Rs(e);return n.forEach(s=>{let c=Kn(s.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,s))}),U.waitFor(r)}removeMatchingKeys(e,n,i){let r=Rs(e);return U.forEach(n,o=>{let s=Kn(o.path);return U.waitFor([r.delete([i,s]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=Rs(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=Rs(e),o=Be();return r.J({range:i,H:!0},(s,c,u)=>{let f=Gr(s[1]),p=new oe(f);o=o.add(p)}).next(()=>o)}containsKey(e,n){let i=Kn(n.path),r=IDBKeyRange.bound([i],[gR(i)],!1,!0),o=0;return Rs(e).J({index:"documentTargetsIndex",H:!0,range:r},([s,c],u,f)=>{s!==0&&(o++,f.done())}).next(()=>o>0)}ot(e,n){return tu(e).get(n).next(i=>i?Uh(i):null)}};function tu(t){return En(t,"targets")}function Q1(t){return En(t,"targetGlobal")}function Rs(t){return En(t,"targetDocuments")}function X1([t,e],[n,i]){let r=Ve(t,n);return r===0?Ve(e,i):r}var $I=class{constructor(e){this.Kn=e,this.buffer=new Pt(X1),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();X1(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},HI=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>k(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ws(n)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Gs(n)}yield this.zn(3e5)}))}},qI=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return U.resolve(wi.oe);let i=new $I(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Y1)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Y1):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,s,c,u,f,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,s=Date.now(),this.nthSequenceNumber(e,r))).next(_=>(i=_,c=Date.now(),this.removeTargets(e,i,n))).next(_=>(o=_,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(f=Date.now(),nu()<=Mr.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-p}ms
	Determined least recently used ${r} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${_} documents in `+(f-u)+`ms
Total Duration: ${f-p}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_})))}};function a3(t,e){return new qI(t,e)}var GI=class{constructor(e,n){this.db=e,this.garbageCollector=a3(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return Vg(e,i)}removeReference(e,n,i){return Vg(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return Vg(e,n)}er(e,n){return function(r,o){let s=!1;return vk(r).Y(c=>_k(r,c,o).next(u=>(u&&(s=!0),U.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(s,c)=>{if(c<=n){let u=this.er(e,s).next(f=>{if(!f)return o++,i.getEntry(e,s).next(()=>(i.removeEntry(s,be.min()),Rs(e).delete(function(_){return[0,Kn(_.path)]}(s))))});r.push(u)}}).next(()=>U.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return Vg(e,n)}Xn(e,n){let i=Rs(e),r,o=wi.oe;return i.J({index:"documentTargetsIndex"},([s,c],{path:u,sequenceNumber:f})=>{s===0?(o!==wi.oe&&n(new oe(Gr(r)),o),o=f,r=u):o=wi.oe}).next(()=>{o!==wi.oe&&n(new oe(Gr(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Vg(t,e){return Rs(t).put(function(i,r){return{targetId:0,path:Kn(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var m_=class{constructor(){this.changes=new Jr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?U.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var WI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return qa(e).put(i)}removeEntry(e,n,i){return qa(e).delete(function(o,s){let c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],l_(s),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=hn.newInvalidDocument(n);return qa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vh(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:hn.newInvalidDocument(n)};return qa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Vh(n))},(r,o)=>{i={document:this.nr(n,o),size:f_(o)}}).next(()=>i)}getEntries(e,n){let i=li();return this.ir(e,n,(r,o)=>{let s=this.nr(r,o);i=i.insert(r,s)}).next(()=>i)}sr(e,n){let i=li(),r=new Ut(oe.comparator);return this.ir(e,n,(o,s)=>{let c=this.nr(o,s);i=i.insert(o,c),r=r.insert(o,f_(s))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return U.resolve();let r=new Pt(tR);n.forEach(u=>r=r.add(u));let o=IDBKeyRange.bound(Vh(r.first()),Vh(r.last())),s=r.getIterator(),c=s.getNext();return qa(e).J({index:"documentKeyIndex",range:o},(u,f,p)=>{let _=oe.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&tR(c,_)<0;)i(c,null),c=s.getNext();c&&c.isEqual(_)&&(i(c,f),c=s.hasNext()?s.getNext():null),c?p.$(Vh(c)):p.done()}).next(()=>{for(;c;)i(c,null),c=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let s=n.path,c=[s.popLast().toArray(),s.lastSegment(),l_(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qa(e).U(IDBKeyRange.bound(c,u,!0)).next(f=>{o?.incrementDocumentReadCount(f.length);let p=li();for(let _ of f){let b=this.nr(oe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);b.isFoundDocument()&&(yf(n,b)||r.has(b.key))&&(p=p.insert(b.key,b))}return p})}getAllFromCollectionGroup(e,n,i,r){let o=li(),s=eR(n,i),c=eR(n,qi.max());return qa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,c,!0)},(u,f,p)=>{let _=this.nr(oe.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(_.key,_),o.size===r&&p.done()}).next(()=>o)}newChangeBuffer(e){return new ZI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return J1(e).get("remoteDocumentGlobalKey").next(n=>(ve(!!n),n))}tr(e,n){return J1(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=r3(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(be.min())))return i}return hn.newInvalidDocument(e)}};function yk(t){return new WI(t)}var ZI=class extends m_{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Jr(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Pt((o,s)=>Ve(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let c=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,c.readTime)),s.isValidDocument()){let u=j1(this.ar.serializer,s);r=r.add(o.path.popLast());let f=f_(u);i+=f-c.size,n.push(this.ar.addEntry(e,o,u))}else if(i-=c.size,this.trackRemovals){let u=j1(this.ar.serializer,s.convertToNoDocument(be.min()));n.push(this.ar.addEntry(e,o,u))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),U.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:i.get(o).readTime})}),i))}};function J1(t){return En(t,"remoteDocumentGlobal")}function qa(t){return En(t,"remoteDocumentsV14")}function Vh(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function eR(t,e){let n=e.documentKey.path.toArray();return[t,l_(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function tR(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Ve(n[o],i[o]),r)return r;return r=Ve(n.length,i.length),r||(r=Ve(n[n.length-2],i[i.length-2]),r||Ve(n[n.length-1],i[i.length-1]))}var KI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var g_=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Hh(i.mutation,r,Ii.empty(),Kt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Be()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Be()){let r=Wr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let s=jh();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let i=Wr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Be()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,i,r){let o=li(),s=$h(),c=function(){return $h()}();return n.forEach((u,f)=>{let p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof _r)?o=o.insert(f.key,f):p!==void 0?(s.set(f.key,p.mutation.getFieldMask()),Hh(p.mutation,f,p.mutation.getFieldMask(),Kt.now())):s.set(f.key,Ii.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,p)=>s.set(f,p)),n.forEach((f,p)=>{var _;return c.set(f,new KI(p,(_=s.get(f))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){let i=$h(),r=new Ut((s,c)=>s-c),o=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let f=n.get(u);if(f===null)return;let p=i.get(u)||Ii.empty();p=c.applyToLocalView(f,p),i.set(u,p);let _=(r.get(c.batchId)||Be()).add(u);r=r.insert(c.batchId,_)})}).next(()=>{let s=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),f=u.key,p=u.value,_=zR();p.forEach(b=>{if(!o.has(b)){let I=YR(n.get(b),i.get(b));I!==null&&_.set(b,I),o=o.add(b)}}),s.push(this.documentOverlayCache.saveOverlays(e,f,_))}return U.waitFor(s)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let s=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):U.resolve(Wr()),c=-1,u=o;return s.next(f=>U.forEach(f,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(p)?U.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{u=u.insert(p,b)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,Be())).next(p=>({batchId:c,changes:UR(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(i=>{let r=jh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,s=jh();return this.indexManager.getCollectionParents(e,o).next(c=>U.forEach(c,u=>{let f=function(_,b){return new gr(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(p=>{p.forEach((_,b)=>{s=s.insert(_,b)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(s=>{o.forEach((u,f)=>{let p=f.getKey();s.get(p)===null&&(s=s.insert(p,hn.newInvalidDocument(p)))});let c=jh();return s.forEach((u,f)=>{let p=o.get(u);p!==void 0&&Hh(p.mutation,f,Ii.empty(),Kt.now()),yf(n,f)&&(c=c.insert(u,f))}),c})}};var YI=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return U.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:rn(r.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:rE(r.bundledQuery),readTime:rn(r.readTime)}}(n)),U.resolve()}};var QI=class{constructor(){this.overlays=new Ut(oe.comparator),this.hr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Wr();return U.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),U.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),U.resolve()}getOverlaysForCollection(e,n,i){let r=Wr(),o=n.length+1,s=new oe(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return U.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Ut((f,p)=>f-p),s=this.overlays.getIterator();for(;s.hasNext();){let f=s.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Wr(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}let c=Wr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,p)=>c.set(f,p)),!(c.size()>=r)););return U.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let s=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,s)}this.overlays=this.overlays.insert(i.key,new tf(n,i));let o=this.hr.get(n);o===void 0&&(o=Be(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var cf=class{constructor(){this.Pr=new Pt(ln.Ir),this.Tr=new Pt(ln.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new ln(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new ln(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new oe(new ot([])),i=new ln(n,e),r=new ln(n,e+1),o=[];return this.Tr.forEachInRange([i,r],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new oe(new ot([])),i=new ln(n,e),r=new ln(n,e+1),o=Be();return this.Tr.forEachInRange([i,r],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new ln(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},ln=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return oe.comparator(e.key,n.key)||Ve(e.pr,n.pr)}static Er(e,n){return Ve(e.pr,n.pr)||oe.comparator(e.key,n.key)}};var XI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Pt(ln.Ir)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new ef(o,n,i,r);this.mutationQueue.push(s);for(let c of r)this.wr=this.wr.add(new ln(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,n){return U.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new ln(n,0),r=new ln(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],s=>{let c=this.Sr(s.pr);o.push(c)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Pt(Ve);return n.forEach(r=>{let o=new ln(r,0),s=new ln(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],c=>{i=i.add(c.pr)})}),U.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;oe.isDocumentKey(o)||(o=o.child(""));let s=new ln(new oe(o),0),c=new Pt(Ve);return this.wr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(u.pr)),!0)},s),U.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){ve(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return U.forEach(n.mutations,r=>{let o=new ln(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new ln(n,0),r=this.wr.firstAfterOrEqual(i);return U.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var JI=class{constructor(e){this.vr=e,this.docs=function(){return new Ut(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,s=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return U.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(n))}getEntries(e,n){let i=li();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():hn.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=li(),s=n.path,c=new oe(s.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:f,value:{document:p}}=u.getNext();if(!s.isPrefixOf(f.path))break;f.path.length>s.length+1||QC(vR(p),i)<=0||(r.has(p.key)||yf(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,n,i,r){he()}Fr(e,n){return U.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new eC(this)}getSize(e){return U.resolve(this.size)}},eC=class extends m_{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),U.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var tC=class{constructor(e){this.persistence=e,this.Mr=new Jr(n=>nc(n),_f),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Or=0,this.Nr=new cf,this.targetCount=0,this.Lr=yu.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),U.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new yu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.qn(n),U.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((s,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),U.waitFor(o).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return U.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),U.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(s=>{o.push(r.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),U.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return U.resolve(i)}containsKey(e,n){return U.resolve(this.Nr.containsKey(n))}};var __=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new wi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new tC(this),this.indexManager=new jI,this.remoteDocumentCache=function(r){return new JI(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new c_(n),this.$r=new YI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new XI(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){Q("MemoryPersistence","Starting transaction:",e);let r=new nC(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return U.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},nC=class extends Yg{constructor(e){super(),this.currentSequenceNumber=e}},v_=class t{constructor(e){this.persistence=e,this.zr=new cf,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw he()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),U.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),U.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Jr,i=>{let r=oe.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,be.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return U.or([()=>U.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var iC=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new Qg("createOrUpgrade",n);i<1&&r>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",v1,{unique:!0}),u.createObjectStore("documentMutations")}(e),nR(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=U.resolve();return i<3&&r>=3&&(i!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),nR(e)),s=s.next(()=>function(u){let f=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",p)}(o))),i<4&&r>=4&&(i!==0&&(s=s.next(()=>function(u,f){return f.store("mutations").U().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",v1,{unique:!0});let _=f.store("mutations"),b=p.map(I=>_.put(I));return U.waitFor(b)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(s=s.next(()=>this.Xr(o))),i<6&&r>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(s=s.next(()=>this.ti(o))),i<8&&r>=8&&(s=s.next(()=>this.ni(e,o))),i<9&&r>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(s=s.next(()=>this.ri(o))),i<11&&r>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(s=s.next(()=>{(function(u){let f=u.createObjectStore("documentOverlays",{keyPath:xH});f.createIndex("collectionPathOverlayIndex",DH,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",TH,{unique:!1})})(e)})),i<13&&r>=13&&(s=s.next(()=>function(u){let f=u.createObjectStore("remoteDocumentsV14",{keyPath:pH});f.createIndex("documentKeyIndex",mH),f.createIndex("collectionGroupIndex",gH)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(s=s.next(()=>this.si(e,o))),i<15&&r>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:wH}).createIndex("sequenceNumberIndex",IH,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:CH}).createIndex("documentKeyIndex",EH,{unique:!1})}(e))),i<16&&r>=16&&(s=s.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),s}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=f_(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>U.forEach(r,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",s).next(c=>U.forEach(c,u=>{ve(u.userId===o.userId);let f=Za(this.serializer,u);return gk(e,o.userId,f).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((s,c)=>{let u=new ot(s),f=function(_){return[0,Kn(_)]}(u);o.push(n.get(f).next(p=>p?U.resolve():(_=>n.put({targetId:0,path:Kn(_),sequenceNumber:r.highestListenSequenceNumber}))(u)))}).next(()=>U.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:bH});let i=n.store("collectionParents"),r=new af,o=s=>{if(r.add(s)){let c=s.lastSegment(),u=s.popLast();return i.put({collectionId:c,parent:Kn(u)})}};return n.store("remoteDocuments").J({H:!0},(s,c)=>{let u=new ot(s);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([s,c,u],f)=>{let p=Gr(c);return o(p.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=Uh(r),s=fk(this.serializer,o);return n.put(s)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,s)=>{let c=n.store("remoteDocumentsV14"),u=function(_){return _.document?new oe(ot.fromString(_.document.name).popFirst(5)):_.noDocument?oe.fromSegments(_.noDocument.path):_.unknownDocument?oe.fromSegments(_.unknownDocument.path):he()}(s).path.toArray(),f={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};r.push(c.put(f))}).next(()=>U.waitFor(r))}si(e,n){let i=n.store("mutations"),r=yk(this.serializer),o=new __(v_.Hr,this.serializer.ct);return i.U().next(s=>{let c=new Map;return s.forEach(u=>{var f;let p=(f=c.get(u.userId))!==null&&f!==void 0?f:Be();Za(this.serializer,u).keys().forEach(_=>p=p.add(_)),c.set(u.userId,p)}),U.forEach(c,(u,f)=>{let p=new un(f),_=u_.lt(this.serializer,p),b=o.getIndexManager(p),I=p_.lt(p,this.serializer,b,o.referenceDelegate);return new g_(r,I,_,b).recalculateAndSaveOverlaysForDocumentKeys(new Kh(n,wi.oe),u).next()})})}};function nR(t){t.createObjectStore("targetDocuments",{keyPath:vH}).createIndex("documentTargetsIndex",yH,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",_H,{unique:!0}),t.createObjectStore("targetGlobal")}var Zw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",rC=class t{constructor(e,n,i,r,o,s,c,u,f,p,_=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=s,this.document=c,this._i=f,this.ai=p,this.ui=_,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=b=>Promise.resolve(),!t.D())throw new K(q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new GI(this,r),this.Ti=n+"main",this.serializer=new c_(u),this.Ei=new Ls(this.Ti,this.ui,new iC(this.serializer)),this.Qr=new zI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=yk(this.serializer),this.$r=new kI,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,p===!1&&tn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(q.FAILED_PRECONDITION,Zw);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new wi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>k(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>k(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>k(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bg(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ws(e))return Q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Bh(e).get("owner").next(n=>U.resolve(this.Si(n)))}bi(e){return Bg(e).delete(this.clientId)}Di(){return k(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=En(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),s=r.filter(c=>o.indexOf(c)===-1);return U.forEach(s,c=>i.delete(c.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?U.resolve(!0):Bh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new K(q.FAILED_PRECONDITION,Zw);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bg(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,s=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||s&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return k(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new Kh(e,wi.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>Bg(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return p_.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new UI(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return u_.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){Q("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?AH:u===15?DR:u===14?xR:u===13?ER:u===12?SH:u===11?CR:void he()}(this.ui),s;return this.Ei.runTransaction(e,r,o,c=>(s=new Kh(c,this.kr?this.kr.next():wi.oe),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new K(q.FAILED_PRECONDITION,yR);return i(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>i(s)))).then(c=>(s.raiseOnCommittedEvent(),c))}ki(e){return Bh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(q.FAILED_PRECONDITION,Zw)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Bh(e).put("owner",n)}static D(){return Ls.D()}yi(e){let n=Bh(e);return n.get("owner").next(i=>this.Si(i)?(Q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):U.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(tn(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;Gv()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return Q("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return tn("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Bh(t){return En(t,"owner")}function Bg(t){return En(t,"clientMetadata")}function sE(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var oC=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=Be(),r=Be();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var sC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var y_=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Gv()?8:bR(Sd())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new sC;return this.Ji(e,n,s).next(c=>{if(o.result=c,this.Ui)return this.Yi(e,n,s,c.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(nu()<=Mr.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",iu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),U.resolve()):(nu()<=Mr.DEBUG&&Q("QueryEngine","Query:",iu(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(nu()<=Mr.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",iu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):U.resolve())}ji(e,n){if(A1(n))return U.resolve(null);let i=Yn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=r_(n,null,"F"),i=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let s=Be(...o);return this.zi.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.Zi(n,c);return this.Xi(n,f,s,u.readTime)?this.ji(e,r_(n,null,"F")):this.es(e,f,n,u)}))})))}Hi(e,n,i,r){return A1(n)||r.isEqual(be.min())?U.resolve(null):this.zi.getDocuments(e,i).next(o=>{let s=this.Zi(n,o);return this.Xi(n,s,i,r)?U.resolve(null):(nu()<=Mr.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),iu(n)),this.es(e,s,n,_R(r,-1)).next(c=>c))})}Zi(e,n){let i=new Pt(BR(e));return n.forEach((r,o)=>{yf(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return nu()<=Mr.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",iu(n)),this.zi.getDocumentsMatchingQuery(e,n,qi.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var aC=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Ut(Ve),this.rs=new Jr(o=>nc(o),_f),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g_(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function bk(t,e,n,i){return new aC(t,e,n,i)}function wk(t,e){return k(this,null,function*(){let n=se(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let s=[],c=[],u=Be();for(let f of r){s.push(f.batchId);for(let p of f.mutations)u=u.add(p.key)}for(let f of o){c.push(f.batchId);for(let p of f.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(i,u).next(f=>({us:f,removedBatchIds:s,addedBatchIds:c}))})})})}function c3(t,e){let n=se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,f,p){let _=f.batch,b=_.keys(),I=U.resolve();return b.forEach(S=>{I=I.next(()=>p.getEntry(u,S)).next(P=>{let O=f.docVersions.get(S);ve(O!==null),P.version.compareTo(O)<0&&(_.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),p.addEntry(P)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,_))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=Be();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Ik(t){let e=se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function l3(t,e){let n=se(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((p,_)=>{let b=r.get(_);if(!b)return;c.push(n.Qr.removeMatchingKeys(o,p.removedDocuments,_).next(()=>n.Qr.addMatchingKeys(o,p.addedDocuments,_)));let I=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Cn.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,i)),r=r.insert(_,I),function(P,O,W){return P.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(b,I,p)&&c.push(n.Qr.updateTargetData(o,I))});let u=li(),f=Be();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(Ck(o,s,e.documentUpdates).next(p=>{u=p.cs,f=p.ls})),!i.isEqual(be.min())){let p=n.Qr.getLastRemoteSnapshotVersion(o).next(_=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(p)}return U.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.ns=r,o))}function Ck(t,e,n){let i=Be(),r=Be();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let s=li();return n.forEach((c,u)=>{let f=o.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):Q("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)}),{cs:s,ls:r}})}function u3(t,e){let n=se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function bu(t,e){let n=se(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,U.resolve(r)):n.Qr.allocateTargetId(i).next(s=>(r=new vu(e,s,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function wu(t,e,n){return k(this,null,function*(){let i=se(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,s=>i.persistence.referenceDelegate.removeTarget(s,r)))}catch(s){if(!Ws(s))throw s;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function b_(t,e,n){let i=se(t),r=be.min(),o=Be();return i.persistence.runTransaction("Execute query","readwrite",s=>function(u,f,p){let _=se(u),b=_.rs.get(p);return b!==void 0?U.resolve(_.ns.get(b)):_.Qr.getTargetData(f,p)}(i,s,Yn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>i.ts.getDocumentsMatchingQuery(s,e,n?r:be.min(),n?o:Be())).next(c=>(Dk(i,VR(e),c),{documents:c,hs:o})))}function Ek(t,e){let n=se(t),i=se(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(s=>s?s.target:null))}function xk(t,e){let n=se(t),i=n.ss.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,_R(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Dk(n,e,r),r))}function Dk(t,e,n){let i=t.ss.get(e)||be.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function d3(t,e,n,i){return k(this,null,function*(){let r=se(t),o=Be(),s=li();for(let f of n){let p=e.Ps(f.metadata.name);f.document&&(o=o.add(p));let _=e.Is(f);_.setReadTime(e.Ts(f.metadata.readTime)),s=s.insert(p,_)}let c=r.os.newChangeBuffer({trackRemovals:!0}),u=yield bu(r,function(p){return Yn(Au(ot.fromString(`__bundle__/docs/${p}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>Ck(f,c,s).next(p=>(c.apply(f),p)).next(p=>r.Qr.removeMatchingKeysForTargetId(f,u.targetId).next(()=>r.Qr.addMatchingKeys(f,o,u.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,p.cs,p.ls)).next(()=>p.cs)))})}function h3(i,r){return k(this,arguments,function*(t,e,n=Be()){let o=yield bu(t,Yn(rE(e.bundledQuery))),s=se(t);return s.persistence.runTransaction("Save named query","readwrite",c=>{let u=rn(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.$r.saveNamedQuery(c,e);let f=o.withResumeToken(Cn.EMPTY_BYTE_STRING,u);return s.ns=s.ns.insert(f.targetId,f),s.Qr.updateTargetData(c,f).next(()=>s.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>s.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>s.$r.saveNamedQuery(c,e))})})}function iR(t,e){return`firestore_clients_${t}_${e}`}function rR(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Kw(t,e){return`firestore_targets_${t}_${e}`}var w_=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new K(r.error.code,r.error.message))),s?new t(e,n,r.state,o):(tn("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},qh=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new K(i.error.code,i.error.message))),o?new t(e,i.state,r):(tn("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},I_=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=nE();for(let s=0;r&&s<i.activeTargetIds.length;++s)r=wR(i.activeTargetIds[s]),o=o.add(i.activeTargetIds[s]);return r?new t(e,o):(tn("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},cC=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(tn("SharedClientState",`Failed to parse online state: ${e}`),null)}},lf=class{constructor(){this.activeTargetIds=nE()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Gh=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Ut(Ve),this.started=!1,this.ys=[];let s=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=iR(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new lf),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return k(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(iR(this.persistenceKey,i));if(r){let o=I_.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Kw(this.persistenceKey,e));if(i){let r=qh.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kw(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return Q("SharedClientState","READ",e,n),n}setItem(e,n){Q("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(Q("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>k(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let s=wi.oe;if(o!=null)try{let c=JSON.parse(o);ve(typeof c=="number"),s=c}catch(c){tn("SharedClientState","Failed to read sequence number from WebStorage",c)}return s}(n.newValue);i!==wi.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new w_(this.currentUser,e,n,i),o=rR(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=rR(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=Kw(this.persistenceKey,e),o=new qh(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return I_.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return w_.Es(new un(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return qh.Es(r,n)}xs(e){return cC.Es(e)}Js(e){return JSON.parse(e)}zs(e){return k(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),s=[],c=[];return o.forEach(u=>{r.has(u)||s.push(u)}),r.forEach(u=>{o.has(u)||c.push(u)}),this.syncEngine.eo(s,c).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=nE();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},C_=class{constructor(){this.no=new lf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new lf,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var lC=class{io(e){}shutdown(){}};var E_=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var jg=null;function Yw(){return jg===null?jg=function(){return 268435456+Math.round(2147483648*Math.random())}():jg++,"0x"+jg.toString(16)}var f3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var uC=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Vn="WebChannelConnection",dC=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,s){let c=Yw(),u=this.vo(n,i.toUriEncodedString());Q("RestConnection",`Sending RPC '${n}' ${c}:`,u,r);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,s),this.Mo(n,u,f,r).then(p=>(Q("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw Hi("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",r),p})}xo(n,i,r,o,s,c){return this.Co(n,i,r,o,s)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Su}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,s)=>n[s]=o),r&&r.headers.forEach((o,s)=>n[s]=o)}vo(n,i){let r=f3[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=Yw();return new Promise((s,c)=>{let u=new Uw;u.setWithCredentials(!0),u.listenOnce($w.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Oh.NO_ERROR:let p=u.getResponseJson();Q(Vn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),s(p);break;case Oh.TIMEOUT:Q(Vn,`RPC '${e}' ${o} timed out`),c(new K(q.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:let _=u.getStatus();if(Q(Vn,`RPC '${e}' ${o} failed with status:`,_,"response text:",u.getResponseText()),_>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);let I=b?.error;if(I&&I.status&&I.message){let S=function(O){let W=O.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(W)>=0?W:q.UNKNOWN}(I.status);c(new K(S,I.message))}else c(new K(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(q.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{Q(Vn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);Q(Vn,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,i,15)})}Oo(e,n,i){let r=Yw(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Gw(),c=qw(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.xmlHttpFactory=new zw({})),this.Fo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;let p=o.join("");Q(Vn,`Creating RPC '${e}' stream ${r}: ${p}`,u);let _=s.createWebChannel(p,u),b=!1,I=!1,S=new uC({lo:O=>{I?Q(Vn,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(b||(Q(Vn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),b=!0),Q(Vn,`RPC '${e}' stream ${r} sending:`,O),_.send(O))},ho:()=>_.close()}),P=(O,W,X)=>{O.listen(W,Z=>{try{X(Z)}catch(ae){setTimeout(()=>{throw ae},0)}})};return P(_,Ql.EventType.OPEN,()=>{I||(Q(Vn,`RPC '${e}' stream ${r} transport opened.`),S.mo())}),P(_,Ql.EventType.CLOSE,()=>{I||(I=!0,Q(Vn,`RPC '${e}' stream ${r} transport closed`),S.po())}),P(_,Ql.EventType.ERROR,O=>{I||(I=!0,Hi(Vn,`RPC '${e}' stream ${r} transport errored:`,O),S.po(new K(q.UNAVAILABLE,"The operation could not be completed")))}),P(_,Ql.EventType.MESSAGE,O=>{var W;if(!I){let X=O.data[0];ve(!!X);let Z=X,ae=Z.error||((W=Z[0])===null||W===void 0?void 0:W.error);if(ae){Q(Vn,`RPC '${e}' stream ${r} received error:`,ae);let _e=ae.status,me=function(x){let M=cn[x];if(M!==void 0)return JR(M)}(_e),A=ae.message;me===void 0&&(me=q.INTERNAL,A="Unknown error status: "+_e+" with message "+ae.message),I=!0,S.po(new K(me,A)),_.close()}else Q(Vn,`RPC '${e}' stream ${r} received:`,X),S.yo(X)}}),P(c,Hw.STAT_EVENT,O=>{O.stat===Fg.PROXY?Q(Vn,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===Fg.NOPROXY&&Q(Vn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.fo()},0),S}};function Tk(){return typeof window<"u"?window:null}function qg(){return typeof document<"u"?document:null}function bf(t){return new SI(t,!0)}var uf=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&Q("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var x_=class{constructor(e,n,i,r,o,s,c,u){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new uf(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return k(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return k(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return k(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(tn(n.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new K(q.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>k(this,null,function*(){this.state=0,this.start()}))}c_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},hC=class extends x_{constructor(e,n,i,r,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=QH(this.serializer,e),i=function(o){if(!("targetChange"in o))return be.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?be.min():s.readTime?rn(s.readTime):be.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=PI(this.serializer),n.addTarget=function(o,s){let c,u=s.target;if(c=n_(u)?{documents:ak(o,u)}:{query:ck(o,u)._t},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=tk(o,s.resumeToken);let f=AI(o,s.expectedCount);f!==null&&(c.expectedCount=f)}else if(s.snapshotVersion.compareTo(be.min())>0){c.readTime=_u(o,s.snapshotVersion.toTimestamp());let f=AI(o,s.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=JH(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=PI(this.serializer),n.removeTarget=e,this.i_(n)}},fC=class extends x_{constructor(e,n,i,r,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,s),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(ve(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=XH(e.writeResults,e.commitTime),i=rn(e.commitTime);return this.listener.A_(i,n)}return ve(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=PI(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>sf(this.serializer,i))};this.i_(n)}};var pC=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new K(q.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Co(e,MI(n,i),r,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(q.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.xo(e,MI(n,i),r,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(q.UNKNOWN,s.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},mC=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(tn(n),this.y_=!1):Q("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var gC=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(s=>{i.enqueueAndForget(()=>k(this,null,function*(){Zs(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),yield function(u){return k(this,null,function*(){let f=se(u);f.M_.add(4),yield Mu(f),f.N_.set("Unknown"),f.M_.delete(4),yield wf(f)})}(this))}))}),this.N_=new mC(i,r)}};function wf(t){return k(this,null,function*(){if(Zs(t))for(let e of t.x_)yield e(!0)})}function Mu(t){return k(this,null,function*(){for(let e of t.x_)yield e(!1)})}function H_(t,e){let n=se(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),lE(n)?cE(n):Ru(n).Xo()&&aE(n,e))}function Iu(t,e){let n=se(t),i=Ru(n);n.F_.delete(e),i.Xo()&&Sk(n,e),n.F_.size===0&&(i.Xo()?i.n_():Zs(n)&&n.N_.set("Unknown"))}function aE(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ru(t).P_(e)}function Sk(t,e){t.L_.xe(e),Ru(t).I_(e)}function cE(t){t.L_=new TI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ru(t).start(),t.N_.w_()}function lE(t){return Zs(t)&&!Ru(t).Zo()&&t.F_.size>0}function Zs(t){return se(t).M_.size===0}function Ak(t){t.L_=void 0}function p3(t){return k(this,null,function*(){t.N_.set("Online")})}function m3(t){return k(this,null,function*(){t.F_.forEach((e,n)=>{aE(t,e)})})}function g3(t,e){return k(this,null,function*(){Ak(t),lE(t)?(t.N_.D_(e),cE(t)):t.N_.set("Unknown")})}function _3(t,e,n){return k(this,null,function*(){if(t.N_.set("Online"),e instanceof s_&&e.state===2&&e.cause)try{yield function(r,o){return k(this,null,function*(){let s=o.cause;for(let c of o.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,s),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield D_(t,i)}else if(e instanceof uu?t.L_.Ke(e):e instanceof o_?t.L_.He(e):t.L_.We(e),!n.isEqual(be.min()))try{let i=yield Ik(t.localStore);n.compareTo(i)>=0&&(yield function(o,s){let c=o.L_.rt(s);return c.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let p=o.F_.get(f);p&&o.F_.set(f,p.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,f)=>{let p=o.F_.get(u);if(!p)return;o.F_.set(u,p.withResumeToken(Cn.EMPTY_BYTE_STRING,p.snapshotVersion)),Sk(o,u);let _=new vu(p.target,u,f,p.sequenceNumber);aE(o,_)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){Q("RemoteStore","Failed to raise snapshot:",i),yield D_(t,i)}})}function D_(t,e,n){return k(this,null,function*(){if(!Ws(e))throw e;t.M_.add(1),yield Mu(t),t.N_.set("Offline"),n||(n=()=>Ik(t.localStore)),t.asyncQueue.enqueueRetryable(()=>k(this,null,function*(){Q("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield wf(t)}))})}function Mk(t,e){return e().catch(n=>D_(t,n,e))}function Pu(t){return k(this,null,function*(){let e=se(t),n=qs(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;v3(e);)try{let r=yield u3(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,y3(e,r)}catch(r){yield D_(e,r)}Pk(e)&&Rk(e)})}function v3(t){return Zs(t)&&t.v_.length<10}function y3(t,e){t.v_.push(e);let n=qs(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function Pk(t){return Zs(t)&&!qs(t).Zo()&&t.v_.length>0}function Rk(t){qs(t).start()}function b3(t){return k(this,null,function*(){qs(t).V_()})}function w3(t){return k(this,null,function*(){let e=qs(t);for(let n of t.v_)e.d_(n.mutations)})}function I3(t,e,n){return k(this,null,function*(){let i=t.v_.shift(),r=EI.from(i,e,n);yield Mk(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield Pu(t)})}function C3(t,e){return k(this,null,function*(){e&&qs(t).E_&&(yield function(i,r){return k(this,null,function*(){if(function(s){return XR(s)&&s!==q.ABORTED}(r.code)){let o=i.v_.shift();qs(i).t_(),yield Mk(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield Pu(i)}})}(t,e)),Pk(t)&&Rk(t)})}function oR(t,e){return k(this,null,function*(){let n=se(t);n.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");let i=Zs(n);n.M_.add(3),yield Mu(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield wf(n)})}function _C(t,e){return k(this,null,function*(){let n=se(t);e?(n.M_.delete(2),yield wf(n)):e||(n.M_.add(2),yield Mu(n),n.N_.set("Unknown"))})}function Ru(t){return t.B_||(t.B_=function(n,i,r){let o=se(n);return o.f_(),new hC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:p3.bind(null,t),To:m3.bind(null,t),Ao:g3.bind(null,t),h_:_3.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.B_.t_(),lE(t)?cE(t):t.N_.set("Unknown")):(yield t.B_.stop(),Ak(t))}))),t.B_}function qs(t){return t.k_||(t.k_=function(n,i,r){let o=se(n);return o.f_(),new fC(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:b3.bind(null,t),Ao:C3.bind(null,t),R_:w3.bind(null,t),A_:I3.bind(null,t)}),t.x_.push(e=>k(this,null,function*(){e?(t.k_.t_(),yield Pu(t)):(yield t.k_.stop(),t.v_.length>0&&(Q("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var vC=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new dn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let s=Date.now()+i,c=new t(e,n,s,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function ku(t,e){if(tn("AsyncQueue",`${e}: ${t}`),Ws(t))return new K(q.UNAVAILABLE,`${e}: ${t}`);throw t}var T_=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||oe.comparator(n.key,i.key):(n,i)=>oe.comparator(n.key,i.key),this.keyedMap=jh(),this.sortedSet=new Ut(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var S_=class{constructor(){this.q_=new Ut(oe.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):he():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Cu=class t{constructor(e,n,i,r,o,s,c,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,T_.emptySet(n),s,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var yC=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},bC=class{constructor(){this.queries=new Jr(e=>LR(e),vf),this.onlineState="Unknown",this.z_=new Set}};function uE(t,e){return k(this,null,function*(){let n=se(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new yC,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(s){let c=ku(s,`Initialization of query '${iu(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&hE(n)})}function dE(t,e){return k(this,null,function*(){let n=se(t),i=e.query,r=3,o=n.queries.get(i);if(o){let s=o.U_.indexOf(e);s>=0&&(o.U_.splice(s,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function E3(t,e){let n=se(t),i=!1;for(let r of e){let o=r.query,s=n.queries.get(o);if(s){for(let c of s.U_)c.H_(r)&&(i=!0);s.K_=r}}i&&hE(n)}function x3(t,e,n){let i=se(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function hE(t){t.z_.forEach(e=>{e.next()})}var wC,sR;(sR=wC||(wC={})).J_="default",sR.Cache="cache";var df=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Cu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Cu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==wC.Cache}};var IC=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var A_=class{constructor(e){this.serializer=e}Ps(e){return Kr(this.serializer,e)}Is(e){return e.metadata.exists?sk(this.serializer,e.document,!1):hn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return rn(e)}},CC=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kk(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=ot.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new A_(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let s of r.metadata.queries){let c=(n.get(s)||Be()).add(o);n.set(s,c)}}return n}complete(){return k(this,null,function*(){let e=yield d3(this.localStore,new A_(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield h3(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function kk(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var M_=class{constructor(e){this.key=e}},P_=class{constructor(e){this.key=e}},R_=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Be(),this.mutatedKeys=Be(),this.Ia=BR(e),this.Ta=new T_(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new S_,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,s=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,_)=>{let b=r.get(p),I=yf(this.query,_)?_:null,S=!!b&&this.mutatedKeys.has(b.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),O=!1;b&&I?b.data.isEqual(I.data)?S!==P&&(i.track({type:3,doc:I}),O=!0):this.Ra(b,I)||(i.track({type:2,doc:I}),O=!0,(u&&this.Ia(I,u)>0||f&&this.Ia(I,f)<0)&&(c=!0)):!b&&I?(i.track({type:0,doc:I}),O=!0):b&&!I&&(i.track({type:1,doc:b}),O=!0,(u||f)&&(c=!0)),O&&(I?(s=s.add(I),o=P?o.add(p):o.delete(p)):(s=s.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let p=this.query.limitType==="F"?s.last():s.first();s=s.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{Ta:s,Aa:i,Xi:c,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let s=e.Aa.Q_();s.sort((p,_)=>function(I,S){let P=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return P(I)-P(S)}(p.type,_.type)||this.Ia(p.doc,_.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,f=u!==this.ha;return this.ha=u,s.length!==0||f?{snapshot:new Cu(this.query,e.Ta,o,s,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new S_,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=Be(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new P_(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new M_(i))}),n}pa(e){this.la=e.hs,this.Pa=Be();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Cu.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},EC=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},xC=class{constructor(e){this.key=e,this.wa=!1}},DC=class{constructor(e,n,i,r,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Sa={},this.ba=new Jr(c=>LR(c),vf),this.Da=new Map,this.Ca=new Set,this.va=new Ut(oe.comparator),this.Fa=new Map,this.Ma=new cf,this.xa={},this.Oa=new Map,this.Na=yu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function D3(t,e,n=!0){return k(this,null,function*(){let i=q_(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield Nk(i,e,n,!0),r})}function T3(t,e){return k(this,null,function*(){let n=q_(t);yield Nk(n,e,!0,!1)})}function Nk(t,e,n,i){return k(this,null,function*(){let r=yield bu(t.localStore,Yn(e)),o=r.targetId,s=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",c;return i&&(c=yield fE(t,e,o,s==="current",r.resumeToken)),t.isPrimaryClient&&n&&H_(t.remoteStore,r),c})}function fE(t,e,n,i,r){return k(this,null,function*(){t.Ba=(_,b,I)=>function(P,O,W,X){return k(this,null,function*(){let Z=O.view.da(W);Z.Xi&&(Z=yield b_(P.localStore,O.query,!1).then(({documents:A})=>O.view.da(A,Z)));let ae=X&&X.targetChanges.get(O.targetId),_e=X&&X.targetMismatches.get(O.targetId)!=null,me=O.view.applyChanges(Z,P.isPrimaryClient,ae,_e);return TC(P,O.targetId,me.fa),me.snapshot})}(t,_,b,I);let o=yield b_(t.localStore,e,!0),s=new R_(e,o.hs),c=s.da(o.documents),u=rf.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=s.applyChanges(c,t.isPrimaryClient,u);TC(t,n,f.fa);let p=new EC(e,n,s);return t.ba.set(e,p),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),f.snapshot})}function S3(t,e,n){return k(this,null,function*(){let i=se(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(s=>!vf(s,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wu(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Iu(i.remoteStore,r.targetId),Eu(i,r.targetId)}).catch(Gs))):(Eu(i,r.targetId),yield wu(i.localStore,r.targetId,!0))})}function A3(t,e){return k(this,null,function*(){let n=se(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Iu(n.remoteStore,i.targetId))})}function M3(t,e,n){return k(this,null,function*(){let i=_E(t);try{let r=yield function(s,c){let u=se(s),f=Kt.now(),p=c.reduce((I,S)=>I.add(S.key),Be()),_,b;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let S=li(),P=Be();return u.os.getEntries(I,p).next(O=>{S=O,S.forEach((W,X)=>{X.isValidDocument()||(P=P.add(W))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,S)).next(O=>{_=O;let W=[];for(let X of c){let Z=HH(X,_.get(X.key).overlayedDocument);Z!=null&&W.push(new _r(X.key,Z,MR(Z.value.mapValue),Qt.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,W,c)}).next(O=>{b=O;let W=O.applyToLocalDocumentSet(_,P);return u.documentOverlayCache.saveOverlays(I,O.batchId,W)})}).then(()=>({batchId:b.batchId,changes:UR(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,u){let f=s.xa[s.currentUser.toKey()];f||(f=new Ut(Ve)),f=f.insert(c,u),s.xa[s.currentUser.toKey()]=f}(i,r.batchId,n),yield Uo(i,r.changes),yield Pu(i.remoteStore)}catch(r){let o=ku(r,"Failed to persist write");n.reject(o)}})}function Ok(t,e){return k(this,null,function*(){let n=se(t);try{let i=yield l3(n.localStore,e);e.targetChanges.forEach((r,o)=>{let s=n.Fa.get(o);s&&(ve(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?s.wa=!0:r.modifiedDocuments.size>0?ve(s.wa):r.removedDocuments.size>0&&(ve(s.wa),s.wa=!1))}),yield Uo(n,i,e)}catch(i){yield Gs(i)}})}function aR(t,e,n){let i=se(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,s)=>{let c=s.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(s,c){let u=se(s);u.onlineState=c;let f=!1;u.queries.forEach((p,_)=>{for(let b of _.U_)b.j_(c)&&(f=!0)}),f&&hE(u)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function P3(t,e,n){return k(this,null,function*(){let i=se(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let s=new Ut(oe.comparator);s=s.insert(o,hn.newNoDocument(o,be.min()));let c=Be().add(o),u=new nf(be.min(),new Map,new Ut(Ve),s,c);yield Ok(i,u),i.va=i.va.remove(o),i.Fa.delete(e),gE(i)}else yield wu(i.localStore,e,!1).then(()=>Eu(i,e,n)).catch(Gs)})}function R3(t,e){return k(this,null,function*(){let n=se(t),i=e.batch.batchId;try{let r=yield c3(n.localStore,e);mE(n,i,null),pE(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield Uo(n,r)}catch(r){yield Gs(r)}})}function k3(t,e,n){return k(this,null,function*(){let i=se(t);try{let r=yield function(s,c){let u=se(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return u.mutationQueue.lookupMutationBatch(f,c).next(_=>(ve(_!==null),p=_.keys(),u.mutationQueue.removeMutationBatch(f,_))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>u.localDocuments.getDocuments(f,p))})}(i.localStore,e);mE(i,e,n),pE(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield Uo(i,r)}catch(r){yield Gs(r)}})}function N3(t,e){return k(this,null,function*(){let n=se(t);Zs(n.remoteStore)||Q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(s){let c=se(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=ku(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function pE(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function mE(t,e,n){let i=se(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Eu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||Fk(t,i)})}function Fk(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Iu(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),gE(t))}function TC(t,e,n){for(let i of n)i instanceof M_?(t.Ma.addReference(i.key,e),O3(t,i)):i instanceof P_?(Q("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||Fk(t,i.key)):he()}function O3(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(Q("SyncEngine","New document in limbo: "+n),t.Ca.add(i),gE(t))}function gE(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new oe(ot.fromString(e)),i=t.Na.next();t.Fa.set(i,new xC(n)),t.va=t.va.insert(n,i),H_(t.remoteStore,new vu(Yn(Au(n.path)),i,"TargetPurposeLimboResolution",wi.oe))}}function Uo(t,e,n){return k(this,null,function*(){let i=se(t),r=[],o=[],s=[];i.ba.isEmpty()||(i.ba.forEach((c,u)=>{s.push(i.Ba(u,e,n).then(f=>{if((f||n)&&i.isPrimaryClient){let p=f&&!f.fromCache;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){r.push(f);let p=oC.Ki(u.targetId,f);o.push(p)}}))}),yield Promise.all(s),i.Sa.h_(r),yield function(u,f){return k(this,null,function*(){let p=se(u);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>U.forEach(f,b=>U.forEach(b.qi,I=>p.persistence.referenceDelegate.addReference(_,b.targetId,I)).next(()=>U.forEach(b.Qi,I=>p.persistence.referenceDelegate.removeReference(_,b.targetId,I)))))}catch(_){if(!Ws(_))throw _;Q("LocalStore","Failed to update sequence numbers: "+_)}for(let _ of f){let b=_.targetId;if(!_.fromCache){let I=p.ns.get(b),S=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(S);p.ns=p.ns.insert(b,P)}}})}(i.localStore,o))})}function F3(t,e){return k(this,null,function*(){let n=se(t);if(!n.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());let i=yield wk(n.localStore,e);n.currentUser=e,function(o,s){o.Oa.forEach(c=>{c.forEach(u=>{u.reject(new K(q.CANCELLED,s))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Uo(n,i.us)}})}function L3(t,e){let n=se(t),i=n.Fa.get(e);if(i&&i.wa)return Be().add(i.key);{let r=Be(),o=n.Da.get(e);if(!o)return r;for(let s of o){let c=n.ba.get(s);r=r.unionWith(c.view.Ea)}return r}}function V3(t,e){return k(this,null,function*(){let n=se(t),i=yield b_(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&TC(n,e.targetId,r.fa),r})}function B3(t,e){return k(this,null,function*(){let n=se(t);return xk(n.localStore,e).then(i=>Uo(n,i))})}function j3(t,e,n,i){return k(this,null,function*(){let r=se(t),o=yield function(c,u){let f=se(c),p=se(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",_=>p.vn(_,u).next(b=>b?f.localDocuments.getDocuments(_,b):U.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield Pu(r.remoteStore):n==="acknowledged"||n==="rejected"?(mE(r,e,i||null),pE(r,e),function(c,u){se(se(c).mutationQueue).Mn(u)}(r.localStore,e)):he(),yield Uo(r,o)):Q("SyncEngine","Cannot apply mutation batch with id: "+e)})}function U3(t,e){return k(this,null,function*(){let n=se(t);if(q_(n),_E(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield cR(n,i.toArray());n.La=!0,yield _C(n.remoteStore,!0);for(let o of r)H_(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?i.push(s):r=r.then(()=>(Eu(n,s),wu(n.localStore,s,!0))),Iu(n.remoteStore,s)}),yield r,yield cR(n,i),function(s){let c=se(s);c.Fa.forEach((u,f)=>{Iu(c.remoteStore,f)}),c.Ma.mr(),c.Fa=new Map,c.va=new Ut(oe.comparator)}(n),n.La=!1,yield _C(n.remoteStore,!1)}})}function cR(t,e,n){return k(this,null,function*(){let i=se(t),r=[],o=[];for(let s of e){let c,u=i.Da.get(s);if(u&&u.length!==0){c=yield bu(i.localStore,Yn(u[0]));for(let f of u){let p=i.ba.get(f),_=yield V3(i,p);_.snapshot&&o.push(_.snapshot)}}else{let f=yield Ek(i.localStore,s);c=yield bu(i.localStore,f),yield fE(i,Lk(f),s,!1,c.resumeToken)}r.push(c)}return i.Sa.h_(o),r})}function Lk(t){return FR(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function z3(t){return function(n){return se(se(n).persistence).Bi()}(se(t).localStore)}function $3(t,e,n,i){return k(this,null,function*(){let r=se(t);if(r.La)return void Q("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let s=yield xk(r.localStore,VR(o[0])),c=nf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Cn.EMPTY_BYTE_STRING);yield Uo(r,s,c);break}case"rejected":yield wu(r.localStore,e,!0),Eu(r,e,i);break;default:he()}})}function H3(t,e,n){return k(this,null,function*(){let i=q_(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Q("SyncEngine","Adding an already active target "+r);continue}let o=yield Ek(i.localStore,r),s=yield bu(i.localStore,o);yield fE(i,Lk(o),s.targetId,!1,s.resumeToken),H_(i.remoteStore,s)}for(let r of n)i.Da.has(r)&&(yield wu(i.localStore,r,!1).then(()=>{Iu(i.remoteStore,r),Eu(i,r)}).catch(Gs))}})}function q_(t){let e=se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ok.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P3.bind(null,e),e.Sa.h_=E3.bind(null,e.eventManager),e.Sa.ka=x3.bind(null,e.eventManager),e}function _E(t){let e=se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=k3.bind(null,e),e}function q3(t,e,n){let i=se(t);(function(o,s,c){return k(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(I,S){let P=se(I),O=rn(S.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",W=>P.$r.getBundleMetadata(W,S.id)).then(W=>!!W&&W.createTime.compareTo(O)>=0)}(o.localStore,u))return yield s.close(),c._completeWith(function(I){return{taskState:"Success",documentsLoaded:I.totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}}(u)),Promise.resolve(new Set);c._updateProgress(kk(u));let f=new CC(u,o.localStore,s.serializer),p=yield s.qa();for(;p;){let b=yield f._a(p);b&&c._updateProgress(b),p=yield s.qa()}let _=yield f.complete();return yield Uo(o,_.ca,void 0),yield function(I,S){let P=se(I);return P.persistence.runTransaction("Save bundle","readwrite",O=>P.$r.saveBundleMetadata(O,S))}(o.localStore,u),c._completeWith(_.progress),Promise.resolve(_.ua)}catch(u){return Hi("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var hf=class{constructor(){this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){this.serializer=bf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return bk(this.persistence,new y_,e.initialUser,this.serializer)}createPersistence(e){return new __(v_.Hr,this.serializer)}createSharedClientState(e){return new C_}terminate(){return k(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var k_=class t extends hf{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return k(this,null,function*(){yield $v(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield _E(this.Qa.syncEngine),yield Pu(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return bk(this.persistence,new y_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new HI(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new cI(n,this.persistence);return new aI(e.asyncQueue,i)}createPersistence(e){let n=sE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?$i.withCacheSize(this.cacheSizeBytes):$i.DEFAULT;return new rC(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,Tk(),qg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new C_}},SC=class t extends k_{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return k(this,null,function*(){yield $v(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof Gh&&(this.sharedClientState.syncEngine={Zs:j3.bind(null,n),Xs:$3.bind(null,n),eo:H3.bind(null,n),Bi:z3.bind(null,n),Ys:B3.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>k(this,null,function*(){yield U3(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=Tk();if(!Gh.D(n))throw new K(q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=sE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gh(n,e.asyncQueue,i,e.clientId,e.initialUser)}},ff=class{initialize(e,n){return k(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>aR(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=F3.bind(null,this.syncEngine),yield _C(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new bC}()}createDatastore(e){let n=bf(e.databaseInfo.databaseId),i=function(o){return new dC(o)}(e.databaseInfo);return function(o,s,c,u){return new pC(o,s,c,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,s,c){return new gC(i,r,o,s,c)}(this.localStore,this.datastore,e.asyncQueue,n=>aR(this.syncEngine,n,0),function(){return E_.D()?new E_:new lC}())}createSyncEngine(e,n){return function(r,o,s,c,u,f,p){let _=new DC(r,o,s,c,u,f);return p&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return k(this,null,function*(){var e;yield function(i){return k(this,null,function*(){let r=se(i);Q("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield Mu(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function lR(t,e=10240){let n=0;return{read(){return k(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return k(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var xu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var AC=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new dn,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return k(this,null,function*(){return this.metadata.promise})}qa(){return k(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return k(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new IC(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return k(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return k(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return k(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var MC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return k(this,null,function*(){let s=se(r),c={documents:o.map(_=>of(s.serializer,_))},u=yield s.xo("BatchGetDocuments",s.serializer.databaseId,ot.emptyPath(),c,o.length),f=new Map;u.forEach(_=>{let b=YH(s.serializer,_);f.set(b.key.toString(),b)});let p=[];return o.forEach(_=>{let b=f.get(_.toString());ve(!!b),p.push(b)}),p})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return k(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=oe.fromPath(i);this.mutations.push(new Jh(r,this.precondition(r)))}),yield function(i,r){return k(this,null,function*(){let o=se(i),s={writes:r.map(c=>sf(o.serializer,c))};yield o.Co("Commit",o.serializer.databaseId,ot.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw he();n=be.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new K(q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?Qt.exists(!1):Qt.updateTime(n):Qt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new K(q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qt.updateTime(n)}return Qt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var PC=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new uf(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>k(this,null,function*(){let e=new MC(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!gf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!XR(n)}return!1}};var RC=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=un.UNAUTHENTICATED,this.clientId=Zg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>k(this,null,function*(){Q("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(Q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(q.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=ku(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Gg(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>k(this,null,function*(){i.isEqual(r)||(yield wk(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function kC(t,e){return k(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield vE(t);Q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>oR(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>oR(e.remoteStore,r)),t._onlineComponents=e})}function Vk(t){return t.name==="FirebaseError"?t.code===q.FAILED_PRECONDITION||t.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function vE(t){return k(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Gg(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!Vk(n))throw n;Hi("Error using user provided cache. Falling back to memory cache: "+n),yield Gg(t,new hf)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),yield Gg(t,new hf);return t._offlineComponents})}function G_(t){return k(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),yield kC(t,t._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),yield kC(t,new ff))),t._onlineComponents})}function Bk(t){return vE(t).then(e=>e.persistence)}function yE(t){return vE(t).then(e=>e.localStore)}function jk(t){return G_(t).then(e=>e.remoteStore)}function bE(t){return G_(t).then(e=>e.syncEngine)}function G3(t){return G_(t).then(e=>e.datastore)}function Du(t){return k(this,null,function*(){let e=yield G_(t),n=e.eventManager;return n.onListen=D3.bind(null,e.syncEngine),n.onUnlisten=S3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=T3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A3.bind(null,e.syncEngine),n})}function W3(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield Bk(t),n=yield jk(t);return e.setNetworkEnabled(!0),function(r){let o=se(r);return o.M_.delete(0),wf(o)}(n)}))}function Z3(t){return t.asyncQueue.enqueue(()=>k(this,null,function*(){let e=yield Bk(t),n=yield jk(t);return e.setNetworkEnabled(!1),function(r){return k(this,null,function*(){let o=se(r);o.M_.add(0),yield Mu(o),o.N_.set("Offline")})}(n)}))}function K3(t,e){let n=new dn;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o,s){return k(this,null,function*(){try{let c=yield function(f,p){let _=se(f);return _.persistence.runTransaction("read document","readonly",b=>_.localDocuments.getDocument(b,p))}(r,o);c.isFoundDocument()?s.resolve(c):c.isNoDocument()?s.resolve(null):s.reject(new K(q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let u=ku(c,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield yE(t),e,n)})),n.promise}function Uk(t,e,n={}){let i=new dn;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,c,u,f){let p=new xu({next:b=>{s.enqueueAndForget(()=>dE(o,_));let I=b.docs.has(c);!I&&b.fromCache?f.reject(new K(q.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&u&&u.source==="server"?f.reject(new K(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),_=new df(Au(c.path),p,{includeMetadataChanges:!0,ra:!0});return uE(o,_)}(yield Du(t),t.asyncQueue,e,n,i)})),i.promise}function Y3(t,e){let n=new dn;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o,s){return k(this,null,function*(){try{let c=yield b_(r,o,!0),u=new R_(o,c.hs),f=u.da(c.documents),p=u.applyChanges(f,!1);s.resolve(p.snapshot)}catch(c){let u=ku(c,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield yE(t),e,n)})),n.promise}function zk(t,e,n={}){let i=new dn;return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(o,s,c,u,f){let p=new xu({next:b=>{s.enqueueAndForget(()=>dE(o,_)),b.fromCache&&u.source==="server"?f.reject(new K(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),_=new df(c,p,{includeMetadataChanges:!0,ra:!0});return uE(o,_)}(yield Du(t),t.asyncQueue,e,n,i)})),i.promise}function Q3(t,e){let n=new xu(e);return t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o){se(r).z_.add(o),o.next()}(yield Du(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return function(r,o){se(r).z_.delete(o)}(yield Du(t),n)}))}}function X3(t,e,n,i){let r=function(s,c){let u;return u=typeof s=="string"?ek().encode(s):s,function(p,_){return new AC(p,_)}(function(p,_){if(p instanceof Uint8Array)return lR(p,_);if(p instanceof ArrayBuffer)return lR(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),c)}(n,bf(e));t.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){q3(yield bE(t),r,i)}))}function J3(t,e){return t.asyncQueue.enqueue(()=>k(this,null,function*(){return function(i,r){let o=se(i);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,r))}(yield yE(t),e)}))}function $k(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var uR=new Map;function wE(t,e,n){if(!n)throw new K(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function IE(t,e,n,i){if(e===!0&&i===!0)throw new K(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dR(t){if(!oe.isDocumentKey(t))throw new K(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hR(t){if(oe.isDocumentKey(t))throw new K(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function W_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":he()}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=W_(t);throw new K(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Hk(t,e){if(e<=0)throw new K(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var N_=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$k((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},sc=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Qw;switch(i.type){case"firstParty":return new tI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=uR.get(n);i&&(Q("ComponentProvider","Removing Datastore"),uR.delete(n),i.terminate())}(this),Promise.resolve()}};function Z_(t,e,n,i={}){var r;let o=(t=st(t,sc))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=un.MOCK_USER;else{c=VD(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new K(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new un(f)}t._authCredentials=new Xw(new Wg(c,u))}}var Pn=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Lt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Yr=class t extends Pn{constructor(e,n,i){super(e,n,Au(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new oe(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function K_(t,e,...n){if(t=Tt(t),wE("collection","path",e),t instanceof sc){let i=ot.fromString(e,...n);return hR(i),new Yr(t,null,i)}{if(!(t instanceof Lt||t instanceof Yr))throw new K(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ot.fromString(e,...n));return hR(i),new Yr(t.firestore,null,i)}}function CE(t,e){if(t=st(t,sc),wE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K(q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pn(t,null,function(i){return new gr(ot.emptyPath(),i)}(e))}function Nu(t,e,...n){if(t=Tt(t),arguments.length===1&&(e=Zg.newId()),wE("doc","path",e),t instanceof sc){let i=ot.fromString(e,...n);return dR(i),new Lt(t,null,new oe(i))}{if(!(t instanceof Lt||t instanceof Yr))throw new K(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ot.fromString(e,...n));return dR(i),new Lt(t.firestore,t instanceof Yr?t.converter:null,new oe(i))}}function Y_(t,e){return t=Tt(t),e=Tt(e),(t instanceof Lt||t instanceof Yr)&&(e instanceof Lt||e instanceof Yr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Q_(t,e){return t=Tt(t),e=Tt(e),t instanceof Pn&&e instanceof Pn&&t.firestore===e.firestore&&vf(t._query,e._query)&&t.converter===e.converter}var NC=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new uf(this,"async_queue_retry"),this.hu=()=>{let n=qg();n&&Q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=qg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=qg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new dn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return k(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Ws(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),c}(i);throw tn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=vC.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&he()}verifyOperationInProgress(){}du(){return k(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function OC(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var FC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new dn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var qk=-1,qt=class extends sc{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new NC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Wk(this),this._firestoreClient.terminate()}};function Gk(t,e){let n=typeof t=="object"?t:rs(),i=typeof t=="string"?t:e||"(default)",r=go(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let o=LD("firestore");o&&Z_(r,...o)}return r}function _n(t){return t._firestoreClient||Wk(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Wk(t){var e,n,i;let r=t._freezeSettings(),o=function(c,u,f,p){return new lI(c,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,$k(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new RC(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function EE(t,e){Kk(t=st(t,qt));let n=_n(t);if(n._uninitializedComponentsProvider)throw new K(q.FAILED_PRECONDITION,"SDK cache is already specified.");Hi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new ff;return Zk(n,r,new k_(r,i.cacheSizeBytes,e?.forceOwnership))}function xE(t){Kk(t=st(t,qt));let e=_n(t);if(e._uninitializedComponentsProvider)throw new K(q.FAILED_PRECONDITION,"SDK cache is already specified.");Hi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new ff;return Zk(e,i,new SC(i,n.cacheSizeBytes))}function Zk(t,e,n){let i=new dn;return t.asyncQueue.enqueue(()=>k(this,null,function*(){try{yield Gg(t,n),yield kC(t,e),i.resolve()}catch(r){let o=r;if(!Vk(o))throw o;Hi("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function DE(t){if(t._initialized&&!t._terminated)throw new K(q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new dn;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>k(this,null,function*(){try{yield function(i){return k(this,null,function*(){if(!Ls.D())return Promise.resolve();let r=i+"main";yield Ls.delete(r)})}(sE(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function TE(t){return function(n){let i=new dn;return n.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return N3(yield bE(n),i)})),i.promise}(_n(t=st(t,qt)))}function SE(t){return W3(_n(t=st(t,qt)))}function AE(t){return Z3(_n(t=st(t,qt)))}function ME(t,e){let n=_n(t=st(t,qt)),i=new FC;return X3(n,t._databaseId,e,i),i}function PE(t,e){return J3(_n(t=st(t,qt)),e).then(n=>n?new Pn(t,null,n.query):null)}function Kk(t){if(t._initialized||t._terminated)throw new K(q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var eo=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Cn.fromBase64String(e))}catch(n){throw new K(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var vr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bo=class{constructor(e){this._methodName=e}};var ac=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}};var eq=/^__.*__$/,LC=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,n,this.fieldTransforms):new $s(e,this.data,n,this.fieldTransforms)}},O_=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new _r(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function Yk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}var F_=class t{constructor(e,n,i,r,o,s){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return L_(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Yk(this.fu)&&eq.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},VC=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||bf(e)}Fu(e,n,i,r=!1){return new F_({fu:e,methodName:n,vu:i,path:nn.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function dc(t){let e=t._freezeSettings(),n=bf(t._databaseId);return new VC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function X_(t,e,n,i,r,o={}){let s=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);NE("Data must be an object, but it was:",s,i);let c=Jk(i,s),u,f;if(o.merge)u=new Ii(s.fieldMask),f=s.fieldTransforms;else if(o.mergeFields){let p=[];for(let _ of o.mergeFields){let b=$C(e,_,n);if(!s.contains(b))throw new K(q.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);tN(p,b)||p.push(b)}u=new Ii(p),f=s.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,f=s.fieldTransforms;return new LC(new Bn(c),u,f)}var pf=class t extends Bo{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function Qk(t,e,n){return new F_({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var BC=class t extends Bo{_toFieldTransform(e){return new ic(e.path,new Us)}isEqual(e){return e instanceof t}},jC=class t extends Bo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=Qk(this,e,!0),i=this.Mu.map(o=>hc(o,n)),r=new Lo(i);return new ic(e.path,r)}isEqual(e){return e instanceof t&&Ad(this.Mu,e.Mu)}},UC=class t extends Bo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=Qk(this,e,!0),i=this.Mu.map(o=>hc(o,n)),r=new Vo(i);return new ic(e.path,r)}isEqual(e){return e instanceof t&&Ad(this.Mu,e.Mu)}},zC=class t extends Bo{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new zs(e.serializer,qR(e.serializer,this.xu));return new ic(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function RE(t,e,n,i){let r=t.Fu(1,e,n);NE("Data must be an object, but it was:",r,i);let o=[],s=Bn.empty();uc(i,(u,f)=>{let p=OE(e,u,n);f=Tt(f);let _=r.Su(p);if(f instanceof pf)o.push(p);else{let b=hc(f,_);b!=null&&(o.push(p),s.set(p,b))}});let c=new Ii(o);return new O_(s,c,r.fieldTransforms)}function kE(t,e,n,i,r,o){let s=t.Fu(1,e,n),c=[$C(e,i,n)],u=[r];if(o.length%2!=0)throw new K(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push($C(e,o[b])),u.push(o[b+1]);let f=[],p=Bn.empty();for(let b=c.length-1;b>=0;--b)if(!tN(f,c[b])){let I=c[b],S=u[b];S=Tt(S);let P=s.Su(I);if(S instanceof pf)f.push(I);else{let O=hc(S,P);O!=null&&(f.push(I),p.set(I,O))}}let _=new Ii(f);return new O_(p,_,s.fieldTransforms)}function Xk(t,e,n,i=!1){return hc(n,t.Fu(i?4:3,e))}function hc(t,e){if(eN(t=Tt(t)))return NE("Unsupported field value:",e,t),Jk(t,e);if(t instanceof Bo)return function(i,r){if(!Yk(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],s=0;for(let c of i){let u=hc(c,r.bu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Tt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return qR(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=Kt.fromDate(i);return{timestampValue:_u(r.serializer,o)}}if(i instanceof Kt){let o=new Kt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:_u(r.serializer,o)}}if(i instanceof ac)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof eo)return{bytesValue:tk(r.serializer,i._byteString)};if(i instanceof Lt){let o=r.databaseId,s=i.firestore._databaseId;if(!s.isEqual(o))throw r.Du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:iE(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${W_(i)}`)}(t,e)}function Jk(t,e){let n={};return TR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):uc(t,(i,r)=>{let o=hc(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function eN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Kt||t instanceof ac||t instanceof eo||t instanceof Lt||t instanceof Bo)}function NE(t,e,n){if(!eN(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=W_(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function $C(t,e,n){if((e=Tt(e))instanceof vr)return e._internalPath;if(typeof e=="string")return OE(t,e);throw L_("Field path arguments must be of type string or ",t,!1,void 0,n)}var tq=new RegExp("[~\\*/\\[\\]]");function OE(t,e,n){if(e.search(tq)>=0)throw L_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new vr(...e.split("."))._internalPath}catch{throw L_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function L_(t,e,n,i,r){let o=i&&!i.isEmpty(),s=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${i}`),s&&(u+=` in document ${r}`),u+=")"),new K(q.INVALID_ARGUMENT,c+t+u)}function tN(t,e){return t.some(n=>n.isEqual(e))}var cc=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new HC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(J_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},HC=class extends cc{data(){return super.data()}};function J_(t,e){return typeof e=="string"?OE(t,e):e instanceof vr?e._internalPath:e._delegate._internalPath}function nN(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var mf=class{},lc=class extends mf{};function to(t,e,...n){let i=[];e instanceof mf&&i.push(e),i=i.concat(n),function(o){let s=o.filter(u=>u instanceof qC).length,c=o.filter(u=>u instanceof V_).length;if(s>1||s>0&&c>0)throw new K(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var V_=class t extends lc{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return rN(e._query,n),new Pn(e.firestore,e.converter,II(e._query,n))}_parse(e){let n=dc(e.firestore);return function(o,s,c,u,f,p,_){let b;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new K(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){pR(_,p);let I=[];for(let S of _)I.push(fR(u,o,S));b={arrayValue:{values:I}}}else b=fR(u,o,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||pR(_,p),b=Xk(c,s,_,p==="in"||p==="not-in");return et.create(f,p,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function FE(t,e,n){let i=e,r=J_("where",t);return V_._create(r,i,n)}var qC=class t extends mf{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:xt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let s=r,c=o.getFlattenedFilters();for(let u of c)rN(s,u),s=II(s,u)}(e._query,n),new Pn(e.firestore,e.converter,II(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var GC=class t extends lc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,s){if(r.startAt!==null)throw new K(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new tc(o,s)}(e._query,this._field,this._direction);return new Pn(e.firestore,e.converter,function(r,o){let s=r.explicitOrderBy.concat([o]);return new gr(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function LE(t,e="asc"){let n=e,i=J_("orderBy",t);return GC._create(i,n)}var B_=class t extends lc{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Pn(e.firestore,e.converter,r_(e._query,this._limit,this._limitType))}};function VE(t){return Hk("limit",t),B_._create("limit",t,"F")}function BE(t){return Hk("limitToLast",t),B_._create("limitToLast",t,"L")}var j_=class t extends lc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=iN(e,this.type,this._docOrFields,this._inclusive);return new Pn(e.firestore,e.converter,function(r,o){return new gr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function jE(...t){return j_._create("startAt",t,!0)}function UE(...t){return j_._create("startAfter",t,!1)}var U_=class t extends lc{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=iN(e,this.type,this._docOrFields,this._inclusive);return new Pn(e.firestore,e.converter,function(r,o){return new gr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function zE(...t){return U_._create("endBefore",t,!1)}function $E(...t){return U_._create("endAt",t,!0)}function iN(t,e,n,i){if(n[0]=Tt(n[0]),n[0]instanceof cc)return function(o,s,c,u,f){if(!u)throw new K(q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let p=[];for(let _ of lu(o))if(_.field.isKeyField())p.push(ec(s,u.key));else{let b=u.data.field(_.field);if($_(b))throw new K(q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){let I=_.field.canonicalString();throw new K(q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}p.push(b)}return new Xr(p,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=dc(t.firestore);return function(s,c,u,f,p,_){let b=s.explicitOrderBy;if(p.length>b.length)throw new K(q.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let I=[];for(let S=0;S<p.length;S++){let P=p[S];if(b[S].field.isKeyField()){if(typeof P!="string")throw new K(q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof P}`);if(!tE(s)&&P.indexOf("/")!==-1)throw new K(q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${P}' contains a slash.`);let O=s.path.child(ot.fromString(P));if(!oe.isDocumentKey(O))throw new K(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);let W=new oe(O);I.push(ec(c,W))}else{let O=Xk(u,f,P);I.push(O)}}return new Xr(I,_)}(t._query,t.firestore._databaseId,r,e,n,i)}}function fR(t,e,n){if(typeof(n=Tt(n))=="string"){if(n==="")throw new K(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tE(e)&&n.indexOf("/")!==-1)throw new K(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(ot.fromString(n));if(!oe.isDocumentKey(i))throw new K(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ec(t,new oe(i))}if(n instanceof Lt)return ec(t,n._key);throw new K(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${W_(n)}.`)}function pR(t,e){if(!Array.isArray(t)||t.length===0)throw new K(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rN(t,e){let n=function(r,o){for(let s of r)for(let c of s.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var Tu=class{convertValue(e,n="none"){switch(Ja(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw he()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return uc(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new ac(Yt(e.latitude),Yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=JC(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Yh(e));default:return null}}convertTimestamp(e){let n=Fo(e);return new Kt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=ot.fromString(e);ve(hk(i));let r=new Bs(i.get(1),i.get(3)),o=new oe(i.popFirst(5));return r.isEqual(n)||tn(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function ev(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var WC=class extends Tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}};var Oo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Gi=class extends cc{constructor(e,n,i,r,o,s){super(e,n,i,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(J_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},Os=class extends Gi{data(e={}){return super.data(e)}},yr=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Oo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Os(this._firestore,this._userDataWriter,i.key,i,new Oo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(c=>{let u=new Os(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Oo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new Os(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Oo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,p=-1;return c.type!==0&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),p=s.indexOf(c.doc.key)),{type:nq(c.type),doc:u,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function nq(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}function tv(t,e){return t instanceof Gi&&e instanceof Gi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof yr&&e instanceof yr&&t._firestore===e._firestore&&Q_(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function HE(t){t=st(t,Lt);let e=st(t.firestore,qt);return Uk(_n(e),t._key).then(n=>JE(e,t,n))}var jo=class extends Tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new eo(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,n)}};function qE(t){t=st(t,Lt);let e=st(t.firestore,qt),n=_n(e),i=new jo(e);return K3(n,t._key).then(r=>new Gi(e,i,t._key,r,new Oo(r!==null&&r.hasLocalMutations,!0),t.converter))}function GE(t){t=st(t,Lt);let e=st(t.firestore,qt);return Uk(_n(e),t._key,{source:"server"}).then(n=>JE(e,t,n))}function WE(t){t=st(t,Pn);let e=st(t.firestore,qt),n=_n(e),i=new jo(e);return nN(t._query),zk(n,t._query).then(r=>new yr(e,i,t,r))}function ZE(t){t=st(t,Pn);let e=st(t.firestore,qt),n=_n(e),i=new jo(e);return Y3(n,t._query).then(r=>new yr(e,i,t,r))}function KE(t){t=st(t,Pn);let e=st(t.firestore,qt),n=_n(e),i=new jo(e);return zk(n,t._query,{source:"server"}).then(r=>new yr(e,i,t,r))}function nv(t,e,n){t=st(t,Lt);let i=st(t.firestore,qt),r=ev(t.converter,e,n);return Ou(i,[X_(dc(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Qt.none())])}function iv(t,e,n,...i){t=st(t,Lt);let r=st(t.firestore,qt),o=dc(r),s;return s=typeof(e=Tt(e))=="string"||e instanceof vr?kE(o,"updateDoc",t._key,e,n,i):RE(o,"updateDoc",t._key,e),Ou(r,[s.toMutation(t._key,Qt.exists(!0))])}function YE(t){return Ou(st(t.firestore,qt),[new Hs(t._key,Qt.none())])}function QE(t,e){let n=st(t.firestore,qt),i=Nu(t),r=ev(t.converter,e);return Ou(n,[X_(dc(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Qt.exists(!1))]).then(()=>i)}function rv(t,...e){var n,i,r;t=Tt(t);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||OC(e[s])||(o=e[s],s++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(OC(e[s])){let _=e[s];e[s]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[s+1]=(i=_.error)===null||i===void 0?void 0:i.bind(_),e[s+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let u,f,p;if(t instanceof Lt)f=st(t.firestore,qt),p=Au(t._key.path),u={next:_=>{e[s]&&e[s](JE(f,t,_))},error:e[s+1],complete:e[s+2]};else{let _=st(t,Pn);f=st(_.firestore,qt),p=_._query;let b=new jo(f);u={next:I=>{e[s]&&e[s](new yr(f,b,_,I))},error:e[s+1],complete:e[s+2]},nN(t._query)}return function(b,I,S,P){let O=new xu(P),W=new df(I,O,S);return b.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return uE(yield Du(b),W)})),()=>{O.$a(),b.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return dE(yield Du(b),W)}))}}(_n(f),p,c,u)}function XE(t,e){return Q3(_n(t=st(t,qt)),OC(e)?e:{next:e})}function Ou(t,e){return function(i,r){let o=new dn;return i.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){return M3(yield bE(i),r,o)})),o.promise}(_n(t),e)}function JE(t,e,n){let i=n.docs.get(e._key),r=new jo(t);return new Gi(t,r,e._key,i,new Oo(n.hasPendingWrites,n.fromCache),e.converter)}var iq={maxAttempts:5};var z_=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dc(e)}set(e,n,i){this._verifyNotCommitted();let r=ks(e,this._firestore),o=ev(r.converter,n,i),s=X_(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(s.toMutation(r._key,Qt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=ks(e,this._firestore),s;return s=typeof(n=Tt(n))=="string"||n instanceof vr?kE(this._dataReader,"WriteBatch.update",o._key,n,i,r):RE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,Qt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=ks(e,this._firestore);return this._mutations=this._mutations.concat(new Hs(n._key,Qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ks(t,e){if((t=Tt(t)).firestore!==e)throw new K(q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var ZC=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=dc(n)}get(n){let i=ks(n,this._firestore),r=new WC(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return he();let s=o[0];if(s.isFoundDocument())return new cc(this._firestore,r,s.key,s,i.converter);if(s.isNoDocument())return new cc(this._firestore,r,i._key,null,i.converter);throw he()})}set(n,i,r){let o=ks(n,this._firestore),s=ev(o.converter,i,r),c=X_(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(n,i,r,...o){let s=ks(n,this._firestore),c;return c=typeof(i=Tt(i))=="string"||i instanceof vr?kE(this._dataReader,"Transaction.update",s._key,i,r,o):RE(this._dataReader,"Transaction.update",s._key,i),this._transaction.update(s._key,c),this}delete(n){let i=ks(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=ks(e,this._firestore),i=new jo(this._firestore);return super.get(e).then(r=>new Gi(this._firestore,i,n._key,r._document,new Oo(!1,!1),n.converter))}};function ex(t,e,n){t=st(t,qt);let i=Object.assign(Object.assign({},iq),n);return function(o){if(o.maxAttempts<1)throw new K(q.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,s,c){let u=new dn;return o.asyncQueue.enqueueAndForget(()=>k(this,null,function*(){let f=yield G3(o);new PC(o.asyncQueue,f,c,s,u).Xa()})),u.promise}(_n(t),r=>e(new ZC(t,r)),i)}function tx(){return new pf("deleteField")}function nx(){return new BC("serverTimestamp")}function ix(...t){return new jC("arrayUnion",t)}function rx(...t){return new UC("arrayRemove",t)}function ox(t){return new zC("increment",t)}(function(e,n=!0){(function(r){Su=r})(jD),er(new gi("firestore",(i,{instanceIdentifier:r,options:o})=>{let s=i.getProvider("app").getImmediate(),c=new qt(new Jw(i.getProvider("auth-internal")),new iI(i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new K(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Bs(f.options.projectId,p)}(s,r),s);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Nt(m1,"4.6.3",e),Nt(m1,"4.6.3","esm2017")})();var rq="@firebase/firestore-compat",oq="0.3.32";function dx(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new K("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function oN(){if(typeof Uint8Array>"u")throw new K("unimplemented","Uint8Arrays are not available in this environment.")}function sN(){if(!SR())throw new K("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ov=class t{constructor(e){this._delegate=e}static fromBase64String(e){return sN(),new t(eo.fromBase64String(e))}static fromUint8Array(e){return oN(),new t(eo.fromUint8Array(e))}toBase64(){return sN(),this._delegate.toBase64()}toUint8Array(){return oN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function sx(t){return sq(t,["next","error","complete"])}function sq(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var ax=class{enableIndexedDbPersistence(e,n){return EE(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return xE(e._delegate)}clearIndexedDbPersistence(e){return DE(e._delegate)}},sv=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Bs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Hi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){Z_(this._delegate,e,n,i)}enableNetwork(){return SE(this._delegate)}disableNetwork(){return AE(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,IE("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return TE(this._delegate)}onSnapshotsInSync(e){return XE(this._delegate,e)}get app(){if(!this._appCompat)throw new K("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vu(this,K_(this._delegate,e))}catch(n){throw Qn(n,"collection()","Firestore.collection()")}}doc(e){try{return new no(this,Nu(this._delegate,e))}catch(n){throw Qn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new gc(this,CE(this._delegate,e))}catch(n){throw Qn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ex(this._delegate,n=>e(new av(this,n)))}batch(){return _n(this._delegate),new cv(new z_(this._delegate,e=>Ou(this._delegate,e)))}loadBundle(e){return ME(this._delegate,e)}namedQuery(e){return PE(this._delegate,e).then(n=>n?new gc(this,n):null)}},Fu=class extends Tu{constructor(e){super(),this.firestore=e}convertBytes(e){return new ov(new eo(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return no.forKey(n,this.firestore,null)}};function aq(t){KC(t)}var av=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Fu(e)}get(e){let n=fc(e);return this._delegate.get(n).then(i=>new pc(this._firestore,new Gi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=fc(e);return i?(dx("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=fc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=fc(e);return this._delegate.delete(n),this}},cv=class{constructor(e){this._delegate=e}set(e,n,i){let r=fc(e);return i?(dx("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=fc(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=fc(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},Lu=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new Os(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new mc(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new Fu(e),n),r.set(n,o)),o}};Lu.INSTANCES=new WeakMap;var no=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fu(e)}static forPath(e,n,i){if(e.length%2!==0)throw new K("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Lt(n._delegate,i,new oe(e)))}static forKey(e,n,i){return new t(n,new Lt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Vu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vu(this.firestore,K_(this._delegate,e))}catch(n){throw Qn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Tt(e),e instanceof Lt?Y_(this._delegate,e):!1}set(e,n){n=dx("DocumentReference.set",n);try{return n?nv(this._delegate,e,n):nv(this._delegate,e)}catch(i){throw Qn(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?iv(this._delegate,e):iv(this._delegate,e,n,...i)}catch(r){throw Qn(r,"updateDoc()","DocumentReference.update()")}}delete(){return YE(this._delegate)}onSnapshot(...e){let n=aN(e),i=cN(e,r=>new pc(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return rv(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=qE(this._delegate):e?.source==="server"?n=GE(this._delegate):n=HE(this._delegate),n.then(i=>new pc(this.firestore,new Gi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Lu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Qn(t,e,n){return t.message=t.message.replace(e,n),t}function aN(t){for(let e of t)if(typeof e=="object"&&!sx(e))return e;return{}}function cN(t,e){var n,i;let r;return sx(t[0])?r=t[0]:sx(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var pc=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new no(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return tv(this._delegate,e._delegate)}},mc=class extends pc{data(e){let n=this._delegate.data(e);return this._delegate._converter||mR(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},gc=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Fu(e)}where(e,n,i){try{return new t(this.firestore,to(this._delegate,FE(e,n,i)))}catch(r){throw Qn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,to(this._delegate,LE(e,n)))}catch(i){throw Qn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,to(this._delegate,VE(e)))}catch(n){throw Qn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,to(this._delegate,BE(e)))}catch(n){throw Qn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,to(this._delegate,jE(...e)))}catch(n){throw Qn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,to(this._delegate,UE(...e)))}catch(n){throw Qn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,to(this._delegate,zE(...e)))}catch(n){throw Qn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,to(this._delegate,$E(...e)))}catch(n){throw Qn(n,"endAt()","Query.endAt()")}}isEqual(e){return Q_(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=ZE(this._delegate):e?.source==="server"?n=KE(this._delegate):n=WE(this._delegate),n.then(i=>new If(this.firestore,new yr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=aN(e),i=cN(e,r=>new If(this.firestore,new yr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return rv(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Lu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},cx=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new mc(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},If=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new gc(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new mc(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new cx(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new mc(this._firestore,i))})}isEqual(e){return tv(this._delegate,e._delegate)}},Vu=class t extends gc{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new no(this.firestore,e):null}doc(e){try{return e===void 0?new no(this.firestore,Nu(this._delegate)):new no(this.firestore,Nu(this._delegate,e))}catch(n){throw Qn(n,"doc()","CollectionReference.doc()")}}add(e){return QE(this._delegate,e).then(n=>new no(this.firestore,n))}isEqual(e){return Y_(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(Lu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function fc(t){return st(t,Lt)}var lx=class t{constructor(...e){this._delegate=new vr(...e)}static documentId(){return new t(nn.keyField().canonicalString())}isEqual(e){return e=Tt(e),e instanceof vr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var ux=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=nx();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=tx();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=ix(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=rx(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=ox(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var cq={Firestore:sv,GeoPoint:ac,Timestamp:Kt,Blob:ov,Transaction:av,WriteBatch:cv,DocumentReference:no,DocumentSnapshot:pc,Query:gc,QueryDocumentSnapshot:mc,QuerySnapshot:If,CollectionReference:Vu,FieldPath:lx,FieldValue:ux,setLogLevel:aq,CACHE_SIZE_UNLIMITED:qk};function lq(t,e){t.INTERNAL.registerComponent(new gi("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},cq)))}function uq(t){lq(t,(e,n)=>new sv(e,n,new ax)),t.registerVersion(rq,oq)}uq(tr);function dq(t,e=Pr){return new De(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function lN(t,e){return dq(t,e)}function hq(t,e){return lN(t,e).pipe(Mi(void 0),ds(),ye(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function px(t,e){return lN(t,e).pipe(ye(n=>({payload:n,type:"query"})))}var lv=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=pN(i,n);return new dv(r,o,this.afs)}snapshotChanges(){return hq(this.ref,this.afs.schedulers.outsideAngular).pipe(Zn)}valueChanges(e={}){return this.snapshotChanges().pipe(ye(({payload:n})=>e.idField?It(te({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return at(this.ref.get(e)).pipe(Zn)}};function uv(t,e){return px(t,e).pipe(Mi(void 0),ds(),ye(n=>{let[i,r]=n,o=r.payload.docChanges(),s=o.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,u)=>{let f=o.find(_=>_.doc.ref.isEqual(c.ref)),p=i?.payload.docs.find(_=>_.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&p&&JSON.stringify(p.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:c}})}),s}))}function uN(t,e,n){return uv(t,n).pipe(ba((i,r)=>fq(i,r.map(o=>o.payload),e),[]),us(),ye(i=>i.map(r=>({type:r.type,payload:r}))))}function fq(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=pq(t,i))}),t}function hx(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function pq(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return hx(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return hx(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return hx(t,e.oldIndex,1);break}return t}function dN(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var dv=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=uv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(ye(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(Mi(void 0),ds(),St(([i,r])=>r.length>0||!i),ye(([,i])=>i),Zn)}auditTrail(e){return this.stateChanges(e).pipe(ba((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=dN(e);return uN(this.query,n,this.afs.schedulers.outsideAngular).pipe(Zn)}valueChanges(e={}){return px(this.query,this.afs.schedulers.outsideAngular).pipe(ye(n=>n.payload.docs.map(i=>e.idField?It(te({},i.data()),{[e.idField]:i.id}):i.data())),Zn)}get(e){return at(this.query.get(e)).pipe(Zn)}add(e){return this.ref.add(e)}doc(e){return new lv(this.ref.doc(e),this.afs)}},fx=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?uv(this.query,this.afs.schedulers.outsideAngular).pipe(Zn):uv(this.query,this.afs.schedulers.outsideAngular).pipe(ye(n=>n.filter(i=>e.indexOf(i.type)>-1)),St(n=>n.length>0),Zn)}auditTrail(e){return this.stateChanges(e).pipe(ba((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=dN(e);return uN(this.query,n,this.afs.schedulers.outsideAngular).pipe(Zn)}valueChanges(e={}){return px(this.query,this.afs.schedulers.outsideAngular).pipe(ye(i=>i.payload.docs.map(r=>e.idField?te({[e.idField]:r.id},r.data()):r.data())),Zn)}get(e){return at(this.query.get(e)).pipe(Zn)}},hN=new re("angularfire2.enableFirestorePersistence"),fN=new re("angularfire2.firestore.persistenceSettings"),mq=new re("angularfire2.firestore.settings"),gq=new re("angularfire2.firestore.use-emulator");function pN(t,e=n=>n){return{query:e(t),ref:t}}var Cf=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,s,c,u,f,p,_,b,I,S,P,O,W,X){this.schedulers=u;let Z=Rg(n,c,i),ae=p;_&&Bw(Z,c,b,S,P,O,I,W),[this.firestore,this.persistenceEnabled$]=kg(`${Z.name}.firestore`,"AngularFirestore",Z.name,()=>{let _e=c.runOutsideAngular(()=>Z.firestore());if(o&&_e.settings(o),ae&&_e.useEmulator(...ae),r&&!ja(s)){let me=()=>{try{return at(_e.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(A){return typeof console<"u"&&console.warn(A),fe(!1)}};return[_e,c.runOutsideAngular(me)]}else return[_e,fe(!1)]},[o,ae,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:s}=pN(r,i),c=this.schedulers.ngZone.run(()=>o);return new dv(c,s,this)}collectionGroup(n,i){let r=i||(s=>s),o=this.firestore.collectionGroup(n);return new fx(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new lv(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(V(Yl),V(Pg,8),V(hN,8),V(mq,8),V(Mn),V(pe),V(zi),V(fN,8),V(gq,8),V(Ng,8),V(kw,8),V(Nw,8),V(Ow,8),V(Fw,8),V(Lw,8),V(Vw,8),V(hr,8))};static \u0275prov=ne({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})(),mN=(()=>{class t{constructor(){tr.registerVersion("angularfire",ci.full,"fst-compat")}static enablePersistence(n){return{ngModule:t,providers:[{provide:hN,useValue:!0},{provide:fN,useValue:n}]}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=ut({type:t});static \u0275inj=lt({providers:[Cf]})}return t})();var Rn=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.afs=r,this.router=o,this.firebaseConfig={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},this.user$=this.afAuth.authState.pipe(ct(s=>s?this.afs.doc(`users/${s.uid}`).valueChanges():fe(null))),this.userData=this.afAuth.authState.pipe(ct(s=>s?this.afs.doc(`users/${s.uid}/data/data`).valueChanges():fe(null)))}googleSignin(){return k(this,null,function*(){let i=new Kv,r=yield this.afAuth.signInWithPopup(i);return this.currentUser=r.user,console.log(r),localStorage.setItem("key",r.user.uid),localStorage.setItem("userData",JSON.stringify(r.user)),this.updateUserData(r.user),this.addDataToUser({user:r.user}),this.addNotUpdateDataToUser({user:r.user}),this.addAllUsers({user:r.user}),this.updateUserData(r.user)})}signOut(){return k(this,null,function*(){return yield this.afAuth.signOut(),this.router.navigate(["/"])})}addAllUsers(i){}updateUserData(i){console.log("update User Data");let r=this.afs.doc(`users/${i.uid}`);console.log("uid:",i.email,i.displayName,i.photoUrl,i.uid,r,i);let o={uid:i.uid,email:i.email,displayName:i.displayName,photoUrl:i.photoUrl,test:"test"};return this.addDataToUser(o),this.addUserData(o),r.update(o)}getUserData(i){return this.afs.collection("users/",r=>r.where("uid","==",i)).valueChanges()}addUserData(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}`).update(i)}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}`).update(i)):null}getUserKey(){return localStorage.getItem("key")}addDataToUser(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}/data/data`).update(i)}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}/data/data`).update(i)):null}addNotUpdateDataToUser(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}/data/data`).set(i,{merge:!0})}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}/data/data`).set(i,{merge:!0})):null}getDataFromUser(i){return this.afs.collection(`users/${i}/data/`,r=>r).valueChanges()}};e.\u0275fac=function(r){return new(r||e)(V(Ng),V(Cf),V(Ft))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _q(t,e){if(t&1&&de(0,"img",5),t&2){let n=ue(2);je("src",n.user.photoUrl,en)}}function vq(t,e){t&1&&de(0,"img",6)}function yq(t,e){if(t&1&&(j(0,"div",4),Pe(1,_q,1,1,"img",5)(2,vq,1,0),j(3,"p"),J(4),G()(),de(5,"br")),t&2){let n=ue();H(),$e(1,n.user.photoUrl?1:2),H(3),mt(n.user.displayName)}}function bq(t,e){if(t&1&&(j(0,"div",7)(1,"p"),J(2),G()(),j(3,"div",8),de(4,"img",9),G()),t&2){let n=ue();H(2),mt(n.key),H(2),je("src","https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+n.key,en)}}var _N=(()=>{let e=class e{constructor(i){this.auth=i,this.addFriend=new Bt,this.key=localStorage.getItem("key"),i.user$.subscribe(r=>{console.log(r),this.user=r}),this.key=localStorage.getItem("key")}onFriendAdd(i){console.log(i),this.addFriend.emit(i)}};e.\u0275fac=function(r){return new(r||e)(ce(Rn))},e.\u0275cmp=it({type:e,selectors:[["app-add-friend"]],outputs:{addFriend:"addFriend"},standalone:!0,features:[dt],decls:9,vars:2,consts:[["friendInput",""],["id","input"],["type","text"],[3,"click"],[1,"user","container"],["width","50px","height","50px",3,"src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px"],["id","key"],["id","qr"],["alt","","width","150px","height","150px",3,"src"]],template:function(r,o){if(r&1){let s=Et();Pe(0,yq,6,2)(1,bq,5,2),j(2,"p"),J(3,"Add Friend"),G(),j(4,"div",1),de(5,"input",2,0),j(7,"button",3),Ie("click",function(){ft(s);let u=Jm(6);return pt(o.onFriendAdd(u.value))}),J(8,"Add Friend"),G()()}r&2&&($e(0,o.user?0:-1),H(),$e(1,o.key?1:-1))},styles:[".user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#qr[_ngcontent-%COMP%]{width:175px;height:175px;border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#qr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:12.5px}*[_ngcontent-%COMP%]{text-align:center}#key[_ngcontent-%COMP%]{border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#input[_ngcontent-%COMP%]{margin:auto}"]});let t=e;return t})();function wq(t,e){if(t&1&&(j(0,"div",5),de(1,"img",6),j(2,"p",7),J(3),G()()),t&2){let n=ue().$implicit;H(),je("src",n.photoURL,en),H(2),mt(n.displayName)}}function Iq(t,e){if(t&1&&Pe(0,wq,4,2,"div",5),t&2){let n=e.$implicit;$e(0,n?0:-1)}}var hv=(()=>{let e=class e{hideMap(i){this.router.navigate([i])}constructor(i,r,o){this.auth=i,this.router=r,this.route=o,this.friends=[],this.friendData=[]}ngOnInit(){localStorage.getItem("friends")&&(this.friends=JSON.parse(localStorage.getItem("friends"))),this.id=this.route.snapshot.paramMap.get("id"),console.log(this.id),this.getAllFriends(),this.route.queryParams.subscribe(i=>{let r=i.startdate;console.log(r,i)})}addFriend(i){console.log(i,i.length),i.length>20&&i.length<32&&(this.friends.push(i),localStorage.setItem("friends",JSON.stringify(this.friends))),this.getAllFriends()}removeDup(i){let r=[];return i.forEach((o,s)=>{r.indexOf(o)===-1&&r.push(o)}),r}getAllFriends(){this.friendData=[],this.removeDup(this.friends).forEach(i=>{console.log(i),console.log(this.auth.getDataFromUser(i).subscribe(r=>{console.log("her2:",r),this.friendData.push(r[0].user)}))})}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap("")},200)}};e.\u0275fac=function(r){return new(r||e)(ce(Rn),ce(Ft),ce(Mo))},e.\u0275cmp=it({type:e,selectors:[["app-friends"]],standalone:!0,features:[dt],decls:7,vars:0,consts:[[3,"addFriend"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"user","container"],["width","50px","height","50px",3,"src"],["id","username"]],template:function(r,o){r&1&&(j(0,"app-add-friend",0),Ie("addFriend",function(c){return o.addFriend(c)}),G(),ws(1,Iq,1,1,null,null,bs),j(3,"div",1),Ie("click",function(){return o.onCloseClick()}),j(4,"div",2),Ie("click",function(){return o.onCloseClick()}),j(5,"button",3),Ie("click",function(){return o.onCloseClick()}),de(6,"img",4),G()()()),r&2&&(H(),Is(o.friendData))},dependencies:[_N],styles:['*[_ngcontent-%COMP%]{text-align:center}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#username[_ngcontent-%COMP%]{width:250px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var yt=qF(yN());var gx;try{gx=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gx=!1}var Xt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?P0(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||gx)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(V(Mn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ef;function Cq(){if(Ef==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ef=!0}))}finally{Ef=Ef||!1}return Ef}function Bu(t){return Cq()?t:!!t.capture}var _c;function bN(){if(_c==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return _c=!1,_c;if("scrollBehavior"in document.documentElement.style)_c=!0;else{let t=Element.prototype.scrollTo;t?_c=!/\{\s*\[native code\]\s*\}/.test(t.toString()):_c=!1}}return _c}var mx;function Eq(){if(mx==null){let t=typeof document<"u"?document.head:null;mx=!!(t&&(t.createShadowRoot||t.attachShadow))}return mx}function wN(t){if(Eq()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Wi(t){return t.composedPath?t.composedPath()[0]:t.target}function xf(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ju(t){return Array.isArray(t)?t:[t]}function on(t){return t==null?"":typeof t=="string"?t:`${t}px`}function $o(t){return t instanceof Mt?t.nativeElement:t}var IN=new Set,yc,xq=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Tq}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Dq(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(V(Xt),V(ih,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Dq(t,e){if(!IN.has(t))try{yc||(yc=document.createElement("style"),e&&yc.setAttribute("nonce",e),yc.setAttribute("type","text/css"),document.head.appendChild(yc)),yc.sheet&&(yc.sheet.insertRule(`@media ${t} {body{ }}`,0),IN.add(t))}catch(n){console.error(n)}}function Tq(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var pv=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Me}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return CN(ju(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=CN(ju(i)).map(c=>this._registerQuery(c).observable),s=ya(o);return s=ss(s.pipe(Gn(1)),s.pipe(Vd(1),Wp(0))),s.pipe(ye(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:p})=>{u.matches=u.matches||f,u.breakpoints[p]=f}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),s={observable:new De(c=>{let u=f=>this._zone.run(()=>c.next(f));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(Mi(r),ye(({matches:c})=>({query:i,matches:c})),Pi(this._destroySubject)),mql:r};return this._queries.set(i,s),s}};e.\u0275fac=function(r){return new(r||e)(V(xq),V(pe))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function CN(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var EN={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function vx(t){return t.buttons===0||t.detail===0}function yx(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Aq=new re("cdk-input-modality-detector-options"),Mq={ignoreKeys:[18,17,224,91,16]},TN=650,Uu=Bu({passive:!0,capture:!0}),Pq=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,s){this._platform=i,this._mostRecentTarget=null,this._modality=new pn(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(u=>u===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Wi(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<TN||(this._modality.next(vx(c)?"keyboard":"mouse"),this._mostRecentTarget=Wi(c))},this._onTouchstart=c=>{if(yx(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Wi(c)},this._options=te(te({},Mq),s),this.modalityDetected=this._modality.pipe(Vd(1)),this.modalityChanged=this.modalityDetected.pipe(us()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,Uu),o.addEventListener("mousedown",this._onMousedown,Uu),o.addEventListener("touchstart",this._onTouchstart,Uu)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Uu),document.removeEventListener("mousedown",this._onMousedown,Uu),document.removeEventListener("touchstart",this._onTouchstart,Uu))}};e.\u0275fac=function(r){return new(r||e)(V(Xt),V(pe),V(Ge),V(Aq,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Rq=new re("liveAnnouncerElement",{providedIn:"root",factory:kq});function kq(){return null}var Nq=new re("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Oq=0,SN=(()=>{let e=class e{constructor(i,r,o,s){this._ngZone=r,this._defaultOptions=s,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,s,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[s,c]=r,this.clear(),clearTimeout(this._previousTimeout),s||(s=o&&o.politeness?o.politeness:"polite"),c==null&&o&&(c=o.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(u=>this._currentResolve=u)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let s=0;s<r.length;s++)r[s].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${Oq++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],c=s.getAttribute("aria-owns");c?c.indexOf(i)===-1&&s.setAttribute("aria-owns",c+" "+i):s.setAttribute("aria-owns",i)}}};e.\u0275fac=function(r){return new(r||e)(V(Rq,8),V(pe),V(Ge),V(Nq,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var gv=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(gv||{}),Fq=new re("cdk-focus-monitor-default-options"),mv=Bu({passive:!0,capture:!0}),AN=(()=>{let e=class e{constructor(i,r,o,s,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Me,this._rootNodeFocusAndBlurListener=u=>{let f=Wi(u);for(let p=f;p;p=p.parentElement)u.type==="focus"?this._onFocus(u,p):this._onBlur(u,p)},this._document=s,this._detectionMode=c?.detectionMode||gv.IMMEDIATE}monitor(i,r=!1){let o=$o(i);if(!this._platform.isBrowser||o.nodeType!==1)return fe();let s=wN(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;let u={checkChildren:r,subject:new Me,rootNode:s};return this._elementInfo.set(o,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(i){let r=$o(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let s=$o(i),c=this._getDocument().activeElement;s===c?this._getClosestElementsInfo(s).forEach(([u,f])=>this._originChanged(u,r,f)):(this._setOrigin(r),typeof s.focus=="function"&&s.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===gv.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===gv.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?TN:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),s=Wi(i);!o||!o.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,mv),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,mv)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Pi(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mv),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mv),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,s)=>{(s===i||o.checkChildren&&s.contains(i))&&r.push([s,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let s=i.labels;if(s){for(let c=0;c<s.length;c++)if(s[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(V(pe),V(Xt),V(Pq),V(Ge,8),V(Fq,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var bc=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(bc||{}),xN="cdk-high-contrast-black-on-white",DN="cdk-high-contrast-white-on-black",_x="cdk-high-contrast-active",MN=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=ee(pv).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return bc.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,s=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return bc.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return bc.BLACK_ON_WHITE}return bc.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(_x,xN,DN),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===bc.BLACK_ON_WHITE?i.add(_x,xN):r===bc.WHITE_ON_BLACK&&i.add(_x,DN)}}};e.\u0275fac=function(r){return new(r||e)(V(Xt),V(Ge))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Lq=new re("cdk-dir-doc",{providedIn:"root",factory:Vq});function Vq(){return ee(Ge)}var Bq=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function jq(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?Bq.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var RN=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new Bt,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=jq(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(V(Lq,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ks=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({});let t=e;return t})();function $q(){return!0}var Hq=new re("mat-sanity-checks",{providedIn:"root",factory:$q}),io=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return xf()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(V(MN),V(Hq,8),V(Ge))},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({imports:[Ks,Ks]});let t=e;return t})();var Zi=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Zi||{}),Cx=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Zi.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},kN=Bu({passive:!0,capture:!0}),Ex=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Wi(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let s=o.get(i);s?s.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,kN)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,kN)))}},NN={enterDuration:225,exitDuration:150},qq=800,ON=Bu({passive:!0,capture:!0}),FN=["mousedown","touchstart"],LN=["mouseup","mouseleave","touchend","touchcancel"],Df=class Df{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=$o(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=te(te({},NN),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let s=i.radius||Gq(e,n,r),c=e-r.left,u=n-r.top,f=o.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${c-s}px`,p.style.top=`${u-s}px`,p.style.height=`${s*2}px`,p.style.width=`${s*2}px`,i.color!=null&&(p.style.backgroundColor=i.color),p.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(p);let _=window.getComputedStyle(p),b=_.transitionProperty,I=_.transitionDuration,S=b==="none"||I==="0s"||I==="0s, 0s"||r.width===0&&r.height===0,P=new Cx(this,p,i,S);p.style.transform="scale3d(1, 1, 1)",P.state=Zi.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let O=null;return!S&&(f||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let W=()=>this._finishRippleTransition(P),X=()=>this._destroyRipple(P);p.addEventListener("transitionend",W),p.addEventListener("transitioncancel",X),O={onTransitionEnd:W,onTransitionCancel:X}}),this._activeRipples.set(P,O),(S||!f)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===Zi.FADING_OUT||e.state===Zi.HIDDEN)return;let n=e.element,i=te(te({},NN),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Zi.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=$o(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,FN.forEach(i=>{Df._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{LN.forEach(n=>{this._triggerElement.addEventListener(n,this,ON)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Zi.FADING_IN?this._startFadeOutTransition(e):e.state===Zi.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Zi.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Zi.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=vx(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+qq;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!yx(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Zi.VISIBLE||e.config.terminateOnPointerUp&&e.state===Zi.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(FN.forEach(n=>Df._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(LN.forEach(n=>e.removeEventListener(n,this,ON)),this._pointerUpEventsRegistered=!1))}};Df._eventManager=new Ex;var xx=Df;function Gq(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var UN=new re("mat-ripple-global-options"),Wq=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,s,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new xx(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:te(te(te({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,te(te({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,te(te({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(ce(Mt),ce(pe),ce(Xt),ce(UN,8),ce(Ra,8))},e.\u0275dir=jt({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&zr("mat-ripple-unbounded",o.unbounded)},inputs:{color:[gt.None,"matRippleColor","color"],unbounded:[gt.None,"matRippleUnbounded","unbounded"],centered:[gt.None,"matRippleCentered","centered"],radius:[gt.None,"matRippleRadius","radius"],animation:[gt.None,"matRippleAnimation","animation"],disabled:[gt.None,"matRippleDisabled","disabled"],trigger:[gt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),zN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({imports:[io,io]});let t=e;return t})();var VN={capture:!0},BN=["focus","mousedown","mouseenter","touchstart"],wx="mat-ripple-loader-uninitialized",Ix="mat-ripple-loader-class-name",jN="mat-ripple-loader-centered",_v="mat-ripple-loader-disabled",$N=(()=>{let e=class e{constructor(){this._document=ee(Ge,{optional:!0}),this._animationMode=ee(Ra,{optional:!0}),this._globalRippleOptions=ee(UN,{optional:!0}),this._platform=ee(Xt),this._ngZone=ee(pe),this._hosts=new Map,this._onInteraction=i=>{let r=Wi(i);if(r instanceof HTMLElement){let o=r.closest(`[${wx}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}},this._ngZone.runOutsideAngular(()=>{for(let i of BN)this._document?.addEventListener(i,this._onInteraction,VN)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of BN)this._document?.removeEventListener(r,this._onInteraction,VN)}configureRipple(i,r){i.setAttribute(wx,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute(Ix))&&i.setAttribute(Ix,r.className||""),r.centered&&i.setAttribute(jN,""),r.disabled&&i.setAttribute(_v,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(_v,""):i.removeAttribute(_v)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(Ix)),i.append(o);let s=new Wq(new Mt(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=i,s.centered=i.hasAttribute(jN),s.disabled=i.hasAttribute(_v),this.attachRipple(i,s),s}attachRipple(i,r){i.removeAttribute(wx),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Zq=["mat-button",""],Kq=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Yq=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Qq=new re("MAT_BUTTON_CONFIG");var Xq=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Jq=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,s){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=s,this._focusMonitor=ee(AN),this._rippleLoader=ee($N),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=ee(Qq,{optional:!0}),u=i.nativeElement,f=u.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:p,mdcClasses:_}of Xq)u.hasAttribute(p)&&f.add(..._)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){$m()},e.\u0275dir=jt({type:e,inputs:{color:"color",disableRipple:[gt.HasDecoratorInputTransform,"disableRipple","disableRipple",$r],disabled:[gt.HasDecoratorInputTransform,"disabled","disabled",$r],ariaDisabled:[gt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",$r],disabledInteractive:[gt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",$r]},features:[xo]});let t=e;return t})();var HN=(()=>{let e=class e extends Jq{constructor(i,r,o,s){super(i,r,o,s)}};e.\u0275fac=function(r){return new(r||e)(ce(Mt),ce(Xt),ce(pe),ce(Ra,8))},e.\u0275cmp=it({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(lr("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),l0(o.color?"mat-"+o.color:""),zr("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[ys,dt],attrs:Zq,ngContentSelectors:Yq,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(Rl(Kq),de(0,"span",0),ur(1),j(2,"span",1),ur(3,1),G(),ur(4,2),de(5,"span",2)(6,"span",3)),r&2&&zr("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var qN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({imports:[io,zN,io]});let t=e;return t})();var zu=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(zu||{});function GN(t,e){return{type:zu.Trigger,name:t,definitions:e,options:{}}}function Dx(t,e=null){return{type:zu.Animate,styles:e,timings:t}}function vv(t){return{type:zu.Style,styles:t,offset:null}}function Tx(t,e,n){return{type:zu.State,name:t,styles:e,options:n}}function Sx(t,e,n=null){return{type:zu.Transition,expr:t,animation:e,options:n}}var Tf=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},$u=class extends Tf{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Hu=class extends Tf{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},Ax=class extends Tf{constructor(e){super(),this.element=e instanceof Mt?e.nativeElement:e}},qu=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof $u)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Hu)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof Ax)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var yv=class extends qu{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let c=s.element;c.parentNode;let u=this._document.createComment("dom-portal");c.parentNode.insertBefore(u,c),this.outletElement.appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||_t.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var Mx=(()=>{let e=class e extends qu{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Bt,this.attachDomPortal=s=>{this._document;let c=s.element;c.parentNode;let u=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(u,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,s=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(s,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(ce(Ur),ce(Vi),ce(Ge))},e.\u0275dir=jt({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[gt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[ys]});let t=e;return t})();var bv=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({});let t=e;return t})();var eG=20,ZN=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Me,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=eG){return this._platform.isBrowser?new De(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(Gp(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):fe()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(St(s=>!s||o.indexOf(s)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,s)=>{this._scrollableContainsElement(s,i)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=$o(r),s=i.getElementRef().nativeElement;do if(o==s)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Nd(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(V(pe),V(Xt),V(Ge,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var tG=20,Px=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new Me,this._changeListener=s=>{this._change.next(s)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,s=o.getBoundingClientRect(),c=-s.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,u=-s.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:c,left:u}}change(i=tG){return i>0?this._change.pipe(Gp(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(V(Xt),V(pe),V(Ge,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var WN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({});let t=e;return t})(),Rx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({imports:[Ks,WN,Ks,WN]});let t=e;return t})();var KN=bN(),kx=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=on(-this._previousScrollPosition.left),e.style.top=on(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),KN&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),KN&&(i.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var Nx=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(St(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},wv=class{enable(){}disable(){}attach(){}};function Ox(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,s=t.left>n.right;return i||r||o||s})}function YN(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,s=t.right>n.right;return i||r||o||s})}var Fx=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Ox(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},iG=(()=>{let e=class e{constructor(i,r,o,s){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new wv,this.close=c=>new Nx(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new kx(this._viewportRuler,this._document),this.reposition=c=>new Fx(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}};e.\u0275fac=function(r){return new(r||e)(V(ZN),V(Px),V(pe),V(Ge))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Sf=class{constructor(e){if(this.scrollStrategy=new wv,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var Lx=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var tO=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(V(Ge))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rG=(()=>{let e=class e extends tO{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){let u=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(V(Ge),V(pe,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),oG=(()=>{let e=class e extends tO{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Wi(s)},this._clickListener=s=>{let c=Wi(s),u=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let f=this._attachedOverlays.slice();for(let p=f.length-1;p>-1;p--){let _=f[p];if(_._outsidePointerEvents.observers.length<1||!_.hasAttached())continue;if(_.overlayElement.contains(c)||_.overlayElement.contains(u))break;let b=_._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>b.next(s)):b.next(s)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(V(Ge),V(Xt),V(pe,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nO=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||xf()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let s=0;s<o.length;s++)o[s].remove()}let r=this._document.createElement("div");r.classList.add(i),xf()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(V(Ge),V(Xt))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vx=class{constructor(e,n,i,r,o,s,c,u,f,p=!1,_){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=c,this._location=u,this._outsideClickDispatcher=f,this._animationsDisabled=p,this._injector=_,this._backdropElement=null,this._backdropClick=new Me,this._attachments=new Me,this._detachments=new Me,this._locationChanges=Ot.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._backdropTransitionendHandler=b=>{this._disposeBackdrop(b.target)},this._keydownEvents=new Me,this._outsidePointerEvents=new Me,this._renders=new Me,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=sh(()=>a0(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),ka(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=te(te({},this._config),e),this._updateElementSize()}setDirection(e){this._config=It(te({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=on(this._config.width),e.height=on(this._config.height),e.minWidth=on(this._config.minWidth),e.minHeight=on(this._config.minHeight),e.maxWidth=on(this._config.maxWidth),e.maxHeight=on(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=ju(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Pi(Od(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},QN="cdk-overlay-connected-position-bounding-box",sG=/([A-Za-z%]+)$/,Bx=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Me,this._resizeSubscription=Ot.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(QN),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],s;for(let c of this._preferredPositions){let u=this._getOriginPoint(e,r,c),f=this._getOverlayPoint(u,n,c),p=this._getOverlayFit(f,n,i,c);if(p.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,u);return}if(this._canFitWithFlexibleDimensions(p,f,i)){o.push({position:c,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,c)});continue}(!s||s.overlayFit.visibleArea<p.visibleArea)&&(s={overlayFit:p,overlayPoint:f,originPoint:u,position:c,overlayRect:n})}if(o.length){let c=null,u=-1;for(let f of o){let p=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);p>u&&(u=p,c=f)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&wc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(QN),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let s=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?s:c}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=JN(n),{x:s,y:c}=e,u=this._getOffset(r,"x"),f=this._getOffset(r,"y");u&&(s+=u),f&&(c+=f);let p=0-s,_=s+o.width-i.width,b=0-c,I=c+o.height-i.height,S=this._subtractOverflows(o.width,p,_),P=this._subtractOverflows(o.height,b,I),O=S*P;return{visibleArea:O,isCompletelyWithinViewport:o.width*o.height===O,fitsInViewportVertically:P===o.height,fitsInViewportHorizontally:S==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,s=XN(this._overlayRef.getConfig().minHeight),c=XN(this._overlayRef.getConfig().minWidth),u=e.fitsInViewportVertically||s!=null&&s<=r,f=e.fitsInViewportHorizontally||c!=null&&c<=o;return u&&f}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=JN(n),o=this._viewportRect,s=Math.max(e.x+r.width-o.width,0),c=Math.max(e.y+r.height-o.height,0),u=Math.max(o.top-i.top-e.y,0),f=Math.max(o.left-i.left-e.x,0),p=0,_=0;return r.width<=o.width?p=f||-s:p=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?_=u||-c:_=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:p,y:_},{x:e.x+p,y:e.y+_}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!aG(this._lastScrollVisibility,i)){let r=new Lx(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,s,c;if(n.overlayY==="top")s=e.y,o=i.height-s+this._viewportMargin;else if(n.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,o=i.height-c+this._viewportMargin;else{let I=Math.min(i.bottom-e.y+i.top,e.y),S=this._lastBoundingBoxSize.height;o=I*2,s=e.y-I,o>S&&!this._isInitialRender&&!this._growAfterOpen&&(s=e.y-S/2)}let u=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,f=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,p,_,b;if(f)b=i.width-e.x+this._viewportMargin*2,p=e.x-this._viewportMargin;else if(u)_=e.x,p=i.right-e.x;else{let I=Math.min(i.right-e.x+i.left,e.x),S=this._lastBoundingBoxSize.width;p=I*2,_=e.x-I,p>S&&!this._isInitialRender&&!this._growAfterOpen&&(_=e.x-S/2)}return{top:s,left:_,bottom:c,right:b,width:p,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=on(i.height),r.top=on(i.top),r.bottom=on(i.bottom),r.width=on(i.width),r.left=on(i.left),r.right=on(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=on(o)),s&&(r.maxWidth=on(s))}this._lastBoundingBoxSize=i,wc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){wc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){wc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let p=this._viewportRuler.getViewportScrollPosition();wc(i,this._getExactOverlayY(n,e,p)),wc(i,this._getExactOverlayX(n,e,p))}else i.position="static";let c="",u=this._getOffset(n,"x"),f=this._getOffset(n,"y");u&&(c+=`translateX(${u}px) `),f&&(c+=`translateY(${f}px)`),i.transform=c.trim(),s.maxHeight&&(r?i.maxHeight=on(s.maxHeight):o&&(i.maxHeight="")),s.maxWidth&&(r?i.maxWidth=on(s.maxWidth):o&&(i.maxWidth="")),wc(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=on(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let s;if(this._isRtl()?s=e.overlayX==="end"?"left":"right":s=e.overlayX==="end"?"right":"left",s==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(o.x+this._overlayRect.width)}px`}else r.left=on(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:YN(e,i),isOriginOutsideView:Ox(e,i),isOverlayClipped:YN(n,i),isOverlayOutsideView:Ox(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&ju(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Mt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function wc(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function XN(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(sG);return!n||n==="px"?parseFloat(e):null}return t||null}function JN(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function aG(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var eO="cdk-global-overlay-wrapper",jx=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(eO),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:c}=i,u=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),f=(o==="100%"||o==="100vh")&&(!c||c==="100%"||c==="100vh"),p=this._xPosition,_=this._xOffset,b=this._overlayRef.getConfig().direction==="rtl",I="",S="",P="";u?P="flex-start":p==="center"?(P="center",b?S=_:I=_):b?p==="left"||p==="end"?(P="flex-end",I=_):(p==="right"||p==="start")&&(P="flex-start",S=_):p==="left"||p==="start"?(P="flex-start",I=_):(p==="right"||p==="end")&&(P="flex-end",S=_),e.position=this._cssPosition,e.marginLeft=u?"0":I,e.marginTop=f?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":S,n.justifyContent=P,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(eO),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},cG=(()=>{let e=class e{constructor(i,r,o,s){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=s}global(){return new jx}flexibleConnectedTo(i){return new Bx(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(V(Px),V(Ge),V(Xt),V(nO))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),lG=0,Af=(()=>{let e=class e{constructor(i,r,o,s,c,u,f,p,_,b,I,S){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=u,this._ngZone=f,this._document=p,this._directionality=_,this._location=b,this._outsideClickDispatcher=I,this._animationsModuleType=S}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),s=this._createPortalOutlet(o),c=new Sf(i);return c.direction=c.direction||this._directionality.value,new Vx(s,r,o,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Ln))}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${lG++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Va)),new yv(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(V(iG),V(nO),V(Ur),V(cG),V(rG),V(_t),V(pe),V(Ge),V(RN),V(Cs),V(oG),V(Ra,8))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uG=new re("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=ee(Af);return()=>t.scrollStrategies.reposition()}});function dG(t){return()=>t.scrollStrategies.reposition()}var hG={provide:uG,deps:[Af],useFactory:dG},iO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({providers:[Af,hG],imports:[Ks,bv,Rx,Rx]});let t=e;return t})();function pG(t,e){if(t&1){let n=Et();j(0,"div",1)(1,"button",2),Ie("click",function(){ft(n);let r=ue();return pt(r.action())}),J(2),G()()}if(t&2){let n=ue();H(2),Ke(" ",n.data.action," ")}}var mG=["label"];function gG(t,e){}var _G=Math.pow(2,31)-1,Mf=class{constructor(e,n){this._overlayRef=n,this._afterDismissed=new Me,this._afterOpened=new Me,this._onAction=new Me,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,_G))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},rO=new re("MatSnackBarData"),Gu=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},vG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let t=e;return t})(),yG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let t=e;return t})(),bG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let t=e;return t})(),oO=(()=>{let e=class e{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};e.\u0275fac=function(r){return new(r||e)(ce(Mf),ce(rO))},e.\u0275cmp=it({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[dt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&(j(0,"div",0),J(1),G(),Pe(2,pG,3,1,"div",1)),r&2&&(H(),Ke(" ",o.data.message,`
`),H(),$e(2,o.hasAction?2:-1))},dependencies:[HN,vG,yG,bG],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let t=e;return t})(),wG={snackBarState:GN("state",[Tx("void, hidden",vv({transform:"scale(0.8)",opacity:0})),Tx("visible",vv({transform:"scale(1)",opacity:1})),Sx("* => visible",Dx("150ms cubic-bezier(0, 0, 0.2, 1)")),Sx("* => void, * => hidden",Dx("75ms cubic-bezier(0.4, 0.0, 1, 1)",vv({opacity:0})))])},IG=0,CG=(()=>{let e=class e extends qu{constructor(i,r,o,s,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=o,this._platform=s,this.snackBarConfig=c,this._document=ee(Ge),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Me,this._onExit=new Me,this._onEnter=new Me,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${IG++}`,this.attachDomPortal=u=>{this._assertNotAttached();let f=this._portalOutlet.attachDomPortal(u);return this._afterPortalAttached(),f},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:o}=i;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,s="mdc-snackbar__label";o.classList.toggle(s,!o.querySelector(`.${s}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let s=r[o],c=s.getAttribute("aria-owns");this._trackedModals.add(s),c?c.indexOf(i)===-1&&s.setAttribute("aria-owns",c+" "+i):s.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?i.setAttribute("aria-owns",o):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};e.\u0275fac=function(r){return new(r||e)(ce(pe),ce(Mt),ce(dr),ce(Xt),ce(Gu))},e.\u0275cmp=it({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(Do(Mx,7),Do(mG,7)),r&2){let s;oi(s=si())&&(o._portalOutlet=s.first),oi(s=si())&&(o._label=s.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container"],hostVars:1,hostBindings:function(r,o){r&1&&d0("@state.done",function(c){return o.onAnimationEnd(c)}),r&2&&u0("@state",o._animationState)},standalone:!0,features:[ys,dt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface","mat-mdc-snackbar-surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&(j(0,"div",1)(1,"div",2,0)(3,"div",3),Pe(4,gG,0,0,"ng-template",4),G(),de(5,"div"),G()()),r&2&&(H(5),lr("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[Mx],styles:[".mat-mdc-snack-bar-container{display:flex;align-items:center;justify-content:center;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);margin:8px}.mat-mdc-snack-bar-handset .mat-mdc-snack-bar-container{width:100vw}.mat-mdc-snackbar-surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;padding-left:0;padding-right:8px}[dir=rtl] .mat-mdc-snackbar-surface{padding-right:0;padding-left:8px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{min-width:344px;max-width:672px}.mat-mdc-snack-bar-handset .mat-mdc-snackbar-surface{width:100%;min-width:0}.cdk-high-contrast-active .mat-mdc-snackbar-surface{outline:solid 1px}.mat-mdc-snack-bar-container .mat-mdc-snackbar-surface{color:var(--mdc-snackbar-supporting-text-color);border-radius:var(--mdc-snackbar-container-shape);background-color:var(--mdc-snackbar-container-color)}.mdc-snackbar__label{width:100%;flex-grow:1;box-sizing:border-box;margin:0;padding:14px 8px 14px 16px}[dir=rtl] .mdc-snackbar__label{padding-left:8px;padding-right:16px}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-family:var(--mdc-snackbar-supporting-text-font);font-size:var(--mdc-snackbar-supporting-text-size);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}"],encapsulation:2,data:{animation:[wG.snackBarState]}});let t=e;return t})();function EG(){return new Gu}var xG=new re("mat-snack-bar-default-options",{providedIn:"root",factory:EG}),DG=(()=>{let e=class e{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,o,s,c,u){this._overlay=i,this._live=r,this._injector=o,this._breakpointObserver=s,this._parentSnackBar=c,this._defaultConfig=u,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=oO,this.snackBarContainerComponent=CG,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",o){let s=te(te({},this._defaultConfig),o);return s.data={message:i,action:r},s.announcementMessage===i&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,s=_t.create({parent:o||this._injector,providers:[{provide:Gu,useValue:r}]}),c=new $u(this.snackBarContainerComponent,r.viewContainerRef,s),u=i.attach(c);return u.instance.snackBarConfig=r,u.instance}_attach(i,r){let o=te(te(te({},new Gu),this._defaultConfig),r),s=this._createOverlay(o),c=this._attachSnackBarContainer(s,o),u=new Mf(c,s);if(i instanceof Ni){let f=new Hu(i,null,{$implicit:o.data,snackBarRef:u});u.instance=c.attachTemplatePortal(f)}else{let f=this._createInjector(o,u),p=new $u(i,void 0,f),_=c.attachComponentPortal(p);u.instance=_.instance}return this._breakpointObserver.observe(EN.HandsetPortrait).pipe(Pi(s.detachments())).subscribe(f=>{s.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),o.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(u,o),this._openedSnackBarRef=u,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new Sf;r.direction=i.direction;let o=this._overlay.position().global(),s=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!s||i.horizontalPosition==="end"&&s,u=!c&&i.horizontalPosition!=="center";return c?o.left("0"):u?o.right("0"):o.centerHorizontally(),i.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(i,r){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector;return _t.create({parent:o||this._injector,providers:[{provide:Mf,useValue:r},{provide:rO,useValue:i.data}]})}};e.\u0275fac=function(r){return new(r||e)(V(Af),V(SN),V(_t),V(pv),V(e,12),V(xG))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({providers:[DG],imports:[iO,bv,qN,io,oO,io]});let t=e;return t})();var Pf=(()=>{let e=class e{transform(i,...r){let o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",s=[];for(let c=0;c<o.length;c++)for(let u=0;u<o.length;u++)s.push(o[c]+o[u]);if(console.log(i,...r),i<1e3)return i.toFixed(2);if(i>=1e3&&i<=999999)return(i/1e3).toFixed(2)+"K";if(i>=1e6&&i<=999999999)return(i/1e6).toFixed(2)+"M";if(i>=1e9&&i<=999999999999)return(i/1e9).toFixed(2)+"B";if(i>=1e12&&i<=999999999999999)return(i/1e12).toFixed(2)+"T";if(i>=1e15){let c=i/1e12,u=-1;for(;c/1e3>1;)c=c/1e3,u++;return c.toFixed(2)+s[u]}return null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Vr({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();var Ys=(()=>{let e=class e{getCoins(){return this.coins}constructor(i){this.auth=i,this.coins=0,this.intervalId=setInterval(()=>{this.coins=Math.floor(this.coins+this.cps),localStorage.setItem("coins",this.coins.toString())},1e3),this.cps=0,localStorage.getItem("coins")&&(this.coins=+localStorage.getItem("coins")),localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins")))}ngOnInit(){localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins"))),this.auth.userData.subscribe(i=>{console.log("update:"),console.log(i,i.update);var r=new Date().getTime()/1e3;i.update&&(console.log(r,i.update,r-i.update),this.coins=+localStorage.getItem("coins")+ +localStorage.getItem("cps")*(r-i.update)/2,console.log(this.coins))})}addSingleCoin(i){this.coins=this.coins+ +i,localStorage.setItem("coins",this.coins.toString())}getCps(){return this.cps}addCpsToCoins(i){console.log("coin:",i),this.cps=+this.cps+ +i,localStorage.setItem("cps",this.cps.toString())}};e.\u0275fac=function(r){return new(r||e)(V(Rn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aO=(()=>{let e=class e{constructor(i,r){this.afs=i,this.authService=r}getFriendsGarages(i){return console.log("friendUser",i),this.afs.collection(`users/${i}/data/data/friends`).snapshotChanges().pipe(ct(r=>{let o=[];return this.authService.getDataFromUser(i).subscribe(s=>{console.log(s.garages),o.push(...s.garages)}),console.log("friendGarage",o),o}),ye(r=>r.flat()))}};e.\u0275fac=function(r){return new(r||e)(V(Cf),V(Rn))},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function SG(t,e){if(t&1){let n=Et();j(0,"div",15)(1,"button",16),Ie("click",function(){ft(n);let r=ue();return pt(r.onCloseClick())}),J(2,"X"),G(),j(3,"h1"),J(4,"Car"),G(),j(5,"p"),J(6),G(),j(7,"p"),J(8),G()()}if(t&2){let n=ue();Ce("z-index",n.z)("display","block"),H(6),mt(n.randomCar.car),H(2),mt(n.randomCar.hp)}}function AG(t,e){if(t&1){let n=Et();j(0,"img",17),Ie("click",function(){ft(n);let r=ue();return pt(r.hideMap("profile"))}),G()}if(t&2){let n=ue();je("src",n.user.photoUrl,en)}}function MG(t,e){if(t&1){let n=Et();j(0,"img",17),Ie("click",function(){ft(n);let r=ue();return pt(r.hideMap("profile"))}),G()}if(t&2){let n=ue();je("src",n.user.photoURL,en)}}function PG(t,e){if(t&1){let n=Et();j(0,"img",18),Ie("click",function(){ft(n);let r=ue();return pt(r.hideMap("profile"))}),G()}}var Cv=(()=>{let e=class e{hideMap(i){this.router.navigate([i])}ngOnInit(){if(setInterval(()=>{this.coins=this.coinService.getCoins(),console.log("a",this.coinService.getCoins())},999),localStorage.getItem("garagePrice")){console.log(JSON.parse(localStorage.getItem("garages")));let r=JSON.parse(localStorage.getItem("garages"));this.garagePrice=JSON.parse(localStorage.getItem("garagePrice")),this.allGarages.push(...r),console.log(r),setTimeout(()=>{r.forEach(o=>{console.log(o);let s=yt.marker([o.lat,o.lng],{icon:this.garageIcon}).addTo(this.map).on("click",u=>{if(console.log(u,u.latlng,this.currentPos),console.log(),this.currentPos){let f=this.getDistance([u.latlng.lat,u.latlng.lng],[this.currentPos.coords.latitude,this.currentPos.coords.longitude]);console.log("distance:",f),f<100&&(this.hideMap("garageClick"),this.router.navigate(["garageClick"]))}else navigator.geolocation.getCurrentPosition(f=>{let p=this.getDistance([u.latlng.lat,u.latlng.lng],[f.coords.latitude,f.coords.longitude]);console.log("distance:",p,f),p<100&&(this.hideMap("garageClick"),this.router.navigate(["garageClick"]))})}),c=yt.circle([o.lat,o.lng],100).addTo(this.map).setStyle({color:"#20C912"})})},500)}this.auth.getDataFromUser(localStorage.getItem("key")).subscribe(r=>{console.log("here:",r[0])});let i;this.auth.getDataFromUser(localStorage.getItem("key")).subscribe(r=>{i=r[0],console.log("user21",i),i&&this.garageService.getFriendsGarages(i.user.uid).pipe(Gn(1)).subscribe(o=>{this.friendGarages=o,this.addGarageMarkers()})})}addGarageMarkers(){this.friendGarages.forEach(i=>{let r=i.location.lat,o=i.location.lng,s=yt.marker([r,o],{icon:this.garageIcon}).addTo(this.map).on("click",u=>{this.getDistance([u.latlng.lat,u.latlng.lng],[this.currentPos.coords.latitude,this.currentPos.coords.longitude])<100&&this.router.navigate(["garageClick"])}),c=yt.circle([r,o],100).addTo(this.map).setStyle({color:"#20C912"})})}initMap(){navigator.geolocation.getCurrentPosition(r=>{console.log(r.coords),this.moveMap([r.coords.latitude,r.coords.longitude])}),setTimeout(()=>{navigator.geolocation.getCurrentPosition(r=>{console.log(r.coords),this.moveMap([r.coords.latitude,r.coords.longitude])})},5e3),this.map=yt.map("map",{center:[49.2,10.5],zoom:18,attributionControl:!0}).on("click",r=>{console.log(r.latlng.lat,r.latlng.lng);let o=new Pf;var s=yt.popup().setLatLng([r.latlng.lat,r.latlng.lng]).setContent(`<p>Do you want to buy a Garage here</p>
        
        <p>Price: ${o.transform(this.garagePrice.price)} </p>
        
        <button id="buyButton">Buy Garage</button>
        
        <style>
        #buyButton {
        background-color: green;
        width: 80%;
        margin: auto;
        border-radius: 5px;
        color: white;
        }
        * {
          text-align: center;
        }
        </style>
        `).openOn(this.map);document.getElementById("buyButton").addEventListener("click",c=>{if(console.log(c),console.log(r.latlng),this.coins>this.garagePrice.price){console.log("passt"),this.coins=this.coins-this.garagePrice.price,this.garagePrice.price=this.garagePrice.price*15,this.allGarages.push({lat:r.latlng.lat,lng:r.latlng.lng}),console.log(this.allGarages),localStorage.setItem("garages",JSON.stringify(this.allGarages)),localStorage.setItem("garagePrice",JSON.stringify(this.garagePrice));let u=yt.marker([r.latlng.lat,r.latlng.lng],{icon:this.garageIcon}).addTo(this.map).on("click",p=>{console.log(p,p.latlng,this.currentPos),console.log();let _=this.getDistance([p.latlng.lat,p.latlng.lng],[this.currentPos.coords.latitude,this.currentPos.coords.longitude]);console.log("distance:",_),_<100&&(this.hideMap("garageClick"),this.router.navigate(["garageClick"]))}),f=yt.circle([r.latlng.lat,r.latlng.lng],100).addTo(this.map).setStyle({color:"#20C912"})}})}),this.moveMap([49,12]);let i=yt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});navigator.geolocation.watchPosition(r=>{let o=r.coords.latitude,s=r.coords.longitude,c=r.coords.accuracy;setTimeout(()=>{yt.marker([49.3,10.5833333],{icon:this.repairShop}).addTo(this.map).on("click",()=>{})},5e3),setTimeout(()=>{},5e3)}),i.addTo(this.map),this.path(),this.generateRandomCars()}onBuyGarageClick(i){console.log(i)}onRepairShopClick(){console.log("jetzt")}constructor(i,r,o,s){this.auth=i,this.router=r,this.coinService=o,this.garageService=s,this.coins=0,this.iconHome=yt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/home.png'>",iconSize:[86,105],iconAnchor:[43,105]}),this.iconCar=yt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img id='car' src='../../assets/Car.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.manCar=yt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Man.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.repairShop=yt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Repair.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.garageIcon=yt.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/garage_locater.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.carLayer=new yt.FeatureGroup,this.allGarages=[],this.garagePrice={price:1e4,symbol:"K"},this.user=JSON.parse(localStorage.getItem("userData")),this.cars=+localStorage.getItem("carcount"),this.gems=0,this.oldPos={lat:0,lng:0},this.speedMap=[],this.distance=.005,this.allCities=[],this.cityMarkers=[],this.isoCountries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},this.randomCars=[],this.generiertePositionen=[],this.randomCar={car:"Car12",hp:1},this.visible=!0,this.z=0,this.friendGarages=[],localStorage.getItem("userData")?(console.log(JSON.parse(localStorage.getItem("userData"))),this.user=JSON.parse(localStorage.getItem("userData")),this.user.photoUrl=this.user.photoURL,console.log(this.user)):this.user=i.user$.subscribe(c=>{console.log(c),this.user=c}),i.userData.subscribe(c=>{console.log("userData:",c),this.speedMap=c.speedMap}),navigator.geolocation.getCurrentPosition(c=>{console.log("here",c),this.currentPos=c})}onUserClick(){this.hideMap("garage"),this.router.navigate(["garage"])}hideMapNow(i){this.hideMap(i),this.router.navigate([i])}ngAfterViewInit(){navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,console.log(this.lng,this.lat)}),console.log(this.lat,this.lng),this.initMap(),setTimeout(()=>{},5e3),navigator.geolocation.watchPosition(i=>{console.log(i),this.marker!=null&&this.map.removeLayer(this.marker),this.marker=yt.marker([i.coords.latitude,i.coords.longitude],{icon:this.manCar}).addTo(this.map),this.moveMap([i.coords.latitude,i.coords.longitude],i.coords.speed),console.log(this.marker,this.carLayer),setTimeout(()=>{console.log("jetzt")},5e3);let r=!0;console.log(this.generiertePositionen),this.generiertePositionen.forEach(o=>{let s=this.getDistance([o[0],o[1]],[this.lat,this.lng]);console.log("Distance:",s,this.generiertePositionen),s<500&&(r=!1)}),r==!0&&this.genNewCars(),this.allCities.forEach(o=>{let s=o.latitude,c=o.longitude,u=this.lng-c,f=this.lat-s;u>-.005&&u<.005&&(console.log(o),console.log(this.lat,this.lng),console.log(f,u))})}),this.getAllCities()}moveMap(i,r){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.map.flyTo(i,18),this.oldPos.lat=i[0],this.oldPos.lng=i[1],r&&(this.speedMap.push({lat:i[0],lng:i[1],speed:r}),setInterval(()=>{this.auth.addDataToUser({speedMap:this.speedMap})},2500)))}path(){console.log("Start"),navigator.geolocation.watchPosition(i=>{let r=i.coords.latitude,o=i.coords.longitude,s=i.coords.accuracy;this.lat=r,this.lng=o;var c=[[r,o],[r,o+this.distance]]})}getCountryName(i){return this.isoCountries.hasOwnProperty(i)?this.isoCountries[i]:i}generateRandomCars(){console.log("generateRandomCarsStart",this.lat,this.lng),navigator.geolocation.getCurrentPosition(i=>{this.generiertePositionen.push([i.coords.latitude,i.coords.longitude]);for(let r=0;r<25;r++){let o=i.coords.latitude+(Math.random()-.5)/100,s=i.coords.longitude+(Math.random()-.5)/100;console.log(o,s);let c=yt.circle([o,s],50).addTo(this.map);this.randomCars.push({Lat:o,Lng:s});let u=yt.marker([o,s],{icon:this.iconCar}).addTo(this.map);u.on("click",()=>{this.getDistance([o,s],[this.lat,this.lng])<=50&&(console.log(o,s,this.getDistance([o,s],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.router.navigate(["carFound"]),this.map.removeLayer(u),this.map.removeLayer(c),this.allGarages.forEach(f=>{this.getDistance([f.lat,f.lng],[o,s])<100&&(this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.router.navigate(["carFound"]),this.map.removeLayer(u),this.map.removeLayer(c))}))}),console.log(this.randomCars),this.map.removeLayer(this.map)}}),console.log("fertig Random")}genNewCars(){console.log("generateRandomCarsStart",this.lat,this.lng),this.generiertePositionen.push([this.lat,this.lng]),console.log("hier");for(let i=0;i<25;i++){console.log("hier");let r=this.lat+(Math.random()-.5)/100,o=this.lng+(Math.random()-.5)/100;console.log(r,o);let s=yt.circle([r,o],50).addTo(this.map);this.randomCars.push({Lat:r,Lng:o});let c=yt.marker([r,o],{icon:this.iconCar}).addTo(this.map);c.on("click",()=>{this.getDistance([r,o],[this.lat,this.lng])<=50&&(console.log(r,o,this.getDistance([r,o],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.router.navigate(["carFound"]),this.map.removeLayer(c),this.map.removeLayer(s)),this.allGarages.forEach(u=>{this.getDistance([u.lat,u.lng],[r,o])<100&&(this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.router.navigate(["carFound"]),this.map.removeLayer(c),this.map.removeLayer(s))})}),console.log(this.randomCars),this.map.removeLayer(this.map)}console.log("fertig Random")}getAllCities(){return k(this,null,function*(){let i={method:"GET",redirect:"follow"},r;yield fetch("https://api.country.is/",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{r=this.getCountryName(o.country)}).catch(o=>{console.log(o)}),yield fetch("https://countriesnow.space/api/v0.1/countries/population/cities",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{console.log(o.data),o.data.forEach(s=>{setTimeout(()=>{s.populationCounts[0].value>1e4&&s.country==r&&fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${s.city}`,{method:"GET",redirect:"follow"}).then(c=>c.json()).then(c=>{setTimeout(()=>{c.results&&(yt.marker([c.results[0].latitude,c.results[0].longitude],{icon:this.repairShop}).addTo(this.map),this.allCities.push(c.results[0]),yt.circle([c.results[0].latitude,c.results[0].longitude],550).addTo(this.map).setStyle({color:"red"}))},1e3)}).catch(c=>console.log(c))})},100)}).catch(o=>console.log(o))})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),s=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-s,p=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(s)*Math.cos(u)*Math.pow(Math.sin(p/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}onCloseClick(){this.visible=!0,console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ce(Rn),ce(Ft),ce(Ys),ce(aO))},e.\u0275cmp=it({type:e,selectors:[["app-leaflat-map"]],inputs:{coins:"coins"},standalone:!0,features:[dt],decls:28,vars:13,consts:[[1,"items"],["id","coins"],["id","icon"],["src","../../assets/icon%20(2).png"],["id","text"],["id","cars"],["src","../../assets/icon%20(3).png"],["id","gems"],["src","../../assets/icon%20(1).png"],[1,"map-container"],[1,"map-frame"],["id","map"],["id","carCard",3,"z-Index","display"],["id","user"],["width","50px","height","50px",3,"src"],["id","carCard"],["id","closeBtn",3,"click"],["width","50px","height","50px",3,"click","src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px",3,"click"]],template:function(r,o){r&1&&(j(0,"div",0)(1,"div",1)(2,"div",2),de(3,"img",3),G(),j(4,"div",4)(5,"p"),J(6),ai(7,"currency"),G()()(),j(8,"div",5)(9,"div",2),de(10,"img",6),G(),j(11,"div",4)(12,"p"),J(13),G()()(),j(14,"div",7)(15,"div",2),de(16,"img",8),G(),j(17,"div",4)(18,"p"),J(19),G()()()(),j(20,"div",9)(21,"div",10),de(22,"div",11),G()(),Pe(23,SG,9,6,"div",12),j(24,"div",13),Pe(25,AG,1,1,"img",14)(26,MG,1,1)(27,PG,1,0),G()),r&2&&(H(6),mt(Bi(7,11,o.coins)),H(7),mt(o.cars),H(6),mt(o.gems),H(),Ce("display",o.visible?"block":"none"),H(),Ce("display",o.visible?"block":"none"),H(),Ce("display",o.visible?"block":"none"),H(),$e(23,o.visible==!1?23:-1),H(2),$e(25,o.user.photoUrl?25:o.user.photoURL?26:27))},dependencies:[sO,Pf],styles:['.map-container[_ngcontent-%COMP%]{position:absolute;inset:0;height:calc(100% + -0px)}.items[_ngcontent-%COMP%]{position:absolute;top:25px;left:0;display:flex;z-index:50000;justify-content:space-around;width:100%}#user[_ngcontent-%COMP%]{z-index:50000;position:absolute;bottom:35px;left:15px;width:50px;height:50px}#user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}#buyButton[_ngcontent-%COMP%]{width:80%;height:25px;background-color:green}.items[_ngcontent-%COMP%]   #cars[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #gems[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #coins[_ngcontent-%COMP%]{width:100px;height:25px;background-color:#fff;border:1px black solid;border-radius:2px}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map[_ngcontent-%COMP%]{height:100%}.marker-pin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:500}.marker-pin[_ngcontent-%COMP%]:after{content:"";width:1px;height:1px;margin:3px 0 0 3px;background:#fff;position:absolute;border-radius:50%}.custom-div-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:5px;font-size:5px;left:0;right:0;margin:10px auto;text-align:center}img[_ngcontent-%COMP%]{width:50px;height:55px}#car[_ngcontent-%COMP%]{width:3px;height:3px}#carCard[_ngcontent-%COMP%]{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:5000;background-color:#fff;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}#icon[_ngcontent-%COMP%]{width:30%;height:100%}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:75%}#text[_ngcontent-%COMP%]{width:70%}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-37.5px;left:25px}']});let t=e;return t})();var RG=["canvas"],kG=["rLabel"],NG=["reading"],OG=[[["ngx-gauge-prepend"]],[["ngx-gauge-value"]],[["ngx-gauge-append"]],[["ngx-gauge-label"]]],FG=["ngx-gauge-prepend","ngx-gauge-value","ngx-gauge-append","ngx-gauge-label"];function LG(t,e){t&1&&ur(0,0,["*ngSwitchCase","true"])}function VG(t,e){if(t&1&&(Na(0),J(1),Oa()),t&2){let n=ue();H(),mt(n.prepend)}}function BG(t,e){t&1&&ur(0,1,["*ngSwitchCase","true"])}function jG(t,e){if(t&1&&(Na(0),J(1),ai(2,"number"),Oa()),t&2){let n=ue();H(),mt(Bi(2,1,n.value))}}function UG(t,e){t&1&&ur(0,2,["*ngSwitchCase","true"])}function zG(t,e){if(t&1&&(Na(0),J(1),Oa()),t&2){let n=ue();H(),mt(n.append)}}function $G(t,e){t&1&&ur(0,3,["*ngSwitchCase","true"])}function HG(t,e){if(t&1&&(Na(0),J(1),Oa()),t&2){let n=ue();H(),mt(n.label)}}function cO(t,e,n){return Math.max(e,Math.min(n,t))}function qG(t){return t!=null&&`${t}`!="false"}function Rf(t,e=0){return isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function lO(t){return`${t}px`}function uO(t){return t!=null&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}var GG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["ngx-gauge-append"]],exportAs:["ngxGaugeAppend"]});let t=e;return t})(),WG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["ngx-gauge-prepend"]],exportAs:["ngxGaugePrepend"]});let t=e;return t})(),ZG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["ngx-gauge-value"]],exportAs:["ngxGaugeValue"]});let t=e;return t})(),KG=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=jt({type:e,selectors:[["ngx-gauge-label"]],exportAs:["ngxGaugeLabel"]});let t=e;return t})(),ro={MIN:0,MAX:100,TYPE:"arch",THICK:4,FOREGROUND_COLOR:"rgba(0, 150, 136, 1)",BACKGROUND_COLOR:"rgba(0, 0, 0, 0.1)",CAP:"butt",SIZE:200},dO=(()=>{let e=class e{get size(){return this._size}set size(i){this._size=Rf(i)}get margin(){return this._margin}set margin(i){this._margin=Rf(i)}get min(){return this._min}set min(i){this._min=Rf(i,ro.MIN)}get animate(){return this._animate}set animate(i){this._animate=qG(i)}get max(){return this._max}set max(i){this._max=Rf(i,ro.MAX)}get value(){return this._value}set value(i){this._value=Rf(i)}constructor(i,r){this._elementRef=i,this._renderer=r,this._size=ro.SIZE,this._min=ro.MIN,this._max=ro.MAX,this._animate=!0,this._margin=0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=ro.TYPE,this.cap=ro.CAP,this.thick=ro.THICK,this.foregroundColor=ro.FOREGROUND_COLOR,this.backgroundColor=ro.BACKGROUND_COLOR,this.thresholds=Object.create(null),this.markers=Object.create(null),this._value=0,this.duration=1200}ngOnInit(){this.markers&&Object.keys(this.markers).length>0&&!this._margin&&(this._margin=10)}ngOnChanges(i){let r=i.thick||i.type||i.cap||i.size,o=i.value||i.min||i.max;if(this._initialized){if(o){let s;if(i.value){s=Number(i.value.currentValue),s=isNaN(s)?0:s;let c=Number(i.value.previousValue);this._oldChangeVal=isNaN(c)?this._oldChangeVal:c}this._update(s,this._oldChangeVal)}r&&(this._destroy(),this._init())}}_updateSize(){this._renderer.setStyle(this._elementRef.nativeElement,"width",lO(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",lO(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-this.size*.22/2)+"px)")}ngAfterViewInit(){this._canvas&&this._init()}ngOnDestroy(){this._destroy()}_getBounds(i){let r,o,s,c;return i=="semi"?(r=Math.PI,o=2*Math.PI,s=180,c=360):i=="full"?(r=1.5*Math.PI,o=3.5*Math.PI,s=270,c=s+360):i==="arch"&&(r=.8*Math.PI,o=2.2*Math.PI,s=180-.2*180,c=360+.2*180),{head:r,tail:o,start:s,end:c}}_drawShell(i,r,o,s){let c=this._getCenter(),u=this._getRadius();if(this._initialized){this._clear(),this._drawMarkersAndTicks();let f=this._getBackgroundColorRanges();if(this._context.lineWidth=this.thick,f&&f.length>0){this._context.lineCap="butt";for(let p=0;p<f.length;++p){let _=f[p];this._context.beginPath(),this._context.strokeStyle=_.backgroundColor?_.backgroundColor:_.bgOpacity?_.color:this.backgroundColor,_.bgOpacity!==void 0&&_.bgOpacity!==null&&(this._context.globalAlpha=_.bgOpacity),this._context.arc(c.x,c.y,u,this._getDisplacement(_.start),this._getDisplacement(_.end),!1),this._context.stroke(),this._context.globalAlpha=1}}else this._context.lineCap=this.cap,this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(c.x,c.y,u,i,o,!1),this._context.stroke();this._drawFill(i,r,o,s)}}_drawFill(i,r,o,s){let c=this._getCenter(),u=this._getRadius();this._context.lineCap=this.cap,this._context.lineWidth=this.thick,r=Math.max(r,i),r=Math.min(r,o),this._context.lineCap=this.cap,this._context.lineWidth=this.thick,this._context.beginPath(),this._context.strokeStyle=s,this._context.arc(c.x,c.y,u,i,r,!1),this._context.stroke()}_addMarker(i,r,o,s,c,u){var f=i*Math.PI/180;let p=2;c||(c=8),s||(s="line");let _=this._getCenter(),b=this._getRadius(),I=(b+this.thick/2+p)*Math.cos(f)+_.x,S=(b+this.thick/2+p)*Math.sin(f)+_.y,P=(b+this.thick/2+p+c)*Math.cos(f)+_.x,O=(b+this.thick/2+p+c)*Math.sin(f)+_.y;if(s=="triangle"){this._context.beginPath(),this._context.strokeStyle=r,this._context.moveTo(I,S),this._context.lineWidth=1;let W=i-45,X=i+45;W<0&&(W+=360),W>360&&(W-=360),X<0&&(X+=360),X>360&&(X-=360);let Z=W*Math.PI/180,ae=c*Math.cos(Z)+I,_e=c*Math.sin(Z)+S;this._context.lineTo(ae,_e);let me=X*Math.PI/180,A=c*Math.cos(me)+I,E=c*Math.sin(me)+S;this._context.lineTo(A,E),this._context.lineTo(I,S),this._context.closePath(),this._context.stroke(),this._context.fillStyle=r,this._context.fill()}else this._context.beginPath(),this._context.lineWidth=.5,this._context.strokeStyle=r,this._context.moveTo(I,S),this._context.lineTo(P,O),this._context.closePath(),this._context.stroke();o&&(this._context.save(),this._context.translate(P,O),this._context.rotate((i+90)*(Math.PI/180)),this._context.textAlign="center",this._context.font=u||"13px Arial",this._context.fillText(o,0,-3),this._context.restore())}_clear(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())}_getWidth(){return this.size}_getHeight(){return this.size}_getCanvasHeight(){return this.type=="arch"||this.type=="semi"?.85*this._getHeight():this._getHeight()}_getRadius(){var r=this._getCenter().x-this.thick;return this._margin>0&&(r-=this._margin),r}_getCenter(){var i=this._getWidth()/2,r=this._getHeight()/2;return{x:i,y:r}}_init(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._create()}_destroy(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1}_getForegroundColorByRange(i){let r=this._getThresholdMatchForValue(i);return r&&r.color?r.color:this.foregroundColor}_getThresholdMatchForValue(i){let r=Object.keys(this.thresholds).filter(function(o){return uO(o)&&Number(o)<=i}).sort((o,s)=>Number(o)-Number(s)).reverse()[0];if(r!==void 0){let o=this.thresholds[r];return{color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity,start:Number(r),end:this._getNextThreshold(Number(r))}}}_getNextThreshold(i){let r=Object.keys(this.thresholds).filter(function(o){return uO(o)&&Number(o)>i}).sort((o,s)=>Number(o)-Number(s));return r&&r[0]!==void 0?Number(r[0]):this.max}_getBackgroundColorRanges(){let i=0,r=[];do{let o=this._getThresholdMatchForValue(i);if(o){if(r.push({start:o.start,end:o.end,color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity}),i=o.end,i>=this.max)break}else break}while(!0);return r}_getDisplacement(i){let r=this.type,o=this._getBounds(r),s=this.min,c=this.max,u=o.head,f=cO(i,this.min,this.max),p=(o.tail-o.head)/(c-s),_=p*(f-s);return u+_}_create(i,r){let o=this,s=this.type,c=this._getBounds(s),u=this.duration,f=this.min,p=this.max,_=cO(this.value,f,p),b=c.head,I=(c.tail-c.head)/(p-f),S=I*(_-f),P=c.tail,O=this._getForegroundColorByRange(_),W;o._animationRequestID&&window.cancelAnimationFrame(o._animationRequestID);let X=Z=>{Z=Z||new Date().getTime();let ae=Z-W,_e=Math.min(ae/u,1),me=r?(r-f)*I:0,A=b+me+S*_e;o._drawShell(b,A,P,O),o._animationRequestID&&ae<u?o._animationRequestID=window.requestAnimationFrame(E=>X(E)):window.cancelAnimationFrame(o._animationRequestID)};this._animate?(i!==void 0&&r!==void 0&&r!==0&&(S=I*i-I*r),o._animationRequestID=window.requestAnimationFrame(Z=>{W=Z||new Date().getTime(),X(W)})):o._drawShell(b,b+S,P,O)}_drawMarkersAndTicks(){if(this.markers){let i=this._getBounds(this.type),o=(i.end-i.start)/(this.max-this.min);for(let s in this.markers){let c=Number(s)-this.min,u=i.start+c*o,f=this.markers[s];this._addMarker(u,f.color,f.label,f.type,f.size,f.font)}}}_update(i,r){this._clear(),this._create(i,r)}};e.\u0275fac=function(r){return new(r||e)(ce(Mt),ce(oh))},e.\u0275cmp=it({type:e,selectors:[["ngx-gauge"]],contentQueries:function(r,o,s){if(r&1&&(kl(s,KG,5),kl(s,WG,5),kl(s,GG,5),kl(s,ZG,5)),r&2){let c;oi(c=si())&&(o._labelChild=c.first),oi(c=si())&&(o._prependChild=c.first),oi(c=si())&&(o._appendChild=c.first),oi(c=si())&&(o._valueDisplayChild=c.first)}},viewQuery:function(r,o){if(r&1&&(Do(RG,7),Do(kG,7),Do(NG,7)),r&2){let s;oi(s=si())&&(o._canvas=s.first),oi(s=si())&&(o._label=s.first),oi(s=si())&&(o._reading=s.first)}},hostAttrs:["role","slider","aria-readonly","true"],hostVars:7,hostBindings:function(r,o){r&2&&(lr("aria-valuemin",o.min)("aria-valuemax",o.max)("aria-valuenow",o.value)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby),zr("ngx-gauge-meter",!0))},inputs:{ariaLabel:[gt.None,"aria-label","ariaLabel"],ariaLabelledby:[gt.None,"aria-labelledby","ariaLabelledby"],size:"size",margin:"margin",min:"min",animate:"animate",max:"max",type:"type",cap:"cap",thick:"thick",label:"label",append:"append",prepend:"prepend",foregroundColor:"foregroundColor",backgroundColor:"backgroundColor",thresholds:"thresholds",markers:"markers",value:"value",duration:"duration"},features:[ar],ngContentSelectors:FG,decls:17,vars:16,consts:[["reading",""],["rLabel",""],["canvas",""],[1,"reading-block"],[1,"reading-affix",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch"],[1,"reading-label",3,"ngSwitch"]],template:function(r,o){r&1&&(Rl(OG),j(0,"div",3,0)(2,"u",4),Pe(3,LG,1,0,"ng-content",5)(4,VG,2,1,"ng-container",5),G(),Na(5,6),Pe(6,BG,1,0,"ng-content",5)(7,jG,3,3,"ng-container",5),Oa(),j(8,"u",4),Pe(9,UG,1,0,"ng-content",5)(10,zG,2,1,"ng-container",5),G()(),j(11,"div",7,1),Pe(13,$G,1,0,"ng-content",5)(14,HG,2,1,"ng-container",5),G(),de(15,"canvas",null,2)),r&2&&(Ce("font-size",(o.size-o.margin*2)*.22+"px"),H(2),je("ngSwitch",o._prependChild!=null),H(),je("ngSwitchCase",!0),H(),je("ngSwitchCase",!1),H(),je("ngSwitch",o._valueDisplayChild!=null),H(),je("ngSwitchCase",!0),H(),je("ngSwitchCase",!1),H(),je("ngSwitch",o._appendChild!=null),H(),je("ngSwitchCase",!0),H(),je("ngSwitchCase",!1),H(),Ce("font-size",(o.size-o.margin*2)/13+"px"),je("ngSwitch",o._labelChild!=null),H(2),je("ngSwitchCase",!0),H(),je("ngSwitchCase",!1))},dependencies:[S0,VM,jM],styles:[`.ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}
`],encapsulation:2});let t=e;return t})(),hO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({imports:[So]});let t=e;return t})();var fO=(()=>{let e=class e{transform(i){return JSON.stringify(i,void 0,4).replace(/ /g," ").replace(/\n/g,"")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Vr({name:"prettyjson",type:e,pure:!0,standalone:!0});let t=e;return t})();function QG(t,e){if(t&1&&(J(0),ai(1,"prettyjson"),de(2,"br")),t&2){let n=e.$implicit;Ke(" ",Bi(1,1,n),"")}}var Ev=(()=>{let e=class e{constructor(i){this.auth=i,this.speedMap=[],this.oldPos={lat:0,lng:0},this.distance=0,this.speed=0,this.gaugeType="semi",this.gaugeValue=this.speed,this.gaugeLabel="Speed",this.gaugeAppendText="km/h",this.auth.userData.subscribe(r=>{console.log("userData:",r),this.speedMap=r.speedMap})}ngOnInit(){setInterval(()=>{let i=localStorage.getItem("key")},500),navigator.geolocation.watchPosition(i=>{this.speed=i.coords.speed*3.6,i.coords.speed&&this.speedMap.push({lat:i.coords.latitude,lng:i.coords.longitude,speed:i.coords.speed,date:new Date})}),setInterval(()=>{this.auth.addDataToUser({speedMap:this.speedMap})},25e3)}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),s=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-s,p=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(s)*Math.cos(u)*Math.pow(Math.sin(p/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}moveMap(i){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.distance=this.distance+2,this.oldPos.lat=i[0],this.oldPos.lng=i[1])}};e.\u0275fac=function(r){return new(r||e)(ce(Rn))},e.\u0275cmp=it({type:e,selectors:[["app-when-moving"]],standalone:!0,features:[dt],decls:11,vars:7,consts:[["type","semi",3,"value","label","append","max","thick"]],template:function(r,o){r&1&&(j(0,"p"),J(1,"when-moving works!"),G(),j(2,"p"),J(3),G(),j(4,"p"),J(5),G(),de(6,"ngx-gauge",0)(7,"br")(8,"br"),ws(9,QG,3,3,"br",null,bs)),r&2&&(H(3),Ke("",o.distance," Meter"),H(2),Ke("",o.speed," km/h"),H(),je("value",o.speed)("label",o.gaugeLabel)("append",o.gaugeAppendText)("max",250)("thick",10),H(3),Is(o.speedMap))},dependencies:[hO,dO,So,fO]});let t=e;return t})();var pO=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ut({type:e}),e.\u0275inj=lt({imports:[io]});let t=e;return t})();function XG(t,e){if(t&1&&de(0,"img",20),t&2){let n=ue(2);je("src",n.user.photoUrl,en)}}function JG(t,e){if(t&1&&de(0,"img",20),t&2){let n=ue(2);je("src",n.user.photoURL,en)}}function e8(t,e){t&1&&de(0,"img",21)}function t8(t,e){if(t&1&&(j(0,"div",5),Pe(1,XG,1,1,"img",20)(2,JG,1,1)(3,e8,1,0),j(4,"p"),J(5),G()()),t&2){let n=ue();H(),$e(1,n.user.photoUrl?1:n.user.photoURL?2:3),H(4),mt(n.user.displayName)}}var xv=(()=>{let e=class e{hideMap(i){this.router.navigate([i])}ngOnChanges(i){this.cps=+localStorage.getItem("cps")}constructor(i,r){this.auth=i,this.router=r,this.cps=+localStorage.getItem("cps"),this.user=JSON.parse(localStorage.getItem("userData")),this.progress=0,localStorage.getItem("userData")?(console.log(JSON.parse(localStorage.getItem("userData"))),this.user=JSON.parse(localStorage.getItem("userData")),console.log(this.user),this.user.photoUrl=this.user.photoURL):(i.user$.subscribe(o=>{console.log(o),o&&(this.user=o)}),i.getDataFromUser(o=>{}))}onLogoutClick(){localStorage.removeItem("key"),this.auth.signOut(),window.location.reload()}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap("")},200)}};e.\u0275fac=function(r){return new(r||e)(ce(Rn),ce(Ft))},e.\u0275cmp=it({type:e,selectors:[["app-profile"]],standalone:!0,features:[ar,dt],decls:69,vars:6,consts:[[1,"logout"],["src","../../assets/image-removebg-preview (11).png","width","30px","height","30px",3,"click"],[1,"menu","container"],[1,"profile"],[1,"friends"],[1,"user","container"],[1,"container","level"],[1,"Level"],[1,"Progressbar"],["id","progress"],["id","fortschritt"],[1,"container"],["id","icon",3,"click"],["src","../../assets/car_icon.png","width","50px","height","50px"],["src","../../assets/addFriends_icon.png","width","50px","height","50px"],["id","icon"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["width","50px","height","50px",3,"src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px"]],template:function(r,o){r&1&&(j(0,"div",0)(1,"img",1),Ie("click",function(){return o.onLogoutClick()}),G()(),j(2,"div",2),de(3,"div",3)(4,"div",4),G(),Pe(5,t8,6,2,"div",5),de(6,"br"),j(7,"div",6)(8,"div",7)(9,"p"),J(10,"1"),G(),j(11,"p"),J(12,"LEVEL"),G()(),j(13,"div",8)(14,"div",9)(15,"p",10),J(16,"7.125/ 10000"),G()()()(),de(17,"hr"),j(18,"div",11)(19,"div",12),Ie("click",function(){return o.hideMap("garage")}),de(20,"img",13),j(21,"p"),J(22,"Garage"),G()(),j(23,"div",12),Ie("click",function(){return o.hideMap("friends")}),de(24,"img",14),j(25,"p"),J(26,"Friends"),G()(),j(27,"div",15),de(28,"img",13),j(29,"p"),J(30,"Garage"),G()(),j(31,"div",15),de(32,"img",13),j(33,"p"),J(34,"Garage"),G()()(),de(35,"br")(36,"br")(37,"hr"),j(38,"div",11)(39,"p"),J(40,"Gelaufene Distanz"),G(),j(41,"p"),J(42,"1.5 km"),G()(),j(43,"div",11)(44,"p"),J(45,"Current CPS:"),G(),j(46,"p"),J(47),ai(48,"currency"),G()(),j(49,"div",11)(50,"p"),J(51,"Gelaufene Distanz"),G(),j(52,"p"),J(53,"1.5 km"),G()(),j(54,"div",11)(55,"p"),J(56,"Gelaufene Distanz"),G(),j(57,"p"),J(58,"1.5 km"),G()(),j(59,"div",11)(60,"p"),J(61,"Gelaufene Distanz"),G(),j(62,"p"),J(63,"1.5 km"),G()(),de(64,"hr"),j(65,"div",16),Ie("click",function(){return o.onCloseClick()}),j(66,"div",17),Ie("click",function(){return o.onCloseClick()}),j(67,"button",18),Ie("click",function(){return o.onCloseClick()}),de(68,"img",19),G()()()),r&2&&(H(5),$e(5,o.user?5:-1),H(9),Ce("width",o.progress+"%"),H(33),mt(Bi(48,4,o.cps)))},dependencies:[pO,Pf],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}.logout[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e53d31;border-radius:50%;position:absolute;right:5px}.logout[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px}img[_ngcontent-%COMP%]{margin:0 auto auto}#icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e96245;border-radius:50%;border:0px}.Progressbar[_ngcontent-%COMP%]{width:80%;height:50px;border-radius:50px}#progress[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#000;border-radius:50px}#fortschritt[_ngcontent-%COMP%]{margin-left:150px;width:150px}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var mO=(()=>{let e=class e{constructor(){fetch("../../assets/cars.json",{method:"GET",redirect:"follow"}).then(i=>i.json()).then(i=>{console.log(i),this.cars=i,console.log(this.cars)}).catch(i=>console.error(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ne({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function i8(t,e){if(t&1&&(de(0,"br"),j(1,"h1"),J(2),G(),de(3,"img",2),j(4,"div",3)(5,"div",4),J(6),G(),j(7,"div",5),J(8),G(),j(9,"div",6),J(10),G(),j(11,"div",7),J(12),G(),j(13,"div",8),J(14),G(),j(15,"div",9),J(16),G()(),de(17,"br")),t&2){let n=ue();H(),Ce("color",n.randomCar.textColor),H(),mt(n.randomCar.Name.toUpperCase()),H(),je("src",n.randomCar.Path,en),H(2),Ce("background",n.randomCar.Color)("color",n.randomCar.textColor),H(),Ke("",n.randomCar.Horsepower," hp"),H(),Ce("background",n.randomCar.Color)("color",n.randomCar.textColor),H(),Ke("",n.randomCar.Miles_per_Gallon," Miles per Gallon"),H(),Ce("background",n.randomCar.Color)("color",n.randomCar.textColor),H(),Ke("",n.randomCar.Cylinders," Cylinders"),H(),Ce("background",n.randomCar.Color)("color",n.randomCar.textColor),H(),Ke(" ",n.randomCar.Acceleration,"s 0 - 60 mp/h"),H(),Ce("background",n.randomCar.Color)("color",n.randomCar.textColor),H(),Ke(" ",n.randomCar.CPS.toFixed(2)," coins per second"),H(),Ce("background",n.randomCar.Color)("color",n.randomCar.textColor),H(),Ke(" Year: ",n.randomCar.Year," ")}}var Dv=(()=>{let e=class e{hideMap(i){this.router.navigate([i])}addCoins(i){this.coin.addCpsToCoins(i)}addCoin(i){console.log(i),this.addCoins(Math.floor(i))}onCloseClick(){this.hideMap("")}ngOnInit(){if(setTimeout(()=>{this.getRandomCar()},500),localStorage.getItem("mycars")){let i=JSON.parse(localStorage.getItem("mycars"));console.log(localStorage.getItem("mycars"),JSON.parse(localStorage.getItem("mycars"))),console.log("allcars"),console.log(i),this.myCars.push(...i),console.log(this.myCars)}}constructor(i,r,o){this.car=i,this.router=r,this.coin=o,this.CPS=0,this.randomCar={car:"Car12",hp:1,topSpeed:152},this.myCars=[],this.allCars=[],this.allCars=this.car.cars}getAllCars(){this.allCars=this.car.cars}getRandomCar(){if(console.log(this.car.cars),this.car.cars){let i=this.car.cars[Math.floor(Math.random()*this.car.cars.length)];console.log(i),this.randomCar=i,this.randomCar.CPS=this.randomCar.Horsepower*this.randomCar.Acceleration*this.randomCar.Cylinders/1e3,this.myCars.push(i),console.log(this.CPS),this.CPS=this.CPS+i.CPS,console.log(this.CPS),this.getCPS(),localStorage.setItem("mycars",JSON.stringify(this.myCars))}}getCPS(){this.addCoin(this.CPS),console.log(this.CPS)}};e.\u0275fac=function(r){return new(r||e)(ce(mO),ce(Ft),ce(Ys))},e.\u0275cmp=it({type:e,selectors:[["app-car-found"]],standalone:!0,features:[dt],decls:6,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&(j(0,"body")(1,"div",0)(2,"button",1),Ie("click",function(){return o.onCloseClick()}),J(3,"X"),G(),de(4,"br"),Pe(5,i8,18,34),G()()),r&2&&(H(),Ce("display","block")("background",o.randomCar.Color),H(4),$e(5,o.randomCar.Color?5:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;height:30px;padding-top:7.5px}"]});let t=e;return t})();function r8(t,e){if(t&1){let n=Et();j(0,"div",2),Ie("click",function(){let r=ft(n).$implicit,o=ue(2);return pt(o.onCarClick(r))}),de(1,"br")(2,"img",3)(3,"br"),j(4,"p"),J(5),G()()}if(t&2){let n=e.$implicit;Ce("background",n.Color),H(2),je("src",n.Path,en),H(3),mt(n.Name)}}function o8(t,e){if(t&1&&ws(0,r8,6,4,"div",1,bs),t&2){let n=ue();Is(n.myCars)}}var gO=(()=>{let e=class e{constructor(){this.selectCar=new Bt}onCloseClick(){}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}onCarClick(i){console.log("clicked on car",i),this.selectCar.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-select-car"]],outputs:{selectCar:"selectCar"},standalone:!0,features:[dt],decls:4,vars:1,consts:[[1,"container"],["id","car",3,"background"],["id","car",3,"click"],["width","50%","height","auto",3,"src"]],template:function(r,o){r&1&&(j(0,"p"),J(1,"select-car works!"),G(),j(2,"div",0),Pe(3,o8,2,0),G()),r&2&&(H(3),$e(3,o.myCars?3:-1))},styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();var _O=(()=>{let e=class e{transform(i,r,o){if(i>=0){let s,c,u,f;return r==="ms"&&o==="hhmmss"?(c=Math.floor(i/1e3%60),u=Math.floor(i/(1e3*60)%60),f=Math.floor(i/(1e3*60*60)),this.format(o,c,u,f,s)):r==="s"&&o==="hhmmss"?(c=Math.floor(i%60),u=Math.floor(i/60%60),f=Math.floor(i/60/60),this.format(o,c,u,f,s)):r==="ms"&&(o==="ddhhmmss"||o==="ddhhmmssLong")?(c=Math.floor(i/1e3%60),u=Math.floor(i/(1e3*60)%60),f=Math.floor(i/(1e3*60*60)%24),s=Math.floor(i/(1e3*60*60*24)),this.format(o,c,u,f,s)):r==="s"&&(o==="ddhhmmss"||o==="ddhhmmssLong")?(c=Math.floor(i%60),u=Math.floor(i/60%60),f=Math.floor(i/60/60%24),s=Math.floor(i/60/60/24),this.format(o,c,u,f,s)):i}else return"Done"}format(i,r,o,s,c){switch(c<10&&(c="0"+c),s<10&&(s="0"+s),o<10&&(o="0"+o),r<10&&(r="0"+r),i){case"hhmmss":return`${s}:${o}:${r}`;case"ddhhmmss":return`${c}d, ${s}h, ${o}m, ${r}s`;case"ddhhmmssLong":return`${c} days, ${s} hours, ${o} minutes, ${r} seconds`;default:return null}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Vr({name:"durationFormat",type:e,pure:!1,standalone:!0});let t=e;return t})();function s8(t,e){if(t&1&&(j(0,"div",6),de(1,"br")(2,"img",7)(3,"br"),j(4,"p"),J(5),G()()),t&2){let n=ue(2);Ce("background",n.item.Color)("height","100%"),H(2),je("src",n.item.Path,en),H(3),mt(n.item.Name)}}function a8(t,e){if(t&1&&(j(0,"div",12),J(1),G(),j(2,"div",13),J(3),G(),j(4,"div",14),J(5),G(),j(6,"div",15),J(7),G(),j(8,"div",16),J(9),G(),j(10,"div",17),J(11),G()),t&2){let n=ue(3);Ce("background",n.item.Color)("color",n.item.textColor),H(),La("",n.item.Horsepower," HP + ",n.item.upgradeHp," HP"),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),La("",n.item.Miles_per_Gallon," Miles per Gallon - ",n.item.upgradeGallon.toFixed(2)," Miles"),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke("",n.item.Cylinders," Cylinders"),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),La(" ",n.item.Acceleration.toFixed(2),"s 0 - 60 km/h - ",n.item.upgradeZeroSixty.toFixed(2),"s "),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),La(" ",n.item.CPS.toFixed(2)," cps + ",n.item.upgradeCPS.toFixed(2),""),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke(" Year: ",n.item.Year," ")}}function c8(t,e){if(t&1&&(j(0,"div",12),J(1),G(),j(2,"div",13),J(3),G(),j(4,"div",14),J(5),G(),j(6,"div",15),J(7),G(),j(8,"div",16),J(9),G(),j(10,"div",17),J(11),G()),t&2){let n=ue(3);Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke("",n.item.Horsepower," HP "),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke("",n.item.Miles_per_Gallon," Miles per Gallon"),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke("",n.item.Cylinders," Cylinders"),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke(" ",n.item.Acceleration,"s 0 - 60 mp/h "),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke(" ",n.item.CPS.toFixed(2)," cps "),H(),Ce("background",n.item.Color)("color",n.item.textColor),H(),Ke(" Year:",n.item.Year," ")}}function l8(t,e){if(t&1){let n=Et();j(0,"div",11)(1,"button",2),Ie("click",function(){ft(n);let r=ue(3);return pt(r.onUpgradeCLick())}),J(2),ai(3,"currency"),ai(4,"durationFormat"),G()()}if(t&2){let n=ue(3);H(2),La("Upgrade Price: ",Bi(3,2,n.item.upgradePrice)," Time: ",h0(4,4,n.item.upgradeTime,"s","hhmmss"),"")}}function u8(t,e){if(t&1){let n=Et();j(0,"div",11)(1,"button",2),Ie("click",function(){ft(n);let r=ue(3);return pt(r.onButtonDoneClick())}),J(2),ai(3,"durationFormat"),G()()}if(t&2){let n=ue(3);H(2),mt(h0(3,1,n.timeRemaining,"s","hhmmss"))}}function d8(t,e){if(t&1&&(j(0,"div",8)(1,"div",9),Pe(2,a8,12,34)(3,c8,12,30),G()(),de(4,"div",10),Pe(5,l8,5,8,"div",11)(6,u8,4,5,"div",11)),t&2){let n=ue(2);H(2),$e(2,n.upgradeClicked?2:3),H(3),$e(5,n.buttonVisible?5:-1),H(),$e(6,n.buttonVisible?-1:6)}}function h8(t,e){if(t&1){let n=Et();j(0,"div")(1,"p"),J(2,"Choose a car to upgrade"),G(),j(3,"div",4),Ie("click",function(){ft(n);let r=ue();return pt(r.onSelectClick())}),Pe(4,s8,6,6,"div",5),G(),Pe(5,d8,7,3),G()}if(t&2){let n=ue();H(4),$e(4,n.item?4:-1),H(),$e(5,n.item?5:-1)}}function f8(t,e){if(t&1){let n=Et();j(0,"app-select-car",18),Ie("selectCar",function(r){ft(n);let o=ue();return pt(o.selection(r))}),G()}}var Tv=(()=>{let e=class e{addCoins(i){this.coin.addSingleCoin(i)}hideMap(i){this.router.navigate([i])}constructor(i,r){this.router=i,this.coin=r,this.buttonVisible=!0,this.selectVisible=!1,this.progress="90%",this.upgradeClicked=!1}ngOnInit(){if(localStorage.getItem("upgrade")&&localStorage.getItem("upgradeStart")&&(this.buttonVisible=!1,this.selection(JSON.parse(localStorage.getItem("upgrade")))),setInterval(()=>{if(JSON.parse(localStorage.getItem("upgradeStart"))&&this.timeRemaining>=0){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((s,c)=>{console.log(s,c),s.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(JSON.stringify(o)),o.push(this.item);let s=localStorage.getItem("cps");s=s+this.item.upgradeCPS,localStorage.setItem("cps",s),localStorage.setItem("mycars",JSON.stringify(o))},500)}}},500),JSON.parse(localStorage.getItem("upgradeStart"))){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((s,c)=>{console.log(s,c),s.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(o),o.push(this.item);let s=localStorage.getItem("cps");s=s+this.item.upgradeCPS,localStorage.setItem("cps",s),localStorage.setItem("mycars",JSON.stringify(o))},500)}}}onButtonDoneClick(){console.log("done"),this.upgradeClicked=!1,this.timeRemaining<=0&&(localStorage.removeItem("upgrade"),localStorage.removeItem("upgradeStart"),console.log("done"),this.hideMap(""))}onSelectClick(){this.buttonVisible&&(console.log("onSelectClick"),this.selectVisible=!0)}selection(i){this.selectVisible=!1,console.log(i),this.item=i,this.upgradeValues(),this.timeRemaining>0&&(this.progress=`${this.timeRemaining}`)}onUpgradeCLick(){this.upgradeClicked=!0,localStorage.getItem("coins")>this.item.upgradePrice&&(this.item&&localStorage.setItem("upgrade",JSON.stringify(this.item)),localStorage.setItem("upgradeStart",JSON.stringify(new Date)),this.addCoins(-1*this.item.upgradePrice),this.buttonVisible=!1,this.item.level?this.item={Acceleration:this.item.Acceleration-this.item.upgradeZeroSixty,CPS:this.item.CPS+this.item.upgradeCPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower+this.item.upgradeHp,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.25,upgradeTime:28800,upgradePrice:25e4}:this.item={Acceleration:this.item.Acceleration-this.item.Acceleration*.05,CPS:this.item.CPS+(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*(+this.item.Cylinders/1e3),Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower+this.item.Horsepower*.25,Miles_per_Gallon:this.item.Miles_per_Gallon+this.item.Miles_per_Gallon*.15,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower+this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*(+this.item.Cylinders/1e3),upgradeZeroSixty:this.item.Acceleration*.05,upgradeTime:28800,upgradePrice:25e4},setInterval(()=>{if(JSON.parse(localStorage.getItem("upgradeStart"))&&this.timeRemaining>=0){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((s,c)=>{console.log(s,c),s.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(JSON.stringify(o)),o.push(this.item);let s=localStorage.getItem("cps");s=s+this.item.upgradeCPS,localStorage.setItem("cps",s),localStorage.setItem("mycars",JSON.stringify(o))},500)}}},500))}upgradeValues(){this.item.level?this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.25,upgradeTime:this.item.upgradeTime*2,upgradePrice:this.item.upgradePrice*1.5,level:this.item.level+1}:this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.05,upgradeTime:28800,upgradePrice:25e4,level:2}}onCloseClick(){this.hideMap("")}};e.\u0275fac=function(r){return new(r||e)(ce(Ft),ce(Ys))},e.\u0275cmp=it({type:e,selectors:[["app-garage"]],standalone:!0,features:[dt],decls:6,vars:2,consts:[["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"selectCar",3,"click"],["id","car",3,"background","height"],["id","car"],["width","50%","height","auto",3,"src"],[1,"upgrades"],[1,"container"],[1,"level"],[1,"upgradeBtn"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"],[3,"selectCar"]],template:function(r,o){r&1&&(Pe(0,h8,6,2,"div")(1,f8,1,0,"app-select-car"),j(2,"div",0),Ie("click",function(){return o.onCloseClick()}),j(3,"div",1),Ie("click",function(){return o.onCloseClick()}),j(4,"button",2),Ie("click",function(){return o.onCloseClick()}),de(5,"img",3),G()()()),r&2&&($e(0,o.selectVisible?-1:0),H(),$e(1,o.selectVisible?1:-1))},dependencies:[gO,So,UM,_O],styles:['.selectCar[_ngcontent-%COMP%]{width:20%;height:25vh;background-color:#d9d9d9;border:black solid 1px;margin:auto;min-width:150px}*[_ngcontent-%COMP%]{text-align:center}.upgrades[_ngcontent-%COMP%]{width:80%;height:auto;background-color:#d9d9d9;border:black solid 1px;margin:50px auto auto}.upgradeBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;height:10vh;background-color:#000;border-radius:50px;color:#fff}.upgradeBtn[_ngcontent-%COMP%]{margin-top:50px}#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;min-height:30px;padding-top:7.5px}#progress[_ngcontent-%COMP%]{height:10vh;position:relative;top:-10vh;left:calc(50% - 185px);border-radius:50px;background-color:red;border:1px blue solid;z-index:1}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;right:0}.closeBtn[_ngcontent-%COMP%]{position:absolute;bottom:35px;left:calc(50% - 25px)}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();function p8(t,e){if(t&1&&(de(0,"br"),j(1,"h1"),J(2),G(),de(3,"img",2),j(4,"div",3)(5,"div",4),J(6),G(),j(7,"div",5),J(8),G(),j(9,"div",6),J(10),G(),j(11,"div",7),J(12),G(),j(13,"div",8),J(14),G(),j(15,"div",9),J(16),G()(),de(17,"br")),t&2){let n=ue();H(),Ce("color",n.Car.textColor),H(),mt(n.Car.Name.toUpperCase()),H(),je("src",n.Car.Path,en),H(2),Ce("background",n.Car.Color)("color",n.Car.textColor),H(),Ke("",n.Car.Horsepower," hp"),H(),Ce("background",n.Car.Color)("color",n.Car.textColor),H(),Ke("",n.Car.Miles_per_Gallon," Miles per Gallon"),H(),Ce("background",n.Car.Color)("color",n.Car.textColor),H(),Ke("",n.Car.Cylinders," Cylinders"),H(),Ce("background",n.Car.Color)("color",n.Car.textColor),H(),Ke(" ",n.Car.Acceleration,"s 0 - 100 km/h"),H(),Ce("background",n.Car.Color)("color",n.Car.textColor),H(),Ke(" ",n.Car.CPS.toFixed(2)," coins per second"),H(),Ce("background",n.Car.Color)("color",n.Car.textColor),H(),Ke(" Year: ",n.Car.Year," ")}}var vO=(()=>{let e=class e{constructor(){this.close=new Bt}ngOnInit(){console.log(this.Car)}closeClick(){this.close.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-select-car"]],inputs:{Car:"Car"},outputs:{close:"close"},standalone:!0,features:[dt],decls:5,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&(j(0,"div",0)(1,"button",1),Ie("click",function(){return o.closeClick()}),J(2,"X"),G(),de(3,"br"),Pe(4,p8,18,34),G()),r&2&&(Ce("display","block")("background",o.Car.Color),H(4),$e(4,o.Car.Color?4:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;min-height:30px;padding-top:7.5px}"]});let t=e;return t})();function m8(t,e){if(t&1&&(j(0,"p"),J(1),G()),t&2){let n=ue().$implicit;H(),Ke("LVL: ",n.level,"")}}function g8(t,e){if(t&1){let n=Et();j(0,"div",6),Ie("click",function(){let r=ft(n).$implicit,o=ue(3);return pt(o.openCar(r))}),de(1,"br")(2,"img",7)(3,"br"),j(4,"p"),J(5),G(),Pe(6,m8,2,1,"p"),G()}if(t&2){let n=e.$implicit;Ce("background",n.Color),H(2),je("src",n.Path,en),H(3),mt(n.Name),H(),$e(6,n.level?6:-1)}}function _8(t,e){if(t&1&&ws(0,g8,7,5,"div",5,bs),t&2){let n=ue(2);Is(n.myCars)}}function v8(t,e){if(t&1){let n=Et();j(0,"div",0),Pe(1,_8,2,0),G(),j(2,"div",1),Ie("click",function(){ft(n);let r=ue();return pt(r.onCloseClick())}),j(3,"div",2),Ie("click",function(){ft(n);let r=ue();return pt(r.onCloseClick())}),j(4,"button",3),Ie("click",function(){ft(n);let r=ue();return pt(r.onCloseClick())}),de(5,"img",4),G()()()}if(t&2){let n=ue();H(),$e(1,n.myCars?1:-1)}}function y8(t,e){if(t&1){let n=Et();j(0,"app-select-car",9),Ie("close",function(){ft(n);let r=ue(2);return pt(r.closeSelectedCar())}),G()}if(t&2){let n=ue(2);je("Car",n.selectedCar)}}function b8(t,e){if(t&1&&Pe(0,y8,1,1,"app-select-car",8),t&2){let n=ue();$e(0,n.selectedCar?0:-1)}}var Sv=(()=>{let e=class e{hideMap(i){this.router.navigate([i])}constructor(i){this.router=i,this.carVisible=!0}onCloseClick(){this.hideMap("")}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}openCar(i){this.selectedCar=i,this.carVisible=!1}closeSelectedCar(){this.carVisible=!0}};e.\u0275fac=function(r){return new(r||e)(ce(Ft))},e.\u0275cmp=it({type:e,selectors:[["app-my-cars"]],standalone:!0,features:[dt],decls:2,vars:1,consts:[[1,"container"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["id","car",3,"background"],["id","car",3,"click"],["width","50%","height","auto",3,"src"],[3,"Car"],[3,"close","Car"]],template:function(r,o){r&1&&Pe(0,v8,6,1)(1,b8,1,1),r&2&&$e(0,o.carVisible==!0?0:1)},dependencies:[vO],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();var yO=[{path:"",component:Cv,title:"World-Clicker | Map"},{path:"friends",component:hv},{path:"garage",component:Sv},{path:"carFound",component:Dv},{path:"profile",component:xv},{path:"whenMoving",component:Ev},{path:"garageClick",component:Tv}];function bO(t){return new De(function(e){var n=Ip(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var wO="auth",Ic=class{constructor(e){return e}},kf=class{constructor(){return Ha(wO)}};var Ux=new re("angularfire2.auth-instances");function w8(t,e){let n=Kl(wO,t,e);return n&&new Ic(n)}function I8(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ic(i)}}var C8={provide:kf,deps:[[new mn,Ux]]},E8={provide:Ic,useFactory:w8,deps:[[new mn,Ux],pr]};function IO(t,...e){return Nt("angularfire",ci.full,"auth"),Fi([E8,C8,{provide:Ux,useFactory:I8(t),multi:!0,deps:[pe,_t,zi,Ro,[new mn,hr],...e]}])}var CO=fr(bO,!0);var EO=fr(Yv,!0);var TO="@firebase/installations",qx="0.6.7";var SO=1e4,AO=`w:${qx}`,MO="FIS_v2",D8="https://firebaseinstallations.googleapis.com/v1",T8=60*60*1e3,S8="installations",A8="Installations";var M8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ec=new Xc(S8,A8,M8);function PO(t){return t instanceof Qc&&t.code.includes("request-failed")}function RO({projectId:t}){return`${D8}/projects/${t}/installations`}function kO(t){return{token:t.token,requestStatus:2,expiresIn:R8(t.expiresIn),creationTime:Date.now()}}function NO(t,e){return k(this,null,function*(){let i=(yield e.json()).error;return Ec.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function OO({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function P8(t,{refreshToken:e}){let n=OO(t);return n.append("Authorization",k8(e)),n}function FO(t){return k(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function R8(t){return Number(t.replace("s","000"))}function k8(t){return`${MO} ${t}`}function N8(i,r){return k(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let o=RO(t),s=OO(t),c=e.getImmediate({optional:!0});if(c){let _=yield c.getHeartbeatsHeader();_&&s.append("x-firebase-client",_)}let u={fid:n,authVersion:MO,appId:t.appId,sdkVersion:AO},f={method:"POST",headers:s,body:JSON.stringify(u)},p=yield FO(()=>fetch(o,f));if(p.ok){let _=yield p.json();return{fid:_.fid||n,registrationStatus:2,refreshToken:_.refreshToken,authToken:kO(_.authToken)}}else throw yield NO("Create Installation",p)})}function LO(t){return new Promise(e=>{setTimeout(e,t)})}function O8(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var F8=/^[cdef][\w-]{21}$/,Hx="";function L8(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=V8(t);return F8.test(n)?n:Hx}catch{return Hx}}function V8(t){return O8(t).substr(0,22)}function Mv(t){return`${t.appName}!${t.appId}`}var VO=new Map;function BO(t,e){let n=Mv(t);jO(n,e),B8(n,e)}function jO(t,e){let n=VO.get(t);if(n)for(let i of n)i(e)}function B8(t,e){let n=j8();n&&n.postMessage({key:t,fid:e}),U8()}var Cc=null;function j8(){return!Cc&&"BroadcastChannel"in self&&(Cc=new BroadcastChannel("[Firebase] FID Change"),Cc.onmessage=t=>{jO(t.data.key,t.data.fid)}),Cc}function U8(){VO.size===0&&Cc&&(Cc.close(),Cc=null)}var z8="firebase-installations-database",$8=1,xc="firebase-installations-store",zx=null;function Gx(){return zx||(zx=BD(z8,$8,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(xc)}}})),zx}function Av(t,e){return k(this,null,function*(){let n=Mv(t),r=(yield Gx()).transaction(xc,"readwrite"),o=r.objectStore(xc),s=yield o.get(n);return yield o.put(e,n),yield r.done,(!s||s.fid!==e.fid)&&BO(t,e.fid),e})}function UO(t){return k(this,null,function*(){let e=Mv(t),i=(yield Gx()).transaction(xc,"readwrite");yield i.objectStore(xc).delete(e),yield i.done})}function Pv(t,e){return k(this,null,function*(){let n=Mv(t),r=(yield Gx()).transaction(xc,"readwrite"),o=r.objectStore(xc),s=yield o.get(n),c=e(s);return c===void 0?yield o.delete(n):yield o.put(c,n),yield r.done,c&&(!s||s.fid!==c.fid)&&BO(t,c.fid),c})}function Wx(t){return k(this,null,function*(){let e,n=yield Pv(t.appConfig,i=>{let r=H8(i),o=q8(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Hx?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function H8(t){let e=t||{fid:L8(),registrationStatus:0};return zO(e)}function q8(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(Ec.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=G8(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:W8(t)}:{installationEntry:e}}function G8(t,e){return k(this,null,function*(){try{let n=yield N8(t,e);return Av(t.appConfig,n)}catch(n){throw PO(n)&&n.customData.serverCode===409?yield UO(t.appConfig):yield Av(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function W8(t){return k(this,null,function*(){let e=yield xO(t.appConfig);for(;e.registrationStatus===1;)yield LO(100),e=yield xO(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:i}=yield Wx(t);return i||n}return e})}function xO(t){return Pv(t,e=>{if(!e)throw Ec.create("installation-not-found");return zO(e)})}function zO(t){return Z8(t)?{fid:t.fid,registrationStatus:0}:t}function Z8(t){return t.registrationStatus===1&&t.registrationTime+SO<Date.now()}function K8(i,r){return k(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let o=Y8(t,n),s=P8(t,n),c=e.getImmediate({optional:!0});if(c){let _=yield c.getHeartbeatsHeader();_&&s.append("x-firebase-client",_)}let u={installation:{sdkVersion:AO,appId:t.appId}},f={method:"POST",headers:s,body:JSON.stringify(u)},p=yield FO(()=>fetch(o,f));if(p.ok){let _=yield p.json();return kO(_)}else throw yield NO("Generate Auth Token",p)})}function Y8(t,{fid:e}){return`${RO(t)}/${e}/authTokens:generate`}function Zx(t,e=!1){return k(this,null,function*(){let n,i=yield Pv(t.appConfig,o=>{if(!$O(o))throw Ec.create("not-registered");let s=o.authToken;if(!e&&J8(s))return o;if(s.requestStatus===1)return n=Q8(t,e),o;{if(!navigator.onLine)throw Ec.create("app-offline");let c=t9(o);return n=X8(t,c),c}});return n?yield n:i.authToken})}function Q8(t,e){return k(this,null,function*(){let n=yield DO(t.appConfig);for(;n.authToken.requestStatus===1;)yield LO(100),n=yield DO(t.appConfig);let i=n.authToken;return i.requestStatus===0?Zx(t,e):i})}function DO(t){return Pv(t,e=>{if(!$O(e))throw Ec.create("not-registered");let n=e.authToken;return n9(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function X8(t,e){return k(this,null,function*(){try{let n=yield K8(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return yield Av(t.appConfig,i),n}catch(n){if(PO(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield UO(t.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Av(t.appConfig,i)}throw n}})}function $O(t){return t!==void 0&&t.registrationStatus===2}function J8(t){return t.requestStatus===2&&!e9(t)}function e9(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+T8}function t9(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function n9(t){return t.requestStatus===1&&t.requestTime+SO<Date.now()}function i9(t){return k(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:i}=yield Wx(e);return i?i.catch(console.error):Zx(e).catch(console.error),n.fid})}function r9(t,e=!1){return k(this,null,function*(){let n=t;return yield o9(n),(yield Zx(n,e)).token})}function o9(t){return k(this,null,function*(){let{registrationPromise:e}=yield Wx(t);e&&(yield e)})}function s9(t){if(!t||!t.options)throw $x("App Configuration");if(!t.name)throw $x("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw $x(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function $x(t){return Ec.create("missing-app-config-values",{valueName:t})}var HO="installations",a9="installations-internal",c9=t=>{let e=t.getProvider("app").getImmediate(),n=s9(e),i=go(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},l9=t=>{let e=t.getProvider("app").getImmediate(),n=go(e,HO).getImmediate();return{getId:()=>i9(n),getToken:r=>r9(n,r)}};function u9(){er(new gi(HO,c9,"PUBLIC")),er(new gi(a9,l9,"PRIVATE"))}u9();Nt(TO,qx);Nt(TO,qx,"esm2017");var Rv="analytics",d9="firebase_id",h9="origin",f9=60*1e3,p9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tD="https://www.googletagmanager.com/gtag/js";var Xn=new Jc("@firebase/analytics");var m9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ci=new Xc("analytics","Analytics",m9);function g9(t){if(!t.startsWith(tD)){let e=Ci.create("invalid-gtag-resource",{gtagURL:t});return Xn.warn(e.message),""}return t}function QO(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function _9(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function v9(t,e){let n=_9("firebase-js-sdk-policy",{createScriptURL:g9}),i=document.createElement("script"),r=`${tD}?l=${t}&id=${e}`;i.src=n?n?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function y9(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function b9(t,e,n,i,r,o){return k(this,null,function*(){let s=i[r];try{if(s)yield e[s];else{let u=(yield QO(n)).find(f=>f.measurementId===r);u&&(yield e[u.appId])}}catch(c){Xn.error(c)}t("config",r,o)})}function w9(t,e,n,i,r){return k(this,null,function*(){try{let o=[];if(r&&r.send_to){let s=r.send_to;Array.isArray(s)||(s=[s]);let c=yield QO(n);for(let u of s){let f=c.find(_=>_.measurementId===u),p=f&&e[f.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),t("event",i,r||{})}catch(o){Xn.error(o)}})}function I9(t,e,n,i){function r(o,...s){return k(this,null,function*(){try{if(o==="event"){let[c,u]=s;yield w9(t,e,n,c,u)}else if(o==="config"){let[c,u]=s;yield b9(t,e,n,i,c,u)}else if(o==="consent"){let[c,u]=s;t("consent",c,u)}else if(o==="get"){let[c,u,f]=s;t("get",c,u,f)}else if(o==="set"){let[c]=s;t("set",c)}else t(o,...s)}catch(c){Xn.error(c)}})}return r}function C9(t,e,n,i,r){let o=function(...s){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=I9(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function E9(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(tD)&&n.src.includes(t))return n;return null}var x9=30,D9=1e3,Yx=class{constructor(e={},n=D9){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},XO=new Yx;function T9(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function S9(t){return k(this,null,function*(){var e;let{appId:n,apiKey:i}=t,r={method:"GET",headers:T9(i)},o=p9.replace("{app-id}",n),s=yield fetch(o,r);if(s.status!==200&&s.status!==304){let c="";try{let u=yield s.json();!((e=u.error)===null||e===void 0)&&e.message&&(c=u.error.message)}catch{}throw Ci.create("config-fetch-failed",{httpStatus:s.status,responseMessage:c})}return s.json()})}function A9(i){return k(this,arguments,function*(t,e=XO,n){let{appId:r,apiKey:o,measurementId:s}=t.options;if(!r)throw Ci.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:r};throw Ci.create("no-api-key")}let c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Qx;return setTimeout(()=>k(this,null,function*(){u.abort()}),n!==void 0?n:f9),JO({appId:r,apiKey:o,measurementId:s},c,u,e)})}function JO(o,s,c){return k(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=XO){var u;let{appId:f,measurementId:p}=t;try{yield M9(i,e)}catch(_){if(p)return Xn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${_?.message}]`),{appId:f,measurementId:p};throw _}try{let _=yield S9(t);return r.deleteThrottleMetadata(f),_}catch(_){let b=_;if(!P9(b)){if(r.deleteThrottleMetadata(f),p)return Xn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${b?.message}]`),{appId:f,measurementId:p};throw _}let I=Number((u=b?.customData)===null||u===void 0?void 0:u.httpStatus)===503?bp(n,r.intervalMillis,x9):bp(n,r.intervalMillis),S={throttleEndTimeMillis:Date.now()+I,backoffCount:n+1};return r.setThrottleMetadata(f,S),Xn.debug(`Calling attemptFetch again in ${I} millis`),JO(t,S,i,r)}})}function M9(t,e){return new Promise((n,i)=>{let r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(Ci.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function P9(t){if(!(t instanceof Qc)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var Qx=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Xx;function R9(t,e,n,i,r){return k(this,null,function*(){if(r&&r.global){t("event",n,i);return}else{let o=yield e,s=Object.assign(Object.assign({},i),{send_to:o});t("event",n,s)}})}function k9(t,e,n,i){return k(this,null,function*(){if(i&&i.global)return t("set",{user_id:n}),Promise.resolve();{let r=yield e;t("config",r,{update:!0,user_id:n})}})}var Jx;function N9(t){Jx=t}function O9(t){Xx=t}function F9(){return k(this,null,function*(){if(ma())try{yield Wv()}catch(t){return Xn.warn(Ci.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Xn.warn(Ci.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function L9(t,e,n,i,r,o,s){return k(this,null,function*(){var c;let u=A9(t);u.then(I=>{n[I.measurementId]=I.appId,t.options.measurementId&&I.measurementId!==t.options.measurementId&&Xn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Xn.error(I)),e.push(u);let f=F9().then(I=>{if(I)return i.getId()}),[p,_]=yield Promise.all([u,f]);E9(o)||v9(o,p.measurementId),Jx&&(r("consent","default",Jx),N9(void 0)),r("js",new Date);let b=(c=s?.config)!==null&&c!==void 0?c:{};return b[h9]="firebase",b.update=!0,_!=null&&(b[d9]=_),r("config",p.measurementId,b),Xx&&(r("set",Xx),O9(void 0)),p.measurementId})}var eD=class{constructor(e){this.app=e}_delete(){return delete Wu[this.app.options.appId],Promise.resolve()}},Wu={},qO=[],GO={},Kx="dataLayer",V9="gtag",WO,nD,ZO=!1;function B9(){let t=[];if(qv()&&t.push("This is a browser extension environment."),Zv()||t.push("Cookies are not available."),t.length>0){let e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Ci.create("invalid-analytics-context",{errorInfo:e});Xn.warn(n.message)}}function j9(t,e,n){B9();let i=t.options.appId;if(!i)throw Ci.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Xn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ci.create("no-api-key");if(Wu[i]!=null)throw Ci.create("already-exists",{id:i});if(!ZO){y9(Kx);let{wrappedGtag:o,gtagCore:s}=C9(Wu,qO,GO,Kx,V9);nD=o,WO=s,ZO=!0}return Wu[i]=L9(t,qO,GO,e,WO,Kx,n),new eD(t)}function eF(t=rs()){t=Tt(t);let e=go(t,Rv);return e.isInitialized()?e.getImmediate():tF(t)}function tF(t,e={}){let n=go(t,Rv);if(n.isInitialized()){let r=n.getImmediate();if(Ad(e,n.getOptions()))return r;throw Ci.create("already-initialized")}return n.initialize({options:e})}function nF(){return k(this,null,function*(){if(qv()||!Zv()||!ma())return!1;try{return yield Wv()}catch{return!1}})}function iF(t,e,n){t=Tt(t),k9(nD,Wu[t.app.options.appId],e,n).catch(i=>Xn.error(i))}function iD(t,e,n,i){t=Tt(t),R9(nD,Wu[t.app.options.appId],e,n,i).catch(r=>Xn.error(r))}var KO="@firebase/analytics",YO="0.10.4";function U9(){er(new gi(Rv,(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return j9(i,r,n)},"PUBLIC")),er(new gi("analytics-internal",t,"PRIVATE")),Nt(KO,YO),Nt(KO,YO,"esm2017");function t(e){try{let n=e.getProvider(Rv).getImmediate();return{logEvent:(i,r,o)=>iD(n,i,r,o)}}catch(n){throw Ci.create("interop-component-reg-failed",{reason:n})}}}U9();var Dc=class{constructor(e){return e}},sF="analytics",oD=class{constructor(){return Ha(sF)}};var sD="__angularfire_symbol__analyticsIsSupportedValue",aF="__angularfire_symbol__analyticsIsSupported";globalThis[aF]||=nF().then(t=>globalThis[sD]=t).catch(()=>globalThis[sD]=!1);var kv={async:()=>globalThis[aF],sync:()=>{let t=globalThis[sD];if(t===void 0)throw new Error(ZP("Analytics"));return t}},cF=kv.async,lF=fr(eF,!0);var z9=fr(iD,!0);var $9=fr(iF,!0);var cD=(()=>{class t{initialized;disposables=[];constructor(n,i,r){Nt("angularfire",ci.full,"user-tracking");let o;this.initialized=i.runOutsideAngular(()=>new Promise(s=>{o=s})),cF().then(()=>{let s=r.get(Dc);s?this.disposables=[CO(n).subscribe(c=>{$9(s,c?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(i){return new(i||t)(V(Ic),V(pe),V(_t))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})(),H9="firebase_event_origin",q9="firebase_previous_class",G9="firebase_previous_id",W9="firebase_previous_screen",Z9="firebase_screen_class",rF="firebase_screen_id",K9="firebase_screen",aD="outlet",Y9="page_path",Q9="page_title",Nf="screen_class",oF="screen_name",X9="screen_view",J9="auto",e6="#",t6=Math.floor(Math.random()*(2**32-1))-2**31,rD={},n6=t=>{let e=[t[Nf],t[aD]].join(e6);if(rD.hasOwnProperty(e))return rD[e];{let n=t6++;return rD[e]=n,n}},i6=(t,e,n)=>t.events.pipe(St(r=>r instanceof bh)).pipe(ct(r=>{let s=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,b=>b.replace("://",":///"))).root.children[r.snapshot.outlet]?.toString()||"",c=t.routerState.root.children.map(b=>b).find(b=>b.outlet===r.snapshot.outlet);if(!c)return fe(null);let u=c;for(;u.firstChild;)u=u.firstChild;let f=u.pathFromRoot.map(b=>b.routeConfig?.path).filter(b=>b).join("/")||"/",p={[oF]:f,[Y9]:`/${s}`,[H9]:J9,[K9]:f,[aD]:r.snapshot.outlet};e&&(p[Q9]=e.getTitle());let _=c.component;if(_){if(_===_w){let b=r.snapshot;for(;b.firstChild;)b=b.firstChild;_=b.component}}else _=r.snapshot.component;if(typeof _=="string")return fe(It(te({},p),{[Nf]:_}));if(_){let b=n.resolveComponentFactory(_);return fe(It(te({},p),{[Nf]:b.selector}))}return fe(null)}),St(r=>!!r),ye(r=>te({[Z9]:r[Nf],[rF]:n6(r)},r)),py(r=>r[aD]),Ht(r=>r.pipe(us((o,s)=>JSON.stringify(o)===JSON.stringify(s)),Mi(void 0),ds(),ye(([o,s])=>o?te({[q9]:o[Nf],[W9]:o[oF],[G9]:o[rF]},s):s)))),uF=(()=>{class t{disposable;constructor(n,i,r,o,s,c){Nt("angularfire",ci.full,"screen-tracking"),cF().then(()=>{let u=c.get(Dc);!n||!u||o.runOutsideAngular(()=>{this.disposable=i6(n,i,r).pipe(ct(f=>k(this,null,function*(){return s&&(yield s.initialized),z9(u,X9,f)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(i){return new(i||t)(V(Ft,8),V(lg,8),V(Ur),V(pe),V(cD,8),V(_t))};static \u0275prov=ne({token:t,factory:t.\u0275fac})}return t})(),lD=new re("angularfire2.analytics-instances");function r6(t,e){if(!kv.sync())return null;let n=Kl(sF,t,e);return n&&new Dc(n)}function o6(t){return(e,n)=>{if(!kv.sync())return null;let i=e.runOutsideAngular(()=>t(n));return new Dc(i)}}var s6={provide:oD,deps:[[new mn,lD]]},a6={provide:Dc,useFactory:r6,deps:[[new mn,lD],pr]};function dF(t,...e){return Nt("angularfire",ci.full,"analytics"),Fi([a6,s6,{provide:Ol,useValue:kv.async,multi:!0},{provide:lD,useFactory:o6(t),multi:!0,deps:[pe,_t,zi,Ro,...e]}])}var Of=class{constructor(e){return e}},hF="firestore",uD=class{constructor(){return Ha(hF)}};var dD=new re("angularfire2.firestore-instances");function c6(t,e){let n=Kl(hF,t,e);return n&&new Of(n)}function l6(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Of(i)}}var u6={provide:uD,deps:[[new mn,dD]]},d6={provide:Of,useFactory:c6,deps:[[new mn,dD],pr]};function fF(t,...e){return Nt("angularfire",ci.full,"fst"),Fi([d6,u6,{provide:dD,useFactory:l6(t),multi:!0,deps:[pe,_t,zi,Ro,[new mn,kf],[new mn,hr],...e]}])}var pF=fr(Gk,!0);var mF={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},gF={providers:[jP(yO),YP(()=>QP(mF)),IO(()=>EO()),dF(()=>lF()),uF,cD,fF(()=>pF()),{provide:Yl,useValue:mF}]};function h6(t,e){if(t&1){let n=Et();j(0,"app-car-found",2),Ie("hideMap",function(){ft(n);let r=ue(2);return pt(r.switchVisibile(""))}),G()}}function f6(t,e){if(t&1){let n=Et();j(0,"app-my-cars",2),Ie("hideMap",function(){ft(n);let r=ue(2);return pt(r.switchVisibile(""))}),G()}}function p6(t,e){if(t&1){let n=Et();j(0,"app-profile",2),Ie("hideMap",function(){ft(n);let r=ue(2);return pt(r.switchVisibile(""))}),G()}}function m6(t,e){if(t&1){let n=Et();j(0,"app-friends",2),Ie("hideMap",function(){ft(n);let r=ue(2);return pt(r.switchVisibile(""))}),G()}}function g6(t,e){if(t&1&&(J(0),de(1,"app-when-moving")),t&2){let n=ue(2);Ke(" ",n.speed," ")}}function _6(t,e){if(t&1){let n=Et();j(0,"app-garage",2),Ie("hideMap",function(){ft(n);let r=ue(2);return pt(r.switchVisibile(""))}),G()}}function v6(t,e){if(t&1){let n=Et();j(0,"div",1)(1,"app-leaflat-map",2),Ie("hideMap",function(){ft(n);let r=ue();return pt(r.switchVisibile(""))}),G(),Pe(2,h6,1,0,"app-car-found")(3,f6,1,0,"app-my-cars")(4,p6,1,0)(5,m6,1,0)(6,g6,2,1)(7,_6,1,0),G()}if(t&2){let n=ue();H(),Ce("display",n.visible?"block":"none"),H(),$e(2,!n.visible&&n.currentVisible=="carFound"?2:-1),H(),$e(3,!n.visible&&n.currentVisible=="garage"?3:!n.visible&&n.currentVisible=="profile"?4:!n.visible&&n.currentVisible=="friends"?5:!n.visible&&n.currentVisible=="whenMoving"?6:!n.visible&&n.currentVisible=="garageClick"?7:-1)}}function y6(t,e){t&1&&de(0,"router-outlet")}function b6(t,e){if(t&1){let n=Et();j(0,"div"),J(1),de(2,"hr"),j(3,"button",4),Ie("click",function(){ft(n);let r=ue(2);return pt(r.auth.signOut())}),J(4,"Sign Out"),G()()}if(t&2){let n=e.ngIf;H(),Ke(" ",n.jsonData,`
`)}}function w6(t,e){if(t&1){let n=Et();j(0,"button",4),Ie("click",function(){ft(n);let r=ue(2);return pt(r.signIn())}),J(1,"Login"),G(),de(2,"br")(3,"br")}}function I6(t,e){if(t&1&&(Pe(0,b6,5,1,"div",3),ai(1,"async"),Pe(2,w6,4,0,"ng-template",null,0,mM)),t&2){let n=Jm(3),i=ue();je("ngIf",Bi(1,2,i.auth.user$))("ngIfElse",n)}}var _F=(()=>{let e=class e{constructor(i,r,o){this.auth=i,this.router=r,this.coin=o,this.key=localStorage.getItem("key"),this.title="world-clicker",this.visible=!0}signIn(){this.auth.googleSignin(),setInterval(()=>{localStorage.getItem("key")&&window.location.reload()},500)}ngOnInit(){setInterval(()=>{console.log(this.coin.getCps(),5),console.log("moin"),this.coin.addSingleCoin(this.coin.cps)},1e3),this.myCars=JSON.parse(localStorage.getItem("mycars")),navigator.geolocation.watchPosition(i=>{let r=i.coords.speed*3.6;console.log("hier",r),this.speed=r;var o;r>25?(o=!0,this.switchVisibile("whenMoving")):o==!0&&(this.switchVisibile("exit"),o=!1)}),console.log(this.auth.user$,this.auth.currentUser),this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps")}),setInterval(()=>{var i=new Date().getTime()/1e3;this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps"),update:i,user:JSON.parse(localStorage.getItem("userData")),garages:JSON.parse(localStorage.getItem("garages")),friends:JSON.parse(localStorage.getItem("friends"))})},25e3)}updateUserDat(i){this.auth.addDataToUser(i)}switchVisibile(i){i=="exit"&&(this.visible=!0,this.currentVisible="exit",this.router.navigate([""])),i!="exit"&&(this.visible=!1,this.currentVisible=i,this.router.navigate([i])),console.log(i),console.log(this.visible),console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(ce(Rn),ce(Ft),ce(Ys))},e.\u0275cmp=it({type:e,selectors:[["app-root"]],standalone:!0,features:[dt],decls:3,vars:2,consts:[["login",""],[1,"App"],[3,"hideMap"],[4,"ngIf","ngIfElse"],[1,"button",3,"click"]],template:function(r,o){r&1&&Pe(0,v6,8,4,"div",1)(1,y6,1,0,"router-outlet")(2,I6,4,4),r&2&&($e(0,(o.key,-1)),H(),$e(1,o.key?1:2))},dependencies:[Tv,gw,Cv,Dv,Sv,So,LM,BM,hv,xv,Ev,qP,mN],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.App[_ngcontent-%COMP%]{text-align:center}app-leaflet-map[_ngcontent-%COMP%]{height:100%}.push[_ngcontent-%COMP%]{height:calc(100% - 150px)}app-navigation[_ngcontent-%COMP%]{width:100%;height:100px;left:0;z-index:545}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}button[_ngcontent-%COMP%]{position:absolute;left:30%;top:45vh}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}"]});let t=e;return t})();XM(_F,gF).catch(t=>console.error(t));
