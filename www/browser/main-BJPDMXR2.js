import{A as Fo,B as li,C as O_,a as ne,b as Mt,c as XR,d as JR,e as P_,f as U,g as vE,h as Rf,i as yE,j as bE,k as wE,l as k_,m as IE,n as Wu,o as R_,p as Nf,q as CE,r as EE,s as N_,t as Ht,u as zs,v as gr,w as Of,x as Zu,y as xE,z as DE}from"./chunk-JHDVRTR6.js";var xA=XR((Um,EA)=>{(function(t,e){typeof Um=="object"&&typeof EA<"u"?e(Um):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.leaflet={}))})(Um,function(t){"use strict";var e="1.9.4";function n(s){var l,h,m,v;for(h=1,m=arguments.length;h<m;h++){v=arguments[h];for(l in v)s[l]=v[l]}return s}var i=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function r(s,l){var h=Array.prototype.slice;if(s.bind)return s.bind.apply(s,h.call(arguments,1));var m=h.call(arguments,2);return function(){return s.apply(l,m.length?m.concat(h.call(arguments)):arguments)}}var o=0;function a(s){return"_leaflet_id"in s||(s._leaflet_id=++o),s._leaflet_id}function c(s,l,h){var m,v,w,D;return D=function(){m=!1,v&&(w.apply(h,v),v=!1)},w=function(){m?v=arguments:(s.apply(h,arguments),setTimeout(D,l),m=!0)},w}function u(s,l,h){var m=l[1],v=l[0],w=m-v;return s===m&&h?s:((s-v)%w+w)%w+v}function f(){return!1}function p(s,l){if(l===!1)return s;var h=Math.pow(10,l===void 0?6:l);return Math.round(s*h)/h}function _(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function b(s){return _(s).split(/\s+/)}function I(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?i(s.options):{});for(var h in l)s.options[h]=l[h];return s.options}function M(s,l,h){var m=[];for(var v in s)m.push(encodeURIComponent(h?v.toUpperCase():v)+"="+encodeURIComponent(s[v]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var P=/\{ *([\w_ -]+) *\}/g;function F(s,l){return s.replace(P,function(h,m){var v=l[m];if(v===void 0)throw new Error("No value provided for variable "+h);return typeof v=="function"&&(v=v(l)),v})}var W=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function X(s,l){for(var h=0;h<s.length;h++)if(s[h]===l)return h;return-1}var Z="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function se(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var pe=0;function he(s){var l=+new Date,h=Math.max(0,16-(l-pe));return pe=l+h,window.setTimeout(s,h)}var S=window.requestAnimationFrame||se("RequestAnimationFrame")||he,E=window.cancelAnimationFrame||se("CancelAnimationFrame")||se("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function x(s,l,h){if(h&&S===he)s.call(l);else return S.call(window,r(s,l))}function A(s){s&&E.call(window,s)}var k={__proto__:null,extend:n,create:i,bind:r,get lastId(){return o},stamp:a,throttle:c,wrapNum:u,falseFn:f,formatNum:p,trim:_,splitWords:b,setOptions:I,getParamString:M,template:F,isArray:W,indexOf:X,emptyImageUrl:Z,requestFn:S,cancelFn:E,requestAnimFrame:x,cancelAnimFrame:A};function N(){}N.extend=function(s){var l=function(){I(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},h=l.__super__=this.prototype,m=i(h);m.constructor=l,l.prototype=m;for(var v in this)Object.prototype.hasOwnProperty.call(this,v)&&v!=="prototype"&&v!=="__super__"&&(l[v]=this[v]);return s.statics&&n(l,s.statics),s.includes&&(T(s.includes),n.apply(null,[m].concat(s.includes))),n(m,s),delete m.statics,delete m.includes,m.options&&(m.options=h.options?i(h.options):{},n(m.options,s.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){h.callInitHooks&&h.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,D=m._initHooks.length;w<D;w++)m._initHooks[w].call(this)}},l},N.include=function(s){var l=this.prototype.options;return n(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},N.mergeOptions=function(s){return n(this.prototype.options,s),this},N.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),h=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(h),this};function T(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=W(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var jt={on:function(s,l,h){if(typeof s=="object")for(var m in s)this._on(m,s[m],l);else{s=b(s);for(var v=0,w=s.length;v<w;v++)this._on(s[v],l,h)}return this},off:function(s,l,h){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var m in s)this._off(m,s[m],l);else{s=b(s);for(var v=arguments.length===1,w=0,D=s.length;w<D;w++)v?this._off(s[w]):this._off(s[w],l,h)}return this},_on:function(s,l,h,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,h)===!1){h===this&&(h=void 0);var v={fn:l,ctx:h};m&&(v.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(v)}},_off:function(s,l,h){var m,v,w;if(this._events&&(m=this._events[s],!!m)){if(arguments.length===1){if(this._firingCount)for(v=0,w=m.length;v<w;v++)m[v].fn=f;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var D=this._listens(s,l,h);if(D!==!1){var O=m[D];this._firingCount&&(O.fn=f,this._events[s]=m=m.slice()),m.splice(D,1)}}},fire:function(s,l,h){if(!this.listens(s,h))return this;var m=n({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var v=this._events[s];if(v){this._firingCount=this._firingCount+1||1;for(var w=0,D=v.length;w<D;w++){var O=v[w],j=O.fn;O.once&&this.off(s,j,O.ctx),j.call(O.ctx||this,m)}this._firingCount--}}return h&&this._propagateEvent(m),this},listens:function(s,l,h,m){typeof s!="string"&&console.warn('"string" type argument expected');var v=l;typeof l!="function"&&(m=!!l,v=void 0,h=void 0);var w=this._events&&this._events[s];if(w&&w.length&&this._listens(s,v,h)!==!1)return!0;if(m){for(var D in this._eventParents)if(this._eventParents[D].listens(s,l,h,m))return!0}return!1},_listens:function(s,l,h){if(!this._events)return!1;var m=this._events[s]||[];if(!l)return!!m.length;h===this&&(h=void 0);for(var v=0,w=m.length;v<w;v++)if(m[v].fn===l&&m[v].ctx===h)return v;return!1},once:function(s,l,h){if(typeof s=="object")for(var m in s)this._on(m,s[m],l,!0);else{s=b(s);for(var v=0,w=s.length;v<w;v++)this._on(s[v],l,h,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[a(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[a(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,n({layer:s.target,propagatedFrom:s.target},s),!0)}};jt.addEventListener=jt.on,jt.removeEventListener=jt.clearAllEventListeners=jt.off,jt.addOneTimeEventListener=jt.once,jt.fireEvent=jt.fire,jt.hasEventListeners=jt.listens;var Bi=N.extend(jt);function Pe(s,l,h){this.x=h?Math.round(s):s,this.y=h?Math.round(l):l}var Co=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};Pe.prototype={clone:function(){return new Pe(this.x,this.y)},add:function(s){return this.clone()._add(Ce(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(Ce(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new Pe(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new Pe(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Co(this.x),this.y=Co(this.y),this},distanceTo:function(s){s=Ce(s);var l=s.x-this.x,h=s.y-this.y;return Math.sqrt(l*l+h*h)},equals:function(s){return s=Ce(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=Ce(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+p(this.x)+", "+p(this.y)+")"}};function Ce(s,l,h){return s instanceof Pe?s:W(s)?new Pe(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new Pe(s.x,s.y):new Pe(s,l,h)}function Ct(s,l){if(s)for(var h=l?[s,l]:s,m=0,v=h.length;m<v;m++)this.extend(h[m])}Ct.prototype={extend:function(s){var l,h;if(!s)return this;if(s instanceof Pe||typeof s[0]=="number"||"x"in s)l=h=Ce(s);else if(s=wn(s),l=s.min,h=s.max,!l||!h)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=h.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(h.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(h.y,this.max.y)),this},getCenter:function(s){return Ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return Ce(this.min.x,this.max.y)},getTopRight:function(){return Ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,h;return typeof s[0]=="number"||s instanceof Pe?s=Ce(s):s=wn(s),s instanceof Ct?(l=s.min,h=s.max):l=h=s,l.x>=this.min.x&&h.x<=this.max.x&&l.y>=this.min.y&&h.y<=this.max.y},intersects:function(s){s=wn(s);var l=this.min,h=this.max,m=s.min,v=s.max,w=v.x>=l.x&&m.x<=h.x,D=v.y>=l.y&&m.y<=h.y;return w&&D},overlaps:function(s){s=wn(s);var l=this.min,h=this.max,m=s.min,v=s.max,w=v.x>l.x&&m.x<h.x,D=v.y>l.y&&m.y<h.y;return w&&D},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,h=this.max,m=Math.abs(l.x-h.x)*s,v=Math.abs(l.y-h.y)*s;return wn(Ce(l.x-m,l.y-v),Ce(h.x+m,h.y+v))},equals:function(s){return s?(s=wn(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function wn(s,l){return!s||s instanceof Ct?s:new Ct(s,l)}function Sn(s,l){if(s)for(var h=l?[s,l]:s,m=0,v=h.length;m<v;m++)this.extend(h[m])}Sn.prototype={extend:function(s){var l=this._southWest,h=this._northEast,m,v;if(s instanceof Se)m=s,v=s;else if(s instanceof Sn){if(m=s._southWest,v=s._northEast,!m||!v)return this}else return s?this.extend(Ye(s)||_t(s)):this;return!l&&!h?(this._southWest=new Se(m.lat,m.lng),this._northEast=new Se(v.lat,v.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),h.lat=Math.max(v.lat,h.lat),h.lng=Math.max(v.lng,h.lng)),this},pad:function(s){var l=this._southWest,h=this._northEast,m=Math.abs(l.lat-h.lat)*s,v=Math.abs(l.lng-h.lng)*s;return new Sn(new Se(l.lat-m,l.lng-v),new Se(h.lat+m,h.lng+v))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Se||"lat"in s?s=Ye(s):s=_t(s);var l=this._southWest,h=this._northEast,m,v;return s instanceof Sn?(m=s.getSouthWest(),v=s.getNorthEast()):m=v=s,m.lat>=l.lat&&v.lat<=h.lat&&m.lng>=l.lng&&v.lng<=h.lng},intersects:function(s){s=_t(s);var l=this._southWest,h=this._northEast,m=s.getSouthWest(),v=s.getNorthEast(),w=v.lat>=l.lat&&m.lat<=h.lat,D=v.lng>=l.lng&&m.lng<=h.lng;return w&&D},overlaps:function(s){s=_t(s);var l=this._southWest,h=this._northEast,m=s.getSouthWest(),v=s.getNorthEast(),w=v.lat>l.lat&&m.lat<h.lat,D=v.lng>l.lng&&m.lng<h.lng;return w&&D},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=_t(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function _t(s,l){return s instanceof Sn?s:new Sn(s,l)}function Se(s,l,h){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,h!==void 0&&(this.alt=+h)}Se.prototype={equals:function(s,l){if(!s)return!1;s=Ye(s);var h=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return h<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+p(this.lat,s)+", "+p(this.lng,s)+")"},distanceTo:function(s){return sr.distance(this,Ye(s))},wrap:function(){return sr.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,h=l/Math.cos(Math.PI/180*this.lat);return _t([this.lat-l,this.lng-h],[this.lat+l,this.lng+h])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function Ye(s,l,h){return s instanceof Se?s:W(s)&&typeof s[0]!="object"?s.length===3?new Se(s[0],s[1],s[2]):s.length===2?new Se(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Se(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Se(s,l,h)}var Nn={latLngToPoint:function(s,l){var h=this.projection.project(s),m=this.scale(l);return this.transformation._transform(h,m)},pointToLatLng:function(s,l){var h=this.scale(l),m=this.transformation.untransform(s,h);return this.projection.unproject(m)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,h=this.scale(s),m=this.transformation.transform(l.min,h),v=this.transformation.transform(l.max,h);return new Ct(m,v)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?u(s.lng,this.wrapLng,!0):s.lng,h=this.wrapLat?u(s.lat,this.wrapLat,!0):s.lat,m=s.alt;return new Se(h,l,m)},wrapLatLngBounds:function(s){var l=s.getCenter(),h=this.wrapLatLng(l),m=l.lat-h.lat,v=l.lng-h.lng;if(m===0&&v===0)return s;var w=s.getSouthWest(),D=s.getNorthEast(),O=new Se(w.lat-m,w.lng-v),j=new Se(D.lat-m,D.lng-v);return new Sn(O,j)}},sr=n({},Nn,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var h=Math.PI/180,m=s.lat*h,v=l.lat*h,w=Math.sin((l.lat-s.lat)*h/2),D=Math.sin((l.lng-s.lng)*h/2),O=w*w+Math.cos(m)*Math.cos(v)*D*D,j=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*j}}),Eo=6378137,fu={R:Eo,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,h=this.MAX_LATITUDE,m=Math.max(Math.min(h,s.lat),-h),v=Math.sin(m*l);return new Pe(this.R*s.lng*l,this.R*Math.log((1+v)/(1-v))/2)},unproject:function(s){var l=180/Math.PI;return new Se((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Eo*Math.PI;return new Ct([-s,-s],[s,s])}()};function pu(s,l,h,m){if(W(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=h,this._d=m}pu.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new Pe((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function ar(s,l,h,m){return new pu(s,l,h,m)}var xo=n({},sr,{code:"EPSG:3857",projection:fu,transformation:function(){var s=.5/(Math.PI*fu.R);return ar(s,.5,-s,.5)}()}),mu=n({},xo,{code:"EPSG:900913"});function Qa(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function Ya(s,l){var h="",m,v,w,D,O,j;for(m=0,w=s.length;m<w;m++){for(O=s[m],v=0,D=O.length;v<D;v++)j=O[v],h+=(v?"L":"M")+j.x+" "+j.y;h+=l?fe.svg?"z":"x":""}return h||"M0 0"}var Cs=document.documentElement.style,Es="ActiveXObject"in window,Kh=Es&&!document.addEventListener,Qh="msLaunchUri"in navigator&&!("documentMode"in document),Xa=ii("webkit"),gu=ii("android"),Ja=ii("android 2")||ii("android 3"),Yh=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),I_=gu&&ii("Google")&&Yh<537&&!("AudioNode"in window),xs=!!window.opera,ec=!Qh&&ii("chrome"),tc=ii("gecko")&&!Xa&&!xs&&!Es,pn=!ec&&ii("safari"),mn=ii("phantom"),Ds="OTransition"in Cs,Xh=navigator.platform.indexOf("Win")===0,_u=Es&&"transition"in Cs,vu="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ja,Do="MozPerspective"in Cs,Jh=!window.L_DISABLE_3D&&(_u||vu||Do)&&!Ds&&!mn,To=typeof orientation<"u"||ii("mobile"),yu=To&&Xa,C_=To&&vu,ef=!window.PointerEvent&&window.MSPointerEvent,nc=!!(window.PointerEvent||ef),bu="ontouchstart"in window||!!window.TouchEvent,tf=!window.L_NO_TOUCH&&(bu||nc),Ts=To&&xs,wu=To&&tc,Iu=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Hr=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",f,l),window.removeEventListener("testPassiveEventSupport",f,l)}catch{}return s}(),nf=function(){return!!document.createElement("canvas").getContext}(),So=!!(document.createElementNS&&Qa("svg").createSVGRect),rf=!!So&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ss=!So&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),of=navigator.platform.indexOf("Mac")===0,In=navigator.platform.indexOf("Linux")===0;function ii(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var fe={ie:Es,ielt9:Kh,edge:Qh,webkit:Xa,android:gu,android23:Ja,androidStock:I_,opera:xs,chrome:ec,gecko:tc,safari:pn,phantom:mn,opera12:Ds,win:Xh,ie3d:_u,webkit3d:vu,gecko3d:Do,any3d:Jh,mobile:To,mobileWebkit:yu,mobileWebkit3d:C_,msPointer:ef,pointer:nc,touch:tf,touchNative:bu,mobileOpera:Ts,mobileGecko:wu,retina:Iu,passiveEvents:Hr,canvas:nf,svg:So,vml:Ss,inlineSvg:rf,mac:of,linux:In},Ao=fe.msPointer?"MSPointerDown":"pointerdown",sf=fe.msPointer?"MSPointerMove":"pointermove",af=fe.msPointer?"MSPointerUp":"pointerup",$r=fe.msPointer?"MSPointerCancel":"pointercancel",Cu={touchstart:Ao,touchmove:sf,touchend:af,touchcancel:$r},cf={touchstart:uf,touchmove:Mo,touchend:Mo,touchcancel:Mo},ji={},Eu=!1;function xu(s,l,h){return l==="touchstart"&&Tu(),cf[l]?(h=cf[l].bind(this,h),s.addEventListener(Cu[l],h,!1),h):(console.warn("wrong event specified:",l),f)}function ic(s,l,h){if(!Cu[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Cu[l],h,!1)}function cr(s){ji[s.pointerId]=s}function lf(s){ji[s.pointerId]&&(ji[s.pointerId]=s)}function Du(s){delete ji[s.pointerId]}function Tu(){Eu||(document.addEventListener(Ao,cr,!0),document.addEventListener(sf,lf,!0),document.addEventListener(af,Du,!0),document.addEventListener($r,Du,!0),Eu=!0)}function Mo(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var h in ji)l.touches.push(ji[h]);l.changedTouches=[l],s(l)}}function uf(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Ut(l),Mo(s,l)}function df(s){var l={},h,m;for(m in s)h=s[m],l[m]=h&&h.bind?h.bind(s):h;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var E_=200;function rc(s,l){s.addEventListener("dblclick",l);var h=0,m;function v(w){if(w.detail!==1){m=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var D=Lu(w);if(!(D.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!D.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var O=Date.now();O-h<=E_?(m++,m===2&&l(df(w))):m=1,h=O}}}return s.addEventListener("click",v),{dblclick:l,simDblclick:v}}function hf(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var As=gi(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zi=gi(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),lr=zi==="webkitTransition"||zi==="OTransition"?zi+"End":"transitionend";function oc(s){return typeof s=="string"?document.getElementById(s):s}function Ms(s,l){var h=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!h||h==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(s,null);h=m?m[l]:null}return h==="auto"?null:h}function et(s,l,h){var m=document.createElement(s);return m.className=l||"",h&&h.appendChild(m),m}function St(s){var l=s.parentNode;l&&l.removeChild(s)}function Ps(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function ur(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function dr(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function sc(s,l){if(s.classList!==void 0)return s.classList.contains(l);var h=ks(s);return h.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(h)}function Ne(s,l){if(s.classList!==void 0)for(var h=b(l),m=0,v=h.length;m<v;m++)s.classList.add(h[m]);else if(!sc(s,l)){var w=ks(s);Su(s,(w?w+" ":"")+l)}}function zt(s,l){s.classList!==void 0?s.classList.remove(l):Su(s,_((" "+ks(s)+" ").replace(" "+l+" "," ")))}function Su(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function ks(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function On(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&x_(s,l)}function x_(s,l){var h=!1,m="DXImageTransform.Microsoft.Alpha";try{h=s.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),h?(h.Enabled=l!==100,h.Opacity=l):s.style.filter+=" progid:"+m+"(opacity="+l+")"}function gi(s){for(var l=document.documentElement.style,h=0;h<s.length;h++)if(s[h]in l)return s[h];return!1}function Cn(s,l,h){var m=l||new Pe(0,0);s.style[As]=(fe.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(h?" scale("+h+")":"")}function Nt(s,l){s._leaflet_pos=l,fe.any3d?Cn(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function _i(s){return s._leaflet_pos||new Pe(0,0)}var Po,dt,ko;if("onselectstart"in document)Po=function(){Ae(window,"selectstart",Ut)},dt=function(){vt(window,"selectstart",Ut)};else{var Ui=gi(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Po=function(){if(Ui){var s=document.documentElement.style;ko=s[Ui],s[Ui]="none"}},dt=function(){Ui&&(document.documentElement.style[Ui]=ko,ko=void 0)}}function qr(){Ae(window,"dragstart",Ut)}function Au(){vt(window,"dragstart",Ut)}var Rs,Mu;function Pu(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ac(),Rs=s,Mu=s.style.outlineStyle,s.style.outlineStyle="none",Ae(window,"keydown",ac))}function ac(){Rs&&(Rs.style.outlineStyle=Mu,Rs=void 0,Mu=void 0,vt(window,"keydown",ac))}function ff(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Gr(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var hr={__proto__:null,TRANSFORM:As,TRANSITION:zi,TRANSITION_END:lr,get:oc,getStyle:Ms,create:et,remove:St,empty:Ps,toFront:ur,toBack:dr,hasClass:sc,addClass:Ne,removeClass:zt,setClass:Su,getClass:ks,setOpacity:On,testProp:gi,setTransform:Cn,setPosition:Nt,getPosition:_i,get disableTextSelection(){return Po},get enableTextSelection(){return dt},disableImageDrag:qr,enableImageDrag:Au,preventOutline:Pu,restoreOutline:ac,getSizedParentNode:ff,getScale:Gr};function Ae(s,l,h,m){if(l&&typeof l=="object")for(var v in l)Ru(s,v,l[v],h);else{l=b(l);for(var w=0,D=l.length;w<D;w++)Ru(s,l[w],h,m)}return this}var ri="_leaflet_events";function vt(s,l,h,m){if(arguments.length===1)Wr(s),delete s[ri];else if(l&&typeof l=="object")for(var v in l)Nu(s,v,l[v],h);else if(l=b(l),arguments.length===2)Wr(s,function(O){return X(l,O)!==-1});else for(var w=0,D=l.length;w<D;w++)Nu(s,l[w],h,m);return this}function Wr(s,l){for(var h in s[ri]){var m=h.split(/\d/)[0];(!l||l(m))&&Nu(s,m,null,null,h)}}var ku={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ru(s,l,h,m){var v=l+a(h)+(m?"_"+a(m):"");if(s[ri]&&s[ri][v])return this;var w=function(O){return h.call(m||s,O||window.event)},D=w;!fe.touchNative&&fe.pointer&&l.indexOf("touch")===0?w=xu(s,l,w):fe.touch&&l==="dblclick"?w=rc(s,w):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(ku[l]||l,w,fe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(w=function(O){O=O||window.event,Ls(s,O)&&D(O)},s.addEventListener(ku[l],w,!1)):s.addEventListener(l,D,!1):s.attachEvent("on"+l,w),s[ri]=s[ri]||{},s[ri][v]=w}function Nu(s,l,h,m,v){v=v||l+a(h)+(m?"_"+a(m):"");var w=s[ri]&&s[ri][v];if(!w)return this;!fe.touchNative&&fe.pointer&&l.indexOf("touch")===0?ic(s,l,w):fe.touch&&l==="dblclick"?hf(s,w):"removeEventListener"in s?s.removeEventListener(ku[l]||l,w,!1):s.detachEvent("on"+l,w),s[ri][v]=null}function An(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Ou(s){return Ru(s,"wheel",An),this}function Ns(s){return Ae(s,"mousedown touchstart dblclick contextmenu",An),s._leaflet_disable_click=!0,this}function Ut(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function vi(s){return Ut(s),An(s),this}function Lu(s){if(s.composedPath)return s.composedPath();for(var l=[],h=s.target;h;)l.push(h),h=h.parentNode;return l}function Ro(s,l){if(!l)return new Pe(s.clientX,s.clientY);var h=Gr(l),m=h.boundingClientRect;return new Pe((s.clientX-m.left)/h.x-l.clientLeft,(s.clientY-m.top)/h.y-l.clientTop)}var Os=fe.linux&&fe.chrome?window.devicePixelRatio:fe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Fu(s){return fe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Os:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Ls(s,l){var h=l.relatedTarget;if(!h)return!0;try{for(;h&&h!==s;)h=h.parentNode}catch{return!1}return h!==s}var Ft={__proto__:null,on:Ae,off:vt,stopPropagation:An,disableScrollPropagation:Ou,disableClickPropagation:Ns,preventDefault:Ut,stop:vi,getPropagationPath:Lu,getMousePosition:Ro,getWheelDelta:Fu,isExternalTarget:Ls,addListener:Ae,removeListener:vt},pf=Bi.extend({run:function(s,l,h,m){this.stop(),this._el=s,this._inProgress=!0,this._duration=h||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=_i(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,h=this._duration*1e3;l<h?this._runFrame(this._easeOut(l/h),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var h=this._startPos.add(this._offset.multiplyBy(s));l&&h._round(),Nt(this._el,h),this.fire("step")},_complete:function(){A(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Xe=Bi.extend({options:{crs:xo,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=I(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(Ye(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zi&&fe.any3d&&!fe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,lr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,h){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(Ye(s),l,this.options.maxBounds),h=h||{},this._stop(),this._loaded&&!h.reset&&h!==!0){h.animate!==void 0&&(h.zoom=n({animate:h.animate},h.zoom),h.pan=n({animate:h.animate,duration:h.duration},h.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,h.zoom):this._tryAnimatedPan(s,h.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,h.pan&&h.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(fe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,h){var m=this.getZoomScale(l),v=this.getSize().divideBy(2),w=s instanceof Pe?s:this.latLngToContainerPoint(s),D=w.subtract(v).multiplyBy(1-1/m),O=this.containerPointToLatLng(v.add(D));return this.setView(O,l,{zoom:h})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():_t(s);var h=Ce(l.paddingTopLeft||l.padding||[0,0]),m=Ce(l.paddingBottomRight||l.padding||[0,0]),v=this.getBoundsZoom(s,!1,h.add(m));if(v=typeof l.maxZoom=="number"?Math.min(l.maxZoom,v):v,v===1/0)return{center:s.getCenter(),zoom:v};var w=m.subtract(h).divideBy(2),D=this.project(s.getSouthWest(),v),O=this.project(s.getNorthEast(),v),j=this.unproject(D.add(O).divideBy(2).add(w),v);return{center:j,zoom:v}},fitBounds:function(s,l){if(s=_t(s),!s.isValid())throw new Error("Bounds are not valid.");var h=this._getBoundsCenterZoom(s,l);return this.setView(h.center,h.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=Ce(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pf,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Ne(this._mapPane,"leaflet-pan-anim");var h=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,h,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,h){if(h=h||{},h.animate===!1||!fe.any3d)return this.setView(s,l,h);this._stop();var m=this.project(this.getCenter()),v=this.project(s),w=this.getSize(),D=this._zoom;s=Ye(s),l=l===void 0?D:l;var O=Math.max(w.x,w.y),j=O*this.getZoomScale(D,l),Q=v.distanceTo(m)||1,ae=1.42,Ee=ae*ae;function Ge(nn){var kf=nn?-1:1,ZR=nn?j:O,KR=j*j-O*O+kf*Ee*Ee*Q*Q,QR=2*ZR*Ee*Q,M_=KR/QR,_E=Math.sqrt(M_*M_+1)-M_,YR=_E<1e-9?-18:Math.log(_E);return YR}function Fn(nn){return(Math.exp(nn)-Math.exp(-nn))/2}function _n(nn){return(Math.exp(nn)+Math.exp(-nn))/2}function yi(nn){return Fn(nn)/_n(nn)}var Gn=Ge(0);function yc(nn){return O*(_n(Gn)/_n(Gn+ae*nn))}function $R(nn){return O*(_n(Gn)*yi(Gn+ae*nn)-Fn(Gn))/Ee}function qR(nn){return 1-Math.pow(1-nn,1.5)}var GR=Date.now(),mE=(Ge(1)-Gn)/ae,WR=h.duration?1e3*h.duration:1e3*mE*.8;function gE(){var nn=(Date.now()-GR)/WR,kf=qR(nn)*mE;nn<=1?(this._flyToFrame=x(gE,this),this._move(this.unproject(m.add(v.subtract(m).multiplyBy($R(kf)/Q)),D),this.getScaleZoom(O/yc(kf),D),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,h.noMoveStart),gE.call(this),this},flyToBounds:function(s,l){var h=this._getBoundsCenterZoom(s,l);return this.flyTo(h.center,h.zoom,l)},setMaxBounds:function(s){return s=_t(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var h=this.getCenter(),m=this._limitCenter(h,this._zoom,_t(s));return h.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var h=Ce(l.paddingTopLeft||l.padding||[0,0]),m=Ce(l.paddingBottomRight||l.padding||[0,0]),v=this.project(this.getCenter()),w=this.project(s),D=this.getPixelBounds(),O=wn([D.min.add(h),D.max.subtract(m)]),j=O.getSize();if(!O.contains(w)){this._enforcingBounds=!0;var Q=w.subtract(O.getCenter()),ae=O.extend(w).getSize().subtract(j);v.x+=Q.x<0?-ae.x:ae.x,v.y+=Q.y<0?-ae.y:ae.y,this.panTo(this.unproject(v),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=n({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var h=this.getSize(),m=l.divideBy(2).round(),v=h.divideBy(2).round(),w=m.subtract(v);return!w.x&&!w.y?this:(s.animate&&s.pan?this.panBy(w):(s.pan&&this._rawPanBy(w),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:h}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=n({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=r(this._handleGeolocationResponse,this),h=r(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,h,s):navigator.geolocation.getCurrentPosition(l,h,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,h=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+h+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,h=s.coords.longitude,m=new Se(l,h),v=m.toBounds(s.coords.accuracy*2),w=this._locateOptions;if(w.setView){var D=this.getBoundsZoom(v);this.setView(m,w.maxZoom?Math.min(D,w.maxZoom):D)}var O={latlng:m,bounds:v,timestamp:s.timestamp};for(var j in s.coords)typeof s.coords[j]=="number"&&(O[j]=s.coords[j]);this.fire("locationfound",O)}},addHandler:function(s,l){if(!l)return this;var h=this[s]=new l(this);return this._handlers.push(h),this.options[s]&&h.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),St(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(A(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)St(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var h="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),m=et("div",h,l||this._mapPane);return s&&(this._panes[s]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),h=this.unproject(s.getTopRight());return new Sn(l,h)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,h){s=_t(s),h=Ce(h||[0,0]);var m=this.getZoom()||0,v=this.getMinZoom(),w=this.getMaxZoom(),D=s.getNorthWest(),O=s.getSouthEast(),j=this.getSize().subtract(h),Q=wn(this.project(O,m),this.project(D,m)).getSize(),ae=fe.any3d?this.options.zoomSnap:1,Ee=j.x/Q.x,Ge=j.y/Q.y,Fn=l?Math.max(Ee,Ge):Math.min(Ee,Ge);return m=this.getScaleZoom(Fn,m),ae&&(m=Math.round(m/(ae/100))*(ae/100),m=l?Math.ceil(m/ae)*ae:Math.floor(m/ae)*ae),Math.max(v,Math.min(w,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Pe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var h=this._getTopLeftPoint(s,l);return new Ct(h,h.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var h=this.options.crs;return l=l===void 0?this._zoom:l,h.scale(s)/h.scale(l)},getScaleZoom:function(s,l){var h=this.options.crs;l=l===void 0?this._zoom:l;var m=h.zoom(s*h.scale(l));return isNaN(m)?1/0:m},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(Ye(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(Ce(s),l)},layerPointToLatLng:function(s){var l=Ce(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(Ye(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(Ye(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(_t(s))},distance:function(s,l){return this.options.crs.distance(Ye(s),Ye(l))},containerPointToLayerPoint:function(s){return Ce(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return Ce(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(Ce(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ye(s)))},mouseEventToContainerPoint:function(s){return Ro(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=oc(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ae(l,"scroll",this._onScroll,this),this._containerId=a(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&fe.any3d,Ne(s,"leaflet-container"+(fe.touch?" leaflet-touch":"")+(fe.retina?" leaflet-retina":"")+(fe.ielt9?" leaflet-oldie":"")+(fe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ms(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Nt(this._mapPane,new Pe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ne(s.markerPane,"leaflet-zoom-hide"),Ne(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,h){Nt(this._mapPane,new Pe(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var v=this._zoom!==l;this._moveStart(v,h)._move(s,l)._moveEnd(v),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,h,m){l===void 0&&(l=this._zoom);var v=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),m?h&&h.pinch&&this.fire("zoom",h):((v||h&&h.pinch)&&this.fire("zoom",h),this.fire("move",h)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return A(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){Nt(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[a(this._container)]=this;var l=s?vt:Ae;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),fe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){A(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var h=[],m,v=l==="mouseout"||l==="mouseover",w=s.target||s.srcElement,D=!1;w;){if(m=this._targets[a(w)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){D=!0;break}if(m&&m.listens(l,!0)&&(v&&!Ls(w,s)||(h.push(m),v))||w===this._container)break;w=w.parentNode}return!h.length&&!D&&!v&&this.listens(l,!0)&&(h=[this]),h},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var h=s.type;h==="mousedown"&&Pu(l),this._fireDOMEvent(s,h)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,h){if(s.type==="click"){var m=n({},s);m.type="preclick",this._fireDOMEvent(m,m.type,h)}var v=this._findEventTargets(s,l);if(h){for(var w=[],D=0;D<h.length;D++)h[D].listens(l,!0)&&w.push(h[D]);v=w.concat(v)}if(v.length){l==="contextmenu"&&Ut(s);var O=v[0],j={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=O.getLatLng&&(!O._radius||O._radius<=10);j.containerPoint=Q?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(s),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=Q?O.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(D=0;D<v.length;D++)if(v[D].fire(l,j,!0),j.originalEvent._stopped||v[D].options.bubblingMouseEvents===!1&&X(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return _i(this._mapPane)||new Pe(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var h=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return h.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var h=this.getSize()._divideBy(2);return this.project(s,l)._subtract(h)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,h){var m=this._getNewPixelOrigin(h,l);return this.project(s,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(s,l,h){var m=this._getNewPixelOrigin(h,l);return wn([this.project(s.getSouthWest(),l)._subtract(m),this.project(s.getNorthWest(),l)._subtract(m),this.project(s.getSouthEast(),l)._subtract(m),this.project(s.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,h){if(!h)return s;var m=this.project(s,l),v=this.getSize().divideBy(2),w=new Ct(m.subtract(v),m.add(v)),D=this._getBoundsOffset(w,h,l);return Math.abs(D.x)<=1&&Math.abs(D.y)<=1?s:this.unproject(m.add(D),l)},_limitOffset:function(s,l){if(!l)return s;var h=this.getPixelBounds(),m=new Ct(h.min.add(s),h.max.add(s));return s.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(s,l,h){var m=wn(this.project(l.getNorthEast(),h),this.project(l.getSouthWest(),h)),v=m.min.subtract(s.min),w=m.max.subtract(s.max),D=this._rebound(v.x,-w.x),O=this._rebound(v.y,-w.y);return new Pe(D,O)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),h=this.getMaxZoom(),m=fe.any3d?this.options.zoomSnap:1;return m&&(s=Math.round(s/m)*m),Math.max(l,Math.min(h,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){zt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var h=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(h)?!1:(this.panBy(h,l),!0)},_createAnimProxy:function(){var s=this._proxy=et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var h=As,m=this._proxy.style[h];Cn(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[h]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){St(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Cn(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,h){if(this._animatingZoom)return!0;if(h=h||{},!this._zoomAnimated||h.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),v=this._getCenterOffset(s)._divideBy(1-1/m);return h.animate!==!0&&!this.getSize().contains(v)?!1:(x(function(){this._moveStart(!0,h.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,h,m){this._mapPane&&(h&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Ne(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&zt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function mf(s,l){return new Xe(s,l)}var qn=N.extend({options:{position:"topright"},initialize:function(s){I(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),h=this.getPosition(),m=s._controlCorners[h];return Ne(l,"leaflet-control"),h.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(St(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),No=function(s){return new qn(s)};Xe.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",h=this._controlContainer=et("div",l+"control-container",this._container);function m(v,w){var D=l+v+" "+l+w;s[v+w]=et("div",D,h)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)St(this._controlCorners[s]);St(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fs=qn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,h,m){return h<m?-1:m<h?1:0}},initialize:function(s,l,h){I(this,h),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in s)this._addLayer(s[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return qn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(a(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Ne(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ne(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):zt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return zt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=et("div",s),h=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ns(l),Ou(l);var m=this._section=et("section",s+"-list");h&&(this._map.on("click",this.collapse,this),Ae(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var v=this._layersLink=et("a",s+"-toggle",l);v.href="#",v.title="Layers",v.setAttribute("role","button"),Ae(v,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){Ut(w),this._expandSafely()}},this),h||this.expand(),this._baseLayersList=et("div",s+"-base",m),this._separator=et("div",s+"-separator",m),this._overlaysList=et("div",s+"-overlays",m),l.appendChild(m)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&a(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,h){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:h}),this.options.sortLayers&&this._layers.sort(r(function(m,v){return this.options.sortFunction(m.layer,v.layer,m.name,v.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ps(this._baseLayersList),Ps(this._overlaysList),this._layerControlInputs=[];var s,l,h,m,v=0;for(h=0;h<this._layers.length;h++)m=this._layers[h],this._addItem(m),l=l||m.overlay,s=s||!m.overlay,v+=m.overlay?0:1;return this.options.hideSingleBase&&(s=s&&v>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(a(s.target)),h=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;h&&this._map.fire(h,l)},_createRadioElement:function(s,l){var h='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=h,m.firstChild},_addItem:function(s){var l=document.createElement("label"),h=this._map.hasLayer(s.layer),m;s.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=h):m=this._createRadioElement("leaflet-base-layers_"+a(this),h),this._layerControlInputs.push(m),m.layerId=a(s.layer),Ae(m,"click",this._onInputClick,this);var v=document.createElement("span");v.innerHTML=" "+s.name;var w=document.createElement("span");l.appendChild(w),w.appendChild(m),w.appendChild(v);var D=s.overlay?this._overlaysList:this._baseLayersList;return D.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,h,m=[],v=[];this._handlingClick=!0;for(var w=s.length-1;w>=0;w--)l=s[w],h=this._getLayer(l.layerId).layer,l.checked?m.push(h):l.checked||v.push(h);for(w=0;w<v.length;w++)this._map.hasLayer(v[w])&&this._map.removeLayer(v[w]);for(w=0;w<m.length;w++)this._map.hasLayer(m[w])||this._map.addLayer(m[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,h,m=this._map.getZoom(),v=s.length-1;v>=0;v--)l=s[v],h=this._getLayer(l.layerId).layer,l.disabled=h.options.minZoom!==void 0&&m<h.options.minZoom||h.options.maxZoom!==void 0&&m>h.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,Ae(s,"click",Ut),this.expand();var l=this;setTimeout(function(){vt(s,"click",Ut),l._preventClick=!1})}}),gf=function(s,l,h){return new Fs(s,l,h)},oi=qn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",h=et("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",h,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",h,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),h},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,h,m,v){var w=et("a",h,m);return w.innerHTML=s,w.href="#",w.title=l,w.setAttribute("role","button"),w.setAttribute("aria-label",l),Ns(w),Ae(w,"click",vi),Ae(w,"click",v,this),Ae(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";zt(this._zoomInButton,l),zt(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ne(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ne(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Xe.mergeOptions({zoomControl:!0}),Xe.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new oi,this.addControl(this.zoomControl))});var _f=function(s){return new oi(s)},vf=qn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",h=et("div",l),m=this.options;return this._addScales(m,l+"-line",h),s.on(m.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),h},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,h){s.metric&&(this._mScale=et("div",l,h)),s.imperial&&(this._iScale=et("div",l,h))},_update:function(){var s=this._map,l=s.getSize().y/2,h=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(h)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),h=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,h,l/s)},_updateImperial:function(s){var l=s*3.2808399,h,m,v;l>5280?(h=l/5280,m=this._getRoundNum(h),this._updateScale(this._iScale,m+" mi",m/h)):(v=this._getRoundNum(l),this._updateScale(this._iScale,v+" ft",v/l))},_updateScale:function(s,l,h){s.style.width=Math.round(this.options.maxWidth*h)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),h=s/l;return h=h>=10?10:h>=5?5:h>=3?3:h>=2?2:1,l*h}}),Vs=function(s){return new vf(s)},yf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Bs=qn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(fe.inlineSvg?yf+" ":"")+"Leaflet</a>"},initialize:function(s){I(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=et("div","leaflet-control-attribution"),Ns(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var h=[];this.options.prefix&&h.push(this.options.prefix),s.length&&h.push(s.join(", ")),this._container.innerHTML=h.join(' <span aria-hidden="true">|</span> ')}}});Xe.mergeOptions({attributionControl:!0}),Xe.addInitHook(function(){this.options.attributionControl&&new Bs().addTo(this)});var cc=function(s){return new Bs(s)};qn.Layers=Fs,qn.Zoom=oi,qn.Scale=vf,qn.Attribution=Bs,No.layers=gf,No.zoom=_f,No.scale=Vs,No.attribution=cc;var si=N.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});si.addTo=function(s,l){return s.addHandler(l,this),this};var lc={Events:jt},bf=fe.touch?"touchstart mousedown":"mousedown",Hi=Bi.extend({options:{clickTolerance:3},initialize:function(s,l,h,m){I(this,m),this._element=s,this._dragStartTarget=l||s,this._preventOutline=h},enable:function(){this._enabled||(Ae(this._dragStartTarget,bf,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Hi._dragging===this&&this.finishDrag(!0),vt(this._dragStartTarget,bf,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!sc(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Hi._dragging===this&&this.finishDrag();return}if(!(Hi._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Hi._dragging=this,this._preventOutline&&Pu(this._element),qr(),Po(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,h=ff(this._element);this._startPoint=new Pe(l.clientX,l.clientY),this._startPos=_i(this._element),this._parentScale=Gr(h);var m=s.type==="mousedown";Ae(document,m?"mousemove":"touchmove",this._onMove,this),Ae(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,h=new Pe(l.clientX,l.clientY)._subtract(this._startPoint);!h.x&&!h.y||Math.abs(h.x)+Math.abs(h.y)<this.options.clickTolerance||(h.x/=this._parentScale.x,h.y/=this._parentScale.y,Ut(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ne(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ne(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(h),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),Nt(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){zt(document.body,"leaflet-dragging"),this._lastTarget&&(zt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vt(document,"mousemove touchmove",this._onMove,this),vt(document,"mouseup touchend touchcancel",this._onUp,this),Au(),dt();var l=this._moved&&this._moving;this._moving=!1,Hi._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Oo(s,l,h){var m,v=[1,4,2,8],w,D,O,j,Q,ae,Ee,Ge;for(w=0,ae=s.length;w<ae;w++)s[w]._code=fr(s[w],l);for(O=0;O<4;O++){for(Ee=v[O],m=[],w=0,ae=s.length,D=ae-1;w<ae;D=w++)j=s[w],Q=s[D],j._code&Ee?Q._code&Ee||(Ge=js(Q,j,Ee,l,h),Ge._code=fr(Ge,l),m.push(Ge)):(Q._code&Ee&&(Ge=js(Q,j,Ee,l,h),Ge._code=fr(Ge,l),m.push(Ge)),m.push(j));s=m}return s}function Vu(s,l){var h,m,v,w,D,O,j,Q,ae;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var Ee=Ye([0,0]),Ge=_t(s),Fn=Ge.getNorthWest().distanceTo(Ge.getSouthWest())*Ge.getNorthEast().distanceTo(Ge.getNorthWest());Fn<1700&&(Ee=uc(s));var _n=s.length,yi=[];for(h=0;h<_n;h++){var Gn=Ye(s[h]);yi.push(l.project(Ye([Gn.lat-Ee.lat,Gn.lng-Ee.lng])))}for(O=j=Q=0,h=0,m=_n-1;h<_n;m=h++)v=yi[h],w=yi[m],D=v.y*w.x-w.y*v.x,j+=(v.x+w.x)*D,Q+=(v.y+w.y)*D,O+=D*3;O===0?ae=yi[0]:ae=[j/O,Q/O];var yc=l.unproject(Ce(ae));return Ye([yc.lat+Ee.lat,yc.lng+Ee.lng])}function uc(s){for(var l=0,h=0,m=0,v=0;v<s.length;v++){var w=Ye(s[v]);l+=w.lat,h+=w.lng,m++}return Ye([l/m,h/m])}var Bu={__proto__:null,clipPolygon:Oo,polygonCenter:Vu,centroid:uc};function dc(s,l){if(!l||!s.length)return s.slice();var h=l*l;return s=Zr(s,h),s=wf(s,h),s}function ju(s,l,h){return Math.sqrt(un(s,l,h,!0))}function hc(s,l,h){return un(s,l,h)}function wf(s,l){var h=s.length,m=typeof Uint8Array<"u"?Uint8Array:Array,v=new m(h);v[0]=v[h-1]=1,fc(s,v,l,0,h-1);var w,D=[];for(w=0;w<h;w++)v[w]&&D.push(s[w]);return D}function fc(s,l,h,m,v){var w=0,D,O,j;for(O=m+1;O<=v-1;O++)j=un(s[O],s[m],s[v],!0),j>w&&(D=O,w=j);w>h&&(l[D]=1,fc(s,l,h,m,D),fc(s,l,h,D,v))}function Zr(s,l){for(var h=[s[0]],m=1,v=0,w=s.length;m<w;m++)pc(s[m],s[v])>l&&(h.push(s[m]),v=m);return v<w-1&&h.push(s[w-1]),h}var zu;function Uu(s,l,h,m,v){var w=m?zu:fr(s,h),D=fr(l,h),O,j,Q;for(zu=D;;){if(!(w|D))return[s,l];if(w&D)return!1;O=w||D,j=js(s,l,O,h,v),Q=fr(j,h),O===w?(s=j,w=Q):(l=j,D=Q)}}function js(s,l,h,m,v){var w=l.x-s.x,D=l.y-s.y,O=m.min,j=m.max,Q,ae;return h&8?(Q=s.x+w*(j.y-s.y)/D,ae=j.y):h&4?(Q=s.x+w*(O.y-s.y)/D,ae=O.y):h&2?(Q=j.x,ae=s.y+D*(j.x-s.x)/w):h&1&&(Q=O.x,ae=s.y+D*(O.x-s.x)/w),new Pe(Q,ae,v)}function fr(s,l){var h=0;return s.x<l.min.x?h|=1:s.x>l.max.x&&(h|=2),s.y<l.min.y?h|=4:s.y>l.max.y&&(h|=8),h}function pc(s,l){var h=l.x-s.x,m=l.y-s.y;return h*h+m*m}function un(s,l,h,m){var v=l.x,w=l.y,D=h.x-v,O=h.y-w,j=D*D+O*O,Q;return j>0&&(Q=((s.x-v)*D+(s.y-w)*O)/j,Q>1?(v=h.x,w=h.y):Q>0&&(v+=D*Q,w+=O*Q)),D=s.x-v,O=s.y-w,m?D*D+O*O:new Pe(v,w)}function Ln(s){return!W(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Hu(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ln(s)}function Kr(s,l){var h,m,v,w,D,O,j,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Ln(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ae=Ye([0,0]),Ee=_t(s),Ge=Ee.getNorthWest().distanceTo(Ee.getSouthWest())*Ee.getNorthEast().distanceTo(Ee.getNorthWest());Ge<1700&&(ae=uc(s));var Fn=s.length,_n=[];for(h=0;h<Fn;h++){var yi=Ye(s[h]);_n.push(l.project(Ye([yi.lat-ae.lat,yi.lng-ae.lng])))}for(h=0,m=0;h<Fn-1;h++)m+=_n[h].distanceTo(_n[h+1])/2;if(m===0)Q=_n[0];else for(h=0,w=0;h<Fn-1;h++)if(D=_n[h],O=_n[h+1],v=D.distanceTo(O),w+=v,w>m){j=(w-m)/v,Q=[O.x-j*(O.x-D.x),O.y-j*(O.y-D.y)];break}var Gn=l.unproject(Ce(Q));return Ye([Gn.lat+ae.lat,Gn.lng+ae.lng])}var d={__proto__:null,simplify:dc,pointToSegmentDistance:ju,closestPointOnSegment:hc,clipSegment:Uu,_getEdgeIntersection:js,_getBitCode:fr,_sqClosestPointOnSegment:un,isFlat:Ln,_flat:Hu,polylineCenter:Kr},g={project:function(s){return new Pe(s.lng,s.lat)},unproject:function(s){return new Se(s.y,s.x)},bounds:new Ct([-180,-90],[180,90])},y={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ct([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,h=this.R,m=s.lat*l,v=this.R_MINOR/h,w=Math.sqrt(1-v*v),D=w*Math.sin(m),O=Math.tan(Math.PI/4-m/2)/Math.pow((1-D)/(1+D),w/2);return m=-h*Math.log(Math.max(O,1e-10)),new Pe(s.lng*l*h,m)},unproject:function(s){for(var l=180/Math.PI,h=this.R,m=this.R_MINOR/h,v=Math.sqrt(1-m*m),w=Math.exp(-s.y/h),D=Math.PI/2-2*Math.atan(w),O=0,j=.1,Q;O<15&&Math.abs(j)>1e-7;O++)Q=v*Math.sin(D),Q=Math.pow((1-Q)/(1+Q),v/2),j=Math.PI/2-2*Math.atan(w*Q)-D,D+=j;return new Se(D*l,s.x*l/h)}},C={__proto__:null,LonLat:g,Mercator:y,SphericalMercator:fu},R=n({},sr,{code:"EPSG:3395",projection:y,transformation:function(){var s=.5/(Math.PI*y.R);return ar(s,.5,-s,.5)}()}),z=n({},sr,{code:"EPSG:4326",projection:g,transformation:ar(1/180,1,-1/180,.5)}),te=n({},Nn,{projection:g,transformation:ar(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var h=l.lng-s.lng,m=l.lat-s.lat;return Math.sqrt(h*h+m*m)},infinite:!0});Nn.Earth=sr,Nn.EPSG3395=R,Nn.EPSG3857=xo,Nn.EPSG900913=mu,Nn.EPSG4326=z,Nn.Simple=te;var He=Bi.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[a(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[a(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var h=this.getEvents();l.on(h,this),this.once("remove",function(){l.off(h,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Xe.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=a(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=a(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return a(s)in this._layers},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},_addLayers:function(s){s=s?W(s)?s:[s]:[];for(var l=0,h=s.length;l<h;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[a(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=a(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,h=this._getZoomSpan();for(var m in this._zoomBoundLayers){var v=this._zoomBoundLayers[m].options;s=v.minZoom===void 0?s:Math.min(s,v.minZoom),l=v.maxZoom===void 0?l:Math.max(l,v.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,h!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Vt=He.extend({initialize:function(s,l){I(this,l),this._layers={};var h,m;if(s)for(h=0,m=s.length;h<m;h++)this.addLayer(s[h])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),h,m;for(h in this._layers)m=this._layers[h],m[s]&&m[s].apply(m,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var h in this._layers)s.call(l,this._layers[h]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return a(s)}}),nt=function(s,l){return new Vt(s,l)},At=Vt.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Vt.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Vt.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Sn;for(var l in this._layers){var h=this._layers[l];s.extend(h.getBounds?h.getBounds():h.getLatLng())}return s}}),gn=function(s,l){return new At(s,l)},ai=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){I(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var h=this._getIconUrl(s);if(!h){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(h,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(s,l){var h=this.options,m=h[l+"Size"];typeof m=="number"&&(m=[m,m]);var v=Ce(m),w=Ce(l==="shadow"&&h.shadowAnchor||h.iconAnchor||v&&v.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(h.className||""),w&&(s.style.marginLeft=-w.x+"px",s.style.marginTop=-w.y+"px"),v&&(s.style.width=v.x+"px",s.style.height=v.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return fe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function ci(s){return new ai(s)}var pr=ai.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof pr.imagePath!="string"&&(pr.imagePath=this._detectIconPath()),(this.options.imagePath||pr.imagePath)+ai.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(h,m,v){var w=m.exec(h);return w&&w[v]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=et("div","leaflet-default-icon-path",document.body),l=Ms(s,"background-image")||Ms(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var h=document.querySelector('link[href$="leaflet.css"]');return h?h.href.substring(0,h.href.length-11-1):""}}),mc=si.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Hi(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ne(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&zt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,h=l._map,m=this._marker.options.autoPanSpeed,v=this._marker.options.autoPanPadding,w=_i(l._icon),D=h.getPixelBounds(),O=h.getPixelOrigin(),j=wn(D.min._subtract(O).add(v),D.max._subtract(O).subtract(v));if(!j.contains(w)){var Q=Ce((Math.max(j.max.x,w.x)-j.max.x)/(D.max.x-j.max.x)-(Math.min(j.min.x,w.x)-j.min.x)/(D.min.x-j.min.x),(Math.max(j.max.y,w.y)-j.max.y)/(D.max.y-j.max.y)-(Math.min(j.min.y,w.y)-j.min.y)/(D.min.y-j.min.y)).multiplyBy(m);h.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),Nt(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=x(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(A(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,h=l._shadow,m=_i(l._icon),v=l._map.layerPointToLatLng(m);h&&Nt(h,m),l._latlng=v,s.latlng=v,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){A(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),If=He.extend({options:{icon:new pr,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){I(this,l),this._latlng=Ye(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=Ye(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),h=s.icon.createIcon(this._icon),m=!1;h!==this._icon&&(this._icon&&this._removeIcon(),m=!0,s.title&&(h.title=s.title),h.tagName==="IMG"&&(h.alt=s.alt||"")),Ne(h,l),s.keyboard&&(h.tabIndex="0",h.setAttribute("role","button")),this._icon=h,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ae(h,"focus",this._panOnFocus,this);var v=s.icon.createShadow(this._shadow),w=!1;v!==this._shadow&&(this._removeShadow(),w=!0),v&&(Ne(v,l),v.alt=""),this._shadow=v,s.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),v&&w&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(this._icon,"focus",this._panOnFocus,this),St(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&St(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&Nt(this._icon,s),this._shadow&&Nt(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Ne(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),mc)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new mc(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&On(this._icon,s),this._shadow&&On(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,h=l.iconSize?Ce(l.iconSize):Ce(0,0),m=l.iconAnchor?Ce(l.iconAnchor):Ce(0,0);s.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:h.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function DR(s,l){return new If(s,l)}var Lo=He.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return I(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Cf=Lo.extend({options:{fill:!0,radius:10},initialize:function(s,l){I(this,l),this._latlng=Ye(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=Ye(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Lo.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,h=this._clickTolerance(),m=[s+h,l+h];this._pxBounds=new Ct(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function TR(s,l){return new Cf(s,l)}var D_=Cf.extend({initialize:function(s,l,h){if(typeof l=="number"&&(l=n({},h,{radius:l})),I(this,l),this._latlng=Ye(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Sn(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Lo.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,h=this._map,m=h.options.crs;if(m.distance===sr.distance){var v=Math.PI/180,w=this._mRadius/sr.R/v,D=h.project([l+w,s]),O=h.project([l-w,s]),j=D.add(O).divideBy(2),Q=h.unproject(j).lat,ae=Math.acos((Math.cos(w*v)-Math.sin(l*v)*Math.sin(Q*v))/(Math.cos(l*v)*Math.cos(Q*v)))/v;(isNaN(ae)||ae===0)&&(ae=w/Math.cos(Math.PI/180*l)),this._point=j.subtract(h.getPixelOrigin()),this._radius=isNaN(ae)?0:j.x-h.project([Q,s-ae]).x,this._radiusY=j.y-D.y}else{var Ee=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=h.latLngToLayerPoint(this._latlng),this._radius=this._point.x-h.latLngToLayerPoint(Ee).x}this._updateBounds()}});function SR(s,l,h){return new D_(s,l,h)}var Qr=Lo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){I(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,h=null,m=un,v,w,D=0,O=this._parts.length;D<O;D++)for(var j=this._parts[D],Q=1,ae=j.length;Q<ae;Q++){v=j[Q-1],w=j[Q];var Ee=m(s,v,w,!0);Ee<l&&(l=Ee,h=m(s,v,w))}return h&&(h.distance=Math.sqrt(l)),h},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Kr(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=Ye(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Sn,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Ln(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],h=Ln(s),m=0,v=s.length;m<v;m++)h?(l[m]=Ye(s[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(s[m]);return l},_project:function(){var s=new Ct;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new Pe(s,s);this._rawPxBounds&&(this._pxBounds=new Ct([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,h){var m=s[0]instanceof Se,v=s.length,w,D;if(m){for(D=[],w=0;w<v;w++)D[w]=this._map.latLngToLayerPoint(s[w]),h.extend(D[w]);l.push(D)}else for(w=0;w<v;w++)this._projectLatlngs(s[w],l,h)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,h,m,v,w,D,O,j;for(h=0,v=0,w=this._rings.length;h<w;h++)for(j=this._rings[h],m=0,D=j.length;m<D-1;m++)O=Uu(j[m],j[m+1],s,m,!0),O&&(l[v]=l[v]||[],l[v].push(O[0]),(O[1]!==j[m+1]||m===D-2)&&(l[v].push(O[1]),v++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,h=0,m=s.length;h<m;h++)s[h]=dc(s[h],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var h,m,v,w,D,O,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(h=0,w=this._parts.length;h<w;h++)for(O=this._parts[h],m=0,D=O.length,v=D-1;m<D;v=m++)if(!(!l&&m===0)&&ju(s,O[v],O[m])<=j)return!0;return!1}});function AR(s,l){return new Qr(s,l)}Qr._flat=Hu;var gc=Qr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Vu(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Qr.prototype._convertLatLngs.call(this,s),h=l.length;return h>=2&&l[0]instanceof Se&&l[0].equals(l[h-1])&&l.pop(),l},_setLatLngs:function(s){Qr.prototype._setLatLngs.call(this,s),Ln(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ln(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,h=new Pe(l,l);if(s=new Ct(s.min.subtract(h),s.max.add(h)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,v=this._rings.length,w;m<v;m++)w=Oo(this._rings[m],s,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,h,m,v,w,D,O,j,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(w=0,j=this._parts.length;w<j;w++)for(h=this._parts[w],D=0,Q=h.length,O=Q-1;D<Q;O=D++)m=h[D],v=h[O],m.y>s.y!=v.y>s.y&&s.x<(v.x-m.x)*(s.y-m.y)/(v.y-m.y)+m.x&&(l=!l);return l||Qr.prototype._containsPoint.call(this,s,!0)}});function MR(s,l){return new gc(s,l)}var Yr=At.extend({initialize:function(s,l){I(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=W(s)?s:s.features,h,m,v;if(l){for(h=0,m=l.length;h<m;h++)v=l[h],(v.geometries||v.geometry||v.features||v.coordinates)&&this.addData(v);return this}var w=this.options;if(w.filter&&!w.filter(s))return this;var D=Ef(s,w);return D?(D.feature=Tf(s),D.defaultOptions=D.options,this.resetStyle(D),w.onEachFeature&&w.onEachFeature(s,D),this.addLayer(D)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=n({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Ef(s,l){var h=s.type==="Feature"?s.geometry:s,m=h?h.coordinates:null,v=[],w=l&&l.pointToLayer,D=l&&l.coordsToLatLng||T_,O,j,Q,ae;if(!m&&!h)return null;switch(h.type){case"Point":return O=D(m),YC(w,s,O,l);case"MultiPoint":for(Q=0,ae=m.length;Q<ae;Q++)O=D(m[Q]),v.push(YC(w,s,O,l));return new At(v);case"LineString":case"MultiLineString":return j=xf(m,h.type==="LineString"?0:1,D),new Qr(j,l);case"Polygon":case"MultiPolygon":return j=xf(m,h.type==="Polygon"?1:2,D),new gc(j,l);case"GeometryCollection":for(Q=0,ae=h.geometries.length;Q<ae;Q++){var Ee=Ef({geometry:h.geometries[Q],type:"Feature",properties:s.properties},l);Ee&&v.push(Ee)}return new At(v);case"FeatureCollection":for(Q=0,ae=h.features.length;Q<ae;Q++){var Ge=Ef(h.features[Q],l);Ge&&v.push(Ge)}return new At(v);default:throw new Error("Invalid GeoJSON object.")}}function YC(s,l,h,m){return s?s(l,h):new If(h,m&&m.markersInheritOptions&&m)}function T_(s){return new Se(s[1],s[0],s[2])}function xf(s,l,h){for(var m=[],v=0,w=s.length,D;v<w;v++)D=l?xf(s[v],l-1,h):(h||T_)(s[v]),m.push(D);return m}function S_(s,l){return s=Ye(s),s.alt!==void 0?[p(s.lng,l),p(s.lat,l),p(s.alt,l)]:[p(s.lng,l),p(s.lat,l)]}function Df(s,l,h,m){for(var v=[],w=0,D=s.length;w<D;w++)v.push(l?Df(s[w],Ln(s[w])?0:l-1,h,m):S_(s[w],m));return!l&&h&&v.length>0&&v.push(v[0].slice()),v}function _c(s,l){return s.feature?n({},s.feature,{geometry:l}):Tf(l)}function Tf(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var A_={toGeoJSON:function(s){return _c(this,{type:"Point",coordinates:S_(this.getLatLng(),s)})}};If.include(A_),D_.include(A_),Cf.include(A_),Qr.include({toGeoJSON:function(s){var l=!Ln(this._latlngs),h=Df(this._latlngs,l?1:0,!1,s);return _c(this,{type:(l?"Multi":"")+"LineString",coordinates:h})}}),gc.include({toGeoJSON:function(s){var l=!Ln(this._latlngs),h=l&&!Ln(this._latlngs[0]),m=Df(this._latlngs,h?2:l?1:0,!0,s);return l||(m=[m]),_c(this,{type:(h?"Multi":"")+"Polygon",coordinates:m})}}),Vt.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(h){l.push(h.toGeoJSON(s).geometry.coordinates)}),_c(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var h=l==="GeometryCollection",m=[];return this.eachLayer(function(v){if(v.toGeoJSON){var w=v.toGeoJSON(s);if(h)m.push(w.geometry);else{var D=Tf(w);D.type==="FeatureCollection"?m.push.apply(m,D.features):m.push(D)}}}),h?_c(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function XC(s,l){return new Yr(s,l)}var PR=XC,Sf=He.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,h){this._url=s,this._bounds=_t(l),I(this,h)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ne(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){St(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&ur(this._image),this},bringToBack:function(){return this._map&&dr(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=_t(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:et("img");if(Ne(l,"leaflet-image-layer"),this._zoomAnimated&&Ne(l,"leaflet-zoom-animated"),this.options.className&&Ne(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onload=r(this.fire,this,"load"),l.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),h=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Cn(this._image,h,l)},_reset:function(){var s=this._image,l=new Ct(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),h=l.getSize();Nt(s,l.min),s.style.width=h.x+"px",s.style.height=h.y+"px"},_updateOpacity:function(){On(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),kR=function(s,l,h){return new Sf(s,l,h)},JC=Sf.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:et("video");if(Ne(l,"leaflet-image-layer"),this._zoomAnimated&&Ne(l,"leaflet-zoom-animated"),this.options.className&&Ne(l,this.options.className),l.onselectstart=f,l.onmousemove=f,l.onloadeddata=r(this.fire,this,"load"),s){for(var h=l.getElementsByTagName("source"),m=[],v=0;v<h.length;v++)m.push(h[v].src);this._url=h.length>0?m:[l.src];return}W(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var D=et("source");D.src=this._url[w],l.appendChild(D)}}});function RR(s,l,h){return new JC(s,l,h)}var eE=Sf.extend({_initImage:function(){var s=this._image=this._url;Ne(s,"leaflet-image-layer"),this._zoomAnimated&&Ne(s,"leaflet-zoom-animated"),this.options.className&&Ne(s,this.options.className),s.onselectstart=f,s.onmousemove=f}});function NR(s,l,h){return new eE(s,l,h)}var mr=He.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Se||W(s))?(this._latlng=Ye(s),I(this,l)):(I(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&On(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&On(this._container,1),this.bringToFront(),this.options.interactive&&(Ne(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(On(this._container,0),this._removeTimeout=setTimeout(r(St,void 0,this._container),200)):St(this._container),this.options.interactive&&(zt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=Ye(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ur(this._container),this},bringToBack:function(){return this._map&&dr(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof At){l=null;var h=this._source._layers;for(var m in h)if(h[m]._map){l=h[m];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=Ce(this.options.offset),h=this._getAnchor();this._zoomAnimated?Nt(this._container,s.add(h)):l=l.add(s).add(h);var m=this._containerBottom=-l.y,v=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=v+"px"}},_getAnchor:function(){return[0,0]}});Xe.include({_initOverlay:function(s,l,h,m){var v=l;return v instanceof s||(v=new s(m).setContent(l)),h&&v.setLatLng(h),v}}),He.include({_initOverlay:function(s,l,h,m){var v=h;return v instanceof s?(I(v,m),v._source=this):(v=l&&!m?l:new s(m,this),v.setContent(h)),v}});var Af=mr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mr.prototype.openOn.call(this,s)},onAdd:function(s){mr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Lo||this._source.on("preclick",An))},onRemove:function(s){mr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Lo||this._source.off("preclick",An))},getEvents:function(){var s=mr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=et("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),h=this._wrapper=et("div",s+"-content-wrapper",l);if(this._contentNode=et("div",s+"-content",h),Ns(l),Ou(this._contentNode),Ae(l,"contextmenu",An),this._tipContainer=et("div",s+"-tip-container",l),this._tip=et("div",s+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=et("a",s+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',Ae(m,"click",function(v){Ut(v),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var h=s.offsetWidth;h=Math.min(h,this.options.maxWidth),h=Math.max(h,this.options.minWidth),l.width=h+1+"px",l.whiteSpace="",l.height="";var m=s.offsetHeight,v=this.options.maxHeight,w="leaflet-popup-scrolled";v&&m>v?(l.height=v+"px",Ne(s,w)):zt(s,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),h=this._getAnchor();Nt(this._container,l.add(h))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Ms(this._container,"marginBottom"),10)||0,h=this._container.offsetHeight+l,m=this._containerWidth,v=new Pe(this._containerLeft,-h-this._containerBottom);v._add(_i(this._container));var w=s.layerPointToContainerPoint(v),D=Ce(this.options.autoPanPadding),O=Ce(this.options.autoPanPaddingTopLeft||D),j=Ce(this.options.autoPanPaddingBottomRight||D),Q=s.getSize(),ae=0,Ee=0;w.x+m+j.x>Q.x&&(ae=w.x+m-Q.x+j.x),w.x-ae-O.x<0&&(ae=w.x-O.x),w.y+h+j.y>Q.y&&(Ee=w.y+h-Q.y+j.y),w.y-Ee-O.y<0&&(Ee=w.y-O.y),(ae||Ee)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ae,Ee]))}},_getAnchor:function(){return Ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),OR=function(s,l){return new Af(s,l)};Xe.mergeOptions({closePopupOnClick:!0}),Xe.include({openPopup:function(s,l,h){return this._initOverlay(Af,s,l,h).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),He.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Af,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof At||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){vi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Lo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Mf=mr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=et("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+a(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,h,m=this._map,v=this._container,w=m.latLngToContainerPoint(m.getCenter()),D=m.layerPointToContainerPoint(s),O=this.options.direction,j=v.offsetWidth,Q=v.offsetHeight,ae=Ce(this.options.offset),Ee=this._getAnchor();O==="top"?(l=j/2,h=Q):O==="bottom"?(l=j/2,h=0):O==="center"?(l=j/2,h=Q/2):O==="right"?(l=0,h=Q/2):O==="left"?(l=j,h=Q/2):D.x<w.x?(O="right",l=0,h=Q/2):(O="left",l=j+(ae.x+Ee.x)*2,h=Q/2),s=s.subtract(Ce(l,h,!0)).add(ae).add(Ee),zt(v,"leaflet-tooltip-right"),zt(v,"leaflet-tooltip-left"),zt(v,"leaflet-tooltip-top"),zt(v,"leaflet-tooltip-bottom"),Ne(v,"leaflet-tooltip-"+O),Nt(v,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&On(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return Ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),LR=function(s,l){return new Mf(s,l)};Xe.include({openTooltip:function(s,l,h){return this._initOverlay(Mf,s,l,h).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),He.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mf,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",h={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?h.add=this._openTooltip:(h.mouseover=this._openTooltip,h.mouseout=this.closeTooltip,h.click=this._openTooltip,this._map?this._addFocusListeners():h.add=this._addFocusListeners),this._tooltip.options.sticky&&(h.mousemove=this._moveTooltip),this[l](h),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof At||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(Ae(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),Ae(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,h,m;this._tooltip.options.sticky&&s.originalEvent&&(h=this._map.mouseEventToContainerPoint(s.originalEvent),m=this._map.containerPointToLayerPoint(h),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var tE=ai.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),h=this.options;if(h.html instanceof Element?(Ps(l),l.appendChild(h.html)):l.innerHTML=h.html!==!1?h.html:"",h.bgPos){var m=Ce(h.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function FR(s){return new tE(s)}ai.Default=pr;var $u=He.extend({options:{tileSize:256,opacity:1,updateWhenIdle:fe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){I(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),St(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ur(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(dr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof Pe?s:new Pe(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,h=-s(-1/0,1/0),m=0,v=l.length,w;m<v;m++)w=l[m].style.zIndex,l[m]!==this._container&&w&&(h=s(h,+w));isFinite(h)&&(this.options.zIndex=h+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!fe.ielt9){On(this._container,this.options.opacity);var s=+new Date,l=!1,h=!1;for(var m in this._tiles){var v=this._tiles[m];if(!(!v.current||!v.loaded)){var w=Math.min(1,(s-v.loaded)/200);On(v.el,w),w<1?l=!0:(v.active?h=!0:this._onOpaqueTile(v),v.active=!0)}}h&&!this._noPrune&&this._pruneTiles(),l&&(A(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:f,_initContainer:function(){this._container||(this._container=et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var h in this._levels)h=Number(h),this._levels[h].el.children.length||h===s?(this._levels[h].el.style.zIndex=l-Math.abs(s-h),this._onUpdateLevel(h)):(St(this._levels[h].el),this._removeTilesAtZoom(h),this._onRemoveLevel(h),delete this._levels[h]);var m=this._levels[s],v=this._map;return m||(m=this._levels[s]={},m.el=et("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=v.project(v.unproject(v.getPixelOrigin()),s).round(),m.zoom=s,this._setZoomTransform(m,v.getCenter(),v.getZoom()),f(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:f,_onRemoveLevel:f,_onCreateLevel:f,_pruneTiles:function(){if(this._map){var s,l,h=this._map.getZoom();if(h>this.options.maxZoom||h<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)St(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,h,m){var v=Math.floor(s/2),w=Math.floor(l/2),D=h-1,O=new Pe(+v,+w);O.z=+D;var j=this._tileCoordsToKey(O),Q=this._tiles[j];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),D>m?this._retainParent(v,w,D,m):!1)},_retainChildren:function(s,l,h,m){for(var v=2*s;v<2*s+2;v++)for(var w=2*l;w<2*l+2;w++){var D=new Pe(v,w);D.z=h+1;var O=this._tileCoordsToKey(D),j=this._tiles[O];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);h+1<m&&this._retainChildren(v,w,h+1,m)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,h,m){var v=Math.round(l);this.options.maxZoom!==void 0&&v>this.options.maxZoom||this.options.minZoom!==void 0&&v<this.options.minZoom?v=void 0:v=this._clampZoom(v);var w=this.options.updateWhenZooming&&v!==this._tileZoom;(!m||w)&&(this._tileZoom=v,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),v!==void 0&&this._update(s),h||this._pruneTiles(),this._noPrune=!!h),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var h in this._levels)this._setZoomTransform(this._levels[h],s,l)},_setZoomTransform:function(s,l,h){var m=this._map.getZoomScale(h,s.zoom),v=s.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,h)).round();fe.any3d?Cn(s.el,v,m):Nt(s.el,v)},_resetGrid:function(){var s=this._map,l=s.options.crs,h=this._tileSize=this.getTileSize(),m=this._tileZoom,v=this._map.getPixelWorldBounds(this._tileZoom);v&&(this._globalTileRange=this._pxBoundsToTileRange(v)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],m).x/h.x),Math.ceil(s.project([0,l.wrapLng[1]],m).x/h.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],m).y/h.x),Math.ceil(s.project([l.wrapLat[1],0],m).y/h.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,h=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(h,this._tileZoom),v=l.project(s,this._tileZoom).floor(),w=l.getSize().divideBy(m*2);return new Ct(v.subtract(w),v.add(w))},_update:function(s){var l=this._map;if(l){var h=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(s),v=this._pxBoundsToTileRange(m),w=v.getCenter(),D=[],O=this.options.keepBuffer,j=new Ct(v.getBottomLeft().subtract([O,-O]),v.getTopRight().add([O,-O]));if(!(isFinite(v.min.x)&&isFinite(v.min.y)&&isFinite(v.max.x)&&isFinite(v.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ae=this._tiles[Q].coords;(ae.z!==this._tileZoom||!j.contains(new Pe(ae.x,ae.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(h-this._tileZoom)>1){this._setView(s,h);return}for(var Ee=v.min.y;Ee<=v.max.y;Ee++)for(var Ge=v.min.x;Ge<=v.max.x;Ge++){var Fn=new Pe(Ge,Ee);if(Fn.z=this._tileZoom,!!this._isValidTile(Fn)){var _n=this._tiles[this._tileCoordsToKey(Fn)];_n?_n.current=!0:D.push(Fn)}}if(D.sort(function(Gn,yc){return Gn.distanceTo(w)-yc.distanceTo(w)}),D.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var yi=document.createDocumentFragment();for(Ge=0;Ge<D.length;Ge++)this._addTile(D[Ge],yi);this._level.el.appendChild(yi)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var h=this._globalTileRange;if(!l.wrapLng&&(s.x<h.min.x||s.x>h.max.x)||!l.wrapLat&&(s.y<h.min.y||s.y>h.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(s);return _t(this.options.bounds).overlaps(m)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,h=this.getTileSize(),m=s.scaleBy(h),v=m.add(h),w=l.unproject(m,s.z),D=l.unproject(v,s.z);return[w,D]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),h=new Sn(l[0],l[1]);return this.options.noWrap||(h=this._map.wrapLatLngBounds(h)),h},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),h=new Pe(+l[0],+l[1]);return h.z=+l[2],h},_removeTile:function(s){var l=this._tiles[s];l&&(St(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ne(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=f,s.onmousemove=f,fe.ielt9&&this.options.opacity<1&&On(s,this.options.opacity)},_addTile:function(s,l){var h=this._getTilePos(s),m=this._tileCoordsToKey(s),v=this.createTile(this._wrapCoords(s),r(this._tileReady,this,s));this._initTile(v),this.createTile.length<2&&x(r(this._tileReady,this,s,null,v)),Nt(v,h),this._tiles[m]={el:v,coords:s,current:!0},l.appendChild(v),this.fire("tileloadstart",{tile:v,coords:s})},_tileReady:function(s,l,h){l&&this.fire("tileerror",{error:l,tile:h,coords:s});var m=this._tileCoordsToKey(s);h=this._tiles[m],h&&(h.loaded=+new Date,this._map._fadeAnimated?(On(h.el,0),A(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(h.active=!0,this._pruneTiles()),l||(Ne(h.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:h.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),fe.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new Pe(this._wrapX?u(s.x,this._wrapX):s.x,this._wrapY?u(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new Ct(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function VR(s){return new $u(s)}var vc=$u.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=I(this,l),l.detectRetina&&fe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var h=document.createElement("img");return Ae(h,"load",r(this._tileOnLoad,this,l,h)),Ae(h,"error",r(this._tileOnError,this,l,h)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(h.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(h.referrerPolicy=this.options.referrerPolicy),h.alt="",h.src=this.getTileUrl(s),h},getTileUrl:function(s){var l={r:fe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var h=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=h),l["-y"]=h}return F(this._url,n(l,this.options))},_tileOnLoad:function(s,l){fe.ielt9?setTimeout(r(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,h){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),s(h,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,h=this.options.zoomReverse,m=this.options.zoomOffset;return h&&(s=l-s),s+m},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=f,l.onerror=f,!l.complete)){l.src=Z;var h=this._tiles[s].coords;St(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:h})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",Z),$u.prototype._removeTile.call(this,s)},_tileReady:function(s,l,h){if(!(!this._map||h&&h.getAttribute("src")===Z))return $u.prototype._tileReady.call(this,s,l,h)}});function nE(s,l){return new vc(s,l)}var iE=vc.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var h=n({},this.defaultWmsParams);for(var m in l)m in this.options||(h[m]=l[m]);l=I(this,l);var v=l.detectRetina&&fe.retina?2:1,w=this.getTileSize();h.width=w.x*v,h.height=w.y*v,this.wmsParams=h},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,vc.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),h=this._crs,m=wn(h.project(l[0]),h.project(l[1])),v=m.min,w=m.max,D=(this._wmsVersion>=1.3&&this._crs===z?[v.y,v.x,w.y,w.x]:[v.x,v.y,w.x,w.y]).join(","),O=vc.prototype.getTileUrl.call(this,s);return O+M(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+D},setParams:function(s,l){return n(this.wmsParams,s),l||this.redraw(),this}});function BR(s,l){return new iE(s,l)}vc.WMS=iE,nE.wms=BR;var Xr=He.extend({options:{padding:.1},initialize:function(s){I(this,s),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ne(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var h=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),v=this._map.project(this._center,l),w=m.multiplyBy(-h).add(v).subtract(this._map._getNewPixelOrigin(s,l));fe.any3d?Cn(this._container,w,h):Nt(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),h=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new Ct(h,h.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),rE=Xr.extend({options:{tolerance:0},getEvents:function(){var s=Xr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Xr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");Ae(s,"mousemove",this._onMouseMove,this),Ae(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){A(this._redrawRequest),delete this._ctx,St(this._container),vt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xr.prototype._update.call(this);var s=this._bounds,l=this._container,h=s.getSize(),m=fe.retina?2:1;Nt(l,s.min),l.width=m*h.x,l.height=m*h.y,l.style.width=h.x+"px",l.style.height=h.y+"px",fe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Xr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[a(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,h=l.next,m=l.prev;h?h.prev=m:this._drawLast=m,m?m.next=h:this._drawFirst=h,delete s._order,delete this._layers[a(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),h=[],m,v;for(v=0;v<l.length;v++){if(m=Number(l[v]),isNaN(m))return;h.push(m)}s.options._dashArray=h}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ct,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var h=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,h.x,h.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)s=m.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var h,m,v,w,D=s._parts,O=D.length,j=this._ctx;if(O){for(j.beginPath(),h=0;h<O;h++){for(m=0,v=D[h].length;m<v;m++)w=D[h][m],j[m?"lineTo":"moveTo"](w.x,w.y);l&&j.closePath()}this._fillStroke(j,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,h=this._ctx,m=Math.max(Math.round(s._radius),1),v=(Math.max(Math.round(s._radiusY),1)||m)/m;v!==1&&(h.save(),h.scale(1,v)),h.beginPath(),h.arc(l.x,l.y/v,m,0,Math.PI*2,!1),v!==1&&h.restore(),this._fillStroke(h,s)}},_fillStroke:function(s,l){var h=l.options;h.fill&&(s.globalAlpha=h.fillOpacity,s.fillStyle=h.fillColor||h.color,s.fill(h.fillRule||"evenodd")),h.stroke&&h.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=h.opacity,s.lineWidth=h.weight,s.strokeStyle=h.color,s.lineCap=h.lineCap,s.lineJoin=h.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),h,m,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(h))&&(m=h);this._fireEvent(m?[m]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(zt(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var h,m,v=this._drawFirst;v;v=v.next)h=v.layer,h.options.interactive&&h._containsPoint(l)&&(m=h);m!==this._hoveredLayer&&(this._handleMouseOut(s),m&&(Ne(this._container,"leaflet-interactive"),this._fireEvent([m],s,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(r(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,h){this._map._fireDOMEvent(l,h||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var h=l.next,m=l.prev;if(h)h.prev=m;else return;m?m.next=h:h&&(this._drawFirst=h),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var h=l.next,m=l.prev;if(m)m.next=h;else return;h?h.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function oE(s){return fe.canvas?new rE(s):null}var qu=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jR={_initContainer:function(){this._container=et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Xr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=qu("shape");Ne(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=qu("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;St(l),s.removeInteractiveTarget(l),delete this._layers[a(s)]},_updateStyle:function(s){var l=s._stroke,h=s._fill,m=s.options,v=s._container;v.stroked=!!m.stroke,v.filled=!!m.fill,m.stroke?(l||(l=s._stroke=qu("stroke")),v.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=W(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(v.removeChild(l),s._stroke=null),m.fill?(h||(h=s._fill=qu("fill")),v.appendChild(h),h.color=m.fillColor||m.color,h.opacity=m.fillOpacity):h&&(v.removeChild(h),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),h=Math.round(s._radius),m=Math.round(s._radiusY||h);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+h+","+m+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){ur(s._container)},_bringToBack:function(s){dr(s._container)}},Pf=fe.vml?qu:Qa,Gu=Xr.extend({_initContainer:function(){this._container=Pf("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Pf("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){St(this._container),vt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Xr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),h=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,h.setAttribute("width",l.x),h.setAttribute("height",l.y)),Nt(h,s.min),h.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Pf("path");s.options.className&&Ne(l,s.options.className),s.options.interactive&&Ne(l,"leaflet-interactive"),this._updateStyle(s),this._layers[a(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){St(s._path),s.removeInteractiveTarget(s._path),delete this._layers[a(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,h=s.options;l&&(h.stroke?(l.setAttribute("stroke",h.color),l.setAttribute("stroke-opacity",h.opacity),l.setAttribute("stroke-width",h.weight),l.setAttribute("stroke-linecap",h.lineCap),l.setAttribute("stroke-linejoin",h.lineJoin),h.dashArray?l.setAttribute("stroke-dasharray",h.dashArray):l.removeAttribute("stroke-dasharray"),h.dashOffset?l.setAttribute("stroke-dashoffset",h.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),h.fill?(l.setAttribute("fill",h.fillColor||h.color),l.setAttribute("fill-opacity",h.fillOpacity),l.setAttribute("fill-rule",h.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,Ya(s._parts,l))},_updateCircle:function(s){var l=s._point,h=Math.max(Math.round(s._radius),1),m=Math.max(Math.round(s._radiusY),1)||h,v="a"+h+","+m+" 0 1,0 ",w=s._empty()?"M0 0":"M"+(l.x-h)+","+l.y+v+h*2+",0 "+v+-h*2+",0 ";this._setPath(s,w)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){ur(s._path)},_bringToBack:function(s){dr(s._path)}});fe.vml&&Gu.include(jR);function sE(s){return fe.svg||fe.vml?new Gu(s):null}Xe.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&oE(s)||sE(s)}});var aE=gc.extend({initialize:function(s,l){gc.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=_t(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function zR(s,l){return new aE(s,l)}Gu.create=Pf,Gu.pointsToPath=Ya,Yr.geometryToLayer=Ef,Yr.coordsToLatLng=T_,Yr.coordsToLatLngs=xf,Yr.latLngToCoords=S_,Yr.latLngsToCoords=Df,Yr.getFeature=_c,Yr.asFeature=Tf,Xe.mergeOptions({boxZoom:!0});var cE=si.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){St(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Po(),qr(),this._startPoint=this._map.mouseEventToContainerPoint(s),Ae(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=et("div","leaflet-zoom-box",this._container),Ne(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new Ct(this._point,this._startPoint),h=l.getSize();Nt(this._box,l.min),this._box.style.width=h.x+"px",this._box.style.height=h.y+"px"},_finish:function(){this._moved&&(St(this._box),zt(this._container,"leaflet-crosshair")),dt(),Au(),vt(document,{contextmenu:vi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var l=new Sn(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Xe.addInitHook("addHandler","boxZoom",cE),Xe.mergeOptions({doubleClickZoom:!0});var lE=si.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,h=l.getZoom(),m=l.options.zoomDelta,v=s.originalEvent.shiftKey?h-m:h+m;l.options.doubleClickZoom==="center"?l.setZoom(v):l.setZoomAround(s.containerPoint,v)}});Xe.addInitHook("addHandler","doubleClickZoom",lE),Xe.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var uE=si.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Hi(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ne(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){zt(this._map._container,"leaflet-grab"),zt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=_t(this._map.options.maxBounds);this._offsetLimit=wn(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,h=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(h),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),h=this._initialWorldOffset,m=this._draggable._newPos.x,v=(m-l+h)%s+l-h,w=(m+l+h)%s-l-h,D=Math.abs(v+h)<Math.abs(w+h)?v:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=D},_onDragEnd:function(s){var l=this._map,h=l.options,m=!h.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),m)l.fire("moveend");else{this._prunePositions(+new Date);var v=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,D=h.easeLinearity,O=v.multiplyBy(D/w),j=O.distanceTo([0,0]),Q=Math.min(h.inertiaMaxSpeed,j),ae=O.multiplyBy(Q/j),Ee=Q/(h.inertiaDeceleration*D),Ge=ae.multiplyBy(-Ee/2).round();!Ge.x&&!Ge.y?l.fire("moveend"):(Ge=l._limitOffset(Ge,l.options.maxBounds),x(function(){l.panBy(Ge,{duration:Ee,easeLinearity:D,noMoveStart:!0,animate:!0})}))}}});Xe.addInitHook("addHandler","dragging",uE),Xe.mergeOptions({keyboard:!0,keyboardPanDelta:80});var dE=si.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),Ae(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),vt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,h=s.scrollTop||l.scrollTop,m=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,h)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},h=this.keyCodes,m,v;for(m=0,v=h.left.length;m<v;m++)l[h.left[m]]=[-1*s,0];for(m=0,v=h.right.length;m<v;m++)l[h.right[m]]=[s,0];for(m=0,v=h.down.length;m<v;m++)l[h.down[m]]=[0,s];for(m=0,v=h.up.length;m<v;m++)l[h.up[m]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},h=this.keyCodes,m,v;for(m=0,v=h.zoomIn.length;m<v;m++)l[h.zoomIn[m]]=s;for(m=0,v=h.zoomOut.length;m<v;m++)l[h.zoomOut[m]]=-s},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,h=this._map,m;if(l in this._panKeys){if(!h._panAnim||!h._panAnim._inProgress)if(m=this._panKeys[l],s.shiftKey&&(m=Ce(m).multiplyBy(3)),h.options.maxBounds&&(m=h._limitOffset(Ce(m),h.options.maxBounds)),h.options.worldCopyJump){var v=h.wrapLatLng(h.unproject(h.project(h.getCenter()).add(m)));h.panTo(v)}else h.panBy(m)}else if(l in this._zoomKeys)h.setZoom(h.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&h._popup&&h._popup.options.closeOnEscapeKey)h.closePopup();else return;vi(s)}}});Xe.addInitHook("addHandler","keyboard",dE),Xe.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hE=si.extend({addHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Fu(s),h=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var m=Math.max(h-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),m),vi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),h=this._map.options.zoomSnap||0;s._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),v=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,w=h?Math.ceil(v/h)*h:v,D=s._limitZoom(l+(this._delta>0?w:-w))-l;this._delta=0,this._startTime=null,D&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+D):s.setZoomAround(this._lastMousePos,l+D))}});Xe.addInitHook("addHandler","scrollWheelZoom",hE);var UR=600;Xe.mergeOptions({tapHold:fe.touchNative&&fe.safari&&fe.mobile,tapTolerance:15});var fE=si.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new Pe(l.clientX,l.clientY),this._holdTimeout=setTimeout(r(function(){this._cancel(),this._isTapValid()&&(Ae(document,"touchend",Ut),Ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),UR),Ae(document,"touchend touchcancel contextmenu",this._cancel,this),Ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){vt(document,"touchend",Ut),vt(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new Pe(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var h=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});h._simulated=!0,l.target.dispatchEvent(h)}});Xe.addInitHook("addHandler","tapHold",fE),Xe.mergeOptions({touchZoom:fe.touch,bounceAtZoomLimits:!0});var pE=si.extend({addHooks:function(){Ne(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){zt(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var h=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(h.add(m)._divideBy(2))),this._startDist=h.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend touchcancel",this._onTouchEnd,this),Ut(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,h=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]),v=h.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(v,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&v<1||this._zoom>l.getMaxZoom()&&v>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,v===1)return}else{var w=h._add(m)._divideBy(2)._subtract(this._centerPoint);if(v===1&&w.x===0&&w.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),A(this._animRequest);var D=r(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x(D,this,!0),Ut(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,A(this._animRequest),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Xe.addInitHook("addHandler","touchZoom",pE),Xe.BoxZoom=cE,Xe.DoubleClickZoom=lE,Xe.Drag=uE,Xe.Keyboard=dE,Xe.ScrollWheelZoom=hE,Xe.TapHold=fE,Xe.TouchZoom=pE,t.Bounds=Ct,t.Browser=fe,t.CRS=Nn,t.Canvas=rE,t.Circle=D_,t.CircleMarker=Cf,t.Class=N,t.Control=qn,t.DivIcon=tE,t.DivOverlay=mr,t.DomEvent=Ft,t.DomUtil=hr,t.Draggable=Hi,t.Evented=Bi,t.FeatureGroup=At,t.GeoJSON=Yr,t.GridLayer=$u,t.Handler=si,t.Icon=ai,t.ImageOverlay=Sf,t.LatLng=Se,t.LatLngBounds=Sn,t.Layer=He,t.LayerGroup=Vt,t.LineUtil=d,t.Map=Xe,t.Marker=If,t.Mixin=lc,t.Path=Lo,t.Point=Pe,t.PolyUtil=Bu,t.Polygon=gc,t.Polyline=Qr,t.Popup=Af,t.PosAnimation=pf,t.Projection=C,t.Rectangle=aE,t.Renderer=Xr,t.SVG=Gu,t.SVGOverlay=eE,t.TileLayer=vc,t.Tooltip=Mf,t.Transformation=pu,t.Util=k,t.VideoOverlay=JC,t.bind=r,t.bounds=wn,t.canvas=oE,t.circle=SR,t.circleMarker=TR,t.control=No,t.divIcon=FR,t.extend=n,t.featureGroup=gn,t.geoJSON=XC,t.geoJson=PR,t.gridLayer=VR,t.icon=ci,t.imageOverlay=kR,t.latLng=Ye,t.latLngBounds=_t,t.layerGroup=nt,t.map=mf,t.marker=DR,t.point=Ce,t.polygon=MR,t.polyline=AR,t.popup=OR,t.rectangle=zR,t.setOptions=I,t.stamp=a,t.svg=sE,t.svgOverlay=NR,t.tileLayer=nE,t.tooltip=LR,t.transformation=ar,t.version=e,t.videoOverlay=RR;var HR=window.L;t.noConflict=function(){return window.L=HR,this},window.L=t})});var TE=null;var L_=1,SE=Symbol("SIGNAL");function Ke(t){let e=TE;return TE=t,e}var AE={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eN(t){if(!(B_(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===L_)){if(!t.producerMustRecompute(t)&&!F_(t)){t.dirty=!1,t.lastCleanEpoch=L_;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=L_}}function ME(t){return t&&(t.nextProducerIndex=0),Ke(t)}function PE(t,e){if(Ke(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(B_(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)V_(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function F_(t){Lf(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(eN(n),i!==n.version))return!0}return!1}function kE(t){if(Lf(t),B_(t))for(let e=0;e<t.producerNode.length;e++)V_(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function V_(t,e){if(tN(t),Lf(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)V_(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];Lf(r),r.producerIndexOfThis[i]=e}}function B_(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Lf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function tN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function nN(){throw new Error}var iN=nN;function RE(t){iN=t}function ye(t){return typeof t=="function"}function bc(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Ff=bc(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Us(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Pt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(ye(i))try{i()}catch(o){e=o instanceof Ff?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{NE(o)}catch(a){e=e??[],a instanceof Ff?e=[...e,...a.errors]:e.push(a)}}if(e)throw new Ff(e)}}add(e){var n;if(e&&e!==this)if(this.closed)NE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Us(n,e)}remove(e){let{_finalizers:n}=this;n&&Us(n,e),e instanceof t&&e._removeParent(this)}};Pt.EMPTY=(()=>{let t=new Pt;return t.closed=!0,t})();var j_=Pt.EMPTY;function Vf(t){return t instanceof Pt||t&&"closed"in t&&ye(t.remove)&&ye(t.add)&&ye(t.unsubscribe)}function NE(t){ye(t)?t():t.unsubscribe()}var $i={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wc={setTimeout(t,e,...n){let{delegate:i}=wc;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=wc;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Bf(t){wc.setTimeout(()=>{let{onUnhandledError:e}=$i;if(e)e(t);else throw t})}function Ku(){}var OE=z_("C",void 0,void 0);function LE(t){return z_("E",void 0,t)}function FE(t){return z_("N",t,void 0)}function z_(t,e,n){return{kind:t,value:e,error:n}}var Hs=null;function Ic(t){if($i.useDeprecatedSynchronousErrorHandling){let e=!Hs;if(e&&(Hs={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Hs;if(Hs=null,n)throw i}}else t()}function VE(t){$i.useDeprecatedSynchronousErrorHandling&&Hs&&(Hs.errorThrown=!0,Hs.error=t)}var $s=class extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Vf(e)&&e.add(this)):this.destination=sN}static create(e,n,i){return new Jr(e,n,i)}next(e){this.isStopped?H_(FE(e),this):this._next(e)}error(e){this.isStopped?H_(LE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?H_(OE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rN=Function.prototype.bind;function U_(t,e){return rN.call(t,e)}var $_=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){jf(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){jf(i)}else jf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){jf(n)}}},Jr=class extends $s{constructor(e,n,i){super();let r;if(ye(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&$i.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&U_(e.next,o),error:e.error&&U_(e.error,o),complete:e.complete&&U_(e.complete,o)}):r=e}this.destination=new $_(r)}};function jf(t){$i.useDeprecatedSynchronousErrorHandling?VE(t):Bf(t)}function oN(t){throw t}function H_(t,e){let{onStoppedNotification:n}=$i;n&&wc.setTimeout(()=>n(t,e))}var sN={closed:!0,next:Ku,error:oN,complete:Ku};var Cc=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vn(t){return t}function q_(...t){return G_(t)}function G_(t){return t.length===0?Vn:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var Oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=cN(n)?n:new Jr(n,i,r);return Ic(()=>{let{operator:a,source:c}=this;o.add(a?a.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=BE(i),new i((r,o)=>{let a=new Jr({next:c=>{try{n(c)}catch(u){o(u),a.unsubscribe()}},error:o,complete:r});this.subscribe(a)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Cc](){return this}pipe(...n){return G_(n)(this)}toPromise(n){return n=BE(n),new n((i,r)=>{let o;this.subscribe(a=>o=a,a=>r(a),()=>i(o))})}}return t.create=e=>new t(e),t})();function BE(t){var e;return(e=t??$i.Promise)!==null&&e!==void 0?e:Promise}function aN(t){return t&&ye(t.next)&&ye(t.error)&&ye(t.complete)}function cN(t){return t&&t instanceof $s||aN(t)&&Vf(t)}function W_(t){return ye(t?.lift)}function ke(t){return e=>{if(W_(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Le(t,e,n,i,r){return new Z_(t,e,n,i,r)}var Z_=class extends $s{constructor(e,n,i,r,o,a){super(e),this.onFinalize=o,this.shouldUnsubscribe=a,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=r?function(c){try{r(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ec(){return ke((t,e)=>{let n=null;t._refCount++;let i=Le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var xc=class extends Oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,W_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;let n=this.getSubject();e.add(this.source.subscribe(Le(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return Ec()(this)}};var jE=bc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Re=(()=>{class t extends Oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new zf(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new jE}next(n){Ic(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Ic(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Ic(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?j_:(this.currentObservers=null,o.push(n),new Pt(()=>{this.currentObservers=null,Us(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new Oe;return n.source=this,n}}return t.create=(e,n)=>new zf(e,n),t})(),zf=class extends Re{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:j_}};var dn=class extends Re{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var Qu={now(){return(Qu.delegate||Date).now()},delegate:void 0};var Uf=class extends Re{constructor(e=1/0,n=1/0,i=Qu){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:a}=this;n||(i.push(e),!r&&i.push(o.now()+a)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,o=r.slice();for(let a=0;a<o.length&&!e.closed;a+=i?1:2)e.next(o[a]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,o=(r?1:2)*e;if(e<1/0&&o<i.length&&i.splice(0,i.length-o),!r){let a=n.now(),c=0;for(let u=1;u<i.length&&i[u]<=a;u+=2)c=u;c&&i.splice(0,c+1)}}};var Hf=class extends Pt{constructor(e,n){super()}schedule(e,n=0){return this}};var Yu={setInterval(t,e,...n){let{delegate:i}=Yu;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Yu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Dc=class extends Hf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Yu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Yu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Us(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Tc=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Tc.now=Qu.now;var Sc=class extends Tc{constructor(e,n=Tc.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var _r=new Sc(Dc),K_=_r;var $f=class extends Dc{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var qf=class extends Sc{};var Q_=new qf($f);var Bn=new Oe(t=>t.complete());function Gf(t){return t&&ye(t.schedule)}function Y_(t){return t[t.length-1]}function zE(t){return ye(Y_(t))?t.pop():void 0}function vr(t){return Gf(Y_(t))?t.pop():void 0}function UE(t,e){return typeof Y_(t)=="number"?t.pop():e}var Ac=t=>t&&typeof t.length=="number"&&typeof t!="function";function Wf(t){return ye(t?.then)}function Zf(t){return ye(t[Cc])}function Kf(t){return Symbol.asyncIterator&&ye(t?.[Symbol.asyncIterator])}function Qf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function lN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Yf=lN();function Xf(t){return ye(t?.[Yf])}function Jf(t){return yE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield Rf(n.read());if(r)return yield Rf(void 0);yield yield Rf(i)}}finally{n.releaseLock()}})}function ep(t){return ye(t?.getReader)}function Et(t){if(t instanceof Oe)return t;if(t!=null){if(Zf(t))return uN(t);if(Ac(t))return dN(t);if(Wf(t))return hN(t);if(Kf(t))return HE(t);if(Xf(t))return fN(t);if(ep(t))return pN(t)}throw Qf(t)}function uN(t){return new Oe(e=>{let n=t[Cc]();if(ye(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dN(t){return new Oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function hN(t){return new Oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Bf)})}function fN(t){return new Oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function HE(t){return new Oe(e=>{mN(t,e).catch(n=>e.error(n))})}function pN(t){return HE(Jf(t))}function mN(t,e){var n,i,r,o;return vE(this,void 0,void 0,function*(){try{for(n=bE(t);i=yield n.next(),!i.done;){let a=i.value;if(e.next(a),e.closed)return}}catch(a){r={error:a}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function Wn(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function bi(t,e=0){return ke((n,i)=>{n.subscribe(Le(i,r=>Wn(i,t,()=>i.next(r),e),()=>Wn(i,t,()=>i.complete(),e),r=>Wn(i,t,()=>i.error(r),e)))})}function qi(t,e=0){return ke((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function $E(t,e){return Et(t).pipe(qi(e),bi(e))}function qE(t,e){return Et(t).pipe(qi(e),bi(e))}function GE(t,e){return new Oe(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function WE(t,e){return new Oe(n=>{let i;return Wn(n,e,()=>{i=t[Yf](),Wn(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(a){n.error(a);return}o?n.complete():n.next(r)},0,!0)}),()=>ye(i?.return)&&i.return()})}function tp(t,e){if(!t)throw new Error("Iterable cannot be null");return new Oe(n=>{Wn(n,e,()=>{let i=t[Symbol.asyncIterator]();Wn(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function ZE(t,e){return tp(Jf(t),e)}function KE(t,e){if(t!=null){if(Zf(t))return $E(t,e);if(Ac(t))return GE(t,e);if(Wf(t))return qE(t,e);if(Kf(t))return tp(t,e);if(Xf(t))return WE(t,e);if(ep(t))return ZE(t,e)}throw Qf(t)}function yt(t,e){return e?KE(t,e):Et(t)}function ge(...t){let e=vr(t);return yt(t,e)}function Mc(t,e){let n=ye(t)?t:()=>t,i=r=>r.error(n());return new Oe(e?r=>e.schedule(i,0,r):i)}function np(t){return!!t&&(t instanceof Oe||ye(t.lift)&&ye(t.subscribe))}var eo=bc(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function QE(t){return t instanceof Date&&!isNaN(t)}function be(t,e){return ke((n,i)=>{let r=0;n.subscribe(Le(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:gN}=Array;function _N(t,e){return gN(e)?t(...e):t(e)}function ip(t){return be(e=>_N(t,e))}var{isArray:vN}=Array,{getPrototypeOf:yN,prototype:bN,keys:wN}=Object;function YE(t){if(t.length===1){let e=t[0];if(vN(e))return{args:e,keys:null};if(IN(e)){let n=wN(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function IN(t){return t&&typeof t=="object"&&yN(t)===bN}function XE(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Pc(...t){let e=vr(t),n=zE(t),{args:i,keys:r}=YE(t);if(i.length===0)return yt([],e);let o=new Oe(CN(i,e,r?a=>XE(r,a):Vn));return n?o.pipe(ip(n)):o}function CN(t,e,n=Vn){return i=>{JE(e,()=>{let{length:r}=t,o=new Array(r),a=r,c=r;for(let u=0;u<r;u++)JE(e,()=>{let f=yt(t[u],e),p=!1;f.subscribe(Le(i,_=>{o[u]=_,p||(p=!0,c--),c||i.next(n(o.slice()))},()=>{--a||i.complete()}))},i)},i)}}function JE(t,e,n){t?Wn(n,t,e):e()}function ex(t,e,n,i,r,o,a,c){let u=[],f=0,p=0,_=!1,b=()=>{_&&!u.length&&!f&&e.complete()},I=P=>f<i?M(P):u.push(P),M=P=>{o&&e.next(P),f++;let F=!1;Et(n(P,p++)).subscribe(Le(e,W=>{r?.(W),o?I(W):e.next(W)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;u.length&&f<i;){let W=u.shift();a?Wn(e,a,()=>M(W)):M(W)}b()}catch(W){e.error(W)}}))};return t.subscribe(Le(e,I,()=>{_=!0,b()})),()=>{c?.()}}function Kt(t,e,n=1/0){return ye(e)?Kt((i,r)=>be((o,a)=>e(i,o,r,a))(Et(t(i,r))),n):(typeof e=="number"&&(n=e),ke((i,r)=>ex(i,r,t,n)))}function Xu(t=1/0){return Kt(Vn,t)}function tx(){return Xu(1)}function Vo(...t){return tx()(yt(t,vr(t)))}function rp(t){return new Oe(e=>{Et(t()).subscribe(e)})}var EN=["addListener","removeListener"],xN=["addEventListener","removeEventListener"],DN=["on","off"];function Ju(t,e,n,i){if(ye(n)&&(i=n,n=void 0),i)return Ju(t,e,n).pipe(ip(i));let[r,o]=AN(t)?xN.map(a=>c=>t[a](e,c,n)):TN(t)?EN.map(nx(t,e)):SN(t)?DN.map(nx(t,e)):[];if(!r&&Ac(t))return Kt(a=>Ju(a,e,n))(Et(t));if(!r)throw new TypeError("Invalid event target");return new Oe(a=>{let c=(...u)=>a.next(1<u.length?u:u[0]);return r(c),()=>o(c)})}function nx(t,e){return n=>i=>t[n](e,i)}function TN(t){return ye(t.addListener)&&ye(t.removeListener)}function SN(t){return ye(t.on)&&ye(t.off)}function AN(t){return ye(t.addEventListener)&&ye(t.removeEventListener)}function ix(t=0,e,n=K_){let i=-1;return e!=null&&(Gf(e)?n=e:i=e),new Oe(r=>{let o=QE(t)?+t-n.now():t;o<0&&(o=0);let a=0;return n.schedule(function(){r.closed||(r.next(a++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function ed(...t){let e=vr(t),n=UE(t,1/0),i=t;return i.length?i.length===1?Et(i[0]):Xu(n)(yt(i,e)):Bn}function $t(t,e){return ke((n,i)=>{let r=0;n.subscribe(Le(i,o=>t.call(e,o,r++)&&i.next(o)))})}function rx(t){return ke((e,n)=>{let i=!1,r=null,o=null,a=!1,c=()=>{if(o?.unsubscribe(),o=null,i){i=!1;let f=r;r=null,n.next(f)}a&&n.complete()},u=()=>{o=null,a&&n.complete()};e.subscribe(Le(n,f=>{i=!0,r=f,o||Et(t(f)).subscribe(o=Le(n,c,u))},()=>{a=!0,(!i||!o||o.closed)&&n.complete()}))})}function op(t,e=_r){return rx(()=>ix(t,e))}function Bo(t){return ke((e,n)=>{let i=null,r=!1,o;i=e.subscribe(Le(n,void 0,void 0,a=>{o=Et(t(a,Bo(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function ox(t,e,n,i,r){return(o,a)=>{let c=n,u=e,f=0;o.subscribe(Le(a,p=>{let _=f++;u=c?t(u,p,_):(c=!0,p),i&&a.next(u)},r&&(()=>{c&&a.next(u),a.complete()})))}}function kc(t,e){return ye(e)?Kt(t,e,1):Kt(t,1)}function sp(t,e=_r){return ke((n,i)=>{let r=null,o=null,a=null,c=()=>{if(r){r.unsubscribe(),r=null;let f=o;o=null,i.next(f)}};function u(){let f=a+t,p=e.now();if(p<f){r=this.schedule(void 0,f-p),i.add(r);return}c()}n.subscribe(Le(i,f=>{o=f,a=e.now(),r||(r=e.schedule(u,t),i.add(r))},()=>{c(),i.complete()},void 0,()=>{o=r=null}))})}function jo(t){return ke((e,n)=>{let i=!1;e.subscribe(Le(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function wi(t){return t<=0?()=>Bn:ke((e,n)=>{let i=0;e.subscribe(Le(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function X_(t){return be(()=>t)}function Rc(t,e=Vn){return t=t??MN,ke((n,i)=>{let r,o=!0;n.subscribe(Le(i,a=>{let c=e(a);(o||!t(r,c))&&(o=!1,r=c,i.next(a))}))})}function MN(t,e){return t===e}function ap(t=PN){return ke((e,n)=>{let i=!1;e.subscribe(Le(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function PN(){return new eo}function td(t){return ke((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ii(t,e){let n=arguments.length>=2;return i=>i.pipe(t?$t((r,o)=>t(r,o,i)):Vn,wi(1),n?jo(e):ap(()=>new eo))}function Nc(t){return t<=0?()=>Bn:ke((e,n)=>{let i=[];e.subscribe(Le(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function J_(t,e){let n=arguments.length>=2;return i=>i.pipe(t?$t((r,o)=>t(r,o,i)):Vn,Nc(1),n?jo(e):ap(()=>new eo))}function Oc(){return ke((t,e)=>{let n,i=!1;t.subscribe(Le(e,r=>{let o=n;n=r,i&&e.next([o,r]),i=!0}))})}function qs(t,e){return ke(ox(t,e,arguments.length>=2,!0))}function sx(t={}){let{connector:e=()=>new Re,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return o=>{let a,c,u,f=0,p=!1,_=!1,b=()=>{c?.unsubscribe(),c=void 0},I=()=>{b(),a=u=void 0,p=_=!1},M=()=>{let P=a;I(),P?.unsubscribe()};return ke((P,F)=>{f++,!_&&!p&&b();let W=u=u??e();F.add(()=>{f--,f===0&&!_&&!p&&(c=ev(M,r))}),W.subscribe(F),!a&&f>0&&(a=new Jr({next:X=>W.next(X),error:X=>{_=!0,b(),c=ev(I,n,X),W.error(X)},complete:()=>{p=!0,b(),c=ev(I,i),W.complete()}}),Et(P).subscribe(a))})(o)}}function ev(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new Jr({next:()=>{i.unsubscribe(),t()}});return Et(e(...n)).subscribe(i)}function nd(t,e,n){let i,r=!1;return t&&typeof t=="object"?{bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=t:i=t??1/0,sx({connector:()=>new Uf(i,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function id(t){return $t((e,n)=>t<=n)}function yr(...t){let e=vr(t);return ke((n,i)=>{(e?Vo(t,n,e):Vo(t,n)).subscribe(i)})}function kt(t,e){return ke((n,i)=>{let r=null,o=0,a=!1,c=()=>a&&!r&&i.complete();n.subscribe(Le(i,u=>{r?.unsubscribe();let f=0,p=o++;Et(t(u,p)).subscribe(r=Le(i,_=>i.next(e?e(u,_,p,f++):_),()=>{r=null,c()}))},()=>{a=!0,c()}))})}function cp(t,e){return ye(e)?kt(()=>t,e):kt(()=>t)}function Ci(t){return ke((e,n)=>{Et(t).subscribe(Le(n,()=>n.complete(),Ku)),!n.closed&&e.subscribe(n)})}function rn(t,e,n){let i=ye(t)||e||n?{next:t,error:e,complete:n}:t;return i?ke((r,o)=>{var a;(a=i.subscribe)===null||a===void 0||a.call(i);let c=!0;r.subscribe(Le(o,u=>{var f;(f=i.next)===null||f===void 0||f.call(i,u),o.next(u)},()=>{var u;c=!1,(u=i.complete)===null||u===void 0||u.call(i),o.complete()},u=>{var f;c=!1,(f=i.error)===null||f===void 0||f.call(i,u),o.error(u)},()=>{var u,f;c&&((u=i.unsubscribe)===null||u===void 0||u.call(i)),(f=i.finalize)===null||f===void 0||f.call(i)}))}):Vn}var jx="https://g.co/ng/security#xss",xe=class extends Error{constructor(e,n){super(ay(e,n)),this.code=e}};function ay(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function bd(t){return{toString:t}.toString()}var lp="__parameters__";function kN(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function RN(t,e,n){return bd(()=>{let i=kN(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let a=new r(...o);return c.annotation=a,c;function c(u,f,p){let _=u.hasOwnProperty(lp)?u[lp]:Object.defineProperty(u,lp,{value:[]})[lp];for(;_.length<=p;)_.push(null);return(_[p]=_[p]||[]).push(a),u}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var to=globalThis;function xt(t){for(let e in t)if(t[e]===xt)return e;throw Error("Could not find renamed property on target object.")}function NN(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function jn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(jn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function gv(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var ON=xt({__forward_ref__:xt});function zx(t){return t.__forward_ref__=zx,t.toString=function(){return jn(this())},t}function Ei(t){return Ux(t)?t():t}function Ux(t){return typeof t=="function"&&t.hasOwnProperty(ON)&&t.__forward_ref__===zx}function ie(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ht(t){return{providers:t.providers||[],imports:t.imports||[]}}function zp(t){return ax(t,$x)||ax(t,qx)}function Hx(t){return zp(t)!==null}function ax(t,e){return t.hasOwnProperty(e)?t[e]:null}function LN(t){let e=t&&(t[$x]||t[qx]);return e||null}function cx(t){return t&&(t.hasOwnProperty(lx)||t.hasOwnProperty(FN))?t[lx]:null}var $x=xt({\u0275prov:xt}),lx=xt({\u0275inj:xt}),qx=xt({ngInjectableDef:xt}),FN=xt({ngInjectorDef:xt}),le=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ie({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Gx(t){return t&&!!t.\u0275providers}var VN=xt({\u0275cmp:xt}),BN=xt({\u0275dir:xt}),jN=xt({\u0275pipe:xt}),zN=xt({\u0275mod:xt}),vp=xt({\u0275fac:xt}),rd=xt({__NG_ELEMENT_ID__:xt}),ux=xt({__NG_ENV_ID__:xt});function zc(t){return typeof t=="string"?t:t==null?"":String(t)}function UN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zc(t)}function HN(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new xe(-200,t)}function cy(t,e){throw new xe(-201,!1)}var We=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(We||{}),_v;function Wx(){return _v}function Zn(t){let e=_v;return _v=t,e}function Zx(t,e,n){let i=zp(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&We.Optional)return null;if(e!==void 0)return e;cy(t,"Injector")}var $N={},od=$N,vv="__NG_DI_FLAG__",yp="ngTempTokenPath",qN="ngTokenPath",GN=/\n/gm,WN="\u0275",dx="__source",Bc;function ZN(){return Bc}function zo(t){let e=Bc;return Bc=t,e}function KN(t,e=We.Default){if(Bc===void 0)throw new xe(-203,!1);return Bc===null?Zx(t,void 0,e):Bc.get(t,e&We.Optional?null:void 0,e)}function V(t,e=We.Default){return(Wx()||KN)(Ei(t),e)}function ee(t,e=We.Default){return V(t,Up(e))}function Up(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function yv(t){let e=[];for(let n=0;n<t.length;n++){let i=Ei(t[n]);if(Array.isArray(i)){if(i.length===0)throw new xe(900,!1);let r,o=We.Default;for(let a=0;a<i.length;a++){let c=i[a],u=YN(c);typeof u=="number"?u===-1?r=c.token:o|=u:r=c}e.push(V(r,o))}else e.push(V(i))}return e}function QN(t,e){return t[vv]=e,t.prototype[vv]=e,t}function YN(t){return t[vv]}function XN(t,e,n,i){let r=t[yp];throw e[dx]&&r.unshift(e[dx]),t.message=JN(`
`+t.message,r,n,i),t[qN]=r,t[yp]=null,t}function JN(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==WN?t.slice(2):t;let r=jn(e);if(Array.isArray(e))r=e.map(jn).join(" -> ");else if(typeof e=="object"){let o=[];for(let a in e)if(e.hasOwnProperty(a)){let c=e[a];o.push(a+":"+(typeof c=="string"?JSON.stringify(c):jn(c)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(GN,`
  `)}`}var Hp=QN(RN("Optional"),8);function Qs(t,e){let n=t.hasOwnProperty(vp);return n?t[vp]:null}function eO(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function tO(t){return t.flat(Number.POSITIVE_INFINITY)}function ly(t,e){t.forEach(n=>Array.isArray(n)?ly(n,e):e(n))}function Kx(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function bp(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function nO(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function iO(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function uy(t,e,n){let i=wd(t,e);return i>=0?t[i|1]=n:(i=~i,iO(t,i,e,n)),i}function tv(t,e){let n=wd(t,e);if(n>=0)return t[n|1]}function wd(t,e){return rO(t,e,1)}function rO(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),a=t[o<<n];if(e===a)return o<<n;a>e?r=o:i=o+1}return~(r<<n)}var Uc={},Kn=[],Hc=new le(""),Qx=new le("",-1),Yx=new le(""),wp=class{get(e,n=od){if(n===od){let i=new Error(`NullInjectorError: No provider for ${jn(e)}!`);throw i.name="NullInjectorError",i}return n}},Xx=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Xx||{}),Ir=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ir||{}),mt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(mt||{});function oO(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function bv(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],a=n[i++],c=n[i++];t.setAttribute(e,a,c,o)}else{let o=r,a=n[++i];aO(o)?t.setProperty(e,o,a):t.setAttribute(e,o,a),i++}}return i}function sO(t){return t===3||t===4||t===6}function aO(t){return t.charCodeAt(0)===64}function sd(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?hx(t,n,r,null,e[++i]):hx(t,n,r,null,null))}}return t}function hx(t,e,n,i,r){let o=0,a=t.length;if(e===-1)a=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){a=-1;break}else if(c>e){a=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}a!==-1&&(t.splice(a,0,e),o=a+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var Jx="ng-template";function cO(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&oO(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(dy(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function dy(t){return t.type===4&&t.value!==Jx}function lO(t,e,n){let i=t.type===4&&!n?Jx:t.value;return e===i}function uO(t,e,n){let i=4,r=t.attrs,o=r!==null?fO(r):0,a=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!a&&!Gi(i)&&!Gi(u))return!1;if(a&&Gi(u))continue;a=!1,i=u|i&1;continue}if(!a)if(i&4){if(i=2|i&1,u!==""&&!lO(t,u,n)||u===""&&e.length===1){if(Gi(i))return!1;a=!0}}else if(i&8){if(r===null||!cO(t,r,u,n)){if(Gi(i))return!1;a=!0}}else{let f=e[++c],p=dO(u,r,dy(t),n);if(p===-1){if(Gi(i))return!1;a=!0;continue}if(f!==""){let _;if(p>o?_="":_=r[p+1].toLowerCase(),i&2&&f!==_){if(Gi(i))return!1;a=!0}}}}return Gi(i)||a}function Gi(t){return(t&1)===0}function dO(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let a=e[r];if(a===t)return r;if(a===3||a===6)o=!0;else if(a===1||a===2){let c=e[++r];for(;typeof c=="string";)c=e[++r];continue}else{if(a===4)break;if(a===0){r+=4;continue}}r+=o?1:2}return-1}else return pO(e,t)}function eD(t,e,n=!1){for(let i=0;i<e.length;i++)if(uO(t,e[i],n))return!0;return!1}function hO(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function fO(t){for(let e=0;e<t.length;e++){let n=t[e];if(sO(n))return e}return t.length}function pO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function mO(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function fx(t,e){return t?":not("+e.trim()+")":e}function gO(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let a=t[n];if(typeof a=="string")if(i&2){let c=t[++n];r+="["+a+(c.length>0?'="'+c+'"':"")+"]"}else i&8?r+="."+a:i&4&&(r+=" "+a);else r!==""&&!Gi(a)&&(e+=fx(o,r),r=""),i=a,o=o||!Gi(i);n++}return r!==""&&(e+=fx(o,r)),e}function _O(t){return t.map(gO).join(",")}function vO(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!Gi(r))break;r=o}i++}return{attrs:e,classes:n}}function it(t){return bd(()=>{let e=oD(t),n=Mt(ne({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Xx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ir.Emulated,styles:t.styles||Kn,_:null,schemas:t.schemas||null,tView:null,id:""});sD(n);let i=t.dependencies;return n.directiveDefs=mx(i,!1),n.pipeDefs=mx(i,!0),n.id=wO(n),n})}function yO(t){return Ys(t)||tD(t)}function bO(t){return t!==null}function ft(t){return bd(()=>({type:t.type,bootstrap:t.bootstrap||Kn,declarations:t.declarations||Kn,imports:t.imports||Kn,exports:t.exports||Kn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function px(t,e){if(t==null)return Uc;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,a,c=mt.None;Array.isArray(r)?(c=r[0],o=r[1],a=r[2]??o):(o=r,a=r),e?(n[o]=c!==mt.None?[i,c]:i,e[o]=a):n[o]=i}return n}function Ot(t){return bd(()=>{let e=oD(t);return sD(e),e})}function xr(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ys(t){return t[VN]||null}function tD(t){return t[BN]||null}function nD(t){return t[jN]||null}function iD(t){let e=Ys(t)||tD(t)||nD(t);return e!==null?e.standalone:!1}function rD(t,e){let n=t[zN]||null;if(!n&&e===!0)throw new Error(`Type ${jn(t)} does not have '\u0275mod' property.`);return n}function oD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Uc,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Kn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:px(t.inputs,e),outputs:px(t.outputs),debugInfo:null}}function sD(t){t.features?.forEach(e=>e(t))}function mx(t,e){if(!t)return null;let n=e?nD:yO;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(bO)}function wO(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $p(t){return{\u0275providers:t}}function hy(...t){return{\u0275providers:aD(!0,t),\u0275fromNgModule:!0}}function aD(t,...e){let n=[],i=new Set,r,o=a=>{n.push(a)};return ly(e,a=>{let c=a;wv(c,o,[],i)&&(r||=[],r.push(c))}),r!==void 0&&cD(r,o),n}function cD(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];fy(r,o=>{e(o,i)})}}function wv(t,e,n,i){if(t=Ei(t),!t)return!1;let r=null,o=cx(t),a=!o&&Ys(t);if(!o&&!a){let u=t.ngModule;if(o=cx(u),o)r=u;else return!1}else{if(a&&!a.standalone)return!1;r=t}let c=i.has(r);if(a){if(c)return!1;if(i.add(r),a.dependencies){let u=typeof a.dependencies=="function"?a.dependencies():a.dependencies;for(let f of u)wv(f,e,n,i)}}else if(o){if(o.imports!=null&&!c){i.add(r);let f;try{ly(o.imports,p=>{wv(p,e,n,i)&&(f||=[],f.push(p))})}finally{}f!==void 0&&cD(f,e)}if(!c){let f=Qs(r)||(()=>new r);e({provide:r,useFactory:f,deps:Kn},r),e({provide:Yx,useValue:r,multi:!0},r),e({provide:Hc,useValue:()=>V(r),multi:!0},r)}let u=o.providers;if(u!=null&&!c){let f=t;fy(u,p=>{e(p,f)})}}else return!1;return r!==t&&t.providers!==void 0}function fy(t,e){for(let n of t)Gx(n)&&(n=n.\u0275providers),Array.isArray(n)?fy(n,e):e(n)}var IO=xt({provide:String,useValue:xt});function lD(t){return t!==null&&typeof t=="object"&&IO in t}function CO(t){return!!(t&&t.useExisting)}function EO(t){return!!(t&&t.useFactory)}function Iv(t){return typeof t=="function"}var qp=new le(""),hp={},xO={},nv;function py(){return nv===void 0&&(nv=new wp),nv}var Qn=class{},ad=class extends Qn{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ev(e,a=>this.processProvider(a)),this.records.set(Qx,Lc(void 0,this)),r.has("environment")&&this.records.set(Qn,Lc(void 0,this));let o=this.records.get(qp);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Yx,Kn,We.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ke(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ke(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=zo(this),i=Zn(void 0),r;try{return e()}finally{zo(n),Zn(i)}}get(e,n=od,i=We.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ux))return e[ux](this);i=Up(i);let r,o=zo(this),a=Zn(void 0);try{if(!(i&We.SkipSelf)){let u=this.records.get(e);if(u===void 0){let f=PO(e)&&zp(e);f&&this.injectableDefInScope(f)?u=Lc(Cv(e),hp):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let c=i&We.Self?py():this.parent;return n=i&We.Optional&&n===od?null:n,c.get(e,n)}catch(c){if(c.name==="NullInjectorError"){if((c[yp]=c[yp]||[]).unshift(jn(e)),o)throw c;return XN(c,e,"R3InjectorError",this.source)}else throw c}finally{Zn(a),zo(o)}}resolveInjectorInitializers(){let e=Ke(null),n=zo(this),i=Zn(void 0),r;try{let o=this.get(Hc,Kn,We.Self);for(let a of o)a()}finally{zo(n),Zn(i),Ke(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(jn(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(e){e=Ei(e);let n=Iv(e)?e:Ei(e&&e.provide),i=TO(e);if(!Iv(e)&&e.multi===!0){let r=this.records.get(n);r||(r=Lc(void 0,hp,!0),r.factory=()=>yv(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=Ke(null);try{return n.value===hp&&(n.value=xO,n.value=n.factory()),typeof n.value=="object"&&n.value&&MO(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ke(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ei(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Cv(t){let e=zp(t),n=e!==null?e.factory:Qs(t);if(n!==null)return n;if(t instanceof le)throw new xe(204,!1);if(t instanceof Function)return DO(t);throw new xe(204,!1)}function DO(t){if(t.length>0)throw new xe(204,!1);let n=LN(t);return n!==null?()=>n.factory(t):()=>new t}function TO(t){if(lD(t))return Lc(void 0,t.useValue);{let e=SO(t);return Lc(e,hp)}}function SO(t,e,n){let i;if(Iv(t)){let r=Ei(t);return Qs(r)||Cv(r)}else if(lD(t))i=()=>Ei(t.useValue);else if(EO(t))i=()=>t.useFactory(...yv(t.deps||[]));else if(CO(t))i=()=>V(Ei(t.useExisting));else{let r=Ei(t&&(t.useClass||t.provide));if(AO(t))i=()=>new r(...yv(t.deps));else return Qs(r)||Cv(r)}return i}function Lc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function AO(t){return!!t.deps}function MO(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PO(t){return typeof t=="function"||typeof t=="object"&&t instanceof le}function Ev(t,e){for(let n of t)Array.isArray(n)?Ev(n,e):n&&Gx(n)?Ev(n.\u0275providers,e):e(n)}function oo(t,e){t instanceof ad&&t.assertNotDestroyed();let n,i=zo(t),r=Zn(void 0);try{return e()}finally{zo(i),Zn(r)}}function uD(){return Wx()!==void 0||ZN()!=null}function dD(t){if(!uD())throw new xe(-203,!1)}function kO(t){return typeof t=="function"}var Dr=0,Fe=1,De=2,En=3,Zi=4,ui=5,$c=6,cd=7,Mn=8,qc=9,Ki=10,Qt=11,ld=12,gx=13,Qc=14,xi=15,Id=16,Fc=17,no=18,Gp=19,hD=20,Uo=21,iv=22,Xs=23,xn=25,my=1;var Js=7,Ip=8,Gc=9,Pn=10,gy=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(gy||{});function Zs(t){return Array.isArray(t)&&typeof t[my]=="object"}function so(t){return Array.isArray(t)&&t[my]===!0}function _y(t){return(t.flags&4)!==0}function Wp(t){return t.componentOffset>-1}function Zp(t){return(t.flags&1)===1}function Ho(t){return!!t.template}function RO(t){return(t[De]&512)!==0}var xv=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function fD(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Qi(){return pD}function pD(t){return t.type.prototype.ngOnChanges&&(t.setInput=OO),NO}Qi.ngInherit=!0;function NO(){let t=gD(this),e=t?.current;if(e){let n=t.previous;if(n===Uc)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function OO(t,e,n,i,r){let o=this.declaredInputs[i],a=gD(t)||LO(t,{previous:Uc,current:null}),c=a.current||(a.current={}),u=a.previous,f=u[o];c[o]=new xv(f&&f.currentValue,n,u===Uc),fD(t,e,r,n)}var mD="__ngSimpleChanges__";function gD(t){return t[mD]||null}function LO(t,e){return t[mD]=e}var _x=null;var br=function(t,e,n){_x?.(t,e,n)},FO="svg",VO="math",BO=!1;function jO(){return BO}function Cr(t){for(;Array.isArray(t);)t=t[Dr];return t}function zO(t){for(;Array.isArray(t);){if(typeof t[my]=="object")return t;t=t[Dr]}return null}function _D(t,e){return Cr(e[t])}function Si(t,e){return Cr(e[t.index])}function vy(t,e){return t.data[e]}function yy(t,e){return t[e]}function Go(t,e){let n=e[t];return Zs(n)?n:n[Dr]}function UO(t){return(t[De]&4)===4}function by(t){return(t[De]&128)===128}function HO(t){return so(t[En])}function Wc(t,e){return e==null?null:t[e]}function vD(t){t[Fc]=0}function $O(t){t[De]&1024||(t[De]|=1024,by(t)&&ud(t))}function qO(t,e){for(;t>0;)e=e[Qc],t--;return e}function wy(t){return!!(t[De]&9216||t[Xs]?.dirty)}function Dv(t){t[Ki].changeDetectionScheduler?.notify(1),wy(t)?ud(t):t[De]&64&&(jO()?(t[De]|=1024,ud(t)):t[Ki].changeDetectionScheduler?.notify())}function ud(t){t[Ki].changeDetectionScheduler?.notify();let e=dd(t);for(;e!==null&&!(e[De]&8192||(e[De]|=8192,!by(e)));)e=dd(e)}function yD(t,e){if((t[De]&256)===256)throw new xe(911,!1);t[Uo]===null&&(t[Uo]=[]),t[Uo].push(e)}function GO(t,e){if(t[Uo]===null)return;let n=t[Uo].indexOf(e);n!==-1&&t[Uo].splice(n,1)}function dd(t){let e=t[En];return so(e)?e[En]:e}var Ue={lFrame:TD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function WO(){return Ue.lFrame.elementDepthCount}function ZO(){Ue.lFrame.elementDepthCount++}function KO(){Ue.lFrame.elementDepthCount--}function bD(){return Ue.bindingsEnabled}function wD(){return Ue.skipHydrationRootTNode!==null}function QO(t){return Ue.skipHydrationRootTNode===t}function YO(){Ue.skipHydrationRootTNode=null}function qe(){return Ue.lFrame.lView}function hn(){return Ue.lFrame.tView}function at(t){return Ue.lFrame.contextLView=t,t[Mn]}function ct(t){return Ue.lFrame.contextLView=null,t}function Yn(){let t=ID();for(;t!==null&&t.type===64;)t=t.parent;return t}function ID(){return Ue.lFrame.currentTNode}function XO(){let t=Ue.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ia(t,e){let n=Ue.lFrame;n.currentTNode=t,n.isParent=e}function Iy(){return Ue.lFrame.isParent}function Cy(){Ue.lFrame.isParent=!1}function JO(){return Ue.lFrame.contextLView}function CD(){let t=Ue.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function eL(){return Ue.lFrame.bindingIndex}function tL(t){return Ue.lFrame.bindingIndex=t}function Yc(){return Ue.lFrame.bindingIndex++}function Ey(t){let e=Ue.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function nL(){return Ue.lFrame.inI18n}function iL(t,e){let n=Ue.lFrame;n.bindingIndex=n.bindingRootIndex=t,Tv(e)}function rL(){return Ue.lFrame.currentDirectiveIndex}function Tv(t){Ue.lFrame.currentDirectiveIndex=t}function xy(t){let e=Ue.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function ED(){return Ue.lFrame.currentQueryIndex}function Dy(t){Ue.lFrame.currentQueryIndex=t}function oL(t){let e=t[Fe];return e.type===2?e.declTNode:e.type===1?t[ui]:null}function xD(t,e,n){if(n&We.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&We.Host);)if(r=oL(o),r===null||(o=o[Qc],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=Ue.lFrame=DD();return i.currentTNode=e,i.lView=t,!0}function Ty(t){let e=DD(),n=t[Fe];Ue.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function DD(){let t=Ue.lFrame,e=t===null?null:t.child;return e===null?TD(t):e}function TD(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function SD(){let t=Ue.lFrame;return Ue.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var AD=SD;function Sy(){let t=SD();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sL(t){return(Ue.lFrame.contextLView=qO(t,Ue.lFrame.contextLView))[Mn]}function ao(){return Ue.lFrame.selectedIndex}function ea(t){Ue.lFrame.selectedIndex=t}function Ay(){let t=Ue.lFrame;return vy(t.tView,t.selectedIndex)}function aL(){return Ue.lFrame.currentNamespace}var MD=!0;function Kp(){return MD}function Qp(t){MD=t}function cL(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let a=pD(e);(n.preOrderHooks??=[]).push(t,a),(n.preOrderCheckHooks??=[]).push(t,a)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Yp(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:f,ngOnDestroy:p}=o;a&&(t.contentHooks??=[]).push(-n,a),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),f&&((t.viewHooks??=[]).push(n,f),(t.viewCheckHooks??=[]).push(n,f)),p!=null&&(t.destroyHooks??=[]).push(n,p)}}function fp(t,e,n){PD(t,e,3,n)}function pp(t,e,n,i){(t[De]&3)===n&&PD(t,e,n,i)}function rv(t,e){let n=t[De];(n&3)===e&&(n&=16383,n+=1,t[De]=n)}function PD(t,e,n,i){let r=i!==void 0?t[Fc]&65535:0,o=i??-1,a=e.length-1,c=0;for(let u=r;u<a;u++)if(typeof e[u+1]=="number"){if(c=e[u],i!=null&&c>=i)break}else e[u]<0&&(t[Fc]+=65536),(c<o||o==-1)&&(lL(t,n,e,u),t[Fc]=(t[Fc]&4294901760)+u+2),u++}function vx(t,e){br(4,t,e);let n=Ke(null);try{e.call(t)}finally{Ke(n),br(5,t,e)}}function lL(t,e,n,i){let r=n[i]<0,o=n[i+1],a=r?-n[i]:n[i],c=t[a];r?t[De]>>14<t[Fc]>>16&&(t[De]&3)===e&&(t[De]+=16384,vx(c,o)):vx(c,o)}var jc=-1,hd=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function uL(t){return t instanceof hd}function dL(t){return(t.flags&8)!==0}function hL(t){return(t.flags&16)!==0}function kD(t){return t!==jc}function Cp(t){return t&32767}function fL(t){return t>>16}function Ep(t,e){let n=fL(t),i=e;for(;n>0;)i=i[Qc],n--;return i}var Sv=!0;function xp(t){let e=Sv;return Sv=t,e}var pL=256,RD=pL-1,ND=5,mL=0,wr={};function gL(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(rd)&&(i=n[rd]),i==null&&(i=n[rd]=mL++);let r=i&RD,o=1<<r;e.data[t+(r>>ND)]|=o}function OD(t,e){let n=LD(t,e);if(n!==-1)return n;let i=e[Fe];i.firstCreatePass&&(t.injectorIndex=e.length,ov(i.data,t),ov(e,null),ov(i.blueprint,null));let r=My(t,e),o=t.injectorIndex;if(kD(r)){let a=Cp(r),c=Ep(r,e),u=c[Fe].data;for(let f=0;f<8;f++)e[o+f]=c[a+f]|u[a+f]}return e[o+8]=r,o}function ov(t,e){t.push(0,0,0,0,0,0,0,0,e)}function LD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function My(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=zD(r),i===null)return jc;if(n++,r=r[Qc],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return jc}function _L(t,e,n){gL(t,e,n)}function FD(t,e,n){if(n&We.Optional||t!==void 0)return t;cy(e,"NodeInjector")}function VD(t,e,n,i){if(n&We.Optional&&i===void 0&&(i=null),!(n&(We.Self|We.Host))){let r=t[qc],o=Zn(void 0);try{return r?r.get(e,i,n&We.Optional):Zx(e,i,n&We.Optional)}finally{Zn(o)}}return FD(i,e,n)}function BD(t,e,n,i=We.Default,r){if(t!==null){if(e[De]&2048&&!(i&We.Self)){let a=wL(t,e,n,i,wr);if(a!==wr)return a}let o=jD(t,e,n,i,wr);if(o!==wr)return o}return VD(e,n,i,r)}function jD(t,e,n,i,r){let o=yL(n);if(typeof o=="function"){if(!xD(e,t,i))return i&We.Host?FD(r,n,i):VD(e,n,i,r);try{let a;if(a=o(i),a==null&&!(i&We.Optional))cy(n);else return a}finally{AD()}}else if(typeof o=="number"){let a=null,c=LD(t,e),u=jc,f=i&We.Host?e[xi][ui]:null;for((c===-1||i&We.SkipSelf)&&(u=c===-1?My(t,e):e[c+8],u===jc||!bx(i,!1)?c=-1:(a=e[Fe],c=Cp(u),e=Ep(u,e)));c!==-1;){let p=e[Fe];if(yx(o,c,p.data)){let _=vL(c,e,n,a,i,f);if(_!==wr)return _}u=e[c+8],u!==jc&&bx(i,e[Fe].data[c+8]===f)&&yx(o,c,e)?(a=p,c=Cp(u),e=Ep(u,e)):c=-1}}return r}function vL(t,e,n,i,r,o){let a=e[Fe],c=a.data[t+8],u=i==null?Wp(c)&&Sv:i!=a&&(c.type&3)!==0,f=r&We.Host&&o===c,p=mp(c,a,n,u,f);return p!==null?Zc(e,a,p,c):wr}function mp(t,e,n,i,r){let o=t.providerIndexes,a=e.data,c=o&1048575,u=t.directiveStart,f=t.directiveEnd,p=o>>20,_=i?c:c+p,b=r?c+p:f;for(let I=_;I<b;I++){let M=a[I];if(I<u&&n===M||I>=u&&M.type===n)return I}if(r){let I=a[u];if(I&&Ho(I)&&I.type===n)return u}return null}function Zc(t,e,n,i){let r=t[n],o=e.data;if(uL(r)){let a=r;a.resolving&&HN(UN(o[n]));let c=xp(a.canSeeViewProviders);a.resolving=!0;let u,f=a.injectImpl?Zn(a.injectImpl):null,p=xD(t,i,We.Default);try{r=t[n]=a.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&cL(n,o[n],e)}finally{f!==null&&Zn(f),xp(c),a.resolving=!1,AD()}}return r}function yL(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(rd)?t[rd]:void 0;return typeof e=="number"?e>=0?e&RD:bL:e}function yx(t,e,n){let i=1<<t;return!!(n[e+(t>>ND)]&i)}function bx(t,e){return!(t&We.Self)&&!(t&We.Host&&e)}var Ks=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return BD(this._tNode,this._lView,e,Up(i),n)}};function bL(){return new Ks(Yn(),qe())}function Xp(t){return bd(()=>{let e=t.prototype.constructor,n=e[vp]||Av(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[vp]||Av(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Av(t){return Ux(t)?()=>{let e=Av(Ei(t));return e&&e()}:Qs(t)}function wL(t,e,n,i,r){let o=t,a=e;for(;o!==null&&a!==null&&a[De]&2048&&!(a[De]&512);){let c=jD(o,a,n,i|We.Self,wr);if(c!==wr)return c;let u=o.parent;if(!u){let f=a[hD];if(f){let p=f.get(n,wr,i);if(p!==wr)return p}u=zD(a),a=a[Qc]}o=u}return r}function zD(t){let e=t[Fe],n=e.type;return n===2?e.declTNode:n===1?t[ui]:null}function wx(t,e=null,n=null,i){let r=UD(t,e,n,i);return r.resolveInjectorInitializers(),r}function UD(t,e=null,n=null,i,r=new Set){let o=[n||Kn,hy(t)];return i=i||(typeof t=="object"?void 0:jn(t)),new ad(o,e||py(),i||null,r)}var vn=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return wx({name:""},r,i,"");{let o=i.name??"";return wx({name:o},i.parent,i.providers,o)}}};e.THROW_IF_NOT_FOUND=od,e.NULL=new wp,e.\u0275prov=ie({token:e,providedIn:"any",factory:()=>V(Qx)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var IL="ngOriginalError";function sv(t){return t[IL]}var Er=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&sv(e);for(;n&&sv(n);)n=sv(n);return n||null}},HD=new le("",{providedIn:"root",factory:()=>ee(Er).handleError.bind(void 0)}),Jp=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=CL,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Mv=class extends Jp{constructor(e){super(),this._lView=e}onDestroy(e){return yD(this._lView,e),()=>GO(this._lView,e)}};function CL(){return new Mv(qe())}function EL(){return Xc(Yn(),qe())}function Xc(t,e){return new Dt(Si(t,e))}var Dt=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=EL;let t=e;return t})();function xL(t){return t instanceof Dt?t.nativeElement:t}var Pv=class extends Re{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,uD()&&(this.destroyRef=ee(Jp,{optional:!0})??void 0)}emit(e){let n=Ke(null);try{super.next(e)}finally{Ke(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),a=i;if(e&&typeof e=="object"){let u=e;r=u.next?.bind(u),o=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(o=av(o),r&&(r=av(r)),a&&(a=av(a)));let c=super.subscribe({next:r,error:o,complete:a});return e instanceof Pt&&e.add(c),c}};function av(t){return e=>{setTimeout(t,void 0,e)}}var $e=Pv;function DL(){return this._results[Symbol.iterator]()}var Dp=class t{get changes(){return this._changes??=new $e}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=DL)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=tO(e);(this._changesDetected=!eO(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function $D(t){return(t.flags&128)===128}var qD=new Map,TL=0;function SL(){return TL++}function AL(t){qD.set(t[Gp],t)}function ML(t){qD.delete(t[Gp])}var Ix="__ngContext__";function $o(t,e){Zs(e)?(t[Ix]=e[Gp],AL(e)):t[Ix]=e}function GD(t){return ZD(t[ld])}function WD(t){return ZD(t[Zi])}function ZD(t){for(;t!==null&&!so(t);)t=t[Zi];return t}var kv;function KD(t){kv=t}function PL(){if(kv!==void 0)return kv;if(typeof document<"u")return document;throw new xe(210,!1)}var em=new le("",{providedIn:"root",factory:()=>kL}),kL="ng",Py=new le(""),zn=new le("",{providedIn:"platform",factory:()=>"unknown"});var ra=new le(""),Cd=new le("",{providedIn:"root",factory:()=>PL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var RL="h",NL="b";var OL=()=>null;function ky(t,e,n=!1){return OL(t,e,n)}var QD=!1,LL=new le("",{providedIn:"root",factory:()=>QD});var Tp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jx})`}};function Ed(t){return t instanceof Tp?t.changingThisBreaksApplicationSecurity:t}function YD(t,e){let n=FL(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${jx})`)}return n===e}function FL(t){return t instanceof Tp&&t.getTypeName()||null}var VL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function XD(t){return t=String(t),t.match(VL)?t:"unsafe:"+t}var Ry=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ry||{});function Yt(t){let e=BL();return e?e.sanitize(Ry.URL,t)||"":YD(t,"URL")?Ed(t):XD(zc(t))}function BL(){let t=qe();return t&&t[Ki].sanitizer}var jL=/^>|^->|<!--|-->|--!>|<!-$/g,zL=/(<|>)/g,UL="\u200B$1\u200B";function HL(t){return t.replace(jL,e=>e.replace(zL,UL))}function JD(t){return t instanceof Function?t():t}function eT(t){return(t??ee(vn)).get(zn)==="browser"}var io=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(io||{}),$L;function Ny(t,e){return $L(t,e)}function Vc(t,e,n,i,r){if(i!=null){let o,a=!1;so(i)?o=i:Zs(i)&&(a=!0,i=i[Dr]);let c=Cr(i);t===0&&n!==null?r==null?oT(e,n,c):Sp(e,n,c,r||null,!0):t===1&&n!==null?Sp(e,n,c,r||null,!0):t===2?sF(e,c,a):t===3&&e.destroyNode(c),o!=null&&cF(e,t,o,n,r)}}function qL(t,e){return t.createText(e)}function GL(t,e,n){t.setValue(e,n)}function WL(t,e){return t.createComment(HL(e))}function tT(t,e,n){return t.createElement(e,n)}function ZL(t,e){nT(t,e),e[Dr]=null,e[ui]=null}function KL(t,e,n,i,r,o){i[Dr]=r,i[ui]=e,im(t,i,n,1,r,o)}function nT(t,e){e[Ki].changeDetectionScheduler?.notify(1),im(t,e,e[Qt],2,null,null)}function QL(t){let e=t[ld];if(!e)return cv(t[Fe],t);for(;e;){let n=null;if(Zs(e))n=e[ld];else{let i=e[Pn];i&&(n=i)}if(!n){for(;e&&!e[Zi]&&e!==t;)Zs(e)&&cv(e[Fe],e),e=e[En];e===null&&(e=t),Zs(e)&&cv(e[Fe],e),n=e&&e[Zi]}e=n}}function YL(t,e,n,i){let r=Pn+i,o=n.length;i>0&&(n[r-1][Zi]=e),i<o-Pn?(e[Zi]=n[r],Kx(n,Pn+i,e)):(n.push(e),e[Zi]=null),e[En]=n;let a=e[Id];a!==null&&n!==a&&XL(a,e);let c=e[no];c!==null&&c.insertView(t),Dv(e),e[De]|=128}function XL(t,e){let n=t[Gc],r=e[En][En][xi];e[xi]!==r&&(t[De]|=gy.HasTransplantedViews),n===null?t[Gc]=[e]:n.push(e)}function iT(t,e){let n=t[Gc],i=n.indexOf(e);n.splice(i,1)}function fd(t,e){if(t.length<=Pn)return;let n=Pn+e,i=t[n];if(i){let r=i[Id];r!==null&&r!==t&&iT(r,i),e>0&&(t[n-1][Zi]=i[Zi]);let o=bp(t,Pn+e);ZL(i[Fe],i);let a=o[no];a!==null&&a.detachView(o[Fe]),i[En]=null,i[Zi]=null,i[De]&=-129}return i}function tm(t,e){if(!(e[De]&256)){let n=e[Qt];n.destroyNode&&im(t,e,n,3,null,null),QL(e)}}function cv(t,e){if(e[De]&256)return;let n=Ke(null);try{e[De]&=-129,e[De]|=256,e[Xs]&&kE(e[Xs]),eF(t,e),JL(t,e),e[Fe].type===1&&e[Qt].destroy();let i=e[Id];if(i!==null&&so(e[En])){i!==e[En]&&iT(i,e);let r=e[no];r!==null&&r.detachView(t)}ML(e)}finally{Ke(n)}}function JL(t,e){let n=t.cleanup,i=e[cd];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let a=n[o+3];a>=0?i[a]():i[-a].unsubscribe(),o+=2}else{let a=i[n[o+1]];n[o].call(a)}i!==null&&(e[cd]=null);let r=e[Uo];if(r!==null){e[Uo]=null;for(let o=0;o<r.length;o++){let a=r[o];a()}}}function eF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof hd)){let o=n[i+1];if(Array.isArray(o))for(let a=0;a<o.length;a+=2){let c=r[o[a]],u=o[a+1];br(4,c,u);try{u.call(c)}finally{br(5,c,u)}}else{br(4,r,o);try{o.call(r)}finally{br(5,r,o)}}}}}function rT(t,e,n){return tF(t,e.parent,n)}function tF(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Dr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===Ir.None||o===Ir.Emulated)return null}return Si(i,n)}}function Sp(t,e,n,i,r){t.insertBefore(e,n,i,r)}function oT(t,e,n){t.appendChild(e,n)}function Cx(t,e,n,i,r){i!==null?Sp(t,e,n,i,r):oT(t,e,n)}function nF(t,e,n,i){t.removeChild(e,n,i)}function Oy(t,e){return t.parentNode(e)}function iF(t,e){return t.nextSibling(e)}function sT(t,e,n){return oF(t,e,n)}function rF(t,e,n){return t.type&40?Si(t,n):null}var oF=rF,Ex;function nm(t,e,n,i){let r=rT(t,i,e),o=e[Qt],a=i.parent||e[ui],c=sT(a,i,e);if(r!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Cx(o,r,n[u],c,!1);else Cx(o,r,n,c,!1);Ex!==void 0&&Ex(o,i,e,n,r)}function gp(t,e){if(e!==null){let n=e.type;if(n&3)return Si(e,t);if(n&4)return Rv(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return gp(t,i);{let r=t[e.index];return so(r)?Rv(-1,r):Cr(r)}}else{if(n&32)return Ny(e,t)()||Cr(t[e.index]);{let i=aT(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=dd(t[xi]);return gp(r,i)}else return gp(t,e.next)}}}return null}function aT(t,e){if(e!==null){let i=t[xi][ui],r=e.projection;return i.projection[r]}return null}function Rv(t,e){let n=Pn+t+1;if(n<e.length){let i=e[n],r=i[Fe].firstChild;if(r!==null)return gp(i,r)}return e[Js]}function sF(t,e,n){let i=Oy(t,e);i&&nF(t,i,e,n)}function Ly(t,e,n,i,r,o,a){for(;n!=null;){let c=i[n.index],u=n.type;if(a&&e===0&&(c&&$o(Cr(c),i),n.flags|=2),(n.flags&32)!==32)if(u&8)Ly(t,e,n.child,i,r,o,!1),Vc(e,t,r,c,o);else if(u&32){let f=Ny(n,i),p;for(;p=f();)Vc(e,t,r,p,o);Vc(e,t,r,c,o)}else u&16?cT(t,e,i,n,r,o):Vc(e,t,r,c,o);n=a?n.projectionNext:n.next}}function im(t,e,n,i,r,o){Ly(n,i,t.firstChild,e,r,o,!1)}function aF(t,e,n){let i=e[Qt],r=rT(t,n,e),o=n.parent||e[ui],a=sT(o,n,e);cT(i,0,e,n,r,a)}function cT(t,e,n,i,r,o){let a=n[xi],u=a[ui].projection[i.projection];if(Array.isArray(u))for(let f=0;f<u.length;f++){let p=u[f];Vc(e,t,r,p,o)}else{let f=u,p=a[En];$D(i)&&(f.flags|=128),Ly(t,e,f,p,r,o,!0)}}function cF(t,e,n,i,r){let o=n[Js],a=Cr(n);o!==a&&Vc(e,t,i,o,r);for(let c=Pn;c<n.length;c++){let u=n[c];im(u[Fe],u,t,e,i,o)}}function lF(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:io.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=io.Important),t.setStyle(n,i,r,o))}}function uF(t,e,n){t.setAttribute(e,"style",n)}function lT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function uT(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&bv(t,e,i),r!==null&&lT(t,e,r),o!==null&&uF(t,e,o)}var Yi={};function q(t=1){dT(hn(),qe(),ao()+t,!1)}function dT(t,e,n,i){if(!i)if((e[De]&3)===3){let o=t.preOrderCheckHooks;o!==null&&fp(e,o,n)}else{let o=t.preOrderHooks;o!==null&&pp(e,o,0,n)}ea(n)}function _e(t,e=We.Default){let n=qe();if(n===null)return V(t,e);let i=Yn();return BD(i,n,Ei(t),e)}function Fy(){let t="invalid";throw new Error(t)}function hT(t,e,n,i,r,o){let a=Ke(null);try{let c=null;r&mt.SignalBased&&(c=e[i][SE]),c!==null&&c.transformFn!==void 0&&(o=c.transformFn(o)),r&mt.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):fD(e,c,i,o)}finally{Ke(a)}}function dF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)ea(~r);else{let o=r,a=n[++i],c=n[++i];iL(a,o);let u=e[o];c(2,u)}}}finally{ea(-1)}}function rm(t,e,n,i,r,o,a,c,u,f,p){let _=e.blueprint.slice();return _[Dr]=r,_[De]=i|4|128|8|64,(f!==null||t&&t[De]&2048)&&(_[De]|=2048),vD(_),_[En]=_[Qc]=t,_[Mn]=n,_[Ki]=a||t&&t[Ki],_[Qt]=c||t&&t[Qt],_[qc]=u||t&&t[qc]||null,_[ui]=o,_[Gp]=SL(),_[$c]=p,_[hD]=f,_[xi]=e.type==2?t[xi]:_,_}function Jc(t,e,n,i,r){let o=t.data[e];if(o===null)o=hF(t,e,n,i,r),nL()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let a=XO();o.injectorIndex=a===null?-1:a.injectorIndex}return ia(o,!0),o}function hF(t,e,n,i,r){let o=ID(),a=Iy(),c=a?o:o&&o.parent,u=t.data[e]=vF(t,c,n,e,i,r);return t.firstChild===null&&(t.firstChild=u),o!==null&&(a?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function fT(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function pT(t,e,n,i,r){let o=ao(),a=i&2;try{ea(-1),a&&e.length>xn&&dT(t,e,xn,!1),br(a?2:0,r),n(i,r)}finally{ea(o),br(a?3:1,r)}}function Vy(t,e,n){if(_y(e)){let i=Ke(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let a=r;a<o;a++){let c=t.data[a];if(c.contentQueries){let u=n[a];c.contentQueries(1,u,a)}}}finally{Ke(i)}}}function By(t,e,n){bD()&&(EF(t,e,n,Si(n,e)),(n.flags&64)===64&&vT(t,e,n))}function jy(t,e,n=Si){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let a=i[o+1],c=a===-1?n(e,t):t[a];t[r++]=c}}}function mT(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=zy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function zy(t,e,n,i,r,o,a,c,u,f,p){let _=xn+i,b=_+r,I=fF(_,b),M=typeof f=="function"?f():f;return I[Fe]={type:t,blueprint:I,template:n,queries:null,viewQuery:c,declTNode:e,data:I.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof a=="function"?a():a,firstChild:null,schemas:u,consts:M,incompleteFirstPass:!1,ssrId:p}}function fF(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:Yi);return n}function pF(t,e,n,i){let o=i.get(LL,QD)||n===Ir.ShadowDom,a=t.selectRootElement(e,o);return mF(a),a}function mF(t){gF(t)}var gF=()=>null;function _F(t,e,n,i){let r=wT(e);r.push(n),t.firstCreatePass&&IT(t).push(i,r.length-1)}function vF(t,e,n,i,r,o){let a=e?e.injectorIndex:-1,c=0;return wD()&&(c|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:a,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:c,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function xx(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let a=e[o];if(a===void 0)continue;i??={};let c,u=mt.None;Array.isArray(a)?(c=a[0],u=a[1]):c=a;let f=o;if(r!==null){if(!r.hasOwnProperty(o))continue;f=r[o]}t===0?Dx(i,n,f,c,u):Dx(i,n,f,c)}return i}function Dx(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function yF(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,a=e.attrs,c=[],u=null,f=null;for(let p=i;p<r;p++){let _=o[p],b=n?n.get(_):null,I=b?b.inputs:null,M=b?b.outputs:null;u=xx(0,_.inputs,p,u,I),f=xx(1,_.outputs,p,f,M);let P=u!==null&&a!==null&&!dy(e)?OF(u,p,a):null;c.push(P)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=c,e.inputs=u,e.outputs=f}function bF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function gT(t,e,n,i,r,o,a,c){let u=Si(e,n),f=e.inputs,p;!c&&f!=null&&(p=f[i])?(Hy(t,n,p,i,r),Wp(e)&&wF(n,e.index)):e.type&3?(i=bF(i),r=a!=null?a(r,e.value||"",i):r,o.setProperty(u,i,r)):e.type&12}function wF(t,e){let n=Go(e,t);n[De]&16||(n[De]|=64)}function Uy(t,e,n,i){if(bD()){let r=i===null?null:{"":-1},o=DF(t,n),a,c;o===null?a=c=null:[a,c]=o,a!==null&&_T(t,e,n,a,r,c),r&&TF(n,i,r)}n.mergedAttrs=sd(n.mergedAttrs,n.attrs)}function _T(t,e,n,i,r,o){for(let f=0;f<i.length;f++)_L(OD(n,e),t,i[f].type);AF(n,t.data.length,i.length);for(let f=0;f<i.length;f++){let p=i[f];p.providersResolver&&p.providersResolver(p)}let a=!1,c=!1,u=fT(t,e,i.length,null);for(let f=0;f<i.length;f++){let p=i[f];n.mergedAttrs=sd(n.mergedAttrs,p.hostAttrs),MF(t,n,e,u,p),SF(u,p,r),p.contentQueries!==null&&(n.flags|=4),(p.hostBindings!==null||p.hostAttrs!==null||p.hostVars!==0)&&(n.flags|=64);let _=p.type.prototype;!a&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),a=!0),!c&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),c=!0),u++}yF(t,n,o)}function IF(t,e,n,i,r){let o=r.hostBindings;if(o){let a=t.hostBindingOpCodes;a===null&&(a=t.hostBindingOpCodes=[]);let c=~e.index;CF(a)!=c&&a.push(c),a.push(n,i,o)}}function CF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function EF(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Wp(n)&&PF(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||OD(n,e),$o(i,e);let a=n.initialInputs;for(let c=r;c<o;c++){let u=t.data[c],f=Zc(e,t,c,n);if($o(f,e),a!==null&&NF(e,c-r,f,u,n,a),Ho(u)){let p=Go(n.index,e);p[Mn]=Zc(e,t,c,n)}}}function vT(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,a=rL();try{ea(o);for(let c=i;c<r;c++){let u=t.data[c],f=e[c];Tv(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&xF(u,f)}}finally{ea(-1),Tv(a)}}function xF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function DF(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let a=n[o];if(eD(e,a.selectors,!1))if(i||(i=[]),Ho(a))if(a.findHostDirectiveDefs!==null){let c=[];r=r||new Map,a.findHostDirectiveDefs(a,c,r),i.unshift(...c,a);let u=c.length;Nv(t,e,u)}else i.unshift(a),Nv(t,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,i,r),i.push(a)}return i===null?null:[i,r]}function Nv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function TF(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new xe(-301,!1);i.push(e[r],o)}}}function SF(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Ho(e)&&(n[""]=t)}}function AF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function MF(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Qs(r.type,!0)),a=new hd(o,Ho(r),_e);t.blueprint[i]=a,n[i]=a,IF(t,e,i,fT(t,n,r.hostVars,Yi),r)}function PF(t,e,n){let i=Si(e,t),r=mT(n),o=t[Ki].rendererFactory,a=16;n.signals?a=4096:n.onPush&&(a=64);let c=om(t,rm(t,r,null,a,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=c}function kF(t,e,n,i,r,o){let a=Si(t,e);RF(e[Qt],a,o,t.value,n,i,r)}function RF(t,e,n,i,r,o,a){if(o==null)t.removeAttribute(e,r,n);else{let c=a==null?zc(o):a(o,i||"",r);t.setAttribute(e,r,c,n)}}function NF(t,e,n,i,r,o){let a=o[e];if(a!==null)for(let c=0;c<a.length;){let u=a[c++],f=a[c++],p=a[c++],_=a[c++];hT(i,n,u,f,p,_)}}function OF(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let a=t[o];for(let c=0;c<a.length;c+=3)if(a[c]===e){i.push(o,a[c+1],a[c+2],n[r+1]);break}}r+=2}return i}function yT(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function bT(t,e){let n=t.contentQueries;if(n!==null){let i=Ke(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],a=n[r+1];if(a!==-1){let c=t.data[a];Dy(o),c.contentQueries(2,e[a],a)}}}finally{Ke(i)}}}function om(t,e){return t[ld]?t[gx][Zi]=e:t[ld]=e,t[gx]=e,e}function Ov(t,e,n){Dy(0);let i=Ke(null);try{e(t,n)}finally{Ke(i)}}function wT(t){return t[cd]||(t[cd]=[])}function IT(t){return t.cleanup||(t.cleanup=[])}function CT(t,e,n){return(t===null||Ho(t))&&(n=zO(n[e.index])),n[Qt]}function ET(t,e){let n=t[qc],i=n?n.get(Er,null):null;i&&i.handleError(e)}function Hy(t,e,n,i,r){for(let o=0;o<n.length;){let a=n[o++],c=n[o++],u=n[o++],f=e[a],p=t.data[a];hT(p,f,i,c,u,r)}}function xT(t,e,n){let i=_D(e,t);GL(t[Qt],i,n)}function LF(t,e){let n=Go(e,t),i=n[Fe];FF(i,n);let r=n[Dr];r!==null&&n[$c]===null&&(n[$c]=ky(r,n[qc])),$y(i,n,n[Mn])}function FF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function $y(t,e,n){Ty(e);try{let i=t.viewQuery;i!==null&&Ov(1,i,n);let r=t.template;r!==null&&pT(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[no]?.finishViewCreation(t),t.staticContentQueries&&bT(t,e),t.staticViewQueries&&Ov(2,t.viewQuery,n);let o=t.components;o!==null&&VF(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[De]&=-5,Sy()}}function VF(t,e){for(let n=0;n<e.length;n++)LF(t,e[n])}function sm(t,e,n,i){let r=Ke(null);try{let o=e.tView,c=t[De]&4096?4096:16,u=rm(t,o,n,c,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),f=t[e.index];u[Id]=f;let p=t[no];return p!==null&&(u[no]=p.createEmbeddedView(o)),$y(o,u,n),u}finally{Ke(r)}}function DT(t,e){let n=Pn+e;if(n<t.length)return t[n]}function pd(t,e){return!e||e.firstChild===null||$D(t)}function am(t,e,n,i=!0){let r=e[Fe];if(YL(r,e,t,n),i){let a=Rv(n,t),c=e[Qt],u=Oy(c,t[Js]);u!==null&&KL(r,t[ui],c,e,u,a)}let o=e[$c];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function TT(t,e){let n=fd(t,e);return n!==void 0&&tm(n[Fe],n),n}function Ap(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(Cr(o)),so(o)&&BF(o,i);let a=n.type;if(a&8)Ap(t,e,n.child,i);else if(a&32){let c=Ny(n,e),u;for(;u=c();)i.push(u)}else if(a&16){let c=aT(e,n);if(Array.isArray(c))i.push(...c);else{let u=dd(e[xi]);Ap(u[Fe],u,c,i,!0)}}n=r?n.projectionNext:n.next}return i}function BF(t,e){for(let n=Pn;n<t.length;n++){let i=t[n],r=i[Fe].firstChild;r!==null&&Ap(i[Fe],i,r,e)}t[Js]!==t[Dr]&&e.push(t[Js])}var ST=[];function jF(t){return t[Xs]??zF(t)}function zF(t){let e=ST.pop()??Object.create(HF);return e.lView=t,e}function UF(t){t.lView[Xs]!==t&&(t.lView=null,ST.push(t))}var HF=Mt(ne({},AE),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ud(t.lView)},consumerOnSignalRead(){this.lView[Xs]=this}}),AT=100;function MT(t,e=!0,n=0){let i=t[Ki],r=i.rendererFactory,o=!1;o||r.begin?.();try{$F(t,n)}catch(a){throw e&&ET(t,a),a}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function $F(t,e){Lv(t,e);let n=0;for(;wy(t);){if(n===AT)throw new xe(103,!1);n++,Lv(t,1)}}function qF(t,e,n,i){let r=e[De];if((r&256)===256)return;let o=!1;!o&&e[Ki].inlineEffectRunner?.flush(),Ty(e);let a=null,c=null;!o&&GF(t)&&(c=jF(e),a=ME(c));try{vD(e),tL(t.bindingStartIndex),n!==null&&pT(t,e,n,2,i);let u=(r&3)===3;if(!o)if(u){let _=t.preOrderCheckHooks;_!==null&&fp(e,_,null)}else{let _=t.preOrderHooks;_!==null&&pp(e,_,0,null),rv(e,0)}if(WF(e),PT(e,0),t.contentQueries!==null&&bT(t,e),!o)if(u){let _=t.contentCheckHooks;_!==null&&fp(e,_)}else{let _=t.contentHooks;_!==null&&pp(e,_,1),rv(e,1)}dF(t,e);let f=t.components;f!==null&&RT(e,f,0);let p=t.viewQuery;if(p!==null&&Ov(2,p,i),!o)if(u){let _=t.viewCheckHooks;_!==null&&fp(e,_)}else{let _=t.viewHooks;_!==null&&pp(e,_,2),rv(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[iv]){for(let _ of e[iv])_();e[iv]=null}o||(e[De]&=-73)}catch(u){throw ud(e),u}finally{c!==null&&(PE(c,a),UF(c)),Sy()}}function GF(t){return t.type!==2}function PT(t,e){for(let n=GD(t);n!==null;n=WD(n))for(let i=Pn;i<n.length;i++){let r=n[i];kT(r,e)}}function WF(t){for(let e=GD(t);e!==null;e=WD(e)){if(!(e[De]&gy.HasTransplantedViews))continue;let n=e[Gc];for(let i=0;i<n.length;i++){let r=n[i],o=r[En];$O(r)}}}function ZF(t,e,n){let i=Go(e,t);kT(i,n)}function kT(t,e){by(t)&&Lv(t,e)}function Lv(t,e){let i=t[Fe],r=t[De],o=t[Xs],a=!!(e===0&&r&16);if(a||=!!(r&64&&e===0),a||=!!(r&1024),a||=!!(o?.dirty&&F_(o)),o&&(o.dirty=!1),t[De]&=-9217,a)qF(i,t,i.template,t[Mn]);else if(r&8192){PT(t,1);let c=i.components;c!==null&&RT(t,c,1)}}function RT(t,e,n){for(let i=0;i<e.length;i++)ZF(t,e[i],n)}function qy(t){for(t[Ki].changeDetectionScheduler?.notify();t;){t[De]|=64;let e=dd(t);if(RO(t)&&!e)return t;t=e}return null}var ta=class{get rootNodes(){let e=this._lView,n=e[Fe];return Ap(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Mn]}set context(e){this._lView[Mn]=e}get destroyed(){return(this._lView[De]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[En];if(so(e)){let n=e[Ip],i=n?n.indexOf(this):-1;i>-1&&(fd(e,i),bp(n,i))}this._attachedToViewContainer=!1}tm(this._lView[Fe],this._lView)}onDestroy(e){yD(this._lView,e)}markForCheck(){qy(this._cdRefInjectingView||this._lView)}detach(){this._lView[De]&=-129}reattach(){Dv(this._lView),this._lView[De]|=128}detectChanges(){this._lView[De]|=1024,MT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,nT(this._lView[Fe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=e,Dv(this._lView)}},Di=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=YF;let t=e;return t})(),KF=Di,QF=class extends KF{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=sm(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new ta(r)}};function YF(){return cm(Yn(),qe())}function cm(t,e){return t.type&4?new QF(e,t,Xc(t,e)):null}var uZ=new RegExp(`^(\\d+)*(${NL}|${RL})*(.*)`);var XF=()=>null;function md(t,e){return XF(t,e)}var Mp=class{},Fv=class{},Pp=class{};function JF(t){let e=Error(`No component factory found for ${jn(t)}.`);return e[e2]=t,e}var e2="ngComponent";var Vv=class{resolveComponentFactory(e){throw JF(e)}},Wo=(()=>{let e=class e{};e.NULL=new Vv;let t=e;return t})(),gd=class{},xd=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>t2();let t=e;return t})();function t2(){let t=qe(),e=Yn(),n=Go(e.index,t);return(Zs(n)?n:t)[Qt]}var n2=(()=>{let e=class e{};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),lv={};var Tx=new Set;function el(t){Tx.has(t)||(Tx.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Sx(...t){}function i2(){let t=typeof to.requestAnimationFrame=="function",e=to[t?"requestAnimationFrame":"setTimeout"],n=to[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var we=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new $e(!1),this.onMicrotaskEmpty=new $e(!1),this.onStable=new $e(!1),this.onError=new $e(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=i2().nativeRequestAnimationFrame,s2(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new xe(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,a=o.scheduleEventTask("NgZoneEvent: "+r,e,r2,Sx,Sx);try{return o.runTask(a,n,i)}finally{o.cancelTask(a)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},r2={};function Gy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function o2(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(to,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Bv(t),t.isCheckStableRunning=!0,Gy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Bv(t))}function s2(t){let e=()=>{o2(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,a,c)=>{if(a2(c))return n.invokeTask(r,o,a,c);try{return Ax(t),n.invokeTask(r,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Mx(t)}},onInvoke:(n,i,r,o,a,c,u)=>{try{return Ax(t),n.invoke(r,o,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Mx(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Bv(t),Gy(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Bv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Ax(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Mx(t){t._nesting--,Gy(t)}function a2(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Ws=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ws||{}),NT={destroy(){}};function Wy(t,e){!e&&dD(Wy);let n=e?.injector??ee(vn);if(!eT(n))return NT;el("NgAfterRender");let i=n.get(lm),r=i.handler??=new Rp,o=e?.phase??Ws.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Jp).onDestroy(a),u=oo(n,()=>new kp(o,t));return r.register(u),{destroy:a}}function Dd(t,e){!e&&dD(Dd);let n=e?.injector??ee(vn);if(!eT(n))return NT;el("NgAfterNextRender");let i=n.get(lm),r=i.handler??=new Rp,o=e?.phase??Ws.MixedReadWrite,a=()=>{r.unregister(u),c()},c=n.get(Jp).onDestroy(a),u=oo(n,()=>new kp(o,()=>{a(),t()}));return r.register(u),{destroy:a}}var kp=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=ee(we),this.errorHandler=ee(Er,{optional:!0}),ee(Mp,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Rp=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ws.EarlyRead]:new Set,[Ws.Write]:new Set,[Ws.MixedReadWrite]:new Set,[Ws.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},lm=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=ie({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Np(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number")o=c;else if(o==1)r=gv(r,c);else if(o==2){let u=c,f=e[++a];i=gv(i,u+": "+f+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var Op=class extends Wo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ys(e);return new _d(n,this.ngModule)}};function Px(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function c2(t){let e=t.toLowerCase();return e==="svg"?FO:e==="math"?VO:null}var jv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Up(i);let r=this.injector.get(e,lv,i);return r!==lv||n===lv?r:this.parentInjector.get(e,n,i)}},_d=class extends Pp{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=Px(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return Px(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_O(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=Ke(null);try{r=r||this.ngModule;let a=r instanceof Qn?r:r?.injector;a&&this.componentDef.getStandaloneInjector!==null&&(a=this.componentDef.getStandaloneInjector(a)||a);let c=a?new jv(e,a):e,u=c.get(gd,null);if(u===null)throw new xe(407,!1);let f=c.get(n2,null),p=c.get(lm,null),_=c.get(Mp,null),b={rendererFactory:u,sanitizer:f,inlineEffectRunner:null,afterRenderEventManager:p,changeDetectionScheduler:_},I=u.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",P=i?pF(I,i,this.componentDef.encapsulation,c):tT(I,M,c2(M)),F=512;this.componentDef.signals?F|=4096:this.componentDef.onPush||(F|=16);let W=null;P!==null&&(W=ky(P,c,!0));let X=zy(0,null,null,1,0,null,null,null,null,null,null),Z=rm(null,X,null,F,null,null,b,I,c,null,W);Ty(Z);let se,pe;try{let he=this.componentDef,S,E=null;he.findHostDirectiveDefs?(S=[],E=new Map,he.findHostDirectiveDefs(he,S,E),S.push(he)):S=[he];let x=l2(Z,P),A=u2(x,P,he,S,Z,b,I);pe=vy(X,xn),P&&f2(I,he,P,i),n!==void 0&&p2(pe,this.ngContentSelectors,n),se=h2(A,he,S,E,Z,[m2]),$y(X,Z,null)}finally{Sy()}return new zv(this.componentType,se,Xc(pe,Z),Z,pe)}finally{Ke(o)}}},zv=class extends Fv{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ta(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;Hy(o[Fe],o,r,e,n),this.previousInputValues.set(e,n);let a=Go(this._tNode.index,o);qy(a)}}get injector(){return new Ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function l2(t,e){let n=t[Fe],i=xn;return t[i]=e,Jc(n,i,2,"#host",null)}function u2(t,e,n,i,r,o,a){let c=r[Fe];d2(i,t,e,a);let u=null;e!==null&&(u=ky(e,r[qc]));let f=o.rendererFactory.createRenderer(e,n),p=16;n.signals?p=4096:n.onPush&&(p=64);let _=rm(r,mT(n),null,p,r[t.index],t,o,f,null,null,u);return c.firstCreatePass&&Nv(c,t,i.length-1),om(r,_),r[t.index]=_}function d2(t,e,n,i){for(let r of t)e.mergedAttrs=sd(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(Np(e,e.mergedAttrs,!0),n!==null&&uT(i,n,e))}function h2(t,e,n,i,r,o){let a=Yn(),c=r[Fe],u=Si(a,r);_T(c,r,a,n,null,i);for(let p=0;p<n.length;p++){let _=a.directiveStart+p,b=Zc(r,c,_,a);$o(b,r)}vT(c,r,a),u&&$o(u,r);let f=Zc(r,c,a.directiveStart+a.componentOffset,a);if(t[Mn]=r[Mn]=f,o!==null)for(let p of o)p(f,e);return Vy(c,a,r),f}function f2(t,e,n,i){if(i)bv(t,n,["ng-version","17.3.10"]);else{let{attrs:r,classes:o}=vO(e.selectors[0]);r&&bv(t,n,r),o&&o.length>0&&lT(t,n,o.join(" "))}}function p2(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function m2(){let t=Yn();Yp(qe()[Fe],t)}var Ai=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=g2;let t=e;return t})();function g2(){let t=Yn();return LT(t,qe())}var _2=Ai,OT=class extends _2{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Xc(this._hostTNode,this._hostLView)}get injector(){return new Ks(this._hostTNode,this._hostLView)}get parentInjector(){let e=My(this._hostTNode,this._hostLView);if(kD(e)){let n=Ep(e,this._hostLView),i=Cp(e),r=n[Fe].data[i+8];return new Ks(r,n)}else return new Ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=kx(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Pn}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let a=md(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,a);return this.insertImpl(c,r,pd(this._hostTNode,a)),c}createComponent(e,n,i,r,o){let a=e&&!kO(e),c;if(a)c=n;else{let M=n||{};c=M.index,i=M.injector,r=M.projectableNodes,o=M.environmentInjector||M.ngModuleRef}let u=a?e:new _d(Ys(e)),f=i||this.parentInjector;if(!o&&u.ngModule==null){let P=(a?f:this.parentInjector).get(Qn,null);P&&(o=P)}let p=Ys(u.componentType??{}),_=md(this._lContainer,p?.id??null),b=_?.firstChild??null,I=u.create(f,r,b,o);return this.insertImpl(I.hostView,c,pd(this._hostTNode,_)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(HO(r)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=r[En],f=new OT(u,u[ui],u[En]);f.detach(f.indexOf(e))}}let o=this._adjustIndex(n),a=this._lContainer;return am(a,r,o,i),e.attachToViewContainerRef(),Kx(uv(a),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=kx(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=fd(this._lContainer,n);i&&(bp(uv(this._lContainer),n),tm(i[Fe],i))}detach(e){let n=this._adjustIndex(e,-1),i=fd(this._lContainer,n);return i&&bp(uv(this._lContainer),n)!=null?new ta(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function kx(t){return t[Ip]}function uv(t){return t[Ip]||(t[Ip]=[])}function LT(t,e){let n,i=e[t.index];return so(i)?n=i:(n=yT(i,e,null,t),e[t.index]=n,om(e,n)),y2(n,e,t,i),new OT(n,t,e)}function v2(t,e){let n=t[Qt],i=n.createComment(""),r=Si(e,t),o=Oy(n,r);return Sp(n,o,i,iF(n,r),!1),i}var y2=I2,b2=()=>!1;function w2(t,e,n){return b2(t,e,n)}function I2(t,e,n,i){if(t[Js])return;let r;n.type&8?r=Cr(i):r=v2(e,n),t[Js]=r}var Uv=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Hv=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let a=n.getByIndex(o),c=this.queries[a.indexInDeclarationView];r.push(c.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Zy(e,n).matches!==null&&this.queries[n].setDirty()}},Lp=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=M2(e):this.predicate=e}},$v=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},qv=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,C2(n,o)),this.matchTNodeWithReadOption(e,n,mp(n,e,o,!1,!1))}else i===Di?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,mp(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===Dt||r===Ai||r===Di&&n.type&4)this.addMatch(n.index,-2);else{let o=mp(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function C2(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function E2(t,e){return t.type&11?Xc(t,e):t.type&4?cm(t,e):null}function x2(t,e,n,i){return n===-1?E2(e,t):n===-2?D2(t,e,i):Zc(t,t[Fe],n,e)}function D2(t,e,n){if(n===Dt)return Xc(e,t);if(n===Di)return cm(e,t);if(n===Ai)return LT(e,t)}function FT(t,e,n,i){let r=e[no].queries[i];if(r.matches===null){let o=t.data,a=n.matches,c=[];for(let u=0;a!==null&&u<a.length;u+=2){let f=a[u];if(f<0)c.push(null);else{let p=o[f];c.push(x2(e,p,a[u+1],n.metadata.read))}}r.matches=c}return r.matches}function Gv(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let a=FT(t,e,r,n);for(let c=0;c<o.length;c+=2){let u=o[c];if(u>0)i.push(a[c/2]);else{let f=o[c+1],p=e[-u];for(let _=Pn;_<p.length;_++){let b=p[_];b[Id]===b[En]&&Gv(b[Fe],b,f,i)}if(p[Gc]!==null){let _=p[Gc];for(let b=0;b<_.length;b++){let I=_[b];Gv(I[Fe],I,f,i)}}}}}return i}function T2(t,e){return t[no].queries[e].queryList}function VT(t,e,n){let i=new Dp((n&4)===4);return _F(t,e,i,i.destroy),(e[no]??=new Hv).queries.push(new Uv(i))-1}function S2(t,e,n){let i=hn();return i.firstCreatePass&&(BT(i,new Lp(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),VT(i,qe(),e)}function A2(t,e,n,i){let r=hn();if(r.firstCreatePass){let o=Yn();BT(r,new Lp(e,n,i),o.index),P2(r,t),(n&2)===2&&(r.staticContentQueries=!0)}return VT(r,qe(),n)}function M2(t){return t.split(",").map(e=>e.trim())}function BT(t,e,n){t.queries===null&&(t.queries=new $v),t.queries.track(new qv(e,n))}function P2(t,e){let n=t.contentQueries||(t.contentQueries=[]),i=n.length?n[n.length-1]:-1;e!==i&&n.push(t.queries.length-1,e)}function Zy(t,e){return t.queries.getByIndex(e)}function k2(t,e){let n=t[Fe],i=Zy(n,e);return i.crossesNgTemplate?Gv(n,t,e,[]):FT(n,t,i,e)}function R2(t){return Object.getPrototypeOf(t.prototype).constructor}function Zo(t){let e=R2(t.type),n=!0,i=[t];for(;e;){let r;if(Ho(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new xe(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let a=t;a.inputs=up(t.inputs),a.inputTransforms=up(t.inputTransforms),a.declaredInputs=up(t.declaredInputs),a.outputs=up(t.outputs);let c=r.hostBindings;c&&V2(t,c);let u=r.viewQuery,f=r.contentQueries;if(u&&L2(t,u),f&&F2(t,f),N2(t,r),NN(t.outputs,r.outputs),Ho(r)&&r.data.animation){let p=t.data;p.animation=(p.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let a=0;a<o.length;a++){let c=o[a];c&&c.ngInherit&&c(t),c===Zo&&(n=!1)}}e=Object.getPrototypeOf(e)}O2(i)}function N2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function O2(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=sd(r.hostAttrs,n=sd(n,r.hostAttrs))}}function up(t){return t===Uc?{}:t===Kn?[]:t}function L2(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function F2(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function V2(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function co(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[3]&&(n[i]=r[3])}t.inputTransforms=n}var qo=class{},vd=class{};var Wv=class extends qo{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Op(this);let r=rD(e);this._bootstrapComponents=JD(r.bootstrap),this._r3Injector=UD(e,n,[{provide:qo,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver},...i],jn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zv=class extends vd{constructor(e){super(),this.moduleType=e}create(e){return new Wv(this.moduleType,e,[])}};var Fp=class extends qo{constructor(e){super(),this.componentFactoryResolver=new Op(this),this.instance=null;let n=new ad([...e.providers,{provide:qo,useValue:this},{provide:Wo,useValue:this.componentFactoryResolver}],e.parent||py(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ky(t,e,n=null){return new Fp({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var um=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new dn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jT(t,e,n){return t[e]=n}function Ti(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function zT(t,e,n,i){let r=Ti(t,e,n);return Ti(t,e+1,i)||r}function B2(t,e,n,i,r){let o=zT(t,e,n,i);return Ti(t,e+2,r)||o}function j2(t){return(t.flags&32)===32}function z2(t,e,n,i,r,o,a,c,u){let f=e.consts,p=Jc(e,t,4,a||null,Wc(f,c));Uy(e,n,p,Wc(f,u)),Yp(e,p);let _=p.tView=zy(2,p,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,f,null);return e.queries!==null&&(e.queries.template(e,p),_.queries=e.queries.embeddedTView(p)),p}function Me(t,e,n,i,r,o,a,c){let u=qe(),f=hn(),p=t+xn,_=f.firstCreatePass?z2(p,f,u,e,n,i,r,o,a):f.data[p];ia(_,!1);let b=U2(f,u,_,t);Kp()&&nm(f,u,b,_),$o(b,u);let I=yT(b,u,b,_);return u[p]=I,om(u,I),w2(I,_,u),Zp(_)&&By(f,u,_),a!=null&&jy(u,_,c),Me}var U2=H2;function H2(t,e,n,i){return Qp(!0),e[Qt].createComment("")}function Xi(t,e,n,i){let r=qe(),o=Yc();if(Ti(r,o,e)){let a=hn(),c=Ay();kF(c,r,t,e,n,i)}return Xi}function $2(t,e,n,i){return Ti(t,Yc(),n)?e+zc(n)+i:Yi}function q2(t,e,n,i,r,o){let a=eL(),c=zT(t,a,n,r);return Ey(2),c?e+zc(n)+i+zc(r)+o:Yi}function dp(t,e){return t<<17|e<<2}function na(t){return t>>17&32767}function G2(t){return(t&2)==2}function W2(t,e){return t&131071|e<<17}function Kv(t){return t|2}function Kc(t){return(t&131068)>>2}function dv(t,e){return t&-131069|e<<2}function Z2(t){return(t&1)===1}function Qv(t){return t|1}function K2(t,e,n,i,r,o){let a=o?e.classBindings:e.styleBindings,c=na(a),u=Kc(a);t[i]=n;let f=!1,p;if(Array.isArray(n)){let _=n;p=_[1],(p===null||wd(_,p)>0)&&(f=!0)}else p=n;if(r)if(u!==0){let b=na(t[c+1]);t[i+1]=dp(b,c),b!==0&&(t[b+1]=dv(t[b+1],i)),t[c+1]=W2(t[c+1],i)}else t[i+1]=dp(c,0),c!==0&&(t[c+1]=dv(t[c+1],i)),c=i;else t[i+1]=dp(u,0),c===0?c=i:t[u+1]=dv(t[u+1],i),u=i;f&&(t[i+1]=Kv(t[i+1])),Rx(t,p,i,!0),Rx(t,p,i,!1),Q2(e,p,t,i,o),a=dp(c,u),o?e.classBindings=a:e.styleBindings=a}function Q2(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&wd(o,e)>=0&&(n[i+1]=Qv(n[i+1]))}function Rx(t,e,n,i){let r=t[n+1],o=e===null,a=i?na(r):Kc(r),c=!1;for(;a!==0&&(c===!1||o);){let u=t[a],f=t[a+1];Y2(u,e)&&(c=!0,t[a+1]=i?Qv(f):Kv(f)),a=i?na(f):Kc(f)}c&&(t[n+1]=i?Kv(r):Qv(r))}function Y2(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?wd(t,e)>=0:!1}var Wi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function X2(t){return t.substring(Wi.key,Wi.keyEnd)}function J2(t){return eV(t),UT(t,HT(t,0,Wi.textEnd))}function UT(t,e){let n=Wi.textEnd;return n===e?-1:(e=Wi.keyEnd=tV(t,Wi.key=e,n),HT(t,e,n))}function eV(t){Wi.key=0,Wi.keyEnd=0,Wi.value=0,Wi.valueEnd=0,Wi.textEnd=t.length}function HT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function tV(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Be(t,e,n){let i=qe(),r=Yc();if(Ti(i,r,e)){let o=hn(),a=Ay();gT(o,a,i,t,e,i[Qt],n,!1)}return Be}function Yv(t,e,n,i,r){let o=e.inputs,a=r?"class":"style";Hy(t,n,o[a],a,i)}function Te(t,e,n){return $T(t,e,n,!1),Te}function Tr(t,e){return $T(t,e,null,!0),Tr}function Qy(t){iV(lV,nV,t,!0)}function nV(t,e){for(let n=J2(e);n>=0;n=UT(e,n))uy(t,X2(e),!0)}function $T(t,e,n,i){let r=qe(),o=hn(),a=Ey(2);if(o.firstUpdatePass&&GT(o,t,a,i),e!==Yi&&Ti(r,a,e)){let c=o.data[ao()];WT(o,c,r,r[Qt],t,r[a+1]=dV(e,n),i,a)}}function iV(t,e,n,i){let r=hn(),o=Ey(2);r.firstUpdatePass&&GT(r,null,o,i);let a=qe();if(n!==Yi&&Ti(a,o,n)){let c=r.data[ao()];if(ZT(c,i)&&!qT(r,o)){let u=i?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=gv(u,n||"")),Yv(r,c,a,n,i)}else uV(r,c,a,a[Qt],a[o+1],a[o+1]=cV(t,e,n),i,o)}}function qT(t,e){return e>=t.expandoStartIndex}function GT(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[ao()],a=qT(t,n);ZT(o,i)&&e===null&&!a&&(e=!1),e=rV(r,o,e,i),K2(r,o,e,n,a,i)}}function rV(t,e,n,i){let r=xy(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=hv(null,t,e,n,i),n=yd(n,e.attrs,i),o=null);else{let a=e.directiveStylingLast;if(a===-1||t[a]!==r)if(n=hv(r,t,e,n,i),o===null){let u=oV(t,e,i);u!==void 0&&Array.isArray(u)&&(u=hv(null,t,e,u[1],i),u=yd(u,e.attrs,i),sV(t,e,i,u))}else o=aV(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function oV(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Kc(i)!==0)return t[na(i)]}function sV(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[na(r)]=i}function aV(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let a=t[o].hostAttrs;i=yd(i,a,n)}return yd(i,e.attrs,n)}function hv(t,e,n,i,r){let o=null,a=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<a&&(o=e[c],i=yd(i,o.hostAttrs,r),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),i}function yd(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];typeof a=="number"?r=a:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),uy(t,a,n?!0:e[++o]))}return t===void 0?null:t}function cV(t,e,n){if(n==null||n==="")return Kn;let i=[],r=Ed(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function lV(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&uy(t,i,n)}function uV(t,e,n,i,r,o,a,c){r===Yi&&(r=Kn);let u=0,f=0,p=0<r.length?r[0]:null,_=0<o.length?o[0]:null;for(;p!==null||_!==null;){let b=u<r.length?r[u+1]:void 0,I=f<o.length?o[f+1]:void 0,M=null,P;p===_?(u+=2,f+=2,b!==I&&(M=_,P=I)):_===null||p!==null&&p<_?(u+=2,M=p):(f+=2,M=_,P=I),M!==null&&WT(t,e,n,i,M,P,a,c),p=u<r.length?r[u]:null,_=f<o.length?o[f]:null}}function WT(t,e,n,i,r,o,a,c){if(!(e.type&3))return;let u=t.data,f=u[c+1],p=Z2(f)?Nx(u,e,n,r,Kc(f),a):void 0;if(!Vp(p)){Vp(o)||G2(f)&&(o=Nx(u,null,n,r,c,a));let _=_D(ao(),n);lF(i,a,_,r,o)}}function Nx(t,e,n,i,r,o){let a=e===null,c;for(;r>0;){let u=t[r],f=Array.isArray(u),p=f?u[1]:u,_=p===null,b=n[r+1];b===Yi&&(b=_?Kn:void 0);let I=_?tv(b,i):p===i?b:void 0;if(f&&!Vp(I)&&(I=tv(u,i)),Vp(I)&&(c=I,a))return c;let M=t[r+1];r=a?na(M):Kc(M)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=tv(u,i))}return c}function Vp(t){return t!==void 0}function dV(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=jn(Ed(t)))),t}function ZT(t,e){return(t.flags&(e?8:16))!==0}var Xv=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let a=this.detach(i);this.attach(i,o),this.attach(r,a)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function fv(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function hV(t,e,n){let i,r,o=0,a=t.length-1;if(Array.isArray(e)){let c=e.length-1;for(;o<=a&&o<=c;){let u=t.at(o),f=e[o],p=fv(o,u,o,f,n);if(p!==0){p<0&&t.updateValue(o,f),o++;continue}let _=t.at(a),b=e[c],I=fv(a,_,c,b,n);if(I!==0){I<0&&t.updateValue(a,b),a--,c--;continue}let M=n(o,u),P=n(a,_),F=n(o,f);if(Object.is(F,P)){let W=n(c,b);Object.is(W,M)?(t.swap(o,a),t.updateValue(a,b),c--,a--):t.move(a,o),t.updateValue(o,f),o++;continue}if(i??=new Bp,r??=Lx(t,o,a,n),Jv(t,i,o,F))t.updateValue(o,f),o++,a++;else if(r.has(F))i.set(M,t.detach(o)),a--;else{let W=t.create(o,e[o]);t.attach(o,W),o++,a++}}for(;o<=c;)Ox(t,i,n,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=a;){let f=t.at(o),p=u.value,_=fv(o,f,o,p,n);if(_!==0)_<0&&t.updateValue(o,p),o++,u=c.next();else{i??=new Bp,r??=Lx(t,o,a,n);let b=n(o,p);if(Jv(t,i,o,b))t.updateValue(o,p),o++,a++,u=c.next();else if(!r.has(b))t.attach(o,t.create(o,p)),o++,a++,u=c.next();else{let I=n(o,f);i.set(I,t.detach(o)),a--}}}for(;!u.done;)Ox(t,i,n,t.length,u.value),u=c.next()}for(;o<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function Jv(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function Ox(t,e,n,i,r){if(Jv(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function Lx(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var Bp=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function Ze(t,e,n){el("NgControlFlow");let i=qe(),r=Yc(),o=iy(i,xn+t),a=0;if(Ti(i,r,e)){let c=Ke(null);try{if(TT(o,a),e!==-1){let u=ry(i[Fe],xn+e),f=md(o,u.tView.ssrId),p=sm(i,u,n,{dehydratedView:f});am(o,p,a,pd(u,f))}}finally{Ke(c)}}else{let c=DT(o,a);c!==void 0&&(c[Mn]=n)}}var ey=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-Pn}};function Ko(t,e){return e}var ty=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function Qo(t,e,n,i,r,o,a,c,u,f,p,_,b){el("NgControlFlow");let I=u!==void 0,M=qe(),P=c?a.bind(M[xi][Mn]):a,F=new ty(I,P);M[xn+t]=F,Me(t+1,e,n,i,r,o),I&&Me(t+2,u,f,p,_,b)}var ny=class extends Xv{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Pn}at(e){return this.getLView(e)[Mn].$implicit}attach(e,n){let i=n[$c];this.needsIndexUpdate||=e!==this.length,am(this.lContainer,n,e,pd(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,fV(this.lContainer,e)}create(e,n){let i=md(this.lContainer,this.templateTNode.tView.ssrId);return sm(this.hostLView,this.templateTNode,new ey(this.lContainer,n,e),{dehydratedView:i})}destroy(e){tm(e[Fe],e)}updateValue(e,n){this.getLView(e)[Mn].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Mn].$index=e}getLView(e){return pV(this.lContainer,e)}};function Yo(t){let e=Ke(null),n=ao();try{let i=qe(),r=i[Fe],o=i[n];if(o.liveCollection===void 0){let c=n+1,u=iy(i,c),f=ry(r,c);o.liveCollection=new ny(u,i,f)}else o.liveCollection.reset();let a=o.liveCollection;if(hV(a,t,o.trackByFn),a.updateIndexes(),o.hasEmptyBlock){let c=Yc(),u=a.length===0;if(Ti(i,c,u)){let f=n+2,p=iy(i,f);if(u){let _=ry(r,f),b=md(p,_.tView.ssrId),I=sm(i,_,void 0,{dehydratedView:b});am(p,I,0,pd(_,b))}else TT(p,0)}}}finally{Ke(e)}}function iy(t,e){return t[e]}function fV(t,e){return fd(t,e)}function pV(t,e){return DT(t,e)}function ry(t,e){return vy(t,e)}function mV(t,e,n,i,r,o){let a=e.consts,c=Wc(a,r),u=Jc(e,t,2,i,c);return Uy(e,n,u,Wc(a,o)),u.attrs!==null&&Np(u,u.attrs,!1),u.mergedAttrs!==null&&Np(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function $(t,e,n,i){let r=qe(),o=hn(),a=xn+t,c=r[Qt],u=o.firstCreatePass?mV(a,o,r,e,n,i):o.data[a],f=gV(o,r,u,c,e,t);r[a]=f;let p=Zp(u);return ia(u,!0),uT(c,f,u),!j2(u)&&Kp()&&nm(o,r,f,u),WO()===0&&$o(f,r),ZO(),p&&(By(o,r,u),Vy(o,u,r)),i!==null&&jy(r,u),$}function G(){let t=Yn();Iy()?Cy():(t=t.parent,ia(t,!1));let e=t;QO(e)&&YO(),KO();let n=hn();return n.firstCreatePass&&(Yp(n,t),_y(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&dL(e)&&Yv(n,e,qe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&hL(e)&&Yv(n,e,qe(),e.stylesWithoutHost,!1),G}function de(t,e,n,i){return $(t,e,n,i),G(),de}var gV=(t,e,n,i,r,o)=>(Qp(!0),tT(i,r,aL()));function _V(t,e,n,i,r){let o=e.consts,a=Wc(o,i),c=Jc(e,t,8,"ng-container",a);a!==null&&Np(c,a,!0);let u=Wc(o,r);return Uy(e,n,c,u),e.queries!==null&&e.queries.elementStart(e,c),c}function oa(t,e,n){let i=qe(),r=hn(),o=t+xn,a=r.firstCreatePass?_V(o,r,i,e,n):r.data[o];ia(a,!0);let c=vV(r,i,a,t);return i[o]=c,Kp()&&nm(r,i,c,a),$o(c,i),Zp(a)&&(By(r,i,a),Vy(r,a,i)),n!=null&&jy(i,a),oa}function sa(){let t=Yn(),e=hn();return Iy()?Cy():(t=t.parent,ia(t,!1)),e.firstCreatePass&&(Yp(e,t),_y(t)&&e.queries.elementEnd(t)),sa}var vV=(t,e,n,i)=>(Qp(!0),WL(e[Qt],""));function bt(){return qe()}function Yy(t,e,n){let i=qe(),r=Yc();if(Ti(i,r,e)){let o=hn(),a=Ay(),c=xy(o.data),u=CT(c,a,i);gT(o,a,i,t,e,u,n,!0)}return Yy}var Gs=void 0;function yV(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var bV=["en",[["a","p"],["AM","PM"],Gs],[["AM","PM"],Gs,Gs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gs,"{1} 'at' {0}",Gs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",yV],pv={};function dm(t){let e=wV(t),n=Fx(e);if(n)return n;let i=e.split("-")[0];if(n=Fx(i),n)return n;if(i==="en")return bV;throw new xe(701,!1)}function Fx(t){return t in pv||(pv[t]=to.ng&&to.ng.common&&to.ng.common.locales&&to.ng.common.locales[t]),pv[t]}var aa=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(aa||{});function wV(t){return t.toLowerCase().replace(/_/g,"-")}var jp="en-US",IV="USD";var CV=jp;function EV(t){typeof t=="string"&&(CV=t.toLowerCase().replace(/_/g,"-"))}function Ie(t,e,n,i){let r=qe(),o=hn(),a=Yn();return KT(o,r,r[Qt],a,t,e,i),Ie}function Xy(t,e){let n=Yn(),i=qe(),r=hn(),o=xy(r.data),a=CT(o,n,i);return KT(r,i,a,n,t,e),Xy}function xV(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let a=r[o];if(a===n&&r[o+1]===i){let c=e[cd],u=r[o+2];return c.length>u?c[u]:null}typeof a=="string"&&(o+=2)}return null}function KT(t,e,n,i,r,o,a){let c=Zp(i),f=t.firstCreatePass&&IT(t),p=e[Mn],_=wT(e),b=!0;if(i.type&3||a){let P=Si(i,e),F=a?a(P):P,W=_.length,X=a?se=>a(Cr(se[i.index])):i.index,Z=null;if(!a&&c&&(Z=xV(t,e,r,i.index)),Z!==null){let se=Z.__ngLastListenerFn__||Z;se.__ngNextListenerFn__=o,Z.__ngLastListenerFn__=o,b=!1}else{o=Bx(i,e,p,o,!1);let se=n.listen(F,r,o);_.push(o,se),f&&f.push(r,X,W,W+1)}}else o=Bx(i,e,p,o,!1);let I=i.outputs,M;if(b&&I!==null&&(M=I[r])){let P=M.length;if(P)for(let F=0;F<P;F+=2){let W=M[F],X=M[F+1],pe=e[W][X].subscribe(o),he=_.length;_.push(o,pe),f&&f.push(r,i.index,he,-(he+1))}}}function Vx(t,e,n,i){let r=Ke(null);try{return br(6,e,n),n(i)!==!1}catch(o){return ET(t,o),!1}finally{br(7,e,n),Ke(r)}}function Bx(t,e,n,i,r){return function o(a){if(a===Function)return i;let c=t.componentOffset>-1?Go(t.index,e):e;qy(c);let u=Vx(e,n,i,a),f=o.__ngNextListenerFn__;for(;f;)u=Vx(e,n,f,a)&&u,f=f.__ngNextListenerFn__;return r&&u===!1&&a.preventDefault(),u}}function ce(t=1){return sL(t)}function DV(t,e){let n=null,i=hO(t);for(let r=0;r<e.length;r++){let o=e[r];if(o==="*"){n=r;continue}if(i===null?eD(t,o,!0):mO(i,o))return r}return n}function tl(t){let e=qe()[xi][ui];if(!e.projection){let n=t?t.length:1,i=e.projection=nO(n,null),r=i.slice(),o=e.child;for(;o!==null;){let a=t?DV(o,t):0;a!==null&&(r[a]?r[a].projectionNext=o:i[a]=o,r[a]=o),o=o.next}}}function Ji(t,e=0,n){let i=qe(),r=hn(),o=Jc(r,xn+t,16,null,n||null);o.projection===null&&(o.projection=e),Cy(),(!i[$c]||wD())&&(o.flags&32)!==32&&aF(r,i,o)}function nl(t,e,n,i){A2(t,e,n,i)}function lo(t,e,n){S2(t,e,n)}function Xn(t){let e=qe(),n=hn(),i=ED();Dy(i+1);let r=Zy(n,i);if(t.dirty&&UO(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=k2(e,i);t.reset(o,xL),t.notifyOnChanges()}return!0}return!1}function Jn(){return T2(qe(),ED())}function TV(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function hm(t){let e=JO();return yy(e,xn+t)}function J(t,e=""){let n=qe(),i=hn(),r=t+xn,o=i.firstCreatePass?Jc(i,r,1,e,null):i.data[r],a=SV(i,n,o,e,t);n[r]=a,Kp()&&nm(i,n,a,o),ia(o,!1)}var SV=(t,e,n,i,r)=>(Qp(!0),qL(e[Qt],i));function pt(t){return lt("",t,""),pt}function lt(t,e,n){let i=qe(),r=$2(i,t,e,n);return r!==Yi&&xT(i,ao(),r),lt}function ca(t,e,n,i,r){let o=qe(),a=q2(o,t,e,n,i,r);return a!==Yi&&xT(o,ao(),a),ca}var AV=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=aD(!1,i.type),o=r.length>0?Ky([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=ie({token:e,providedIn:"environment",factory:()=>new e(V(Qn))});let t=e;return t})();function ut(t){el("NgStandalone"),t.getStandaloneInjector=e=>e.get(AV).getOrCreateStandaloneInjector(t)}function QT(t,e){let n=t[e];return n===Yi?void 0:n}function MV(t,e,n,i,r,o){let a=e+n;return Ti(t,a,r)?jT(t,a+1,o?i.call(o,r):i(r)):QT(t,a+1)}function PV(t,e,n,i,r,o,a,c){let u=e+n;return B2(t,u,r,o,a)?jT(t,u+3,c?i.call(c,r,o,a):i(r,o,a)):QT(t,u+3)}function ei(t,e){let n=hn(),i,r=t+xn;n.firstCreatePass?(i=kV(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let o=i.factory||(i.factory=Qs(i.type,!0)),a,c=Zn(_e);try{let u=xp(!1),f=o();return xp(u),TV(n,qe(),r,f),f}finally{Zn(c)}}function kV(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function Mi(t,e,n){let i=t+xn,r=qe(),o=yy(r,i);return YT(r,i)?MV(r,CD(),e,o.transform,n,o):o.transform(n)}function Jy(t,e,n,i,r){let o=t+xn,a=qe(),c=yy(a,o);return YT(a,o)?PV(a,CD(),e,c.transform,n,i,r,c):c.transform(n,i,r)}function YT(t,e){return t[Fe].data[e].pure}function XT(t,e){return cm(t,e)}var ro=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},JT=new ro("17.3.10"),fm=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var eS=new le("");function il(t){return!!t&&typeof t.then=="function"}function eb(t){return!!t&&typeof t.subscribe=="function"}var tS=new le(""),nS=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=ee(tS,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let a=o();if(il(a))i.push(a);else if(eb(a)){let c=new Promise((u,f)=>{a.subscribe({complete:u,error:f})});i.push(c)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tb=new le("");function RV(){RE(()=>{throw new xe(600,!1)})}function NV(t){return t.isBoundToModule}function OV(t,e,n){try{let i=n();return il(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var la=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ee(HD),this.afterRenderEffectManager=ee(lm),this.externalTestViews=new Set,this.beforeRender=new Re,this.afterTick=new Re,this.componentTypes=[],this.components=[],this.isStable=ee(um).hasPendingTasks.pipe(be(i=>!i)),this._injector=ee(Qn)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof Pp;if(!this._injector.get(nS).done){let I=!o&&iD(i),M=!1;throw new xe(405,M)}let c;o?c=i:c=this._injector.get(Wo).resolveComponentFactory(i),this.componentTypes.push(c.componentType);let u=NV(c)?void 0:this._injector.get(qo),f=r||c.selector,p=c.create(vn.NULL,[],f,u),_=p.location.nativeElement,b=p.injector.get(eS,null);return b?.registerApplication(_),p.onDestroy(()=>{this.detachView(p.hostView),mv(this.components,p),b?.unregisterApplication(_)}),this._loadComponent(p),p}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new xe(101,!1);let r=Ke(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this.afterTick.next(),this._runningTick=!1,Ke(r)}}detectChangesInAttachedViews(i){let r=0,o=this.afterRenderEffectManager;for(;;){if(r===AT)throw new xe(103,!1);if(i){let a=r===0;this.beforeRender.next(a);for(let{_lView:c,notifyErrorHandler:u}of this._views)LV(c,a,u)}if(r++,o.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>oy(a))&&(o.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:a})=>oy(a))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;mv(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(tb,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>mv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new xe(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function mv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function LV(t,e,n){!e&&!oy(t)||FV(t,n,e)}function oy(t){return wy(t)}function FV(t,e,n){let i;n?(i=0,t[De]|=1024):t[De]&64?i=0:i=1,MT(t,e,i)}var sy=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},nb=(()=>{let e=class e{compileModuleSync(i){return new Zv(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=rD(i),a=JD(o.declarations).reduce((c,u)=>{let f=Ys(u);return f&&c.push(new _d(f)),c},[]);return new sy(r,a)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var VV=(()=>{let e=class e{constructor(){this.zone=ee(we),this.applicationRef=ee(la)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BV(t){return[{provide:we,useFactory:t},{provide:Hc,multi:!0,useFactory:()=>{let e=ee(VV,{optional:!0});return()=>e.initialize()}},{provide:Hc,multi:!0,useFactory:()=>{let e=ee(HV);return()=>{e.initialize()}}},{provide:HD,useFactory:jV}]}function jV(){let t=ee(we),e=ee(Er);return n=>t.runOutsideAngular(()=>e.handleError(n))}function zV(t){let e=BV(()=>new we(UV(t)));return $p([[],e])}function UV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var HV=(()=>{let e=class e{constructor(){this.subscription=new Pt,this.initialized=!1,this.zone=ee(we),this.pendingTasks=ee(um)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function $V(){return typeof $localize<"u"&&$localize.locale||jp}var rl=new le("",{providedIn:"root",factory:()=>ee(rl,We.Optional|We.SkipSelf)||$V()}),iS=new le("",{providedIn:"root",factory:()=>IV});var rS=new le("");var _p=null;function qV(t=[],e){return vn.create({name:e,providers:[{provide:qp,useValue:"platform"},{provide:rS,useValue:new Set([()=>_p=null])},...t]})}function GV(t=[]){if(_p)return _p;let e=qV(t);return _p=e,RV(),WV(e),e}function WV(t){t.get(Py,null)?.forEach(n=>n())}function ib(){return!1}var er=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=ZV;let t=e;return t})();function ZV(t){return KV(Yn(),qe(),(t&16)===16)}function KV(t,e,n){if(Wp(t)&&!n){let i=Go(t.index,e);return new ta(i,i)}else if(t.type&47){let i=e[xi];return new ta(i,e)}return null}function oS(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=GV(i),o=[zV(),...n||[]],c=new Fp({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,u=c.get(we);return u.run(()=>{c.resolveInjectorInitializers();let f=c.get(Er,null),p;u.runOutsideAngular(()=>{p=u.onError.subscribe({next:I=>{f.handleError(I)}})});let _=()=>c.destroy(),b=r.get(rS);return b.add(_),c.onDestroy(()=>{p.unsubscribe(),b.delete(_)}),OV(f,u,()=>{let I=c.get(nS);return I.runInitializers(),I.donePromise.then(()=>{let M=c.get(rl,jp);EV(M||jp);let P=c.get(la);return e!==void 0&&P.bootstrap(e),P})})})}catch(e){return Promise.reject(e)}}function Sr(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Td(t){let e=Ke(null);try{return t()}finally{Ke(e)}}var dS=null;function sl(){return dS}function hS(t){dS??=t}var pm=class{};var Qe=new le(""),fS=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>ee(JV),providedIn:"platform"});let t=e;return t})();var JV=(()=>{let e=class e extends fS{constructor(){super(),this._doc=ee(Qe),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sl().getBaseHref(this._doc)}onPopState(i){let r=sl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=sl().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function pS(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function sS(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function ua(t){return t&&t[0]!=="?"?"?"+t:t}var _m=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>ee(mS),providedIn:"root"});let t=e;return t})(),eB=new le(""),mS=(()=>{let e=class e extends _m{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ee(Qe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return pS(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+ua(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,a){let c=this.prepareExternalUrl(o+ua(a));this._platformLocation.pushState(i,r,c)}replaceState(i,r,o,a){let c=this.prepareExternalUrl(o+ua(a));this._platformLocation.replaceState(i,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(V(fS),V(eB,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var da=(()=>{let e=class e{constructor(i){this._subject=new $e,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=iB(sS(aS(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+ua(r))}normalize(i){return e.stripTrailingSlash(nB(this._basePath,aS(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ua(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+ua(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=ua,e.joinWithSlash=pS,e.stripTrailingSlash=sS,e.\u0275fac=function(r){return new(r||e)(V(_m))},e.\u0275prov=ie({token:e,factory:()=>tB(),providedIn:"root"});let t=e;return t})();function tB(){return new da(V(_m))}function nB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function aS(t){return t.replace(/\/index.html$/,"")}function iB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var gS={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},ub=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}(ub||{});var Pi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ol(t,e){let n=dm(t),i=n[aa.NumberSymbols][e];if(typeof i>"u"){if(e===Pi.CurrencyDecimal)return n[aa.NumberSymbols][Pi.Decimal];if(e===Pi.CurrencyGroup)return n[aa.NumberSymbols][Pi.Group]}return i}function _S(t,e){return dm(t)[aa.NumberFormats][e]}function rB(t){return dm(t)[aa.Currencies]}function oB(t,e,n="en"){let i=rB(n)[t]||gS[t]||[],r=i[1];return e==="narrow"&&typeof r=="string"?r:i[0]||t}var sB=2;function aB(t){let e,n=gS[t];return n&&(e=n[2]),typeof e=="number"?e:sB}var cB=/^(\d+)?\.((\d+)(-(\d+))?)?$/,cS=22,mm=".",Sd="0",lB=";",uB=",",rb="#",lS="\xA4";function vS(t,e,n,i,r,o,a=!1){let c="",u=!1;if(!isFinite(t))c=ol(n,Pi.Infinity);else{let f=pB(t);a&&(f=fB(f));let p=e.minInt,_=e.minFrac,b=e.maxFrac;if(o){let X=o.match(cB);if(X===null)throw new Error(`${o} is not a valid digit info`);let Z=X[1],se=X[3],pe=X[5];Z!=null&&(p=ob(Z)),se!=null&&(_=ob(se)),pe!=null?b=ob(pe):se!=null&&_>b&&(b=_)}mB(f,_,b);let I=f.digits,M=f.integerLen,P=f.exponent,F=[];for(u=I.every(X=>!X);M<p;M++)I.unshift(0);for(;M<0;M++)I.unshift(0);M>0?F=I.splice(M,I.length):(F=I,I=[0]);let W=[];for(I.length>=e.lgSize&&W.unshift(I.splice(-e.lgSize,I.length).join(""));I.length>e.gSize;)W.unshift(I.splice(-e.gSize,I.length).join(""));I.length&&W.unshift(I.join("")),c=W.join(ol(n,i)),F.length&&(c+=ol(n,r)+F.join("")),P&&(c+=ol(n,Pi.Exponential)+"+"+P)}return t<0&&!u?c=e.negPre+c+e.negSuf:c=e.posPre+c+e.posSuf,c}function dB(t,e,n,i,r){let o=_S(e,ub.Currency),a=yS(o,ol(e,Pi.MinusSign));return a.minFrac=aB(i),a.maxFrac=a.minFrac,vS(t,a,e,Pi.CurrencyGroup,Pi.CurrencyDecimal,r).replace(lS,n).replace(lS,"").trim()}function hB(t,e,n){let i=_S(e,ub.Decimal),r=yS(i,ol(e,Pi.MinusSign));return vS(t,r,e,Pi.Group,Pi.Decimal,n)}function yS(t,e="-"){let n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=t.split(lB),r=i[0],o=i[1],a=r.indexOf(mm)!==-1?r.split(mm):[r.substring(0,r.lastIndexOf(Sd)+1),r.substring(r.lastIndexOf(Sd)+1)],c=a[0],u=a[1]||"";n.posPre=c.substring(0,c.indexOf(rb));for(let p=0;p<u.length;p++){let _=u.charAt(p);_===Sd?n.minFrac=n.maxFrac=p+1:_===rb?n.maxFrac=p+1:n.posSuf+=_}let f=c.split(uB);if(n.gSize=f[1]?f[1].length:0,n.lgSize=f[2]||f[1]?(f[2]||f[1]).length:0,o){let p=r.length-n.posPre.length-n.posSuf.length,_=o.indexOf(rb);n.negPre=o.substring(0,_).replace(/'/g,""),n.negSuf=o.slice(_+p).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}function fB(t){if(t.digits[0]===0)return t;let e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(e===0?t.digits.push(0,0):e===1&&t.digits.push(0),t.integerLen+=2),t}function pB(t){let e=Math.abs(t)+"",n=0,i,r,o,a,c;for((r=e.indexOf(mm))>-1&&(e=e.replace(mm,"")),(o=e.search(/e/i))>0?(r<0&&(r=o),r+=+e.slice(o+1),e=e.substring(0,o)):r<0&&(r=e.length),o=0;e.charAt(o)===Sd;o++);if(o===(c=e.length))i=[0],r=1;else{for(c--;e.charAt(c)===Sd;)c--;for(r-=o,i=[],a=0;o<=c;o++,a++)i[a]=Number(e.charAt(o))}return r>cS&&(i=i.splice(0,cS-1),n=r-1,r=1),{digits:i,exponent:n,integerLen:r}}function mB(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let i=t.digits,r=i.length-t.integerLen,o=Math.min(Math.max(e,r),n),a=o+t.integerLen,c=i[a];if(a>0){i.splice(Math.max(t.integerLen,a));for(let _=a;_<i.length;_++)i[_]=0}else{r=Math.max(0,r),t.integerLen=1,i.length=Math.max(1,a=o+1),i[0]=0;for(let _=1;_<a;_++)i[_]=0}if(c>=5)if(a-1<0){for(let _=0;_>a;_--)i.unshift(0),t.integerLen++;i.unshift(1),t.integerLen++}else i[a-1]++;for(;r<Math.max(0,o);r++)i.push(0);let u=o!==0,f=e+t.integerLen,p=i.reduceRight(function(_,b,I,M){return b=b+_,M[I]=b<10?b:b-10,u&&(M[I]===0&&I>=f?M.pop():u=!1),b>=10?1:0},0);p&&(i.unshift(p),t.integerLen++)}function ob(t){let e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}function bS(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var wS=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new sb,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){uS("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){uS("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(_e(Ai),_e(Di))},e.\u0275dir=Ot({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),sb=class{constructor(){this.$implicit=null,this.ngIf=null}};function uS(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${jn(e)}'.`)}var gB=!0,ab=class{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}},db=(()=>{let e=class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(i){this._ngSwitch=i,this._caseCount===0&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(i){this._defaultViews.push(i)}_matchCase(i){let r=gB?i===this._ngSwitch:i==this._ngSwitch;return this._lastCasesMatched||=r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(i){if(this._defaultViews.length>0&&i!==this._defaultUsed){this._defaultUsed=i;for(let r of this._defaultViews)r.enforceState(i)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0});let t=e;return t})(),IS=(()=>{let e=class e{constructor(i,r,o){this.ngSwitch=o,o._addCase(),this._view=new ab(i,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}};e.\u0275fac=function(r){return new(r||e)(_e(Ai),_e(Di),_e(db,9))},e.\u0275dir=Ot({type:e,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0});let t=e;return t})();function hb(t,e){return new xe(2100,!1)}var cb=class{createSubscription(e,n){return Td(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){Td(()=>e.unsubscribe())}},lb=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},_B=new lb,vB=new cb,CS=(()=>{let e=class e{constructor(i){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){if(!this._obj){if(i)try{this.markForCheckOnValueUpdate=!1,this._subscribe(i)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(il(i))return _B;if(eb(i))return vB;throw hb(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(_e(er,16))},e.\u0275pipe=xr({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();var ES=(()=>{let e=class e{constructor(i){this._locale=i}transform(i,r,o){if(!DS(i))return null;o||=this._locale;try{let a=TS(i);return hB(a,o,r)}catch(a){throw hb(e,a.message)}}};e.\u0275fac=function(r){return new(r||e)(_e(rl,16))},e.\u0275pipe=xr({name:"number",type:e,pure:!0,standalone:!0});let t=e;return t})();var xS=(()=>{let e=class e{constructor(i,r="USD"){this._locale=i,this._defaultCurrencyCode=r}transform(i,r=this._defaultCurrencyCode,o="symbol",a,c){if(!DS(i))return null;c||=this._locale,typeof o=="boolean"&&(o=o?"symbol":"code");let u=r||this._defaultCurrencyCode;o!=="code"&&(o==="symbol"||o==="symbol-narrow"?u=oB(u,o==="symbol"?"wide":"narrow",c):u=o);try{let f=TS(i);return dB(f,c,u,r,a)}catch(f){throw hb(e,f.message)}}};e.\u0275fac=function(r){return new(r||e)(_e(rl,16),_e(iS,16))},e.\u0275pipe=xr({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();function DS(t){return!(t==null||t===""||t!==t)}function TS(t){if(typeof t=="string"&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if(typeof t!="number")throw new Error(`${t} is not a number`);return t}var uo=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({});let t=e;return t})(),fb="browser",yB="server";function SS(t){return t===fb}function ha(t){return t===yB}var gm=class{};var gb=class extends pm{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_b=class t extends gb{static makeCurrent(){hS(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=bB();return n==null?null:wB(n)}resetBaseElement(){Ad=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bS(document.cookie,e)}},Ad=null;function bB(){return Ad=Ad||document.querySelector("base"),Ad?Ad.getAttribute("href"):null}function wB(t){return new URL(t,document.baseURI).pathname}var IB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),vb=new le(""),kS=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(a=>a.supports(i)),!r)throw new xe(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(V(vb),V(we))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),ym=class{constructor(e){this._doc=e}},pb="ng-app-id",RS=(()=>{let e=class e{constructor(i,r,o,a={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=a,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ha(a),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${pb}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let a=o.get(i);return a.usage+=r,a.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,a=o?.get(r);if(a?.parentNode===i)return o.delete(r),a.removeAttribute(pb),a;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(pb,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),a=this.styleRef,c=a.get(r)?.elements;c?c.push(o):a.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(V(Qe),V(em),V(Cd,8),V(zn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),mb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},bb=/%COMP%/g,NS="%COMP%",CB=`_nghost-${NS}`,EB=`_ngcontent-${NS}`,xB=!0,DB=new le("",{providedIn:"root",factory:()=>xB});function TB(t){return EB.replace(bb,t)}function SB(t){return CB.replace(bb,t)}function OS(t,e){return e.map(n=>n.replace(bb,t))}var AS=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,p=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=a,this.doc=c,this.platformId=u,this.ngZone=f,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=ha(u),this.defaultRenderer=new Md(i,c,f,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ir.ShadowDom&&(r=Mt(ne({},r),{encapsulation:Ir.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof bm?o.applyToHost(i):o instanceof Pd&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,a=o.get(r.id);if(!a){let c=this.doc,u=this.ngZone,f=this.eventManager,p=this.sharedStylesHost,_=this.removeStylesOnCompDestroy,b=this.platformIsServer;switch(r.encapsulation){case Ir.Emulated:a=new bm(f,p,r,this.appId,_,c,u,b);break;case Ir.ShadowDom:return new yb(f,p,i,r,c,u,this.nonce,b);default:a=new Pd(f,p,r,_,c,u,b);break}o.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(V(kS),V(RS),V(em),V(DB),V(Qe),V(zn),V(we),V(Cd))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),Md=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(mb[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(MS(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(MS(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new xe(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=mb[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=mb[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(io.DashCase|io.Important)?e.style.setProperty(n,i,r&io.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&io.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=sl().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function MS(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var yb=class extends Md{constructor(e,n,i,r,o,a,c,u){super(e,o,a,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=OS(r.id,r.styles);for(let p of f){let _=document.createElement("style");c&&_.setAttribute("nonce",c),_.textContent=p,this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pd=class extends Md{constructor(e,n,i,r,o,a,c,u){super(e,o,a,c),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=u?OS(u,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},bm=class extends Pd{constructor(e,n,i,r,o,a,c,u){let f=r+"-"+i.id;super(e,n,i,o,a,c,u,f),this.contentAttr=TB(f),this.hostAttr=SB(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},AB=(()=>{let e=class e extends ym{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(V(Qe))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})(),PS=["alt","control","meta","shift"],MB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},PB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},kB=(()=>{let e=class e extends ym{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let a=e.parseEventName(r),c=e.eventCallback(a.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sl().onAndCancel(i,a.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let a=e._normalizeKey(r.pop()),c="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),c="code."),PS.forEach(p=>{let _=r.indexOf(p);_>-1&&(r.splice(_,1),c+=p+".")}),c+=a,r.length!=0||a.length===0)return null;let f={};return f.domEventName=o,f.fullKey=c,f}static matchEventFullKeyCode(i,r){let o=MB[i.key]||i.key,a="";return r.indexOf("code.")>-1&&(o=i.code,a="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),PS.forEach(c=>{if(c!==o){let u=PB[c];u(i)&&(a+=c+".")}}),a+=o,a===r)}static eventCallback(i,r,o){return a=>{e.matchEventFullKeyCode(a,i)&&o.runGuarded(()=>r(a))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(V(Qe))},e.\u0275prov=ie({token:e,factory:e.\u0275fac});let t=e;return t})();function LS(t,e){return oS(ne({rootComponent:t},RB(e)))}function RB(t){return{appProviders:[...VB,...t?.providers??[]],platformProviders:FB}}function NB(){_b.makeCurrent()}function OB(){return new Er}function LB(){return KD(document),document}var FB=[{provide:zn,useValue:fb},{provide:Py,useValue:NB,multi:!0},{provide:Qe,useFactory:LB,deps:[]}];var VB=[{provide:qp,useValue:"root"},{provide:Er,useFactory:OB,deps:[]},{provide:vb,useClass:AB,multi:!0,deps:[Qe,we,zn]},{provide:vb,useClass:kB,multi:!0,deps:[Qe]},AS,RS,kS,{provide:gd,useExisting:AS},{provide:gm,useClass:IB,deps:[]},[]];var FS=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(V(Qe))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ze="primary",Gd=Symbol("RouteTitle"),xb=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function dl(t){return new xb(t)}function jB(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let a=i[o],c=t[o];if(a.startsWith(":"))r[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function zB(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ar(t[n],e[n]))return!1;return!0}function Ar(t,e){let n=t?Db(t):void 0,i=e?Db(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!HS(t[r],e[r]))return!1;return!0}function Db(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function HS(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function $S(t){return t.length>0?t[t.length-1]:null}function es(t){return np(t)?t:il(t)?yt(Promise.resolve(t)):ge(t)}var UB={exact:GS,subset:WS},qS={exact:HB,subset:$B,ignored:()=>!0};function VS(t,e,n){return UB[n.paths](t.root,e.root,n.matrixParams)&&qS[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function HB(t,e){return Ar(t,e)}function GS(t,e,n){if(!pa(t.segments,e.segments)||!Cm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!GS(t.children[i],e.children[i],n))return!1;return!0}function $B(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>HS(t[n],e[n]))}function WS(t,e,n){return ZS(t,e,e.segments,n)}function ZS(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!pa(r,n)||e.hasChildren()||!Cm(r,n,i))}else if(t.segments.length===n.length){if(!pa(t.segments,n)||!Cm(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!WS(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!pa(t.segments,r)||!Cm(t.segments,r,i)||!t.children[ze]?!1:ZS(t.children[ze],e,o,i)}}function Cm(t,e,n){return e.every((i,r)=>qS[n](t[r].parameters,i.parameters))}var Xo=class{constructor(e=new gt([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=dl(this.queryParams),this._queryParamMap}toString(){return WB.serialize(this)}},gt=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Em(this)}},fa=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=dl(this.parameters),this._parameterMap}toString(){return QS(this)}};function qB(t,e){return pa(t,e)&&t.every((n,i)=>Ar(n.parameters,e[i].parameters))}function pa(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function GB(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===ze&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ze&&(n=n.concat(e(r,i)))}),n}var Xb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>new Dm,providedIn:"root"});let t=e;return t})(),Dm=class{parse(e){let n=new Sb(e);return new Xo(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${kd(e.root,!0)}`,i=QB(e.queryParams),r=typeof e.fragment=="string"?`#${ZB(e.fragment)}`:"";return`${n}${i}${r}`}},WB=new Dm;function Em(t){return t.segments.map(e=>QS(e)).join("/")}function kd(t,e){if(!t.hasChildren())return Em(t);if(e){let n=t.children[ze]?kd(t.children[ze],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==ze&&i.push(`${r}:${kd(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=GB(t,(i,r)=>r===ze?[kd(t.children[ze],!1)]:[`${r}:${kd(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ze]!=null?`${Em(t)}/${n[0]}`:`${Em(t)}/(${n.join("//")})`}}function KS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function wm(t){return KS(t).replace(/%3B/gi,";")}function ZB(t){return encodeURI(t)}function Tb(t){return KS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xm(t){return decodeURIComponent(t)}function BS(t){return xm(t.replace(/\+/g,"%20"))}function QS(t){return`${Tb(t.path)}${KB(t.parameters)}`}function KB(t){return Object.entries(t).map(([e,n])=>`;${Tb(e)}=${Tb(n)}`).join("")}function QB(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${wm(n)}=${wm(r)}`).join("&"):`${wm(n)}=${wm(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var YB=/^[^\/()?;#]+/;function wb(t){let e=t.match(YB);return e?e[0]:""}var XB=/^[^\/()?;=#]+/;function JB(t){let e=t.match(XB);return e?e[0]:""}var ej=/^[^=?&#]+/;function tj(t){let e=t.match(ej);return e?e[0]:""}var nj=/^[^&#]+/;function ij(t){let e=t.match(nj);return e?e[0]:""}var Sb=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new gt([],{}):new gt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[ze]=new gt(e,n)),i}parseSegment(){let e=wb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new xe(4009,!1);return this.capture(e),new fa(xm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=JB(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=wb(this.remaining);r&&(i=r,this.capture(i))}e[xm(n)]=xm(i)}parseQueryParam(e){let n=tj(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let a=ij(this.remaining);a&&(i=a,this.capture(i))}let r=BS(n),o=BS(i);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=wb(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new xe(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ze);let a=this.parseChildren();n[o]=Object.keys(a).length===1?a[ze]:new gt([],a),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new xe(4011,!1)}};function YS(t){return t.segments.length>0?new gt([],{[ze]:t}):t}function XS(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=XS(r);if(i===ze&&o.segments.length===0&&o.hasChildren())for(let[a,c]of Object.entries(o.children))e[a]=c;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new gt(t.segments,e);return rj(n)}function rj(t){if(t.numberOfChildren===1&&t.children[ze]){let e=t.children[ze];return new gt(t.segments.concat(e.segments),e.children)}return t}function hl(t){return t instanceof Xo}function oj(t,e,n=null,i=null){let r=JS(t);return eA(r,e,n,i)}function JS(t){let e;function n(o){let a={};for(let u of o.children){let f=n(u);a[u.outlet]=f}let c=new gt(o.url,a);return o===t&&(e=c),c}let i=n(t.root),r=YS(i);return e??r}function eA(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Ib(r,r,r,n,i);let o=sj(e);if(o.toRoot())return Ib(r,r,new gt([],{}),n,i);let a=aj(o,r,t),c=a.processChildren?Od(a.segmentGroup,a.index,o.commands):nA(a.segmentGroup,a.index,o.commands);return Ib(r,a.segmentGroup,c,n,i)}function Tm(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Vd(t){return typeof t=="object"&&t!=null&&t.outlets}function Ib(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([u,f])=>{o[u]=Array.isArray(f)?f.map(p=>`${p}`):`${f}`});let a;t===e?a=n:a=tA(t,e,n);let c=YS(XS(a));return new Xo(c,o,r)}function tA(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=tA(o,e,n)}),new gt(t.segments,i)}var Sm=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Tm(i[0]))throw new xe(4003,!1);let r=i.find(Vd);if(r&&r!==$S(i))throw new xe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function sj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Sm(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,f])=>{c[u]=typeof f=="string"?f.split("/"):f}),[...r,{outlets:c}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:a===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,o]},[]);return new Sm(n,e,i)}var ll=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function aj(t,e,n){if(t.isAbsolute)return new ll(e,!0,0);if(!n)return new ll(e,!1,NaN);if(n.parent===null)return new ll(n,!0,0);let i=Tm(t.commands[0])?0:1,r=n.segments.length-1+i;return cj(n,r,t.numberOfDoubleDots)}function cj(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new xe(4005,!1);r=i.segments.length}return new ll(i,!1,r-o)}function lj(t){return Vd(t[0])?t[0].outlets:{[ze]:t}}function nA(t,e,n){if(t??=new gt([],{}),t.segments.length===0&&t.hasChildren())return Od(t,e,n);let i=uj(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new gt(t.segments.slice(0,i.pathIndex),{});return o.children[ze]=new gt(t.segments.slice(i.pathIndex),t.children),Od(o,0,r)}else return i.match&&r.length===0?new gt(t.segments,{}):i.match&&!t.hasChildren()?Ab(t,e,n):i.match?Od(t,0,r):Ab(t,e,n)}function Od(t,e,n){if(n.length===0)return new gt(t.segments,{});{let i=lj(n),r={};if(Object.keys(i).some(o=>o!==ze)&&t.children[ze]&&t.numberOfChildren===1&&t.children[ze].segments.length===0){let o=Od(t.children[ze],e,n);return new gt(t.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(r[o]=nA(t.children[o],e,a))}),Object.entries(t.children).forEach(([o,a])=>{i[o]===void 0&&(r[o]=a)}),new gt(t.segments,r)}}function uj(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let a=t.segments[r],c=n[i];if(Vd(c))break;let u=`${c}`,f=i<n.length-1?n[i+1]:null;if(r>0&&u===void 0)break;if(u&&f&&typeof f=="object"&&f.outlets===void 0){if(!zS(u,f,a))return o;i+=2}else{if(!zS(u,{},a))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Ab(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(Vd(o)){let u=dj(o.outlets);return new gt(i,u)}if(r===0&&Tm(n[0])){let u=t.segments[e];i.push(new fa(u.path,jS(n[0]))),r++;continue}let a=Vd(o)?o.outlets[ze]:`${o}`,c=r<n.length-1?n[r+1]:null;a&&c&&Tm(c)?(i.push(new fa(a,jS(c))),r+=2):(i.push(new fa(a,{})),r++)}return new gt(i,{})}function dj(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=Ab(new gt([],{}),0,i))}),e}function jS(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function zS(t,e,n){return t==n.path&&Ar(e,n.parameters)}var Ld="imperative",Dn=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Dn||{}),ki=class{constructor(e,n){this.id=e,this.url=n}},Bd=class extends ki{constructor(e,n,i="imperative",r=null){super(e,n),this.type=Dn.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ma=class extends ki{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=Dn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hi=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(hi||{}),Mb=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Mb||{}),Jo=class extends ki{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Dn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ga=class extends ki{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=Dn.NavigationSkipped}},jd=class extends ki{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=Dn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Am=class extends ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Dn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pb=class extends ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Dn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kb=class extends ki{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=Dn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Rb=class extends ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Dn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nb=class extends ki{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=Dn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ob=class{constructor(e){this.route=e,this.type=Dn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Lb=class{constructor(e){this.route=e,this.type=Dn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Fb=class{constructor(e){this.snapshot=e,this.type=Dn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vb=class{constructor(e){this.snapshot=e,this.type=Dn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bb=class{constructor(e){this.snapshot=e,this.type=Dn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jb=class{constructor(e){this.snapshot=e,this.type=Dn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zd=class{},Ud=class{constructor(e){this.url=e}};var zb=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Om,this.attachRef=null}},Om=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new zb,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Mm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ub(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Ub(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Hb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Hb(e,this._root).map(n=>n.value)}};function Ub(t,e){if(t===e.value)return e;for(let n of e.children){let i=Ub(t,n);if(i)return i}return null}function Hb(t,e){if(t===e.value)return[e];for(let n of e.children){let i=Hb(t,n);if(i.length)return i.unshift(e),i}return[]}var di=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function cl(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Pm=class extends Mm{constructor(e,n){super(e),this.snapshot=n,e0(this,e)}toString(){return this.snapshot.toString()}};function iA(t){let e=hj(t),n=new dn([new fa("",{})]),i=new dn({}),r=new dn({}),o=new dn({}),a=new dn(""),c=new fl(n,i,o,a,r,ze,t,e.root);return c.snapshot=e.root,new Pm(new di(c,[]),e)}function hj(t){let e={},n={},i={},r="",o=new Hd([],e,i,r,n,ze,t,null,{});return new km("",new di(o,[]))}var fl=class{constructor(e,n,i,r,o,a,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=a,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(be(f=>f[Gd]))??ge(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(be(e=>dl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(be(e=>dl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jb(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:ne(ne({},e.params),t.params),data:ne(ne({},e.data),t.data),resolve:ne(ne(ne(ne({},t.data),e.data),r?.data),t._resolvedData)}:i={params:ne({},t.params),data:ne({},t.data),resolve:ne(ne({},t.data),t._resolvedData??{})},r&&oA(r)&&(i.resolve[Gd]=r.title),i}var Hd=class{get title(){return this.data?.[Gd]}constructor(e,n,i,r,o,a,c,u,f){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=a,this.component=c,this.routeConfig=u,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=dl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=dl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},km=class extends Mm{constructor(e,n){super(n),this.url=e,e0(this,n)}toString(){return rA(this._root)}};function e0(t,e){e.value._routerState=t,e.children.forEach(n=>e0(t,n))}function rA(t){let e=t.children.length>0?` { ${t.children.map(rA).join(", ")} } `:"";return`${t.value}${e}`}function Cb(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ar(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ar(e.params,n.params)||t.paramsSubject.next(n.params),zB(e.url,n.url)||t.urlSubject.next(n.url),Ar(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function $b(t,e){let n=Ar(t.params,e.params)&&qB(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||$b(t.parent,e.parent))}function oA(t){return typeof t.title=="string"||t.title===null}var fj=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ze,this.activateEvents=new $e,this.deactivateEvents=new $e,this.attachEvents=new $e,this.detachEvents=new $e,this.parentContexts=ee(Om),this.location=ee(Ai),this.changeDetector=ee(er),this.environmentInjector=ee(Qn),this.inputBinder=ee(t0,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xe(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new xe(4013,!1);this._activatedRoute=i;let o=this.location,c=i.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,f=new qb(i,u,o.injector);this.activated=o.createComponent(c,{index:o.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Qi]});let t=e;return t})(),qb=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===fl?this.route:e===Om?this.childContexts:this.parent.get(e,n)}},t0=new le("");function pj(t,e,n){let i=$d(t,e._root,n?n._root:void 0);return new Pm(i,e)}function $d(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=mj(t,e,n);return new di(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(c=>$d(t,c)),a}}let i=gj(e.value),r=e.children.map(o=>$d(t,o));return new di(i,r)}}function mj(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return $d(t,i,r);return $d(t,i)})}function gj(t){return new fl(new dn(t.url),new dn(t.params),new dn(t.queryParams),new dn(t.fragment),new dn(t.data),t.outlet,t.component,t)}var sA="ngNavigationCancelingError";function aA(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=hl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=cA(!1,hi.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function cA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[sA]=!0,n.cancellationCode=e,n}function _j(t){return lA(t)&&hl(t.url)}function lA(t){return!!t&&t[sA]}var vj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["ng-component"]],standalone:!0,features:[ut],decls:1,vars:0,template:function(r,o){r&1&&de(0,"router-outlet")},dependencies:[fj],encapsulation:2});let t=e;return t})();function yj(t,e){return t.providers&&!t._injector&&(t._injector=Ky(t.providers,e,`Route: ${t.path}`)),t._injector??e}function n0(t){let e=t.children&&t.children.map(n0),n=e?Mt(ne({},t),{children:e}):ne({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ze&&(n.component=vj),n}function Mr(t){return t.outlet||ze}function bj(t,e){let n=t.filter(i=>Mr(i)===e);return n.push(...t.filter(i=>Mr(i)!==e)),n}function Wd(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var wj=(t,e,n,i)=>be(r=>(new Gb(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Gb=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Cb(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=cl(n);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,r[a],i),delete r[a]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let a=i.getContext(r.outlet);a&&this.deactivateChildRoutes(e,n,a.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=cl(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);if(i&&i.outlet){let a=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=cl(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=cl(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new jb(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Vb(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(Cb(r),r===o)if(r.component){let a=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,a.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let a=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Cb(c.route.value),this.activateChildRoutes(e,null,a.children)}else{let c=Wd(r.snapshot);a.attachRef=null,a.route=r,a.injector=c,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,i)}},Rm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ul=class{constructor(e,n){this.component=e,this.route=n}};function Ij(t,e,n){let i=t._root,r=e?e._root:null;return Rd(i,r,n,[i.value])}function Cj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ml(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!Hx(t)?t:e.get(t):i}function Rd(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=cl(e);return t.children.forEach(a=>{Ej(a,o[a.value.outlet],n,i.concat([a.value]),r),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,c])=>Fd(c,n.getContext(a),r)),r}function Ej(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,a=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let u=xj(a,o,o.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new Rm(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Rd(t,e,c?c.children:null,i,r):Rd(t,e,n,i,r),u&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new ul(c.outlet.component,a))}else a&&Fd(e,c,r),r.canActivateChecks.push(new Rm(i)),o.component?Rd(t,null,c?c.children:null,i,r):Rd(t,null,n,i,r);return r}function xj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!pa(t.url,e.url);case"pathParamsOrQueryParamsChange":return!pa(t.url,e.url)||!Ar(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$b(t,e)||!Ar(t.queryParams,e.queryParams);case"paramsChange":default:return!$b(t,e)}}function Fd(t,e,n){let i=cl(t),r=t.value;Object.entries(i).forEach(([o,a])=>{r.component?e?Fd(a,e.children.getContext(o),n):Fd(a,null,n):Fd(a,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ul(e.outlet.component,r)):n.canDeactivateChecks.push(new ul(null,r)):n.canDeactivateChecks.push(new ul(null,r))}function Zd(t){return typeof t=="function"}function Dj(t){return typeof t=="boolean"}function Tj(t){return t&&Zd(t.canLoad)}function Sj(t){return t&&Zd(t.canActivate)}function Aj(t){return t&&Zd(t.canActivateChild)}function Mj(t){return t&&Zd(t.canDeactivate)}function Pj(t){return t&&Zd(t.canMatch)}function uA(t){return t instanceof eo||t?.name==="EmptyError"}var Im=Symbol("INITIAL_VALUE");function pl(){return kt(t=>Pc(t.map(e=>e.pipe(wi(1),yr(Im)))).pipe(be(e=>{for(let n of e)if(n!==!0){if(n===Im)return Im;if(n===!1||n instanceof Xo)return n}return!0}),$t(e=>e!==Im),wi(1)))}function kj(t,e){return Kt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:a}}=n;return a.length===0&&o.length===0?ge(Mt(ne({},n),{guardsResult:!0})):Rj(a,i,r,t).pipe(Kt(c=>c&&Dj(c)?Nj(i,o,t,e):ge(c)),be(c=>Mt(ne({},n),{guardsResult:c})))})}function Rj(t,e,n,i){return yt(t).pipe(Kt(r=>Bj(r.component,r.route,n,e,i)),Ii(r=>r!==!0,!0))}function Nj(t,e,n,i){return yt(e).pipe(kc(r=>Vo(Lj(r.route.parent,i),Oj(r.route,i),Vj(t,r.path,n),Fj(t,r.route,n))),Ii(r=>r!==!0,!0))}function Oj(t,e){return t!==null&&e&&e(new Bb(t)),ge(!0)}function Lj(t,e){return t!==null&&e&&e(new Fb(t)),ge(!0)}function Fj(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ge(!0);let r=i.map(o=>rp(()=>{let a=Wd(e)??n,c=ml(o,a),u=Sj(c)?c.canActivate(e,t):oo(a,()=>c(e,t));return es(u).pipe(Ii())}));return ge(r).pipe(pl())}function Vj(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Cj(a)).filter(a=>a!==null).map(a=>rp(()=>{let c=a.guards.map(u=>{let f=Wd(a.node)??n,p=ml(u,f),_=Aj(p)?p.canActivateChild(i,t):oo(f,()=>p(i,t));return es(_).pipe(Ii())});return ge(c).pipe(pl())}));return ge(o).pipe(pl())}function Bj(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ge(!0);let a=o.map(c=>{let u=Wd(e)??r,f=ml(c,u),p=Mj(f)?f.canDeactivate(t,e,n,i):oo(u,()=>f(t,e,n,i));return es(p).pipe(Ii())});return ge(a).pipe(pl())}function jj(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return ge(!0);let o=r.map(a=>{let c=ml(a,t),u=Tj(c)?c.canLoad(e,n):oo(t,()=>c(e,n));return es(u)});return ge(o).pipe(pl(),dA(i))}function dA(t){return q_(rn(e=>{if(hl(e))throw aA(t,e)}),be(e=>e===!0))}function zj(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return ge(!0);let o=r.map(a=>{let c=ml(a,t),u=Pj(c)?c.canMatch(e,n):oo(t,()=>c(e,n));return es(u)});return ge(o).pipe(pl(),dA(i))}var qd=class{constructor(e){this.segmentGroup=e||null}},Nm=class extends Error{constructor(e){super(),this.urlTree=e}};function al(t){return Mc(new qd(t))}function Uj(t){return Mc(new xe(4e3,!1))}function Hj(t){return Mc(cA(!1,hi.GuardRejected))}var Wb=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ge(i);if(r.numberOfChildren>1||!r.children[ze])return Uj(e.redirectTo);r=r.children[ze]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Nm(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new Xo(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let c=o.substring(1);i[r]=n[c]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),a={};return Object.entries(n.children).forEach(([c,u])=>{a[c]=this.createSegmentGroup(e,u,i,r)}),new gt(o,a)}createSegments(e,n,i,r){return n.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new xe(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Zb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $j(t,e,n,i,r){let o=i0(t,e,n);return o.matched?(i=yj(e,i),zj(i,e,n,r).pipe(be(a=>a===!0?o:ne({},Zb)))):ge(o)}function i0(t,e,n){if(e.path==="**")return qj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?ne({},Zb):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||jB)(n,t,e);if(!r)return ne({},Zb);let o={};Object.entries(r.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let a=r.consumed.length>0?ne(ne({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function qj(t){return{matched:!0,parameters:t.length>0?$S(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function US(t,e,n,i){return n.length>0&&Zj(t,n,i)?{segmentGroup:new gt(e,Wj(i,new gt(n,t.children))),slicedSegments:[]}:n.length===0&&Kj(t,n,i)?{segmentGroup:new gt(t.segments,Gj(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new gt(t.segments,t.children),slicedSegments:n}}function Gj(t,e,n,i){let r={};for(let o of n)if(Lm(t,e,o)&&!i[Mr(o)]){let a=new gt([],{});r[Mr(o)]=a}return ne(ne({},i),r)}function Wj(t,e){let n={};n[ze]=e;for(let i of t)if(i.path===""&&Mr(i)!==ze){let r=new gt([],{});n[Mr(i)]=r}return n}function Zj(t,e,n){return n.some(i=>Lm(t,e,i)&&Mr(i)!==ze)}function Kj(t,e,n){return n.some(i=>Lm(t,e,i))}function Lm(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Qj(t,e,n,i){return Mr(t)!==i&&(i===ze||!Lm(e,n,t))?!1:i0(e,t,n).matched}function Yj(t,e,n){return e.length===0&&!t.children[n]}var Kb=class{};function Xj(t,e,n,i,r,o,a="emptyOnly"){return new Qb(t,e,n,i,r,a,o).recognize()}var Jj=31,Qb=class{constructor(e,n,i,r,o,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new Wb(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new xe(4002,`'${e.segmentGroup}'`)}recognize(){let e=US(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(be(n=>{let i=new Hd([],Object.freeze({}),Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,{},ze,this.rootComponentType,null,{}),r=new di(i,n),o=new km("",r),a=oj(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(o._root,null),{state:o,tree:a}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ze).pipe(Bo(i=>{if(i instanceof Nm)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof qd?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=Jb(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(be(o=>o instanceof di?[o]:[]))}processChildren(e,n,i){let r=[];for(let o of Object.keys(i.children))o==="primary"?r.unshift(o):r.push(o);return yt(r).pipe(kc(o=>{let a=i.children[o],c=bj(n,o);return this.processSegmentGroup(e,c,a,o)}),qs((o,a)=>(o.push(...a),o)),jo(null),J_(),Kt(o=>{if(o===null)return al(i);let a=hA(o);return ez(a),ge(a)}))}processSegment(e,n,i,r,o,a){return yt(n).pipe(kc(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,i,r,o,a).pipe(Bo(u=>{if(u instanceof qd)return ge(null);throw u}))),Ii(c=>!!c),Bo(c=>{if(uA(c))return Yj(i,r,o)?ge(new Kb):al(i);throw c}))}processSegmentAgainstRoute(e,n,i,r,o,a,c){return Qj(i,r,o,a)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,a):al(r):al(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,a){let{matched:c,consumedSegments:u,positionalParamSegments:f,remainingSegments:p}=i0(n,r,o);if(!c)return al(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Jj&&(this.allowRedirects=!1));let _=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,f);return this.applyRedirects.lineralizeSegments(r,_).pipe(Kt(b=>this.processSegment(e,i,n,b.concat(p),a,!1)))}matchSegmentAgainstRoute(e,n,i,r,o){let a=$j(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(kt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(kt(({routes:u})=>{let f=i._loadedInjector??e,{consumedSegments:p,remainingSegments:_,parameters:b}=c,I=new Hd(p,b,Object.freeze(ne({},this.urlTree.queryParams)),this.urlTree.fragment,nz(i),Mr(i),i.component??i._loadedComponent??null,i,iz(i)),{segmentGroup:M,slicedSegments:P}=US(n,p,_,u);if(P.length===0&&M.hasChildren())return this.processChildren(f,u,M).pipe(be(W=>W===null?null:new di(I,W)));if(u.length===0&&P.length===0)return ge(new di(I,[]));let F=Mr(i)===o;return this.processSegment(f,u,M,P,F?ze:o,!0).pipe(be(W=>new di(I,W instanceof di?[W]:[])))}))):al(n)))}getChildConfig(e,n,i){return n.children?ge({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ge({routes:n._loadedRoutes,injector:n._loadedInjector}):jj(e,n,i,this.urlSerializer).pipe(Kt(r=>r?this.configLoader.loadChildren(e,n).pipe(rn(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):Hj(n))):ge({routes:[],injector:e})}};function ez(t){t.sort((e,n)=>e.value.outlet===ze?-1:n.value.outlet===ze?1:e.value.outlet.localeCompare(n.value.outlet))}function tz(t){let e=t.value.routeConfig;return e&&e.path===""}function hA(t){let e=[],n=new Set;for(let i of t){if(!tz(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=hA(i.children);e.push(new di(i.value,r))}return e.filter(i=>!n.has(i))}function nz(t){return t.data||{}}function iz(t){return t.resolve||{}}function rz(t,e,n,i,r,o){return Kt(a=>Xj(t,e,n,i,a.extractedUrl,r,o).pipe(be(({state:c,tree:u})=>Mt(ne({},a),{targetSnapshot:c,urlAfterRedirects:u}))))}function oz(t,e){return Kt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return ge(n);let o=new Set(r.map(u=>u.route)),a=new Set;for(let u of o)if(!a.has(u))for(let f of fA(u))a.add(f);let c=0;return yt(a).pipe(kc(u=>o.has(u)?sz(u,i,t,e):(u.data=Jb(u,u.parent,t).resolve,ge(void 0))),rn(()=>c++),Nc(1),Kt(u=>c===a.size?ge(n):Bn))})}function fA(t){let e=t.children.map(n=>fA(n)).flat();return[t,...e]}function sz(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!oA(r)&&(o[Gd]=r.title),az(o,t,e,i).pipe(be(a=>(t._resolvedData=a,t.data=Jb(t,t.parent,n).resolve,null)))}function az(t,e,n,i){let r=Db(t);if(r.length===0)return ge({});let o={};return yt(r).pipe(Kt(a=>cz(t[a],e,n,i).pipe(Ii(),rn(c=>{o[a]=c}))),Nc(1),X_(o),Bo(a=>uA(a)?Bn:Mc(a)))}function cz(t,e,n,i){let r=Wd(e)??i,o=ml(t,r),a=o.resolve?o.resolve(e,n):oo(r,()=>o(e,n));return es(a)}function Eb(t){return kt(e=>{let n=t(e);return n?yt(n).pipe(be(()=>e)):ge(e)})}var pA=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(a=>a.outlet===ze);return r}getResolvedTitleForRoute(i){return i.data[Gd]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>ee(lz),providedIn:"root"});let t=e;return t})(),lz=(()=>{let e=class e extends pA{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(V(FS))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),r0=new le("",{providedIn:"root",factory:()=>({})}),o0=new le(""),uz=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ee(nb)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ge(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=es(i.loadComponent()).pipe(be(mA),rn(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),td(()=>{this.componentLoaders.delete(i)})),o=new xc(r,()=>new Re).pipe(Ec());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ge({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let a=dz(r,this.compiler,i,this.onLoadEndListener).pipe(td(()=>{this.childrenLoaders.delete(r)})),c=new xc(a,()=>new Re).pipe(Ec());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function dz(t,e,n,i){return es(t.loadChildren()).pipe(be(mA),Kt(r=>r instanceof vd||Array.isArray(r)?ge(r):yt(e.compileModuleAsync(r))),be(r=>{i&&i(t);let o,a,c=!1;return Array.isArray(r)?(a=r,c=!0):(o=r.create(n).injector,a=o.get(o0,[],{optional:!0,self:!0}).flat()),{routes:a.map(n0),injector:o}}))}function hz(t){return t&&typeof t=="object"&&"default"in t}function mA(t){return hz(t)?t.default:t}var s0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>ee(fz),providedIn:"root"});let t=e;return t})(),fz=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pz=new le("");var mz=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Re,this.transitionAbortSubject=new Re,this.configLoader=ee(uz),this.environmentInjector=ee(Qn),this.urlSerializer=ee(Xb),this.rootContexts=ee(Om),this.location=ee(da),this.inputBindingEnabled=ee(t0,{optional:!0})!==null,this.titleStrategy=ee(pA),this.options=ee(r0,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ee(s0),this.createViewTransition=ee(pz,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ge(void 0),this.rootComponentType=null;let i=o=>this.events.next(new Ob(o)),r=o=>this.events.next(new Lb(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Mt(ne(ne({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new dn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ld,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($t(a=>a.id!==0),be(a=>Mt(ne({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),kt(a=>{let c=!1,u=!1;return ge(a).pipe(kt(f=>{if(this.navigationId>a.id)return this.cancelNavigationTransition(a,"",hi.SupersededByNewNavigation),Bn;this.currentTransition=a,this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?Mt(ne({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),_=f.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!p&&_!=="reload"){let b="";return this.events.next(new ga(f.id,this.urlSerializer.serialize(f.rawUrl),b,Mb.IgnoredSameUrlNavigation)),f.resolve(null),Bn}if(this.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return ge(f).pipe(kt(b=>{let I=this.transitions?.getValue();return this.events.next(new Bd(b.id,this.urlSerializer.serialize(b.extractedUrl),b.source,b.restoredState)),I!==this.transitions?.getValue()?Bn:Promise.resolve(b)}),rz(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),rn(b=>{a.targetSnapshot=b.targetSnapshot,a.urlAfterRedirects=b.urlAfterRedirects,this.currentNavigation=Mt(ne({},this.currentNavigation),{finalUrl:b.urlAfterRedirects});let I=new Am(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(I)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){let{id:b,extractedUrl:I,source:M,restoredState:P,extras:F}=f,W=new Bd(b,this.urlSerializer.serialize(I),M,P);this.events.next(W);let X=iA(this.rootComponentType).snapshot;return this.currentTransition=a=Mt(ne({},f),{targetSnapshot:X,urlAfterRedirects:I,extras:Mt(ne({},F),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,ge(a)}else{let b="";return this.events.next(new ga(f.id,this.urlSerializer.serialize(f.extractedUrl),b,Mb.IgnoredByUrlHandlingStrategy)),f.resolve(null),Bn}}),rn(f=>{let p=new Pb(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),be(f=>(this.currentTransition=a=Mt(ne({},f),{guards:Ij(f.targetSnapshot,f.currentSnapshot,this.rootContexts)}),a)),kj(this.environmentInjector,f=>this.events.next(f)),rn(f=>{if(a.guardsResult=f.guardsResult,hl(f.guardsResult))throw aA(this.urlSerializer,f.guardsResult);let p=new kb(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(p)}),$t(f=>f.guardsResult?!0:(this.cancelNavigationTransition(f,"",hi.GuardRejected),!1)),Eb(f=>{if(f.guards.canActivateChecks.length)return ge(f).pipe(rn(p=>{let _=new Rb(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}),kt(p=>{let _=!1;return ge(p).pipe(oz(this.paramsInheritanceStrategy,this.environmentInjector),rn({next:()=>_=!0,complete:()=>{_||this.cancelNavigationTransition(p,"",hi.NoDataFromResolver)}}))}),rn(p=>{let _=new Nb(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(_)}))}),Eb(f=>{let p=_=>{let b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe(rn(I=>{_.component=I}),be(()=>{})));for(let I of _.children)b.push(...p(I));return b};return Pc(p(f.targetSnapshot.root)).pipe(jo(null),wi(1))}),Eb(()=>this.afterPreactivation()),kt(()=>{let{currentSnapshot:f,targetSnapshot:p}=a,_=this.createViewTransition?.(this.environmentInjector,f.root,p.root);return _?yt(_).pipe(be(()=>a)):ge(a)}),be(f=>{let p=pj(i.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=a=Mt(ne({},f),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,a}),rn(()=>{this.events.next(new zd)}),wj(this.rootContexts,i.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),wi(1),rn({next:f=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ma(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),this.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{c=!0}}),Ci(this.transitionAbortSubject.pipe(rn(f=>{throw f}))),td(()=>{!c&&!u&&this.cancelNavigationTransition(a,"",hi.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bo(f=>{if(u=!0,lA(f))this.events.next(new Jo(a.id,this.urlSerializer.serialize(a.extractedUrl),f.message,f.cancellationCode)),_j(f)?this.events.next(new Ud(f.url)):a.resolve(!1);else{this.events.next(new jd(a.id,this.urlSerializer.serialize(a.extractedUrl),f,a.targetSnapshot??void 0));try{a.resolve(i.errorHandler(f))}catch(p){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(p)}}return Bn}))}))}cancelNavigationTransition(i,r,o){let a=new Jo(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(a),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gz(t){return t!==Ld}var _z=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>ee(vz),providedIn:"root"});let t=e;return t})(),Yb=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},vz=(()=>{let e=class e extends Yb{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Xp(e)))(o||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),gA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:()=>ee(yz),providedIn:"root"});let t=e;return t})(),yz=(()=>{let e=class e extends gA{constructor(){super(...arguments),this.location=ee(da),this.urlSerializer=ee(Xb),this.options=ee(r0,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ee(s0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=iA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Bd)this.stateMemento=this.createStateMemento();else if(i instanceof ga)this.rawUrlTree=r.initialUrl;else if(i instanceof Am){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof zd?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Jo&&(i.code===hi.GuardRejected||i.code===hi.NoDataFromResolver)?this.restoreHistory(r):i instanceof jd?this.restoreHistory(r,!0):i instanceof ma&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let a=this.browserPageId,c=ne(ne({},r.extras.state),this.generateNgRouterState(r.id,a));this.location.replaceState(o,"",c)}else{let a=ne(ne({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",a)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,a=this.currentPageId-o;a!==0?this.location.historyGo(a):this.currentUrlTree===i.finalUrl&&a===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=Xp(e)))(o||e)}})(),e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Nd=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Nd||{});function bz(t,e){t.events.pipe($t(n=>n instanceof ma||n instanceof Jo||n instanceof jd||n instanceof ga),be(n=>n instanceof ma||n instanceof ga?Nd.COMPLETE:(n instanceof Jo?n.code===hi.Redirect||n.code===hi.SupersededByNewNavigation:!1)?Nd.REDIRECTING:Nd.FAILED),$t(n=>n!==Nd.REDIRECTING),wi(1)).subscribe(()=>{e()})}function wz(t){throw t}var Iz={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Cz={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Fm=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ee(fm),this.stateManager=ee(gA),this.options=ee(r0,{optional:!0})||{},this.pendingTasks=ee(um),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ee(mz),this.urlSerializer=ee(Xb),this.location=ee(da),this.urlHandlingStrategy=ee(s0),this._events=new Re,this.errorHandler=this.options.errorHandler||wz,this.navigated=!1,this.routeReuseStrategy=ee(_z),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ee(o0,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ee(t0,{optional:!0}),this.eventsSubscription=new Pt,this.isNgZoneEnabled=ee(we)instanceof we&&we.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(o!==null&&a!==null){if(this.stateManager.handleRouterEvent(r,a),r instanceof Jo&&r.code!==hi.Redirect&&r.code!==hi.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ma)this.navigated=!0;else if(r instanceof Ud){let c=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),u={info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||gz(o.source)};this.scheduleNavigation(c,Ld,null,u,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}xz(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ld,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let a={replaceUrl:!0},c=o?.navigationId?o:null;if(o){let f=ne({},o);delete f.navigationId,delete f.\u0275routerPageId,Object.keys(f).length!==0&&(a.state=f)}let u=this.parseUrl(i);this.scheduleNavigation(u,r,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(n0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:a,fragment:c,queryParamsHandling:u,preserveFragment:f}=r,p=f?this.currentUrlTree.fragment:c,_=null;switch(u){case"merge":_=ne(ne({},this.currentUrlTree.queryParams),a);break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=a||null}_!==null&&(_=this.removeEmptyProps(_));let b;try{let I=o?o.snapshot:this.routerState.snapshot.root;b=JS(I)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),b=this.currentUrlTree.root}return eA(b,i,_,p??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=hl(i)?i:this.parseUrl(i),a=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(a,Ld,null,r)}navigate(i,r={skipLocationChange:!1}){return Ez(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=ne({},Iz):r===!1?o=ne({},Cz):o=r,hl(i))return VS(this.currentUrlTree,i,o);let a=this.parseUrl(i);return VS(this.currentUrlTree,a,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,a])=>(a!=null&&(r[o]=a),r),{})}scheduleNavigation(i,r,o,a,c){if(this.disposed)return Promise.resolve(!1);let u,f,p;c?(u=c.resolve,f=c.reject,p=c.promise):p=new Promise((b,I)=>{u=b,f=I});let _=this.pendingTasks.add();return bz(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(_))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:a,resolve:u,reject:f,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(b=>Promise.reject(b))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ez(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new xe(4008,!1)}function xz(t){return!(t instanceof zd)&&!(t instanceof Ud)}var Dz=new le("");function _A(t,...e){return $p([{provide:o0,multi:!0,useValue:t},[],{provide:fl,useFactory:Tz,deps:[Fm]},{provide:tb,multi:!0,useFactory:Sz},e.map(n=>n.\u0275providers)])}function Tz(t){return t.routerState.root}function Sz(){let t=ee(vn);return e=>{let n=t.get(la);if(e!==n.components[0])return;let i=t.get(Fm),r=t.get(Az);t.get(Mz)===1&&i.initialNavigation(),t.get(Pz,null,We.Optional)?.setUpPreloading(),t.get(Dz,null,We.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Az=new le("",{factory:()=>new Re}),Mz=new le("",{providedIn:"root",factory:()=>1});var Pz=new le("");var vA=[];var Rz="firebase",Nz="10.12.2";Fo(Rz,Nz,"app");var Kd=new ro("ANGULARFIRE2_VERSION");var Oz=(t,e)=>{let n=e?[e]:DE(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(a=>{i.includes(a)||i.push(a)})}),i},_a=class{constructor(){return Oz(Lz)}},Lz="app-check";function a0(){}var Vm=class{zone;delegate;constructor(e,n=Q_){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,o=function(a){r.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,n,i)}},c0=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",a0,{},a0,a0)),n.pipe(rn({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Bm=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Vm(Zone.current)),this.insideAngular=n.run(()=>new Vm(Zone.current,_r)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(V(we))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Fz(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function ti(t){return Vz(Fz())(t)}function Vz(t){return function(n){return n=n.lift(new c0(t.ngZone)),n.pipe(qi(t.outsideAngular),bi(t.insideAngular))}}var Bz="firebase",jz="10.12.2";li.registerVersion(Bz,jz,"app-compat");var zz=["ngOnDestroy"],wA=(t,e,n,i={})=>new Proxy(t,{get:(r,o)=>n.runOutsideAngular(()=>{if(t[o])return i?.spy?.get&&i.spy.get(o,t[o]),t[o];if(zz.indexOf(o)>-1)return()=>{};let a=e.toPromise().then(c=>{let u=c?.[o];return typeof u=="function"?u.bind(c):u?.then?u.then(f=>n.run(()=>f)):n.run(()=>u)});return new Proxy(()=>{},{get:(c,u)=>a[u],apply:(c,u,f)=>a.then(p=>{let _=p?.(...f);return i?.spy?.apply&&i.spy.apply(o,f,_),_})})})});var jm=class{constructor(e){return e}},gl=new le("angularfire2.app.options"),_l=new le("angularfire2.app.name");function Qd(t,e,n){let i=typeof n=="string"&&n||"[DEFAULT]",r=typeof n=="object"&&n||{};r.name=r.name||i;let a=li.apps.filter(c=>c&&c.name===r.name)[0]||e.runOutsideAngular(()=>li.initializeApp(t,r));try{if(JSON.stringify(t)!==JSON.stringify(a.options)){let c=!!module.hot;Uz("error",`${a.name} Firebase App already initialized with different options${c?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new jm(a)}var Uz=(t,...e)=>{ib()&&typeof console<"u"&&console[t](...e)},Hz={provide:jm,useFactory:Qd,deps:[gl,we,[new Hp,_l]]},IA=(()=>{class t{static initializeApp(n,i){return{ngModule:t,providers:[{provide:gl,useValue:n},{provide:_l,useValue:i}]}}constructor(n){li.registerVersion("angularfire",Kd.full,"core"),li.registerVersion("angularfire",Kd.full,"app-compat"),li.registerVersion("angular",JT.full,n.toString())}static \u0275fac=function(i){return new(i||t)(V(zn))};static \u0275mod=ft({type:t});static \u0275inj=ht({providers:[Hz]})}return t})();function zm(t,e,n,i,r){let[,o,a]=globalThis.\u0275AngularfireInstanceCache.find(c=>c[0]===t)||[];if(o)return $z(r,a)||(bA("error",`${e} was already initialized on the ${n} Firebase App with different settings.${qz?" You may need to reload as Firebase is not HMR aware.":""}`),bA("warn",{is:r,was:a})),o;{let c=i();return globalThis.\u0275AngularfireInstanceCache.push([t,c,r]),c}}function $z(t,e){try{return t.toString()===e.toString()}catch{return t===e}}var qz=typeof module<"u"&&!!module.hot,bA=(t,...e)=>{ib()&&typeof console<"u"&&console[t](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Gz={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},CA={providers:[_A(vA),hy(IA.initializeApp(Gz))]};var It=JR(xA());var u0;try{u0=typeof Intl<"u"&&Intl.v8BreakIterator}catch{u0=!1}var Gt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?SS(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||u0)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(V(zn))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Yd;function Wz(){if(Yd==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Yd=!0}))}finally{Yd=Yd||!1}return Yd}function vl(t){return Wz()?t:!!t.capture}var va;function DA(){if(va==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return va=!1,va;if("scrollBehavior"in document.documentElement.style)va=!0;else{let t=Element.prototype.scrollTo;t?va=!/\{\s*\[native code\]\s*\}/.test(t.toString()):va=!1}}return va}var l0;function Zz(){if(l0==null){let t=typeof document<"u"?document.head:null;l0=!!(t&&(t.createShadowRoot||t.attachShadow))}return l0}function TA(t){if(Zz()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Ri(t){return t.composedPath?t.composedPath()[0]:t.target}function Xd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function yl(t){return Array.isArray(t)?t:[t]}function Xt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function ho(t){return t instanceof Dt?t.nativeElement:t}var SA=new Set,ba,Kz=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Yz}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Qz(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(V(Gt),V(Cd,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Qz(t,e){if(!SA.has(t))try{ba||(ba=document.createElement("style"),e&&ba.setAttribute("nonce",e),ba.setAttribute("type","text/css"),document.head.appendChild(ba)),ba.sheet&&(ba.sheet.insertRule(`@media ${t} {body{ }}`,0),SA.add(t))}catch(n){console.error(n)}}function Yz(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var Hm=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Re}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return AA(yl(i)).some(o=>this._registerQuery(o).mql.matches)}observe(i){let o=AA(yl(i)).map(c=>this._registerQuery(c).observable),a=Pc(o);return a=Vo(a.pipe(wi(1)),a.pipe(id(1),sp(0))),a.pipe(be(c=>{let u={matches:!1,breakpoints:{}};return c.forEach(({matches:f,query:p})=>{u.matches=u.matches||f,u.breakpoints[p]=f}),u}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),a={observable:new Oe(c=>{let u=f=>this._zone.run(()=>c.next(f));return r.addListener(u),()=>{r.removeListener(u)}}).pipe(yr(r),be(({matches:c})=>({query:i,matches:c})),Ci(this._destroySubject)),mql:r};return this._queries.set(i,a),a}};e.\u0275fac=function(r){return new(r||e)(V(Kz),V(we))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function AA(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var MA={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};function h0(t){return t.buttons===0||t.detail===0}function f0(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var Jz=new le("cdk-input-modality-detector-options"),eU={ignoreKeys:[18,17,224,91,16]},RA=650,bl=vl({passive:!0,capture:!0}),tU=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,o,a){this._platform=i,this._mostRecentTarget=null,this._modality=new dn(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(u=>u===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Ri(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<RA||(this._modality.next(h0(c)?"keyboard":"mouse"),this._mostRecentTarget=Ri(c))},this._onTouchstart=c=>{if(f0(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Ri(c)},this._options=ne(ne({},eU),a),this.modalityDetected=this._modality.pipe(id(1)),this.modalityChanged=this.modalityDetected.pipe(Rc()),i.isBrowser&&r.runOutsideAngular(()=>{o.addEventListener("keydown",this._onKeydown,bl),o.addEventListener("mousedown",this._onMousedown,bl),o.addEventListener("touchstart",this._onTouchstart,bl)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,bl),document.removeEventListener("mousedown",this._onMousedown,bl),document.removeEventListener("touchstart",this._onTouchstart,bl))}};e.\u0275fac=function(r){return new(r||e)(V(Gt),V(we),V(Qe),V(Jz,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nU=new le("liveAnnouncerElement",{providedIn:"root",factory:iU});function iU(){return null}var rU=new le("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),oU=0,NA=(()=>{let e=class e{constructor(i,r,o,a){this._ngZone=r,this._defaultOptions=a,this._document=o,this._liveElement=i||this._createLiveElement()}announce(i,...r){let o=this._defaultOptions,a,c;return r.length===1&&typeof r[0]=="number"?c=r[0]:[a,c]=r,this.clear(),clearTimeout(this._previousTimeout),a||(a=o&&o.politeness?o.politeness:"polite"),c==null&&o&&(c=o.duration),this._liveElement.setAttribute("aria-live",a),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(u=>this._currentResolve=u)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=i,typeof c=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),c)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let i="cdk-live-announcer-element",r=this._document.getElementsByClassName(i),o=this._document.createElement("div");for(let a=0;a<r.length;a++)r[a].remove();return o.classList.add(i),o.classList.add("cdk-visually-hidden"),o.setAttribute("aria-atomic","true"),o.setAttribute("aria-live","polite"),o.id=`cdk-live-announcer-${oU++}`,this._document.body.appendChild(o),o}_exposeAnnouncerToModals(i){let r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}};e.\u0275fac=function(r){return new(r||e)(V(nU,8),V(we),V(Qe),V(rU,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var qm=function(t){return t[t.IMMEDIATE=0]="IMMEDIATE",t[t.EVENTUAL=1]="EVENTUAL",t}(qm||{}),sU=new le("cdk-focus-monitor-default-options"),$m=vl({passive:!0,capture:!0}),OA=(()=>{let e=class e{constructor(i,r,o,a,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=o,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Re,this._rootNodeFocusAndBlurListener=u=>{let f=Ri(u);for(let p=f;p;p=p.parentElement)u.type==="focus"?this._onFocus(u,p):this._onBlur(u,p)},this._document=a,this._detectionMode=c?.detectionMode||qm.IMMEDIATE}monitor(i,r=!1){let o=ho(i);if(!this._platform.isBrowser||o.nodeType!==1)return ge();let a=TA(o)||this._getDocument(),c=this._elementInfo.get(o);if(c)return r&&(c.checkChildren=!0),c.subject;let u={checkChildren:r,subject:new Re,rootNode:a};return this._elementInfo.set(o,u),this._registerGlobalListeners(u),u.subject}stopMonitoring(i){let r=ho(i),o=this._elementInfo.get(r);o&&(o.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(o))}focusVia(i,r,o){let a=ho(i),c=this._getDocument().activeElement;a===c?this._getClosestElementsInfo(a).forEach(([u,f])=>this._originChanged(u,r,f)):(this._setOrigin(r),typeof a.focus=="function"&&a.focus(o))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===qm.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===qm.IMMEDIATE){clearTimeout(this._originTimeoutId);let o=this._originFromTouchInteraction?RA:1;this._originTimeoutId=setTimeout(()=>this._origin=null,o)}})}_onFocus(i,r){let o=this._elementInfo.get(r),a=Ri(i);!o||!o.checkChildren&&r!==a||this._originChanged(r,this._getFocusOrigin(a),o)}_onBlur(i,r){let o=this._elementInfo.get(r);!o||o.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(o,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,o=this._rootNodeFocusListenerCount.get(r)||0;o||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,$m),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,$m)}),this._rootNodeFocusListenerCount.set(r,o+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ci(this._stopInputModalityDetector)).subscribe(a=>{this._setOrigin(a,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let o=this._rootNodeFocusListenerCount.get(r);o>1?this._rootNodeFocusListenerCount.set(r,o-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,$m),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,$m),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,o){this._setClasses(i,r),this._emitOrigin(o,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((o,a)=>{(a===i||o.checkChildren&&a.contains(i))&&r.push([a,o])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:o}=this._inputModalityDetector;if(o!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let a=i.labels;if(a){for(let c=0;c<a.length;c++)if(a[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(V(we),V(Gt),V(tU),V(Qe,8),V(sU,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var wa=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(wa||{}),PA="cdk-high-contrast-black-on-white",kA="cdk-high-contrast-white-on-black",d0="cdk-high-contrast-active",LA=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=ee(Hm).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return wa.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,o=r&&r.getComputedStyle?r.getComputedStyle(i):null,a=(o&&o.backgroundColor||"").replace(/ /g,"");switch(i.remove(),a){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return wa.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return wa.BLACK_ON_WHITE}return wa.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(d0,PA,kA),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===wa.BLACK_ON_WHITE?i.add(d0,PA):r===wa.WHITE_ON_BLACK&&i.add(d0,kA)}}};e.\u0275fac=function(r){return new(r||e)(V(Gt),V(Qe))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var aU=new le("cdk-dir-doc",{providedIn:"root",factory:cU});function cU(){return ee(Qe)}var lU=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function uU(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?lU.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var VA=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new $e,i){let r=i.body?i.body.dir:null,o=i.documentElement?i.documentElement.dir:null;this.value=uU(r||o||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(V(aU,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ts=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({});let t=e;return t})();function fU(){return!0}var pU=new le("mat-sanity-checks",{providedIn:"root",factory:fU}),Pr=(()=>{let e=class e{constructor(i,r,o){this._sanityChecks=r,this._document=o,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return Xd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(V(LA),V(pU,8),V(Qe))},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[ts,ts]});let t=e;return t})();var Ni=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Ni||{}),_0=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Ni.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},BA=vl({passive:!0,capture:!0}),v0=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=Ri(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(o=>o.handleEvent(e))})}}addHandler(e,n,i,r){let o=this._events.get(n);if(o){let a=o.get(i);a?a.add(r):o.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,BA)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let o=r.get(n);o&&(o.delete(i),o.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,BA)))}},jA={enterDuration:225,exitDuration:150},mU=800,zA=vl({passive:!0,capture:!0}),UA=["mousedown","touchstart"],HA=["mouseup","mouseleave","touchend","touchcancel"],Jd=class Jd{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ho(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=ne(ne({},jA),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let a=i.radius||gU(e,n,r),c=e-r.left,u=n-r.top,f=o.enterDuration,p=document.createElement("div");p.classList.add("mat-ripple-element"),p.style.left=`${c-a}px`,p.style.top=`${u-a}px`,p.style.height=`${a*2}px`,p.style.width=`${a*2}px`,i.color!=null&&(p.style.backgroundColor=i.color),p.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(p);let _=window.getComputedStyle(p),b=_.transitionProperty,I=_.transitionDuration,M=b==="none"||I==="0s"||I==="0s, 0s"||r.width===0&&r.height===0,P=new _0(this,p,i,M);p.style.transform="scale3d(1, 1, 1)",P.state=Ni.FADING_IN,i.persistent||(this._mostRecentTransientRipple=P);let F=null;return!M&&(f||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let W=()=>this._finishRippleTransition(P),X=()=>this._destroyRipple(P);p.addEventListener("transitionend",W),p.addEventListener("transitioncancel",X),F={onTransitionEnd:W,onTransitionCancel:X}}),this._activeRipples.set(P,F),(M||!f)&&this._finishRippleTransition(P),P}fadeOutRipple(e){if(e.state===Ni.FADING_OUT||e.state===Ni.HIDDEN)return;let n=e.element,i=ne(ne({},jA),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Ni.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=ho(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,UA.forEach(i=>{Jd._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{HA.forEach(n=>{this._triggerElement.addEventListener(n,this,zA)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Ni.FADING_IN?this._startFadeOutTransition(e):e.state===Ni.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Ni.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Ni.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=h0(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+mU;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!f0(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Ni.VISIBLE||e.config.terminateOnPointerUp&&e.state===Ni.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(UA.forEach(n=>Jd._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(HA.forEach(n=>e.removeEventListener(n,this,zA)),this._pointerUpEventsRegistered=!1))}};Jd._eventManager=new v0;var y0=Jd;function gU(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var WA=new le("mat-ripple-global-options"),_U=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,o,a,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=a||{},this._rippleRenderer=new y0(this,r,i,o)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ne(ne(ne({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,o){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,ne(ne({},this.rippleConfig),o)):this._rippleRenderer.fadeInRipple(0,0,ne(ne({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(_e(Dt),_e(we),_e(Gt),_e(WA,8),_e(ra,8))},e.\u0275dir=Ot({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,o){r&2&&Tr("mat-ripple-unbounded",o.unbounded)},inputs:{color:[mt.None,"matRippleColor","color"],unbounded:[mt.None,"matRippleUnbounded","unbounded"],centered:[mt.None,"matRippleCentered","centered"],radius:[mt.None,"matRippleRadius","radius"],animation:[mt.None,"matRippleAnimation","animation"],disabled:[mt.None,"matRippleDisabled","disabled"],trigger:[mt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let t=e;return t})(),ZA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[Pr,Pr]});let t=e;return t})();var $A={capture:!0},qA=["focus","mousedown","mouseenter","touchstart"],m0="mat-ripple-loader-uninitialized",g0="mat-ripple-loader-class-name",GA="mat-ripple-loader-centered",Gm="mat-ripple-loader-disabled",KA=(()=>{let e=class e{constructor(){this._document=ee(Qe,{optional:!0}),this._animationMode=ee(ra,{optional:!0}),this._globalRippleOptions=ee(WA,{optional:!0}),this._platform=ee(Gt),this._ngZone=ee(we),this._hosts=new Map,this._onInteraction=i=>{let r=Ri(i);if(r instanceof HTMLElement){let o=r.closest(`[${m0}="${this._globalRippleOptions?.namespace??""}"]`);o&&this._createRipple(o)}},this._ngZone.runOutsideAngular(()=>{for(let i of qA)this._document?.addEventListener(i,this._onInteraction,$A)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of qA)this._document?.removeEventListener(r,this._onInteraction,$A)}configureRipple(i,r){i.setAttribute(m0,this._globalRippleOptions?.namespace??""),(r.className||!i.hasAttribute(g0))&&i.setAttribute(g0,r.className||""),r.centered&&i.setAttribute(GA,""),r.disabled&&i.setAttribute(Gm,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let o=this._hosts.get(i);if(o){o.disabled=r;return}r?i.setAttribute(Gm,""):i.removeAttribute(Gm)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let o=this._document.createElement("span");o.classList.add("mat-ripple",i.getAttribute(g0)),i.append(o);let a=new _U(new Dt(o),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return a._isInitialized=!0,a.trigger=i,a.centered=i.hasAttribute(GA),a.disabled=i.hasAttribute(Gm),this.attachRipple(i,a),a}attachRipple(i,r){i.removeAttribute(m0),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var vU=["mat-button",""],yU=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],bU=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var wU=new le("MAT_BUTTON_CONFIG");var IU=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],CU=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,o,a){this._elementRef=i,this._platform=r,this._ngZone=o,this._animationMode=a,this._focusMonitor=ee(OA),this._rippleLoader=ee(KA),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=ee(wU,{optional:!0}),u=i.nativeElement,f=u.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(u,{className:"mat-mdc-button-ripple"});for(let{attribute:p,mdcClasses:_}of IU)u.hasAttribute(p)&&f.add(..._)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Fy()},e.\u0275dir=Ot({type:e,inputs:{color:"color",disableRipple:[mt.HasDecoratorInputTransform,"disableRipple","disableRipple",Sr],disabled:[mt.HasDecoratorInputTransform,"disabled","disabled",Sr],ariaDisabled:[mt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Sr],disabledInteractive:[mt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Sr]},features:[co]});let t=e;return t})();var QA=(()=>{let e=class e extends CU{constructor(i,r,o,a){super(i,r,o,a)}};e.\u0275fac=function(r){return new(r||e)(_e(Dt),_e(Gt),_e(we),_e(ra,8))},e.\u0275cmp=it({type:e,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(r,o){r&2&&(Xi("disabled",o._getDisabledAttribute())("aria-disabled",o._getAriaDisabled()),Qy(o.color?"mat-"+o.color:""),Tr("mat-mdc-button-disabled",o.disabled)("mat-mdc-button-disabled-interactive",o.disabledInteractive)("_mat-animation-noopable",o._animationMode==="NoopAnimations")("mat-unthemed",!o.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Zo,ut],attrs:vU,ngContentSelectors:bU,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,o){r&1&&(tl(yU),de(0,"span",0),Ji(1),$(2,"span",1),Ji(3,1),G(),Ji(4,2),de(5,"span",2)(6,"span",3)),r&2&&Tr("mdc-button__ripple",!o._isFab)("mdc-fab__ripple",o._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0});let t=e;return t})();var YA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[Pr,ZA,Pr]});let t=e;return t})();var wl=function(t){return t[t.State=0]="State",t[t.Transition=1]="Transition",t[t.Sequence=2]="Sequence",t[t.Group=3]="Group",t[t.Animate=4]="Animate",t[t.Keyframes=5]="Keyframes",t[t.Style=6]="Style",t[t.Trigger=7]="Trigger",t[t.Reference=8]="Reference",t[t.AnimateChild=9]="AnimateChild",t[t.AnimateRef=10]="AnimateRef",t[t.Query=11]="Query",t[t.Stagger=12]="Stagger",t}(wl||{});function XA(t,e){return{type:wl.Trigger,name:t,definitions:e,options:{}}}function b0(t,e=null){return{type:wl.Animate,styles:e,timings:t}}function Wm(t){return{type:wl.Style,styles:t,offset:null}}function w0(t,e,n){return{type:wl.State,name:t,styles:e,options:n}}function I0(t,e,n=null){return{type:wl.Transition,expr:t,animation:e,options:n}}var eh=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Il=class extends eh{constructor(e,n,i,r,o){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=o}},Cl=class extends eh{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},C0=class extends eh{constructor(e){super(),this.element=e instanceof Dt?e.nativeElement:e}},El=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Il)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof Cl)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof C0)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Zm=class extends El{constructor(e,n,i,r,o){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");c.parentNode.insertBefore(u,c),this.outletElement.appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||vn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var E0=(()=>{let e=class e extends El{constructor(i,r,o){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new $e,this.attachDomPortal=a=>{this._document;let c=a.element;c.parentNode;let u=this._document.createComment("dom-portal");a.setAttachedHost(this),c.parentNode.insertBefore(u,c),this._getRootNode().appendChild(c),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(c,u)})},this._document=o}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,a=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),c=r.createComponent(a,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=i,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(_e(Wo),_e(Ai),_e(Qe))},e.\u0275dir=Ot({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[mt.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Zo]});let t=e;return t})();var Km=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({});let t=e;return t})();var EU=20,eM=(()=>{let e=class e{constructor(i,r,o){this._ngZone=i,this._platform=r,this._scrolled=new Re,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=o}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=EU){return this._platform.isBrowser?new Oe(r=>{this._globalSubscription||this._addGlobalListener();let o=i>0?this._scrolled.pipe(op(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{o.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ge()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let o=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe($t(a=>!a||o.indexOf(a)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((o,a)=>{this._scrollableContainsElement(a,i)&&r.push(a)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let o=ho(r),a=i.getElementRef().nativeElement;do if(o==a)return!0;while(o=o.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return Ju(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(V(we),V(Gt),V(Qe,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var xU=20,x0=(()=>{let e=class e{constructor(i,r,o){this._platform=i,this._change=new Re,this._changeListener=a=>{this._change.next(a)},this._document=o,r.runOutsideAngular(()=>{if(i.isBrowser){let a=this._getWindow();a.addEventListener("resize",this._changeListener),a.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:o}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+o,right:i.left+r,height:o,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),o=i.documentElement,a=o.getBoundingClientRect(),c=-a.top||i.body.scrollTop||r.scrollY||o.scrollTop||0,u=-a.left||i.body.scrollLeft||r.scrollX||o.scrollLeft||0;return{top:c,left:u}}change(i=xU){return i>0?this._change.pipe(op(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(V(Gt),V(we),V(Qe,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({});let t=e;return t})(),D0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[ts,JA,ts,JA]});let t=e;return t})();var tM=DA(),T0=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Xt(-this._previousScrollPosition.left),e.style.top=Xt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,o=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),tM&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),tM&&(i.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var S0=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe($t(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Qm=class{enable(){}disable(){}attach(){}};function A0(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,o=t.right<n.left,a=t.left>n.right;return i||r||o||a})}function nM(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,o=t.left<n.left,a=t.right>n.right;return i||r||o||a})}var M0=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();A0(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},TU=(()=>{let e=class e{constructor(i,r,o,a){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=o,this.noop=()=>new Qm,this.close=c=>new S0(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new T0(this._viewportRuler,this._document),this.reposition=c=>new M0(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=a}};e.\u0275fac=function(r){return new(r||e)(V(eM),V(x0),V(we),V(Qe))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),th=class{constructor(e){if(this.scrollStrategy=new Qm,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var P0=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var aM=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(V(Qe))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),SU=(()=>{let e=class e extends aM{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=o=>{let a=this._attachedOverlays;for(let c=a.length-1;c>-1;c--)if(a[c]._keydownEvents.observers.length>0){let u=a[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(V(Qe),V(we,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),AU=(()=>{let e=class e extends aM{constructor(i,r,o){super(i),this._platform=r,this._ngZone=o,this._cursorStyleIsSet=!1,this._pointerDownListener=a=>{this._pointerDownEventTarget=Ri(a)},this._clickListener=a=>{let c=Ri(a),u=a.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;let f=this._attachedOverlays.slice();for(let p=f.length-1;p>-1;p--){let _=f[p];if(_._outsidePointerEvents.observers.length<1||!_.hasAttached())continue;if(_.overlayElement.contains(c)||_.overlayElement.contains(u))break;let b=_._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>b.next(a)):b.next(a)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(V(Qe),V(Gt),V(we,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cM=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||Xd()){let o=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let a=0;a<o.length;a++)o[a].remove()}let r=this._document.createElement("div");r.classList.add(i),Xd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(V(Qe),V(Gt))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),k0=class{constructor(e,n,i,r,o,a,c,u,f,p=!1,_){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=c,this._location=u,this._outsideClickDispatcher=f,this._animationsDisabled=p,this._injector=_,this._backdropElement=null,this._backdropClick=new Re,this._attachments=new Re,this._detachments=new Re,this._locationChanges=Pt.EMPTY,this._backdropClickHandler=b=>this._backdropClick.next(b),this._backdropTransitionendHandler=b=>{this._disposeBackdrop(b.target)},this._keydownEvents=new Re,this._outsidePointerEvents=new Re,this._renders=new Re,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy,this._afterRenderRef=Td(()=>Wy(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),Dd(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=ne(ne({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Mt(ne({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=Xt(this._config.width),e.height=Xt(this._config.height),e.minWidth=Xt(this._config.minWidth),e.minHeight=Xt(this._config.minHeight),e.maxWidth=Xt(this._config.maxWidth),e.maxHeight=Xt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=yl(n||[]).filter(o=>!!o);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{let e=this._renders.pipe(Ci(ed(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},iM="cdk-overlay-connected-position-bounding-box",MU=/([A-Za-z%]+)$/,R0=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,o){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Re,this._resizeSubscription=Pt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(iM),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[],a;for(let c of this._preferredPositions){let u=this._getOriginPoint(e,r,c),f=this._getOverlayPoint(u,n,c),p=this._getOverlayFit(f,n,i,c);if(p.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(c,u);return}if(this._canFitWithFlexibleDimensions(p,f,i)){o.push({position:c,origin:u,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(u,c)});continue}(!a||a.overlayFit.visibleArea<p.visibleArea)&&(a={overlayFit:p,overlayPoint:f,originPoint:u,position:c,overlayRect:n})}if(o.length){let c=null,u=-1;for(let f of o){let p=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);p>u&&(u=p,c=f)}this._isPushed=!1,this._applyPosition(c.position,c.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(a.position,a.originPoint);return}this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ia(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(iM),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let a=this._isRtl()?e.right:e.left,c=this._isRtl()?e.left:e.right;r=i.originX=="start"?a:c}n.left<0&&(r-=n.left);let o;return i.originY=="center"?o=e.top+e.height/2:o=i.originY=="top"?e.top:e.bottom,n.top<0&&(o-=n.top),{x:r,y:o}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let o;return i.overlayY=="center"?o=-n.height/2:o=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+o}}_getOverlayFit(e,n,i,r){let o=oM(n),{x:a,y:c}=e,u=this._getOffset(r,"x"),f=this._getOffset(r,"y");u&&(a+=u),f&&(c+=f);let p=0-a,_=a+o.width-i.width,b=0-c,I=c+o.height-i.height,M=this._subtractOverflows(o.width,p,_),P=this._subtractOverflows(o.height,b,I),F=M*P;return{visibleArea:F,isCompletelyWithinViewport:o.width*o.height===F,fitsInViewportVertically:P===o.height,fitsInViewportHorizontally:M==o.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,o=i.right-n.x,a=rM(this._overlayRef.getConfig().minHeight),c=rM(this._overlayRef.getConfig().minWidth),u=e.fitsInViewportVertically||a!=null&&a<=r,f=e.fitsInViewportHorizontally||c!=null&&c<=o;return u&&f}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=oM(n),o=this._viewportRect,a=Math.max(e.x+r.width-o.width,0),c=Math.max(e.y+r.height-o.height,0),u=Math.max(o.top-i.top-e.y,0),f=Math.max(o.left-i.left-e.x,0),p=0,_=0;return r.width<=o.width?p=f||-a:p=e.x<this._viewportMargin?o.left-i.left-e.x:0,r.height<=o.height?_=u||-c:_=e.y<this._viewportMargin?o.top-i.top-e.y:0,this._previousPushAmount={x:p,y:_},{x:e.x+p,y:e.y+_}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){let i=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!PU(this._lastScrollVisibility,i)){let r=new P0(e,i);this._positionChanges.next(r)}this._lastScrollVisibility=i}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let o=0;o<n.length;o++)n[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),o,a,c;if(n.overlayY==="top")a=e.y,o=i.height-a+this._viewportMargin;else if(n.overlayY==="bottom")c=i.height-e.y+this._viewportMargin*2,o=i.height-c+this._viewportMargin;else{let I=Math.min(i.bottom-e.y+i.top,e.y),M=this._lastBoundingBoxSize.height;o=I*2,a=e.y-I,o>M&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-M/2)}let u=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,f=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,p,_,b;if(f)b=i.width-e.x+this._viewportMargin*2,p=e.x-this._viewportMargin;else if(u)_=e.x,p=i.right-e.x;else{let I=Math.min(i.right-e.x+i.left,e.x),M=this._lastBoundingBoxSize.width;p=I*2,_=e.x-I,p>M&&!this._isInitialRender&&!this._growAfterOpen&&(_=e.x-M/2)}return{top:a,left:_,bottom:c,right:b,width:p,height:o}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=Xt(i.height),r.top=Xt(i.top),r.bottom=Xt(i.bottom),r.width=Xt(i.width),r.left=Xt(i.left),r.right=Xt(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=Xt(o)),a&&(r.maxWidth=Xt(a))}this._lastBoundingBoxSize=i,Ia(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Ia(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ia(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){let p=this._viewportRuler.getViewportScrollPosition();Ia(i,this._getExactOverlayY(n,e,p)),Ia(i,this._getExactOverlayX(n,e,p))}else i.position="static";let c="",u=this._getOffset(n,"x"),f=this._getOffset(n,"y");u&&(c+=`translateX(${u}px) `),f&&(c+=`translateY(${f}px)`),i.transform=c.trim(),a.maxHeight&&(r?i.maxHeight=Xt(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=Xt(a.maxWidth):o&&(i.maxWidth="")),Ia(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},o=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),e.overlayY==="bottom"){let a=this._document.documentElement.clientHeight;r.bottom=`${a-(o.y+this._overlayRect.height)}px`}else r.top=Xt(o.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},o=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i));let a;if(this._isRtl()?a=e.overlayX==="end"?"left":"right":a=e.overlayX==="end"?"right":"left",a==="right"){let c=this._document.documentElement.clientWidth;r.right=`${c-(o.x+this._overlayRect.width)}px`}else r.left=Xt(o.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:nM(e,i),isOriginOutsideView:A0(e,i),isOverlayClipped:nM(n,i),isOverlayOutsideView:A0(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&yl(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof Dt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function Ia(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function rM(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(MU);return!n||n==="px"?parseFloat(e):null}return t||null}function oM(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}function PU(t,e){return t===e?!0:t.isOriginClipped===e.isOriginClipped&&t.isOriginOutsideView===e.isOriginOutsideView&&t.isOverlayClipped===e.isOverlayClipped&&t.isOverlayOutsideView===e.isOverlayOutsideView}var sM="cdk-global-overlay-wrapper",N0=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(sM),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:c}=i,u=(r==="100%"||r==="100vw")&&(!a||a==="100%"||a==="100vw"),f=(o==="100%"||o==="100vh")&&(!c||c==="100%"||c==="100vh"),p=this._xPosition,_=this._xOffset,b=this._overlayRef.getConfig().direction==="rtl",I="",M="",P="";u?P="flex-start":p==="center"?(P="center",b?M=_:I=_):b?p==="left"||p==="end"?(P="flex-end",I=_):(p==="right"||p==="start")&&(P="flex-start",M=_):p==="left"||p==="start"?(P="flex-start",I=_):(p==="right"||p==="end")&&(P="flex-end",M=_),e.position=this._cssPosition,e.marginLeft=u?"0":I,e.marginTop=f?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":M,n.justifyContent=P,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(sM),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},kU=(()=>{let e=class e{constructor(i,r,o,a){this._viewportRuler=i,this._document=r,this._platform=o,this._overlayContainer=a}global(){return new N0}flexibleConnectedTo(i){return new R0(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(V(x0),V(Qe),V(Gt),V(cM))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),RU=0,nh=(()=>{let e=class e{constructor(i,r,o,a,c,u,f,p,_,b,I,M){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=o,this._positionBuilder=a,this._keyboardDispatcher=c,this._injector=u,this._ngZone=f,this._document=p,this._directionality=_,this._location=b,this._outsideClickDispatcher=I,this._animationsModuleType=M}create(i){let r=this._createHostElement(),o=this._createPaneElement(r),a=this._createPortalOutlet(o),c=new th(i);return c.direction=c.direction||this._directionality.value,new k0(a,r,o,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations",this._injector.get(Qn))}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${RU++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(la)),new Zm(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(V(TU),V(cM),V(Wo),V(kU),V(SU),V(vn),V(we),V(Qe),V(VA),V(da),V(AU),V(ra,8))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var NU=new le("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=ee(nh);return()=>t.scrollStrategies.reposition()}});function OU(t){return()=>t.scrollStrategies.reposition()}var LU={provide:NU,deps:[nh],useFactory:OU},lM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({providers:[nh,LU],imports:[ts,Km,D0,D0]});let t=e;return t})();function VU(t,e){if(t&1){let n=bt();$(0,"div",1)(1,"button",2),Ie("click",function(){at(n);let r=ce();return ct(r.action())}),J(2),G()()}if(t&2){let n=ce();q(2),lt(" ",n.data.action," ")}}var BU=["label"];function jU(t,e){}var zU=Math.pow(2,31)-1,ih=class{constructor(e,n){this._overlayRef=n,this._afterDismissed=new Re,this._afterOpened=new Re,this._onAction=new Re,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,zU))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},uM=new le("MatSnackBarData"),xl=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},UU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0});let t=e;return t})(),HU=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0});let t=e;return t})(),$U=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0});let t=e;return t})(),dM=(()=>{let e=class e{constructor(i,r){this.snackBarRef=i,this.data=r}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}};e.\u0275fac=function(r){return new(r||e)(_e(ih),_e(uM))},e.\u0275cmp=it({type:e,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[ut],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(r,o){r&1&&($(0,"div",0),J(1),G(),Me(2,VU,3,1,"div",1)),r&2&&(q(),lt(" ",o.data.message,`
`),q(),Ze(2,o.hasAction?2:-1))},dependencies:[QA,UU,HU,$U],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0});let t=e;return t})(),qU={snackBarState:XA("state",[w0("void, hidden",Wm({transform:"scale(0.8)",opacity:0})),w0("visible",Wm({transform:"scale(1)",opacity:1})),I0("* => visible",b0("150ms cubic-bezier(0, 0, 0.2, 1)")),I0("* => void, * => hidden",b0("75ms cubic-bezier(0.4, 0.0, 1, 1)",Wm({opacity:0})))])},GU=0,WU=(()=>{let e=class e extends El{constructor(i,r,o,a,c){super(),this._ngZone=i,this._elementRef=r,this._changeDetectorRef=o,this._platform=a,this.snackBarConfig=c,this._document=ee(Qe),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Re,this._onExit=new Re,this._onEnter=new Re,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${GU++}`,this.attachDomPortal=u=>{this._assertNotAttached();let f=this._portalOutlet.attachDomPortal(u);return this._afterPortalAttached(),f},c.politeness==="assertive"&&!c.announcementMessage?this._live="assertive":c.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(i){this._assertNotAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._afterPortalAttached(),r}attachTemplatePortal(i){this._assertNotAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._afterPortalAttached(),r}onAnimationEnd(i){let{fromState:r,toState:o}=i;if((o==="void"&&r!=="void"||o==="hidden")&&this._completeExit(),o==="visible"){let a=this._onEnter;this._ngZone.run(()=>{a.next(),a.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let i=this._elementRef.nativeElement,r=this.snackBarConfig.panelClass;r&&(Array.isArray(r)?r.forEach(c=>i.classList.add(c)):i.classList.add(r)),this._exposeToModals();let o=this._label.nativeElement,a="mdc-snackbar__label";o.classList.toggle(a,!o.querySelector(`.${a}`))}_exposeToModals(){let i=this._liveElementId,r=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let o=0;o<r.length;o++){let a=r[o],c=a.getAttribute("aria-owns");this._trackedModals.add(a),c?c.indexOf(i)===-1&&a.setAttribute("aria-owns",c+" "+i):a.setAttribute("aria-owns",i)}}_clearFromModals(){this._trackedModals.forEach(i=>{let r=i.getAttribute("aria-owns");if(r){let o=r.replace(this._liveElementId,"").trim();o.length>0?i.setAttribute("aria-owns",o):i.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let i=this._elementRef.nativeElement.querySelector("[aria-hidden]"),r=this._elementRef.nativeElement.querySelector("[aria-live]");if(i&&r){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&i.contains(document.activeElement)&&(o=document.activeElement),i.removeAttribute("aria-hidden"),r.appendChild(i),o?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}};e.\u0275fac=function(r){return new(r||e)(_e(we),_e(Dt),_e(er),_e(Gt),_e(xl))},e.\u0275cmp=it({type:e,selectors:[["mat-snack-bar-container"]],viewQuery:function(r,o){if(r&1&&(lo(E0,7),lo(BU,7)),r&2){let a;Xn(a=Jn())&&(o._portalOutlet=a.first),Xn(a=Jn())&&(o._label=a.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(r,o){r&1&&Xy("@state.done",function(c){return o.onAnimationEnd(c)}),r&2&&Yy("@state",o._animationState)},standalone:!0,features:[Zo,ut],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(r,o){r&1&&($(0,"div",1)(1,"div",2,0)(3,"div",3),Me(4,jU,0,0,"ng-template",4),G(),de(5,"div"),G()()),r&2&&(q(5),Xi("aria-live",o._live)("role",o._role)("id",o._liveElementId))},dependencies:[E0],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[qU.snackBarState]}});let t=e;return t})();function ZU(){return new xl}var KU=new le("mat-snack-bar-default-options",{providedIn:"root",factory:ZU}),QU=(()=>{let e=class e{get _openedSnackBarRef(){let i=this._parentSnackBar;return i?i._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(i){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=i:this._snackBarRefAtThisLevel=i}constructor(i,r,o,a,c,u){this._overlay=i,this._live=r,this._injector=o,this._breakpointObserver=a,this._parentSnackBar=c,this._defaultConfig=u,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=dM,this.snackBarContainerComponent=WU,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(i,r){return this._attach(i,r)}openFromTemplate(i,r){return this._attach(i,r)}open(i,r="",o){let a=ne(ne({},this._defaultConfig),o);return a.data={message:i,action:r},a.announcementMessage===i&&(a.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,a)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(i,r){let o=r&&r.viewContainerRef&&r.viewContainerRef.injector,a=vn.create({parent:o||this._injector,providers:[{provide:xl,useValue:r}]}),c=new Il(this.snackBarContainerComponent,r.viewContainerRef,a),u=i.attach(c);return u.instance.snackBarConfig=r,u.instance}_attach(i,r){let o=ne(ne(ne({},new xl),this._defaultConfig),r),a=this._createOverlay(o),c=this._attachSnackBarContainer(a,o),u=new ih(c,a);if(i instanceof Di){let f=new Cl(i,null,{$implicit:o.data,snackBarRef:u});u.instance=c.attachTemplatePortal(f)}else{let f=this._createInjector(o,u),p=new Il(i,void 0,f),_=c.attachComponentPortal(p);u.instance=_.instance}return this._breakpointObserver.observe(MA.HandsetPortrait).pipe(Ci(a.detachments())).subscribe(f=>{a.overlayElement.classList.toggle(this.handsetCssClass,f.matches)}),o.announcementMessage&&c._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(u,o),this._openedSnackBarRef=u,this._openedSnackBarRef}_animateSnackBar(i,r){i.afterDismissed().subscribe(()=>{this._openedSnackBarRef==i&&(this._openedSnackBarRef=null),r.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{i.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):i.containerInstance.enter(),r.duration&&r.duration>0&&i.afterOpened().subscribe(()=>i._dismissAfter(r.duration))}_createOverlay(i){let r=new th;r.direction=i.direction;let o=this._overlay.position().global(),a=i.direction==="rtl",c=i.horizontalPosition==="left"||i.horizontalPosition==="start"&&!a||i.horizontalPosition==="end"&&a,u=!c&&i.horizontalPosition!=="center";return c?o.left("0"):u?o.right("0"):o.centerHorizontally(),i.verticalPosition==="top"?o.top("0"):o.bottom("0"),r.positionStrategy=o,this._overlay.create(r)}_createInjector(i,r){let o=i&&i.viewContainerRef&&i.viewContainerRef.injector;return vn.create({parent:o||this._injector,providers:[{provide:ih,useValue:r},{provide:uM,useValue:i.data}]})}};e.\u0275fac=function(r){return new(r||e)(V(nh),V(NA),V(vn),V(Hm),V(e,12),V(KU))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hM=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({providers:[QU],imports:[lM,Km,YA,Pr,dM,Pr]});let t=e;return t})();var rh=(()=>{let e=class e{transform(i,...r){let o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a=[];for(let c=0;c<o.length;c++)for(let u=0;u<o.length;u++)a.push(o[c]+o[u]);if(console.log(i,...r),i<1e3)return i.toFixed(2);if(i>=1e3&&i<=999999)return(i/1e3).toFixed(2)+"K";if(i>=1e6&&i<=999999999)return(i/1e6).toFixed(2)+"M";if(i>=1e9&&i<=999999999999)return(i/1e9).toFixed(2)+"B";if(i>=1e12&&i<=999999999999999)return(i/1e12).toFixed(2)+"T";if(i>=1e15){let c=i/1e12,u=-1;for(;c/1e3>1;)c=c/1e3,u++;return c.toFixed(2)+a[u]}return null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=xr({name:"currency",type:e,pure:!0,standalone:!0});let t=e;return t})();var JU=new Map,e5={activated:!1,tokenObservers:[]},t5={initialized:!1,enabled:!1};function tr(t){return JU.get(t)||Object.assign({},e5)}function _M(){return t5}var n5="https://content-firebaseappcheck.googleapis.com/v1";var i5="exchangeDebugToken",fM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},fJ=24*60*60*1e3;var L0=class{constructor(e,n,i,r,o){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=r,r>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return U(this,null,function*(){this.stop();try{this.pending=new k_,this.pending.promise.catch(n=>{}),yield r5(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new k_,this.pending.promise.catch(n=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}};function r5(t){return new Promise(e=>{setTimeout(e,t)})}var o5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ns=new EE("appCheck","AppCheck",o5);function vM(t){if(!tr(t).activated)throw ns.create("use-before-activation",{appName:t.name})}function yM(i,r){return U(this,arguments,function*({url:t,body:e},n){let o={"Content-Type":"application/json"},a=n.getImmediate({optional:!0});if(a){let I=yield a.getHeartbeatsHeader();I&&(o["X-Firebase-Client"]=I)}let c={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(t,c)}catch(I){throw ns.create("fetch-network-error",{originalErrorMessage:I?.message})}if(u.status!==200)throw ns.create("fetch-status-error",{httpStatus:u.status});let f;try{f=yield u.json()}catch(I){throw ns.create("fetch-parse-error",{originalErrorMessage:I?.message})}let p=f.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw ns.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});let _=Number(p[1])*1e3,b=Date.now();return{token:f.token,expireTimeMillis:b+_,issuedAtTimeMillis:b}})}function bM(t,e){let{projectId:n,appId:i,apiKey:r}=t.options;return{url:`${n5}/projects/${n}/apps/${i}:${i5}?key=${r}`,body:{debug_token:e}}}var s5="firebase-app-check-database",a5=1,F0="firebase-app-check-store";var Ym=null;function c5(){return Ym||(Ym=new Promise((t,e)=>{try{let n=indexedDB.open(s5,a5);n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{var r;e(ns.create("storage-open",{originalErrorMessage:(r=i.target.error)===null||r===void 0?void 0:r.message}))},n.onupgradeneeded=i=>{let r=i.target.result;switch(i.oldVersion){case 0:r.createObjectStore(F0,{keyPath:"compositeKey"})}}}catch(n){e(ns.create("storage-open",{originalErrorMessage:n?.message}))}}),Ym)}function l5(t,e){return u5(d5(t),e)}function u5(t,e){return U(this,null,function*(){let i=(yield c5()).transaction(F0,"readwrite"),o=i.objectStore(F0).put({compositeKey:t,value:e});return new Promise((a,c)=>{o.onsuccess=u=>{a()},i.onerror=u=>{var f;c(ns.create("storage-set",{originalErrorMessage:(f=u.target.error)===null||f===void 0?void 0:f.message}))}})})}function d5(t){return`${t.options.appId}-${t.name}`}var V0=new Of("@firebase/app-check");function O0(t,e){return Nf()?l5(t,e).catch(n=>{V0.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function wM(){return _M().enabled}function IM(){return U(this,null,function*(){let t=_M();if(t.enabled&&t.token)return t.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var h5={error:"UNKNOWN_ERROR"};function f5(t){return wE.encodeString(JSON.stringify(t),!1)}function B0(t,e=!1){return U(this,null,function*(){let n=t.app;vM(n);let i=tr(n),r=i.token,o;if(r&&!oh(r)&&(i.token=void 0,r=void 0),!r){let u=yield i.cachedTokenPromise;u&&(oh(u)?r=u:yield O0(n,void 0))}if(!e&&r&&oh(r))return{token:r.token};let a=!1;if(wM()){i.exchangeTokenPromise||(i.exchangeTokenPromise=yM(bM(n,yield IM()),t.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield O0(n,u),i.token=u,{token:u.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),r=yield tr(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?V0.warn(u.message):V0.error(u),o=u}let c;return r?o?oh(r)?c={token:r.token,internalError:o}:c=mM(o):(c={token:r.token},i.token=r,yield O0(n,r)):c=mM(o),a&&_5(n,c),c})}function p5(t){return U(this,null,function*(){let e=t.app;vM(e);let{provider:n}=tr(e);if(wM()){let i=yield IM(),{token:r}=yield yM(bM(e,i),t.heartbeatServiceProvider);return{token:r}}else{let{token:i}=yield n.getToken();return{token:i}}})}function m5(t,e,n,i){let{app:r}=t,o=tr(r),a={next:n,error:i,type:e};if(o.tokenObservers=[...o.tokenObservers,a],o.token&&oh(o.token)){let c=o.token;Promise.resolve().then(()=>{n({token:c.token}),pM(t)}).catch(()=>{})}o.cachedTokenPromise.then(()=>pM(t))}function CM(t,e){let n=tr(t),i=n.tokenObservers.filter(r=>r.next!==e);i.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=i}function pM(t){let{app:e}=t,n=tr(e),i=n.tokenRefresher;i||(i=g5(t),n.tokenRefresher=i),!i.isRunning()&&n.isTokenAutoRefreshEnabled&&i.start()}function g5(t){let{app:e}=t;return new L0(()=>U(this,null,function*(){let n=tr(e),i;if(n.token?i=yield B0(t,!0):i=yield B0(t),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{let n=tr(e);if(n.token){let i=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5,r=n.token.expireTimeMillis-5*60*1e3;return i=Math.min(i,r),Math.max(0,i-Date.now())}else return 0},fM.RETRIAL_MIN_WAIT,fM.RETRIAL_MAX_WAIT)}function _5(t,e){let n=tr(t).tokenObservers;for(let i of n)try{i.type==="EXTERNAL"&&e.error!=null?i.error(e.error):i.next(e)}catch{}}function oh(t){return t.expireTimeMillis-Date.now()>0}function mM(t){return{token:f5(h5),error:t}}var j0=class{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){let{tokenObservers:e}=tr(this.app);for(let n of e)CM(this.app,n.next);return Promise.resolve()}};function v5(t,e){return new j0(t,e)}function y5(t){return{getToken:e=>B0(t,e),getLimitedUseToken:()=>p5(t),addTokenListener:e=>m5(t,"INTERNAL",e),removeTokenListener:e=>CM(t.app,e)}}var b5="@firebase/app-check",w5="0.8.4";var I5="app-check",gM="app-check-internal";function C5(){Zu(new zs(I5,t=>{let e=t.getProvider("app").getImmediate(),n=t.getProvider("heartbeat");return v5(e,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,n)=>{t.getProvider(gM).initialize()})),Zu(new zs(gM,t=>{let e=t.getProvider("app-check").getImmediate();return y5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Fo(b5,w5)}C5();var E5=["localhost","0.0.0.0","127.0.0.1"],xJ=typeof window<"u"&&E5.includes(window.location.hostname);var z0=new le("angularfire2.auth.use-emulator"),U0=new le("angularfire2.auth.settings"),H0=new le("angularfire2.auth.tenant-id"),$0=new le("angularfire2.auth.langugage-code"),q0=new le("angularfire2.auth.use-device-language"),G0=new le("angularfire.auth.persistence"),W0=(t,e,n,i,r,o,a,c)=>zm(`${t.name}.auth`,"AngularFireAuth",t.name,()=>{let u=e.runOutsideAngular(()=>t.auth());if(n&&u.useEmulator(...n),i&&(u.tenantId=i),u.languageCode=r,o&&u.useDeviceLanguage(),a)for(let[f,p]of Object.entries(a))u.settings[f]=p;return c&&u.setPersistence(c),u},[n,i,r,o,a,c]),Xm=(()=>{class t{authState;idToken;user;idTokenResult;credential;constructor(n,i,r,o,a,c,u,f,p,_,b,I){let M=new Re,P=ge(void 0).pipe(bi(a.outsideAngular),kt(()=>o.runOutsideAngular(()=>import("./chunk-PY5DTK2U.js"))),be(()=>Qd(n,o,i)),be(F=>W0(F,o,c,f,p,_,u,b)),nd({bufferSize:1,refCount:!1}));if(ha(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ge(null);else{P.pipe(Ii()).subscribe();let F=P.pipe(kt(Z=>Z.getRedirectResult().then(se=>se,()=>null)),ti,nd({bufferSize:1,refCount:!1})),W=P.pipe(kt(Z=>new Oe(se=>({unsubscribe:o.runOutsideAngular(()=>Z.onAuthStateChanged(pe=>se.next(pe),pe=>se.error(pe),()=>se.complete()))})))),X=P.pipe(kt(Z=>new Oe(se=>({unsubscribe:o.runOutsideAngular(()=>Z.onIdTokenChanged(pe=>se.next(pe),pe=>se.error(pe),()=>se.complete()))}))));this.authState=F.pipe(cp(W),qi(a.outsideAngular),bi(a.insideAngular)),this.user=F.pipe(cp(X),qi(a.outsideAngular),bi(a.insideAngular)),this.idToken=this.user.pipe(kt(Z=>Z?yt(Z.getIdToken()):ge(null))),this.idTokenResult=this.user.pipe(kt(Z=>Z?yt(Z.getIdTokenResult()):ge(null))),this.credential=ed(F,M,this.authState.pipe($t(Z=>!Z))).pipe(be(Z=>Z?.user?Z:null),qi(a.outsideAngular),bi(a.insideAngular))}return wA(this,P,o,{spy:{apply:(F,W,X)=>{(F.startsWith("signIn")||F.startsWith("createUser"))&&X.then(Z=>M.next(Z))}}})}static \u0275fac=function(i){return new(i||t)(V(gl),V(_l,8),V(zn),V(we),V(Bm),V(z0,8),V(U0,8),V(H0,8),V($0,8),V(q0,8),V(G0,8),V(_a,8))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var DM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},TM={};var is,Z0;(function(){var t;function e(S,E){function x(){}x.prototype=E.prototype,S.D=E.prototype,S.prototype=new x,S.prototype.constructor=S,S.C=function(A,k,N){for(var T=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)T[jt-2]=arguments[jt];return E.prototype[k].apply(A,T)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(S,E,x){x||(x=0);var A=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)A[k]=E.charCodeAt(x++)|E.charCodeAt(x++)<<8|E.charCodeAt(x++)<<16|E.charCodeAt(x++)<<24;else for(k=0;16>k;++k)A[k]=E[x++]|E[x++]<<8|E[x++]<<16|E[x++]<<24;E=S.g[0],x=S.g[1],k=S.g[2];var N=S.g[3],T=E+(N^x&(k^N))+A[0]+3614090360&4294967295;E=x+(T<<7&4294967295|T>>>25),T=N+(k^E&(x^k))+A[1]+3905402710&4294967295,N=E+(T<<12&4294967295|T>>>20),T=k+(x^N&(E^x))+A[2]+606105819&4294967295,k=N+(T<<17&4294967295|T>>>15),T=x+(E^k&(N^E))+A[3]+3250441966&4294967295,x=k+(T<<22&4294967295|T>>>10),T=E+(N^x&(k^N))+A[4]+4118548399&4294967295,E=x+(T<<7&4294967295|T>>>25),T=N+(k^E&(x^k))+A[5]+1200080426&4294967295,N=E+(T<<12&4294967295|T>>>20),T=k+(x^N&(E^x))+A[6]+2821735955&4294967295,k=N+(T<<17&4294967295|T>>>15),T=x+(E^k&(N^E))+A[7]+4249261313&4294967295,x=k+(T<<22&4294967295|T>>>10),T=E+(N^x&(k^N))+A[8]+1770035416&4294967295,E=x+(T<<7&4294967295|T>>>25),T=N+(k^E&(x^k))+A[9]+2336552879&4294967295,N=E+(T<<12&4294967295|T>>>20),T=k+(x^N&(E^x))+A[10]+4294925233&4294967295,k=N+(T<<17&4294967295|T>>>15),T=x+(E^k&(N^E))+A[11]+2304563134&4294967295,x=k+(T<<22&4294967295|T>>>10),T=E+(N^x&(k^N))+A[12]+1804603682&4294967295,E=x+(T<<7&4294967295|T>>>25),T=N+(k^E&(x^k))+A[13]+4254626195&4294967295,N=E+(T<<12&4294967295|T>>>20),T=k+(x^N&(E^x))+A[14]+2792965006&4294967295,k=N+(T<<17&4294967295|T>>>15),T=x+(E^k&(N^E))+A[15]+1236535329&4294967295,x=k+(T<<22&4294967295|T>>>10),T=E+(k^N&(x^k))+A[1]+4129170786&4294967295,E=x+(T<<5&4294967295|T>>>27),T=N+(x^k&(E^x))+A[6]+3225465664&4294967295,N=E+(T<<9&4294967295|T>>>23),T=k+(E^x&(N^E))+A[11]+643717713&4294967295,k=N+(T<<14&4294967295|T>>>18),T=x+(N^E&(k^N))+A[0]+3921069994&4294967295,x=k+(T<<20&4294967295|T>>>12),T=E+(k^N&(x^k))+A[5]+3593408605&4294967295,E=x+(T<<5&4294967295|T>>>27),T=N+(x^k&(E^x))+A[10]+38016083&4294967295,N=E+(T<<9&4294967295|T>>>23),T=k+(E^x&(N^E))+A[15]+3634488961&4294967295,k=N+(T<<14&4294967295|T>>>18),T=x+(N^E&(k^N))+A[4]+3889429448&4294967295,x=k+(T<<20&4294967295|T>>>12),T=E+(k^N&(x^k))+A[9]+568446438&4294967295,E=x+(T<<5&4294967295|T>>>27),T=N+(x^k&(E^x))+A[14]+3275163606&4294967295,N=E+(T<<9&4294967295|T>>>23),T=k+(E^x&(N^E))+A[3]+4107603335&4294967295,k=N+(T<<14&4294967295|T>>>18),T=x+(N^E&(k^N))+A[8]+1163531501&4294967295,x=k+(T<<20&4294967295|T>>>12),T=E+(k^N&(x^k))+A[13]+2850285829&4294967295,E=x+(T<<5&4294967295|T>>>27),T=N+(x^k&(E^x))+A[2]+4243563512&4294967295,N=E+(T<<9&4294967295|T>>>23),T=k+(E^x&(N^E))+A[7]+1735328473&4294967295,k=N+(T<<14&4294967295|T>>>18),T=x+(N^E&(k^N))+A[12]+2368359562&4294967295,x=k+(T<<20&4294967295|T>>>12),T=E+(x^k^N)+A[5]+4294588738&4294967295,E=x+(T<<4&4294967295|T>>>28),T=N+(E^x^k)+A[8]+2272392833&4294967295,N=E+(T<<11&4294967295|T>>>21),T=k+(N^E^x)+A[11]+1839030562&4294967295,k=N+(T<<16&4294967295|T>>>16),T=x+(k^N^E)+A[14]+4259657740&4294967295,x=k+(T<<23&4294967295|T>>>9),T=E+(x^k^N)+A[1]+2763975236&4294967295,E=x+(T<<4&4294967295|T>>>28),T=N+(E^x^k)+A[4]+1272893353&4294967295,N=E+(T<<11&4294967295|T>>>21),T=k+(N^E^x)+A[7]+4139469664&4294967295,k=N+(T<<16&4294967295|T>>>16),T=x+(k^N^E)+A[10]+3200236656&4294967295,x=k+(T<<23&4294967295|T>>>9),T=E+(x^k^N)+A[13]+681279174&4294967295,E=x+(T<<4&4294967295|T>>>28),T=N+(E^x^k)+A[0]+3936430074&4294967295,N=E+(T<<11&4294967295|T>>>21),T=k+(N^E^x)+A[3]+3572445317&4294967295,k=N+(T<<16&4294967295|T>>>16),T=x+(k^N^E)+A[6]+76029189&4294967295,x=k+(T<<23&4294967295|T>>>9),T=E+(x^k^N)+A[9]+3654602809&4294967295,E=x+(T<<4&4294967295|T>>>28),T=N+(E^x^k)+A[12]+3873151461&4294967295,N=E+(T<<11&4294967295|T>>>21),T=k+(N^E^x)+A[15]+530742520&4294967295,k=N+(T<<16&4294967295|T>>>16),T=x+(k^N^E)+A[2]+3299628645&4294967295,x=k+(T<<23&4294967295|T>>>9),T=E+(k^(x|~N))+A[0]+4096336452&4294967295,E=x+(T<<6&4294967295|T>>>26),T=N+(x^(E|~k))+A[7]+1126891415&4294967295,N=E+(T<<10&4294967295|T>>>22),T=k+(E^(N|~x))+A[14]+2878612391&4294967295,k=N+(T<<15&4294967295|T>>>17),T=x+(N^(k|~E))+A[5]+4237533241&4294967295,x=k+(T<<21&4294967295|T>>>11),T=E+(k^(x|~N))+A[12]+1700485571&4294967295,E=x+(T<<6&4294967295|T>>>26),T=N+(x^(E|~k))+A[3]+2399980690&4294967295,N=E+(T<<10&4294967295|T>>>22),T=k+(E^(N|~x))+A[10]+4293915773&4294967295,k=N+(T<<15&4294967295|T>>>17),T=x+(N^(k|~E))+A[1]+2240044497&4294967295,x=k+(T<<21&4294967295|T>>>11),T=E+(k^(x|~N))+A[8]+1873313359&4294967295,E=x+(T<<6&4294967295|T>>>26),T=N+(x^(E|~k))+A[15]+4264355552&4294967295,N=E+(T<<10&4294967295|T>>>22),T=k+(E^(N|~x))+A[6]+2734768916&4294967295,k=N+(T<<15&4294967295|T>>>17),T=x+(N^(k|~E))+A[13]+1309151649&4294967295,x=k+(T<<21&4294967295|T>>>11),T=E+(k^(x|~N))+A[4]+4149444226&4294967295,E=x+(T<<6&4294967295|T>>>26),T=N+(x^(E|~k))+A[11]+3174756917&4294967295,N=E+(T<<10&4294967295|T>>>22),T=k+(E^(N|~x))+A[2]+718787259&4294967295,k=N+(T<<15&4294967295|T>>>17),T=x+(N^(k|~E))+A[9]+3951481745&4294967295,S.g[0]=S.g[0]+E&4294967295,S.g[1]=S.g[1]+(k+(T<<21&4294967295|T>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+N&4294967295}i.prototype.u=function(S,E){E===void 0&&(E=S.length);for(var x=E-this.blockSize,A=this.B,k=this.h,N=0;N<E;){if(k==0)for(;N<=x;)r(this,S,N),N+=this.blockSize;if(typeof S=="string"){for(;N<E;)if(A[k++]=S.charCodeAt(N++),k==this.blockSize){r(this,A),k=0;break}}else for(;N<E;)if(A[k++]=S[N++],k==this.blockSize){r(this,A),k=0;break}}this.h=k,this.o+=E},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var E=1;E<S.length-8;++E)S[E]=0;var x=8*this.o;for(E=S.length-8;E<S.length;++E)S[E]=x&255,x/=256;for(this.u(S),S=Array(16),E=x=0;4>E;++E)for(var A=0;32>A;A+=8)S[x++]=this.g[E]>>>A&255;return S};function o(S,E){var x=c;return Object.prototype.hasOwnProperty.call(x,S)?x[S]:x[S]=E(S)}function a(S,E){this.h=E;for(var x=[],A=!0,k=S.length-1;0<=k;k--){var N=S[k]|0;A&&N==E||(x[k]=N,A=!1)}this.g=x}var c={};function u(S){return-128<=S&&128>S?o(S,function(E){return new a([E|0],0>E?-1:0)}):new a([S|0],0>S?-1:0)}function f(S){if(isNaN(S)||!isFinite(S))return _;if(0>S)return F(f(-S));for(var E=[],x=1,A=0;S>=x;A++)E[A]=S/x|0,x*=4294967296;return new a(E,0)}function p(S,E){if(S.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(S.charAt(0)=="-")return F(p(S.substring(1),E));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=f(Math.pow(E,8)),A=_,k=0;k<S.length;k+=8){var N=Math.min(8,S.length-k),T=parseInt(S.substring(k,k+N),E);8>N?(N=f(Math.pow(E,N)),A=A.j(N).add(f(T))):(A=A.j(x),A=A.add(f(T)))}return A}var _=u(0),b=u(1),I=u(16777216);t=a.prototype,t.m=function(){if(P(this))return-F(this).m();for(var S=0,E=1,x=0;x<this.g.length;x++){var A=this.i(x);S+=(0<=A?A:4294967296+A)*E,E*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(M(this))return"0";if(P(this))return"-"+F(this).toString(S);for(var E=f(Math.pow(S,6)),x=this,A="";;){var k=se(x,E).g;x=W(x,k.j(E));var N=((0<x.g.length?x.g[0]:x.h)>>>0).toString(S);if(x=k,M(x))return N+A;for(;6>N.length;)N="0"+N;A=N+A}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function M(S){if(S.h!=0)return!1;for(var E=0;E<S.g.length;E++)if(S.g[E]!=0)return!1;return!0}function P(S){return S.h==-1}t.l=function(S){return S=W(this,S),P(S)?-1:M(S)?0:1};function F(S){for(var E=S.g.length,x=[],A=0;A<E;A++)x[A]=~S.g[A];return new a(x,~S.h).add(b)}t.abs=function(){return P(this)?F(this):this},t.add=function(S){for(var E=Math.max(this.g.length,S.g.length),x=[],A=0,k=0;k<=E;k++){var N=A+(this.i(k)&65535)+(S.i(k)&65535),T=(N>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);A=T>>>16,N&=65535,T&=65535,x[k]=T<<16|N}return new a(x,x[x.length-1]&-2147483648?-1:0)};function W(S,E){return S.add(F(E))}t.j=function(S){if(M(this)||M(S))return _;if(P(this))return P(S)?F(this).j(F(S)):F(F(this).j(S));if(P(S))return F(this.j(F(S)));if(0>this.l(I)&&0>S.l(I))return f(this.m()*S.m());for(var E=this.g.length+S.g.length,x=[],A=0;A<2*E;A++)x[A]=0;for(A=0;A<this.g.length;A++)for(var k=0;k<S.g.length;k++){var N=this.i(A)>>>16,T=this.i(A)&65535,jt=S.i(k)>>>16,Bi=S.i(k)&65535;x[2*A+2*k]+=T*Bi,X(x,2*A+2*k),x[2*A+2*k+1]+=N*Bi,X(x,2*A+2*k+1),x[2*A+2*k+1]+=T*jt,X(x,2*A+2*k+1),x[2*A+2*k+2]+=N*jt,X(x,2*A+2*k+2)}for(A=0;A<E;A++)x[A]=x[2*A+1]<<16|x[2*A];for(A=E;A<2*E;A++)x[A]=0;return new a(x,0)};function X(S,E){for(;(S[E]&65535)!=S[E];)S[E+1]+=S[E]>>>16,S[E]&=65535,E++}function Z(S,E){this.g=S,this.h=E}function se(S,E){if(M(E))throw Error("division by zero");if(M(S))return new Z(_,_);if(P(S))return E=se(F(S),E),new Z(F(E.g),F(E.h));if(P(E))return E=se(S,F(E)),new Z(F(E.g),E.h);if(30<S.g.length){if(P(S)||P(E))throw Error("slowDivide_ only works with positive integers.");for(var x=b,A=E;0>=A.l(S);)x=pe(x),A=pe(A);var k=he(x,1),N=he(A,1);for(A=he(A,2),x=he(x,2);!M(A);){var T=N.add(A);0>=T.l(S)&&(k=k.add(x),N=T),A=he(A,1),x=he(x,1)}return E=W(S,k.j(E)),new Z(k,E)}for(k=_;0<=S.l(E);){for(x=Math.max(1,Math.floor(S.m()/E.m())),A=Math.ceil(Math.log(x)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),N=f(x),T=N.j(E);P(T)||0<T.l(S);)x-=A,N=f(x),T=N.j(E);M(N)&&(N=b),k=k.add(N),S=W(S,T)}return new Z(k,S)}t.A=function(S){return se(this,S).h},t.and=function(S){for(var E=Math.max(this.g.length,S.g.length),x=[],A=0;A<E;A++)x[A]=this.i(A)&S.i(A);return new a(x,this.h&S.h)},t.or=function(S){for(var E=Math.max(this.g.length,S.g.length),x=[],A=0;A<E;A++)x[A]=this.i(A)|S.i(A);return new a(x,this.h|S.h)},t.xor=function(S){for(var E=Math.max(this.g.length,S.g.length),x=[],A=0;A<E;A++)x[A]=this.i(A)^S.i(A);return new a(x,this.h^S.h)};function pe(S){for(var E=S.g.length+1,x=[],A=0;A<E;A++)x[A]=S.i(A)<<1|S.i(A-1)>>>31;return new a(x,S.h)}function he(S,E){var x=E>>5;E%=32;for(var A=S.g.length-x,k=[],N=0;N<A;N++)k[N]=0<E?S.i(N+x)>>>E|S.i(N+x+1)<<32-E:S.i(N+x);return new a(k,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Z0=TM.Md5=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,is=TM.Integer=a}).apply(typeof DM<"u"?DM:typeof self<"u"?self:typeof window<"u"?window:{});var Jm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fo={};var K0,Q0,Dl,Y0,sh,eg,X0,J0,ew;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,y){return d==Array.prototype||d==Object.prototype||(d[g]=y.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jm=="object"&&Jm];for(var g=0;g<d.length;++g){var y=d[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=n(this);function r(d,g){if(g)e:{var y=i;d=d.split(".");for(var C=0;C<d.length-1;C++){var R=d[C];if(!(R in y))break e;y=y[R]}d=d[d.length-1],C=y[d],g=g(C),g!=C&&g!=null&&e(y,d,{configurable:!0,writable:!0,value:g})}}function o(d,g){d instanceof String&&(d+="");var y=0,C=!1,R={next:function(){if(!C&&y<d.length){var z=y++;return{value:g(z,d[z]),done:!1}}return C=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}r("Array.prototype.values",function(d){return d||function(){return o(this,function(g,y){return y})}});var a=a||{},c=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function f(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function p(d,g,y){return d.call.apply(d.bind,arguments)}function _(d,g,y){if(!d)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,C),d.apply(g,R)}}return function(){return d.apply(g,arguments)}}function b(d,g,y){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:_,b.apply(null,arguments)}function I(d,g){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),d.apply(this,C)}}function M(d,g){function y(){}y.prototype=g.prototype,d.aa=g.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(C,R,z){for(var te=Array(arguments.length-2),He=2;He<arguments.length;He++)te[He-2]=arguments[He];return g.prototype[R].apply(C,te)}}function P(d){let g=d.length;if(0<g){let y=Array(g);for(let C=0;C<g;C++)y[C]=d[C];return y}return[]}function F(d,g){for(let y=1;y<arguments.length;y++){let C=arguments[y];if(u(C)){let R=d.length||0,z=C.length||0;d.length=R+z;for(let te=0;te<z;te++)d[R+te]=C[te]}else d.push(C)}}class W{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function X(d){return/^[\s\xa0]*$/.test(d)}function Z(){var d=c.navigator;return d&&(d=d.userAgent)?d:""}function se(d){return se[" "](d),d}se[" "]=function(){};var pe=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function he(d,g,y){for(let C in d)g.call(y,d[C],C,d)}function S(d,g){for(let y in d)g.call(void 0,d[y],y,d)}function E(d){let g={};for(let y in d)g[y]=d[y];return g}let x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(d,g){let y,C;for(let R=1;R<arguments.length;R++){C=arguments[R];for(y in C)d[y]=C[y];for(let z=0;z<x.length;z++)y=x[z],Object.prototype.hasOwnProperty.call(C,y)&&(d[y]=C[y])}}function k(d){var g=1;d=d.split(":");let y=[];for(;0<g&&d.length;)y.push(d.shift()),g--;return d.length&&y.push(d.join(":")),y}function N(d){c.setTimeout(()=>{throw d},0)}function T(){var d=Ct;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class jt{constructor(){this.h=this.g=null}add(g,y){let C=Bi.get();C.set(g,y),this.h?this.h.next=C:this.g=C,this.h=C}}var Bi=new W(()=>new Pe,d=>d.reset());class Pe{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Co,Ce=!1,Ct=new jt,wn=()=>{let d=c.Promise.resolve(void 0);Co=()=>{d.then(Sn)}};var Sn=()=>{for(var d;d=T();){try{d.h.call(d.g)}catch(y){N(y)}var g=Bi;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}Ce=!1};function _t(){this.s=this.s,this.C=this.C}_t.prototype.s=!1,_t.prototype.ma=function(){this.s||(this.s=!0,this.N())},_t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Ye=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};c.addEventListener("test",y,g),c.removeEventListener("test",y,g)}catch{}return d}();function Nn(d,g){if(Se.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,C=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(pe){e:{try{se(g.nodeName);var R=!0;break e}catch{}R=!1}R||(g=null)}}else y=="mouseover"?g=d.fromElement:y=="mouseout"&&(g=d.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:sr[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Nn.aa.h.call(this)}}M(Nn,Se);var sr={2:"touch",3:"pen",4:"mouse"};Nn.prototype.h=function(){Nn.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Eo="closure_listenable_"+(1e6*Math.random()|0),fu=0;function pu(d,g,y,C,R){this.listener=d,this.proxy=null,this.src=g,this.type=y,this.capture=!!C,this.ha=R,this.key=++fu,this.da=this.fa=!1}function ar(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function xo(d){this.src=d,this.g={},this.h=0}xo.prototype.add=function(d,g,y,C,R){var z=d.toString();d=this.g[z],d||(d=this.g[z]=[],this.h++);var te=Qa(d,g,C,R);return-1<te?(g=d[te],y||(g.fa=!1)):(g=new pu(g,this.src,z,!!C,R),g.fa=y,d.push(g)),g};function mu(d,g){var y=g.type;if(y in d.g){var C=d.g[y],R=Array.prototype.indexOf.call(C,g,void 0),z;(z=0<=R)&&Array.prototype.splice.call(C,R,1),z&&(ar(g),d.g[y].length==0&&(delete d.g[y],d.h--))}}function Qa(d,g,y,C){for(var R=0;R<d.length;++R){var z=d[R];if(!z.da&&z.listener==g&&z.capture==!!y&&z.ha==C)return R}return-1}var Ya="closure_lm_"+(1e6*Math.random()|0),Cs={};function Es(d,g,y,C,R){if(C&&C.once)return Xa(d,g,y,C,R);if(Array.isArray(g)){for(var z=0;z<g.length;z++)Es(d,g[z],y,C,R);return null}return y=tc(y),d&&d[Eo]?d.K(g,y,f(C)?!!C.capture:!!C,R):Kh(d,g,y,!1,C,R)}function Kh(d,g,y,C,R,z){if(!g)throw Error("Invalid event type");var te=f(R)?!!R.capture:!!R,He=xs(d);if(He||(d[Ya]=He=new xo(d)),y=He.add(g,y,C,te,z),y.proxy)return y;if(C=Qh(),y.proxy=C,C.src=d,C.listener=y,d.addEventListener)Ye||(R=te),R===void 0&&(R=!1),d.addEventListener(g.toString(),C,R);else if(d.attachEvent)d.attachEvent(Yh(g.toString()),C);else if(d.addListener&&d.removeListener)d.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Qh(){function d(y){return g.call(d.src,d.listener,y)}let g=I_;return d}function Xa(d,g,y,C,R){if(Array.isArray(g)){for(var z=0;z<g.length;z++)Xa(d,g[z],y,C,R);return null}return y=tc(y),d&&d[Eo]?d.L(g,y,f(C)?!!C.capture:!!C,R):Kh(d,g,y,!0,C,R)}function gu(d,g,y,C,R){if(Array.isArray(g))for(var z=0;z<g.length;z++)gu(d,g[z],y,C,R);else C=f(C)?!!C.capture:!!C,y=tc(y),d&&d[Eo]?(d=d.i,g=String(g).toString(),g in d.g&&(z=d.g[g],y=Qa(z,y,C,R),-1<y&&(ar(z[y]),Array.prototype.splice.call(z,y,1),z.length==0&&(delete d.g[g],d.h--)))):d&&(d=xs(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Qa(g,y,C,R)),(y=-1<d?g[d]:null)&&Ja(y))}function Ja(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Eo])mu(g.i,d);else{var y=d.type,C=d.proxy;g.removeEventListener?g.removeEventListener(y,C,d.capture):g.detachEvent?g.detachEvent(Yh(y),C):g.addListener&&g.removeListener&&g.removeListener(C),(y=xs(g))?(mu(y,d),y.h==0&&(y.src=null,g[Ya]=null)):ar(d)}}}function Yh(d){return d in Cs?Cs[d]:Cs[d]="on"+d}function I_(d,g){if(d.da)d=!0;else{g=new Nn(g,this);var y=d.listener,C=d.ha||d.src;d.fa&&Ja(d),d=y.call(C,g)}return d}function xs(d){return d=d[Ya],d instanceof xo?d:null}var ec="__closure_events_fn_"+(1e9*Math.random()>>>0);function tc(d){return typeof d=="function"?d:(d[ec]||(d[ec]=function(g){return d.handleEvent(g)}),d[ec])}function pn(){_t.call(this),this.i=new xo(this),this.M=this,this.F=null}M(pn,_t),pn.prototype[Eo]=!0,pn.prototype.removeEventListener=function(d,g,y,C){gu(this,d,g,y,C)};function mn(d,g){var y,C=d.F;if(C)for(y=[];C;C=C.F)y.push(C);if(d=d.M,C=g.type||g,typeof g=="string")g=new Se(g,d);else if(g instanceof Se)g.target=g.target||d;else{var R=g;g=new Se(C,d),A(g,R)}if(R=!0,y)for(var z=y.length-1;0<=z;z--){var te=g.g=y[z];R=Ds(te,C,!0,g)&&R}if(te=g.g=d,R=Ds(te,C,!0,g)&&R,R=Ds(te,C,!1,g)&&R,y)for(z=0;z<y.length;z++)te=g.g=y[z],R=Ds(te,C,!1,g)&&R}pn.prototype.N=function(){if(pn.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var y=d.g[g],C=0;C<y.length;C++)ar(y[C]);delete d.g[g],d.h--}}this.F=null},pn.prototype.K=function(d,g,y,C){return this.i.add(String(d),g,!1,y,C)},pn.prototype.L=function(d,g,y,C){return this.i.add(String(d),g,!0,y,C)};function Ds(d,g,y,C){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var R=!0,z=0;z<g.length;++z){var te=g[z];if(te&&!te.da&&te.capture==y){var He=te.listener,Vt=te.ha||te.src;te.fa&&mu(d.i,te),R=He.call(Vt,C)!==!1&&R}}return R&&!C.defaultPrevented}function Xh(d,g,y){if(typeof d=="function")y&&(d=b(d,y));else if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:c.setTimeout(d,g||0)}function _u(d){d.g=Xh(()=>{d.g=null,d.i&&(d.i=!1,_u(d))},d.l);let g=d.h;d.h=null,d.m.apply(null,g)}class vu extends _t{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:_u(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Do(d){_t.call(this),this.h=d,this.g={}}M(Do,_t);var Jh=[];function To(d){he(d.g,function(g,y){this.g.hasOwnProperty(y)&&Ja(g)},d),d.g={}}Do.prototype.N=function(){Do.aa.N.call(this),To(this)},Do.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yu=c.JSON.stringify,C_=c.JSON.parse,ef=class{stringify(d){return c.JSON.stringify(d,void 0)}parse(d){return c.JSON.parse(d,void 0)}};function nc(){}nc.prototype.h=null;function bu(d){return d.h||(d.h=d.i())}function tf(){}var Ts={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wu(){Se.call(this,"d")}M(wu,Se);function Iu(){Se.call(this,"c")}M(Iu,Se);var Hr={},nf=null;function So(){return nf=nf||new pn}Hr.La="serverreachability";function rf(d){Se.call(this,Hr.La,d)}M(rf,Se);function Ss(d){let g=So();mn(g,new rf(g))}Hr.STAT_EVENT="statevent";function of(d,g){Se.call(this,Hr.STAT_EVENT,d),this.stat=g}M(of,Se);function In(d){let g=So();mn(g,new of(g,d))}Hr.Ma="timingevent";function ii(d,g){Se.call(this,Hr.Ma,d),this.size=g}M(ii,Se);function fe(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){d()},g)}function Ao(){this.g=!0}Ao.prototype.xa=function(){this.g=!1};function sf(d,g,y,C,R,z){d.info(function(){if(d.g)if(z)for(var te="",He=z.split("&"),Vt=0;Vt<He.length;Vt++){var nt=He[Vt].split("=");if(1<nt.length){var At=nt[0];nt=nt[1];var gn=At.split("_");te=2<=gn.length&&gn[1]=="type"?te+(At+"="+nt+"&"):te+(At+"=redacted&")}}else te=null;else te=z;return"XMLHTTP REQ ("+C+") [attempt "+R+"]: "+g+`
`+y+`
`+te})}function af(d,g,y,C,R,z,te){d.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+R+"]: "+g+`
`+y+`
`+z+" "+te})}function $r(d,g,y,C){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+cf(d,y)+(C?" "+C:"")})}function Cu(d,g){d.info(function(){return"TIMEOUT: "+g})}Ao.prototype.info=function(){};function cf(d,g){if(!d.g)return g;if(!g)return null;try{var y=JSON.parse(g);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var C=y[d];if(!(2>C.length)){var R=C[1];if(Array.isArray(R)&&!(1>R.length)){var z=R[0];if(z!="noop"&&z!="stop"&&z!="close")for(var te=1;te<R.length;te++)R[te]=""}}}}return yu(y)}catch{return g}}var ji={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Eu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xu;function ic(){}M(ic,nc),ic.prototype.g=function(){return new XMLHttpRequest},ic.prototype.i=function(){return{}},xu=new ic;function cr(d,g,y,C){this.j=d,this.i=g,this.l=y,this.R=C||1,this.U=new Do(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lf}function lf(){this.i=null,this.g="",this.h=!1}var Du={},Tu={};function Mo(d,g,y){d.L=1,d.v=ko(Cn(g)),d.m=y,d.P=!0,uf(d,null)}function uf(d,g){d.F=Date.now(),rc(d),d.A=Cn(d.v);var y=d.A,C=d.R;Array.isArray(C)||(C=[String(C)]),vt(y.i,"t",C),d.C=0,y=d.j.J,d.h=new lf,d.g=js(d.j,y?g:null,!d.m),0<d.O&&(d.M=new vu(b(d.Y,d,d.g),d.O)),g=d.U,y=d.g,C=d.ca;var R="readystatechange";Array.isArray(R)||(R&&(Jh[0]=R.toString()),R=Jh);for(var z=0;z<R.length;z++){var te=Es(y,R[z],C||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=d.H?E(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Ss(),sf(d.i,d.u,d.A,d.l,d.R,d.m)}cr.prototype.ca=function(d){d=d.target;let g=this.M;g&&oi(d)==3?g.j():this.Y(d)},cr.prototype.Y=function(d){try{if(d==this.g)e:{let gn=oi(this.g);var g=this.g.Ba();let ai=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||_f(this.g)))){this.J||gn!=4||g==7||(g==8||0>=ai?Ss(3):Ss(2)),As(this);var y=this.g.Z();this.X=y;t:if(df(this)){var C=_f(this.g);d="";var R=C.length,z=oi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lr(this),zi(this);var te="";break t}this.h.i=new c.TextDecoder}for(g=0;g<R;g++)this.h.h=!0,d+=this.h.i.decode(C[g],{stream:!(z&&g==R-1)});C.length=0,this.h.g+=d,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=y==200,af(this.i,this.u,this.A,this.l,this.R,gn,y),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Vt=this.g;if((He=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(He)){var nt=He;break t}}nt=null}if(y=nt)$r(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,y);else{this.o=!1,this.s=3,In(12),lr(this),zi(this);break e}}if(this.P){y=!0;let ci;for(;!this.J&&this.C<te.length;)if(ci=E_(this,te),ci==Tu){gn==4&&(this.s=4,In(14),y=!1),$r(this.i,this.l,null,"[Incomplete Response]");break}else if(ci==Du){this.s=4,In(15),$r(this.i,this.l,te,"[Invalid Chunk]"),y=!1;break}else $r(this.i,this.l,ci,null),oc(this,ci);if(df(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||te.length!=0||this.h.h||(this.s=1,In(16),y=!1),this.o=this.o&&y,!y)$r(this.i,this.l,te,"[Invalid Chunked Response]"),lr(this),zi(this);else if(0<te.length&&!this.W){this.W=!0;var At=this.j;At.g==this&&At.ba&&!At.M&&(At.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),dc(At),At.M=!0,In(11))}}else $r(this.i,this.l,te,null),oc(this,te);gn==4&&lr(this),this.o&&!this.J&&(gn==4?wf(this.j,this):(this.o=!1,rc(this)))}else vf(this.g),y==400&&0<te.indexOf("Unknown SID")?(this.s=3,In(12)):(this.s=0,In(13)),lr(this),zi(this)}}}catch{}finally{}};function df(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function E_(d,g){var y=d.C,C=g.indexOf(`
`,y);return C==-1?Tu:(y=Number(g.substring(y,C)),isNaN(y)?Du:(C+=1,C+y>g.length?Tu:(g=g.slice(C,C+y),d.C=C+y,g)))}cr.prototype.cancel=function(){this.J=!0,lr(this)};function rc(d){d.S=Date.now()+d.I,hf(d,d.I)}function hf(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=fe(b(d.ba,d),g)}function As(d){d.B&&(c.clearTimeout(d.B),d.B=null)}cr.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(Cu(this.i,this.A),this.L!=2&&(Ss(),In(17)),lr(this),this.s=2,zi(this)):hf(this,this.S-d)};function zi(d){d.j.G==0||d.J||wf(d.j,d)}function lr(d){As(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,To(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function oc(d,g){try{var y=d.j;if(y.G!=0&&(y.g==d||ur(y.h,d))){if(!d.K&&ur(y.h,d)&&y.G==3){try{var C=y.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var R=C;if(R[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)hc(y),cc(y);else break e;Bu(y),In(18)}}else y.za=R[1],0<y.za-y.T&&37500>R[2]&&y.F&&y.v==0&&!y.C&&(y.C=fe(b(y.Za,y),6e3));if(1>=Ps(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Zr(y,11)}else if((d.K||y.g==d)&&hc(y),!X(g))for(R=y.Da.g.parse(g),g=0;g<R.length;g++){let nt=R[g];if(y.T=nt[0],nt=nt[1],y.G==2)if(nt[0]=="c"){y.K=nt[1],y.ia=nt[2];let At=nt[3];At!=null&&(y.la=At,y.j.info("VER="+y.la));let gn=nt[4];gn!=null&&(y.Aa=gn,y.j.info("SVER="+y.Aa));let ai=nt[5];ai!=null&&typeof ai=="number"&&0<ai&&(C=1.5*ai,y.L=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;let ci=d.g;if(ci){let pr=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pr){var z=C.h;z.g||pr.indexOf("spdy")==-1&&pr.indexOf("quic")==-1&&pr.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(dr(z,z.h),z.h=null))}if(C.D){let mc=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;mc&&(C.ya=mc,dt(C.I,C.D,mc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),C=y;var te=d;if(C.qa=Uu(C,C.J?C.ia:null,C.W),te.K){sc(C.h,te);var He=te,Vt=C.L;Vt&&(He.I=Vt),He.B&&(As(He),rc(He)),C.g=te}else uc(C);0<y.i.length&&lc(y)}else nt[0]!="stop"&&nt[0]!="close"||Zr(y,7);else y.G==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?Zr(y,7):Bs(y):nt[0]!="noop"&&y.l&&y.l.ta(nt),y.v=0)}}Ss(4)}catch{}}var Ms=class{constructor(d,g){this.g=d,this.map=g}};function et(d){this.l=d||10,c.PerformanceNavigationTiming?(d=c.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function St(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Ps(d){return d.h?1:d.g?d.g.size:0}function ur(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function dr(d,g){d.g?d.g.add(g):d.h=g}function sc(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}et.prototype.cancel=function(){if(this.i=Ne(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function Ne(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(let y of d.g.values())g=g.concat(y.D);return g}return P(d.i)}function zt(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],y=d.length,C=0;C<y;C++)g.push(d[C]);return g}g=[],y=0;for(C in d)g[y++]=d[C];return g}function Su(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var y=0;y<d;y++)g.push(y);return g}g=[],y=0;for(let C in d)g[y++]=C;return g}}}function ks(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var y=Su(d),C=zt(d),R=C.length,z=0;z<R;z++)g.call(void 0,C[z],y&&y[z],d)}var On=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function x_(d,g){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var C=d[y].indexOf("="),R=null;if(0<=C){var z=d[y].substring(0,C);R=d[y].substring(C+1)}else z=d[y];g(z,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function gi(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof gi){this.h=d.h,Nt(this,d.j),this.o=d.o,this.g=d.g,_i(this,d.s),this.l=d.l;var g=d.i,y=new Gr;y.i=g.i,g.g&&(y.g=new Map(g.g),y.h=g.h),Po(this,y),this.m=d.m}else d&&(g=String(d).match(On))?(this.h=!1,Nt(this,g[1]||"",!0),this.o=Ui(g[2]||""),this.g=Ui(g[3]||"",!0),_i(this,g[4]),this.l=Ui(g[5]||"",!0),Po(this,g[6]||"",!0),this.m=Ui(g[7]||"")):(this.h=!1,this.i=new Gr(null,this.h))}gi.prototype.toString=function(){var d=[],g=this.j;g&&d.push(qr(g,Rs,!0),":");var y=this.g;return(y||g=="file")&&(d.push("//"),(g=this.o)&&d.push(qr(g,Rs,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(qr(y,y.charAt(0)=="/"?Pu:Mu,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",qr(y,ff)),d.join("")};function Cn(d){return new gi(d)}function Nt(d,g,y){d.j=y?Ui(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function _i(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function Po(d,g,y){g instanceof Gr?(d.i=g,ku(d.i,d.h)):(y||(g=qr(g,ac)),d.i=new Gr(g,d.h))}function dt(d,g,y){d.i.set(g,y)}function ko(d){return dt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Ui(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function qr(d,g,y){return typeof d=="string"?(d=encodeURI(d).replace(g,Au),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Au(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Rs=/[#\/\?@]/g,Mu=/[#\?:]/g,Pu=/[#\?]/g,ac=/[#\?@]/g,ff=/#/g;function Gr(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function hr(d){d.g||(d.g=new Map,d.h=0,d.i&&x_(d.i,function(g,y){d.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Gr.prototype,t.add=function(d,g){hr(this),this.i=null,d=Wr(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(g),this.h+=1,this};function Ae(d,g){hr(d),g=Wr(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function ri(d,g){return hr(d),g=Wr(d,g),d.g.has(g)}t.forEach=function(d,g){hr(this),this.g.forEach(function(y,C){y.forEach(function(R){d.call(g,R,C,this)},this)},this)},t.na=function(){hr(this);let d=Array.from(this.g.values()),g=Array.from(this.g.keys()),y=[];for(let C=0;C<g.length;C++){let R=d[C];for(let z=0;z<R.length;z++)y.push(g[C])}return y},t.V=function(d){hr(this);let g=[];if(typeof d=="string")ri(this,d)&&(g=g.concat(this.g.get(Wr(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)g=g.concat(d[y])}return g},t.set=function(d,g){return hr(this),this.i=null,d=Wr(this,d),ri(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function vt(d,g,y){Ae(d,g),0<y.length&&(d.i=null,d.g.set(Wr(d,g),P(y)),d.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],g=Array.from(this.g.keys());for(var y=0;y<g.length;y++){var C=g[y];let z=encodeURIComponent(String(C)),te=this.V(C);for(C=0;C<te.length;C++){var R=z;te[C]!==""&&(R+="="+encodeURIComponent(String(te[C]))),d.push(R)}}return this.i=d.join("&")};function Wr(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function ku(d,g){g&&!d.j&&(hr(d),d.i=null,d.g.forEach(function(y,C){var R=C.toLowerCase();C!=R&&(Ae(this,C),vt(this,R,y))},d)),d.j=g}function Ru(d,g){let y=new Ao;if(c.Image){let C=new Image;C.onload=I(An,y,"TestLoadImage: loaded",!0,g,C),C.onerror=I(An,y,"TestLoadImage: error",!1,g,C),C.onabort=I(An,y,"TestLoadImage: abort",!1,g,C),C.ontimeout=I(An,y,"TestLoadImage: timeout",!1,g,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=d}else g(!1)}function Nu(d,g){let y=new Ao,C=new AbortController,R=setTimeout(()=>{C.abort(),An(y,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:C.signal}).then(z=>{clearTimeout(R),z.ok?An(y,"TestPingServer: ok",!0,g):An(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(R),An(y,"TestPingServer: error",!1,g)})}function An(d,g,y,C,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),C(y)}catch{}}function Ou(){this.g=new ef}function Ns(d,g,y){let C=y||"";try{ks(d,function(R,z){let te=R;f(R)&&(te=yu(R)),g.push(C+z+"="+encodeURIComponent(te))})}catch(R){throw g.push(C+"type="+encodeURIComponent("_badmap")),R}}function Ut(d){this.l=d.Ub||null,this.j=d.eb||!1}M(Ut,nc),Ut.prototype.g=function(){return new vi(this.l,this.j)},Ut.prototype.i=function(d){return function(){return d}}({});function vi(d,g){pn.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(vi,pn),t=vi.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,Os(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||c).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ro(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Os(this)),this.g&&(this.readyState=3,Os(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lu(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lu(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Ro(this):Os(this),this.readyState==3&&Lu(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Ro(this))},t.Qa=function(d){this.g&&(this.response=d,Ro(this))},t.ga=function(){this.g&&Ro(this)};function Ro(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Os(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=g.next();return d.join(`\r
`)};function Os(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(vi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Fu(d){let g="";return he(d,function(y,C){g+=C,g+=":",g+=y,g+=`\r
`}),g}function Ls(d,g,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=Fu(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):dt(d,g,y))}function Ft(d){pn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ft,pn);var pf=/^https?$/i,Xe=["POST","PUT"];t=Ft.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xu.g(),this.v=this.o?bu(this.o):bu(xu),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(z){mf(this,z);return}if(d=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var R in C)y.set(R,C[R]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(let z of C.keys())y.set(z,C.get(z));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(z=>z.toLowerCase()=="content-type"),R=c.FormData&&d instanceof c.FormData,!(0<=Array.prototype.indexOf.call(Xe,g,void 0))||C||R||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[z,te]of y)this.g.setRequestHeader(z,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gf(this),this.u=!0,this.g.send(d),this.u=!1}catch(z){mf(this,z)}};function mf(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,qn(d),Fs(d)}function qn(d){d.A||(d.A=!0,mn(d,"complete"),mn(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,mn(this,"complete"),mn(this,"abort"),Fs(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fs(this,!0)),Ft.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?No(this):this.bb())},t.bb=function(){No(this)};function No(d){if(d.h&&typeof a<"u"&&(!d.v[1]||oi(d)!=4||d.Z()!=2)){if(d.u&&oi(d)==4)Xh(d.Ea,0,d);else if(mn(d,"readystatechange"),oi(d)==4){d.h=!1;try{let te=d.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var C;if(C=te===0){var R=String(d.D).match(On)[1]||null;!R&&c.self&&c.self.location&&(R=c.self.location.protocol.slice(0,-1)),C=!pf.test(R?R.toLowerCase():"")}y=C}if(y)mn(d,"complete"),mn(d,"success");else{d.m=6;try{var z=2<oi(d)?d.g.statusText:""}catch{z=""}d.l=z+" ["+d.Z()+"]",qn(d)}}finally{Fs(d)}}}}function Fs(d,g){if(d.g){gf(d);let y=d.g,C=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||mn(d,"ready");try{y.onreadystatechange=C}catch{}}}function gf(d){d.I&&(c.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function oi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<oi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),C_(g)}};function _f(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function vf(d){let g={};d=(d.g&&2<=oi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<d.length;C++){if(X(d[C]))continue;var y=k(d[C]);let R=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let z=g[R]||[];g[R]=z,z.push(y)}S(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vs(d,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||g}function yf(d){this.Aa=0,this.i=[],this.j=new Ao,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vs("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vs("baseRetryDelayMs",5e3,d),this.cb=Vs("retryDelaySeedMs",1e4,d),this.Wa=Vs("forwardChannelMaxRetries",2,d),this.wa=Vs("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new et(d&&d.concurrentRequestLimit),this.Da=new Ou,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yf.prototype,t.la=8,t.G=1,t.connect=function(d,g,y,C){In(0),this.W=d,this.H=g||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.I=Uu(this,null,this.W),lc(this)};function Bs(d){if(si(d),d.G==3){var g=d.U++,y=Cn(d.I);if(dt(y,"SID",d.K),dt(y,"RID",g),dt(y,"TYPE","terminate"),Oo(d,y),g=new cr(d,d.j,g),g.L=2,g.v=ko(Cn(y)),y=!1,c.navigator&&c.navigator.sendBeacon)try{y=c.navigator.sendBeacon(g.v.toString(),"")}catch{}!y&&c.Image&&(new Image().src=g.v,y=!0),y||(g.g=js(g.j,null),g.g.ea(g.v)),g.F=Date.now(),rc(g)}zu(d)}function cc(d){d.g&&(dc(d),d.g.cancel(),d.g=null)}function si(d){cc(d),d.u&&(c.clearTimeout(d.u),d.u=null),hc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&c.clearTimeout(d.s),d.s=null)}function lc(d){if(!St(d.h)&&!d.s){d.s=!0;var g=d.Ga;Co||wn(),Ce||(Co(),Ce=!0),Ct.add(g,d),d.B=0}}function bf(d,g){return Ps(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=fe(b(d.Ga,d,g),fc(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let R=new cr(this,this.j,d),z=this.o;if(this.S&&(z?(z=E(z),A(z,this.S)):z=this.S),this.m!==null||this.O||(R.H=z,z=null),this.P)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=Vu(this,R,g),y=Cn(this.I),dt(y,"RID",d),dt(y,"CVER",22),this.D&&dt(y,"X-HTTP-Session-Id",this.D),Oo(this,y),z&&(this.O?g="headers="+encodeURIComponent(String(Fu(z)))+"&"+g:this.m&&Ls(y,this.m,z)),dr(this.h,R),this.Ua&&dt(y,"TYPE","init"),this.P?(dt(y,"$req",g),dt(y,"SID","null"),R.T=!0,Mo(R,y,null)):Mo(R,y,g),this.G=2}}else this.G==3&&(d?Hi(this,d):this.i.length==0||St(this.h)||Hi(this))};function Hi(d,g){var y;g?y=g.l:y=d.U++;let C=Cn(d.I);dt(C,"SID",d.K),dt(C,"RID",y),dt(C,"AID",d.T),Oo(d,C),d.m&&d.o&&Ls(C,d.m,d.o),y=new cr(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),g&&(d.i=g.D.concat(d.i)),g=Vu(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),dr(d.h,y),Mo(y,C,g)}function Oo(d,g){d.H&&he(d.H,function(y,C){dt(g,C,y)}),d.l&&ks({},function(y,C){dt(g,C,y)})}function Vu(d,g,y){y=Math.min(d.i.length,y);var C=d.l?b(d.l.Na,d.l,d):null;e:{var R=d.i;let z=-1;for(;;){let te=["count="+y];z==-1?0<y?(z=R[0].g,te.push("ofs="+z)):z=0:te.push("ofs="+z);let He=!0;for(let Vt=0;Vt<y;Vt++){let nt=R[Vt].g,At=R[Vt].map;if(nt-=z,0>nt)z=Math.max(0,R[Vt].g-100),He=!1;else try{Ns(At,te,"req"+nt+"_")}catch{C&&C(At)}}if(He){C=te.join("&");break e}}}return d=d.i.splice(0,y),g.D=d,C}function uc(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Co||wn(),Ce||(Co(),Ce=!0),Ct.add(g,d),d.v=0}}function Bu(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=fe(b(d.Fa,d),fc(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,ju(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=fe(b(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,In(10),cc(this),ju(this))};function dc(d){d.A!=null&&(c.clearTimeout(d.A),d.A=null)}function ju(d){d.g=new cr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Cn(d.qa);dt(g,"RID","rpc"),dt(g,"SID",d.K),dt(g,"AID",d.T),dt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&dt(g,"TO",d.ja),dt(g,"TYPE","xmlhttp"),Oo(d,g),d.m&&d.o&&Ls(g,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=ko(Cn(g)),y.m=null,y.P=!0,uf(y,d)}t.Za=function(){this.C!=null&&(this.C=null,cc(this),Bu(this),In(19))};function hc(d){d.C!=null&&(c.clearTimeout(d.C),d.C=null)}function wf(d,g){var y=null;if(d.g==g){hc(d),dc(d),d.g=null;var C=2}else if(ur(d.h,g))y=g.D,sc(d.h,g),C=1;else return;if(d.G!=0){if(g.o)if(C==1){y=g.m?g.m.length:0,g=Date.now()-g.F;var R=d.B;C=So(),mn(C,new ii(C,y)),lc(d)}else uc(d);else if(R=g.s,R==3||R==0&&0<g.X||!(C==1&&bf(d,g)||C==2&&Bu(d)))switch(y&&0<y.length&&(g=d.h,g.i=g.i.concat(y)),R){case 1:Zr(d,5);break;case 4:Zr(d,10);break;case 3:Zr(d,6);break;default:Zr(d,2)}}}function fc(d,g){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*g}function Zr(d,g){if(d.j.info("Error code "+g),g==2){var y=b(d.fb,d),C=d.Xa;let R=!C;C=new gi(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Nt(C,"https"),ko(C),R?Ru(C.toString(),y):Nu(C.toString(),y)}else In(2);d.G=0,d.l&&d.l.sa(g),zu(d),si(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),In(2)):(this.j.info("Failed to ping google.com"),In(1))};function zu(d){if(d.G=0,d.ka=[],d.l){let g=Ne(d.h);(g.length!=0||d.i.length!=0)&&(F(d.ka,g),F(d.ka,d.i),d.h.i.length=0,P(d.i),d.i.length=0),d.l.ra()}}function Uu(d,g,y){var C=y instanceof gi?Cn(y):new gi(y);if(C.g!="")g&&(C.g=g+"."+C.g),_i(C,C.s);else{var R=c.location;C=R.protocol,g=g?g+"."+R.hostname:R.hostname,R=+R.port;var z=new gi(null);C&&Nt(z,C),g&&(z.g=g),R&&_i(z,R),y&&(z.l=y),C=z}return y=d.D,g=d.ya,y&&g&&dt(C,y,g),dt(C,"VER",d.la),Oo(d,C),C}function js(d,g,y){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Ft(new Ut({eb:y})):new Ft(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fr(){}t=fr.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function pc(){}pc.prototype.g=function(d,g){return new un(d,g)};function un(d,g){pn.call(this),this.g=new yf(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!X(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!X(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Kr(this)}M(un,pn),un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Bs(this.g)},un.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=yu(d),d=y);g.i.push(new Ms(g.Ya++,d)),g.G==3&&lc(g)},un.prototype.N=function(){this.g.l=null,delete this.j,Bs(this.g),delete this.g,un.aa.N.call(this)};function Ln(d){wu.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(let y in g){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}M(Ln,wu);function Hu(){Iu.call(this),this.status=1}M(Hu,Iu);function Kr(d){this.g=d}M(Kr,fr),Kr.prototype.ua=function(){mn(this.g,"a")},Kr.prototype.ta=function(d){mn(this.g,new Ln(d))},Kr.prototype.sa=function(d){mn(this.g,new Hu)},Kr.prototype.ra=function(){mn(this.g,"b")},pc.prototype.createWebChannel=pc.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,ew=fo.createWebChannelTransport=function(){return new pc},J0=fo.getStatEventTarget=function(){return So()},X0=fo.Event=Hr,eg=fo.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ji.NO_ERROR=0,ji.TIMEOUT=8,ji.HTTP_ERROR=6,sh=fo.ErrorCode=ji,Eu.COMPLETE="complete",Y0=fo.EventType=Eu,tf.EventType=Ts,Ts.OPEN="a",Ts.CLOSE="b",Ts.ERROR="c",Ts.MESSAGE="d",pn.prototype.listen=pn.prototype.K,Dl=fo.WebChannel=tf,Q0=fo.FetchXmlHttpFactory=Ut,Ft.prototype.listenOnce=Ft.prototype.L,Ft.prototype.getLastError=Ft.prototype.Ka,Ft.prototype.getLastErrorCode=Ft.prototype.Ba,Ft.prototype.getStatus=Ft.prototype.Z,Ft.prototype.getResponseJson=Ft.prototype.Oa,Ft.prototype.getResponseText=Ft.prototype.oa,Ft.prototype.send=Ft.prototype.ea,Ft.prototype.setWithCredentials=Ft.prototype.Ha,K0=fo.XhrIo=Ft}).apply(typeof Jm<"u"?Jm:typeof self<"u"?self:typeof window<"u"?window:{});var SM="@firebase/firestore";var an=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");var iu="10.12.1";var us=new Of("@firebase/firestore");function Pl(){return us.logLevel}function SP(t){us.setLogLevel(t)}function Y(t,...e){if(us.logLevel<=gr.DEBUG){let n=e.map(iC);us.debug(`Firestore (${iu}): ${t}`,...n)}}function Jt(t,...e){if(us.logLevel<=gr.ERROR){let n=e.map(iC);us.error(`Firestore (${iu}): ${t}`,...n)}}function Li(t,...e){if(us.logLevel<=gr.WARN){let n=e.map(iC);us.warn(`Firestore (${iu}): ${t}`,...n)}}function iC(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ue(t="Unexpected state"){let e=`FIRESTORE (${iu}) INTERNAL ASSERTION FAILED: `+t;throw Jt(e),new Error(e)}function me(t,e){t||ue()}function AP(t,e){t||ue()}function oe(t,e){return t}var H={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends CE{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var cn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var dg=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},ow=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(an.UNAUTHENTICATED))}shutdown(){}},sw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},aw=class{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=u=>this.i!==i?(i=this.i,n(u)):Promise.resolve(),o=new cn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new cn,e.enqueueRetryable(()=>r(this.currentUser))};let a=()=>{let u=o;e.enqueueRetryable(()=>U(this,null,function*(){yield u.promise,yield r(this.currentUser)}))},c=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new cn)}},0),a()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string"),new dg(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new an(e)}},cw=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=an.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lw=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new cw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(an.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=o=>{o.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};let r=o=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?r(o):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new uw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function x5(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var hg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=x5(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%e.length))}return i}};function Ve(t,e){return t<e?-1:t>e?1:0}function jl(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}function MP(t){return t+"\0"}var qt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(H.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(H.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new t(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ve=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new qt(0,0))}static max(){return new t(new qt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fg=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&ue(),i===void 0?i=e.length-n:i>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let o=e.get(r),a=n.get(r);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ot=class t extends fg{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new K(H.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}},D5=/^[_a-zA-Z][_a-zA-Z0-9]*$/,en=class t extends fg{construct(e,n,i){return new t(e,n,i)}static isValidIdentifier(e){return D5.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],i="",r=0,o=()=>{if(i.length===0)throw new K(H.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""},a=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new K(H.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[r+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(H.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,r+=2}else c==="`"?(a=!a,r++):c!=="."||a?(i+=c,r++):(o(),r++)}if(o(),a)throw new K(H.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var re=class t{constructor(e){this.path=e}static fromPath(e){return new t(ot.fromString(e))}static fromName(e){return new t(ot.fromString(e).popFirst(5))}static empty(){return new t(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ot(e.slice()))}};var zl=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};function hw(t){return t.fields.find(e=>e.kind===2)}function Ea(t){return t.fields.filter(e=>e.kind!==2)}zl.UNKNOWN_ID=-1;var Fl=class{constructor(e,n){this.fieldPath=e,this.kind=n}};var vh=class t{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new t(0,Fi.min())}};function PP(t,e){let n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=ve.fromTimestamp(i===1e9?new qt(n+1,0):new qt(n,i));return new Fi(r,re.empty(),e)}function kP(t){return new Fi(t.readTime,t.key,-1)}var Fi=class t{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new t(ve.min(),re.empty(),-1)}static max(){return new t(ve.max(),re.empty(),-1)}};function rC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}var RP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function bs(t){return U(this,null,function*(){if(t.code!==H.FAILED_PRECONDITION||t.message!==RP)throw t;Y("LocalStore","Unexpectedly lost primary lease")})}var B=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,i)=>{n(e)})}static reject(e){return new t((n,i)=>{i(e)})}static waitFor(e){return new t((n,i)=>{let r=0,o=0,a=!1;e.forEach(c=>{++r,c.next(()=>{++o,a&&o===r&&n()},u=>i(u))}),a=!0,o===r&&n()})}static or(e){let n=t.resolve(!1);for(let i of e)n=n.next(r=>r?t.resolve(r):i());return n}static forEach(e,n){let i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new t((i,r)=>{let o=e.length,a=new Array(o),c=0;for(let u=0;u<o;u++){let f=u;n(e[f]).next(p=>{a[f]=p,++c,c===o&&i(a)},p=>r(p))}})}static doWhile(e,n){return new t((i,r)=>{let o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}};var mg=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new cn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Ma(e,n.error)):this.V.resolve()},this.transaction.onerror=i=>{let r=oC(i.target.error);this.V.reject(new Ma(e,r))}}static open(e,n,i,r){try{return new t(n,e.transaction(r,i))}catch(o){throw new Ma(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Y("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new pw(n)}},ds=class t{constructor(e,n,i){this.name=e,this.version=n,this.p=i,t.S(Wu())===12.2&&Jt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Y("SimpleDb","Removing database:",e),xa(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Nf())return!1;if(t.C())return!0;let e=Wu(),n=t.S(e),i=0<n&&n<10,r=NP(e),o=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static F(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(i)}M(e){return U(this,null,function*(){return this.db||(Y("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,i)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=o=>{let a=o.target.result;n(a)},r.onblocked=()=>{i(new Ma(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=o=>{let a=o.target.error;a.name==="VersionError"?i(new K(H.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?i(new K(H.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):i(new Ma(e,a))},r.onupgradeneeded=o=>{Y("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let a=o.target.result;this.p.O(a,r.transaction,o.oldVersion,this.version).next(()=>{Y("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,i,r){return U(this,null,function*(){let o=n==="readonly",a=0;for(;;){++a;try{this.db=yield this.M(e);let c=mg.open(this.db,e,o?"readonly":"readwrite",i),u=r(c).next(f=>(c.g(),f)).catch(f=>(c.abort(f),B.reject(f))).toPromise();return u.catch(()=>{}),yield c.m,u}catch(c){let u=c,f=u.name!=="FirebaseError"&&a<3;if(Y("SimpleDb","Transaction failed with error:",u.message,"Retrying:",f),this.close(),!f)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function NP(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}var fw=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return xa(this.B.delete())}},Ma=class extends K{constructor(e,n){super(H.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ws(t){return t.name==="IndexedDbTransactionError"}var pw=class{constructor(e){this.store=e}put(e,n){let i;return n!==void 0?(Y("SimpleDb","PUT",this.store.name,e,n),i=this.store.put(n,e)):(Y("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),xa(i)}add(e){return Y("SimpleDb","ADD",this.store.name,e,e),xa(this.store.add(e))}get(e){return xa(this.store.get(e)).next(n=>(n===void 0&&(n=null),Y("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Y("SimpleDb","DELETE",this.store.name,e),xa(this.store.delete(e))}count(){return Y("SimpleDb","COUNT",this.store.name),xa(this.store.count())}U(e,n){let i=this.options(e,n),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){let o=r.getAll(i.range);return new B((a,c)=>{o.onerror=u=>{c(u.target.error)},o.onsuccess=u=>{a(u.target.result)}})}{let o=this.cursor(i),a=[];return this.W(o,(c,u)=>{a.push(u)}).next(()=>a)}}G(e,n){let i=this.store.getAll(e,n===null?void 0:n);return new B((r,o)=>{i.onerror=a=>{o(a.target.error)},i.onsuccess=a=>{r(a.target.result)}})}j(e,n){Y("SimpleDb","DELETE ALL",this.store.name);let i=this.options(e,n);i.H=!1;let r=this.cursor(i);return this.W(r,(o,a,c)=>c.delete())}J(e,n){let i;n?i=e:(i={},n=e);let r=this.cursor(i);return this.W(r,n)}Y(e){let n=this.cursor({});return new B((i,r)=>{n.onerror=o=>{let a=oC(o.target.error);r(a)},n.onsuccess=o=>{let a=o.target.result;a?e(a.primaryKey,a.value).next(c=>{c?a.continue():i()}):i()}})}W(e,n){let i=[];return new B((r,o)=>{e.onerror=a=>{o(a.target.error)},e.onsuccess=a=>{let c=a.target.result;if(!c)return void r();let u=new fw(c),f=n(c.primaryKey,c.value,u);if(f instanceof B){let p=f.catch(_=>(u.done(),B.reject(_)));i.push(p)}u.isDone?r():u.K===null?c.continue():c.continue(u.K)}}).next(()=>B.waitFor(i))}options(e,n){let i;return e!==void 0&&(typeof e=="string"?i=e:n=e),{index:i,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let i=this.store.index(e.index);return e.H?i.openKeyCursor(e.range,n):i.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function xa(t){return new B((e,n)=>{t.onsuccess=i=>{let r=i.target.result;e(r)},t.onerror=i=>{let r=oC(i.target.error);n(r)}})}var AM=!1;function oC(t){let e=ds.S(Wu());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let i=new K("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return AM||(AM=!0,setTimeout(()=>{throw i},0)),i}}return t}var mw=class{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Y("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>U(this,null,function*(){this.task=null;try{Y("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(n){ws(n)?Y("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):yield bs(n)}yield this.X(6e4)}))}},gw=class{constructor(e,n){this.localStore=e,this.persistence=n}ee(e=50){return U(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))})}te(e,n){let i=new Set,r=n,o=!0;return B.doWhile(()=>o===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!i.has(a))return Y("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,r).next(c=>{r-=c,i.add(a)});o=!1})).next(()=>n-r)}ne(e,n,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,i).next(o=>{let a=o.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(r,o)).next(c=>(Y("IndexBackfiller",`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,n,c))).next(()=>a.size)}))}re(e,n){let i=e;return n.changes.forEach((r,o)=>{let a=kP(o);rC(a,i)>0&&(i=a)}),new Fi(i.readTime,i.documentKey,Math.max(n.batchId,e.largestBatchId))}};var fi=(()=>{class t{constructor(n,i){this.previousValue=n,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function jh(t){return t==null}function yh(t){return t===0&&1/t==-1/0}function OP(t){return typeof t=="number"&&Number.isInteger(t)&&!yh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Un(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=MM(e)),e=T5(t.get(n),e);return MM(e)}function T5(t,e){let n=e,i=t.length;for(let r=0;r<i;r++){let o=t.charAt(r);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function MM(t){return t+""}function kr(t){let e=t.length;if(me(e>=2),e===2)return me(t.charAt(0)===""&&t.charAt(1)===""),ot.emptyPath();let n=e-2,i=[],r="";for(let o=0;o<e;){let a=t.indexOf("",o);switch((a<0||a>n)&&ue(),t.charAt(a+1)){case"":let c=t.substring(o,a),u;r.length===0?u=c:(r+=c,u=r,r=""),i.push(u);break;case"":r+=t.substring(o,a),r+="\0";break;case"":r+=t.substring(o,a+1);break;default:ue()}o=a+2}return new ot(i)}var PM=["userId","batchId"];function og(t,e){return[t,Un(e)]}function LP(t,e,n){return[t,Un(e),n]}var S5={},A5=["prefixPath","collectionGroup","readTime","documentId"],M5=["prefixPath","collectionGroup","documentId"],P5=["collectionGroup","readTime","prefixPath","documentId"],k5=["canonicalId","targetId"],R5=["targetId","path"],N5=["path","targetId"],O5=["collectionId","parent"],L5=["indexId","uid"],F5=["uid","sequenceNumber"],V5=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],B5=["indexId","uid","orderedDocumentKey"],j5=["userId","collectionPath","documentId"],z5=["userId","collectionPath","largestBatchId"],U5=["userId","collectionGroup","largestBatchId"],FP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],H5=[...FP,"documentOverlays"],VP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BP=VP,jP=[...BP,"indexConfiguration","indexState","indexEntries"],$5=jP;var bh=class extends pg{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}};function bn(t,e){let n=oe(t);return ds.F(n._e,e)}function kM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ua(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zP(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Lt=class t{constructor(e,n){this.comparator=e,this.root=n||Nr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ll(this.root,e,this.comparator,!0)}},Ll=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Nr=class t{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new t(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();let e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}};Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1;Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,i,r,o){return this}insert(e,n,i){return new Nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Tt=class t{constructor(e){this.comparator=e,this.data=new Lt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gg(this.data.getIterator())}getIteratorFrom(e){return new gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Tl(t){return t.hasNext()?t.getNext():void 0}var pi=class t{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new t([])}unionWith(e){let n=new Tt(en.comparator);for(let i of this.fields)n=n.add(i);for(let i of e)n=n.add(i);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,(n,i)=>n.isEqual(i))}};var _g=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function UP(){return typeof atob<"u"}var yn=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new _g("Invalid base64 string: "+o):o}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yn.EMPTY_BYTE_STRING=new yn("");var q5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function go(t){if(me(!!t),typeof t=="string"){let e=0,n=q5.exec(t);if(me(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Wt(t.seconds),nanos:Wt(t.nanos)}}function Wt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}function a_(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sC(t){let e=t.mapValue.fields.__previous_value__;return a_(e)?sC(e):e}function wh(t){let e=go(t.mapValue.fields.__local_write_time__.timestampValue);return new qt(e.seconds,e.nanos)}var _w=class{constructor(e,n,i,r,o,a,c,u,f){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=f}},fs=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sg={nullValue:"NULL_VALUE"};function Pa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?a_(t)?4:HP(t)?9007199254740991:10:ue()}function Fr(t,e){if(t===e)return!0;let n=Pa(t);if(n!==Pa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wh(t).isEqual(wh(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;let a=go(r.timestampValue),c=go(o.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return hs(r.bytesValue).isEqual(hs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return Wt(r.geoPointValue.latitude)===Wt(o.geoPointValue.latitude)&&Wt(r.geoPointValue.longitude)===Wt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Wt(r.integerValue)===Wt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){let a=Wt(r.doubleValue),c=Wt(o.doubleValue);return a===c?yh(a)===yh(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return jl(t.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:return function(r,o){let a=r.mapValue.fields||{},c=o.mapValue.fields||{};if(kM(a)!==kM(c))return!1;for(let u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!Fr(a[u],c[u])))return!1;return!0}(t,e);default:return ue()}}function Ih(t,e){return(t.values||[]).find(n=>Fr(n,e))!==void 0}function ps(t,e){if(t===e)return 0;let n=Pa(t),i=Pa(e);if(n!==i)return Ve(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(o,a){let c=Wt(o.integerValue||o.doubleValue),u=Wt(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return RM(t.timestampValue,e.timestampValue);case 4:return RM(wh(t),wh(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(o,a){let c=hs(o),u=hs(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){let c=o.split("/"),u=a.split("/");for(let f=0;f<c.length&&f<u.length;f++){let p=Ve(c[f],u[f]);if(p!==0)return p}return Ve(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){let c=Ve(Wt(o.latitude),Wt(a.latitude));return c!==0?c:Ve(Wt(o.longitude),Wt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,a){let c=o.values||[],u=a.values||[];for(let f=0;f<c.length&&f<u.length;++f){let p=ps(c[f],u[f]);if(p)return p}return Ve(c.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,a){if(o===cs.mapValue&&a===cs.mapValue)return 0;if(o===cs.mapValue)return 1;if(a===cs.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),f=a.fields||{},p=Object.keys(f);u.sort(),p.sort();for(let _=0;_<u.length&&_<p.length;++_){let b=Ve(u[_],p[_]);if(b!==0)return b;let I=ps(c[u[_]],f[p[_]]);if(I!==0)return I}return Ve(u.length,p.length)}(t.mapValue,e.mapValue);default:throw ue()}}function RM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);let n=go(t),i=go(e),r=Ve(n.seconds,i.seconds);return r!==0?r:Ve(n.nanos,i.nanos)}function Ul(t){return vw(t)}function vw(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let i=go(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(let o of n.values||[])r?r=!1:i+=",",i+=vw(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){let i=Object.keys(n.fields||{}).sort(),r="{",o=!0;for(let a of i)o?o=!1:r+=",",r+=`${a}:${vw(n.fields[a])}`;return r+"}"}(t.mapValue):ue()}function ka(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yw(t){return!!t&&"integerValue"in t}function Ch(t){return!!t&&"arrayValue"in t}function NM(t){return!!t&&"nullValue"in t}function OM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ag(t){return!!t&&"mapValue"in t}function fh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ua(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=fh(i)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function HP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function G5(t){return"nullValue"in t?sg:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?ka(fs.empty(),re.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ue()}function W5(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?ka(fs.empty(),re.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?cs:ue()}function LM(t,e){let n=ps(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function FM(t,e){let n=ps(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}var Rn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!ag(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fh(n)}setAll(e){let n=en.emptyPath(),i={},r=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,i,r),i={},r=[],n=c.popLast()}a?i[c.lastSegment()]=fh(a):r.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){let n=this.field(e.popLast());ag(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];ag(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){Ua(n,(r,o)=>e[r]=o);for(let r of i)delete e[r]}clone(){return new t(fh(this.value))}};function $P(t){let e=[];return Ua(t.fields,(n,i)=>{let r=new en([n]);if(ag(i)){let o=$P(i.mapValue).fields;if(o.length===0)e.push(r);else for(let a of o)e.push(r.child(a))}else e.push(r)}),new pi(e)}var ln=class t{constructor(e,n,i,r,o,a,c){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=c}static newInvalidDocument(e){return new t(e,0,ve.min(),ve.min(),ve.min(),Rn.empty(),0)}static newFoundDocument(e,n,i,r){return new t(e,1,n,ve.min(),i,r,0)}static newNoDocument(e,n){return new t(e,2,n,ve.min(),ve.min(),Rn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ve.min(),ve.min(),Rn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Vr=class{constructor(e,n){this.position=e,this.inclusive=n}};function VM(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){let o=e[r],a=t.position[r];if(o.field.isKeyField()?i=re.comparator(re.fromName(a.referenceValue),n.key):i=ps(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function BM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Fr(t.position[n],e.position[n]))return!1;return!0}var Ra=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Z5(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vg=class{},Je=class t extends vg{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Iw(e,n,i):n==="array-contains"?new xw(e,i):n==="in"?new yg(e,i):n==="not-in"?new Dw(e,i):n==="array-contains-any"?new Tw(e,i):new t(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new Cw(e,i):new Ew(e,i)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ps(n,this.value)):n!==null&&Pa(this.value)===Pa(n)&&this.matchesComparison(ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},wt=class t extends vg{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return Hl(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Hl(t){return t.op==="and"}function bw(t){return t.op==="or"}function aC(t){return qP(t)&&Hl(t)}function qP(t){for(let e of t.filters)if(e instanceof wt)return!1;return!0}function ww(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Ul(t.value);if(aC(t))return t.filters.map(e=>ww(e)).join(",");{let e=t.filters.map(n=>ww(n)).join(",");return`${t.op}(${e})`}}function GP(t,e){return t instanceof Je?function(i,r){return r instanceof Je&&i.op===r.op&&i.field.isEqual(r.field)&&Fr(i.value,r.value)}(t,e):t instanceof wt?function(i,r){return r instanceof wt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,c)=>o&&GP(a,r.filters[c]),!0):!1}(t,e):void ue()}function WP(t,e){let n=t.filters.concat(e);return wt.create(n,t.op)}function ZP(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Ul(n.value)}`}(t):t instanceof wt?function(n){return n.op.toString()+" {"+n.getFilters().map(ZP).join(" ,")+"}"}(t):"Filter"}var Iw=class extends Je{constructor(e,n,i){super(e,n,i),this.key=re.fromName(i.referenceValue)}matches(e){let n=re.comparator(e.key,this.key);return this.matchesComparison(n)}},Cw=class extends Je{constructor(e,n){super(e,"in",n),this.keys=KP("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Ew=class extends Je{constructor(e,n){super(e,"not-in",n),this.keys=KP("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function KP(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>re.fromName(i.referenceValue))}var xw=class extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Ch(n)&&Ih(n.arrayValue,this.value)}},yg=class extends Je{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ih(this.value.arrayValue,n)}},Dw=class extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ih(this.value.arrayValue,n)}},Tw=class extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Ch(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ih(this.value.arrayValue,i))}};var Sw=class{constructor(e,n=null,i=[],r=[],o=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=c,this.ue=null}};function Aw(t,e=null,n=[],i=[],r=null,o=null,a=null){return new Sw(t,e,n,i,r,o,a)}function Na(t){let e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ww(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ul(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ul(i)).join(",")),e.ue=n}return e.ue}function zh(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Z5(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GP(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!BM(t.startAt,e.startAt)&&BM(t.endAt,e.endAt)}function bg(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function wg(t,e){return t.filters.filter(n=>n instanceof Je&&n.field.isEqual(e))}function jM(t,e,n){let i=sg,r=!0;for(let o of wg(t,e)){let a=sg,c=!0;switch(o.op){case"<":case"<=":a=G5(o.value);break;case"==":case"in":case">=":a=o.value;break;case">":a=o.value,c=!1;break;case"!=":case"not-in":a=sg}LM({value:i,inclusive:r},{value:a,inclusive:c})<0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];LM({value:i,inclusive:r},{value:a,inclusive:n.inclusive})<0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}function zM(t,e,n){let i=cs,r=!0;for(let o of wg(t,e)){let a=cs,c=!0;switch(o.op){case">=":case">":a=W5(o.value),c=!1;break;case"==":case"in":case"<=":a=o.value;break;case"<":a=o.value,c=!1;break;case"!=":case"not-in":a=cs}FM({value:i,inclusive:r},{value:a,inclusive:c})>0&&(i=a,r=c)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){let a=n.position[o];FM({value:i,inclusive:r},{value:a,inclusive:n.inclusive})>0&&(i=a,r=n.inclusive);break}}return{value:i,inclusive:r}}var nr=class{constructor(e,n=null,i=[],r=[],o=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QP(t,e,n,i,r,o,a,c){return new nr(t,e,n,i,r,o,a,c)}function ru(t){return new nr(t)}function UM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cC(t){return t.collectionGroup!==null}function Vl(t){let e=oe(t);if(e.ce===null){e.ce=[];let n=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new Tt(en.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(f=>{f.isInequality()&&(c=c.add(f.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Ra(o,i))}),n.has(en.keyField().canonicalString())||e.ce.push(new Ra(en.keyField(),i))}return e.ce}function Hn(t){let e=oe(t);return e.le||(e.le=K5(e,Vl(t))),e.le}function K5(t,e){if(t.limitType==="F")return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{let o=r.dir==="desc"?"asc":"desc";return new Ra(r.field,o)});let n=t.endAt?new Vr(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Vr(t.startAt.position,t.startAt.inclusive):null;return Aw(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Mw(t,e){let n=t.filters.concat([e]);return new nr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ig(t,e,n){return new nr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uh(t,e){return zh(Hn(t),Hn(e))&&t.limitType===e.limitType}function YP(t){return`${Na(Hn(t))}|lt:${t.limitType}`}function kl(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>ZP(r)).join(", ")}]`),jh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ul(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ul(r)).join(",")),`Target(${i})`}(Hn(t))}; limitType=${t.limitType})`}function Hh(t,e){return e.isFoundDocument()&&function(i,r){let o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):re.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(let o of Vl(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(let o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,c,u){let f=VM(a,c,u);return a.inclusive?f<=0:f<0}(i.startAt,Vl(i),r)||i.endAt&&!function(a,c,u){let f=VM(a,c,u);return a.inclusive?f>=0:f>0}(i.endAt,Vl(i),r))}(t,e)}function XP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function JP(t){return(e,n)=>{let i=!1;for(let r of Vl(t)){let o=Q5(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function Q5(t,e,n){let i=t.field.isKeyField()?re.comparator(e.key,n.key):function(o,a,c){let u=a.data.field(o),f=c.data.field(o);return u!==null&&f!==null?ps(u,f):ue()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ue()}}var Br=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(let[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ua(this.inner,(n,i)=>{for(let[r,o]of i)e(r,o)})}isEmpty(){return zP(this.inner)}size(){return this.innerSize}};var Y5=new Lt(re.comparator);function ni(){return Y5}var e1=new Lt(re.comparator);function dh(...t){let e=e1;for(let n of t)e=e.insert(n.key,n);return e}function t1(t){let e=e1;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Rr(){return ph()}function n1(){return ph()}function ph(){return new Br(t=>t.toString(),(t,e)=>t.isEqual(e))}var X5=new Lt(re.comparator),J5=new Tt(re.comparator);function je(...t){let e=J5;for(let n of t)e=e.add(n);return e}var e4=new Tt(Ve);function lC(){return e4}function i1(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yh(e)?"-0":e}}function r1(t){return{integerValue:""+t}}function o1(t,e){return OP(e)?r1(e):i1(t,e)}var $l=class{constructor(){this._=void 0}};function t4(t,e,n){return t instanceof ms?function(r,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&a_(o)&&(o=sC(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof _o?a1(t,e):t instanceof vo?c1(t,e):function(r,o){let a=s1(r,o),c=HM(a)+HM(r.Pe);return yw(a)&&yw(r.Pe)?r1(c):i1(r.serializer,c)}(t,e)}function n4(t,e,n){return t instanceof _o?a1(t,e):t instanceof vo?c1(t,e):n}function s1(t,e){return t instanceof gs?function(i){return yw(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}var ms=class extends $l{},_o=class extends $l{constructor(e){super(),this.elements=e}};function a1(t,e){let n=l1(e);for(let i of t.elements)n.some(r=>Fr(r,i))||n.push(i);return{arrayValue:{values:n}}}var vo=class extends $l{constructor(e){super(),this.elements=e}};function c1(t,e){let n=l1(e);for(let i of t.elements)n=n.filter(r=>!Fr(r,i));return{arrayValue:{values:n}}}var gs=class extends $l{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function HM(t){return Wt(t.integerValue||t.doubleValue)}function l1(t){return Ch(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Oa=class{constructor(e,n){this.field=e,this.transform=n}};function i4(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof _o&&r instanceof _o||i instanceof vo&&r instanceof vo?jl(i.elements,r.elements,Fr):i instanceof gs&&r instanceof gs?Fr(i.Pe,r.Pe):i instanceof ms&&r instanceof ms}(t.transform,e.transform)}var Pw=class{constructor(e,n){this.version=e,this.transformResults=n}},Zt=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ql=class{};function u1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vs(t.key,Zt.none()):new _s(t.key,t.data,Zt.none());{let n=t.data,i=Rn.empty(),r=new Tt(en.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new ir(t.key,i,new pi(r.toArray()),Zt.none())}}function r4(t,e,n){t instanceof _s?function(r,o,a){let c=r.value.clone(),u=qM(r.fieldTransforms,o,a.transformResults);c.setAll(u),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof ir?function(r,o,a){if(!cg(r.precondition,o))return void o.convertToUnknownDocument(a.version);let c=qM(r.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(d1(r)),u.setAll(c),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function mh(t,e,n,i){return t instanceof _s?function(o,a,c,u){if(!cg(o.precondition,a))return c;let f=o.value.clone(),p=GM(o.fieldTransforms,u,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof ir?function(o,a,c,u){if(!cg(o.precondition,a))return c;let f=GM(o.fieldTransforms,u,a),p=a.data;return p.setAll(d1(o)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(o,a,c){return cg(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function o4(t,e){let n=null;for(let i of t.fieldTransforms){let r=e.data.field(i.field),o=s1(i.transform,r||null);o!=null&&(n===null&&(n=Rn.empty()),n.set(i.field,o))}return n||null}function $M(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&jl(i,r,(o,a)=>i4(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var _s=class extends ql{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ir=class extends ql{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function d1(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let i=t.data.field(n);e.set(n,i)}}),e}function qM(t,e,n){let i=new Map;me(t.length===n.length);for(let r=0;r<n.length;r++){let o=t[r],a=o.transform,c=e.data.field(o.field);i.set(o.field,n4(a,c,n[r]))}return i}function GM(t,e,n){let i=new Map;for(let r of t){let o=r.transform,a=n.data.field(r.field);i.set(r.field,t4(o,a,e))}return i}var vs=class extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Eh=class extends ql{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var xh=class{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){let i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){let o=this.mutations[r];o.key.isEqual(e.key)&&r4(o,e,i[r])}}applyToLocalView(e,n){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(n=mh(i,e,n,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(n=mh(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let i=n1();return this.mutations.forEach(r=>{let o=e.get(r.key),a=o.overlayedDocument,c=this.applyToLocalView(a,o.mutatedFields);c=n.has(r.key)?null:c;let u=u1(a,c);u!==null&&i.set(r.key,u),a.isValidDocument()||a.convertToNoDocument(ve.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,(n,i)=>$M(n,i))&&jl(this.baseMutations,e.baseMutations,(n,i)=>$M(n,i))}},kw=class t{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){me(e.mutations.length===i.length);let r=function(){return X5}(),o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new t(e,n,i,r)}};var Dh=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Rw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var on,rt;function h1(t){switch(t){default:return ue();case H.CANCELLED:case H.UNKNOWN:case H.DEADLINE_EXCEEDED:case H.RESOURCE_EXHAUSTED:case H.INTERNAL:case H.UNAVAILABLE:case H.UNAUTHENTICATED:return!1;case H.INVALID_ARGUMENT:case H.NOT_FOUND:case H.ALREADY_EXISTS:case H.PERMISSION_DENIED:case H.FAILED_PRECONDITION:case H.ABORTED:case H.OUT_OF_RANGE:case H.UNIMPLEMENTED:case H.DATA_LOSS:return!0}}function f1(t){if(t===void 0)return Jt("GRPC error has no .code"),H.UNKNOWN;switch(t){case on.OK:return H.OK;case on.CANCELLED:return H.CANCELLED;case on.UNKNOWN:return H.UNKNOWN;case on.DEADLINE_EXCEEDED:return H.DEADLINE_EXCEEDED;case on.RESOURCE_EXHAUSTED:return H.RESOURCE_EXHAUSTED;case on.INTERNAL:return H.INTERNAL;case on.UNAVAILABLE:return H.UNAVAILABLE;case on.UNAUTHENTICATED:return H.UNAUTHENTICATED;case on.INVALID_ARGUMENT:return H.INVALID_ARGUMENT;case on.NOT_FOUND:return H.NOT_FOUND;case on.ALREADY_EXISTS:return H.ALREADY_EXISTS;case on.PERMISSION_DENIED:return H.PERMISSION_DENIED;case on.FAILED_PRECONDITION:return H.FAILED_PRECONDITION;case on.ABORTED:return H.ABORTED;case on.OUT_OF_RANGE:return H.OUT_OF_RANGE;case on.UNIMPLEMENTED:return H.UNIMPLEMENTED;case on.DATA_LOSS:return H.DATA_LOSS;default:return ue()}}(rt=on||(on={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";var WM=null;function p1(){return new TextEncoder}var s4=new is([4294967295,4294967295],0);function ZM(t){let e=p1().encode(t),n=new Z0;return n.update(e),new Uint8Array(n.digest())}function KM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new is([n,i],0),new is([r,o],0)]}var Nw=class t{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Aa(`Invalid padding: ${n}`);if(i<0)throw new Aa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Aa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Aa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=is.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(is.fromNumber(i)));return r.compare(s4)===1&&(r=new is([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=ZM(e),[i,r]=KM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);if(!this.de(a))return!1}return!0}static create(e,n,i){let r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new t(o,r,n);return i.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;let n=ZM(e),[i,r]=KM(n);for(let o=0;o<this.hashCount;o++){let a=this.Ee(i,r,o);this.Ae(a)}}Ae(e){let n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}},Aa=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Th=class t{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){let r=new Map;return r.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new t(ve.min(),r,new Lt(Ve),ni(),je())}},Sh=class t{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new t(i,n,je(),je(),je())}};var Bl=class{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}},Cg=class{constructor(e,n){this.targetId=e,this.me=n}},Eg=class{constructor(e,n,i=yn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}},xg=class{constructor(){this.fe=0,this.ge=YM(),this.pe=yn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=je(),n=je(),i=je();return this.ge.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:ue()}}),new Sh(this.pe,this.ye,e,n,i)}ve(){this.we=!1,this.ge=YM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ow=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=ni(),this.qe=QM(),this.Qe=new Lt(Ve)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){let n=e.targetId,i=e.me.count,r=this.Je(n);if(r){let o=r.target;if(bg(o))if(i===0){let a=new re(o.path);this.Ue(n,a,ln.newNoDocument(a,ve.min()))}else me(i===1);else{let a=this.Ye(n);if(a!==i){let c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);let f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,f)}WM?.et(function(p,_,b,I,M){var P,F,W,X,Z,se;let pe={localCacheCount:p,existenceFilterCount:_.count,databaseId:b.database,projectId:b.projectId},he=_.unchangedNames;return he&&(pe.bloomFilter={applied:M===0,hashCount:(P=he?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(X=(W=(F=he?.bits)===null||F===void 0?void 0:F.bitmap)===null||W===void 0?void 0:W.length)!==null&&X!==void 0?X:0,padding:(se=(Z=he?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&se!==void 0?se:0,mightContain:S=>{var E;return(E=I?.mightContain(S))!==null&&E!==void 0&&E}}),pe}(a,e.me,this.Le.tt(),c,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n,a,c;try{a=hs(i).toUint8Array()}catch(u){if(u instanceof _g)return Li("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Nw(a,r,o)}catch(u){return Li(u instanceof Aa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){let i=this.Le.getRemoteKeysForTarget(n),r=0;return i.forEach(o=>{let a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,o,null),r++)}),r}rt(e){let n=new Map;this.Be.forEach((o,a)=>{let c=this.Je(a);if(c){if(o.current&&bg(c.target)){let u=new re(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,ln.newNoDocument(u,e))}o.be&&(n.set(a,o.Ce()),o.ve())}});let i=je();this.qe.forEach((o,a)=>{let c=!0;a.forEachWhile(u=>{let f=this.Je(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));let r=new Th(e,n,this.Qe,this.ke,i);return this.ke=ni(),this.qe=QM(),this.Qe=new Lt(Ve),r}$e(e,n){if(!this.ze(e))return;let i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new xg,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(Ve),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new xg),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function QM(){return new Lt(re.comparator)}function YM(){return new Lt(re.comparator)}var a4={asc:"ASCENDING",desc:"DESCENDING"},c4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l4={and:"AND",or:"OR"},Lw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Fw(t,e){return t.useProto3Json||jh(e)?e:{value:e}}function Gl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function u4(t,e){return Gl(t,e.toTimestamp())}function tn(t){return me(!!t),ve.fromTimestamp(function(n){let i=go(n);return new qt(i.seconds,i.nanos)}(t))}function uC(t,e){return Vw(t,e).canonicalString()}function Vw(t,e){let n=function(r){return new ot(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function g1(t){let e=ot.fromString(t);return me(D1(e)),e}function Ah(t,e){return uC(t.databaseId,e.path)}function Or(t,e){let n=g1(e);if(n.get(1)!==t.databaseId.projectId)throw new K(H.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(H.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(y1(n))}function _1(t,e){return uC(t.databaseId,e)}function v1(t){let e=g1(t);return e.length===4?ot.emptyPath():y1(e)}function Bw(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function y1(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function XM(t,e,n){return{name:Ah(t,e),fields:n.value.mapValue.fields}}function b1(t,e,n){let i=Or(t,e.name),r=tn(e.updateTime),o=e.createTime?tn(e.createTime):ve.min(),a=new Rn({mapValue:{fields:e.fields}}),c=ln.newFoundDocument(i,r,o,a);return n&&c.setHasCommittedMutations(),n?c.setHasCommittedMutations():c}function d4(t,e){return"found"in e?function(i,r){me(!!r.found),r.found.name,r.found.updateTime;let o=Or(i,r.found.name),a=tn(r.found.updateTime),c=r.found.createTime?tn(r.found.createTime):ve.min(),u=new Rn({mapValue:{fields:r.found.fields}});return ln.newFoundDocument(o,a,c,u)}(t,e):"missing"in e?function(i,r){me(!!r.missing),me(!!r.readTime);let o=Or(i,r.missing),a=tn(r.readTime);return ln.newNoDocument(o,a)}(t,e):ue()}function h4(t,e){let n;if("targetChange"in e){e.targetChange;let i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,p){return f.useProto3Json?(me(p===void 0||typeof p=="string"),yn.fromBase64String(p||"")):(me(p===void 0||p instanceof Buffer||p instanceof Uint8Array),yn.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(f){let p=f.code===void 0?H.UNKNOWN:f1(f.code);return new K(p,f.message||"")}(a);n=new Eg(i,r,o,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Or(t,i.document.name),o=tn(i.document.updateTime),a=i.document.createTime?tn(i.document.createTime):ve.min(),c=new Rn({mapValue:{fields:i.document.fields}}),u=ln.newFoundDocument(r,o,a,c),f=i.targetIds||[],p=i.removedTargetIds||[];n=new Bl(f,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Or(t,i.document),o=i.readTime?tn(i.readTime):ve.min(),a=ln.newNoDocument(r,o),c=i.removedTargetIds||[];n=new Bl([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Or(t,i.document),o=i.removedTargetIds||[];n=new Bl([],o,r,null)}else{if(!("filter"in e))return ue();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:o}=i,a=new Rw(r,o),c=i.targetId;n=new Cg(c,a)}}return n}function Mh(t,e){let n;if(e instanceof _s)n={update:XM(t,e.key,e.value)};else if(e instanceof vs)n={delete:Ah(t,e.key)};else if(e instanceof ir)n={update:XM(t,e.key,e.data),updateMask:v4(e.fieldMask)};else{if(!(e instanceof Eh))return ue();n={verify:Ah(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){let c=a.transform;if(c instanceof ms)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof _o)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof vo)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gs)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw ue()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:u4(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue()}(t,e.precondition)),n}function jw(t,e){let n=e.currentDocument?function(o){return o.updateTime!==void 0?Zt.updateTime(tn(o.updateTime)):o.exists!==void 0?Zt.exists(o.exists):Zt.none()}(e.currentDocument):Zt.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(a,c){let u=null;if("setToServerValue"in c)me(c.setToServerValue==="REQUEST_TIME"),u=new ms;else if("appendMissingElements"in c){let p=c.appendMissingElements.values||[];u=new _o(p)}else if("removeAllFromArray"in c){let p=c.removeAllFromArray.values||[];u=new vo(p)}else"increment"in c?u=new gs(a,c.increment):ue();let f=en.fromServerFormat(c.fieldPath);return new Oa(f,u)}(t,r)):[];if(e.update){e.update.name;let r=Or(t,e.update.name),o=new Rn({mapValue:{fields:e.update.fields}});if(e.updateMask){let a=function(u){let f=u.fieldPaths||[];return new pi(f.map(p=>en.fromServerFormat(p)))}(e.updateMask);return new ir(r,o,a,n,i)}return new _s(r,o,n,i)}if(e.delete){let r=Or(t,e.delete);return new vs(r,n)}if(e.verify){let r=Or(t,e.verify);return new Eh(r,n)}return ue()}function f4(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(r,o){let a=r.updateTime?tn(r.updateTime):tn(o);return a.isEqual(ve.min())&&(a=tn(o)),new Pw(a,r.transformResults||[])}(n,e))):[]}function w1(t,e){return{documents:[_1(t,e.path)]}}function I1(t,e){let n={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=_1(t,r);let o=function(f){if(f.length!==0)return x1(wt.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);let a=function(f){if(f.length!==0)return f.map(p=>function(b){return{field:Rl(b.field),direction:m4(b.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);let c=Fw(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{_t:n,parent:r}}function C1(t){let e=v1(t.parent),n=t.structuredQuery,i=n.from?n.from.length:0,r=null;if(i>0){me(i===1);let p=n.from[0];p.allDescendants?r=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=function(_){let b=E1(_);return b instanceof wt&&aC(b)?b.getFilters():[b]}(n.where));let a=[];n.orderBy&&(a=function(_){return _.map(b=>function(M){return new Ra(Nl(M.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction))}(b))}(n.orderBy));let c=null;n.limit&&(c=function(_){let b;return b=typeof _=="object"?_.value:_,jh(b)?null:b}(n.limit));let u=null;n.startAt&&(u=function(_){let b=!!_.before,I=_.values||[];return new Vr(I,b)}(n.startAt));let f=null;return n.endAt&&(f=function(_){let b=!_.before,I=_.values||[];return new Vr(I,b)}(n.endAt)),QP(e,r,a,o,c,"F",u,f)}function p4(t,e){let n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function E1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let i=Nl(n.unaryFilter.field);return Je.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Nl(n.unaryFilter.field);return Je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Nl(n.unaryFilter.field);return Je.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Nl(n.unaryFilter.field);return Je.create(a,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(Nl(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return wt.create(n.compositeFilter.filters.map(i=>E1(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function m4(t){return a4[t]}function g4(t){return c4[t]}function _4(t){return l4[t]}function Rl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return en.fromServerFormat(t.fieldPath)}function x1(t){return t instanceof Je?function(n){if(n.op==="=="){if(OM(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NAN"}};if(NM(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(OM(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NAN"}};if(NM(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rl(n.field),op:g4(n.op),value:n.value}}}(t):t instanceof wt?function(n){let i=n.getFilters().map(r=>x1(r));return i.length===1?i[0]:{compositeFilter:{op:_4(n.op),filters:i}}}(t):ue()}function v4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function D1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Wl=class t{constructor(e,n,i,r,o=ve.min(),a=ve.min(),c=yn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dg=class{constructor(e){this.ct=e}};function y4(t,e){let n;if(e.document)n=b1(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let i=re.fromSegments(e.noDocument.path),r=Fa(e.noDocument.readTime);n=ln.newNoDocument(i,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ue();{let i=re.fromSegments(e.unknownDocument.path),r=Fa(e.unknownDocument.version);n=ln.newUnknownDocument(i,r)}}return e.readTime&&n.setReadTime(function(r){let o=new qt(r[0],r[1]);return ve.fromTimestamp(o)}(e.readTime)),n}function JM(t,e){let n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Tg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(o,a){return{name:Ah(o,a.key),fields:a.data.value.mapValue.fields,updateTime:Gl(o,a.version.toTimestamp()),createTime:Gl(o,a.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:La(e.version)};else{if(!e.isUnknownDocument())return ue();i.unknownDocument={path:n.path.toArray(),version:La(e.version)}}return i}function Tg(t){let e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function La(t){let e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fa(t){let e=new qt(t.seconds,t.nanoseconds);return ve.fromTimestamp(e)}function Da(t,e){let n=(e.baseMutations||[]).map(o=>jw(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){let a=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let c=e.mutations[o+1];a.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let i=e.mutations.map(o=>jw(t.ct,o)),r=qt.fromMillis(e.localWriteTimeMs);return new xh(e.batchId,r,n,i)}function hh(t){let e=Fa(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Fa(t.lastLimboFreeSnapshotVersion):ve.min(),i;return i=function(o){return o.documents!==void 0}(t.query)?function(o){return me(o.documents.length===1),Hn(ru(v1(o.documents[0])))}(t.query):function(o){return Hn(C1(o))}(t.query),new Wl(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,yn.fromBase64String(t.resumeToken))}function T1(t,e){let n=La(e.snapshotVersion),i=La(e.lastLimboFreeSnapshotVersion),r;r=bg(e.target)?w1(t.ct,e.target):I1(t.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Na(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function dC(t){let e=C1({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ig(e,e.limit,"L"):e}function tw(t,e){return new Dh(e.largestBatchId,jw(t.ct,e.overlayMutation))}function eP(t,e){let n=e.path.lastSegment();return[t,Un(e.path.popLast()),n]}function tP(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:La(i.readTime),documentKey:Un(i.documentKey.path),largestBatchId:i.largestBatchId}}var zw=class{getBundleMetadata(e,n){return nP(e).get(n).next(i=>{if(i)return function(o){return{id:o.bundleId,createTime:Fa(o.createTime),version:o.version}}(i)})}saveBundleMetadata(e,n){return nP(e).put(function(r){return{bundleId:r.id,createTime:La(tn(r.createTime)),version:r.version}}(n))}getNamedQuery(e,n){return iP(e).get(n).next(i=>{if(i)return function(o){return{name:o.name,query:dC(o.bundledQuery),readTime:Fa(o.readTime)}}(i)})}saveNamedQuery(e,n){return iP(e).put(function(r){return{name:r.name,readTime:La(tn(r.readTime)),bundledQuery:r.bundledQuery}}(n))}};function nP(t){return bn(t,"bundles")}function iP(t){return bn(t,"namedQueries")}var Sg=class t{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){let i=n.uid||"";return new t(e,i)}getOverlay(e,n){return ah(e).get(eP(this.userId,n)).next(i=>i?tw(this.serializer,i):null)}getOverlays(e,n){let i=Rr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){let r=[];return i.forEach((o,a)=>{let c=new Dh(n,a);r.push(this.ht(e,c))}),B.waitFor(r)}removeOverlaysForBatchId(e,n,i){let r=new Set;n.forEach(a=>r.add(Un(a.getCollectionPath())));let o=[];return r.forEach(a=>{let c=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);o.push(ah(e).j("collectionPathOverlayIndex",c))}),B.waitFor(o)}getOverlaysForCollection(e,n,i){let r=Rr(),o=Un(n),a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,Number.POSITIVE_INFINITY],!0);return ah(e).U("collectionPathOverlayIndex",a).next(c=>{for(let u of c){let f=tw(this.serializer,u);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,n,i,r){let o=Rr(),a,c=IDBKeyRange.bound([this.userId,n,i],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ah(e).J({index:"collectionGroupOverlayIndex",range:c},(u,f,p)=>{let _=tw(this.serializer,f);o.size()<r||_.largestBatchId===a?(o.set(_.getKey(),_),a=_.largestBatchId):p.done()}).next(()=>o)}ht(e,n){return ah(e).put(function(r,o,a){let[c,u,f]=eP(o,a.mutation.key);return{userId:o,collectionPath:u,documentId:f,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Mh(r.ct,a.mutation)}}(this.serializer,this.userId,n))}};function ah(t){return bn(t,"documentOverlays")}var po=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(Wt(e.integerValue));else if("doubleValue"in e){let i=Wt(e.doubleValue);isNaN(i)?this.Et(n,13):(this.Et(n,15),yh(i)?n.dt(0):n.dt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Et(n,20),typeof i=="string"&&(i=go(i)),n.At(`${i.seconds||""}`),n.dt(i.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(hs(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Et(n,45),n.dt(i.latitude||0),n.dt(i.longitude||0)}else"mapValue"in e?HP(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ue()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let i=e.fields||{};this.Et(n,55);for(let r of Object.keys(i))this.Rt(r,n),this.It(i[r],n)}wt(e,n){let i=e.values||[];this.Et(n,50);for(let r of i)this.It(r,n)}gt(e,n){this.Et(n,37),re.fromName(e).path.forEach(i=>{this.Et(n,60),this.St(i,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};po.bt=new po;function b4(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function rP(t){let e=64-function(i){let r=0;for(let o=0;o<8;++o){let a=b4(255&i[o]);if(r+=a,a!==8)break}return r}(t);return Math.ceil(e/8)}var Uw=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Ct(i.value),i=n.next();this.vt()}Ft(e){let n=e[Symbol.iterator](),i=n.next();for(;!i.done;)this.Mt(i.value),i=n.next();this.xt()}Ot(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Ct(i);else if(i<2048)this.Ct(960|i>>>6),this.Ct(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i);else{let r=n.codePointAt(0);this.Ct(240|r>>>18),this.Ct(128|63&r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r)}}this.vt()}Nt(e){for(let n of e){let i=n.charCodeAt(0);if(i<128)this.Mt(i);else if(i<2048)this.Mt(960|i>>>6),this.Mt(128|63&i);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i);else{let r=n.codePointAt(0);this.Mt(240|r>>>18),this.Mt(128|63&r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r)}}this.xt()}Lt(e){let n=this.Bt(e),i=rP(n);this.kt(1+i),this.buffer[this.position++]=255&i;for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=255&n[r]}qt(e){let n=this.Bt(e),i=rP(n);this.kt(1+i),this.buffer[this.position++]=~(255&i);for(let r=n.length-i;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){let n=function(o){let a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,o,!1),new Uint8Array(a.buffer)}(e),i=(128&n[0])!=0;n[0]^=i?255:128;for(let r=1;r<n.length;++r)n[r]^=i?255:0;return n}Ct(e){let n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){let n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){let n=e+this.position;if(n<=this.buffer.length)return;let i=2*this.buffer.length;i<n&&(i=n);let r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}},Hw=class{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}},$w=class{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}},Ta=class{constructor(){this.Gt=new Uw,this.zt=new Hw(this.Gt),this.jt=new $w(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}};var Sa=class t{constructor(e,n,i,r){this.indexId=e,this.documentKey=n,this.arrayValue=i,this.directionalValue=r}Jt(){let e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,i=new Uint8Array(n);return i.set(this.directionalValue,0),n!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new t(this.indexId,this.documentKey,this.arrayValue,i)}};function rs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=oP(t.arrayValue,e.arrayValue),n!==0?n:(n=oP(t.directionalValue,e.directionalValue),n!==0?n:re.comparator(t.documentKey,e.documentKey)))}function oP(t,e){for(let n=0;n<t.length&&n<e.length;++n){let i=t[n]-e[n];if(i!==0)return i}return t.length-e.length}var Ag=class{constructor(e){this.Yt=new Tt((n,i)=>en.comparator(n.field,i.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(let n of e.filters){let i=n;i.isInequality()?this.Yt=this.Yt.add(i):this.Xt.push(i)}}get en(){return this.Yt.size>1}tn(e){if(me(e.collectionGroup===this.collectionId),this.en)return!1;let n=hw(e);if(n!==void 0&&!this.nn(n))return!1;let i=Ea(e),r=new Set,o=0,a=0;for(;o<i.length&&this.nn(i[o]);++o)r=r.add(i[o].fieldPath.canonicalString());if(o===i.length)return!0;if(this.Yt.size>0){let c=this.Yt.getIterator().getNext();if(!r.has(c.field.canonicalString())){let u=i[o];if(!this.rn(c,u)||!this.sn(this.Zt[a++],u))return!1}++o}for(;o<i.length;++o){let c=i[o];if(a>=this.Zt.length||!this.sn(this.Zt[a++],c))return!1}return!0}on(){if(this.en)return null;let e=new Tt(en.comparator),n=[];for(let i of this.Xt)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")n.push(new Fl(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),n.push(new Fl(i.field,0))}for(let i of this.Zt)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),n.push(new Fl(i.field,i.dir==="asc"?0:1)));return new zl(zl.UNKNOWN_ID,this.collectionId,n,vh.empty())}nn(e){for(let n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;let i=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===i}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}};function S1(t){var e,n;if(me(t instanceof Je||t instanceof wt),t instanceof Je){if(t instanceof yg){let r=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Je.create(t.field,"==",o)))||[];return wt.create(r,"or")}return t}let i=t.filters.map(r=>S1(r));return wt.create(i,t.op)}function w4(t){if(t.getFilters().length===0)return[];let e=Ww(S1(t));return me(A1(e)),qw(e)||Gw(e)?[e]:e.getFilters()}function qw(t){return t instanceof Je}function Gw(t){return t instanceof wt&&aC(t)}function A1(t){return qw(t)||Gw(t)||function(n){if(n instanceof wt&&bw(n)){for(let i of n.getFilters())if(!qw(i)&&!Gw(i))return!1;return!0}return!1}(t)}function Ww(t){if(me(t instanceof Je||t instanceof wt),t instanceof Je)return t;if(t.filters.length===1)return Ww(t.filters[0]);let e=t.filters.map(i=>Ww(i)),n=wt.create(e,t.op);return n=Mg(n),A1(n)?n:(me(n instanceof wt),me(Hl(n)),me(n.filters.length>1),n.filters.reduce((i,r)=>hC(i,r)))}function hC(t,e){let n;return me(t instanceof Je||t instanceof wt),me(e instanceof Je||e instanceof wt),n=t instanceof Je?e instanceof Je?function(r,o){return wt.create([r,o],"and")}(t,e):sP(t,e):e instanceof Je?sP(e,t):function(r,o){if(me(r.filters.length>0&&o.filters.length>0),Hl(r)&&Hl(o))return WP(r,o.getFilters());let a=bw(r)?r:o,c=bw(r)?o:r,u=a.filters.map(f=>hC(f,c));return wt.create(u,"or")}(t,e),Mg(n)}function sP(t,e){if(Hl(e))return WP(e,t.getFilters());{let n=e.filters.map(i=>hC(t,i));return wt.create(n,"or")}}function Mg(t){if(me(t instanceof Je||t instanceof wt),t instanceof Je)return t;let e=t.getFilters();if(e.length===1)return Mg(e[0]);if(qP(t))return t;let n=e.map(r=>Mg(r)),i=[];return n.forEach(r=>{r instanceof Je?i.push(r):r instanceof wt&&(r.op===t.op?i.push(...r.filters):i.push(r))}),i.length===1?i[0]:wt.create(i,t.op)}var Zw=class{constructor(){this._n=new Ph}addToCollectionParentIndex(e,n){return this._n.add(n),B.resolve()}getCollectionParents(e,n){return B.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return B.resolve()}deleteFieldIndex(e,n){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,n){return B.resolve()}getDocumentsMatchingTarget(e,n){return B.resolve(null)}getIndexType(e,n){return B.resolve(0)}getFieldIndexes(e,n){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,n){return B.resolve(Fi.min())}getMinOffsetFromCollectionGroup(e,n){return B.resolve(Fi.min())}updateCollectionGroup(e,n,i){return B.resolve()}updateIndexEntries(e,n){return B.resolve()}},Ph=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new Tt(ot.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){let n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Tt(ot.comparator)).toArray()}};var tg=new Uint8Array(0),Kw=class{constructor(e,n){this.databaseId=n,this.an=new Ph,this.un=new Br(i=>Na(i),(i,r)=>zh(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){let i=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});let o={collectionId:i,parent:Un(r)};return aP(e).put(o)}return B.resolve()}getCollectionParents(e,n){let i=[],r=IDBKeyRange.bound([n,""],[MP(n),""],!1,!0);return aP(e).U(r).next(o=>{for(let a of o){if(a.collectionId!==n)break;i.push(kr(a.parent))}return i})}addFieldIndex(e,n){let i=ch(e),r=function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete r.indexId;let o=i.add(r);if(n.indexState){let a=Al(e);return o.next(c=>{a.put(tP(c,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){let i=ch(e),r=Al(e),o=Sl(e);return i.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let n=ch(e),i=Sl(e),r=Al(e);return n.j().next(()=>i.j()).next(()=>r.j())}createTargetIndexes(e,n){return B.forEach(this.cn(n),i=>this.getIndexType(e,i).next(r=>{if(r===0||r===1){let o=new Ag(i).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){let i=Sl(e),r=!0,o=new Map;return B.forEach(this.cn(n),a=>this.ln(e,a).next(c=>{r&&(r=!!c),o.set(a,c)})).next(()=>{if(r){let a=je(),c=[];return B.forEach(o,(u,f)=>{Y("IndexedDbIndexManager",`Using index ${function(Z){return`id=${Z.indexId}|cg=${Z.collectionGroup}|f=${Z.fields.map(se=>`${se.fieldPath}:${se.kind}`).join(",")}`}(u)} to execute ${Na(n)}`);let p=function(Z,se){let pe=hw(se);if(pe===void 0)return null;for(let he of wg(Z,pe.fieldPath))switch(he.op){case"array-contains-any":return he.value.arrayValue.values||[];case"array-contains":return[he.value]}return null}(f,u),_=function(Z,se){let pe=new Map;for(let he of Ea(se))for(let S of wg(Z,he.fieldPath))switch(S.op){case"==":case"in":pe.set(he.fieldPath.canonicalString(),S.value);break;case"not-in":case"!=":return pe.set(he.fieldPath.canonicalString(),S.value),Array.from(pe.values())}return null}(f,u),b=function(Z,se){let pe=[],he=!0;for(let S of Ea(se)){let E=S.kind===0?jM(Z,S.fieldPath,Z.startAt):zM(Z,S.fieldPath,Z.startAt);pe.push(E.value),he&&(he=E.inclusive)}return new Vr(pe,he)}(f,u),I=function(Z,se){let pe=[],he=!0;for(let S of Ea(se)){let E=S.kind===0?zM(Z,S.fieldPath,Z.endAt):jM(Z,S.fieldPath,Z.endAt);pe.push(E.value),he&&(he=E.inclusive)}return new Vr(pe,he)}(f,u),M=this.hn(u,f,b),P=this.hn(u,f,I),F=this.Pn(u,f,_),W=this.In(u.indexId,p,M,b.inclusive,P,I.inclusive,F);return B.forEach(W,X=>i.G(X,n.limit).next(Z=>{Z.forEach(se=>{let pe=re.fromSegments(se.documentKey);a.has(pe)||(a=a.add(pe),c.push(pe))})}))}).next(()=>c)}return B.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=w4(wt.create(e.filters,"and")).map(i=>Aw(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,i,r,o,a,c){let u=(n!=null?n.length:1)*Math.max(i.length,o.length),f=u/(n!=null?n.length:1),p=[];for(let _=0;_<u;++_){let b=n?this.Tn(n[_/f]):tg,I=this.En(e,b,i[_%f],r),M=this.dn(e,b,o[_%f],a),P=c.map(F=>this.En(e,b,F,!0));p.push(...this.createRange(I,M,P))}return p}En(e,n,i,r){let o=new Sa(e,re.empty(),n,i);return r?o:o.Jt()}dn(e,n,i,r){let o=new Sa(e,re.empty(),n,i);return r?o.Jt():o}ln(e,n){let i=new Ag(n),r=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(o=>{let a=null;for(let c of o)i.tn(c)&&(!a||c.fields.length>a.fields.length)&&(a=c);return a})}getIndexType(e,n){let i=2,r=this.cn(n);return B.forEach(r,o=>this.ln(e,o).next(a=>{a?i!==0&&a.fields.length<function(u){let f=new Tt(en.comparator),p=!1;for(let _ of u.filters)for(let b of _.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?p=!0:f=f.add(b.field));for(let _ of u.orderBy)_.field.isKeyField()||(f=f.add(_.field));return f.size+(p?1:0)}(o)&&(i=1):i=0})).next(()=>function(a){return a.limit!==null}(n)&&r.length>1&&i===2?1:i)}An(e,n){let i=new Ta;for(let r of Ea(e)){let o=n.data.field(r.fieldPath);if(o==null)return null;let a=i.Ht(r.kind);po.bt.Pt(o,a)}return i.Wt()}Tn(e){let n=new Ta;return po.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){let i=new Ta;return po.bt.Pt(ka(this.databaseId,n),i.Ht(function(o){let a=Ea(o);return a.length===0?0:a[a.length-1].kind}(e))),i.Wt()}Pn(e,n,i){if(i===null)return[];let r=[];r.push(new Ta);let o=0;for(let a of Ea(e)){let c=i[o++];for(let u of r)if(this.Vn(n,a.fieldPath)&&Ch(c))r=this.mn(r,a,c);else{let f=u.Ht(a.kind);po.bt.Pt(c,f)}}return this.fn(r)}hn(e,n,i){return this.Pn(e,n,i.position)}fn(e){let n=[];for(let i=0;i<e.length;++i)n[i]=e[i].Wt();return n}mn(e,n,i){let r=[...e],o=[];for(let a of i.arrayValue.values||[])for(let c of r){let u=new Ta;u.seed(c.Wt()),po.bt.Pt(a,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(i=>i instanceof Je&&i.field.isEqual(n)&&(i.op==="in"||i.op==="not-in"))}getFieldIndexes(e,n){let i=ch(e),r=Al(e);return(n?i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):i.U()).next(o=>{let a=[];return B.forEach(o,c=>r.get([c.indexId,this.uid]).next(u=>{a.push(function(p,_){let b=_?new vh(_.sequenceNumber,new Fi(Fa(_.readTime),new re(kr(_.documentKey)),_.largestBatchId)):vh.empty(),I=p.fields.map(([M,P])=>new Fl(en.fromServerFormat(M),P));return new zl(p.indexId,p.collectionGroup,I,b)}(c,u))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((i,r)=>{let o=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return o!==0?o:Ve(i.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,i){let r=ch(e),o=Al(e);return this.gn(e).next(a=>r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(c=>B.forEach(c,u=>o.put(tP(u.indexId,this.uid,a,i)))))}updateIndexEntries(e,n){let i=new Map;return B.forEach(n,(r,o)=>{let a=i.get(r.collectionGroup);return(a?B.resolve(a):this.getFieldIndexes(e,r.collectionGroup)).next(c=>(i.set(r.collectionGroup,c),B.forEach(c,u=>this.pn(e,r,u).next(f=>{let p=this.yn(o,u);return f.isEqual(p)?B.resolve():this.wn(e,o,u,f,p)}))))})}Sn(e,n,i,r){return Sl(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(i,n.key),documentKey:n.key.path.toArray()})}bn(e,n,i,r){return Sl(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(i,n.key),n.key.path.toArray()])}pn(e,n,i){let r=Sl(e),o=new Tt(rs);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.Rn(i,n)])},(a,c)=>{o=o.add(new Sa(i.indexId,n,c.arrayValue,c.directionalValue))}).next(()=>o)}yn(e,n){let i=new Tt(rs),r=this.An(n,e);if(r==null)return i;let o=hw(n);if(o!=null){let a=e.data.field(o.fieldPath);if(Ch(a))for(let c of a.arrayValue.values||[])i=i.add(new Sa(n.indexId,e.key,this.Tn(c),r))}else i=i.add(new Sa(n.indexId,e.key,tg,r));return i}wn(e,n,i,r,o){Y("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);let a=[];return function(u,f,p,_,b){let I=u.getIterator(),M=f.getIterator(),P=Tl(I),F=Tl(M);for(;P||F;){let W=!1,X=!1;if(P&&F){let Z=p(P,F);Z<0?X=!0:Z>0&&(W=!0)}else P!=null?X=!0:W=!0;W?(_(F),F=Tl(M)):X?(b(P),P=Tl(I)):(P=Tl(I),F=Tl(M))}}(r,o,rs,c=>{a.push(this.Sn(e,n,i,c))},c=>{a.push(this.bn(e,n,i,c))}),B.waitFor(a)}gn(e){let n=1;return Al(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,o)=>{o.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,i){i=i.sort((a,c)=>rs(a,c)).filter((a,c,u)=>!c||rs(a,u[c-1])!==0);let r=[];r.push(e);for(let a of i){let c=rs(a,e),u=rs(a,n);if(c===0)r[0]=e.Jt();else if(c>0&&u<0)r.push(a),r.push(a.Jt());else if(u>0)break}r.push(n);let o=[];for(let a=0;a<r.length;a+=2){if(this.Dn(r[a],r[a+1]))return[];let c=[r[a].indexId,this.uid,r[a].arrayValue,r[a].directionalValue,tg,[]],u=[r[a+1].indexId,this.uid,r[a+1].arrayValue,r[a+1].directionalValue,tg,[]];o.push(IDBKeyRange.bound(c,u))}return o}Dn(e,n){return rs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(cP)}getMinOffset(e,n){return B.mapArray(this.cn(n),i=>this.ln(e,i).next(r=>r||ue())).next(cP)}};function aP(t){return bn(t,"collectionParents")}function Sl(t){return bn(t,"indexEntries")}function ch(t){return bn(t,"indexConfiguration")}function Al(t){return bn(t,"indexState")}function cP(t){me(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){let r=t[i].indexState.offset;rC(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Fi(e.readTime,e.documentKey,n)}var lP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Oi=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function M1(t,e,n){let i=t.store("mutations"),r=t.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId),c=0,u=i.J({range:a},(p,_,b)=>(c++,b.delete()));o.push(u.next(()=>{me(c===1)}));let f=[];for(let p of n.mutations){let _=LP(e,p.key.path,n.batchId);o.push(r.delete(_)),f.push(p.key)}return B.waitFor(o).next(()=>f)}function Pg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ue();e=t.noDocument}return JSON.stringify(e).length}Oi.DEFAULT_COLLECTION_PERCENTILE=10,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oi.DEFAULT=new Oi(41943040,Oi.DEFAULT_COLLECTION_PERCENTILE,Oi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oi.DISABLED=new Oi(-1,0,0);var kg=class t{constructor(e,n,i,r){this.userId=e,this.serializer=n,this.indexManager=i,this.referenceDelegate=r,this.Cn={}}static lt(e,n,i,r){me(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new t(o,n,i,r)}checkEmpty(e){let n=!0,i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).J({index:"userMutationsIndex",range:i},(r,o,a)=>{n=!1,a.done()}).next(()=>n)}addMutationBatch(e,n,i,r){let o=Ol(e),a=os(e);return a.add({}).next(c=>{me(typeof c=="number");let u=new xh(c,n,i,r),f=function(I,M,P){let F=P.baseMutations.map(X=>Mh(I.ct,X)),W=P.mutations.map(X=>Mh(I.ct,X));return{userId:M,batchId:P.batchId,localWriteTimeMs:P.localWriteTime.toMillis(),baseMutations:F,mutations:W}}(this.serializer,this.userId,u),p=[],_=new Tt((b,I)=>Ve(b.canonicalString(),I.canonicalString()));for(let b of r){let I=LP(this.userId,b.key.path,c);_=_.add(b.key.path.popLast()),p.push(a.put(f)),p.push(o.put(I,S5))}return _.forEach(b=>{p.push(this.indexManager.addToCollectionParentIndex(e,b))}),e.addOnCommittedListener(()=>{this.Cn[c]=u.keys()}),B.waitFor(p).next(()=>u)})}lookupMutationBatch(e,n){return os(e).get(n).next(i=>i?(me(i.userId===this.userId),Da(this.serializer,i)):null)}vn(e,n){return this.Cn[n]?B.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(i=>{if(i){let r=i.keys();return this.Cn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=IDBKeyRange.lowerBound([this.userId,i]),o=null;return os(e).J({index:"userMutationsIndex",range:r},(a,c,u)=>{c.userId===this.userId&&(me(c.batchId>=i),o=Da(this.serializer,c)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),i=-1;return os(e).J({index:"userMutationsIndex",range:n,reverse:!0},(r,o,a)=>{i=o.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){let n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return os(e).U("userMutationsIndex",n).next(i=>i.map(r=>Da(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){let i=og(this.userId,n.path),r=IDBKeyRange.lowerBound(i),o=[];return Ol(e).J({range:r},(a,c,u)=>{let[f,p,_]=a,b=kr(p);if(f===this.userId&&n.path.isEqual(b))return os(e).get(_).next(I=>{if(!I)throw ue();me(I.userId===this.userId),o.push(Da(this.serializer,I))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Tt(Ve),r=[];return n.forEach(o=>{let a=og(this.userId,o.path),c=IDBKeyRange.lowerBound(a),u=Ol(e).J({range:c},(f,p,_)=>{let[b,I,M]=f,P=kr(I);b===this.userId&&o.path.isEqual(P)?i=i.add(M):_.done()});r.push(u)}),B.waitFor(r).next(()=>this.Fn(e,i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=og(this.userId,i),a=IDBKeyRange.lowerBound(o),c=new Tt(Ve);return Ol(e).J({range:a},(u,f,p)=>{let[_,b,I]=u,M=kr(b);_===this.userId&&i.isPrefixOf(M)?M.length===r&&(c=c.add(I)):p.done()}).next(()=>this.Fn(e,c))}Fn(e,n){let i=[],r=[];return n.forEach(o=>{r.push(os(e).get(o).next(a=>{if(a===null)throw ue();me(a.userId===this.userId),i.push(Da(this.serializer,a))}))}),B.waitFor(r).next(()=>i)}removeMutationBatch(e,n){return M1(e._e,this.userId,n).next(i=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),B.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return B.resolve();let i=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),r=[];return Ol(e).J({range:i},(o,a,c)=>{if(o[0]===this.userId){let u=kr(o[1]);r.push(u)}else c.done()}).next(()=>{me(r.length===0)})})}containsKey(e,n){return P1(e,this.userId,n)}xn(e){return k1(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function P1(t,e,n){let i=og(e,n.path),r=i[1],o=IDBKeyRange.lowerBound(i),a=!1;return Ol(t).J({range:o,H:!0},(c,u,f)=>{let[p,_,b]=c;p===e&&_===r&&(a=!0),f.done()}).next(()=>a)}function os(t){return bn(t,"mutations")}function Ol(t){return bn(t,"documentMutations")}function k1(t){return bn(t,"mutationQueues")}var Zl=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Qw=class{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Bn(e).next(n=>{let i=new Zl(n.highestTargetId);return n.highestTargetId=i.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Bn(e).next(n=>ve.fromTimestamp(new qt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Bn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,i){return this.Bn(e).next(r=>(r.highestListenSequenceNumber=n,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.kn(e,r)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Bn(e).next(i=>(i.targetCount+=1,this.Qn(n,i),this.kn(e,i))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ml(e).delete(n.targetId)).next(()=>this.Bn(e)).next(i=>(me(i.targetCount>0),i.targetCount-=1,this.kn(e,i)))}removeTargets(e,n,i){let r=0,o=[];return Ml(e).J((a,c)=>{let u=hh(c);u.sequenceNumber<=n&&i.get(u.targetId)===null&&(r++,o.push(this.removeTargetData(e,u)))}).next(()=>B.waitFor(o)).next(()=>r)}forEachTarget(e,n){return Ml(e).J((i,r)=>{let o=hh(r);n(o)})}Bn(e){return uP(e).get("targetGlobalKey").next(n=>(me(n!==null),n))}kn(e,n){return uP(e).put("targetGlobalKey",n)}qn(e,n){return Ml(e).put(T1(this.serializer,n))}Qn(e,n){let i=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,i=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Bn(e).next(n=>n.targetCount)}getTargetData(e,n){let i=Na(n),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]),o=null;return Ml(e).J({range:r,index:"queryTargetsIndex"},(a,c,u)=>{let f=hh(c);zh(n,f.target)&&(o=f,u.done())}).next(()=>o)}addMatchingKeys(e,n,i){let r=[],o=ss(e);return n.forEach(a=>{let c=Un(a.path);r.push(o.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,a))}),B.waitFor(r)}removeMatchingKeys(e,n,i){let r=ss(e);return B.forEach(n,o=>{let a=Un(o.path);return B.waitFor([r.delete([i,a]),this.referenceDelegate.removeReference(e,i,o)])})}removeMatchingKeysForTargetId(e,n){let i=ss(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,n){let i=IDBKeyRange.bound([n],[n+1],!1,!0),r=ss(e),o=je();return r.J({range:i,H:!0},(a,c,u)=>{let f=kr(a[1]),p=new re(f);o=o.add(p)}).next(()=>o)}containsKey(e,n){let i=Un(n.path),r=IDBKeyRange.bound([i],[MP(i)],!1,!0),o=0;return ss(e).J({index:"documentTargetsIndex",H:!0,range:r},([a,c],u,f)=>{a!==0&&(o++,f.done())}).next(()=>o>0)}ot(e,n){return Ml(e).get(n).next(i=>i?hh(i):null)}};function Ml(t){return bn(t,"targets")}function uP(t){return bn(t,"targetGlobal")}function ss(t){return bn(t,"targetDocuments")}function dP([t,e],[n,i]){let r=Ve(t,n);return r===0?Ve(e,i):r}var Yw=class{constructor(e){this.Kn=e,this.buffer=new Tt(dP),this.$n=0}Un(){return++this.$n}Wn(e){let n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{let i=this.buffer.last();dP(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}},Xw=class{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){Y("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>U(this,null,function*(){this.Gn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(n){ws(n)?Y("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield bs(n)}yield this.zn(3e5)}))}},Jw=class{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return B.resolve(fi.oe);let i=new Yw(n);return this.jn.forEachTarget(e,r=>i.Wn(r.sequenceNumber)).next(()=>this.jn.Jn(e,r=>i.Wn(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.jn.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(lP)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lP):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let i,r,o,a,c,u,f,p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,a=Date.now(),this.nthSequenceNumber(e,r))).next(_=>(i=_,c=Date.now(),this.removeTargets(e,i,n))).next(_=>(o=_,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(f=Date.now(),Pl()<=gr.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${r} in `+(c-a)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${_} documents in `+(f-u)+`ms
Total Duration: ${f-p}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_})))}};function I4(t,e){return new Jw(t,e)}var eI=class{constructor(e,n){this.db=e,this.garbageCollector=I4(this,n)}Hn(e){let n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}Zn(e){let n=0;return this.Jn(e,i=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(i,r)=>n(r))}addReference(e,n,i){return ng(e,i)}removeReference(e,n,i){return ng(e,i)}removeTargets(e,n,i){return this.db.getTargetCache().removeTargets(e,n,i)}markPotentiallyOrphaned(e,n){return ng(e,n)}er(e,n){return function(r,o){let a=!1;return k1(r).Y(c=>P1(r,c,o).next(u=>(u&&(a=!0),B.resolve(!u)))).next(()=>a)}(e,n)}removeOrphanedDocuments(e,n){let i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[],o=0;return this.Xn(e,(a,c)=>{if(c<=n){let u=this.er(e,a).next(f=>{if(!f)return o++,i.getEntry(e,a).next(()=>(i.removeEntry(a,ve.min()),ss(e).delete(function(_){return[0,Un(_.path)]}(a))))});r.push(u)}}).next(()=>B.waitFor(r)).next(()=>i.apply(e)).next(()=>o)}removeTarget(e,n){let i=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,n){return ng(e,n)}Xn(e,n){let i=ss(e),r,o=fi.oe;return i.J({index:"documentTargetsIndex"},([a,c],{path:u,sequenceNumber:f})=>{a===0?(o!==fi.oe&&n(new re(kr(r)),o),o=f,r=u):o=fi.oe}).next(()=>{o!==fi.oe&&n(new re(kr(r)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function ng(t,e){return ss(t).put(function(i,r){return{targetId:0,path:Un(i.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}var Rg=class{constructor(){this.changes=new Br(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let i=this.changes.get(n);return i!==void 0?B.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,i){return Ca(e).put(i)}removeEntry(e,n,i){return Ca(e).delete(function(o,a){let c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Tg(a),c[c.length-1]]}(n,i))}updateMetadata(e,n){return this.getMetadata(e).next(i=>(i.byteSize+=n,this.tr(e,i)))}getEntry(e,n){let i=ln.newInvalidDocument(n);return Ca(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lh(n))},(r,o)=>{i=this.nr(n,o)}).next(()=>i)}rr(e,n){let i={size:0,document:ln.newInvalidDocument(n)};return Ca(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(lh(n))},(r,o)=>{i={document:this.nr(n,o),size:Pg(o)}}).next(()=>i)}getEntries(e,n){let i=ni();return this.ir(e,n,(r,o)=>{let a=this.nr(r,o);i=i.insert(r,a)}).next(()=>i)}sr(e,n){let i=ni(),r=new Lt(re.comparator);return this.ir(e,n,(o,a)=>{let c=this.nr(o,a);i=i.insert(o,c),r=r.insert(o,Pg(a))}).next(()=>({documents:i,_r:r}))}ir(e,n,i){if(n.isEmpty())return B.resolve();let r=new Tt(pP);n.forEach(u=>r=r.add(u));let o=IDBKeyRange.bound(lh(r.first()),lh(r.last())),a=r.getIterator(),c=a.getNext();return Ca(e).J({index:"documentKeyIndex",range:o},(u,f,p)=>{let _=re.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&pP(c,_)<0;)i(c,null),c=a.getNext();c&&c.isEqual(_)&&(i(c,f),c=a.hasNext()?a.getNext():null),c?p.$(lh(c)):p.done()}).next(()=>{for(;c;)i(c,null),c=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,n,i,r,o){let a=n.path,c=[a.popLast().toArray(),a.lastSegment(),Tg(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ca(e).U(IDBKeyRange.bound(c,u,!0)).next(f=>{o?.incrementDocumentReadCount(f.length);let p=ni();for(let _ of f){let b=this.nr(re.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);b.isFoundDocument()&&(Hh(n,b)||r.has(b.key))&&(p=p.insert(b.key,b))}return p})}getAllFromCollectionGroup(e,n,i,r){let o=ni(),a=fP(n,i),c=fP(n,Fi.max());return Ca(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,c,!0)},(u,f,p)=>{let _=this.nr(re.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);o=o.insert(_.key,_),o.size===r&&p.done()}).next(()=>o)}newChangeBuffer(e){return new nI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return hP(e).get("remoteDocumentGlobalKey").next(n=>(me(!!n),n))}tr(e,n){return hP(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){let i=y4(this.serializer,n);if(!(i.isNoDocument()&&i.version.isEqual(ve.min())))return i}return ln.newInvalidDocument(e)}};function R1(t){return new tI(t)}var nI=class extends Rg{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new Br(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){let n=[],i=0,r=new Tt((o,a)=>Ve(o.canonicalString(),a.canonicalString()));return this.changes.forEach((o,a)=>{let c=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,c.readTime)),a.isValidDocument()){let u=JM(this.ar.serializer,a);r=r.add(o.path.popLast());let f=Pg(u);i+=f-c.size,n.push(this.ar.addEntry(e,o,u))}else if(i-=c.size,this.trackRemovals){let u=JM(this.ar.serializer,a.convertToNoDocument(ve.min()));n.push(this.ar.addEntry(e,o,u))}}),r.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,i)),B.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(i=>(this.ur.set(n,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:i,_r:r})=>(r.forEach((o,a)=>{this.ur.set(o,{size:a,readTime:i.get(o).readTime})}),i))}};function hP(t){return bn(t,"remoteDocumentGlobal")}function Ca(t){return bn(t,"remoteDocumentsV14")}function lh(t){let e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function fP(t,e){let n=e.documentKey.path.toArray();return[t,Tg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function pP(t,e){let n=t.path.toArray(),i=e.path.toArray(),r=0;for(let o=0;o<n.length-2&&o<i.length-2;++o)if(r=Ve(n[o],i[o]),r)return r;return r=Ve(n.length,i.length),r||(r=Ve(n[n.length-2],i[i.length-2]),r||Ve(n[n.length-1],i[i.length-1]))}var iI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Ng=class{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&mh(i.mutation,r,pi.empty(),qt.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,je()).next(()=>i))}getLocalViewOfDocuments(e,n,i=je()){let r=Rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=dh();return o.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){let i=Rr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,je()))}populateOverlays(e,n,i){let r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,i,r){let o=ni(),a=ph(),c=function(){return ph()}();return n.forEach((u,f)=>{let p=i.get(f.key);r.has(f.key)&&(p===void 0||p.mutation instanceof ir)?o=o.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),mh(p.mutation,f,p.mutation.getFieldMask(),qt.now())):a.set(f.key,pi.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((f,p)=>a.set(f,p)),n.forEach((f,p)=>{var _;return c.set(f,new iI(p,(_=a.get(f))!==null&&_!==void 0?_:null))}),c))}recalculateAndSaveOverlays(e,n){let i=ph(),r=new Lt((a,c)=>a-c),o=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(let c of a)c.keys().forEach(u=>{let f=n.get(u);if(f===null)return;let p=i.get(u)||pi.empty();p=c.applyToLocalView(f,p),i.set(u,p);let _=(r.get(c.batchId)||je()).add(u);r=r.insert(c.batchId,_)})}).next(()=>{let a=[],c=r.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),f=u.key,p=u.value,_=n1();p.forEach(b=>{if(!o.has(b)){let I=u1(n.get(b),i.get(b));I!==null&&_.set(b,I),o=o.add(b)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,_))}return B.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{let a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):B.resolve(Rr()),c=-1,u=o;return a.next(f=>B.forEach(f,(p,_)=>(c<_.largestBatchId&&(c=_.largestBatchId),o.get(p)?B.resolve():this.remoteDocumentCache.getEntry(e,p).next(b=>{u=u.insert(p,b)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,u,f,je())).next(p=>({batchId:c,changes:t1(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(i=>{let r=dh();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){let o=n.collectionGroup,a=dh();return this.indexManager.getCollectionParents(e,o).next(c=>B.forEach(c,u=>{let f=function(_,b){return new nr(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(p=>{p.forEach((_,b)=>{a=a.insert(_,b)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((u,f)=>{let p=f.getKey();a.get(p)===null&&(a=a.insert(p,ln.newInvalidDocument(p)))});let c=dh();return a.forEach((u,f)=>{let p=o.get(u);p!==void 0&&mh(p.mutation,f,pi.empty(),qt.now()),Hh(n,f)&&(c=c.insert(u,f))}),c})}};var rI=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return B.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:tn(r.createTime)}}(n)),B.resolve()}getNamedQuery(e,n){return B.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(r){return{name:r.name,query:dC(r.bundledQuery),readTime:tn(r.readTime)}}(n)),B.resolve()}};var oI=class{constructor(){this.overlays=new Lt(re.comparator),this.hr=new Map}getOverlay(e,n){return B.resolve(this.overlays.get(n))}getOverlays(e,n){let i=Rr();return B.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.ht(e,n,o)}),B.resolve()}removeOverlaysForBatchId(e,n,i){let r=this.hr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(i)),B.resolve()}getOverlaysForCollection(e,n,i){let r=Rr(),o=n.length+1,a=new re(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){let u=c.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&u.largestBatchId>i&&r.set(u.getKey(),u)}return B.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Lt((f,p)=>f-p),a=this.overlays.getIterator();for(;a.hasNext();){let f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let p=o.get(f.largestBatchId);p===null&&(p=Rr(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}let c=Rr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((f,p)=>c.set(f,p)),!(c.size()>=r)););return B.resolve(c)}ht(e,n,i){let r=this.overlays.get(i.key);if(r!==null){let a=this.hr.get(r.largestBatchId).delete(i.key);this.hr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Dh(n,i));let o=this.hr.get(n);o===void 0&&(o=je(),this.hr.set(n,o)),this.hr.set(n,o.add(i.key))}};var kh=class{constructor(){this.Pr=new Tt(sn.Ir),this.Tr=new Tt(sn.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let i=new sn(e,n);this.Pr=this.Pr.add(i),this.Tr=this.Tr.add(i)}dr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Ar(new sn(e,n))}Rr(e,n){e.forEach(i=>this.removeReference(i,n))}Vr(e){let n=new re(new ot([])),i=new sn(n,e),r=new sn(n,e+1),o=[];return this.Tr.forEachInRange([i,r],a=>{this.Ar(a),o.push(a.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new re(new ot([])),i=new sn(n,e),r=new sn(n,e+1),o=je();return this.Tr.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){let n=new sn(e,0),i=this.Pr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}},sn=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return re.comparator(e.key,n.key)||Ve(e.pr,n.pr)}static Er(e,n){return Ve(e.pr,n.pr)||re.comparator(e.key,n.key)}};var sI=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Tt(sn.Ir)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){let o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new xh(o,n,i,r);this.mutationQueue.push(a);for(let c of r)this.wr=this.wr.add(new sn(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,n){return B.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let i=n+1,r=this.br(i),o=r<0?0:r;return B.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let i=new sn(n,0),r=new sn(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([i,r],a=>{let c=this.Sr(a.pr);o.push(c)}),B.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new Tt(Ve);return n.forEach(r=>{let o=new sn(r,0),a=new sn(r,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,a],c=>{i=i.add(c.pr)})}),B.resolve(this.Dr(i))}getAllMutationBatchesAffectingQuery(e,n){let i=n.path,r=i.length+1,o=i;re.isDocumentKey(o)||(o=o.child(""));let a=new sn(new re(o),0),c=new Tt(Ve);return this.wr.forEachWhile(u=>{let f=u.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(u.pr)),!0)},a),B.resolve(this.Dr(c))}Dr(e){let n=[];return e.forEach(i=>{let r=this.Sr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){me(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.wr;return B.forEach(n.mutations,r=>{let o=new sn(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.wr=i})}Mn(e){}containsKey(e,n){let i=new sn(n,0),r=this.wr.firstAfterOrEqual(i);return B.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var aI=class{constructor(e){this.vr=e,this.docs=function(){return new Lt(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.vr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let i=this.docs.get(n);return B.resolve(i?i.document.mutableCopy():ln.newInvalidDocument(n))}getEntries(e,n){let i=ni();return n.forEach(r=>{let o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():ln.newInvalidDocument(r))}),B.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=ni(),a=n.path,c=new re(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:f,value:{document:p}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||rC(kP(p),i)<=0||(r.has(p.key)||Hh(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return B.resolve(o)}getAllFromCollectionGroup(e,n,i,r){ue()}Fr(e,n){return B.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new cI(this)}getSize(e){return B.resolve(this.size)}},cI=class extends Rg{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.ar.addEntry(e,r)):this.ar.removeEntry(i)}),B.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var lI=class{constructor(e){this.persistence=e,this.Mr=new Br(n=>Na(n),zh),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.Or=0,this.Nr=new kh,this.targetCount=0,this.Lr=Zl.Nn()}forEachTarget(e,n){return this.Mr.forEach((i,r)=>n(r)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Or&&(this.Or=n),B.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Zl(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,B.resolve()}updateTargetData(e,n){return this.qn(n),B.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,n,i){let r=0,o=[];return this.Mr.forEach((a,c)=>{c.sequenceNumber<=n&&i.get(c.targetId)===null&&(this.Mr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),B.waitFor(o).next(()=>r)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,n){let i=this.Mr.get(n)||null;return B.resolve(i)}addMatchingKeys(e,n,i){return this.Nr.dr(n,i),B.resolve()}removeMatchingKeys(e,n,i){this.Nr.Rr(n,i);let r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),B.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),B.resolve()}getMatchingKeysForTargetId(e,n){let i=this.Nr.gr(n);return B.resolve(i)}containsKey(e,n){return B.resolve(this.Nr.containsKey(n))}};var Og=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new fi(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new lI(this),this.indexManager=new Zw,this.remoteDocumentCache=function(r){return new aI(r)}(i=>this.referenceDelegate.Kr(i)),this.serializer=new Dg(n),this.$r=new rI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.Br[e.toKey()];return i||(i=new sI(n,this.referenceDelegate),this.Br[e.toKey()]=i),i}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,i){Y("MemoryPersistence","Starting transaction:",e);let r=new uI(this.kr.next());return this.referenceDelegate.Ur(),i(r).next(o=>this.referenceDelegate.Wr(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Gr(e,n){return B.or(Object.values(this.Br).map(i=>()=>i.containsKey(e,n)))}},uI=class extends pg{constructor(e){super(),this.currentSequenceNumber=e}},Lg=class t{constructor(e){this.persistence=e,this.zr=new kh,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ue()}addReference(e,n,i){return this.zr.addReference(i,n),this.Jr.delete(i.toString()),B.resolve()}removeReference(e,n,i){return this.zr.removeReference(i,n),this.Jr.add(i.toString()),B.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),B.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(r=>this.Jr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.Jr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,i=>{let r=re.fromPath(i);return this.Yr(e,r).next(o=>{o||n.removeEntry(r,ve.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(i=>{i?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return B.or([()=>B.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var dI=class{constructor(e){this.serializer=e}O(e,n,i,r){let o=new mg("createOrUpgrade",n);i<1&&r>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PM,{unique:!0}),u.createObjectStore("documentMutations")}(e),mP(e),function(u){u.createObjectStore("remoteDocuments")}(e));let a=B.resolve();return i<3&&r>=3&&(i!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),mP(e)),a=a.next(()=>function(u){let f=u.store("targetGlobal"),p={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ve.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",p)}(o))),i<4&&r>=4&&(i!==0&&(a=a.next(()=>function(u,f){return f.store("mutations").U().next(p=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",PM,{unique:!0});let _=f.store("mutations"),b=p.map(I=>_.put(I));return B.waitFor(b)})}(e,o))),a=a.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),i<5&&r>=5&&(a=a.next(()=>this.Xr(o))),i<6&&r>=6&&(a=a.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),i<7&&r>=7&&(a=a.next(()=>this.ti(o))),i<8&&r>=8&&(a=a.next(()=>this.ni(e,o))),i<9&&r>=9&&(a=a.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),i<10&&r>=10&&(a=a.next(()=>this.ri(o))),i<11&&r>=11&&(a=a.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(a=a.next(()=>{(function(u){let f=u.createObjectStore("documentOverlays",{keyPath:j5});f.createIndex("collectionPathOverlayIndex",z5,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",U5,{unique:!1})})(e)})),i<13&&r>=13&&(a=a.next(()=>function(u){let f=u.createObjectStore("remoteDocumentsV14",{keyPath:A5});f.createIndex("documentKeyIndex",M5),f.createIndex("collectionGroupIndex",P5)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(a=a.next(()=>this.si(e,o))),i<15&&r>=15&&(a=a.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:L5}).createIndex("sequenceNumberIndex",F5,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:V5}).createIndex("documentKeyIndex",B5,{unique:!1})}(e))),i<16&&r>=16&&(a=a.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),a}ei(e){let n=0;return e.store("remoteDocuments").J((i,r)=>{n+=Pg(r)}).next(()=>{let i={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Xr(e){let n=e.store("mutationQueues"),i=e.store("mutations");return n.U().next(r=>B.forEach(r,o=>{let a=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return i.U("userMutationsIndex",a).next(c=>B.forEach(c,u=>{me(u.userId===o.userId);let f=Da(this.serializer,u);return M1(e,o.userId,f).next(()=>{})}))}))}ti(e){let n=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{let o=[];return i.J((a,c)=>{let u=new ot(a),f=function(_){return[0,Un(_)]}(u);o.push(n.get(f).next(p=>p?B.resolve():(_=>n.put({targetId:0,path:Un(_),sequenceNumber:r.highestListenSequenceNumber}))(u)))}).next(()=>B.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:O5});let i=n.store("collectionParents"),r=new Ph,o=a=>{if(r.add(a)){let c=a.lastSegment(),u=a.popLast();return i.put({collectionId:c,parent:Un(u)})}};return n.store("remoteDocuments").J({H:!0},(a,c)=>{let u=new ot(a);return o(u.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([a,c,u],f)=>{let p=kr(c);return o(p.popLast())}))}ri(e){let n=e.store("targets");return n.J((i,r)=>{let o=hh(r),a=T1(this.serializer,o);return n.put(a)})}ii(e,n){let i=n.store("remoteDocuments"),r=[];return i.J((o,a)=>{let c=n.store("remoteDocumentsV14"),u=function(_){return _.document?new re(ot.fromString(_.document.name).popFirst(5)):_.noDocument?re.fromSegments(_.noDocument.path):_.unknownDocument?re.fromSegments(_.unknownDocument.path):ue()}(a).path.toArray(),f={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};r.push(c.put(f))}).next(()=>B.waitFor(r))}si(e,n){let i=n.store("mutations"),r=R1(this.serializer),o=new Og(Lg.Hr,this.serializer.ct);return i.U().next(a=>{let c=new Map;return a.forEach(u=>{var f;let p=(f=c.get(u.userId))!==null&&f!==void 0?f:je();Da(this.serializer,u).keys().forEach(_=>p=p.add(_)),c.set(u.userId,p)}),B.forEach(c,(u,f)=>{let p=new an(f),_=Sg.lt(this.serializer,p),b=o.getIndexManager(p),I=kg.lt(p,this.serializer,b,o.referenceDelegate);return new Ng(r,I,_,b).recalculateAndSaveOverlaysForDocumentKeys(new bh(n,fi.oe),u).next()})})}};function mP(t){t.createObjectStore("targetDocuments",{keyPath:R5}).createIndex("documentTargetsIndex",N5,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",k5,{unique:!0}),t.createObjectStore("targetGlobal")}var nw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",hI=class t{constructor(e,n,i,r,o,a,c,u,f,p,_=16){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=i,this.oi=o,this.window=a,this.document=c,this._i=f,this.ai=p,this.ui=_,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=b=>Promise.resolve(),!t.D())throw new K(H.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eI(this,r),this.Ti=n+"main",this.serializer=new Dg(u),this.Ei=new ds(this.Ti,this.ui,new dI(this.serializer)),this.Qr=new Qw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=R1(this.serializer),this.$r=new zw,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,p===!1&&Jt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new K(H.FAILED_PRECONDITION,nw);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new fi(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=n=>U(this,null,function*(){if(this.started)return e(n)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(n=>U(this,null,function*(){n.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(()=>U(this,null,function*(){this.started&&(yield this.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ig(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ws(e))return Y("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Y("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return uh(e).get("owner").next(n=>B.resolve(this.Si(n)))}bi(e){return ig(e).delete(this.clientId)}Di(){return U(this,null,function*(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{let i=bn(n,"clientMetadata");return i.U().next(r=>{let o=this.vi(r,18e5),a=r.filter(c=>o.indexOf(c)===-1);return B.forEach(a,c=>i.delete(c.clientId)).next(()=>a)})}).catch(()=>[]);if(this.di)for(let n of e)this.di.removeItem(this.Fi(n.clientId))}})}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):uh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new K(H.FAILED_PRECONDITION,nw);return!1}}return!(!this.networkEnabled||!this.inForeground)||ig(e).U().next(i=>this.vi(i,5e3).find(r=>{if(this.clientId!==r.clientId){let o=!this.networkEnabled&&r.networkEnabled,a=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(o||a&&c)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Y("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return U(this,null,function*(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),yield this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let n=new bh(e,fi.oe);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Li()})}vi(e,n){return e.filter(i=>this.Ci(i.updateTimeMs,n)&&!this.Mi(i.clientId))}Bi(){return this.runTransaction("getActiveClients","readonly",e=>ig(e).U().next(n=>this.vi(n,18e5).map(i=>i.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return kg.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Kw(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Sg.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,i){Y("IndexedDbPersistence","Starting transaction:",e);let r=n==="readonly"?"readonly":"readwrite",o=function(u){return u===16?$5:u===15?jP:u===14?BP:u===13?VP:u===12?H5:u===11?FP:void ue()}(this.ui),a;return this.Ei.runTransaction(e,r,o,c=>(a=new bh(c,this.kr?this.kr.next():fi.oe),n==="readwrite-primary"?this.gi(a).next(u=>!!u||this.pi(a)).next(u=>{if(!u)throw Jt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new K(H.FAILED_PRECONDITION,RP);return i(a)}).next(u=>this.wi(a).next(()=>u)):this.ki(a).next(()=>i(a)))).then(c=>(a.raiseOnCommittedEvent(),c))}ki(e){return uh(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new K(H.FAILED_PRECONDITION,nw)})}wi(e){let n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return uh(e).put("owner",n)}static D(){return ds.D()}yi(e){let n=uh(e);return n.get("owner").next(i=>this.Si(i)?(Y("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):B.resolve())}Ci(e,n){let i=Date.now();return!(e<i-n)&&(!(e>i)||(Jt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();let n=/(?:Version|Mobile)\/1[456]/;R_()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{let i=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return Y("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Jt("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Jt("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function uh(t){return bn(t,"owner")}function ig(t){return bn(t,"clientMetadata")}function fC(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var fI=class t{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.qi=i,this.Qi=r}static Ki(e,n){let i=je(),r=je();for(let o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new t(e,n.fromCache,i,r)}};var pI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Fg=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return R_()?8:NP(Wu())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,i,r){let o={result:null};return this.ji(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Hi(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new pI;return this.Ji(e,n,a).next(c=>{if(o.result=c,this.Ui)return this.Yi(e,n,a,c.size)})}).next(()=>o.result)}Yi(e,n,i,r){return i.documentReadCount<this.Wi?(Pl()<=gr.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",kl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(Pl()<=gr.DEBUG&&Y("QueryEngine","Query:",kl(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Gi*r?(Pl()<=gr.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",kl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hn(n))):B.resolve())}ji(e,n){if(UM(n))return B.resolve(null);let i=Hn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Ig(n,null,"F"),i=Hn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{let a=je(...o);return this.zi.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,i).next(u=>{let f=this.Zi(n,c);return this.Xi(n,f,a,u.readTime)?this.ji(e,Ig(n,null,"F")):this.es(e,f,n,u)}))})))}Hi(e,n,i,r){return UM(n)||r.isEqual(ve.min())?B.resolve(null):this.zi.getDocuments(e,i).next(o=>{let a=this.Zi(n,o);return this.Xi(n,a,i,r)?B.resolve(null):(Pl()<=gr.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),kl(n)),this.es(e,a,n,PP(r,-1)).next(c=>c))})}Zi(e,n){let i=new Tt(JP(e));return n.forEach((r,o)=>{Hh(e,o)&&(i=i.add(o))}),i}Xi(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ji(e,n,i){return Pl()<=gr.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",kl(n)),this.zi.getDocumentsMatchingQuery(e,n,Fi.min(),i)}es(e,n,i,r){return this.zi.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}};var mI=class{constructor(e,n,i,r){this.persistence=e,this.ts=n,this.serializer=r,this.ns=new Lt(Ve),this.rs=new Br(o=>Na(o),zh),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(i)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ng(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function N1(t,e,n,i){return new mI(t,e,n,i)}function O1(t,e){return U(this,null,function*(){let n=oe(t);return yield n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n._s(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{let a=[],c=[],u=je();for(let f of r){a.push(f.batchId);for(let p of f.mutations)u=u.add(p.key)}for(let f of o){c.push(f.batchId);for(let p of f.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(i,u).next(f=>({us:f,removedBatchIds:a,addedBatchIds:c}))})})})}function C4(t,e){let n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(c,u,f,p){let _=f.batch,b=_.keys(),I=B.resolve();return b.forEach(M=>{I=I.next(()=>p.getEntry(u,M)).next(P=>{let F=f.docVersions.get(M);me(F!==null),P.version.compareTo(F)<0&&(_.applyToRemoteDocument(P,f),P.isValidDocument()&&(P.setReadTime(f.commitVersion),p.addEntry(P)))})}),I.next(()=>c.mutationQueue.removeMutationBatch(u,_))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let u=je();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(u=u.add(c.batch.mutations[f].key));return u}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function L1(t){let e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function E4(t,e){let n=oe(t),i=e.snapshotVersion,r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let a=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;let c=[];e.targetChanges.forEach((p,_)=>{let b=r.get(_);if(!b)return;c.push(n.Qr.removeMatchingKeys(o,p.removedDocuments,_).next(()=>n.Qr.addMatchingKeys(o,p.addedDocuments,_)));let I=b.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(yn.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):p.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(p.resumeToken,i)),r=r.insert(_,I),function(P,F,W){return P.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:W.addedDocuments.size+W.modifiedDocuments.size+W.removedDocuments.size>0}(b,I,p)&&c.push(n.Qr.updateTargetData(o,I))});let u=ni(),f=je();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,p))}),c.push(F1(o,a,e.documentUpdates).next(p=>{u=p.cs,f=p.ls})),!i.isEqual(ve.min())){let p=n.Qr.getLastRemoteSnapshotVersion(o).next(_=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,i));c.push(p)}return B.waitFor(c).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,f)).next(()=>u)}).then(o=>(n.ns=r,o))}function F1(t,e,n){let i=je(),r=je();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=ni();return n.forEach((c,u)=>{let f=o.get(c);u.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),u.isNoDocument()&&u.version.isEqual(ve.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):Y("LocalStore","Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",u.version)}),{cs:a,ls:r}})}function x4(t,e){let n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Kl(t,e){let n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Qr.getTargetData(i,e).next(o=>o?(r=o,B.resolve(r)):n.Qr.allocateTargetId(i).next(a=>(r=new Wl(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Qr.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=n.ns.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(i.targetId,i),n.rs.set(e,i.targetId)),i})}function Ql(t,e,n){return U(this,null,function*(){let i=oe(t),r=i.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||(yield i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r)))}catch(a){if(!ws(a))throw a;Y("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)})}function Vg(t,e,n){let i=oe(t),r=ve.min(),o=je();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,f,p){let _=oe(u),b=_.rs.get(p);return b!==void 0?B.resolve(_.ns.get(b)):_.Qr.getTargetData(f,p)}(i,a,Hn(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(a,c.targetId).next(u=>{o=u})}).next(()=>i.ts.getDocumentsMatchingQuery(a,e,n?r:ve.min(),n?o:je())).next(c=>(j1(i,XP(e),c),{documents:c,hs:o})))}function V1(t,e){let n=oe(t),i=oe(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",o=>i.ot(o,e).next(a=>a?a.target:null))}function B1(t,e){let n=oe(t),i=n.ss.get(e)||ve.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.os.getAllFromCollectionGroup(r,e,PP(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(j1(n,e,r),r))}function j1(t,e,n){let i=t.ss.get(e)||ve.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.ss.set(e,i)}function D4(t,e,n,i){return U(this,null,function*(){let r=oe(t),o=je(),a=ni();for(let f of n){let p=e.Ps(f.metadata.name);f.document&&(o=o.add(p));let _=e.Is(f);_.setReadTime(e.Ts(f.metadata.readTime)),a=a.insert(p,_)}let c=r.os.newChangeBuffer({trackRemovals:!0}),u=yield Kl(r,function(p){return Hn(ru(ot.fromString(`__bundle__/docs/${p}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",f=>F1(f,c,a).next(p=>(c.apply(f),p)).next(p=>r.Qr.removeMatchingKeysForTargetId(f,u.targetId).next(()=>r.Qr.addMatchingKeys(f,o,u.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(f,p.cs,p.ls)).next(()=>p.cs)))})}function T4(i,r){return U(this,arguments,function*(t,e,n=je()){let o=yield Kl(t,Hn(dC(e.bundledQuery))),a=oe(t);return a.persistence.runTransaction("Save named query","readwrite",c=>{let u=tn(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return a.$r.saveNamedQuery(c,e);let f=o.withResumeToken(yn.EMPTY_BYTE_STRING,u);return a.ns=a.ns.insert(f.targetId,f),a.Qr.updateTargetData(c,f).next(()=>a.Qr.removeMatchingKeysForTargetId(c,o.targetId)).next(()=>a.Qr.addMatchingKeys(c,n,o.targetId)).next(()=>a.$r.saveNamedQuery(c,e))})})}function gP(t,e){return`firestore_clients_${t}_${e}`}function _P(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function iw(t,e){return`firestore_targets_${t}_${e}`}var Bg=class t{constructor(e,n,i,r){this.user=e,this.batchId=n,this.state=i,this.error=r}static Es(e,n,i){let r=JSON.parse(i),o,a=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return a&&r.error&&(a=typeof r.error.message=="string"&&typeof r.error.code=="string",a&&(o=new K(r.error.code,r.error.message))),a?new t(e,n,r.state,o):(Jt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${i}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},gh=class t{constructor(e,n,i){this.targetId=e,this.state=n,this.error=i}static Es(e,n){let i=JSON.parse(n),r,o=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(r=new K(i.error.code,i.error.message))),o?new t(e,i.state,r):(Jt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}ds(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},jg=class t{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){let i=JSON.parse(n),r=typeof i=="object"&&i.activeTargetIds instanceof Array,o=lC();for(let a=0;r&&a<i.activeTargetIds.length;++a)r=OP(i.activeTargetIds[a]),o=o.add(i.activeTargetIds[a]);return r?new t(e,o):(Jt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}},gI=class t{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){let n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new t(n.clientId,n.onlineState):(Jt("SharedClientState",`Failed to parse online state: ${e}`),null)}},Rh=class{constructor(){this.activeTargetIds=lC()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},_h=class{constructor(e,n,i,r,o){this.window=e,this.oi=n,this.persistenceKey=i,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Lt(Ve),this.started=!1,this.ys=[];let a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=gP(this.persistenceKey,this.Vs),this.Ss=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Rh),this.bs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.vs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Fs=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){return U(this,null,function*(){let e=yield this.syncEngine.Bi();for(let i of e){if(i===this.Vs)continue;let r=this.getItem(gP(this.persistenceKey,i));if(r){let o=jg.Es(i,r);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();let n=this.storage.getItem(this.vs);if(n){let i=this.xs(n);i&&this.Os(i)}for(let i of this.ys)this.gs(i);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((i,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,n,i){this.Ls(e,n,i),this.Bs(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(iw(this.persistenceKey,e));if(i){let r=gh.Es(e,i);r&&(n=r.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(iw(this.persistenceKey,e))}updateQueryState(e,n,i){this.qs(e,n,i)}handleUserChange(e,n,i){n.forEach(r=>{this.Bs(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){let n=this.storage.getItem(e);return Y("SharedClientState","READ",e,n),n}setItem(e,n){Y("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Y("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){let n=e;if(n.storageArea===this.storage){if(Y("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void Jt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(()=>U(this,null,function*(){if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){let i=this.$s(n.key);return this.Us(i,null)}{let i=this.Ws(n.key,n.newValue);if(i)return this.Us(i.clientId,i)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){let i=this.Gs(n.key,n.newValue);if(i)return this.zs(i)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){let i=this.js(n.key,n.newValue);if(i)return this.Hs(i)}}else if(n.key===this.vs){if(n.newValue!==null){let i=this.xs(n.newValue);if(i)return this.Os(i)}}else if(n.key===this.Ss){let i=function(o){let a=fi.oe;if(o!=null)try{let c=JSON.parse(o);me(typeof c=="number"),a=c}catch(c){Jt("SharedClientState","Failed to read sequence number from WebStorage",c)}return a}(n.newValue);i!==fi.oe&&this.sequenceNumberHandler(i)}else if(n.key===this.Fs){let i=this.Js(n.newValue);yield Promise.all(i.map(r=>this.syncEngine.Ys(r)))}}}else this.ys.push(n)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,n,i){let r=new Bg(this.currentUser,e,n,i),o=_P(this.persistenceKey,this.currentUser,e);this.setItem(o,r.ds())}Bs(e){let n=_P(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){let n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,i){let r=iw(this.persistenceKey,e),o=new gh(e,n,i);this.setItem(r,o.ds())}Ks(e){let n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){let n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){let i=this.$s(e);return jg.Es(i,n)}Gs(e,n){let i=this.Ds.exec(e),r=Number(i[1]),o=i[2]!==void 0?i[2]:null;return Bg.Es(new an(o),r,n)}js(e,n){let i=this.Cs.exec(e),r=Number(i[1]);return gh.Es(r,n)}xs(e){return gI.Es(e)}Js(e){return JSON.parse(e)}zs(e){return U(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Y("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){let i=n?this.ps.insert(e,n):this.ps.remove(e),r=this.Ns(this.ps),o=this.Ns(i),a=[],c=[];return o.forEach(u=>{r.has(u)||a.push(u)}),r.forEach(u=>{o.has(u)||c.push(u)}),this.syncEngine.eo(a,c).then(()=>{this.ps=i})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=lC();return e.forEach((i,r)=>{n=n.unionWith(r.activeTargetIds)}),n}},zg=class{constructor(){this.no=new Rh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,i){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Rh,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _I=class{io(e){}shutdown(){}};var Ug=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var rg=null;function rw(){return rg===null?rg=function(){return 268435456+Math.round(2147483648*Math.random())}():rg++,"0x"+rg.toString(16)}var S4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var vI=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var kn="WebChannelConnection",yI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.wo=i+"://"+n.host,this.So=`projects/${r}/databases/${o}`,this.bo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${o}`}get Do(){return!1}Co(n,i,r,o,a){let c=rw(),u=this.vo(n,i.toUriEncodedString());Y("RestConnection",`Sending RPC '${n}' ${c}:`,u,r);let f={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(f,o,a),this.Mo(n,u,f,r).then(p=>(Y("RestConnection",`Received RPC '${n}' ${c}: `,p),p),p=>{throw Li("RestConnection",`RPC '${n}' ${c} failed with error: `,p,"url: ",u,"request:",r),p})}xo(n,i,r,o,a,c){return this.Co(n,i,r,o,a)}Fo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+iu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,a)=>n[a]=o),r&&r.headers.forEach((o,a)=>n[a]=o)}vo(n,i){let r=S4[n];return`${this.wo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,i,r){let o=rw();return new Promise((a,c)=>{let u=new K0;u.setWithCredentials(!0),u.listenOnce(Y0.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case sh.NO_ERROR:let p=u.getResponseJson();Y(kn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case sh.TIMEOUT:Y(kn,`RPC '${e}' ${o} timed out`),c(new K(H.DEADLINE_EXCEEDED,"Request time out"));break;case sh.HTTP_ERROR:let _=u.getStatus();if(Y(kn,`RPC '${e}' ${o} failed with status:`,_,"response text:",u.getResponseText()),_>0){let b=u.getResponseJson();Array.isArray(b)&&(b=b[0]);let I=b?.error;if(I&&I.status&&I.message){let M=function(F){let W=F.toLowerCase().replace(/_/g,"-");return Object.values(H).indexOf(W)>=0?W:H.UNKNOWN}(I.status);c(new K(M,I.message))}else c(new K(H.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(H.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{Y(kn,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(r);Y(kn,`RPC '${e}' ${o} sending request:`,r),u.send(n,"POST",f,i,15)})}Oo(e,n,i){let r=rw(),o=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ew(),c=J0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.xmlHttpFactory=new Q0({})),this.Fo(u.initMessageHeaders,n,i),u.encodeInitMessageHeaders=!0;let p=o.join("");Y(kn,`Creating RPC '${e}' stream ${r}: ${p}`,u);let _=a.createWebChannel(p,u),b=!1,I=!1,M=new vI({lo:F=>{I?Y(kn,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(b||(Y(kn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),b=!0),Y(kn,`RPC '${e}' stream ${r} sending:`,F),_.send(F))},ho:()=>_.close()}),P=(F,W,X)=>{F.listen(W,Z=>{try{X(Z)}catch(se){setTimeout(()=>{throw se},0)}})};return P(_,Dl.EventType.OPEN,()=>{I||(Y(kn,`RPC '${e}' stream ${r} transport opened.`),M.mo())}),P(_,Dl.EventType.CLOSE,()=>{I||(I=!0,Y(kn,`RPC '${e}' stream ${r} transport closed`),M.po())}),P(_,Dl.EventType.ERROR,F=>{I||(I=!0,Li(kn,`RPC '${e}' stream ${r} transport errored:`,F),M.po(new K(H.UNAVAILABLE,"The operation could not be completed")))}),P(_,Dl.EventType.MESSAGE,F=>{var W;if(!I){let X=F.data[0];me(!!X);let Z=X,se=Z.error||((W=Z[0])===null||W===void 0?void 0:W.error);if(se){Y(kn,`RPC '${e}' stream ${r} received error:`,se);let pe=se.status,he=function(x){let A=on[x];if(A!==void 0)return f1(A)}(pe),S=se.message;he===void 0&&(he=H.INTERNAL,S="Unknown error status: "+pe+" with message "+se.message),I=!0,M.po(new K(he,S)),_.close()}else Y(kn,`RPC '${e}' stream ${r} received:`,X),M.yo(X)}}),P(c,X0.STAT_EVENT,F=>{F.stat===eg.PROXY?Y(kn,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===eg.NOPROXY&&Y(kn,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{M.fo()},0),M}};function z1(){return typeof window<"u"?window:null}function lg(){return typeof document<"u"?document:null}function $h(t){return new Lw(t,!0)}var Nh=class{constructor(e,n,i=1e3,r=1.5,o=6e4){this.oi=e,this.timerId=n,this.No=i,this.Lo=r,this.Bo=o,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),i=Math.max(0,Date.now()-this.Qo),r=Math.max(0,n-i);r>0&&Y("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,r,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Hg=class{constructor(e,n,i,r,o,a,c,u){this.oi=e,this.Go=i,this.zo=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Nh(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return U(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return U(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return U(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===H.RESOURCE_EXHAUSTED?(Jt(n.toString()),Jt("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===H.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.jo===n&&this.u_(i,r)},i=>{e(()=>{let r=new K(H.UNKNOWN,"Fetching auth token failed: "+i.message);return this.c_(r)})})}u_(e,n){let i=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{i(()=>this.listener.Po())}),this.stream.To(()=>{i(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(r=>{i(()=>this.c_(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}e_(){this.state=5,this.Yo.$o(()=>U(this,null,function*(){this.state=0,this.start()}))}c_(e){return Y("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},bI=class extends Hg{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=h4(this.serializer,e),i=function(o){if(!("targetChange"in o))return ve.min();let a=o.targetChange;return a.targetIds&&a.targetIds.length?ve.min():a.readTime?tn(a.readTime):ve.min()}(e);return this.listener.h_(n,i)}P_(e){let n={};n.database=Bw(this.serializer),n.addTarget=function(o,a){let c,u=a.target;if(c=bg(u)?{documents:w1(o,u)}:{query:I1(o,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=m1(o,a.resumeToken);let f=Fw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}else if(a.snapshotVersion.compareTo(ve.min())>0){c.readTime=Gl(o,a.snapshotVersion.toTimestamp());let f=Fw(o,a.expectedCount);f!==null&&(c.expectedCount=f)}return c}(this.serializer,e);let i=p4(this.serializer,e);i&&(n.labels=i),this.i_(n)}I_(e){let n={};n.database=Bw(this.serializer),n.removeTarget=e,this.i_(n)}},wI=class extends Hg{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=f4(e.writeResults,e.commitTime),i=tn(e.commitTime);return this.listener.A_(i,n)}return me(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Bw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(i=>Mh(this.serializer,i))};this.i_(n)}};var II=class extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.m_=!1}f_(){if(this.m_)throw new K(H.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,i,r){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,Vw(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(H.UNKNOWN,o.toString())})}xo(e,n,i,r,o){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.xo(e,Vw(n,i),r,a,c,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===H.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(H.UNKNOWN,a.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},CI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Jt(n),this.y_=!1):Y("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var EI=class{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=o,this.O_.io(a=>{i.enqueueAndForget(()=>U(this,null,function*(){Is(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),yield function(u){return U(this,null,function*(){let f=oe(u);f.M_.add(4),yield ou(f),f.N_.set("Unknown"),f.M_.delete(4),yield qh(f)})}(this))}))}),this.N_=new CI(i,r)}};function qh(t){return U(this,null,function*(){if(Is(t))for(let e of t.x_)yield e(!0)})}function ou(t){return U(this,null,function*(){for(let e of t.x_)yield e(!1)})}function c_(t,e){let n=oe(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),gC(n)?mC(n):au(n).Xo()&&pC(n,e))}function Yl(t,e){let n=oe(t),i=au(n);n.F_.delete(e),i.Xo()&&U1(n,e),n.F_.size===0&&(i.Xo()?i.n_():Is(n)&&n.N_.set("Unknown"))}function pC(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}au(t).P_(e)}function U1(t,e){t.L_.xe(e),au(t).I_(e)}function mC(t){t.L_=new Ow({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),au(t).start(),t.N_.w_()}function gC(t){return Is(t)&&!au(t).Zo()&&t.F_.size>0}function Is(t){return oe(t).M_.size===0}function H1(t){t.L_=void 0}function A4(t){return U(this,null,function*(){t.N_.set("Online")})}function M4(t){return U(this,null,function*(){t.F_.forEach((e,n)=>{pC(t,e)})})}function P4(t,e){return U(this,null,function*(){H1(t),gC(t)?(t.N_.D_(e),mC(t)):t.N_.set("Unknown")})}function k4(t,e,n){return U(this,null,function*(){if(t.N_.set("Online"),e instanceof Eg&&e.state===2&&e.cause)try{yield function(r,o){return U(this,null,function*(){let a=o.cause;for(let c of o.targetIds)r.F_.has(c)&&(yield r.remoteSyncer.rejectListen(c,a),r.F_.delete(c),r.L_.removeTarget(c))})}(t,e)}catch(i){Y("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield $g(t,i)}else if(e instanceof Bl?t.L_.Ke(e):e instanceof Cg?t.L_.He(e):t.L_.We(e),!n.isEqual(ve.min()))try{let i=yield L1(t.localStore);n.compareTo(i)>=0&&(yield function(o,a){let c=o.L_.rt(a);return c.targetChanges.forEach((u,f)=>{if(u.resumeToken.approximateByteSize()>0){let p=o.F_.get(f);p&&o.F_.set(f,p.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,f)=>{let p=o.F_.get(u);if(!p)return;o.F_.set(u,p.withResumeToken(yn.EMPTY_BYTE_STRING,p.snapshotVersion)),U1(o,u);let _=new Wl(p.target,u,f,p.sequenceNumber);pC(o,_)}),o.remoteSyncer.applyRemoteEvent(c)}(t,n))}catch(i){Y("RemoteStore","Failed to raise snapshot:",i),yield $g(t,i)}})}function $g(t,e,n){return U(this,null,function*(){if(!ws(e))throw e;t.M_.add(1),yield ou(t),t.N_.set("Offline"),n||(n=()=>L1(t.localStore)),t.asyncQueue.enqueueRetryable(()=>U(this,null,function*(){Y("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield qh(t)}))})}function $1(t,e){return e().catch(n=>$g(t,n,e))}function su(t){return U(this,null,function*(){let e=oe(t),n=ys(e),i=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;R4(e);)try{let r=yield x4(e.localStore,i);if(r===null){e.v_.length===0&&n.n_();break}i=r.batchId,N4(e,r)}catch(r){yield $g(e,r)}q1(e)&&G1(e)})}function R4(t){return Is(t)&&t.v_.length<10}function N4(t,e){t.v_.push(e);let n=ys(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function q1(t){return Is(t)&&!ys(t).Zo()&&t.v_.length>0}function G1(t){ys(t).start()}function O4(t){return U(this,null,function*(){ys(t).V_()})}function L4(t){return U(this,null,function*(){let e=ys(t);for(let n of t.v_)e.d_(n.mutations)})}function F4(t,e,n){return U(this,null,function*(){let i=t.v_.shift(),r=kw.from(i,e,n);yield $1(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),yield su(t)})}function V4(t,e){return U(this,null,function*(){e&&ys(t).E_&&(yield function(i,r){return U(this,null,function*(){if(function(a){return h1(a)&&a!==H.ABORTED}(r.code)){let o=i.v_.shift();ys(i).t_(),yield $1(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),yield su(i)}})}(t,e)),q1(t)&&G1(t)})}function vP(t,e){return U(this,null,function*(){let n=oe(t);n.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");let i=Is(n);n.M_.add(3),yield ou(n),i&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield qh(n)})}function xI(t,e){return U(this,null,function*(){let n=oe(t);e?(n.M_.delete(2),yield qh(n)):e||(n.M_.add(2),yield ou(n),n.N_.set("Unknown"))})}function au(t){return t.B_||(t.B_=function(n,i,r){let o=oe(n);return o.f_(),new bI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:A4.bind(null,t),To:M4.bind(null,t),Ao:P4.bind(null,t),h_:k4.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.B_.t_(),gC(t)?mC(t):t.N_.set("Unknown")):(yield t.B_.stop(),H1(t))}))),t.B_}function ys(t){return t.k_||(t.k_=function(n,i,r){let o=oe(n);return o.f_(),new wI(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:O4.bind(null,t),Ao:V4.bind(null,t),R_:L4.bind(null,t),A_:F4.bind(null,t)}),t.x_.push(e=>U(this,null,function*(){e?(t.k_.t_(),yield su(t)):(yield t.k_.stop(),t.v_.length>0&&(Y("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var DI=class t{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){let a=Date.now()+i,c=new t(e,n,a,r,o);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(H.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cu(t,e){if(Jt("AsyncQueue",`${e}: ${t}`),ws(t))return new K(H.UNAVAILABLE,`${e}: ${t}`);throw t}var qg=class t{constructor(e){this.comparator=e?(n,i)=>e(n,i)||re.comparator(n.key,i.key):(n,i)=>re.comparator(n.key,i.key),this.keyedMap=dh(),this.sortedSet=new Lt(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){let r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let i=new t;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}};var Gg=class{constructor(){this.q_=new Lt(re.comparator)}track(e){let n=e.doc.key,i=this.q_.get(n);i?e.type!==0&&i.type===3?this.q_=this.q_.insert(n,e):e.type===3&&i.type!==1?this.q_=this.q_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.q_=this.q_.remove(n):e.type===1&&i.type===2?this.q_=this.q_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):ue():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,i)=>{e.push(i)}),e}},Xl=class t{constructor(e,n,i,r,o,a,c,u,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){let a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new t(e,n,qg.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}};var TI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},SI=class{constructor(){this.queries=new Br(e=>YP(e),Uh),this.onlineState="Unknown",this.z_=new Set}};function _C(t,e){return U(this,null,function*(){let n=oe(t),i=3,r=e.query,o=n.queries.get(r);o?!o.W_()&&e.G_()&&(i=2):(o=new TI,i=e.G_()?0:1);try{switch(i){case 0:o.K_=yield n.onListen(r,!0);break;case 1:o.K_=yield n.onListen(r,!1);break;case 2:yield n.onFirstRemoteStoreListen(r)}}catch(a){let c=cu(a,`Initialization of query '${kl(e.query)}' failed`);return void e.onError(c)}n.queries.set(r,o),o.U_.push(e),e.j_(n.onlineState),o.K_&&e.H_(o.K_)&&yC(n)})}function vC(t,e){return U(this,null,function*(){let n=oe(t),i=e.query,r=3,o=n.queries.get(i);if(o){let a=o.U_.indexOf(e);a>=0&&(o.U_.splice(a,1),o.U_.length===0?r=e.G_()?0:1:!o.W_()&&e.G_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}})}function B4(t,e){let n=oe(t),i=!1;for(let r of e){let o=r.query,a=n.queries.get(o);if(a){for(let c of a.U_)c.H_(r)&&(i=!0);a.K_=r}}i&&yC(n)}function j4(t,e,n){let i=oe(t),r=i.queries.get(e);if(r)for(let o of r.U_)o.onError(n);i.queries.delete(e)}function yC(t){t.z_.forEach(e=>{e.next()})}var AI,yP;(yP=AI||(AI={})).J_="default",yP.Cache="cache";var Oh=class{constructor(e,n,i){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=i||{}}H_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Xl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let i=n!=="Offline";return(!this.options.ra||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==AI.Cache}};var MI=class{constructor(e,n){this.ia=e,this.byteLength=n}sa(){return"metadata"in this.ia}};var Wg=class{constructor(e){this.serializer=e}Ps(e){return Or(this.serializer,e)}Is(e){return e.metadata.exists?b1(this.serializer,e.document,!1):ln.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return tn(e)}},PI=class{constructor(e,n,i){this.oa=e,this.localStore=n,this.serializer=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=W1(e)}_a(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ia.namedQuery)this.queries.push(e.ia.namedQuery);else if(e.ia.documentMetadata){this.documents.push({metadata:e.ia.documentMetadata}),e.ia.documentMetadata.exists||++n;let i=ot.fromString(e.ia.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ia.document&&(this.documents[this.documents.length-1].document=e.ia.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}aa(e){let n=new Map,i=new Wg(this.serializer);for(let r of e)if(r.metadata.queries){let o=i.Ps(r.metadata.name);for(let a of r.metadata.queries){let c=(n.get(a)||je()).add(o);n.set(a,c)}}return n}complete(){return U(this,null,function*(){let e=yield D4(this.localStore,new Wg(this.serializer),this.documents,this.oa.id),n=this.aa(this.documents);for(let i of this.queries)yield T4(this.localStore,i,n.get(i.name));return this.progress.taskState="Success",{progress:this.progress,ua:this.collectionGroups,ca:e}})}};function W1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Zg=class{constructor(e){this.key=e}},Kg=class{constructor(e){this.key=e}},Qg=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=je(),this.mutatedKeys=je(),this.Ia=JP(e),this.Ta=new qg(this.Ia)}get Ea(){return this.la}da(e,n){let i=n?n.Aa:new Gg,r=n?n.Ta:this.Ta,o=n?n.mutatedKeys:this.mutatedKeys,a=r,c=!1,u=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((p,_)=>{let b=r.get(p),I=Hh(this.query,_)?_:null,M=!!b&&this.mutatedKeys.has(b.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations),F=!1;b&&I?b.data.isEqual(I.data)?M!==P&&(i.track({type:3,doc:I}),F=!0):this.Ra(b,I)||(i.track({type:2,doc:I}),F=!0,(u&&this.Ia(I,u)>0||f&&this.Ia(I,f)<0)&&(c=!0)):!b&&I?(i.track({type:0,doc:I}),F=!0):b&&!I&&(i.track({type:1,doc:b}),F=!0,(u||f)&&(c=!0)),F&&(I?(a=a.add(I),o=P?o.add(p):o.delete(p)):(a=a.delete(p),o=o.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),o=o.delete(p.key),i.track({type:1,doc:p})}return{Ta:a,Aa:i,Xi:c,mutatedKeys:o}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){let o=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let a=e.Aa.Q_();a.sort((p,_)=>function(I,M){let P=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return P(I)-P(M)}(p.type,_.type)||this.Ia(p.doc,_.doc)),this.Va(i),r=r!=null&&r;let c=n&&!r?this.ma():[],u=this.Pa.size===0&&this.current&&!r?1:0,f=u!==this.ha;return this.ha=u,a.length!==0||f?{snapshot:new Xl(this.query,e.Ta,o,a,e.mutatedKeys,u===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),fa:c}:{fa:c}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Gg,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=je(),this.Ta.forEach(i=>{this.ga(i.key)&&(this.Pa=this.Pa.add(i.key))});let n=[];return e.forEach(i=>{this.Pa.has(i)||n.push(new Kg(i))}),this.Pa.forEach(i=>{e.has(i)||n.push(new Zg(i))}),n}pa(e){this.la=e.hs,this.Pa=je();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Xl.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},kI=class{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}},RI=class{constructor(e){this.key=e,this.wa=!1}},NI=class{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Sa={},this.ba=new Br(c=>YP(c),Uh),this.Da=new Map,this.Ca=new Set,this.va=new Lt(re.comparator),this.Fa=new Map,this.Ma=new kh,this.xa={},this.Oa=new Map,this.Na=Zl.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function z4(t,e,n=!0){return U(this,null,function*(){let i=l_(t),r,o=i.ba.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.ya()):r=yield Z1(i,e,n,!0),r})}function U4(t,e){return U(this,null,function*(){let n=l_(t);yield Z1(n,e,!0,!1)})}function Z1(t,e,n,i){return U(this,null,function*(){let r=yield Kl(t.localStore,Hn(e)),o=r.targetId,a=n?t.sharedClientState.addLocalQueryTarget(o):"not-current",c;return i&&(c=yield bC(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&c_(t.remoteStore,r),c})}function bC(t,e,n,i,r){return U(this,null,function*(){t.Ba=(_,b,I)=>function(P,F,W,X){return U(this,null,function*(){let Z=F.view.da(W);Z.Xi&&(Z=yield Vg(P.localStore,F.query,!1).then(({documents:S})=>F.view.da(S,Z)));let se=X&&X.targetChanges.get(F.targetId),pe=X&&X.targetMismatches.get(F.targetId)!=null,he=F.view.applyChanges(Z,P.isPrimaryClient,se,pe);return OI(P,F.targetId,he.fa),he.snapshot})}(t,_,b,I);let o=yield Vg(t.localStore,e,!0),a=new Qg(e,o.hs),c=a.da(o.documents),u=Sh.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(c,t.isPrimaryClient,u);OI(t,n,f.fa);let p=new kI(e,n,a);return t.ba.set(e,p),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),f.snapshot})}function H4(t,e,n){return U(this,null,function*(){let i=oe(t),r=i.ba.get(e),o=i.Da.get(r.targetId);if(o.length>1)return i.Da.set(r.targetId,o.filter(a=>!Uh(a,e))),void i.ba.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ql(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Yl(i.remoteStore,r.targetId),Jl(i,r.targetId)}).catch(bs))):(Jl(i,r.targetId),yield Ql(i.localStore,r.targetId,!0))})}function $4(t,e){return U(this,null,function*(){let n=oe(t),i=n.ba.get(e),r=n.Da.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Yl(n.remoteStore,i.targetId))})}function q4(t,e,n){return U(this,null,function*(){let i=EC(t);try{let r=yield function(a,c){let u=oe(a),f=qt.now(),p=c.reduce((I,M)=>I.add(M.key),je()),_,b;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let M=ni(),P=je();return u.os.getEntries(I,p).next(F=>{M=F,M.forEach((W,X)=>{X.isValidDocument()||(P=P.add(W))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,M)).next(F=>{_=F;let W=[];for(let X of c){let Z=o4(X,_.get(X.key).overlayedDocument);Z!=null&&W.push(new ir(X.key,Z,$P(Z.value.mapValue),Zt.exists(!0)))}return u.mutationQueue.addMutationBatch(I,f,W,c)}).next(F=>{b=F;let W=F.applyToLocalDocumentSet(_,P);return u.documentOverlayCache.saveOverlays(I,F.batchId,W)})}).then(()=>({batchId:b.batchId,changes:t1(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,c,u){let f=a.xa[a.currentUser.toKey()];f||(f=new Lt(Ve)),f=f.insert(c,u),a.xa[a.currentUser.toKey()]=f}(i,r.batchId,n),yield wo(i,r.changes),yield su(i.remoteStore)}catch(r){let o=cu(r,"Failed to persist write");n.reject(o)}})}function K1(t,e){return U(this,null,function*(){let n=oe(t);try{let i=yield E4(n.localStore,e);e.targetChanges.forEach((r,o)=>{let a=n.Fa.get(o);a&&(me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.wa=!0:r.modifiedDocuments.size>0?me(a.wa):r.removedDocuments.size>0&&(me(a.wa),a.wa=!1))}),yield wo(n,i,e)}catch(i){yield bs(i)}})}function bP(t,e,n){let i=oe(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){let r=[];i.ba.forEach((o,a)=>{let c=a.view.j_(e);c.snapshot&&r.push(c.snapshot)}),function(a,c){let u=oe(a);u.onlineState=c;let f=!1;u.queries.forEach((p,_)=>{for(let b of _.U_)b.j_(c)&&(f=!0)}),f&&yC(u)}(i.eventManager,e),r.length&&i.Sa.h_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function G4(t,e,n){return U(this,null,function*(){let i=oe(t);i.sharedClientState.updateQueryState(e,"rejected",n);let r=i.Fa.get(e),o=r&&r.key;if(o){let a=new Lt(re.comparator);a=a.insert(o,ln.newNoDocument(o,ve.min()));let c=je().add(o),u=new Th(ve.min(),new Map,new Lt(Ve),a,c);yield K1(i,u),i.va=i.va.remove(o),i.Fa.delete(e),CC(i)}else yield Ql(i.localStore,e,!1).then(()=>Jl(i,e,n)).catch(bs)})}function W4(t,e){return U(this,null,function*(){let n=oe(t),i=e.batch.batchId;try{let r=yield C4(n.localStore,e);IC(n,i,null),wC(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),yield wo(n,r)}catch(r){yield bs(r)}})}function Z4(t,e,n){return U(this,null,function*(){let i=oe(t);try{let r=yield function(a,c){let u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let p;return u.mutationQueue.lookupMutationBatch(f,c).next(_=>(me(_!==null),p=_.keys(),u.mutationQueue.removeMutationBatch(f,_))).next(()=>u.mutationQueue.performConsistencyCheck(f)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(f,p,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p)).next(()=>u.localDocuments.getDocuments(f,p))})}(i.localStore,e);IC(i,e,n),wC(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),yield wo(i,r)}catch(r){yield bs(r)}})}function K4(t,e){return U(this,null,function*(){let n=oe(t);Is(n.remoteStore)||Y("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let i=yield function(a){let c=oe(a);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>c.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(i===-1)return void e.resolve();let r=n.Oa.get(i)||[];r.push(e),n.Oa.set(i,r)}catch(i){let r=cu(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}})}function wC(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function IC(t,e,n){let i=oe(t),r=i.xa[i.currentUser.toKey()];if(r){let o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.xa[i.currentUser.toKey()]=r}}function Jl(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let i of t.Da.get(e))t.ba.delete(i),n&&t.Sa.ka(i,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(i=>{t.Ma.containsKey(i)||Q1(t,i)})}function Q1(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Yl(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),CC(t))}function OI(t,e,n){for(let i of n)i instanceof Zg?(t.Ma.addReference(i.key,e),Q4(t,i)):i instanceof Kg?(Y("SyncEngine","Document no longer in limbo: "+i.key),t.Ma.removeReference(i.key,e),t.Ma.containsKey(i.key)||Q1(t,i.key)):ue()}function Q4(t,e){let n=e.key,i=n.path.canonicalString();t.va.get(n)||t.Ca.has(i)||(Y("SyncEngine","New document in limbo: "+n),t.Ca.add(i),CC(t))}function CC(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new re(ot.fromString(e)),i=t.Na.next();t.Fa.set(i,new RI(n)),t.va=t.va.insert(n,i),c_(t.remoteStore,new Wl(Hn(ru(n.path)),i,"TargetPurposeLimboResolution",fi.oe))}}function wo(t,e,n){return U(this,null,function*(){let i=oe(t),r=[],o=[],a=[];i.ba.isEmpty()||(i.ba.forEach((c,u)=>{a.push(i.Ba(u,e,n).then(f=>{if((f||n)&&i.isPrimaryClient){let p=f&&!f.fromCache;i.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(f){r.push(f);let p=fI.Ki(u.targetId,f);o.push(p)}}))}),yield Promise.all(a),i.Sa.h_(r),yield function(u,f){return U(this,null,function*(){let p=oe(u);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>B.forEach(f,b=>B.forEach(b.qi,I=>p.persistence.referenceDelegate.addReference(_,b.targetId,I)).next(()=>B.forEach(b.Qi,I=>p.persistence.referenceDelegate.removeReference(_,b.targetId,I)))))}catch(_){if(!ws(_))throw _;Y("LocalStore","Failed to update sequence numbers: "+_)}for(let _ of f){let b=_.targetId;if(!_.fromCache){let I=p.ns.get(b),M=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(M);p.ns=p.ns.insert(b,P)}}})}(i.localStore,o))})}function Y4(t,e){return U(this,null,function*(){let n=oe(t);if(!n.currentUser.isEqual(e)){Y("SyncEngine","User change. New user:",e.toKey());let i=yield O1(n.localStore,e);n.currentUser=e,function(o,a){o.Oa.forEach(c=>{c.forEach(u=>{u.reject(new K(H.CANCELLED,a))})}),o.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield wo(n,i.us)}})}function X4(t,e){let n=oe(t),i=n.Fa.get(e);if(i&&i.wa)return je().add(i.key);{let r=je(),o=n.Da.get(e);if(!o)return r;for(let a of o){let c=n.ba.get(a);r=r.unionWith(c.view.Ea)}return r}}function J4(t,e){return U(this,null,function*(){let n=oe(t),i=yield Vg(n.localStore,e.query,!0),r=e.view.pa(i);return n.isPrimaryClient&&OI(n,e.targetId,r.fa),r})}function eH(t,e){return U(this,null,function*(){let n=oe(t);return B1(n.localStore,e).then(i=>wo(n,i))})}function tH(t,e,n,i){return U(this,null,function*(){let r=oe(t),o=yield function(c,u){let f=oe(c),p=oe(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",_=>p.vn(_,u).next(b=>b?f.localDocuments.getDocuments(_,b):B.resolve(null)))}(r.localStore,e);o!==null?(n==="pending"?yield su(r.remoteStore):n==="acknowledged"||n==="rejected"?(IC(r,e,i||null),wC(r,e),function(c,u){oe(oe(c).mutationQueue).Mn(u)}(r.localStore,e)):ue(),yield wo(r,o)):Y("SyncEngine","Cannot apply mutation batch with id: "+e)})}function nH(t,e){return U(this,null,function*(){let n=oe(t);if(l_(n),EC(n),e===!0&&n.La!==!0){let i=n.sharedClientState.getAllActiveQueryTargets(),r=yield wP(n,i.toArray());n.La=!0,yield xI(n.remoteStore,!0);for(let o of r)c_(n.remoteStore,o)}else if(e===!1&&n.La!==!1){let i=[],r=Promise.resolve();n.Da.forEach((o,a)=>{n.sharedClientState.isLocalQueryTarget(a)?i.push(a):r=r.then(()=>(Jl(n,a),Ql(n.localStore,a,!0))),Yl(n.remoteStore,a)}),yield r,yield wP(n,i),function(a){let c=oe(a);c.Fa.forEach((u,f)=>{Yl(c.remoteStore,f)}),c.Ma.mr(),c.Fa=new Map,c.va=new Lt(re.comparator)}(n),n.La=!1,yield xI(n.remoteStore,!1)}})}function wP(t,e,n){return U(this,null,function*(){let i=oe(t),r=[],o=[];for(let a of e){let c,u=i.Da.get(a);if(u&&u.length!==0){c=yield Kl(i.localStore,Hn(u[0]));for(let f of u){let p=i.ba.get(f),_=yield J4(i,p);_.snapshot&&o.push(_.snapshot)}}else{let f=yield V1(i.localStore,a);c=yield Kl(i.localStore,f),yield bC(i,Y1(f),a,!1,c.resumeToken)}r.push(c)}return i.Sa.h_(o),r})}function Y1(t){return QP(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function iH(t){return function(n){return oe(oe(n).persistence).Bi()}(oe(t).localStore)}function rH(t,e,n,i){return U(this,null,function*(){let r=oe(t);if(r.La)return void Y("SyncEngine","Ignoring unexpected query state notification.");let o=r.Da.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{let a=yield B1(r.localStore,XP(o[0])),c=Th.createSynthesizedRemoteEventForCurrentChange(e,n==="current",yn.EMPTY_BYTE_STRING);yield wo(r,a,c);break}case"rejected":yield Ql(r.localStore,e,!0),Jl(r,e,i);break;default:ue()}})}function oH(t,e,n){return U(this,null,function*(){let i=l_(t);if(i.La){for(let r of e){if(i.Da.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){Y("SyncEngine","Adding an already active target "+r);continue}let o=yield V1(i.localStore,r),a=yield Kl(i.localStore,o);yield bC(i,Y1(o),a.targetId,!1,a.resumeToken),c_(i.remoteStore,a)}for(let r of n)i.Da.has(r)&&(yield Ql(i.localStore,r,!1).then(()=>{Yl(i.remoteStore,r),Jl(i,r)}).catch(bs))}})}function l_(t){let e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=K1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=G4.bind(null,e),e.Sa.h_=B4.bind(null,e.eventManager),e.Sa.ka=j4.bind(null,e.eventManager),e}function EC(t){let e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Z4.bind(null,e),e}function sH(t,e,n){let i=oe(t);(function(o,a,c){return U(this,null,function*(){try{let u=yield a.getMetadata();if(yield function(I,M){let P=oe(I),F=tn(M.createTime);return P.persistence.runTransaction("hasNewerBundle","readonly",W=>P.$r.getBundleMetadata(W,M.id)).then(W=>!!W&&W.createTime.compareTo(F)>=0)}(o.localStore,u))return yield a.close(),c._completeWith(function(I){return{taskState:"Success",documentsLoaded:I.totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}}(u)),Promise.resolve(new Set);c._updateProgress(W1(u));let f=new PI(u,o.localStore,a.serializer),p=yield a.qa();for(;p;){let b=yield f._a(p);b&&c._updateProgress(b),p=yield a.qa()}let _=yield f.complete();return yield wo(o,_.ca,void 0),yield function(I,M){let P=oe(I);return P.persistence.runTransaction("Save bundle","readwrite",F=>P.$r.saveBundleMetadata(F,M))}(o.localStore,u),c._completeWith(_.progress),Promise.resolve(_.ua)}catch(u){return Li("SyncEngine",`Loading bundle failed with ${u}`),c._failWith(u),Promise.resolve(new Set)}})})(i,e,n).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}var Lh=class{constructor(){this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){this.serializer=$h(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return N1(this.persistence,new Fg,e.initialUser,this.serializer)}createPersistence(e){return new Og(Lg.Hr,this.serializer)}createSharedClientState(e){return new zg}terminate(){return U(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Yg=class t extends Lh{constructor(e,n,i){super(),this.Qa=e,this.cacheSizeBytes=n,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){return U(this,null,function*(){yield P_(t.prototype,this,"initialize").call(this,e),yield this.Qa.initialize(this,e),yield EC(this.Qa.syncEngine),yield su(this.Qa.remoteStore),yield this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(e){return N1(this.persistence,new Fg,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){let i=this.persistence.referenceDelegate.garbageCollector;return new Xw(i,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){let i=new gw(n,this.persistence);return new mw(e.asyncQueue,i)}createPersistence(e){let n=fC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Oi.withCacheSize(this.cacheSizeBytes):Oi.DEFAULT;return new hI(this.synchronizeTabs,n,e.clientId,i,e.asyncQueue,z1(),lg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new zg}},LI=class t extends Yg{constructor(e,n){super(e,n,!1),this.Qa=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){return U(this,null,function*(){yield P_(t.prototype,this,"initialize").call(this,e);let n=this.Qa.syncEngine;this.sharedClientState instanceof _h&&(this.sharedClientState.syncEngine={Zs:tH.bind(null,n),Xs:rH.bind(null,n),eo:oH.bind(null,n),Bi:iH.bind(null,n),Ys:eH.bind(null,n)},yield this.sharedClientState.start()),yield this.persistence.fi(i=>U(this,null,function*(){yield nH(this.Qa.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(e){let n=z1();if(!_h.D(n))throw new K(H.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let i=fC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _h(n,e.asyncQueue,i,e.clientId,e.initialUser)}},Fh=class{initialize(e,n){return U(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Y4.bind(null,this.syncEngine),yield xI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new SI}()}createDatastore(e){let n=$h(e.databaseInfo.databaseId),i=function(o){return new yI(o)}(e.databaseInfo);return function(o,a,c,u){return new II(o,a,c,u)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,c){return new EI(i,r,o,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>bP(this.syncEngine,n,0),function(){return Ug.D()?new Ug:new _I}())}createSyncEngine(e,n){return function(r,o,a,c,u,f,p){let _=new NI(r,o,a,c,u,f);return p&&(_.La=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return U(this,null,function*(){var e;yield function(i){return U(this,null,function*(){let r=oe(i);Y("RemoteStore","RemoteStore shutting down."),r.M_.add(5),yield ou(r),r.O_.shutdown(),r.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};function IP(t,e=10240){let n=0;return{read(){return U(this,null,function*(){if(n<t.byteLength){let r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}})},cancel(){return U(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var eu=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Jt("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var FI=class{constructor(e,n){this.Ua=e,this.serializer=n,this.metadata=new cn,this.buffer=new Uint8Array,this.Wa=function(){return new TextDecoder("utf-8")}(),this.Ga().then(i=>{i&&i.sa()?this.metadata.resolve(i.ia.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.ia)}`))},i=>this.metadata.reject(i))}close(){return this.Ua.cancel()}getMetadata(){return U(this,null,function*(){return this.metadata.promise})}qa(){return U(this,null,function*(){return yield this.getMetadata(),this.Ga()})}Ga(){return U(this,null,function*(){let e=yield this.za();if(e===null)return null;let n=this.Wa.decode(e),i=Number(n);isNaN(i)&&this.ja(`length string (${n}) is not valid number`);let r=yield this.Ha(i);return new MI(JSON.parse(r),e.length+i)})}Ja(){return this.buffer.findIndex(e=>e===123)}za(){return U(this,null,function*(){for(;this.Ja()<0&&!(yield this.Ya()););if(this.buffer.length===0)return null;let e=this.Ja();e<0&&this.ja("Reached the end of bundle when a length string is expected.");let n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n})}Ha(e){return U(this,null,function*(){for(;this.buffer.length<e;)(yield this.Ya())&&this.ja("Reached the end of bundle when more is expected.");let n=this.Wa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n})}ja(e){throw this.Ua.cancel(),new Error(`Invalid bundle format: ${e}`)}Ya(){return U(this,null,function*(){let e=yield this.Ua.read();if(!e.done){let n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done})}};var VI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new K(H.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let n=yield function(r,o){return U(this,null,function*(){let a=oe(r),c={documents:o.map(_=>Ah(a.serializer,_))},u=yield a.xo("BatchGetDocuments",a.serializer.databaseId,ot.emptyPath(),c,o.length),f=new Map;u.forEach(_=>{let b=d4(a.serializer,_);f.set(b.key.toString(),b)});let p=[];return o.forEach(_=>{let b=f.get(_.toString());me(!!b),p.push(b)}),p})}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n})}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new vs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return U(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{let r=re.fromPath(i);this.mutations.push(new Eh(r,this.precondition(r)))}),yield function(i,r){return U(this,null,function*(){let o=oe(i),a={writes:r.map(c=>Mh(o.serializer,c))};yield o.Co("Commit",o.serializer.databaseId,ot.emptyPath(),a)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw ue();n=ve.min()}let i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new K(H.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){let n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(ve.min())?Zt.exists(!1):Zt.updateTime(n):Zt.none()}preconditionForUpdate(e){let n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(ve.min()))throw new K(H.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zt.updateTime(n)}return Zt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var BI=class{constructor(e,n,i,r,o){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=r,this.deferred=o,this.Za=i.maxAttempts,this.Yo=new Nh(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){this.Yo.$o(()=>U(this,null,function*(){let e=new VI(this.datastore),n=this.tu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(r=>{this.nu(r)}))}).catch(i=>{this.nu(i)})}))}tu(e){try{let n=this.updateFunction(e);return!jh(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if(e.name==="FirebaseError"){let n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!h1(n)}return!1}};var jI=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=an.UNAUTHENTICATED,this.clientId=hg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,o=>U(this,null,function*(){Y("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,o=>(Y("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new K(H.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=cu(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function ug(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(r=>U(this,null,function*(){i.isEqual(r)||(yield O1(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function zI(t,e){return U(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield xC(t);Y("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>vP(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>vP(e.remoteStore,r)),t._onlineComponents=e})}function X1(t){return t.name==="FirebaseError"?t.code===H.FAILED_PRECONDITION||t.code===H.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function xC(t){return U(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ug(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!X1(n))throw n;Li("Error using user provided cache. Falling back to memory cache: "+n),yield ug(t,new Lh)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),yield ug(t,new Lh);return t._offlineComponents})}function u_(t){return U(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),yield zI(t,t._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),yield zI(t,new Fh))),t._onlineComponents})}function J1(t){return xC(t).then(e=>e.persistence)}function DC(t){return xC(t).then(e=>e.localStore)}function ek(t){return u_(t).then(e=>e.remoteStore)}function TC(t){return u_(t).then(e=>e.syncEngine)}function aH(t){return u_(t).then(e=>e.datastore)}function tu(t){return U(this,null,function*(){let e=yield u_(t),n=e.eventManager;return n.onListen=z4.bind(null,e.syncEngine),n.onUnlisten=H4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=U4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$4.bind(null,e.syncEngine),n})}function cH(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield J1(t),n=yield ek(t);return e.setNetworkEnabled(!0),function(r){let o=oe(r);return o.M_.delete(0),qh(o)}(n)}))}function lH(t){return t.asyncQueue.enqueue(()=>U(this,null,function*(){let e=yield J1(t),n=yield ek(t);return e.setNetworkEnabled(!1),function(r){return U(this,null,function*(){let o=oe(r);o.M_.add(0),yield ou(o),o.N_.set("Offline")})}(n)}))}function uH(t,e){let n=new cn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield function(f,p){let _=oe(f);return _.persistence.runTransaction("read document","readonly",b=>_.localDocuments.getDocument(b,p))}(r,o);c.isFoundDocument()?a.resolve(c):c.isNoDocument()?a.resolve(null):a.reject(new K(H.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(c){let u=cu(c,`Failed to get document '${o} from cache`);a.reject(u)}})}(yield DC(t),e,n)})),n.promise}function tk(t,e,n={}){let i=new cn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let p=new eu({next:b=>{a.enqueueAndForget(()=>vC(o,_));let I=b.docs.has(c);!I&&b.fromCache?f.reject(new K(H.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&u&&u.source==="server"?f.reject(new K(H.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(b)},error:b=>f.reject(b)}),_=new Oh(ru(c.path),p,{includeMetadataChanges:!0,ra:!0});return _C(o,_)}(yield tu(t),t.asyncQueue,e,n,i)})),i.promise}function dH(t,e){let n=new cn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o,a){return U(this,null,function*(){try{let c=yield Vg(r,o,!0),u=new Qg(o,c.hs),f=u.da(c.documents),p=u.applyChanges(f,!1);a.resolve(p.snapshot)}catch(c){let u=cu(c,`Failed to execute query '${o} against cache`);a.reject(u)}})}(yield DC(t),e,n)})),n.promise}function nk(t,e,n={}){let i=new cn;return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(o,a,c,u,f){let p=new eu({next:b=>{a.enqueueAndForget(()=>vC(o,_)),b.fromCache&&u.source==="server"?f.reject(new K(H.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(b)},error:b=>f.reject(b)}),_=new Oh(c,p,{includeMetadataChanges:!0,ra:!0});return _C(o,_)}(yield tu(t),t.asyncQueue,e,n,i)})),i.promise}function hH(t,e){let n=new eu(e);return t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){oe(r).z_.add(o),o.next()}(yield tu(t),n)})),()=>{n.$a(),t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return function(r,o){oe(r).z_.delete(o)}(yield tu(t),n)}))}}function fH(t,e,n,i){let r=function(a,c){let u;return u=typeof a=="string"?p1().encode(a):a,function(p,_){return new FI(p,_)}(function(p,_){if(p instanceof Uint8Array)return IP(p,_);if(p instanceof ArrayBuffer)return IP(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),c)}(n,$h(e));t.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){sH(yield TC(t),r,i)}))}function pH(t,e){return t.asyncQueue.enqueue(()=>U(this,null,function*(){return function(i,r){let o=oe(i);return o.persistence.runTransaction("Get named query","readonly",a=>o.$r.getNamedQuery(a,r))}(yield DC(t),e)}))}function ik(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var CP=new Map;function SC(t,e,n){if(!n)throw new K(H.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function AC(t,e,n,i){if(e===!0&&i===!0)throw new K(H.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function EP(t){if(!re.isDocumentKey(t))throw new K(H.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xP(t){if(re.isDocumentKey(t))throw new K(H.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function d_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function st(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(H.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=d_(t);throw new K(H.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function rk(t,e){if(e<=0)throw new K(H.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}var Xg=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new K(H.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(H.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ik((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new K(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new K(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new K(H.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Va=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new K(H.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new K(H.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xg(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new ow;switch(i.type){case"firstParty":return new lw(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new K(H.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=CP.get(n);i&&(Y("ComponentProvider","Removing Datastore"),CP.delete(n),i.terminate())}(this),Promise.resolve()}};function ok(t,e,n,i={}){var r;let o=(t=st(t,Va))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Li("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=an.MOCK_USER;else{c=IE(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new K(H.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new an(f)}t._authCredentials=new sw(new dg(c,u))}}var Tn=class t{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Rt=class t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Lr=class t extends Tn{constructor(e,n,i){super(e,n,ru(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new re(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function MC(t,e,...n){if(t=Ht(t),SC("collection","path",e),t instanceof Va){let i=ot.fromString(e,...n);return xP(i),new Lr(t,null,i)}{if(!(t instanceof Rt||t instanceof Lr))throw new K(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ot.fromString(e,...n));return xP(i),new Lr(t.firestore,null,i)}}function sk(t,e){if(t=st(t,Va),SC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new K(H.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Tn(t,null,function(i){return new nr(ot.emptyPath(),i)}(e))}function Gh(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=hg.newId()),SC("doc","path",e),t instanceof Va){let i=ot.fromString(e,...n);return EP(i),new Rt(t,null,new re(i))}{if(!(t instanceof Rt||t instanceof Lr))throw new K(H.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=t._path.child(ot.fromString(e,...n));return EP(i),new Rt(t.firestore,t instanceof Lr?t.converter:null,new re(i))}}function PC(t,e){return t=Ht(t),e=Ht(e),(t instanceof Rt||t instanceof Lr)&&(e instanceof Rt||e instanceof Lr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function kC(t,e){return t=Ht(t),e=Ht(e),t instanceof Tn&&e instanceof Tn&&t.firestore===e.firestore&&Uh(t._query,e._query)&&t.converter===e.converter}var UI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Nh(this,"async_queue_retry"),this.hu=()=>{let n=lg();n&&Y("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=lg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=lg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new cn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return U(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!ws(e))throw e;Y("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(i=>{this.au=i,this.uu=!1;let r=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(i);throw Jt("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.uu=!1,i))));return this.iu=n,n}enqueueAfterDelay(e,n,i){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let r=DI.createAndSchedule(this,e,n,i,o=>this.Eu(o));return this._u.push(r),r}Pu(){this.au&&ue()}verifyOperationInProgress(){}du(){return U(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function HI(t){return function(n,i){if(typeof n!="object"||n===null)return!1;let r=n;for(let o of i)if(o in r&&typeof r[o]=="function")return!0;return!1}(t,["next","error","complete"])}var $I=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new cn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,i){this._progressObserver={next:e,error:n,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var ak=-1,Bt=class extends Va{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new UI}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ck(this),this._firestoreClient.terminate()}};function fn(t){return t._firestoreClient||ck(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function ck(t){var e,n,i;let r=t._freezeSettings(),o=function(c,u,f,p){return new _w(c,u,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,ik(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new jI(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function lk(t,e){vk(t=st(t,Bt));let n=fn(t);if(n._uninitializedComponentsProvider)throw new K(H.FAILED_PRECONDITION,"SDK cache is already specified.");Li("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let i=t._freezeSettings(),r=new Fh;return dk(n,r,new Yg(r,i.cacheSizeBytes,e?.forceOwnership))}function uk(t){vk(t=st(t,Bt));let e=fn(t);if(e._uninitializedComponentsProvider)throw new K(H.FAILED_PRECONDITION,"SDK cache is already specified.");Li("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let n=t._freezeSettings(),i=new Fh;return dk(e,i,new LI(i,n.cacheSizeBytes))}function dk(t,e,n){let i=new cn;return t.asyncQueue.enqueue(()=>U(this,null,function*(){try{yield ug(t,n),yield zI(t,e),i.resolve()}catch(r){let o=r;if(!X1(o))throw o;Li("Error enabling indexeddb cache. Falling back to memory cache: "+o),i.reject(o)}})).then(()=>i.promise)}function hk(t){if(t._initialized&&!t._terminated)throw new K(H.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new cn;return t._queue.enqueueAndForgetEvenWhileRestricted(()=>U(this,null,function*(){try{yield function(i){return U(this,null,function*(){if(!ds.D())return Promise.resolve();let r=i+"main";yield ds.delete(r)})}(fC(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function fk(t){return function(n){let i=new cn;return n.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return K4(yield TC(n),i)})),i.promise}(fn(t=st(t,Bt)))}function pk(t){return cH(fn(t=st(t,Bt)))}function mk(t){return lH(fn(t=st(t,Bt)))}function gk(t,e){let n=fn(t=st(t,Bt)),i=new $I;return fH(n,t._databaseId,e,i),i}function _k(t,e){return pH(fn(t=st(t,Bt)),e).then(n=>n?new Tn(t,null,n.query):null)}function vk(t){if(t._initialized||t._terminated)throw new K(H.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var jr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(yn.fromBase64String(e))}catch(n){throw new K(H.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var rr=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(H.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yo=class{constructor(e){this._methodName=e}};var Ba=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(H.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(H.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}};var mH=/^__.*__$/,qI=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new ir(e,this.data,this.fieldMask,n,this.fieldTransforms):new _s(e,this.data,n,this.fieldTransforms)}},Jg=class{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new ir(e,this.data,this.fieldMask,n,this.fieldTransforms)}};function yk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}var e_=class t{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.mu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.wu(e),r}Su(e){var n;let i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.gu({path:i,yu:!1});return r.mu(),r}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return t_(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(yk(this.fu)&&mH.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},GI=class{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||$h(e)}Fu(e,n,i,r=!1){return new e_({fu:e,methodName:n,vu:i,path:en.emptyPath(),yu:!1,Cu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ha(t){let e=t._freezeSettings(),n=$h(t._databaseId);return new GI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function h_(t,e,n,i,r,o={}){let a=t.Fu(o.merge||o.mergeFields?2:0,e,n,r);OC("Data must be an object, but it was:",a,i);let c=Ik(i,a),u,f;if(o.merge)u=new pi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){let p=[];for(let _ of o.mergeFields){let b=YI(e,_,n);if(!a.contains(b))throw new K(H.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);Ek(p,b)||p.push(b)}u=new pi(p),f=a.fieldTransforms.filter(_=>u.covers(_.field))}else u=null,f=a.fieldTransforms;return new qI(new Rn(c),u,f)}var Vh=class t extends yo{_toFieldTransform(e){if(e.fu!==2)throw e.fu===1?e.Du(`${this._methodName}() can only appear at the top level of your update data`):e.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof t}};function bk(t,e,n){return new e_({fu:3,vu:e.settings.vu,methodName:t._methodName,yu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var WI=class t extends yo{_toFieldTransform(e){return new Oa(e.path,new ms)}isEqual(e){return e instanceof t}},ZI=class t extends yo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=bk(this,e,!0),i=this.Mu.map(o=>$a(o,n)),r=new _o(i);return new Oa(e.path,r)}isEqual(e){return e instanceof t&&N_(this.Mu,e.Mu)}},KI=class t extends yo{constructor(e,n){super(e),this.Mu=n}_toFieldTransform(e){let n=bk(this,e,!0),i=this.Mu.map(o=>$a(o,n)),r=new vo(i);return new Oa(e.path,r)}isEqual(e){return e instanceof t&&N_(this.Mu,e.Mu)}},QI=class t extends yo{constructor(e,n){super(e),this.xu=n}_toFieldTransform(e){let n=new gs(e.serializer,o1(e.serializer,this.xu));return new Oa(e.path,n)}isEqual(e){return e instanceof t&&this.xu===e.xu}};function RC(t,e,n,i){let r=t.Fu(1,e,n);OC("Data must be an object, but it was:",r,i);let o=[],a=Rn.empty();Ua(i,(u,f)=>{let p=LC(e,u,n);f=Ht(f);let _=r.Su(p);if(f instanceof Vh)o.push(p);else{let b=$a(f,_);b!=null&&(o.push(p),a.set(p,b))}});let c=new pi(o);return new Jg(a,c,r.fieldTransforms)}function NC(t,e,n,i,r,o){let a=t.Fu(1,e,n),c=[YI(e,i,n)],u=[r];if(o.length%2!=0)throw new K(H.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<o.length;b+=2)c.push(YI(e,o[b])),u.push(o[b+1]);let f=[],p=Rn.empty();for(let b=c.length-1;b>=0;--b)if(!Ek(f,c[b])){let I=c[b],M=u[b];M=Ht(M);let P=a.Su(I);if(M instanceof Vh)f.push(I);else{let F=$a(M,P);F!=null&&(f.push(I),p.set(I,F))}}let _=new pi(f);return new Jg(p,_,a.fieldTransforms)}function wk(t,e,n,i=!1){return $a(n,t.Fu(i?4:3,e))}function $a(t,e){if(Ck(t=Ht(t)))return OC("Unsupported field value:",e,t),Ik(t,e);if(t instanceof yo)return function(i,r){if(!yk(r.fu))throw r.Du(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Du(`${i._methodName}() is not currently supported inside arrays`);let o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(i,r){let o=[],a=0;for(let c of i){let u=$a(c,r.bu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=Ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return o1(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let o=qt.fromDate(i);return{timestampValue:Gl(r.serializer,o)}}if(i instanceof qt){let o=new qt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Gl(r.serializer,o)}}if(i instanceof Ba)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jr)return{bytesValue:m1(r.serializer,i._byteString)};if(i instanceof Rt){let o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Du(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:uC(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Du(`Unsupported field value: ${d_(i)}`)}(t,e)}function Ik(t,e){let n={};return zP(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ua(t,(i,r)=>{let o=$a(r,e.pu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function Ck(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof qt||t instanceof Ba||t instanceof jr||t instanceof Rt||t instanceof yo)}function OC(t,e,n){if(!Ck(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){let i=d_(n);throw i==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+i)}}function YI(t,e,n){if((e=Ht(e))instanceof rr)return e._internalPath;if(typeof e=="string")return LC(t,e);throw t_("Field path arguments must be of type string or ",t,!1,void 0,n)}var gH=new RegExp("[~\\*/\\[\\]]");function LC(t,e,n){if(e.search(gH)>=0)throw t_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rr(...e.split("."))._internalPath}catch{throw t_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function t_(t,e,n,i,r){let o=i&&!i.isEmpty(),a=r!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${r}`),u+=")"),new K(H.INVALID_ARGUMENT,c+t+u)}function Ek(t,e){return t.some(n=>n.isEqual(e))}var ja=class{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new XI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(f_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},XI=class extends ja{data(){return super.data()}};function f_(t,e){return typeof e=="string"?LC(t,e):e instanceof rr?e._internalPath:e._delegate._internalPath}function xk(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(H.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Bh=class{},za=class extends Bh{};function Io(t,e,...n){let i=[];e instanceof Bh&&i.push(e),i=i.concat(n),function(o){let a=o.filter(u=>u instanceof JI).length,c=o.filter(u=>u instanceof n_).length;if(a>1||a>0&&c>0)throw new K(H.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)t=r._apply(t);return t}var n_=class t extends za{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=this._parse(e);return Ok(e._query,n),new Tn(e.firestore,e.converter,Mw(e._query,n))}_parse(e){let n=Ha(e.firestore);return function(o,a,c,u,f,p,_){let b;if(f.isKeyField()){if(p==="array-contains"||p==="array-contains-any")throw new K(H.INVALID_ARGUMENT,`Invalid Query. You can't perform '${p}' queries on documentId().`);if(p==="in"||p==="not-in"){TP(_,p);let I=[];for(let M of _)I.push(DP(u,o,M));b={arrayValue:{values:I}}}else b=DP(u,o,_)}else p!=="in"&&p!=="not-in"&&p!=="array-contains-any"||TP(_,p),b=wk(c,a,_,p==="in"||p==="not-in");return Je.create(f,p,b)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Dk(t,e,n){let i=e,r=f_("where",t);return n_._create(r,i,n)}var JI=class t extends Bh{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:wt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r,c=o.getFlattenedFilters();for(let u of c)Ok(a,u),a=Mw(a,u)}(e._query,n),new Tn(e.firestore,e.converter,Mw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var eC=class t extends za{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new t(e,n)}_apply(e){let n=function(r,o,a){if(r.startAt!==null)throw new K(H.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new K(H.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ra(o,a)}(e._query,this._field,this._direction);return new Tn(e.firestore,e.converter,function(r,o){let a=r.explicitOrderBy.concat([o]);return new nr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}};function Tk(t,e="asc"){let n=e,i=f_("orderBy",t);return eC._create(i,n)}var i_=class t extends za{constructor(e,n,i){super(),this.type=e,this._limit=n,this._limitType=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){return new Tn(e.firestore,e.converter,Ig(e._query,this._limit,this._limitType))}};function Sk(t){return rk("limit",t),i_._create("limit",t,"F")}function Ak(t){return rk("limitToLast",t),i_._create("limitToLast",t,"L")}var r_=class t extends za{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=Nk(e,this.type,this._docOrFields,this._inclusive);return new Tn(e.firestore,e.converter,function(r,o){return new nr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)}(e._query,n))}};function Mk(...t){return r_._create("startAt",t,!0)}function Pk(...t){return r_._create("startAfter",t,!1)}var o_=class t extends za{constructor(e,n,i){super(),this.type=e,this._docOrFields=n,this._inclusive=i}static _create(e,n,i){return new t(e,n,i)}_apply(e){let n=Nk(e,this.type,this._docOrFields,this._inclusive);return new Tn(e.firestore,e.converter,function(r,o){return new nr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)}(e._query,n))}};function kk(...t){return o_._create("endBefore",t,!1)}function Rk(...t){return o_._create("endAt",t,!0)}function Nk(t,e,n,i){if(n[0]=Ht(n[0]),n[0]instanceof ja)return function(o,a,c,u,f){if(!u)throw new K(H.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);let p=[];for(let _ of Vl(o))if(_.field.isKeyField())p.push(ka(a,u.key));else{let b=u.data.field(_.field);if(a_(b))throw new K(H.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){let I=_.field.canonicalString();throw new K(H.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}p.push(b)}return new Vr(p,f)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{let r=Ha(t.firestore);return function(a,c,u,f,p,_){let b=a.explicitOrderBy;if(p.length>b.length)throw new K(H.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let I=[];for(let M=0;M<p.length;M++){let P=p[M];if(b[M].field.isKeyField()){if(typeof P!="string")throw new K(H.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof P}`);if(!cC(a)&&P.indexOf("/")!==-1)throw new K(H.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${P}' contains a slash.`);let F=a.path.child(ot.fromString(P));if(!re.isDocumentKey(F))throw new K(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${F}' is not because it contains an odd number of segments.`);let W=new re(F);I.push(ka(c,W))}else{let F=wk(u,f,P);I.push(F)}}return new Vr(I,_)}(t._query,t.firestore._databaseId,r,e,n,i)}}function DP(t,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new K(H.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cC(e)&&n.indexOf("/")!==-1)throw new K(H.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let i=e.path.child(ot.fromString(n));if(!re.isDocumentKey(i))throw new K(H.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ka(t,new re(i))}if(n instanceof Rt)return ka(t,n._key);throw new K(H.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${d_(n)}.`)}function TP(t,e){if(!Array.isArray(t)||t.length===0)throw new K(H.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ok(t,e){let n=function(r,o){for(let a of r)for(let c of a.getFlattenedFilters())if(o.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(H.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(H.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var nu=class{convertValue(e,n="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Wt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let i={};return Ua(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertGeoPoint(e){return new Ba(Wt(e.latitude),Wt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":let i=sC(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(wh(e));default:return null}}convertTimestamp(e){let n=go(e);return new qt(n.seconds,n.nanos)}convertDocumentKey(e,n){let i=ot.fromString(e);me(D1(i));let r=new fs(i.get(1),i.get(3)),o=new re(i.popFirst(5));return r.isEqual(n)||Jt(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function p_(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}var tC=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}};var mo=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vi=class extends ja{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ls(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let i=this._document.data.field(f_("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}},ls=class extends Vi{data(e={}){return super.data(e)}},or=class{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new mo(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ls(this._firestore,this._userDataWriter,i.key,i,new mo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(H.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(c=>{let u=new ls(r._firestore,r._userDataWriter,c.doc.key,c.doc,new mo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new ls(r._firestore,r._userDataWriter,c.doc.key,c.doc,new mo(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),f=-1,p=-1;return c.type!==0&&(f=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),p=a.indexOf(c.doc.key)),{type:_H(c.type),doc:u,oldIndex:f,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function _H(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}function FC(t,e){return t instanceof Vi&&e instanceof Vi?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof or&&e instanceof or&&t._firestore===e._firestore&&kC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Lk(t){t=st(t,Rt);let e=st(t.firestore,Bt);return tk(fn(e),t._key).then(n=>zC(e,t,n))}var bo=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new jr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,n)}};function Fk(t){t=st(t,Rt);let e=st(t.firestore,Bt),n=fn(e),i=new bo(e);return uH(n,t._key).then(r=>new Vi(e,i,t._key,r,new mo(r!==null&&r.hasLocalMutations,!0),t.converter))}function Vk(t){t=st(t,Rt);let e=st(t.firestore,Bt);return tk(fn(e),t._key,{source:"server"}).then(n=>zC(e,t,n))}function Bk(t){t=st(t,Tn);let e=st(t.firestore,Bt),n=fn(e),i=new bo(e);return xk(t._query),nk(n,t._query).then(r=>new or(e,i,t,r))}function jk(t){t=st(t,Tn);let e=st(t.firestore,Bt),n=fn(e),i=new bo(e);return dH(n,t._query).then(r=>new or(e,i,t,r))}function zk(t){t=st(t,Tn);let e=st(t.firestore,Bt),n=fn(e),i=new bo(e);return nk(n,t._query,{source:"server"}).then(r=>new or(e,i,t,r))}function VC(t,e,n){t=st(t,Rt);let i=st(t.firestore,Bt),r=p_(t.converter,e,n);return lu(i,[h_(Ha(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Zt.none())])}function BC(t,e,n,...i){t=st(t,Rt);let r=st(t.firestore,Bt),o=Ha(r),a;return a=typeof(e=Ht(e))=="string"||e instanceof rr?NC(o,"updateDoc",t._key,e,n,i):RC(o,"updateDoc",t._key,e),lu(r,[a.toMutation(t._key,Zt.exists(!0))])}function Uk(t){return lu(st(t.firestore,Bt),[new vs(t._key,Zt.none())])}function Hk(t,e){let n=st(t.firestore,Bt),i=Gh(t),r=p_(t.converter,e);return lu(n,[h_(Ha(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Zt.exists(!1))]).then(()=>i)}function jC(t,...e){var n,i,r;t=Ht(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||HI(e[a])||(o=e[a],a++);let c={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(HI(e[a])){let _=e[a];e[a]=(n=_.next)===null||n===void 0?void 0:n.bind(_),e[a+1]=(i=_.error)===null||i===void 0?void 0:i.bind(_),e[a+2]=(r=_.complete)===null||r===void 0?void 0:r.bind(_)}let u,f,p;if(t instanceof Rt)f=st(t.firestore,Bt),p=ru(t._key.path),u={next:_=>{e[a]&&e[a](zC(f,t,_))},error:e[a+1],complete:e[a+2]};else{let _=st(t,Tn);f=st(_.firestore,Bt),p=_._query;let b=new bo(f);u={next:I=>{e[a]&&e[a](new or(f,b,_,I))},error:e[a+1],complete:e[a+2]},xk(t._query)}return function(b,I,M,P){let F=new eu(P),W=new Oh(I,F,M);return b.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return _C(yield tu(b),W)})),()=>{F.$a(),b.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return vC(yield tu(b),W)}))}}(fn(f),p,c,u)}function $k(t,e){return hH(fn(t=st(t,Bt)),HI(e)?e:{next:e})}function lu(t,e){return function(i,r){let o=new cn;return i.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){return q4(yield TC(i),r,o)})),o.promise}(fn(t),e)}function zC(t,e,n){let i=n.docs.get(e._key),r=new bo(t);return new Vi(t,r,e._key,i,new mo(n.hasPendingWrites,n.fromCache),e.converter)}var vH={maxAttempts:5};var s_=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Ha(e)}set(e,n,i){this._verifyNotCommitted();let r=as(e,this._firestore),o=p_(r.converter,n,i),a=h_(this._dataReader,"WriteBatch.set",r._key,o,r.converter!==null,i);return this._mutations.push(a.toMutation(r._key,Zt.none())),this}update(e,n,i,...r){this._verifyNotCommitted();let o=as(e,this._firestore),a;return a=typeof(n=Ht(n))=="string"||n instanceof rr?NC(this._dataReader,"WriteBatch.update",o._key,n,i,r):RC(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(a.toMutation(o._key,Zt.exists(!0))),this}delete(e){this._verifyNotCommitted();let n=as(e,this._firestore);return this._mutations=this._mutations.concat(new vs(n._key,Zt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K(H.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function as(t,e){if((t=Ht(t)).firestore!==e)throw new K(H.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var nC=class extends class{constructor(n,i){this._firestore=n,this._transaction=i,this._dataReader=Ha(n)}get(n){let i=as(n,this._firestore),r=new tC(this._firestore);return this._transaction.lookup([i._key]).then(o=>{if(!o||o.length!==1)return ue();let a=o[0];if(a.isFoundDocument())return new ja(this._firestore,r,a.key,a,i.converter);if(a.isNoDocument())return new ja(this._firestore,r,i._key,null,i.converter);throw ue()})}set(n,i,r){let o=as(n,this._firestore),a=p_(o.converter,i,r),c=h_(this._dataReader,"Transaction.set",o._key,a,o.converter!==null,r);return this._transaction.set(o._key,c),this}update(n,i,r,...o){let a=as(n,this._firestore),c;return c=typeof(i=Ht(i))=="string"||i instanceof rr?NC(this._dataReader,"Transaction.update",a._key,i,r,o):RC(this._dataReader,"Transaction.update",a._key,i),this._transaction.update(a._key,c),this}delete(n){let i=as(n,this._firestore);return this._transaction.delete(i._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){let n=as(e,this._firestore),i=new bo(this._firestore);return super.get(e).then(r=>new Vi(this._firestore,i,n._key,r._document,new mo(!1,!1),n.converter))}};function qk(t,e,n){t=st(t,Bt);let i=Object.assign(Object.assign({},vH),n);return function(o){if(o.maxAttempts<1)throw new K(H.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(o,a,c){let u=new cn;return o.asyncQueue.enqueueAndForget(()=>U(this,null,function*(){let f=yield aH(o);new BI(o.asyncQueue,f,c,a,u).Xa()})),u.promise}(fn(t),r=>e(new nC(t,r)),i)}function Gk(){return new Vh("deleteField")}function Wk(){return new WI("serverTimestamp")}function Zk(...t){return new ZI("arrayUnion",t)}function Kk(...t){return new KI("arrayRemove",t)}function Qk(t){return new QI("increment",t)}(function(e,n=!0){(function(r){iu=r})(xE),Zu(new zs("firestore",(i,{instanceIdentifier:r,options:o})=>{let a=i.getProvider("app").getImmediate(),c=new Bt(new aw(i.getProvider("auth-internal")),new dw(i.getProvider("app-check-internal")),function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new K(H.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fs(f.options.projectId,p)}(a,r),a);return o=Object.assign({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Fo(SM,"4.6.3",e),Fo(SM,"4.6.3","esm2017")})();var yH="@firebase/firestore-compat",bH="0.3.32";function WC(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new K("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function Yk(){if(typeof Uint8Array>"u")throw new K("unimplemented","Uint8Arrays are not available in this environment.")}function Xk(){if(!UP())throw new K("unimplemented","Blobs are unavailable in Firestore in this environment.")}var m_=class t{constructor(e){this._delegate=e}static fromBase64String(e){return Xk(),new t(jr.fromBase64String(e))}static fromUint8Array(e){return Yk(),new t(jr.fromUint8Array(e))}toBase64(){return Xk(),this._delegate.toBase64()}toUint8Array(){return Yk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function UC(t){return wH(t,["next","error","complete"])}function wH(t,e){if(typeof t!="object"||t===null)return!1;let n=t;for(let i of e)if(i in n&&typeof n[i]=="function")return!0;return!1}var HC=class{enableIndexedDbPersistence(e,n){return lk(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return uk(e._delegate)}clearIndexedDbPersistence(e){return hk(e._delegate)}},g_=class{constructor(e,n,i){this._delegate=n,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof fs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Li("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,i={}){ok(this._delegate,e,n,i)}enableNetwork(){return pk(this._delegate)}disableNetwork(){return mk(this._delegate)}enablePersistence(e){let n=!1,i=!1;return e&&(n=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,AC("synchronizeTabs",n,"experimentalForceOwningTab",i)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return fk(this._delegate)}onSnapshotsInSync(e){return $k(this._delegate,e)}get app(){if(!this._appCompat)throw new K("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hu(this,MC(this._delegate,e))}catch(n){throw $n(n,"collection()","Firestore.collection()")}}doc(e){try{return new zr(this,Gh(this._delegate,e))}catch(n){throw $n(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Za(this,sk(this._delegate,e))}catch(n){throw $n(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return qk(this._delegate,n=>e(new __(this,n)))}batch(){return fn(this._delegate),new v_(new s_(this._delegate,e=>lu(this._delegate,e)))}loadBundle(e){return gk(this._delegate,e)}namedQuery(e){return _k(this._delegate,e).then(n=>n?new Za(this,n):null)}},uu=class extends nu{constructor(e){super(),this.firestore=e}convertBytes(e){return new m_(new jr(e))}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return zr.forKey(n,this.firestore,null)}};function IH(t){SP(t)}var __=class{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new uu(e)}get(e){let n=qa(e);return this._delegate.get(n).then(i=>new Ga(this._firestore,new Vi(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,n.converter)))}set(e,n,i){let r=qa(e);return i?(WC("Transaction.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=qa(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=qa(e);return this._delegate.delete(n),this}},v_=class{constructor(e){this._delegate=e}set(e,n,i){let r=qa(e);return i?(WC("WriteBatch.set",i),this._delegate.set(r,n,i)):this._delegate.set(r,n),this}update(e,n,i,...r){let o=qa(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,i,...r),this}delete(e){let n=qa(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}},du=class t{constructor(e,n,i){this._firestore=e,this._userDataWriter=n,this._delegate=i}fromFirestore(e,n){let i=new ls(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Wa(this._firestore,i),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){let i=t.INSTANCES,r=i.get(e);r||(r=new WeakMap,i.set(e,r));let o=r.get(n);return o||(o=new t(e,new uu(e),n),r.set(n,o)),o}};du.INSTANCES=new WeakMap;var zr=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new uu(e)}static forPath(e,n,i){if(e.length%2!==0)throw new K("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new t(n,new Rt(n._delegate,i,new re(e)))}static forKey(e,n,i){return new t(n,new Rt(n._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new hu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hu(this.firestore,MC(this._delegate,e))}catch(n){throw $n(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ht(e),e instanceof Rt?PC(this._delegate,e):!1}set(e,n){n=WC("DocumentReference.set",n);try{return n?VC(this._delegate,e,n):VC(this._delegate,e)}catch(i){throw $n(i,"setDoc()","DocumentReference.set()")}}update(e,n,...i){try{return arguments.length===1?BC(this._delegate,e):BC(this._delegate,e,n,...i)}catch(r){throw $n(r,"updateDoc()","DocumentReference.update()")}}delete(){return Uk(this._delegate)}onSnapshot(...e){let n=Jk(e),i=eR(e,r=>new Ga(this.firestore,new Vi(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return jC(this._delegate,n,i)}get(e){let n;return e?.source==="cache"?n=Fk(this._delegate):e?.source==="server"?n=Vk(this._delegate):n=Lk(this._delegate),n.then(i=>new Ga(this.firestore,new Vi(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $n(t,e,n){return t.message=t.message.replace(e,n),t}function Jk(t){for(let e of t)if(typeof e=="object"&&!UC(e))return e;return{}}function eR(t,e){var n,i;let r;return UC(t[0])?r=t[0]:UC(t[1])?r=t[1]:typeof t[0]=="function"?r={next:t[0],error:t[1],complete:t[2]}:r={next:t[1],error:t[2],complete:t[3]},{next:o=>{r.next&&r.next(e(o))},error:(n=r.error)===null||n===void 0?void 0:n.bind(r),complete:(i=r.complete)===null||i===void 0?void 0:i.bind(r)}}var Ga=class{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new zr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return FC(this._delegate,e._delegate)}},Wa=class extends Ga{data(e){let n=this._delegate.data(e);return this._delegate._converter||AP(n!==void 0,"Document in a QueryDocumentSnapshot should exist"),n}},Za=class t{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new uu(e)}where(e,n,i){try{return new t(this.firestore,Io(this._delegate,Dk(e,n,i)))}catch(r){throw $n(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new t(this.firestore,Io(this._delegate,Tk(e,n)))}catch(i){throw $n(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new t(this.firestore,Io(this._delegate,Sk(e)))}catch(n){throw $n(n,"limit()","Query.limit()")}}limitToLast(e){try{return new t(this.firestore,Io(this._delegate,Ak(e)))}catch(n){throw $n(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new t(this.firestore,Io(this._delegate,Mk(...e)))}catch(n){throw $n(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new t(this.firestore,Io(this._delegate,Pk(...e)))}catch(n){throw $n(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new t(this.firestore,Io(this._delegate,kk(...e)))}catch(n){throw $n(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new t(this.firestore,Io(this._delegate,Rk(...e)))}catch(n){throw $n(n,"endAt()","Query.endAt()")}}isEqual(e){return kC(this._delegate,e._delegate)}get(e){let n;return e?.source==="cache"?n=jk(this._delegate):e?.source==="server"?n=zk(this._delegate):n=Bk(this._delegate),n.then(i=>new Wh(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){let n=Jk(e),i=eR(e,r=>new Wh(this.firestore,new or(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return jC(this._delegate,n,i)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},$C=class{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Wa(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Wh=class{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Za(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Wa(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new $C(this._firestore,n))}forEach(e,n){this._delegate.forEach(i=>{e.call(n,new Wa(this._firestore,i))})}isEqual(e){return FC(this._delegate,e._delegate)}},hu=class t extends Za{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new zr(this.firestore,e):null}doc(e){try{return e===void 0?new zr(this.firestore,Gh(this._delegate)):new zr(this.firestore,Gh(this._delegate,e))}catch(n){throw $n(n,"doc()","CollectionReference.doc()")}}add(e){return Hk(this._delegate,e).then(n=>new zr(this.firestore,n))}isEqual(e){return PC(this._delegate,e._delegate)}withConverter(e){return new t(this.firestore,e?this._delegate.withConverter(du.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function qa(t){return st(t,Rt)}var qC=class t{constructor(...e){this._delegate=new rr(...e)}static documentId(){return new t(en.keyField().canonicalString())}isEqual(e){return e=Ht(e),e instanceof rr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var GC=class t{constructor(e){this._delegate=e}static serverTimestamp(){let e=Wk();return e._methodName="FieldValue.serverTimestamp",new t(e)}static delete(){let e=Gk();return e._methodName="FieldValue.delete",new t(e)}static arrayUnion(...e){let n=Zk(...e);return n._methodName="FieldValue.arrayUnion",new t(n)}static arrayRemove(...e){let n=Kk(...e);return n._methodName="FieldValue.arrayRemove",new t(n)}static increment(e){let n=Qk(e);return n._methodName="FieldValue.increment",new t(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var CH={Firestore:g_,GeoPoint:Ba,Timestamp:qt,Blob:m_,Transaction:__,WriteBatch:v_,DocumentReference:zr,DocumentSnapshot:Ga,Query:Za,QueryDocumentSnapshot:Wa,QuerySnapshot:Wh,CollectionReference:hu,FieldPath:qC,FieldValue:GC,setLogLevel:IH,CACHE_SIZE_UNLIMITED:ak};function EH(t,e){t.INTERNAL.registerComponent(new zs("firestore-compat",n=>{let i=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},CH)))}function xH(t){EH(t,(e,n)=>new g_(e,n,new HC)),t.registerVersion(yH,bH)}xH(li);function DH(t,e=_r){return new Oe(n=>{let i;return e!=null?e.schedule(()=>{i=t.onSnapshot({includeMetadataChanges:!0},n)}):i=t.onSnapshot({includeMetadataChanges:!0},n),()=>{i?.()}})}function tR(t,e){return DH(t,e)}function TH(t,e){return tR(t,e).pipe(yr(void 0),Oc(),be(n=>{let[i,r]=n;return r.exists?i?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function QC(t,e){return tR(t,e).pipe(be(n=>({payload:n,type:"query"})))}var y_=class{ref;afs;constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){let i=this.ref.collection(e),{ref:r,query:o}=rR(i,n);return new w_(r,o,this.afs)}snapshotChanges(){return TH(this.ref,this.afs.schedulers.outsideAngular).pipe(ti)}valueChanges(e={}){return this.snapshotChanges().pipe(be(({payload:n})=>e.idField?Mt(ne({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return yt(this.ref.get(e)).pipe(ti)}};function b_(t,e){return QC(t,e).pipe(yr(void 0),Oc(),be(n=>{let[i,r]=n,o=r.payload.docChanges(),a=o.map(c=>({type:c.type,payload:c}));return i&&JSON.stringify(i.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,u)=>{let f=o.find(_=>_.doc.ref.isEqual(c.ref)),p=i?.payload.docs.find(_=>_.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&p&&JSON.stringify(p.metadata)===JSON.stringify(c.metadata)||a.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:c}})}),a}))}function nR(t,e,n){return b_(t,n).pipe(qs((i,r)=>SH(i,r.map(o=>o.payload),e),[]),Rc(),be(i=>i.map(r=>({type:r.type,payload:r}))))}function SH(t,e,n){return e.forEach(i=>{n.indexOf(i.type)>-1&&(t=AH(t,i))}),t}function ZC(t,e,n,...i){let r=t.slice();return r.splice(e,n,...i),r}function AH(t,e){switch(e.type){case"added":if(!(t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)))return ZC(t,e.newIndex,0,e);break;case"modified":if(t[e.oldIndex]==null||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}else return ZC(t,e.newIndex,1,e);break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ZC(t,e.oldIndex,1);break}return t}function iR(t){return(!t||t.length===0)&&(t=["added","removed","modified"]),t}var w_=class{ref;query;afs;constructor(e,n,i){this.ref=e,this.query=n,this.afs=i}stateChanges(e){let n=b_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe(be(i=>i.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(yr(void 0),Oc(),$t(([i,r])=>r.length>0||!i),be(([,i])=>i),ti)}auditTrail(e){return this.stateChanges(e).pipe(qs((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=iR(e);return nR(this.query,n,this.afs.schedulers.outsideAngular).pipe(ti)}valueChanges(e={}){return QC(this.query,this.afs.schedulers.outsideAngular).pipe(be(n=>n.payload.docs.map(i=>e.idField?Mt(ne({},i.data()),{[e.idField]:i.id}):i.data())),ti)}get(e){return yt(this.query.get(e)).pipe(ti)}add(e){return this.ref.add(e)}doc(e){return new y_(this.ref.doc(e),this.afs)}},KC=class{query;afs;constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return!e||e.length===0?b_(this.query,this.afs.schedulers.outsideAngular).pipe(ti):b_(this.query,this.afs.schedulers.outsideAngular).pipe(be(n=>n.filter(i=>e.indexOf(i.type)>-1)),$t(n=>n.length>0),ti)}auditTrail(e){return this.stateChanges(e).pipe(qs((n,i)=>[...n,...i],[]))}snapshotChanges(e){let n=iR(e);return nR(this.query,n,this.afs.schedulers.outsideAngular).pipe(ti)}valueChanges(e={}){return QC(this.query,this.afs.schedulers.outsideAngular).pipe(be(i=>i.payload.docs.map(r=>e.idField?ne({[e.idField]:r.id},r.data()):r.data())),ti)}get(e){return yt(this.query.get(e)).pipe(ti)}},MH=new le("angularfire2.enableFirestorePersistence"),PH=new le("angularfire2.firestore.persistenceSettings"),kH=new le("angularfire2.firestore.settings"),RH=new le("angularfire2.firestore.use-emulator");function rR(t,e=n=>n){return{query:e(t),ref:t}}var oR=(()=>{class t{schedulers;firestore;persistenceEnabled$;constructor(n,i,r,o,a,c,u,f,p,_,b,I,M,P,F,W,X){this.schedulers=u;let Z=Qd(n,c,i),se=p;_&&W0(Z,c,b,M,P,F,I,W),[this.firestore,this.persistenceEnabled$]=zm(`${Z.name}.firestore`,"AngularFirestore",Z.name,()=>{let pe=c.runOutsideAngular(()=>Z.firestore());if(o&&pe.settings(o),se&&pe.useEmulator(...se),r&&!ha(a)){let he=()=>{try{return yt(pe.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(S){return typeof console<"u"&&console.warn(S),ge(!1)}};return[pe,c.runOutsideAngular(he)]}else return[pe,ge(!1)]},[o,se,r])}collection(n,i){let r;typeof n=="string"?r=this.firestore.collection(n):r=n;let{ref:o,query:a}=rR(r,i),c=this.schedulers.ngZone.run(()=>o);return new w_(c,a,this)}collectionGroup(n,i){let r=i||(a=>a),o=this.firestore.collectionGroup(n);return new KC(r(o),this)}doc(n){let i;typeof n=="string"?i=this.firestore.doc(n):i=n;let r=this.schedulers.ngZone.run(()=>i);return new y_(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(i){return new(i||t)(V(gl),V(_l,8),V(MH,8),V(kH,8),V(zn),V(we),V(Bm),V(PH,8),V(RH,8),V(Xm,8),V(z0,8),V(U0,8),V(H0,8),V($0,8),V(q0,8),V(G0,8),V(_a,8))};static \u0275prov=ie({token:t,factory:t.\u0275fac,providedIn:"any"})}return t})();var mi=(()=>{let e=class e{constructor(i,r,o){this.afAuth=i,this.afs=r,this.router=o,this.firebaseConfig={apiKey:"AIzaSyBIOLzTWv2k0zlLq9irCW51C0s4cL2erzE",authDomain:"login-mit-firebase-database.firebaseapp.com",databaseURL:"https://login-mit-firebase-database-default-rtdb.firebaseio.com",projectId:"login-mit-firebase-database",storageBucket:"login-mit-firebase-database.appspot.com",messagingSenderId:"1098866553749",appId:"1:1098866553749:web:16959403ee329378733c9c",measurementId:"G-YR90LWTHZ2"},this.user$=this.afAuth.authState.pipe(kt(a=>a?this.afs.doc(`users/${a.uid}`).valueChanges():ge(null))),this.userData=this.afAuth.authState.pipe(kt(a=>a?this.afs.doc(`users/${a.uid}/data/data`).valueChanges():ge(null)))}googleSignin(){return U(this,null,function*(){let i=new O_,r=yield this.afAuth.signInWithPopup(i);return this.currentUser=r.user,console.log(r),localStorage.setItem("key",r.user.uid),localStorage.setItem("userData",JSON.stringify(r.user)),this.updateUserData(r.user),this.addDataToUser({user:r.user}),this.updateUserData(r.user)})}signOut(){return U(this,null,function*(){return yield this.afAuth.signOut(),this.router.navigate(["/"])})}updateUserData(i){console.log("update User Data");let r=this.afs.doc(`users/${i.uid}`);console.log("uid:",i.email,i.displayName,i.photoUrl,i.uid,r,i);let o={uid:i.uid,email:i.email,displayName:i.displayName,photoUrl:i.photoUrl,test:"test"};return this.addDataToUser(o),this.addUserData(o),r.update(o)}getUserData(i){return this.afs.collection("users/",r=>r.where("uid","==",i)).valueChanges()}addUserData(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}`).update(i)}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}`).update(i)):null}getUserKey(){return localStorage.getItem("key")}addDataToUser(i){if(localStorage.getItem("key")){let r=localStorage.getItem("key");return this.afs.doc(`users/${r}/data/data`).update(i)}else return this.currentUser?(console.log(i,this.currentUser._delegate.uid),this.afs.doc(`users/${this.currentUser._delegate.uid}/data/data`).update(i)):null}getDataFromUser(i){return this.afs.collection(`users/${i}/data/data`,r=>r.where("uid","==",i)).valueChanges()}};e.\u0275fac=function(r){return new(r||e)(V(Xm),V(oR),V(Fm))},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function OH(t,e){if(t&1){let n=bt();$(0,"div",15)(1,"button",16),Ie("click",function(){at(n);let r=ce();return ct(r.onCloseClick())}),J(2,"X"),G(),$(3,"h1"),J(4,"Car"),G(),$(5,"p"),J(6),G(),$(7,"p"),J(8),G()()}if(t&2){let n=ce();Te("z-index",n.z)("display","block"),q(6),pt(n.randomCar.car),q(2),pt(n.randomCar.hp)}}function LH(t,e){if(t&1){let n=bt();$(0,"img",17),Ie("click",function(){at(n);let r=ce();return ct(r.hideMap.emit("profile"))}),G()}if(t&2){let n=ce();Be("src",n.user.photoUrl,Yt)}}function FH(t,e){if(t&1){let n=bt();$(0,"img",17),Ie("click",function(){at(n);let r=ce();return ct(r.hideMap.emit("profile"))}),G()}if(t&2){let n=ce();Be("src",n.user.photoURL,Yt)}}function VH(t,e){if(t&1){let n=bt();$(0,"img",18),Ie("click",function(){at(n);let r=ce();return ct(r.hideMap.emit("profile"))}),G()}}var sR=(()=>{let e=class e{ngOnInit(){if(localStorage.getItem("garagePrice")){console.log(JSON.parse(localStorage.getItem("garages")));let i=JSON.parse(localStorage.getItem("garages"));this.garagePrice=JSON.parse(localStorage.getItem("garagePrice")),this.allGarages.push(...i),console.log(i),setTimeout(()=>{i.forEach(r=>{console.log(r);let o=It.marker([r.lat,r.lng],{icon:this.garageIcon}).addTo(this.map).on("click",c=>{console.log(c,c.latlng,this.currentPos),console.log();let u=this.getDistance([c.latlng.lat,c.latlng.lng],[this.currentPos.coords.latitude,this.currentPos.coords.longitude]);console.log("distance:",u),u<100&&this.hideMap.emit("garageClick")}),a=It.circle([r.lat,r.lng],100).addTo(this.map).setStyle({color:"#20C912"})})},500)}this.auth.getDataFromUser(localStorage.getItem("key")).subscribe(i=>{console.log("here:",i)})}initMap(){navigator.geolocation.getCurrentPosition(r=>{console.log(r.coords),this.moveMap([r.coords.latitude,r.coords.longitude])}),this.map=It.map("map",{center:[49.2,10.5],zoom:18,attributionControl:!0}).on("click",r=>{console.log(r.latlng.lat,r.latlng.lng);let o=new rh;var a=It.popup().setLatLng([r.latlng.lat,r.latlng.lng]).setContent(`<p>Do you want to buy a Garage here</p>
        
        <p>Price: ${o.transform(this.garagePrice.price)} </p>
        
        <button id="buyButton">Buy Garage</button>
        
        <style>
        #buyButton {
        background-color: green;
        width: 80%;
        margin: auto;
        border-radius: 5px;
        color: white;
        }
        * {
          text-align: center;
        }
        </style>
<<<<<<<< HEAD:www/browser/main-BJPDMXR2.js
        `).openOn(this.map);document.getElementById("buyButton").addEventListener("click",c=>{if(console.log(c),console.log(r.latlng),this.coins>this.garagePrice.price){console.log("passt"),this.coins=this.coins-this.garagePrice.price,this.garagePrice.price=this.garagePrice.price*15,this.allGarages.push({lat:r.latlng.lat,lng:r.latlng.lng}),console.log(this.allGarages),localStorage.setItem("garages",JSON.stringify(this.allGarages)),localStorage.setItem("garagePrice",JSON.stringify(this.garagePrice));let u=It.marker([r.latlng.lat,r.latlng.lng],{icon:this.garageIcon}).addTo(this.map).on("click",p=>{console.log(p,p.latlng,this.currentPos),console.log();let _=this.getDistance([p.latlng.lat,p.latlng.lng],[this.currentPos.coords.latitude,this.currentPos.coords.longitude]);console.log("distance:",_),_<100&&this.hideMap.emit("garageClick")}),f=It.circle([r.latlng.lat,r.latlng.lng],100).addTo(this.map).setStyle({color:"#20C912"})}})}),this.moveMap([49,12]);let i=It.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});navigator.geolocation.watchPosition(r=>{let o=r.coords.latitude,a=r.coords.longitude,c=r.coords.accuracy;setTimeout(()=>{It.marker([49.3,10.5833333],{icon:this.repairShop}).addTo(this.map).on("click",()=>{})},5e3),setTimeout(()=>{},5e3)}),i.addTo(this.map),this.path(),this.generateRandomCars()}onBuyGarageClick(i){console.log(i)}onRepairShopClick(){console.log("jetzt")}constructor(i){this.auth=i,this.hideMap=new $e,this.coins=0,this.iconHome=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/home.png'>",iconSize:[86,105],iconAnchor:[43,105]}),this.iconCar=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img id='car' src='../../assets/Car.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.manCar=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Man.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.repairShop=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Repair.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.garageIcon=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/garage_locater.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.carLayer=new It.FeatureGroup,this.allGarages=[],this.garagePrice={price:1e4,symbol:"K"},this.user=JSON.parse(localStorage.getItem("userData")),this.cars=+localStorage.getItem("carcount"),this.gems=0,this.oldPos={lat:0,lng:0},this.speedMap=[],this.distance=.005,this.allCities=[],this.cityMarkers=[],this.isoCountries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},this.randomCars=[],this.generiertePositionen=[],this.randomCar={car:"Car12",hp:1},this.visible=!0,this.z=0,localStorage.getItem("userData")?(console.log(JSON.parse(localStorage.getItem("userData"))),this.user=JSON.parse(localStorage.getItem("userData")),this.user.photoUrl=this.user.photoURL,console.log(this.user)):this.user=i.user$.subscribe(r=>{console.log(r),this.user=r}),i.userData.subscribe(r=>{console.log("userData:",r),this.speedMap=r.speedMap}),navigator.geolocation.getCurrentPosition(r=>{console.log("here",r),this.currentPos=r})}onUserClick(){this.hideMap.emit("garage")}hideMapNow(i){this.hideMap.emit(i)}ngAfterViewInit(){navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,console.log(this.lng,this.lat)}),console.log(this.lat,this.lng),this.initMap(),setTimeout(()=>{},5e3),navigator.geolocation.watchPosition(i=>{console.log(i),this.marker!=null&&this.map.removeLayer(this.marker),this.marker=It.marker([i.coords.latitude,i.coords.longitude],{icon:this.manCar}).addTo(this.map),this.moveMap([i.coords.latitude,i.coords.longitude],i.coords.speed),console.log(this.marker,this.carLayer),setTimeout(()=>{console.log("jetzt")},5e3);let r=!0;console.log(this.generiertePositionen),this.generiertePositionen.forEach(o=>{let a=this.getDistance([o[0],o[1]],[this.lat,this.lng]);console.log("Distance:",a,this.generiertePositionen),a<500&&(r=!1)}),r==!0&&this.genNewCars(),this.allCities.forEach(o=>{let a=o.latitude,c=o.longitude,u=this.lng-c,f=this.lat-a;u>-.005&&u<.005&&(console.log(o),console.log(this.lat,this.lng),console.log(f,u))})}),this.getAllCities()}moveMap(i,r){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.map.flyTo(i,18),this.oldPos.lat=i[0],this.oldPos.lng=i[1],r&&(this.speedMap.push({lat:i[0],lng:i[1],speed:r}),setInterval(()=>{this.auth.addDataToUser({speedMap:this.speedMap})},2500)))}path(){console.log("Start"),navigator.geolocation.watchPosition(i=>{let r=i.coords.latitude,o=i.coords.longitude,a=i.coords.accuracy;this.lat=r,this.lng=o;var c=[[r,o],[r,o+this.distance]]})}getCountryName(i){return this.isoCountries.hasOwnProperty(i)?this.isoCountries[i]:i}generateRandomCars(){console.log("generateRandomCarsStart",this.lat,this.lng),navigator.geolocation.getCurrentPosition(i=>{this.generiertePositionen.push([i.coords.latitude,i.coords.longitude]);for(let r=0;r<25;r++){let o=i.coords.latitude+(Math.random()-.5)/100,a=i.coords.longitude+(Math.random()-.5)/100;console.log(o,a);let c=It.circle([o,a],50).addTo(this.map);this.randomCars.push({Lat:o,Lng:a});let u=It.marker([o,a],{icon:this.iconCar}).addTo(this.map);u.on("click",()=>{this.getDistance([o,a],[this.lat,this.lng])<=50&&(console.log(o,a,this.getDistance([o,a],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c),this.allGarages.forEach(f=>{this.getDistance([f.lat,f.lng],[o,a])<100&&(this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c))}))}),console.log(this.randomCars),this.map.removeLayer(this.map)}}),console.log("fertig Random")}genNewCars(){console.log("generateRandomCarsStart",this.lat,this.lng),this.generiertePositionen.push([this.lat,this.lng]),console.log("hier");for(let i=0;i<25;i++){console.log("hier");let r=this.lat+(Math.random()-.5)/100,o=this.lng+(Math.random()-.5)/100;console.log(r,o);let a=It.circle([r,o],50).addTo(this.map);this.randomCars.push({Lat:r,Lng:o});let c=It.marker([r,o],{icon:this.iconCar}).addTo(this.map);c.on("click",()=>{this.getDistance([r,o],[this.lat,this.lng])<=50&&(console.log(r,o,this.getDistance([r,o],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a)),this.allGarages.forEach(u=>{this.getDistance([u.lat,u.lng],[r,o])<100&&(this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a))})}),console.log(this.randomCars),this.map.removeLayer(this.map)}console.log("fertig Random")}getAllCities(){return U(this,null,function*(){let i={method:"GET",redirect:"follow"},r;yield fetch("https://api.country.is/",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{r=this.getCountryName(o.country)}).catch(o=>{console.log(o)}),yield fetch("https://countriesnow.space/api/v0.1/countries/population/cities",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{console.log(o.data),o.data.forEach(a=>{setTimeout(()=>{a.populationCounts[0].value>1e4&&a.country==r&&fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${a.city}`,{method:"GET",redirect:"follow"}).then(c=>c.json()).then(c=>{setTimeout(()=>{c.results&&(It.marker([c.results[0].latitude,c.results[0].longitude],{icon:this.repairShop}).addTo(this.map),this.allCities.push(c.results[0]),It.circle([c.results[0].latitude,c.results[0].longitude],550).addTo(this.map).setStyle({color:"red"}))},1e3)}).catch(c=>console.log(c))})},100)}).catch(o=>console.log(o))})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,p=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(p/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}onCloseClick(){this.visible=!0,console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(_e(mi))},e.\u0275cmp=it({type:e,selectors:[["app-leaflat-map"]],inputs:{coins:"coins"},outputs:{hideMap:"hideMap"},standalone:!0,features:[ut],decls:28,vars:13,consts:[[1,"items"],["id","coins"],["id","icon"],["src","../../assets/icon%20(2).png"],["id","text"],["id","cars"],["src","../../assets/icon%20(3).png"],["id","gems"],["src","../../assets/icon%20(1).png"],[1,"map-container"],[1,"map-frame"],["id","map"],["id","carCard",3,"z-Index","display"],["id","user"],["width","50px","height","50px",3,"src"],["id","carCard"],["id","closeBtn",3,"click"],["width","50px","height","50px",3,"click","src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px",3,"click"]],template:function(r,o){r&1&&($(0,"div",0)(1,"div",1)(2,"div",2),de(3,"img",3),G(),$(4,"div",4)(5,"p"),J(6),ei(7,"currency"),G()()(),$(8,"div",5)(9,"div",2),de(10,"img",6),G(),$(11,"div",4)(12,"p"),J(13),G()()(),$(14,"div",7)(15,"div",2),de(16,"img",8),G(),$(17,"div",4)(18,"p"),J(19),G()()()(),$(20,"div",9)(21,"div",10),de(22,"div",11),G()(),Me(23,OH,9,6,"div",12),$(24,"div",13),Me(25,LH,1,1,"img",14)(26,FH,1,1)(27,VH,1,0),G()),r&2&&(q(6),pt(Mi(7,11,o.coins)),q(7),pt(o.cars),q(6),pt(o.gems),q(),Te("display",o.visible?"block":"none"),q(),Te("display",o.visible?"block":"none"),q(),Te("display",o.visible?"block":"none"),q(),Ze(23,o.visible==!1?23:-1),q(2),Ze(25,o.user.photoUrl?25:o.user.photoURL?26:27))},dependencies:[hM,rh],styles:['.map-container[_ngcontent-%COMP%]{position:absolute;inset:0;height:calc(100% + -0px)}.items[_ngcontent-%COMP%]{position:absolute;top:25px;left:0;display:flex;z-index:50000;justify-content:space-around;width:100%}#user[_ngcontent-%COMP%]{z-index:50000;position:absolute;bottom:35px;left:15px;width:50px;height:50px}#user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}#buyButton[_ngcontent-%COMP%]{width:80%;height:25px;background-color:green}.items[_ngcontent-%COMP%]   #cars[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #gems[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #coins[_ngcontent-%COMP%]{width:100px;height:25px;background-color:#fff;border:1px black solid;border-radius:2px}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map[_ngcontent-%COMP%]{height:100%}.marker-pin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:500}.marker-pin[_ngcontent-%COMP%]:after{content:"";width:1px;height:1px;margin:3px 0 0 3px;background:#fff;position:absolute;border-radius:50%}.custom-div-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:5px;font-size:5px;left:0;right:0;margin:10px auto;text-align:center}img[_ngcontent-%COMP%]{width:50px;height:55px}#car[_ngcontent-%COMP%]{width:3px;height:3px}#carCard[_ngcontent-%COMP%]{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:5000;background-color:#fff;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}#icon[_ngcontent-%COMP%]{width:30%;height:100%}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:75%}#text[_ngcontent-%COMP%]{width:70%}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-37.5px;left:25px}']});let t=e;return t})();var aR=(()=>{let e=class e{constructor(){fetch("../../assets/cars.json",{method:"GET",redirect:"follow"}).then(i=>i.json()).then(i=>{console.log(i),this.cars=i,console.log(this.cars)}).catch(i=>console.error(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jH(t,e){if(t&1&&(de(0,"br"),$(1,"h1"),J(2),G(),de(3,"img",2),$(4,"div",3)(5,"div",4),J(6),G(),$(7,"div",5),J(8),G(),$(9,"div",6),J(10),G(),$(11,"div",7),J(12),G(),$(13,"div",8),J(14),G(),$(15,"div",9),J(16),G()(),de(17,"br")),t&2){let n=ce();q(),Te("color",n.randomCar.textColor),q(),pt(n.randomCar.Name.toUpperCase()),q(),Be("src",n.randomCar.Path,Yt),q(2),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt("",n.randomCar.Horsepower," hp"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt("",n.randomCar.Miles_per_Gallon," Miles per Gallon"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt("",n.randomCar.Cylinders," Cylinders"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt(" ",n.randomCar.Acceleration,"s 0 - 60 mp/h"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt(" ",n.randomCar.CPS.toFixed(2)," coins per second"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt(" Year: ",n.randomCar.Year," ")}}var cR=(()=>{let e=class e{addCoin(i){console.log(i),this.addCoins.emit(Math.floor(i))}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){if(setTimeout(()=>{this.getRandomCar()},500),localStorage.getItem("mycars")){let i=JSON.parse(localStorage.getItem("mycars"));console.log(localStorage.getItem("mycars"),JSON.parse(localStorage.getItem("mycars"))),console.log("allcars"),console.log(i),this.myCars.push(...i),console.log(this.myCars)}}constructor(i){this.car=i,this.hideMap=new $e,this.addCoins=new $e,this.CPS=0,this.randomCar={car:"Car12",hp:1,topSpeed:152},this.myCars=[],this.allCars=[],this.allCars=this.car.cars}getAllCars(){this.allCars=this.car.cars}getRandomCar(){if(console.log(this.car.cars),this.car.cars){let i=this.car.cars[Math.floor(Math.random()*this.car.cars.length)];console.log(i),this.randomCar=i,this.randomCar.CPS=this.randomCar.Horsepower*this.randomCar.Acceleration*this.randomCar.Cylinders/1e3,this.myCars.push(i),console.log(this.CPS),this.CPS=this.CPS+i.CPS,console.log(this.CPS),this.getCPS(),localStorage.setItem("mycars",JSON.stringify(this.myCars))}}getCPS(){this.addCoin(this.CPS),console.log(this.CPS)}};e.\u0275fac=function(r){return new(r||e)(_e(aR))},e.\u0275cmp=it({type:e,selectors:[["app-car-found"]],outputs:{hideMap:"hideMap",addCoins:"addCoins"},standalone:!0,features:[ut],decls:6,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&($(0,"body")(1,"div",0)(2,"button",1),Ie("click",function(){return o.onCloseClick()}),J(3,"X"),G(),de(4,"br"),Me(5,jH,18,34),G()()),r&2&&(q(),Te("display","block")("background",o.randomCar.Color),q(4),Ze(5,o.randomCar.Color?5:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;height:30px;padding-top:7.5px}"]});let t=e;return t})();function zH(t,e){if(t&1&&(de(0,"br"),$(1,"h1"),J(2),G(),de(3,"img",2),$(4,"div",3)(5,"div",4),J(6),G(),$(7,"div",5),J(8),G(),$(9,"div",6),J(10),G(),$(11,"div",7),J(12),G(),$(13,"div",8),J(14),G(),$(15,"div",9),J(16),G()(),de(17,"br")),t&2){let n=ce();q(),Te("color",n.Car.textColor),q(),pt(n.Car.Name.toUpperCase()),q(),Be("src",n.Car.Path,Yt),q(2),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt("",n.Car.Horsepower," hp"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt("",n.Car.Miles_per_Gallon," Miles per Gallon"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt("",n.Car.Cylinders," Cylinders"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt(" ",n.Car.Acceleration,"s 0 - 60 mp/h"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt(" ",n.Car.CPS.toFixed(2)," coins per second"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt(" Year: ",n.Car.Year," ")}}var lR=(()=>{let e=class e{constructor(){this.close=new $e}ngOnInit(){console.log(this.Car)}closeClick(){this.close.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-select-car"]],inputs:{Car:"Car"},outputs:{close:"close"},standalone:!0,features:[ut],decls:5,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&($(0,"div",0)(1,"button",1),Ie("click",function(){return o.closeClick()}),J(2,"X"),G(),de(3,"br"),Me(4,zH,18,34),G()),r&2&&(Te("display","block")("background",o.Car.Color),q(4),Ze(4,o.Car.Color?4:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;min-height:30px;padding-top:7.5px}"]});let t=e;return t})();function UH(t,e){if(t&1&&($(0,"p"),J(1),G()),t&2){let n=ce().$implicit;q(),lt("LVL: ",n.level,"")}}function HH(t,e){if(t&1){let n=bt();$(0,"div",6),Ie("click",function(){let r=at(n).$implicit,o=ce(3);return ct(o.openCar(r))}),de(1,"br")(2,"img",7)(3,"br"),$(4,"p"),J(5),G(),Me(6,UH,2,1,"p"),G()}if(t&2){let n=e.$implicit;Te("background",n.Color),q(2),Be("src",n.Path,Yt),q(3),pt(n.Name),q(),Ze(6,n.level?6:-1)}}function $H(t,e){if(t&1&&Qo(0,HH,7,5,"div",5,Ko),t&2){let n=ce(2);Yo(n.myCars)}}function qH(t,e){if(t&1){let n=bt();$(0,"div",0),Me(1,$H,2,0),G(),$(2,"div",1),Ie("click",function(){at(n);let r=ce();return ct(r.onCloseClick())}),$(3,"div",2),Ie("click",function(){at(n);let r=ce();return ct(r.onCloseClick())}),$(4,"button",3),Ie("click",function(){at(n);let r=ce();return ct(r.onCloseClick())}),de(5,"img",4),G()()()}if(t&2){let n=ce();q(),Ze(1,n.myCars?1:-1)}}function GH(t,e){if(t&1){let n=bt();$(0,"app-select-car",9),Ie("close",function(){at(n);let r=ce(2);return ct(r.closeSelectedCar())}),G()}if(t&2){let n=ce(2);Be("Car",n.selectedCar)}}function WH(t,e){if(t&1&&Me(0,GH,1,1,"app-select-car",8),t&2){let n=ce();Ze(0,n.selectedCar?0:-1)}}var uR=(()=>{let e=class e{constructor(){this.hideMap=new $e,this.carVisible=!0}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}openCar(i){this.selectedCar=i,this.carVisible=!1}closeSelectedCar(){this.carVisible=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-my-cars"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[ut],decls:2,vars:1,consts:[[1,"container"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["id","car",3,"background"],["id","car",3,"click"],["width","50%","height","auto",3,"src"],[3,"Car"],[3,"close","Car"]],template:function(r,o){r&1&&Me(0,qH,6,1)(1,WH,1,1),r&2&&Ze(0,o.carVisible==!0?0:1)},dependencies:[lR],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();function ZH(t,e){if(t&1&&de(0,"img",5),t&2){let n=ce(2);Be("src",n.user.photoUrl,Yt)}}function KH(t,e){t&1&&de(0,"img",6)}function QH(t,e){if(t&1&&($(0,"div",4),Me(1,ZH,1,1,"img",5)(2,KH,1,0),$(3,"p"),J(4),G()(),de(5,"br")),t&2){let n=ce();q(),Ze(1,n.user.photoUrl?1:2),q(3),pt(n.user.displayName)}}function YH(t,e){if(t&1&&($(0,"div",7)(1,"p"),J(2),G()(),$(3,"div",8),de(4,"img",9),G()),t&2){let n=ce();q(2),pt(n.key),q(2),Be("src","https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+n.key,Yt)}}var dR=(()=>{let e=class e{constructor(i){this.auth=i,this.addFriend=new $e,this.key=localStorage.getItem("key"),i.user$.subscribe(r=>{console.log(r),this.user=r}),this.key=localStorage.getItem("key")}onFriendAdd(i){console.log(i),this.addFriend.emit(i)}};e.\u0275fac=function(r){return new(r||e)(_e(mi))},e.\u0275cmp=it({type:e,selectors:[["app-add-friend"]],outputs:{addFriend:"addFriend"},standalone:!0,features:[ut],decls:9,vars:2,consts:[["friendInput",""],["id","input"],["type","text"],[3,"click"],[1,"user","container"],["width","50px","height","50px",3,"src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px"],["id","key"],["id","qr"],["alt","","width","150px","height","150px",3,"src"]],template:function(r,o){if(r&1){let a=bt();Me(0,QH,6,2)(1,YH,5,2),$(2,"p"),J(3,"Add Friend"),G(),$(4,"div",1),de(5,"input",2,0),$(7,"button",3),Ie("click",function(){at(a);let u=hm(6);return ct(o.onFriendAdd(u.value))}),J(8,"Add Friend"),G()()}r&2&&(Ze(0,o.user?0:-1),q(),Ze(1,o.key?1:-1))},styles:[".user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#qr[_ngcontent-%COMP%]{width:175px;height:175px;border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#qr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:12.5px}*[_ngcontent-%COMP%]{text-align:center}#key[_ngcontent-%COMP%]{border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#input[_ngcontent-%COMP%]{margin:auto}"]});let t=e;return t})();function XH(t,e){if(t&1&&($(0,"div",5),de(1,"img",6),$(2,"p",7),J(3),G()()),t&2){let n=ce().$implicit;q(),Be("src",n.photoUrl,Yt),q(2),pt(n.displayName)}}function JH(t,e){if(t&1&&Me(0,XH,4,2,"div",5),t&2){let n=e.$implicit;Ze(0,n?0:-1)}}var hR=(()=>{let e=class e{constructor(i){this.auth=i,this.hideMap=new $e,this.friends=[],this.friendData=[]}ngOnInit(){localStorage.getItem("friends")&&(this.friends=JSON.parse(localStorage.getItem("friends"))),this.getAllFriends()}addFriend(i){console.log(i,i.length),i.length>20&&i.length<32&&(this.friends.push(i),localStorage.setItem("friends",JSON.stringify(this.friends))),this.getAllFriends()}removeDup(i){let r=[];return i.forEach((o,a)=>{r.indexOf(o)===-1&&r.push(o)}),r}getAllFriends(){this.friendData=[],this.removeDup(this.friends).forEach(i=>{console.log(i),console.log(this.auth.getUserData(i).subscribe(r=>{console.log(r),this.friendData.push(r[0])}))})}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(_e(mi))},e.\u0275cmp=it({type:e,selectors:[["app-friends"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[ut],decls:7,vars:0,consts:[[3,"addFriend"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"user","container"],["width","50px","height","50px",3,"src"],["id","username"]],template:function(r,o){r&1&&($(0,"app-add-friend",0),Ie("addFriend",function(c){return o.addFriend(c)}),G(),Qo(1,JH,1,1,null,null,Ko),$(3,"div",1),Ie("click",function(){return o.onCloseClick()}),$(4,"div",2),Ie("click",function(){return o.onCloseClick()}),$(5,"button",3),Ie("click",function(){return o.onCloseClick()}),de(6,"img",4),G()()()),r&2&&(q(),Yo(o.friendData))},dependencies:[dR],styles:['*[_ngcontent-%COMP%]{text-align:center}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#username[_ngcontent-%COMP%]{width:250px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var fR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[Pr]});let t=e;return t})();function e$(t,e){if(t&1&&de(0,"img",20),t&2){let n=ce(2);Be("src",n.user.photoUrl,Yt)}}function t$(t,e){if(t&1&&de(0,"img",20),t&2){let n=ce(2);Be("src",n.user.photoURL,Yt)}}function n$(t,e){t&1&&de(0,"img",21)}function i$(t,e){if(t&1&&($(0,"div",5),Me(1,e$,1,1,"img",20)(2,t$,1,1)(3,n$,1,0),$(4,"p"),J(5),G()()),t&2){let n=ce();q(),Ze(1,n.user.photoUrl?1:n.user.photoURL?2:3),q(4),pt(n.user.displayName)}}var pR=(()=>{let e=class e{ngOnChanges(i){this.cps=+localStorage.getItem("cps")}constructor(i){this.auth=i,this.hideMap=new $e,this.cps=+localStorage.getItem("cps"),this.user=JSON.parse(localStorage.getItem("userData")),this.progress=0,localStorage.getItem("userData")?(console.log(JSON.parse(localStorage.getItem("userData"))),this.user=JSON.parse(localStorage.getItem("userData")),console.log(this.user),this.user.photoUrl=this.user.photoURL):(i.user$.subscribe(r=>{console.log(r),r&&(this.user=r)}),i.getDataFromUser(r=>{}))}onLogoutClick(){localStorage.removeItem("key"),this.auth.signOut(),window.location.reload()}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(_e(mi))},e.\u0275cmp=it({type:e,selectors:[["app-profile"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Qi,ut],decls:69,vars:6,consts:[[1,"logout"],["src","../../assets/image-removebg-preview (11).png","width","30px","height","30px",3,"click"],[1,"menu","container"],[1,"profile"],[1,"friends"],[1,"user","container"],[1,"container","level"],[1,"Level"],[1,"Progressbar"],["id","progress"],["id","fortschritt"],[1,"container"],["id","icon",3,"click"],["src","../../assets/car_icon.png","width","50px","height","50px"],["src","../../assets/addFriends_icon.png","width","50px","height","50px"],["id","icon"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["width","50px","height","50px",3,"src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px"]],template:function(r,o){r&1&&($(0,"div",0)(1,"img",1),Ie("click",function(){return o.onLogoutClick()}),G()(),$(2,"div",2),de(3,"div",3)(4,"div",4),G(),Me(5,i$,6,2,"div",5),de(6,"br"),$(7,"div",6)(8,"div",7)(9,"p"),J(10,"1"),G(),$(11,"p"),J(12,"LEVEL"),G()(),$(13,"div",8)(14,"div",9)(15,"p",10),J(16,"7.125/ 10000"),G()()()(),de(17,"hr"),$(18,"div",11)(19,"div",12),Ie("click",function(){return o.hideMap.emit("garage")}),de(20,"img",13),$(21,"p"),J(22,"Garage"),G()(),$(23,"div",12),Ie("click",function(){return o.hideMap.emit("friends")}),de(24,"img",14),$(25,"p"),J(26,"Friends"),G()(),$(27,"div",15),de(28,"img",13),$(29,"p"),J(30,"Garage"),G()(),$(31,"div",15),de(32,"img",13),$(33,"p"),J(34,"Garage"),G()()(),de(35,"br")(36,"br")(37,"hr"),$(38,"div",11)(39,"p"),J(40,"Gelaufene Distanz"),G(),$(41,"p"),J(42,"1.5 km"),G()(),$(43,"div",11)(44,"p"),J(45,"Current CPS:"),G(),$(46,"p"),J(47),ei(48,"currency"),G()(),$(49,"div",11)(50,"p"),J(51,"Gelaufene Distanz"),G(),$(52,"p"),J(53,"1.5 km"),G()(),$(54,"div",11)(55,"p"),J(56,"Gelaufene Distanz"),G(),$(57,"p"),J(58,"1.5 km"),G()(),$(59,"div",11)(60,"p"),J(61,"Gelaufene Distanz"),G(),$(62,"p"),J(63,"1.5 km"),G()(),de(64,"hr"),$(65,"div",16),Ie("click",function(){return o.onCloseClick()}),$(66,"div",17),Ie("click",function(){return o.onCloseClick()}),$(67,"button",18),Ie("click",function(){return o.onCloseClick()}),de(68,"img",19),G()()()),r&2&&(q(5),Ze(5,o.user?5:-1),q(9),Te("width",o.progress+"%"),q(33),pt(Mi(48,4,o.cps)))},dependencies:[fR,rh],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}.logout[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e53d31;border-radius:50%;position:absolute;right:5px}.logout[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px}img[_ngcontent-%COMP%]{margin:0 auto auto}#icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e96245;border-radius:50%;border:0px}.Progressbar[_ngcontent-%COMP%]{width:80%;height:50px;border-radius:50px}#progress[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#000;border-radius:50px}#fortschritt[_ngcontent-%COMP%]{margin-left:150px;width:150px}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var r$=["canvas"],o$=["rLabel"],s$=["reading"],a$=[[["ngx-gauge-prepend"]],[["ngx-gauge-value"]],[["ngx-gauge-append"]],[["ngx-gauge-label"]]],c$=["ngx-gauge-prepend","ngx-gauge-value","ngx-gauge-append","ngx-gauge-label"];function l$(t,e){t&1&&Ji(0,0,["*ngSwitchCase","true"])}function u$(t,e){if(t&1&&(oa(0),J(1),sa()),t&2){let n=ce();q(),pt(n.prepend)}}function d$(t,e){t&1&&Ji(0,1,["*ngSwitchCase","true"])}function h$(t,e){if(t&1&&(oa(0),J(1),ei(2,"number"),sa()),t&2){let n=ce();q(),pt(Mi(2,1,n.value))}}function f$(t,e){t&1&&Ji(0,2,["*ngSwitchCase","true"])}function p$(t,e){if(t&1&&(oa(0),J(1),sa()),t&2){let n=ce();q(),pt(n.append)}}function m$(t,e){t&1&&Ji(0,3,["*ngSwitchCase","true"])}function g$(t,e){if(t&1&&(oa(0),J(1),sa()),t&2){let n=ce();q(),pt(n.label)}}function mR(t,e,n){return Math.max(e,Math.min(n,t))}function _$(t){return t!=null&&`${t}`!="false"}function Zh(t,e=0){return isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function gR(t){return`${t}px`}function _R(t){return t!=null&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}var v$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-append"]],exportAs:["ngxGaugeAppend"]});let t=e;return t})(),y$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-prepend"]],exportAs:["ngxGaugePrepend"]});let t=e;return t})(),b$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-value"]],exportAs:["ngxGaugeValue"]});let t=e;return t})(),w$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-label"]],exportAs:["ngxGaugeLabel"]});let t=e;return t})(),Ur={MIN:0,MAX:100,TYPE:"arch",THICK:4,FOREGROUND_COLOR:"rgba(0, 150, 136, 1)",BACKGROUND_COLOR:"rgba(0, 0, 0, 0.1)",CAP:"butt",SIZE:200},vR=(()=>{let e=class e{get size(){return this._size}set size(i){this._size=Zh(i)}get margin(){return this._margin}set margin(i){this._margin=Zh(i)}get min(){return this._min}set min(i){this._min=Zh(i,Ur.MIN)}get animate(){return this._animate}set animate(i){this._animate=_$(i)}get max(){return this._max}set max(i){this._max=Zh(i,Ur.MAX)}get value(){return this._value}set value(i){this._value=Zh(i)}constructor(i,r){this._elementRef=i,this._renderer=r,this._size=Ur.SIZE,this._min=Ur.MIN,this._max=Ur.MAX,this._animate=!0,this._margin=0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=Ur.TYPE,this.cap=Ur.CAP,this.thick=Ur.THICK,this.foregroundColor=Ur.FOREGROUND_COLOR,this.backgroundColor=Ur.BACKGROUND_COLOR,this.thresholds=Object.create(null),this.markers=Object.create(null),this._value=0,this.duration=1200}ngOnInit(){this.markers&&Object.keys(this.markers).length>0&&!this._margin&&(this._margin=10)}ngOnChanges(i){let r=i.thick||i.type||i.cap||i.size,o=i.value||i.min||i.max;if(this._initialized){if(o){let a;if(i.value){a=Number(i.value.currentValue),a=isNaN(a)?0:a;let c=Number(i.value.previousValue);this._oldChangeVal=isNaN(c)?this._oldChangeVal:c}this._update(a,this._oldChangeVal)}r&&(this._destroy(),this._init())}}_updateSize(){this._renderer.setStyle(this._elementRef.nativeElement,"width",gR(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",gR(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-this.size*.22/2)+"px)")}ngAfterViewInit(){this._canvas&&this._init()}ngOnDestroy(){this._destroy()}_getBounds(i){let r,o,a,c;return i=="semi"?(r=Math.PI,o=2*Math.PI,a=180,c=360):i=="full"?(r=1.5*Math.PI,o=3.5*Math.PI,a=270,c=a+360):i==="arch"&&(r=.8*Math.PI,o=2.2*Math.PI,a=180-.2*180,c=360+.2*180),{head:r,tail:o,start:a,end:c}}_drawShell(i,r,o,a){let c=this._getCenter(),u=this._getRadius();if(this._initialized){this._clear(),this._drawMarkersAndTicks();let f=this._getBackgroundColorRanges();if(this._context.lineWidth=this.thick,f&&f.length>0){this._context.lineCap="butt";for(let p=0;p<f.length;++p){let _=f[p];this._context.beginPath(),this._context.strokeStyle=_.backgroundColor?_.backgroundColor:_.bgOpacity?_.color:this.backgroundColor,_.bgOpacity!==void 0&&_.bgOpacity!==null&&(this._context.globalAlpha=_.bgOpacity),this._context.arc(c.x,c.y,u,this._getDisplacement(_.start),this._getDisplacement(_.end),!1),this._context.stroke(),this._context.globalAlpha=1}}else this._context.lineCap=this.cap,this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(c.x,c.y,u,i,o,!1),this._context.stroke();this._drawFill(i,r,o,a)}}_drawFill(i,r,o,a){let c=this._getCenter(),u=this._getRadius();this._context.lineCap=this.cap,this._context.lineWidth=this.thick,r=Math.max(r,i),r=Math.min(r,o),this._context.lineCap=this.cap,this._context.lineWidth=this.thick,this._context.beginPath(),this._context.strokeStyle=a,this._context.arc(c.x,c.y,u,i,r,!1),this._context.stroke()}_addMarker(i,r,o,a,c,u){var f=i*Math.PI/180;let p=2;c||(c=8),a||(a="line");let _=this._getCenter(),b=this._getRadius(),I=(b+this.thick/2+p)*Math.cos(f)+_.x,M=(b+this.thick/2+p)*Math.sin(f)+_.y,P=(b+this.thick/2+p+c)*Math.cos(f)+_.x,F=(b+this.thick/2+p+c)*Math.sin(f)+_.y;if(a=="triangle"){this._context.beginPath(),this._context.strokeStyle=r,this._context.moveTo(I,M),this._context.lineWidth=1;let W=i-45,X=i+45;W<0&&(W+=360),W>360&&(W-=360),X<0&&(X+=360),X>360&&(X-=360);let Z=W*Math.PI/180,se=c*Math.cos(Z)+I,pe=c*Math.sin(Z)+M;this._context.lineTo(se,pe);let he=X*Math.PI/180,S=c*Math.cos(he)+I,E=c*Math.sin(he)+M;this._context.lineTo(S,E),this._context.lineTo(I,M),this._context.closePath(),this._context.stroke(),this._context.fillStyle=r,this._context.fill()}else this._context.beginPath(),this._context.lineWidth=.5,this._context.strokeStyle=r,this._context.moveTo(I,M),this._context.lineTo(P,F),this._context.closePath(),this._context.stroke();o&&(this._context.save(),this._context.translate(P,F),this._context.rotate((i+90)*(Math.PI/180)),this._context.textAlign="center",this._context.font=u||"13px Arial",this._context.fillText(o,0,-3),this._context.restore())}_clear(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())}_getWidth(){return this.size}_getHeight(){return this.size}_getCanvasHeight(){return this.type=="arch"||this.type=="semi"?.85*this._getHeight():this._getHeight()}_getRadius(){var r=this._getCenter().x-this.thick;return this._margin>0&&(r-=this._margin),r}_getCenter(){var i=this._getWidth()/2,r=this._getHeight()/2;return{x:i,y:r}}_init(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._create()}_destroy(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1}_getForegroundColorByRange(i){let r=this._getThresholdMatchForValue(i);return r&&r.color?r.color:this.foregroundColor}_getThresholdMatchForValue(i){let r=Object.keys(this.thresholds).filter(function(o){return _R(o)&&Number(o)<=i}).sort((o,a)=>Number(o)-Number(a)).reverse()[0];if(r!==void 0){let o=this.thresholds[r];return{color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity,start:Number(r),end:this._getNextThreshold(Number(r))}}}_getNextThreshold(i){let r=Object.keys(this.thresholds).filter(function(o){return _R(o)&&Number(o)>i}).sort((o,a)=>Number(o)-Number(a));return r&&r[0]!==void 0?Number(r[0]):this.max}_getBackgroundColorRanges(){let i=0,r=[];do{let o=this._getThresholdMatchForValue(i);if(o){if(r.push({start:o.start,end:o.end,color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity}),i=o.end,i>=this.max)break}else break}while(!0);return r}_getDisplacement(i){let r=this.type,o=this._getBounds(r),a=this.min,c=this.max,u=o.head,f=mR(i,this.min,this.max),p=(o.tail-o.head)/(c-a),_=p*(f-a);return u+_}_create(i,r){let o=this,a=this.type,c=this._getBounds(a),u=this.duration,f=this.min,p=this.max,_=mR(this.value,f,p),b=c.head,I=(c.tail-c.head)/(p-f),M=I*(_-f),P=c.tail,F=this._getForegroundColorByRange(_),W;o._animationRequestID&&window.cancelAnimationFrame(o._animationRequestID);let X=Z=>{Z=Z||new Date().getTime();let se=Z-W,pe=Math.min(se/u,1),he=r?(r-f)*I:0,S=b+he+M*pe;o._drawShell(b,S,P,F),o._animationRequestID&&se<u?o._animationRequestID=window.requestAnimationFrame(E=>X(E)):window.cancelAnimationFrame(o._animationRequestID)};this._animate?(i!==void 0&&r!==void 0&&r!==0&&(M=I*i-I*r),o._animationRequestID=window.requestAnimationFrame(Z=>{W=Z||new Date().getTime(),X(W)})):o._drawShell(b,b+M,P,F)}_drawMarkersAndTicks(){if(this.markers){let i=this._getBounds(this.type),o=(i.end-i.start)/(this.max-this.min);for(let a in this.markers){let c=Number(a)-this.min,u=i.start+c*o,f=this.markers[a];this._addMarker(u,f.color,f.label,f.type,f.size,f.font)}}}_update(i,r){this._clear(),this._create(i,r)}};e.\u0275fac=function(r){return new(r||e)(_e(Dt),_e(xd))},e.\u0275cmp=it({type:e,selectors:[["ngx-gauge"]],contentQueries:function(r,o,a){if(r&1&&(nl(a,w$,5),nl(a,y$,5),nl(a,v$,5),nl(a,b$,5)),r&2){let c;Xn(c=Jn())&&(o._labelChild=c.first),Xn(c=Jn())&&(o._prependChild=c.first),Xn(c=Jn())&&(o._appendChild=c.first),Xn(c=Jn())&&(o._valueDisplayChild=c.first)}},viewQuery:function(r,o){if(r&1&&(lo(r$,7),lo(o$,7),lo(s$,7)),r&2){let a;Xn(a=Jn())&&(o._canvas=a.first),Xn(a=Jn())&&(o._label=a.first),Xn(a=Jn())&&(o._reading=a.first)}},hostAttrs:["role","slider","aria-readonly","true"],hostVars:7,hostBindings:function(r,o){r&2&&(Xi("aria-valuemin",o.min)("aria-valuemax",o.max)("aria-valuenow",o.value)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby),Tr("ngx-gauge-meter",!0))},inputs:{ariaLabel:[mt.None,"aria-label","ariaLabel"],ariaLabelledby:[mt.None,"aria-labelledby","ariaLabelledby"],size:"size",margin:"margin",min:"min",animate:"animate",max:"max",type:"type",cap:"cap",thick:"thick",label:"label",append:"append",prepend:"prepend",foregroundColor:"foregroundColor",backgroundColor:"backgroundColor",thresholds:"thresholds",markers:"markers",value:"value",duration:"duration"},features:[Qi],ngContentSelectors:c$,decls:17,vars:16,consts:[["reading",""],["rLabel",""],["canvas",""],[1,"reading-block"],[1,"reading-affix",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch"],[1,"reading-label",3,"ngSwitch"]],template:function(r,o){r&1&&(tl(a$),$(0,"div",3,0)(2,"u",4),Me(3,l$,1,0,"ng-content",5)(4,u$,2,1,"ng-container",5),G(),oa(5,6),Me(6,d$,1,0,"ng-content",5)(7,h$,3,3,"ng-container",5),sa(),$(8,"u",4),Me(9,f$,1,0,"ng-content",5)(10,p$,2,1,"ng-container",5),G()(),$(11,"div",7,1),Me(13,m$,1,0,"ng-content",5)(14,g$,2,1,"ng-container",5),G(),de(15,"canvas",null,2)),r&2&&(Te("font-size",(o.size-o.margin*2)*.22+"px"),q(2),Be("ngSwitch",o._prependChild!=null),q(),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1),q(),Be("ngSwitch",o._valueDisplayChild!=null),q(),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1),q(),Be("ngSwitch",o._appendChild!=null),q(),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1),q(),Te("font-size",(o.size-o.margin*2)/13+"px"),Be("ngSwitch",o._labelChild!=null),q(2),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1))},dependencies:[db,IS,ES],styles:[`.ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}
`],encapsulation:2});let t=e;return t})(),yR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[uo]});let t=e;return t})();var bR=(()=>{let e=class e{transform(i){return JSON.stringify(i,void 0,4).replace(/ /g," ").replace(/\n/g,"")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=xr({name:"prettyjson",type:e,pure:!0,standalone:!0});let t=e;return t})();function C$(t,e){if(t&1&&(J(0),ei(1,"prettyjson"),de(2,"br")),t&2){let n=e.$implicit;lt(" ",Mi(1,1,n),"")}}var wR=(()=>{let e=class e{constructor(i){this.auth=i,this.speedMap=[],this.oldPos={lat:0,lng:0},this.distance=0,this.speed=0,this.gaugeType="semi",this.gaugeValue=this.speed,this.gaugeLabel="Speed",this.gaugeAppendText="km/h",this.auth.userData.subscribe(r=>{console.log("userData:",r),this.speedMap=r.speedMap})}ngOnInit(){setInterval(()=>{let i=localStorage.getItem("key")},500),navigator.geolocation.watchPosition(i=>{this.speed=i.coords.speed*3.6,i.coords.speed&&this.speedMap.push({lat:i.coords.latitude,lng:i.coords.longitude,speed:i.coords.speed,date:new Date})}),setInterval(()=>{this.auth.addDataToUser({speedMap:this.speedMap})},25e3)}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,p=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(p/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}moveMap(i){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.distance=this.distance+2,this.oldPos.lat=i[0],this.oldPos.lng=i[1])}};e.\u0275fac=function(r){return new(r||e)(_e(mi))},e.\u0275cmp=it({type:e,selectors:[["app-when-moving"]],standalone:!0,features:[ut],decls:11,vars:7,consts:[["type","semi",3,"value","label","append","max","thick"]],template:function(r,o){r&1&&($(0,"p"),J(1,"when-moving works!"),G(),$(2,"p"),J(3),G(),$(4,"p"),J(5),G(),de(6,"ngx-gauge",0)(7,"br")(8,"br"),Qo(9,C$,3,3,"br",null,Ko)),r&2&&(q(3),lt("",o.distance," Meter"),q(2),lt("",o.speed," km/h"),q(),Be("value",o.speed)("label",o.gaugeLabel)("append",o.gaugeAppendText)("max",250)("thick",10),q(3),Yo(o.speedMap))},dependencies:[yR,vR,uo,bR]});let t=e;return t})();function E$(t,e){if(t&1){let n=bt();$(0,"div",2),Ie("click",function(){let r=at(n).$implicit,o=ce(2);return ct(o.onCarClick(r))}),de(1,"br")(2,"img",3)(3,"br"),$(4,"p"),J(5),G()()}if(t&2){let n=e.$implicit;Te("background",n.Color),q(2),Be("src",n.Path,Yt),q(3),pt(n.Name)}}function x$(t,e){if(t&1&&Qo(0,E$,6,4,"div",1,Ko),t&2){let n=ce();Yo(n.myCars)}}var IR=(()=>{let e=class e{constructor(){this.selectCar=new $e}onCloseClick(){}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}onCarClick(i){console.log("clicked on car",i),this.selectCar.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-select-car"]],outputs:{selectCar:"selectCar"},standalone:!0,features:[ut],decls:4,vars:1,consts:[[1,"container"],["id","car",3,"background"],["id","car",3,"click"],["width","50%","height","auto",3,"src"]],template:function(r,o){r&1&&($(0,"p"),J(1,"select-car works!"),G(),$(2,"div",0),Me(3,x$,2,0),G()),r&2&&(q(3),Ze(3,o.myCars?3:-1))},styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();var CR=(()=>{let e=class e{transform(i,r,o){if(i>=0){let a,c,u,f;return r==="ms"&&o==="hhmmss"?(c=Math.floor(i/1e3%60),u=Math.floor(i/(1e3*60)%60),f=Math.floor(i/(1e3*60*60)),this.format(o,c,u,f,a)):r==="s"&&o==="hhmmss"?(c=Math.floor(i%60),u=Math.floor(i/60%60),f=Math.floor(i/60/60),this.format(o,c,u,f,a)):r==="ms"&&(o==="ddhhmmss"||o==="ddhhmmssLong")?(c=Math.floor(i/1e3%60),u=Math.floor(i/(1e3*60)%60),f=Math.floor(i/(1e3*60*60)%24),a=Math.floor(i/(1e3*60*60*24)),this.format(o,c,u,f,a)):r==="s"&&(o==="ddhhmmss"||o==="ddhhmmssLong")?(c=Math.floor(i%60),u=Math.floor(i/60%60),f=Math.floor(i/60/60%24),a=Math.floor(i/60/60/24),this.format(o,c,u,f,a)):i}else return"Done"}format(i,r,o,a,c){switch(c<10&&(c="0"+c),a<10&&(a="0"+a),o<10&&(o="0"+o),r<10&&(r="0"+r),i){case"hhmmss":return`${a}:${o}:${r}`;case"ddhhmmss":return`${c}d, ${a}h, ${o}m, ${r}s`;case"ddhhmmssLong":return`${c} days, ${a} hours, ${o} minutes, ${r} seconds`;default:return null}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=xr({name:"durationFormat",type:e,pure:!1,standalone:!0});let t=e;return t})();function D$(t,e){if(t&1&&($(0,"div",6),de(1,"br")(2,"img",7)(3,"br"),$(4,"p"),J(5),G()()),t&2){let n=ce(2);Te("background",n.item.Color)("height","100%"),q(2),Be("src",n.item.Path,Yt),q(3),pt(n.item.Name)}}function T$(t,e){if(t&1){let n=bt();$(0,"div",17)(1,"button",2),Ie("click",function(){at(n);let r=ce(3);return ct(r.onUpgradeCLick())}),J(2),ei(3,"currency"),ei(4,"durationFormat"),G()()}if(t&2){let n=ce(3);q(2),ca("Upgrade Price: ",Mi(3,2,n.item.upgradePrice)," Time: ",Jy(4,4,n.item.upgradeTime,"s","hhmmss"),"")}}function S$(t,e){if(t&1){let n=bt();$(0,"div",17)(1,"button",2),Ie("click",function(){at(n);let r=ce(3);return ct(r.onButtonDoneClick())}),J(2),ei(3,"durationFormat"),G()()}if(t&2){let n=ce(3);q(2),pt(Jy(3,1,n.timeRemaining,"s","hhmmss"))}}function A$(t,e){if(t&1&&($(0,"div",8)(1,"div",9)(2,"div",10),J(3),G(),$(4,"div",11),J(5),G(),$(6,"div",12),J(7),G(),$(8,"div",13),J(9),G(),$(10,"div",14),J(11),G(),$(12,"div",15),J(13),G()()(),de(14,"div",16),Me(15,T$,5,8,"div",17)(16,S$,4,5,"div",17)),t&2){let n=ce(2);q(2),Te("background",n.item.Color)("color",n.item.textColor),q(),ca("",n.item.Horsepower," HP + ",n.item.upgradeHp," HP"),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),ca("",n.item.Miles_per_Gallon," Miles per Gallon - ",n.item.upgradeGallon.toFixed(2)," Miles"),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),lt("",n.item.Cylinders," Cylinders"),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),ca(" ",n.item.Acceleration,"s 0 - 60 mp/h - ",n.item.upgradeZeroSixty.toFixed(2),"s "),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),ca(" ",n.item.CPS.toFixed(2)," cps + ",n.item.upgradeCPS.toFixed(2),""),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),lt(" Year: ",n.item.Year," "),q(2),Ze(15,n.buttonVisible?15:-1),q(),Ze(16,n.buttonVisible?-1:16)}}function M$(t,e){if(t&1){let n=bt();$(0,"div")(1,"p"),J(2,"Choose a car to upgrade"),G(),$(3,"div",4),Ie("click",function(){at(n);let r=ce();return ct(r.onSelectClick())}),Me(4,D$,6,6,"div",5),G(),Me(5,A$,17,36),G()}if(t&2){let n=ce();q(4),Ze(4,n.item?4:-1),q(),Ze(5,n.item?5:-1)}}function P$(t,e){if(t&1){let n=bt();$(0,"app-select-car",18),Ie("selectCar",function(r){at(n);let o=ce();return ct(o.selection(r))}),G()}}var ER=(()=>{let e=class e{constructor(){this.addCoins=new $e,this.hideMap=new $e,this.buttonVisible=!0,this.selectVisible=!1,this.progress="90%"}ngOnInit(){if(localStorage.getItem("upgrade")&&localStorage.getItem("upgradeStart")&&(this.buttonVisible=!1,this.selection(JSON.parse(localStorage.getItem("upgrade")))),setInterval(()=>{if(JSON.parse(localStorage.getItem("upgradeStart"))&&this.timeRemaining>=0){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((a,c)=>{console.log(a,c),a.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(JSON.stringify(o)),o.push(this.item);let a=localStorage.getItem("cps");a=a+this.item.upgradeCPS,localStorage.setItem("cps",a),localStorage.setItem("mycars",JSON.stringify(o))},500)}}},500),JSON.parse(localStorage.getItem("upgradeStart"))){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((a,c)=>{console.log(a,c),a.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(o),o.push(this.item);let a=localStorage.getItem("cps");a=a+this.item.upgradeCPS,localStorage.setItem("cps",a),localStorage.setItem("mycars",JSON.stringify(o))},500)}}}onButtonDoneClick(){console.log("done"),this.timeRemaining<=0&&(localStorage.removeItem("upgrade"),localStorage.removeItem("upgradeStart"),console.log("done"),this.hideMap.emit("exit"))}onSelectClick(){this.buttonVisible&&(console.log("onSelectClick"),this.selectVisible=!0)}selection(i){this.selectVisible=!1,console.log(i),this.item=i,this.upgradeValues(),this.timeRemaining>0&&(this.progress=`${this.timeRemaining}`)}onUpgradeCLick(){localStorage.getItem("coins")>this.item.upgradePrice&&(this.item&&localStorage.setItem("upgrade",JSON.stringify(this.item)),localStorage.setItem("upgradeStart",JSON.stringify(new Date)),this.addCoins.emit(-1*this.item.upgradePrice),this.buttonVisible=!1,this.item.level?this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.25,upgradeTime:28800,upgradePrice:25e4}:this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*(+this.item.Cylinders/1e3),upgradeZeroSixty:this.item.Acceleration*.05,upgradeTime:28800,upgradePrice:25e4},setInterval(()=>{if(JSON.parse(localStorage.getItem("upgradeStart"))&&this.timeRemaining>=0){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((a,c)=>{console.log(a,c),a.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(JSON.stringify(o)),o.push(this.item);let a=localStorage.getItem("cps");a=a+this.item.upgradeCPS,localStorage.setItem("cps",a),localStorage.setItem("mycars",JSON.stringify(o))},500)}}},500))}upgradeValues(){this.item.level?this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.25,upgradeTime:28800,upgradePrice:25e4,level:this.item.level+1}:this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.05,upgradeTime:28800,upgradePrice:25e4,level:2}}onCloseClick(){this.hideMap.emit("exit")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-garage"]],outputs:{addCoins:"addCoins",hideMap:"hideMap"},standalone:!0,features:[ut],decls:6,vars:2,consts:[["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"selectCar",3,"click"],["id","car",3,"background","height"],["id","car"],["width","50%","height","auto",3,"src"],[1,"upgrades"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"],[1,"level"],[1,"upgradeBtn"],[3,"selectCar"]],template:function(r,o){r&1&&(Me(0,M$,6,2,"div")(1,P$,1,0,"app-select-car"),$(2,"div",0),Ie("click",function(){return o.onCloseClick()}),$(3,"div",1),Ie("click",function(){return o.onCloseClick()}),$(4,"button",2),Ie("click",function(){return o.onCloseClick()}),de(5,"img",3),G()()()),r&2&&(Ze(0,o.selectVisible?-1:0),q(),Ze(1,o.selectVisible?1:-1))},dependencies:[IR,uo,xS,CR],styles:['.selectCar[_ngcontent-%COMP%]{width:20%;height:25vh;background-color:#d9d9d9;border:black solid 1px;margin:auto;min-width:150px}*[_ngcontent-%COMP%]{text-align:center}.upgrades[_ngcontent-%COMP%]{width:80%;height:auto;background-color:#d9d9d9;border:black solid 1px;margin:50px auto auto}.upgradeBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;height:10vh;background-color:#000;border-radius:50px;color:#fff}.upgradeBtn[_ngcontent-%COMP%]{margin-top:50px}#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;min-height:30px;padding-top:7.5px}#progress[_ngcontent-%COMP%]{height:10vh;position:relative;top:-10vh;left:calc(50% - 185px);border-radius:50px;background-color:red;border:1px blue solid;z-index:1}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;right:0}.closeBtn[_ngcontent-%COMP%]{position:absolute;bottom:35px;left:calc(50% - 25px)}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();function k$(t,e){if(t&1){let n=bt();$(0,"app-car-found",3),Ie("hideMap",function(r){at(n);let o=ce(2);return ct(o.switchVisibile(r))})("addCoins",function(r){at(n);let o=ce(2);return ct(o.addCoins(r))}),G()}}function R$(t,e){if(t&1){let n=bt();$(0,"app-my-cars",4),Ie("hideMap",function(r){at(n);let o=ce(2);return ct(o.switchVisibile(r))}),G()}}function N$(t,e){if(t&1){let n=bt();$(0,"app-profile",4),Ie("hideMap",function(r){at(n);let o=ce(2);return ct(o.switchVisibile(r))}),G()}}function O$(t,e){if(t&1){let n=bt();$(0,"app-friends",4),Ie("hideMap",function(r){at(n);let o=ce(2);return ct(o.switchVisibile(r))}),G()}}function L$(t,e){if(t&1&&(J(0),de(1,"app-when-moving")),t&2){let n=ce(2);lt(" ",n.speed," ")}}function F$(t,e){if(t&1){let n=bt();$(0,"app-garage",5),Ie("addCoins",function(r){at(n);let o=ce(2);return ct(o.addSingleCoin(r))})("hideMap",function(r){at(n);let o=ce(2);return ct(o.switchVisibile(r))}),G()}}function V$(t,e){if(t&1){let n=bt();$(0,"div",1)(1,"app-leaflat-map",2),Ie("hideMap",function(r){at(n);let o=ce();return ct(o.switchVisibile(r))}),G(),Me(2,k$,1,0,"app-car-found")(3,R$,1,0,"app-my-cars")(4,N$,1,0)(5,O$,1,0)(6,L$,2,1)(7,F$,1,0),G()}if(t&2){let n=ce();q(),Te("display",n.visible?"block":"none"),Be("coins",n.coins),q(),Ze(2,!n.visible&&n.currentVisible=="carFound"?2:-1),q(),Ze(3,!n.visible&&n.currentVisible=="garage"?3:!n.visible&&n.currentVisible=="profile"?4:!n.visible&&n.currentVisible=="friends"?5:!n.visible&&n.currentVisible=="whenMoving"?6:!n.visible&&n.currentVisible=="garageClick"?7:-1)}}function B$(t,e){if(t&1){let n=bt();$(0,"div"),J(1),de(2,"hr"),$(3,"button",7),Ie("click",function(){at(n);let r=ce(2);return ct(r.auth.signOut())}),J(4,"Sign Out"),G()()}if(t&2){let n=e.ngIf;q(),lt(" ",n.jsonData,`
`)}}function j$(t,e){if(t&1){let n=bt();$(0,"button",7),Ie("click",function(){at(n);let r=ce(2);return ct(r.signIn())}),J(1,"Login"),G(),de(2,"br")(3,"br")}}function z$(t,e){if(t&1&&(Me(0,B$,5,1,"div",6),ei(1,"async"),Me(2,j$,4,0,"ng-template",null,0,XT)),t&2){let n=hm(3),i=ce();Be("ngIf",Mi(1,2,i.auth.user$))("ngIfElse",n)}}var xR=(()=>{let e=class e{constructor(i){this.auth=i,this.key=localStorage.getItem("key"),this.title="world-clicker",this.cps=0,this.coins=0,this.visible=!0}signIn(){this.auth.googleSignin(),setInterval(()=>{localStorage.getItem("key")&&window.location.reload()},500)}addSingleCoin(i){this.coins=this.coins+ +i,localStorage.setItem("coins",this.coins.toString())}addCoins(i){console.log("coin:",i),this.cps=+this.cps+ +i,localStorage.setItem("cps",this.cps.toString())}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),navigator.geolocation.watchPosition(i=>{let r=i.coords.speed*3.6;console.log("hier",r),this.speed=r;var o;r>25?(o=!0,this.switchVisibile("whenMoving")):o==!0&&(this.switchVisibile("exit"),o=!1)}),console.log(this.auth.user$,this.auth.currentUser,this.auth.userData.subscribe(i=>{console.log("update:"),console.log(i,i.update);var r=new Date().getTime()/1e3;i.update&&(console.log(r,i.update,r-i.update),this.coins=+localStorage.getItem("coins")+ +localStorage.getItem("cps")*(r-i.update)/2,console.log(this.coins))})),localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins"))),setInterval(()=>{Math.floor(this.coins=this.coins+this.cps),localStorage.setItem("coins",this.coins.toString())},1e3),this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps")}),setInterval(()=>{var i=new Date().getTime()/1e3;this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps"),update:i})},25e3)}updateUserDat(i){this.auth.addDataToUser(i)}switchVisibile(i){i=="exit"&&(this.visible=!0,this.currentVisible="exit"),i!="exit"&&(this.visible=!1,this.currentVisible=i),console.log(i),console.log(this.visible),console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(_e(mi))},e.\u0275cmp=it({type:e,selectors:[["app-root"]],standalone:!0,features:[ut],decls:2,vars:1,consts:[["login",""],[1,"App"],[3,"hideMap","coins"],[3,"hideMap","addCoins"],[3,"hideMap"],[3,"addCoins","hideMap"],[4,"ngIf","ngIfElse"],[1,"button",3,"click"]],template:function(r,o){r&1&&Me(0,V$,8,5,"div",1)(1,z$,4,4),r&2&&Ze(0,o.key?0:1)},dependencies:[ER,sR,cR,uR,uo,wS,CS,hR,pR,wR],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.App[_ngcontent-%COMP%]{text-align:center}app-leaflet-map[_ngcontent-%COMP%]{height:100%}.push[_ngcontent-%COMP%]{height:calc(100% - 150px)}app-navigation[_ngcontent-%COMP%]{width:100%;height:100px;left:0;z-index:545}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}button[_ngcontent-%COMP%]{position:absolute;left:30%;top:45vh}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}"]});let t=e;return t})();LS(xR,CA).catch(t=>console.error(t));
========
        `).openOn(this.map);document.getElementById("buyButton").addEventListener("click",c=>{if(console.log(c),console.log(r.latlng),this.coins>this.garagePrice.price){console.log("passt"),this.coins=this.coins-this.garagePrice.price,this.garagePrice.price=this.garagePrice.price*15,this.allGarages.push({lat:r.latlng.lat,lng:r.latlng.lng}),console.log(this.allGarages),localStorage.setItem("garages",JSON.stringify(this.allGarages)),localStorage.setItem("garagePrice",JSON.stringify(this.garagePrice));let u=It.marker([r.latlng.lat,r.latlng.lng],{icon:this.garageIcon}).addTo(this.map).on("click",p=>{console.log(p,p.latlng,this.currentPos),console.log();let _=this.getDistance([p.latlng.lat,p.latlng.lng],[this.currentPos.coords.latitude,this.currentPos.coords.longitude]);console.log("distance:",_),_<100&&this.hideMap.emit("garageClick")}),f=It.circle([r.latlng.lat,r.latlng.lng],100).addTo(this.map).setStyle({color:"#20C912"})}})}),this.moveMap([49,12]);let i=It.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:20,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'});navigator.geolocation.watchPosition(r=>{let o=r.coords.latitude,a=r.coords.longitude,c=r.coords.accuracy;setTimeout(()=>{It.marker([49.3,10.5833333],{icon:this.repairShop}).addTo(this.map).on("click",()=>{})},5e3),setTimeout(()=>{},5e3)}),i.addTo(this.map),this.path(),this.generateRandomCars()}onBuyGarageClick(i){console.log(i)}onRepairShopClick(){console.log("jetzt")}constructor(i){this.auth=i,this.hideMap=new $e,this.coins=0,this.iconHome=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/home.png'>",iconSize:[86,105],iconAnchor:[43,105]}),this.iconCar=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img id='car' src='../../assets/Car.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.manCar=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Man.png'>",iconSize:[91,105],iconAnchor:[48,105]}),this.repairShop=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/Repair.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.garageIcon=It.divIcon({className:"custom-div-icon",html:"<div style='background-color:#c30b82;' class='marker-pin'></div><img src='../../assets/garage_locater.png'>",iconSize:[88,117],iconAnchor:[44,117]}),this.carLayer=new It.FeatureGroup,this.allGarages=[],this.garagePrice={price:1e4,symbol:"K"},this.user=JSON.parse(localStorage.getItem("userData")),this.cars=+localStorage.getItem("carcount"),this.gems=0,this.oldPos={lat:0,lng:0},this.speedMap=[],this.distance=.005,this.allCities=[],this.cityMarkers=[],this.isoCountries={AF:"Afghanistan",AX:"Aland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua And Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia And Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"Congo, Democratic Republic",CK:"Cook Islands",CR:"Costa Rica",CI:"Cote D'Ivoire",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island & Mcdonald Islands",VA:"Holy See (Vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran, Islamic Republic Of",IQ:"Iraq",IE:"Ireland",IM:"Isle Of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KR:"Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia, Federated States Of",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestinian Territory, Occupied",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthelemy",SH:"Saint Helena",KN:"Saint Kitts And Nevis",LC:"Saint Lucia",MF:"Saint Martin",PM:"Saint Pierre And Miquelon",VC:"Saint Vincent And Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome And Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia And Sandwich Isl.",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard And Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad And Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks And Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Viet Nam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis And Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"},this.randomCars=[],this.generiertePositionen=[],this.randomCar={car:"Car12",hp:1},this.visible=!0,this.z=0,localStorage.getItem("userData")?(console.log(JSON.parse(localStorage.getItem("userData"))),this.user=JSON.parse(localStorage.getItem("userData")),this.user.photoUrl=this.user.photoURL,console.log(this.user)):this.user=i.user$.subscribe(r=>{console.log(r),this.user=r}),i.userData.subscribe(r=>{console.log("userData:",r),this.speedMap=r.speedMap}),navigator.geolocation.getCurrentPosition(r=>{console.log("here",r),this.currentPos=r})}onUserClick(){this.hideMap.emit("garage")}hideMapNow(i){this.hideMap.emit(i)}ngAfterViewInit(){navigator.geolocation.getCurrentPosition(i=>{this.lat=i.coords.latitude,this.lng=i.coords.longitude,console.log(this.lng,this.lat)}),console.log(this.lat,this.lng),this.initMap(),setTimeout(()=>{},5e3),navigator.geolocation.watchPosition(i=>{console.log(i),this.marker!=null&&this.map.removeLayer(this.marker),this.marker=It.marker([i.coords.latitude,i.coords.longitude],{icon:this.manCar}).addTo(this.map),this.moveMap([i.coords.latitude,i.coords.longitude],i.coords.speed),console.log(this.marker,this.carLayer),setTimeout(()=>{console.log("jetzt")},5e3);let r=!0;console.log(this.generiertePositionen),this.generiertePositionen.forEach(o=>{let a=this.getDistance([o[0],o[1]],[this.lat,this.lng]);console.log("Distance:",a,this.generiertePositionen),a<500&&(r=!1)}),r==!0&&this.genNewCars(),this.allCities.forEach(o=>{let a=o.latitude,c=o.longitude,u=this.lng-c,f=this.lat-a;u>-.005&&u<.005&&(console.log(o),console.log(this.lat,this.lng),console.log(f,u))})}),this.getAllCities()}moveMap(i,r){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.map.flyTo(i,18),this.oldPos.lat=i[0],this.oldPos.lng=i[1],r&&(this.speedMap.push({lat:i[0],lng:i[1],speed:r}),setInterval(()=>{this.auth.addDataToUser({speedMap:this.speedMap})},2500)))}path(){console.log("Start"),navigator.geolocation.watchPosition(i=>{let r=i.coords.latitude,o=i.coords.longitude,a=i.coords.accuracy;this.lat=r,this.lng=o;var c=[[r,o],[r,o+this.distance]]})}getCountryName(i){return this.isoCountries.hasOwnProperty(i)?this.isoCountries[i]:i}generateRandomCars(){console.log("generateRandomCarsStart",this.lat,this.lng),navigator.geolocation.getCurrentPosition(i=>{this.generiertePositionen.push([i.coords.latitude,i.coords.longitude]);for(let r=0;r<25;r++){let o=i.coords.latitude+(Math.random()-.5)/100,a=i.coords.longitude+(Math.random()-.5)/100;console.log(o,a);let c=It.circle([o,a],50).addTo(this.map);this.randomCars.push({Lat:o,Lng:a});let u=It.marker([o,a],{icon:this.iconCar}).addTo(this.map);u.on("click",()=>{this.getDistance([o,a],[this.lat,this.lng])<=50&&(console.log(o,a,this.getDistance([o,a],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c),this.allGarages.forEach(f=>{this.getDistance([f.lat,f.lng],[o,a])<100&&(this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(u),this.map.removeLayer(c))}))}),console.log(this.randomCars),this.map.removeLayer(this.map)}}),console.log("fertig Random")}genNewCars(){console.log("generateRandomCarsStart",this.lat,this.lng),this.generiertePositionen.push([this.lat,this.lng]),console.log("hier");for(let i=0;i<25;i++){console.log("hier");let r=this.lat+(Math.random()-.5)/100,o=this.lng+(Math.random()-.5)/100;console.log(r,o);let a=It.circle([r,o],50).addTo(this.map);this.randomCars.push({Lat:r,Lng:o});let c=It.marker([r,o],{icon:this.iconCar}).addTo(this.map);c.on("click",()=>{this.getDistance([r,o],[this.lat,this.lng])<=50&&(console.log(r,o,this.getDistance([r,o],[this.lat,this.lng]),this.lat,this.lng),this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a)),this.allGarages.forEach(u=>{this.getDistance([u.lat,u.lng],[r,o])<100&&(this.cars++,localStorage.setItem("carcount",this.cars.toString()),this.hideMapNow("carFound"),this.map.removeLayer(c),this.map.removeLayer(a))})}),console.log(this.randomCars),this.map.removeLayer(this.map)}console.log("fertig Random")}getAllCities(){return U(this,null,function*(){let i={method:"GET",redirect:"follow"},r;yield fetch("https://api.country.is/",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{r=this.getCountryName(o.country)}).catch(o=>{console.log(o)}),yield fetch("https://countriesnow.space/api/v0.1/countries/population/cities",{method:"GET",redirect:"follow"}).then(o=>o.json()).then(o=>{console.log(o.data),o.data.forEach(a=>{setTimeout(()=>{a.populationCounts[0].value>1e4&&a.country==r&&fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${a.city}`,{method:"GET",redirect:"follow"}).then(c=>c.json()).then(c=>{setTimeout(()=>{c.results&&(It.marker([c.results[0].latitude,c.results[0].longitude],{icon:this.repairShop}).addTo(this.map),this.allCities.push(c.results[0]),It.circle([c.results[0].latitude,c.results[0].longitude],550).addTo(this.map).setStyle({color:"red"}))},1e3)}).catch(c=>console.log(c))})},100)}).catch(o=>console.log(o))})}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,p=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(p/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}onCloseClick(){this.visible=!0,console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(_e(pi))},e.\u0275cmp=it({type:e,selectors:[["app-leaflat-map"]],inputs:{coins:"coins"},outputs:{hideMap:"hideMap"},standalone:!0,features:[ut],decls:28,vars:13,consts:[[1,"items"],["id","coins"],["id","icon"],["src","../../assets/icon%20(2).png"],["id","text"],["id","cars"],["src","../../assets/icon%20(3).png"],["id","gems"],["src","../../assets/icon%20(1).png"],[1,"map-container"],[1,"map-frame"],["id","map"],["id","carCard",3,"z-Index","display"],["id","user"],["width","50px","height","50px",3,"src"],["id","carCard"],["id","closeBtn",3,"click"],["width","50px","height","50px",3,"click","src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px",3,"click"]],template:function(r,o){r&1&&($(0,"div",0)(1,"div",1)(2,"div",2),de(3,"img",3),G(),$(4,"div",4)(5,"p"),J(6),Ai(7,"currency"),G()()(),$(8,"div",5)(9,"div",2),de(10,"img",6),G(),$(11,"div",4)(12,"p"),J(13),G()()(),$(14,"div",7)(15,"div",2),de(16,"img",8),G(),$(17,"div",4)(18,"p"),J(19),G()()()(),$(20,"div",9)(21,"div",10),de(22,"div",11),G()(),Me(23,OH,9,6,"div",12),$(24,"div",13),Me(25,LH,1,1,"img",14)(26,FH,1,1)(27,VH,1,0),G()),r&2&&(q(6),pt(Tr(7,11,o.coins)),q(7),pt(o.cars),q(6),pt(o.gems),q(),Te("display",o.visible?"block":"none"),q(),Te("display",o.visible?"block":"none"),q(),Te("display",o.visible?"block":"none"),q(),Ze(23,o.visible==!1?23:-1),q(2),Ze(25,o.user.photoUrl?25:o.user.photoURL?26:27))},dependencies:[hM,N0],styles:['.map-container[_ngcontent-%COMP%]{position:absolute;inset:0;height:calc(100% + -0px)}.items[_ngcontent-%COMP%]{position:absolute;top:25px;left:0;display:flex;z-index:50000;justify-content:space-around;width:100%}#user[_ngcontent-%COMP%]{z-index:50000;position:absolute;bottom:35px;left:15px;width:50px;height:50px}#user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}#buyButton[_ngcontent-%COMP%]{width:80%;height:25px;background-color:green}.items[_ngcontent-%COMP%]   #cars[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #gems[_ngcontent-%COMP%], .items[_ngcontent-%COMP%]   #coins[_ngcontent-%COMP%]{width:100px;height:25px;background-color:#fff;border:1px black solid;border-radius:2px}.map-frame[_ngcontent-%COMP%]{border:2px solid black;height:100%}#map[_ngcontent-%COMP%]{height:100%}.marker-pin[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin:-15px 0 0 -15px;z-index:500}.marker-pin[_ngcontent-%COMP%]:after{content:"";width:1px;height:1px;margin:3px 0 0 3px;background:#fff;position:absolute;border-radius:50%}.custom-div-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;width:5px;font-size:5px;left:0;right:0;margin:10px auto;text-align:center}img[_ngcontent-%COMP%]{width:50px;height:55px}#car[_ngcontent-%COMP%]{width:3px;height:3px}#carCard[_ngcontent-%COMP%]{width:90%;height:90%;position:absolute;top:5%;left:5%;z-index:5000;background-color:#fff;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}#icon[_ngcontent-%COMP%]{width:30%;height:100%}#icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%;width:75%}#text[_ngcontent-%COMP%]{width:70%}#text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;top:-37.5px;left:25px}']});let t=e;return t})();var aR=(()=>{let e=class e{constructor(){fetch("../../assets/cars.json",{method:"GET",redirect:"follow"}).then(i=>i.json()).then(i=>{console.log(i),this.cars=i,console.log(this.cars)}).catch(i=>console.error(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ie({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jH(t,e){if(t&1&&(de(0,"br"),$(1,"h1"),J(2),G(),de(3,"img",2),$(4,"div",3)(5,"div",4),J(6),G(),$(7,"div",5),J(8),G(),$(9,"div",6),J(10),G(),$(11,"div",7),J(12),G(),$(13,"div",8),J(14),G(),$(15,"div",9),J(16),G()(),de(17,"br")),t&2){let n=le();q(),Te("color",n.randomCar.textColor),q(),pt(n.randomCar.Name.toUpperCase()),q(),Be("src",n.randomCar.Path,Yt),q(2),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt("",n.randomCar.Horsepower," hp"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt("",n.randomCar.Miles_per_Gallon," Miles per Gallon"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt("",n.randomCar.Cylinders," Cylinders"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt(" ",n.randomCar.Acceleration,"s 0 - 60 mp/h"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt(" ",n.randomCar.CPS.toFixed(2)," coins per second"),q(),Te("background",n.randomCar.Color)("color",n.randomCar.textColor),q(),lt(" Year: ",n.randomCar.Year," ")}}var cR=(()=>{let e=class e{addCoin(i){console.log(i),this.addCoins.emit(Math.floor(i))}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){if(setTimeout(()=>{this.getRandomCar()},500),localStorage.getItem("mycars")){let i=JSON.parse(localStorage.getItem("mycars"));console.log(localStorage.getItem("mycars"),JSON.parse(localStorage.getItem("mycars"))),console.log("allcars"),console.log(i),this.myCars.push(...i),console.log(this.myCars)}}constructor(i){this.car=i,this.hideMap=new $e,this.addCoins=new $e,this.CPS=0,this.randomCar={car:"Car12",hp:1,topSpeed:152},this.myCars=[],this.allCars=[],this.allCars=this.car.cars}getAllCars(){this.allCars=this.car.cars}getRandomCar(){if(console.log(this.car.cars),this.car.cars){let i=this.car.cars[Math.floor(Math.random()*this.car.cars.length)];console.log(i),this.randomCar=i,this.randomCar.CPS=this.randomCar.Horsepower*this.randomCar.Acceleration*this.randomCar.Cylinders/1e3,this.myCars.push(i),console.log(this.CPS),this.CPS=this.CPS+i.CPS,console.log(this.CPS),this.getCPS(),localStorage.setItem("mycars",JSON.stringify(this.myCars))}}getCPS(){this.addCoin(this.CPS),console.log(this.CPS)}};e.\u0275fac=function(r){return new(r||e)(_e(aR))},e.\u0275cmp=it({type:e,selectors:[["app-car-found"]],outputs:{hideMap:"hideMap",addCoins:"addCoins"},standalone:!0,features:[ut],decls:6,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&($(0,"body")(1,"div",0)(2,"button",1),Ie("click",function(){return o.onCloseClick()}),J(3,"X"),G(),de(4,"br"),Me(5,jH,18,34),G()()),r&2&&(q(),Te("display","block")("background",o.randomCar.Color),q(4),Ze(5,o.randomCar.Color?5:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;height:30px;padding-top:7.5px}"]});let t=e;return t})();function zH(t,e){if(t&1&&(de(0,"br"),$(1,"h1"),J(2),G(),de(3,"img",2),$(4,"div",3)(5,"div",4),J(6),G(),$(7,"div",5),J(8),G(),$(9,"div",6),J(10),G(),$(11,"div",7),J(12),G(),$(13,"div",8),J(14),G(),$(15,"div",9),J(16),G()(),de(17,"br")),t&2){let n=le();q(),Te("color",n.Car.textColor),q(),pt(n.Car.Name.toUpperCase()),q(),Be("src",n.Car.Path,Yt),q(2),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt("",n.Car.Horsepower," hp"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt("",n.Car.Miles_per_Gallon," Miles per Gallon"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt("",n.Car.Cylinders," Cylinders"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt(" ",n.Car.Acceleration,"s 0 - 60 mp/h"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt(" ",n.Car.CPS.toFixed(2)," coins per second"),q(),Te("background",n.Car.Color)("color",n.Car.textColor),q(),lt(" Year: ",n.Car.Year," ")}}var lR=(()=>{let e=class e{constructor(){this.close=new $e}ngOnInit(){console.log(this.Car)}closeClick(){this.close.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-select-car"]],inputs:{Car:"Car"},outputs:{close:"close"},standalone:!0,features:[ut],decls:5,vars:5,consts:[["id","carCard"],["id","closeBtn",3,"click"],["width","80%",3,"src"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"]],template:function(r,o){r&1&&($(0,"div",0)(1,"button",1),Ie("click",function(){return o.closeClick()}),J(2,"X"),G(),de(3,"br"),Me(4,zH,18,34),G()),r&2&&(Te("display","block")("background",o.Car.Color),q(4),Ze(4,o.Car.Color?4:-1))},styles:["#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;min-height:30px;padding-top:7.5px}"]});let t=e;return t})();function UH(t,e){if(t&1&&($(0,"p"),J(1),G()),t&2){let n=le().$implicit;q(),lt("LVL: ",n.level,"")}}function HH(t,e){if(t&1){let n=wt();$(0,"div",6),Ie("click",function(){let r=at(n).$implicit,o=le(3);return ct(o.openCar(r))}),de(1,"br")(2,"img",7)(3,"br"),$(4,"p"),J(5),G(),Me(6,UH,2,1,"p"),G()}if(t&2){let n=e.$implicit;Te("background",n.Color),q(2),Be("src",n.Path,Yt),q(3),pt(n.Name),q(),Ze(6,n.level?6:-1)}}function $H(t,e){if(t&1&&Qo(0,HH,7,5,"div",5,Ko),t&2){let n=le(2);Yo(n.myCars)}}function qH(t,e){if(t&1){let n=wt();$(0,"div",0),Me(1,$H,2,0),G(),$(2,"div",1),Ie("click",function(){at(n);let r=le();return ct(r.onCloseClick())}),$(3,"div",2),Ie("click",function(){at(n);let r=le();return ct(r.onCloseClick())}),$(4,"button",3),Ie("click",function(){at(n);let r=le();return ct(r.onCloseClick())}),de(5,"img",4),G()()()}if(t&2){let n=le();q(),Ze(1,n.myCars?1:-1)}}function GH(t,e){if(t&1){let n=wt();$(0,"app-select-car",9),Ie("close",function(){at(n);let r=le(2);return ct(r.closeSelectedCar())}),G()}if(t&2){let n=le(2);Be("Car",n.selectedCar)}}function WH(t,e){if(t&1&&Me(0,GH,1,1,"app-select-car",8),t&2){let n=le();Ze(0,n.selectedCar?0:-1)}}var uR=(()=>{let e=class e{constructor(){this.hideMap=new $e,this.carVisible=!0}onCloseClick(){this.hideMap.emit("exit")}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}openCar(i){this.selectedCar=i,this.carVisible=!1}closeSelectedCar(){this.carVisible=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-my-cars"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[ut],decls:2,vars:1,consts:[[1,"container"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["id","car",3,"background"],["id","car",3,"click"],["width","50%","height","auto",3,"src"],[3,"Car"],[3,"close","Car"]],template:function(r,o){r&1&&Me(0,qH,6,1)(1,WH,1,1),r&2&&Ze(0,o.carVisible==!0?0:1)},dependencies:[lR],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();function ZH(t,e){if(t&1&&de(0,"img",5),t&2){let n=le(2);Be("src",n.user.photoUrl,Yt)}}function KH(t,e){t&1&&de(0,"img",6)}function QH(t,e){if(t&1&&($(0,"div",4),Me(1,ZH,1,1,"img",5)(2,KH,1,0),$(3,"p"),J(4),G()(),de(5,"br")),t&2){let n=le();q(),Ze(1,n.user.photoUrl?1:2),q(3),pt(n.user.displayName)}}function YH(t,e){if(t&1&&($(0,"div",7)(1,"p"),J(2),G()(),$(3,"div",8),de(4,"img",9),G()),t&2){let n=le();q(2),pt(n.key),q(2),Be("src","https://api.qrserver.com/v1/create-qr-code/?size=150x150&data="+n.key,Yt)}}var dR=(()=>{let e=class e{constructor(i){this.auth=i,this.addFriend=new $e,this.key=localStorage.getItem("key"),i.user$.subscribe(r=>{console.log(r),this.user=r}),this.key=localStorage.getItem("key")}onFriendAdd(i){console.log(i),this.addFriend.emit(i)}};e.\u0275fac=function(r){return new(r||e)(_e(pi))},e.\u0275cmp=it({type:e,selectors:[["app-add-friend"]],outputs:{addFriend:"addFriend"},standalone:!0,features:[ut],decls:9,vars:2,consts:[["friendInput",""],["id","input"],["type","text"],[3,"click"],[1,"user","container"],["width","50px","height","50px",3,"src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px"],["id","key"],["id","qr"],["alt","","width","150px","height","150px",3,"src"]],template:function(r,o){if(r&1){let a=wt();Me(0,QH,6,2)(1,YH,5,2),$(2,"p"),J(3,"Add Friend"),G(),$(4,"div",1),de(5,"input",2,0),$(7,"button",3),Ie("click",function(){at(a);let u=dm(6);return ct(o.onFriendAdd(u.value))}),J(8,"Add Friend"),G()()}r&2&&(Ze(0,o.user?0:-1),q(),Ze(1,o.key?1:-1))},styles:[".user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#qr[_ngcontent-%COMP%]{width:175px;height:175px;border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#qr[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:12.5px}*[_ngcontent-%COMP%]{text-align:center}#key[_ngcontent-%COMP%]{border-radius:5px;border:3px #f4f4f4 solid;margin:auto}#input[_ngcontent-%COMP%]{margin:auto}"]});let t=e;return t})();function XH(t,e){if(t&1&&($(0,"div",5),de(1,"img",6),$(2,"p",7),J(3),G()()),t&2){let n=le().$implicit;q(),Be("src",n.photoUrl,Yt),q(2),pt(n.displayName)}}function JH(t,e){if(t&1&&Me(0,XH,4,2,"div",5),t&2){let n=e.$implicit;Ze(0,n?0:-1)}}var hR=(()=>{let e=class e{constructor(i){this.auth=i,this.hideMap=new $e,this.friends=[],this.friendData=[]}ngOnInit(){localStorage.getItem("friends")&&(this.friends=JSON.parse(localStorage.getItem("friends"))),this.getAllFriends()}addFriend(i){console.log(i,i.length),i.length>20&&i.length<32&&(this.friends.push(i),localStorage.setItem("friends",JSON.stringify(this.friends))),this.getAllFriends()}removeDup(i){let r=[];return i.forEach((o,a)=>{r.indexOf(o)===-1&&r.push(o)}),r}getAllFriends(){this.friendData=[],this.removeDup(this.friends).forEach(i=>{console.log(i),console.log(this.auth.getUserData(i).subscribe(r=>{console.log(r),this.friendData.push(r[0])}))})}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(_e(pi))},e.\u0275cmp=it({type:e,selectors:[["app-friends"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[ut],decls:7,vars:0,consts:[[3,"addFriend"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"user","container"],["width","50px","height","50px",3,"src"],["id","username"]],template:function(r,o){r&1&&($(0,"app-add-friend",0),Ie("addFriend",function(c){return o.addFriend(c)}),G(),Qo(1,JH,1,1,null,null,Ko),$(3,"div",1),Ie("click",function(){return o.onCloseClick()}),$(4,"div",2),Ie("click",function(){return o.onCloseClick()}),$(5,"button",3),Ie("click",function(){return o.onCloseClick()}),de(6,"img",4),G()()()),r&2&&(q(),Yo(o.friendData))},dependencies:[dR],styles:['*[_ngcontent-%COMP%]{text-align:center}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%;border:1px black solid}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}#username[_ngcontent-%COMP%]{width:250px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var fR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[Pr]});let t=e;return t})();function e$(t,e){if(t&1&&de(0,"img",20),t&2){let n=le(2);Be("src",n.user.photoUrl,Yt)}}function t$(t,e){if(t&1&&de(0,"img",20),t&2){let n=le(2);Be("src",n.user.photoURL,Yt)}}function n$(t,e){t&1&&de(0,"img",21)}function i$(t,e){if(t&1&&($(0,"div",5),Me(1,e$,1,1,"img",20)(2,t$,1,1)(3,n$,1,0),$(4,"p"),J(5),G()()),t&2){let n=le();q(),Ze(1,n.user.photoUrl?1:n.user.photoURL?2:3),q(4),pt(n.user.displayName)}}var pR=(()=>{let e=class e{ngOnChanges(i){this.cps=localStorage.getItem("cps")}constructor(i){this.auth=i,this.hideMap=new $e,this.cps=localStorage.getItem("cps"),this.user=JSON.parse(localStorage.getItem("userData")),this.progress=0,localStorage.getItem("userData")?(console.log(JSON.parse(localStorage.getItem("userData"))),this.user=JSON.parse(localStorage.getItem("userData")),console.log(this.user),this.user.photoUrl=this.user.photoURL):(i.user$.subscribe(r=>{console.log(r),r&&(this.user=r)}),i.getDataFromUser(r=>{}))}onLogoutClick(){localStorage.removeItem("key"),this.auth.signOut(),window.location.reload()}onCloseClick(){console.log("close"),setTimeout(()=>{this.hideMap.emit("exit")},200)}};e.\u0275fac=function(r){return new(r||e)(_e(pi))},e.\u0275cmp=it({type:e,selectors:[["app-profile"]],outputs:{hideMap:"hideMap"},standalone:!0,features:[Ki,ut],decls:68,vars:4,consts:[[1,"logout"],["src","../../assets/image-removebg-preview (11).png","width","30px","height","30px",3,"click"],[1,"menu","container"],[1,"profile"],[1,"friends"],[1,"user","container"],[1,"container","level"],[1,"Level"],[1,"Progressbar"],["id","progress"],["id","fortschritt"],[1,"container"],["id","icon",3,"click"],["src","../../assets/car_icon.png","width","50px","height","50px"],["src","../../assets/addFriends_icon.png","width","50px","height","50px"],["id","icon"],["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],["width","50px","height","50px",3,"src"],["src","../../assets/blank-profile-picture-973460_640.webp","width","50px","height","50px"]],template:function(r,o){r&1&&($(0,"div",0)(1,"img",1),Ie("click",function(){return o.onLogoutClick()}),G()(),$(2,"div",2),de(3,"div",3)(4,"div",4),G(),Me(5,i$,6,2,"div",5),de(6,"br"),$(7,"div",6)(8,"div",7)(9,"p"),J(10,"1"),G(),$(11,"p"),J(12,"LEVEL"),G()(),$(13,"div",8)(14,"div",9)(15,"p",10),J(16,"7.125/ 10000"),G()()()(),de(17,"hr"),$(18,"div",11)(19,"div",12),Ie("click",function(){return o.hideMap.emit("garage")}),de(20,"img",13),$(21,"p"),J(22,"Garage"),G()(),$(23,"div",12),Ie("click",function(){return o.hideMap.emit("friends")}),de(24,"img",14),$(25,"p"),J(26,"Friends"),G()(),$(27,"div",15),de(28,"img",13),$(29,"p"),J(30,"Garage"),G()(),$(31,"div",15),de(32,"img",13),$(33,"p"),J(34,"Garage"),G()()(),de(35,"br")(36,"br")(37,"hr"),$(38,"div",11)(39,"p"),J(40,"Gelaufene Distanz"),G(),$(41,"p"),J(42,"1.5 km"),G()(),$(43,"div",11)(44,"p"),J(45,"Current CPS:"),G(),$(46,"p"),J(47),G()(),$(48,"div",11)(49,"p"),J(50,"Gelaufene Distanz"),G(),$(51,"p"),J(52,"1.5 km"),G()(),$(53,"div",11)(54,"p"),J(55,"Gelaufene Distanz"),G(),$(56,"p"),J(57,"1.5 km"),G()(),$(58,"div",11)(59,"p"),J(60,"Gelaufene Distanz"),G(),$(61,"p"),J(62,"1.5 km"),G()(),de(63,"hr"),$(64,"div",16),Ie("click",function(){return o.onCloseClick()}),$(65,"div",17),Ie("click",function(){return o.onCloseClick()}),$(66,"button",18),Ie("click",function(){return o.onCloseClick()}),de(67,"img",19),G()()()),r&2&&(q(5),Ze(5,o.user?5:-1),q(9),Te("width",o.progress+"%"),q(33),pt(o.cps))},dependencies:[fR],styles:['.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#e96245;border:1px black solid}.logout[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e53d31;border-radius:50%;position:absolute;right:5px}.logout[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-top:10px}img[_ngcontent-%COMP%]{margin:0 auto auto}#icon[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#e96245;border-radius:50%;border:0px}.Progressbar[_ngcontent-%COMP%]{width:80%;height:50px;border-radius:50px}#progress[_ngcontent-%COMP%]{width:50%;height:100%;background-color:#000;border-radius:50px}#fortschritt[_ngcontent-%COMP%]{margin-left:150px;width:150px}.user[_ngcontent-%COMP%]{width:100px}.user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px}#close[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{border:0px;background-color:transparent}']});let t=e;return t})();var r$=["canvas"],o$=["rLabel"],s$=["reading"],a$=[[["ngx-gauge-prepend"]],[["ngx-gauge-value"]],[["ngx-gauge-append"]],[["ngx-gauge-label"]]],c$=["ngx-gauge-prepend","ngx-gauge-value","ngx-gauge-append","ngx-gauge-label"];function l$(t,e){t&1&&Xi(0,0,["*ngSwitchCase","true"])}function u$(t,e){if(t&1&&(oa(0),J(1),sa()),t&2){let n=le();q(),pt(n.prepend)}}function d$(t,e){t&1&&Xi(0,1,["*ngSwitchCase","true"])}function h$(t,e){if(t&1&&(oa(0),J(1),Ai(2,"number"),sa()),t&2){let n=le();q(),pt(Tr(2,1,n.value))}}function f$(t,e){t&1&&Xi(0,2,["*ngSwitchCase","true"])}function p$(t,e){if(t&1&&(oa(0),J(1),sa()),t&2){let n=le();q(),pt(n.append)}}function m$(t,e){t&1&&Xi(0,3,["*ngSwitchCase","true"])}function g$(t,e){if(t&1&&(oa(0),J(1),sa()),t&2){let n=le();q(),pt(n.label)}}function mR(t,e,n){return Math.max(e,Math.min(n,t))}function _$(t){return t!=null&&`${t}`!="false"}function Wh(t,e=0){return isNaN(parseFloat(t))||isNaN(Number(t))?e:Number(t)}function gR(t){return`${t}px`}function _R(t){return t!=null&&!isNaN(parseFloat(t))&&!isNaN(Number(t))}var v$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-append"]],exportAs:["ngxGaugeAppend"]});let t=e;return t})(),y$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-prepend"]],exportAs:["ngxGaugePrepend"]});let t=e;return t})(),b$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-value"]],exportAs:["ngxGaugeValue"]});let t=e;return t})(),w$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ot({type:e,selectors:[["ngx-gauge-label"]],exportAs:["ngxGaugeLabel"]});let t=e;return t})(),Ur={MIN:0,MAX:100,TYPE:"arch",THICK:4,FOREGROUND_COLOR:"rgba(0, 150, 136, 1)",BACKGROUND_COLOR:"rgba(0, 0, 0, 0.1)",CAP:"butt",SIZE:200},vR=(()=>{let e=class e{get size(){return this._size}set size(i){this._size=Wh(i)}get margin(){return this._margin}set margin(i){this._margin=Wh(i)}get min(){return this._min}set min(i){this._min=Wh(i,Ur.MIN)}get animate(){return this._animate}set animate(i){this._animate=_$(i)}get max(){return this._max}set max(i){this._max=Wh(i,Ur.MAX)}get value(){return this._value}set value(i){this._value=Wh(i)}constructor(i,r){this._elementRef=i,this._renderer=r,this._size=Ur.SIZE,this._min=Ur.MIN,this._max=Ur.MAX,this._animate=!0,this._margin=0,this._initialized=!1,this._animationRequestID=0,this.ariaLabel="",this.ariaLabelledby=null,this.type=Ur.TYPE,this.cap=Ur.CAP,this.thick=Ur.THICK,this.foregroundColor=Ur.FOREGROUND_COLOR,this.backgroundColor=Ur.BACKGROUND_COLOR,this.thresholds=Object.create(null),this.markers=Object.create(null),this._value=0,this.duration=1200}ngOnInit(){this.markers&&Object.keys(this.markers).length>0&&!this._margin&&(this._margin=10)}ngOnChanges(i){let r=i.thick||i.type||i.cap||i.size,o=i.value||i.min||i.max;if(this._initialized){if(o){let a;if(i.value){a=Number(i.value.currentValue),a=isNaN(a)?0:a;let c=Number(i.value.previousValue);this._oldChangeVal=isNaN(c)?this._oldChangeVal:c}this._update(a,this._oldChangeVal)}r&&(this._destroy(),this._init())}}_updateSize(){this._renderer.setStyle(this._elementRef.nativeElement,"width",gR(this._getWidth())),this._renderer.setStyle(this._elementRef.nativeElement,"height",gR(this._getCanvasHeight())),this._canvas.nativeElement.width=this._getWidth(),this._canvas.nativeElement.height=this._getCanvasHeight(),this._renderer.setStyle(this._label.nativeElement,"transform","translateY("+(this.size/3*2-this.size/13/4)+"px)"),this._renderer.setStyle(this._reading.nativeElement,"transform","translateY("+(this.size/2-this.size*.22/2)+"px)")}ngAfterViewInit(){this._canvas&&this._init()}ngOnDestroy(){this._destroy()}_getBounds(i){let r,o,a,c;return i=="semi"?(r=Math.PI,o=2*Math.PI,a=180,c=360):i=="full"?(r=1.5*Math.PI,o=3.5*Math.PI,a=270,c=a+360):i==="arch"&&(r=.8*Math.PI,o=2.2*Math.PI,a=180-.2*180,c=360+.2*180),{head:r,tail:o,start:a,end:c}}_drawShell(i,r,o,a){let c=this._getCenter(),u=this._getRadius();if(this._initialized){this._clear(),this._drawMarkersAndTicks();let f=this._getBackgroundColorRanges();if(this._context.lineWidth=this.thick,f&&f.length>0){this._context.lineCap="butt";for(let p=0;p<f.length;++p){let _=f[p];this._context.beginPath(),this._context.strokeStyle=_.backgroundColor?_.backgroundColor:_.bgOpacity?_.color:this.backgroundColor,_.bgOpacity!==void 0&&_.bgOpacity!==null&&(this._context.globalAlpha=_.bgOpacity),this._context.arc(c.x,c.y,u,this._getDisplacement(_.start),this._getDisplacement(_.end),!1),this._context.stroke(),this._context.globalAlpha=1}}else this._context.lineCap=this.cap,this._context.beginPath(),this._context.strokeStyle=this.backgroundColor,this._context.arc(c.x,c.y,u,i,o,!1),this._context.stroke();this._drawFill(i,r,o,a)}}_drawFill(i,r,o,a){let c=this._getCenter(),u=this._getRadius();this._context.lineCap=this.cap,this._context.lineWidth=this.thick,r=Math.max(r,i),r=Math.min(r,o),this._context.lineCap=this.cap,this._context.lineWidth=this.thick,this._context.beginPath(),this._context.strokeStyle=a,this._context.arc(c.x,c.y,u,i,r,!1),this._context.stroke()}_addMarker(i,r,o,a,c,u){var f=i*Math.PI/180;let p=2;c||(c=8),a||(a="line");let _=this._getCenter(),b=this._getRadius(),I=(b+this.thick/2+p)*Math.cos(f)+_.x,M=(b+this.thick/2+p)*Math.sin(f)+_.y,P=(b+this.thick/2+p+c)*Math.cos(f)+_.x,F=(b+this.thick/2+p+c)*Math.sin(f)+_.y;if(a=="triangle"){this._context.beginPath(),this._context.strokeStyle=r,this._context.moveTo(I,M),this._context.lineWidth=1;let W=i-45,X=i+45;W<0&&(W+=360),W>360&&(W-=360),X<0&&(X+=360),X>360&&(X-=360);let Z=W*Math.PI/180,se=c*Math.cos(Z)+I,pe=c*Math.sin(Z)+M;this._context.lineTo(se,pe);let he=X*Math.PI/180,S=c*Math.cos(he)+I,E=c*Math.sin(he)+M;this._context.lineTo(S,E),this._context.lineTo(I,M),this._context.closePath(),this._context.stroke(),this._context.fillStyle=r,this._context.fill()}else this._context.beginPath(),this._context.lineWidth=.5,this._context.strokeStyle=r,this._context.moveTo(I,M),this._context.lineTo(P,F),this._context.closePath(),this._context.stroke();o&&(this._context.save(),this._context.translate(P,F),this._context.rotate((i+90)*(Math.PI/180)),this._context.textAlign="center",this._context.font=u||"13px Arial",this._context.fillText(o,0,-3),this._context.restore())}_clear(){this._context.clearRect(0,0,this._getWidth(),this._getHeight())}_getWidth(){return this.size}_getHeight(){return this.size}_getCanvasHeight(){return this.type=="arch"||this.type=="semi"?.85*this._getHeight():this._getHeight()}_getRadius(){var r=this._getCenter().x-this.thick;return this._margin>0&&(r-=this._margin),r}_getCenter(){var i=this._getWidth()/2,r=this._getHeight()/2;return{x:i,y:r}}_init(){this._context=this._canvas.nativeElement.getContext("2d"),this._initialized=!0,this._updateSize(),this._create()}_destroy(){this._animationRequestID&&(window.cancelAnimationFrame(this._animationRequestID),this._animationRequestID=0),this._clear(),this._context=null,this._initialized=!1}_getForegroundColorByRange(i){let r=this._getThresholdMatchForValue(i);return r&&r.color?r.color:this.foregroundColor}_getThresholdMatchForValue(i){let r=Object.keys(this.thresholds).filter(function(o){return _R(o)&&Number(o)<=i}).sort((o,a)=>Number(o)-Number(a)).reverse()[0];if(r!==void 0){let o=this.thresholds[r];return{color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity,start:Number(r),end:this._getNextThreshold(Number(r))}}}_getNextThreshold(i){let r=Object.keys(this.thresholds).filter(function(o){return _R(o)&&Number(o)>i}).sort((o,a)=>Number(o)-Number(a));return r&&r[0]!==void 0?Number(r[0]):this.max}_getBackgroundColorRanges(){let i=0,r=[];do{let o=this._getThresholdMatchForValue(i);if(o){if(r.push({start:o.start,end:o.end,color:o.color,backgroundColor:o.backgroundColor,bgOpacity:o.bgOpacity}),i=o.end,i>=this.max)break}else break}while(!0);return r}_getDisplacement(i){let r=this.type,o=this._getBounds(r),a=this.min,c=this.max,u=o.head,f=mR(i,this.min,this.max),p=(o.tail-o.head)/(c-a),_=p*(f-a);return u+_}_create(i,r){let o=this,a=this.type,c=this._getBounds(a),u=this.duration,f=this.min,p=this.max,_=mR(this.value,f,p),b=c.head,I=(c.tail-c.head)/(p-f),M=I*(_-f),P=c.tail,F=this._getForegroundColorByRange(_),W;o._animationRequestID&&window.cancelAnimationFrame(o._animationRequestID);let X=Z=>{Z=Z||new Date().getTime();let se=Z-W,pe=Math.min(se/u,1),he=r?(r-f)*I:0,S=b+he+M*pe;o._drawShell(b,S,P,F),o._animationRequestID&&se<u?o._animationRequestID=window.requestAnimationFrame(E=>X(E)):window.cancelAnimationFrame(o._animationRequestID)};this._animate?(i!==void 0&&r!==void 0&&r!==0&&(M=I*i-I*r),o._animationRequestID=window.requestAnimationFrame(Z=>{W=Z||new Date().getTime(),X(W)})):o._drawShell(b,b+M,P,F)}_drawMarkersAndTicks(){if(this.markers){let i=this._getBounds(this.type),o=(i.end-i.start)/(this.max-this.min);for(let a in this.markers){let c=Number(a)-this.min,u=i.start+c*o,f=this.markers[a];this._addMarker(u,f.color,f.label,f.type,f.size,f.font)}}}_update(i,r){this._clear(),this._create(i,r)}};e.\u0275fac=function(r){return new(r||e)(_e(Dt),_e(xd))},e.\u0275cmp=it({type:e,selectors:[["ngx-gauge"]],contentQueries:function(r,o,a){if(r&1&&(nl(a,w$,5),nl(a,y$,5),nl(a,v$,5),nl(a,b$,5)),r&2){let c;Xn(c=Jn())&&(o._labelChild=c.first),Xn(c=Jn())&&(o._prependChild=c.first),Xn(c=Jn())&&(o._appendChild=c.first),Xn(c=Jn())&&(o._valueDisplayChild=c.first)}},viewQuery:function(r,o){if(r&1&&(lo(r$,7),lo(o$,7),lo(s$,7)),r&2){let a;Xn(a=Jn())&&(o._canvas=a.first),Xn(a=Jn())&&(o._label=a.first),Xn(a=Jn())&&(o._reading=a.first)}},hostAttrs:["role","slider","aria-readonly","true"],hostVars:7,hostBindings:function(r,o){r&2&&(Yi("aria-valuemin",o.min)("aria-valuemax",o.max)("aria-valuenow",o.value)("aria-label",o.ariaLabel)("aria-labelledby",o.ariaLabelledby),Dr("ngx-gauge-meter",!0))},inputs:{ariaLabel:[mt.None,"aria-label","ariaLabel"],ariaLabelledby:[mt.None,"aria-labelledby","ariaLabelledby"],size:"size",margin:"margin",min:"min",animate:"animate",max:"max",type:"type",cap:"cap",thick:"thick",label:"label",append:"append",prepend:"prepend",foregroundColor:"foregroundColor",backgroundColor:"backgroundColor",thresholds:"thresholds",markers:"markers",value:"value",duration:"duration"},features:[Ki],ngContentSelectors:c$,decls:17,vars:16,consts:[["reading",""],["rLabel",""],["canvas",""],[1,"reading-block"],[1,"reading-affix",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"ngSwitch"],[1,"reading-label",3,"ngSwitch"]],template:function(r,o){r&1&&(tl(a$),$(0,"div",3,0)(2,"u",4),Me(3,l$,1,0,"ng-content",5)(4,u$,2,1,"ng-container",5),G(),oa(5,6),Me(6,d$,1,0,"ng-content",5)(7,h$,3,3,"ng-container",5),sa(),$(8,"u",4),Me(9,f$,1,0,"ng-content",5)(10,p$,2,1,"ng-container",5),G()(),$(11,"div",7,1),Me(13,m$,1,0,"ng-content",5)(14,g$,2,1,"ng-container",5),G(),de(15,"canvas",null,2)),r&2&&(Te("font-size",(o.size-o.margin*2)*.22+"px"),q(2),Be("ngSwitch",o._prependChild!=null),q(),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1),q(),Be("ngSwitch",o._valueDisplayChild!=null),q(),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1),q(),Be("ngSwitch",o._appendChild!=null),q(),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1),q(),Te("font-size",(o.size-o.margin*2)/13+"px"),Be("ngSwitch",o._labelChild!=null),q(2),Be("ngSwitchCase",!0),q(),Be("ngSwitchCase",!1))},dependencies:[ub,IS,ES],styles:[`.ngx-gauge-meter{display:inline-block;text-align:center;position:relative}.reading-block{position:absolute;width:100%;font-weight:400;white-space:nowrap;text-align:center;overflow:hidden;text-overflow:ellipsis}.reading-label{font-family:inherit;width:100%;display:inline-block;position:absolute;text-align:center;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:400}.reading-affix{text-decoration:none;font-size:.6em;opacity:.8;font-weight:200;padding:0 .18em}.reading-affix:first-child{padding-left:0}.reading-affix:last-child{padding-right:0}
`],encapsulation:2});let t=e;return t})(),yR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=ft({type:e}),e.\u0275inj=ht({imports:[uo]});let t=e;return t})();var bR=(()=>{let e=class e{transform(i){return JSON.stringify(i,void 0,4).replace(/ /g," ").replace(/\n/g,"")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Er({name:"prettyjson",type:e,pure:!0,standalone:!0});let t=e;return t})();function C$(t,e){if(t&1&&(J(0),Ai(1,"prettyjson"),de(2,"br")),t&2){let n=e.$implicit;lt(" ",Tr(1,1,n),"")}}var wR=(()=>{let e=class e{constructor(i){this.auth=i,this.speedMap=[],this.oldPos={lat:0,lng:0},this.distance=0,this.speed=0,this.gaugeType="semi",this.gaugeValue=this.speed,this.gaugeLabel="Speed",this.gaugeAppendText="km/h",this.auth.userData.subscribe(r=>{console.log("userData:",r),this.speedMap=r.speedMap})}ngOnInit(){setInterval(()=>{let i=localStorage.getItem("key")},500),navigator.geolocation.watchPosition(i=>{this.speed=i.coords.speed*3.6,i.coords.speed&&this.speedMap.push({lat:i.coords.latitude,lng:i.coords.longitude,speed:i.coords.speed,date:new Date})}),setInterval(()=>{this.auth.addDataToUser({speedMap:this.speedMap})},25e3)}toRadian(i){var r=Math.PI;return i*(r/180)}getDistance(i,r){var o=this.toRadian(i[1]),a=this.toRadian(i[0]),c=this.toRadian(r[1]),u=this.toRadian(r[0]),f=u-a,p=c-o,_=Math.pow(Math.sin(f/2),2)+Math.cos(a)*Math.cos(u)*Math.pow(Math.sin(p/2),2),b=2*Math.asin(Math.sqrt(_)),I=6371;return console.log(b,I),b*I*1e3}moveMap(i){console.log(this.getDistance([this.oldPos.lat,this.oldPos.lng],i),i,this.oldPos),this.getDistance([this.oldPos.lat,this.oldPos.lng],i)>2&&(this.distance=this.distance+2,this.oldPos.lat=i[0],this.oldPos.lng=i[1])}};e.\u0275fac=function(r){return new(r||e)(_e(pi))},e.\u0275cmp=it({type:e,selectors:[["app-when-moving"]],standalone:!0,features:[ut],decls:11,vars:7,consts:[["type","semi",3,"value","label","append","max","thick"]],template:function(r,o){r&1&&($(0,"p"),J(1,"when-moving works!"),G(),$(2,"p"),J(3),G(),$(4,"p"),J(5),G(),de(6,"ngx-gauge",0)(7,"br")(8,"br"),Qo(9,C$,3,3,"br",null,Ko)),r&2&&(q(3),lt("",o.distance," Meter"),q(2),lt("",o.speed," km/h"),q(),Be("value",o.speed)("label",o.gaugeLabel)("append",o.gaugeAppendText)("max",250)("thick",10),q(3),Yo(o.speedMap))},dependencies:[yR,vR,uo,bR]});let t=e;return t})();function E$(t,e){if(t&1){let n=wt();$(0,"div",2),Ie("click",function(){let r=at(n).$implicit,o=le(2);return ct(o.onCarClick(r))}),de(1,"br")(2,"img",3)(3,"br"),$(4,"p"),J(5),G()()}if(t&2){let n=e.$implicit;Te("background",n.Color),q(2),Be("src",n.Path,Yt),q(3),pt(n.Name)}}function x$(t,e){if(t&1&&Qo(0,E$,6,4,"div",1,Ko),t&2){let n=le();Yo(n.myCars)}}var IR=(()=>{let e=class e{constructor(){this.selectCar=new $e}onCloseClick(){}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),console.log(this.myCars)}onCarClick(i){console.log("clicked on car",i),this.selectCar.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-select-car"]],outputs:{selectCar:"selectCar"},standalone:!0,features:[ut],decls:4,vars:1,consts:[[1,"container"],["id","car",3,"background"],["id","car",3,"click"],["width","50%","height","auto",3,"src"]],template:function(r,o){r&1&&($(0,"p"),J(1,"select-car works!"),G(),$(2,"div",0),Me(3,x$,2,0),G()),r&2&&(q(3),Ze(3,o.myCars?3:-1))},styles:['.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:150px;margin:5px;flex:0 0 30.3333%;outline:1px solid}#close[_ngcontent-%COMP%]{position:sticky;bottom:15px;left:calc(50% - 25px);margin:auto}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();var CR=(()=>{let e=class e{transform(i,r,o){if(i>=0){let a,c,u,f;return r==="ms"&&o==="hhmmss"?(c=Math.floor(i/1e3%60),u=Math.floor(i/(1e3*60)%60),f=Math.floor(i/(1e3*60*60)),this.format(o,c,u,f,a)):r==="s"&&o==="hhmmss"?(c=Math.floor(i%60),u=Math.floor(i/60%60),f=Math.floor(i/60/60),this.format(o,c,u,f,a)):r==="ms"&&(o==="ddhhmmss"||o==="ddhhmmssLong")?(c=Math.floor(i/1e3%60),u=Math.floor(i/(1e3*60)%60),f=Math.floor(i/(1e3*60*60)%24),a=Math.floor(i/(1e3*60*60*24)),this.format(o,c,u,f,a)):r==="s"&&(o==="ddhhmmss"||o==="ddhhmmssLong")?(c=Math.floor(i%60),u=Math.floor(i/60%60),f=Math.floor(i/60/60%24),a=Math.floor(i/60/60/24),this.format(o,c,u,f,a)):i}else return"Done"}format(i,r,o,a,c){switch(c<10&&(c="0"+c),a<10&&(a="0"+a),o<10&&(o="0"+o),r<10&&(r="0"+r),i){case"hhmmss":return`${a}:${o}:${r}`;case"ddhhmmss":return`${c}d, ${a}h, ${o}m, ${r}s`;case"ddhhmmssLong":return`${c} days, ${a} hours, ${o} minutes, ${r} seconds`;default:return null}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275pipe=Er({name:"durationFormat",type:e,pure:!1,standalone:!0});let t=e;return t})();function D$(t,e){if(t&1&&($(0,"div",6),de(1,"br")(2,"img",7)(3,"br"),$(4,"p"),J(5),G()()),t&2){let n=le(2);Te("background",n.item.Color)("height","100%"),q(2),Be("src",n.item.Path,Yt),q(3),pt(n.item.Name)}}function T$(t,e){if(t&1){let n=wt();$(0,"div",17)(1,"button",2),Ie("click",function(){at(n);let r=le(3);return ct(r.onUpgradeCLick())}),J(2),Ai(3,"currency"),Ai(4,"durationFormat"),G()()}if(t&2){let n=le(3);q(2),ca("Upgrade Price: ",Tr(3,2,n.item.upgradePrice)," Time: ",Xy(4,4,n.item.upgradeTime,"s","hhmmss"),"")}}function S$(t,e){if(t&1){let n=wt();$(0,"div",17)(1,"button",2),Ie("click",function(){at(n);let r=le(3);return ct(r.onButtonDoneClick())}),J(2),Ai(3,"durationFormat"),G()()}if(t&2){let n=le(3);q(2),pt(Xy(3,1,n.timeRemaining,"s","hhmmss"))}}function A$(t,e){if(t&1&&($(0,"div",8)(1,"div",9)(2,"div",10),J(3),G(),$(4,"div",11),J(5),G(),$(6,"div",12),J(7),G(),$(8,"div",13),J(9),G(),$(10,"div",14),J(11),G(),$(12,"div",15),J(13),G()()(),de(14,"div",16),Me(15,T$,5,8,"div",17)(16,S$,4,5,"div",17)),t&2){let n=le(2);q(2),Te("background",n.item.Color)("color",n.item.textColor),q(),ca("",n.item.Horsepower," HP + ",n.item.upgradeHp," HP"),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),ca("",n.item.Miles_per_Gallon," Miles per Gallon - ",n.item.upgradeGallon.toFixed(2)," Miles"),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),lt("",n.item.Cylinders," Cylinders"),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),ca(" ",n.item.Acceleration,"s 0 - 60 mp/h - ",n.item.upgradeZeroSixty.toFixed(2),"s "),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),ca(" ",n.item.CPS.toFixed(2)," cps + ",n.item.upgradeCPS.toFixed(2),""),q(),Te("background",n.item.Color)("color",n.item.textColor),q(),lt(" Year: ",n.item.Year," "),q(2),Ze(15,n.buttonVisible?15:-1),q(),Ze(16,n.buttonVisible?-1:16)}}function M$(t,e){if(t&1){let n=wt();$(0,"div")(1,"p"),J(2,"Choose a car to upgrade"),G(),$(3,"div",4),Ie("click",function(){at(n);let r=le();return ct(r.onSelectClick())}),Me(4,D$,6,6,"div",5),G(),Me(5,A$,17,36),G()}if(t&2){let n=le();q(4),Ze(4,n.item?4:-1),q(),Ze(5,n.item?5:-1)}}function P$(t,e){if(t&1){let n=wt();$(0,"app-select-car",18),Ie("selectCar",function(r){at(n);let o=le();return ct(o.selection(r))}),G()}}var ER=(()=>{let e=class e{constructor(){this.addCoins=new $e,this.hideMap=new $e,this.buttonVisible=!0,this.selectVisible=!1,this.progress="90%"}ngOnInit(){if(localStorage.getItem("upgrade")&&localStorage.getItem("upgradeStart")&&(this.buttonVisible=!1,this.selection(JSON.parse(localStorage.getItem("upgrade")))),setInterval(()=>{if(JSON.parse(localStorage.getItem("upgradeStart"))&&this.timeRemaining>=0){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((a,c)=>{console.log(a,c),a.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(JSON.stringify(o)),o.push(this.item);let a=localStorage.getItem("cps");a=a+this.item.upgradeCPS,localStorage.setItem("cps",a),localStorage.setItem("mycars",JSON.stringify(o))},500)}}},500),JSON.parse(localStorage.getItem("upgradeStart"))){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((a,c)=>{console.log(a,c),a.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(o),o.push(this.item);let a=localStorage.getItem("cps");a=a+this.item.upgradeCPS,localStorage.setItem("cps",a),localStorage.setItem("mycars",JSON.stringify(o))},500)}}}onButtonDoneClick(){console.log("done"),this.timeRemaining<=0&&(localStorage.removeItem("upgrade"),localStorage.removeItem("upgradeStart"),console.log("done"),this.hideMap.emit("exit"))}onSelectClick(){this.buttonVisible&&(console.log("onSelectClick"),this.selectVisible=!0)}selection(i){this.selectVisible=!1,console.log(i),this.item=i,this.upgradeValues(),this.timeRemaining>0&&(this.progress=`${this.timeRemaining}`)}onUpgradeCLick(){localStorage.getItem("coins")>this.item.upgradePrice&&(this.item&&localStorage.setItem("upgrade",JSON.stringify(this.item)),localStorage.setItem("upgradeStart",JSON.stringify(new Date)),this.addCoins.emit(-1*this.item.upgradePrice),this.buttonVisible=!1,this.item.level?this.item={Acceleration:this.item.Acceleration-this.item.upgradeZeroSixty,CPS:this.item.CPS+this.item.upgradeCPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower+this.item.upgradeHp,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.25,upgradeTime:28800,upgradePrice:25e4}:this.item={Acceleration:this.item.Acceleration-this.item.Acceleration*.05,CPS:this.item.CPS+(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*(+this.item.Cylinders/1e3),Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower+this.item.Horsepower*.25,Miles_per_Gallon:this.item.Miles_per_Gallon+this.item.Miles_per_Gallon*.15,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower+this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*(+this.item.Cylinders/1e3),upgradeZeroSixty:this.item.Acceleration*.05,upgradeTime:28800,upgradePrice:25e4},setInterval(()=>{if(JSON.parse(localStorage.getItem("upgradeStart"))&&this.timeRemaining>=0){let i=new Date,r=new Date(JSON.parse(localStorage.getItem("upgradeStart")));if(this.timeRemaining=this.item.upgradeTime-(+i.getTime()/1e3-r.getTime()/1e3),console.log(this.timeRemaining,new Date(JSON.parse(localStorage.getItem("upgradeStart"))),i.getTime()),this.timeRemaining<=0){let o=JSON.parse(localStorage.getItem("mycars"));o.forEach((a,c)=>{console.log(a,c),a.Name==this.item.Name&&(this.selectedIndex=c)}),setTimeout(()=>{o.splice(this.selectedIndex,1),console.log(JSON.stringify(o)),o.push(this.item);let a=localStorage.getItem("cps");a=a+this.item.upgradeCPS,localStorage.setItem("cps",a),localStorage.setItem("mycars",JSON.stringify(o))},500)}}},500))}upgradeValues(){this.item.level?this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.25,upgradeTime:this.item.upgradeTime*2,upgradePrice:this.item.upgradePrice*1.5,level:this.item.level+1}:this.item={Acceleration:this.item.Acceleration,CPS:this.item.CPS,Color:this.item.Color,Cylinders:this.item.Cylinders,Displacement:this.item.Displacement,Horsepower:this.item.Horsepower,Miles_per_Gallon:this.item.Miles_per_Gallon,Name:this.item.Name,Origin:this.item.Origin,Path:this.item.Path,Rarity:this.item.Rarity,Type:this.item.Type,Weight_in_lbs:this.item.Weight_in_lbs,Year:this.item.Year,textColor:this.item.textColor,upgradeHp:this.item.Horsepower*.25,upgradeGallon:this.item.Miles_per_Gallon*.15,upgradeCPS:(+this.item.Horsepower+ +this.item.Horsepower*.25)*(+this.item.Acceleration-+(this.item.Acceleration*.25))*+this.item.Cylinders/1e3,upgradeZeroSixty:this.item.Acceleration*.05,upgradeTime:28800,upgradePrice:25e4,level:2}}onCloseClick(){this.hideMap.emit("exit")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=it({type:e,selectors:[["app-garage"]],outputs:{addCoins:"addCoins",hideMap:"hideMap"},standalone:!0,features:[ut],decls:6,vars:2,consts:[["id","close",3,"click"],[1,"closeBtn",3,"click"],[3,"click"],["src","../../assets/CloseBtn.png","width","40px","height","40px"],[1,"selectCar",3,"click"],["id","car",3,"background","height"],["id","car"],["width","50%","height","auto",3,"src"],[1,"upgrades"],[1,"container"],["id","HP"],["id","MPG"],["id","Cylinders"],["id","Acceleration"],["id","CPS"],["id","year"],[1,"level"],[1,"upgradeBtn"],[3,"selectCar"]],template:function(r,o){r&1&&(Me(0,M$,6,2,"div")(1,P$,1,0,"app-select-car"),$(2,"div",0),Ie("click",function(){return o.onCloseClick()}),$(3,"div",1),Ie("click",function(){return o.onCloseClick()}),$(4,"button",2),Ie("click",function(){return o.onCloseClick()}),de(5,"img",3),G()()()),r&2&&(Ze(0,o.selectVisible?-1:0),q(),Ze(1,o.selectVisible?1:-1))},dependencies:[IR,uo,xS,CR],styles:['.selectCar[_ngcontent-%COMP%]{width:20%;height:25vh;background-color:#d9d9d9;border:black solid 1px;margin:auto;min-width:150px}*[_ngcontent-%COMP%]{text-align:center}.upgrades[_ngcontent-%COMP%]{width:80%;height:auto;background-color:#d9d9d9;border:black solid 1px;margin:50px auto auto}.upgradeBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;height:10vh;background-color:#000;border-radius:50px;color:#fff}.upgradeBtn[_ngcontent-%COMP%]{margin-top:50px}#carCard[_ngcontent-%COMP%]{width:90%;position:absolute;top:5%;left:5%;z-index:5000;border:1px black solid;text-align:center}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;position:absolute;right:0}.container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;list-style:none;padding-left:0;margin-left:15px}.container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:0 0 45.3333%;outline:1px solid;margin:5px;min-height:30px;padding-top:7.5px}#progress[_ngcontent-%COMP%]{height:10vh;position:relative;top:-10vh;left:calc(50% - 185px);border-radius:50px;background-color:red;border:1px blue solid;z-index:1}#closeBtn[_ngcontent-%COMP%]{width:50px;height:50px;right:0}.closeBtn[_ngcontent-%COMP%]{position:absolute;bottom:35px;left:calc(50% - 25px)}.closeBtn[_ngcontent-%COMP%]:after{content:"";display:block;position:absolute;left:-22.5px;top:-25px;width:100px;height:100px;border-radius:43em;opacity:0;transition:all .5s;box-shadow:0 0 10px 10px #514f4f}.closeBtn[_ngcontent-%COMP%]:active:after{box-shadow:0 0 #514f4f;opacity:.75;transition:0s}button[_ngcontent-%COMP%]{background-color:transparent;border:0px}']});let t=e;return t})();function k$(t,e){if(t&1){let n=wt();$(0,"app-car-found",3),Ie("hideMap",function(r){at(n);let o=le(2);return ct(o.switchVisibile(r))})("addCoins",function(r){at(n);let o=le(2);return ct(o.addCoins(r))}),G()}}function R$(t,e){if(t&1){let n=wt();$(0,"app-my-cars",4),Ie("hideMap",function(r){at(n);let o=le(2);return ct(o.switchVisibile(r))}),G()}}function N$(t,e){if(t&1){let n=wt();$(0,"app-profile",4),Ie("hideMap",function(r){at(n);let o=le(2);return ct(o.switchVisibile(r))}),G()}}function O$(t,e){if(t&1){let n=wt();$(0,"app-friends",4),Ie("hideMap",function(r){at(n);let o=le(2);return ct(o.switchVisibile(r))}),G()}}function L$(t,e){if(t&1&&(J(0),de(1,"app-when-moving")),t&2){let n=le(2);lt(" ",n.speed," ")}}function F$(t,e){if(t&1){let n=wt();$(0,"app-garage",5),Ie("addCoins",function(r){at(n);let o=le(2);return ct(o.addSingleCoin(r))})("hideMap",function(r){at(n);let o=le(2);return ct(o.switchVisibile(r))}),G()}}function V$(t,e){if(t&1){let n=wt();$(0,"div",1)(1,"app-leaflat-map",2),Ie("hideMap",function(r){at(n);let o=le();return ct(o.switchVisibile(r))}),G(),Me(2,k$,1,0,"app-car-found")(3,R$,1,0,"app-my-cars")(4,N$,1,0)(5,O$,1,0)(6,L$,2,1)(7,F$,1,0),G()}if(t&2){let n=le();q(),Te("display",n.visible?"block":"none"),Be("coins",n.coins),q(),Ze(2,!n.visible&&n.currentVisible=="carFound"?2:-1),q(),Ze(3,!n.visible&&n.currentVisible=="garage"?3:!n.visible&&n.currentVisible=="profile"?4:!n.visible&&n.currentVisible=="friends"?5:!n.visible&&n.currentVisible=="whenMoving"?6:!n.visible&&n.currentVisible=="garageClick"?7:-1)}}function B$(t,e){if(t&1){let n=wt();$(0,"div"),J(1),de(2,"hr"),$(3,"button",7),Ie("click",function(){at(n);let r=le(2);return ct(r.auth.signOut())}),J(4,"Sign Out"),G()()}if(t&2){let n=e.ngIf;q(),lt(" ",n.jsonData,`
`)}}function j$(t,e){}function z$(t,e){if(t&1&&(Me(0,B$,5,1,"div",6),Ai(1,"async"),Me(2,j$,0,0,"ng-template",null,0,XT)),t&2){let n=dm(3),i=le();Be("ngIf",Tr(1,2,i.auth.user$))("ngIfElse",n)}}var xR=(()=>{let e=class e{constructor(i){this.auth=i,this.key=localStorage.getItem("key"),this.title="world-clicker",this.cps=0,this.coins=0,this.visible=!0}signIn(){this.auth.googleSignin(),setInterval(()=>{localStorage.getItem("key")&&window.location.reload()},500)}addSingleCoin(i){this.coins=this.coins+ +i,localStorage.setItem("coins",this.coins.toString())}addCoins(i){console.log("coin:",i),this.cps=+this.cps+ +i,localStorage.setItem("cps",this.cps.toString())}ngOnInit(){this.myCars=JSON.parse(localStorage.getItem("mycars")),navigator.geolocation.watchPosition(i=>{let r=i.coords.speed*3.6;console.log("hier",r),this.speed=r;var o;r>25?(o=!0,this.switchVisibile("whenMoving")):o==!0&&(this.switchVisibile("exit"),o=!1)}),console.log(this.auth.user$,this.auth.currentUser,this.auth.userData.subscribe(i=>{console.log("update:"),console.log(i,i.update);var r=new Date().getTime()/1e3;i.update&&(console.log(r,i.update,r-i.update),this.coins=+localStorage.getItem("coins")+ +localStorage.getItem("cps")*(r-i.update)/2,console.log(this.coins))})),localStorage.getItem("cps")&&(this.cps=Math.floor(+localStorage.getItem("cps")),this.coins=Math.floor(+localStorage.getItem("coins"))),setInterval(()=>{Math.floor(this.coins=this.coins+this.cps),localStorage.setItem("coins",this.coins.toString())},1e3),this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps")}),setInterval(()=>{var i=new Date().getTime()/1e3;this.updateUserDat({myCars:JSON.parse(localStorage.getItem("mycars")),carcount:localStorage.getItem("carcount"),coins:localStorage.getItem("coins"),cps:localStorage.getItem("cps"),update:i})},25e3)}updateUserDat(i){this.auth.addDataToUser(i)}switchVisibile(i){i=="exit"&&(this.visible=!0,this.currentVisible="exit"),i!="exit"&&(this.visible=!1,this.currentVisible=i),console.log(i),console.log(this.visible),console.log(this.visible)}};e.\u0275fac=function(r){return new(r||e)(_e(pi))},e.\u0275cmp=it({type:e,selectors:[["app-root"]],standalone:!0,features:[ut],decls:2,vars:1,consts:[["login",""],[1,"App"],[3,"hideMap","coins"],[3,"hideMap","addCoins"],[3,"hideMap"],[3,"addCoins","hideMap"],[4,"ngIf","ngIfElse"],[1,"button",3,"click"]],template:function(r,o){r&1&&Me(0,V$,8,5,"div",1)(1,z$,4,4),r&2&&Ze(0,o.key?0:1)},dependencies:[ER,sR,cR,uR,uo,wS,CS,hR,pR,wR],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code[_ngcontent-%COMP%]{font-family:source-code-pro,Menlo,Monaco,Consolas,Courier New,monospace}.App[_ngcontent-%COMP%]{text-align:center}app-leaflet-map[_ngcontent-%COMP%]{height:100%}.push[_ngcontent-%COMP%]{height:calc(100% - 150px)}app-navigation[_ngcontent-%COMP%]{width:100%;height:100px;left:0;z-index:545}.gsi-material-button[_ngcontent-%COMP%]{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;-webkit-appearance:none;background-color:#fff;background-image:none;border:1px solid #747775;-webkit-border-radius:20px;border-radius:20px;-webkit-box-sizing:border-box;box-sizing:border-box;color:#1f1f1f;cursor:pointer;font-family:Roboto,arial,sans-serif;font-size:14px;height:40px;letter-spacing:.25px;outline:none;overflow:hidden;padding:0 12px;position:relative;text-align:center;-webkit-transition:background-color .218s,border-color .218s,box-shadow .218s;transition:background-color .218s,border-color .218s,box-shadow .218s;vertical-align:middle;white-space:nowrap;width:auto;max-width:400px;min-width:min-content}button[_ngcontent-%COMP%]{position:absolute;left:30%;top:45vh}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-icon[_ngcontent-%COMP%]{height:20px;margin-right:12px;min-width:20px;width:20px}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-content-wrapper[_ngcontent-%COMP%]{-webkit-align-items:center;align-items:center;display:flex;-webkit-flex-direction:row;flex-direction:row;-webkit-flex-wrap:nowrap;flex-wrap:nowrap;height:100%;justify-content:space-between;position:relative;width:100%}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-contents[_ngcontent-%COMP%]{-webkit-flex-grow:1;flex-grow:1;font-family:Roboto,arial,sans-serif;font-weight:500;overflow:hidden;text-overflow:ellipsis;vertical-align:top}.gsi-material-button[_ngcontent-%COMP%]   .gsi-material-button-state[_ngcontent-%COMP%]{-webkit-transition:opacity .218s;transition:opacity .218s;inset:0;opacity:0;position:absolute}.gsi-material-button[_ngcontent-%COMP%]:disabled{cursor:default;background-color:#ffffff61;border-color:#1f1f1f1f}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-contents[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:disabled   .gsi-material-button-icon[_ngcontent-%COMP%]{opacity:38%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):active   .gsi-material-button-state[_ngcontent-%COMP%], .gsi-material-button[_ngcontent-%COMP%]:not(:disabled):focus   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:12%}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover{-webkit-box-shadow:0 1px 2px 0 rgba(60,64,67,.3),0 1px 3px 1px rgba(60,64,67,.15);box-shadow:0 1px 2px #3c40434d,0 1px 3px 1px #3c404326}.gsi-material-button[_ngcontent-%COMP%]:not(:disabled):hover   .gsi-material-button-state[_ngcontent-%COMP%]{background-color:#303030;opacity:8%}"]});let t=e;return t})();LS(xR,CA).catch(t=>console.error(t));
>>>>>>>> 0d525a8 (Autocommit):www/browser/main-X5RJEX2D.js
